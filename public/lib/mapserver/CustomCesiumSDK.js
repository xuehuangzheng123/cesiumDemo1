(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.CustomMap = f()}})(function(){var define,module,exports;return (function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c="function"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){
'use strict'

exports.byteLength = byteLength
exports.toByteArray = toByteArray
exports.fromByteArray = fromByteArray

var lookup = []
var revLookup = []
var Arr = typeof Uint8Array !== 'undefined' ? Uint8Array : Array

var code = 'ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/'
for (var i = 0, len = code.length; i < len; ++i) {
  lookup[i] = code[i]
  revLookup[code.charCodeAt(i)] = i
}

// Support decoding URL-safe base64 strings, as Node.js does.
// See: https://en.wikipedia.org/wiki/Base64#URL_applications
revLookup['-'.charCodeAt(0)] = 62
revLookup['_'.charCodeAt(0)] = 63

function getLens (b64) {
  var len = b64.length

  if (len % 4 > 0) {
    throw new Error('Invalid string. Length must be a multiple of 4')
  }

  // Trim off extra bytes after placeholder bytes are found
  // See: https://github.com/beatgammit/base64-js/issues/42
  var validLen = b64.indexOf('=')
  if (validLen === -1) validLen = len

  var placeHoldersLen = validLen === len
    ? 0
    : 4 - (validLen % 4)

  return [validLen, placeHoldersLen]
}

// base64 is 4/3 + up to two characters of the original data
function byteLength (b64) {
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function _byteLength (b64, validLen, placeHoldersLen) {
  return ((validLen + placeHoldersLen) * 3 / 4) - placeHoldersLen
}

function toByteArray (b64) {
  var tmp
  var lens = getLens(b64)
  var validLen = lens[0]
  var placeHoldersLen = lens[1]

  var arr = new Arr(_byteLength(b64, validLen, placeHoldersLen))

  var curByte = 0

  // if there are placeholders, only get up to the last complete 4 chars
  var len = placeHoldersLen > 0
    ? validLen - 4
    : validLen

  var i
  for (i = 0; i < len; i += 4) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 18) |
      (revLookup[b64.charCodeAt(i + 1)] << 12) |
      (revLookup[b64.charCodeAt(i + 2)] << 6) |
      revLookup[b64.charCodeAt(i + 3)]
    arr[curByte++] = (tmp >> 16) & 0xFF
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 2) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 2) |
      (revLookup[b64.charCodeAt(i + 1)] >> 4)
    arr[curByte++] = tmp & 0xFF
  }

  if (placeHoldersLen === 1) {
    tmp =
      (revLookup[b64.charCodeAt(i)] << 10) |
      (revLookup[b64.charCodeAt(i + 1)] << 4) |
      (revLookup[b64.charCodeAt(i + 2)] >> 2)
    arr[curByte++] = (tmp >> 8) & 0xFF
    arr[curByte++] = tmp & 0xFF
  }

  return arr
}

function tripletToBase64 (num) {
  return lookup[num >> 18 & 0x3F] +
    lookup[num >> 12 & 0x3F] +
    lookup[num >> 6 & 0x3F] +
    lookup[num & 0x3F]
}

function encodeChunk (uint8, start, end) {
  var tmp
  var output = []
  for (var i = start; i < end; i += 3) {
    tmp =
      ((uint8[i] << 16) & 0xFF0000) +
      ((uint8[i + 1] << 8) & 0xFF00) +
      (uint8[i + 2] & 0xFF)
    output.push(tripletToBase64(tmp))
  }
  return output.join('')
}

function fromByteArray (uint8) {
  var tmp
  var len = uint8.length
  var extraBytes = len % 3 // if we have 1 byte left, pad 2 bytes
  var parts = []
  var maxChunkLength = 16383 // must be multiple of 3

  // go through the array every three bytes, we'll deal with trailing stuff later
  for (var i = 0, len2 = len - extraBytes; i < len2; i += maxChunkLength) {
    parts.push(encodeChunk(uint8, i, (i + maxChunkLength) > len2 ? len2 : (i + maxChunkLength)))
  }

  // pad the end with zeros, but make sure to not forget the extra bytes
  if (extraBytes === 1) {
    tmp = uint8[len - 1]
    parts.push(
      lookup[tmp >> 2] +
      lookup[(tmp << 4) & 0x3F] +
      '=='
    )
  } else if (extraBytes === 2) {
    tmp = (uint8[len - 2] << 8) + uint8[len - 1]
    parts.push(
      lookup[tmp >> 10] +
      lookup[(tmp >> 4) & 0x3F] +
      lookup[(tmp << 2) & 0x3F] +
      '='
    )
  }

  return parts.join('')
}

},{}],2:[function(require,module,exports){
(function (Buffer){(function (){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <https://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */

'use strict'

var base64 = require('base64-js')
var ieee754 = require('ieee754')

exports.Buffer = Buffer
exports.SlowBuffer = SlowBuffer
exports.INSPECT_MAX_BYTES = 50

var K_MAX_LENGTH = 0x7fffffff
exports.kMaxLength = K_MAX_LENGTH

/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Print warning and recommend using `buffer` v4.x which has an Object
 *               implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * We report that the browser does not support typed arrays if the are not subclassable
 * using __proto__. Firefox 4-29 lacks support for adding new properties to `Uint8Array`
 * (See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438). IE 10 lacks support
 * for __proto__ and has a buggy typed array implementation.
 */
Buffer.TYPED_ARRAY_SUPPORT = typedArraySupport()

if (!Buffer.TYPED_ARRAY_SUPPORT && typeof console !== 'undefined' &&
    typeof console.error === 'function') {
  console.error(
    'This browser lacks typed array (Uint8Array) support which is required by ' +
    '`buffer` v5.x. Use `buffer` v4.x if you require old browser support.'
  )
}

function typedArraySupport () {
  // Can typed array instances can be augmented?
  try {
    var arr = new Uint8Array(1)
    arr.__proto__ = { __proto__: Uint8Array.prototype, foo: function () { return 42 } }
    return arr.foo() === 42
  } catch (e) {
    return false
  }
}

Object.defineProperty(Buffer.prototype, 'parent', {
  enumerable: true,
  get: function () {
    if (!Buffer.isBuffer(this)) return undefined
    return this.buffer
  }
})

Object.defineProperty(Buffer.prototype, 'offset', {
  enumerable: true,
  get: function () {
    if (!Buffer.isBuffer(this)) return undefined
    return this.byteOffset
  }
})

function createBuffer (length) {
  if (length > K_MAX_LENGTH) {
    throw new RangeError('The value "' + length + '" is invalid for option "size"')
  }
  // Return an augmented `Uint8Array` instance
  var buf = new Uint8Array(length)
  buf.__proto__ = Buffer.prototype
  return buf
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

function Buffer (arg, encodingOrOffset, length) {
  // Common case.
  if (typeof arg === 'number') {
    if (typeof encodingOrOffset === 'string') {
      throw new TypeError(
        'The "string" argument must be of type string. Received type number'
      )
    }
    return allocUnsafe(arg)
  }
  return from(arg, encodingOrOffset, length)
}

// Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
if (typeof Symbol !== 'undefined' && Symbol.species != null &&
    Buffer[Symbol.species] === Buffer) {
  Object.defineProperty(Buffer, Symbol.species, {
    value: null,
    configurable: true,
    enumerable: false,
    writable: false
  })
}

Buffer.poolSize = 8192 // not used by this implementation

function from (value, encodingOrOffset, length) {
  if (typeof value === 'string') {
    return fromString(value, encodingOrOffset)
  }

  if (ArrayBuffer.isView(value)) {
    return fromArrayLike(value)
  }

  if (value == null) {
    throw TypeError(
      'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +
      'or Array-like Object. Received type ' + (typeof value)
    )
  }

  if (isInstance(value, ArrayBuffer) ||
      (value && isInstance(value.buffer, ArrayBuffer))) {
    return fromArrayBuffer(value, encodingOrOffset, length)
  }

  if (typeof value === 'number') {
    throw new TypeError(
      'The "value" argument must not be of type number. Received type number'
    )
  }

  var valueOf = value.valueOf && value.valueOf()
  if (valueOf != null && valueOf !== value) {
    return Buffer.from(valueOf, encodingOrOffset, length)
  }

  var b = fromObject(value)
  if (b) return b

  if (typeof Symbol !== 'undefined' && Symbol.toPrimitive != null &&
      typeof value[Symbol.toPrimitive] === 'function') {
    return Buffer.from(
      value[Symbol.toPrimitive]('string'), encodingOrOffset, length
    )
  }

  throw new TypeError(
    'The first argument must be one of type string, Buffer, ArrayBuffer, Array, ' +
    'or Array-like Object. Received type ' + (typeof value)
  )
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
  return from(value, encodingOrOffset, length)
}

// Note: Change prototype *after* Buffer.from is defined to workaround Chrome bug:
// https://github.com/feross/buffer/pull/148
Buffer.prototype.__proto__ = Uint8Array.prototype
Buffer.__proto__ = Uint8Array

function assertSize (size) {
  if (typeof size !== 'number') {
    throw new TypeError('"size" argument must be of type number')
  } else if (size < 0) {
    throw new RangeError('The value "' + size + '" is invalid for option "size"')
  }
}

function alloc (size, fill, encoding) {
  assertSize(size)
  if (size <= 0) {
    return createBuffer(size)
  }
  if (fill !== undefined) {
    // Only pay attention to encoding if it's a string. This
    // prevents accidentally sending in a number that would
    // be interpretted as a start offset.
    return typeof encoding === 'string'
      ? createBuffer(size).fill(fill, encoding)
      : createBuffer(size).fill(fill)
  }
  return createBuffer(size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
  return alloc(size, fill, encoding)
}

function allocUnsafe (size) {
  assertSize(size)
  return createBuffer(size < 0 ? 0 : checked(size) | 0)
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
  return allocUnsafe(size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
  return allocUnsafe(size)
}

function fromString (string, encoding) {
  if (typeof encoding !== 'string' || encoding === '') {
    encoding = 'utf8'
  }

  if (!Buffer.isEncoding(encoding)) {
    throw new TypeError('Unknown encoding: ' + encoding)
  }

  var length = byteLength(string, encoding) | 0
  var buf = createBuffer(length)

  var actual = buf.write(string, encoding)

  if (actual !== length) {
    // Writing a hex string, for example, that contains invalid characters will
    // cause everything after the first invalid character to be ignored. (e.g.
    // 'abxxcd' will be treated as 'ab')
    buf = buf.slice(0, actual)
  }

  return buf
}

function fromArrayLike (array) {
  var length = array.length < 0 ? 0 : checked(array.length) | 0
  var buf = createBuffer(length)
  for (var i = 0; i < length; i += 1) {
    buf[i] = array[i] & 255
  }
  return buf
}

function fromArrayBuffer (array, byteOffset, length) {
  if (byteOffset < 0 || array.byteLength < byteOffset) {
    throw new RangeError('"offset" is outside of buffer bounds')
  }

  if (array.byteLength < byteOffset + (length || 0)) {
    throw new RangeError('"length" is outside of buffer bounds')
  }

  var buf
  if (byteOffset === undefined && length === undefined) {
    buf = new Uint8Array(array)
  } else if (length === undefined) {
    buf = new Uint8Array(array, byteOffset)
  } else {
    buf = new Uint8Array(array, byteOffset, length)
  }

  // Return an augmented `Uint8Array` instance
  buf.__proto__ = Buffer.prototype
  return buf
}

function fromObject (obj) {
  if (Buffer.isBuffer(obj)) {
    var len = checked(obj.length) | 0
    var buf = createBuffer(len)

    if (buf.length === 0) {
      return buf
    }

    obj.copy(buf, 0, 0, len)
    return buf
  }

  if (obj.length !== undefined) {
    if (typeof obj.length !== 'number' || numberIsNaN(obj.length)) {
      return createBuffer(0)
    }
    return fromArrayLike(obj)
  }

  if (obj.type === 'Buffer' && Array.isArray(obj.data)) {
    return fromArrayLike(obj.data)
  }
}

function checked (length) {
  // Note: cannot use `length < K_MAX_LENGTH` here because that fails when
  // length is NaN (which is otherwise coerced to zero.)
  if (length >= K_MAX_LENGTH) {
    throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
                         'size: 0x' + K_MAX_LENGTH.toString(16) + ' bytes')
  }
  return length | 0
}

function SlowBuffer (length) {
  if (+length != length) { // eslint-disable-line eqeqeq
    length = 0
  }
  return Buffer.alloc(+length)
}

Buffer.isBuffer = function isBuffer (b) {
  return b != null && b._isBuffer === true &&
    b !== Buffer.prototype // so Buffer.isBuffer(Buffer.prototype) will be false
}

Buffer.compare = function compare (a, b) {
  if (isInstance(a, Uint8Array)) a = Buffer.from(a, a.offset, a.byteLength)
  if (isInstance(b, Uint8Array)) b = Buffer.from(b, b.offset, b.byteLength)
  if (!Buffer.isBuffer(a) || !Buffer.isBuffer(b)) {
    throw new TypeError(
      'The "buf1", "buf2" arguments must be one of type Buffer or Uint8Array'
    )
  }

  if (a === b) return 0

  var x = a.length
  var y = b.length

  for (var i = 0, len = Math.min(x, y); i < len; ++i) {
    if (a[i] !== b[i]) {
      x = a[i]
      y = b[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
  switch (String(encoding).toLowerCase()) {
    case 'hex':
    case 'utf8':
    case 'utf-8':
    case 'ascii':
    case 'latin1':
    case 'binary':
    case 'base64':
    case 'ucs2':
    case 'ucs-2':
    case 'utf16le':
    case 'utf-16le':
      return true
    default:
      return false
  }
}

Buffer.concat = function concat (list, length) {
  if (!Array.isArray(list)) {
    throw new TypeError('"list" argument must be an Array of Buffers')
  }

  if (list.length === 0) {
    return Buffer.alloc(0)
  }

  var i
  if (length === undefined) {
    length = 0
    for (i = 0; i < list.length; ++i) {
      length += list[i].length
    }
  }

  var buffer = Buffer.allocUnsafe(length)
  var pos = 0
  for (i = 0; i < list.length; ++i) {
    var buf = list[i]
    if (isInstance(buf, Uint8Array)) {
      buf = Buffer.from(buf)
    }
    if (!Buffer.isBuffer(buf)) {
      throw new TypeError('"list" argument must be an Array of Buffers')
    }
    buf.copy(buffer, pos)
    pos += buf.length
  }
  return buffer
}

function byteLength (string, encoding) {
  if (Buffer.isBuffer(string)) {
    return string.length
  }
  if (ArrayBuffer.isView(string) || isInstance(string, ArrayBuffer)) {
    return string.byteLength
  }
  if (typeof string !== 'string') {
    throw new TypeError(
      'The "string" argument must be one of type string, Buffer, or ArrayBuffer. ' +
      'Received type ' + typeof string
    )
  }

  var len = string.length
  var mustMatch = (arguments.length > 2 && arguments[2] === true)
  if (!mustMatch && len === 0) return 0

  // Use a for loop to avoid recursion
  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'ascii':
      case 'latin1':
      case 'binary':
        return len
      case 'utf8':
      case 'utf-8':
        return utf8ToBytes(string).length
      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return len * 2
      case 'hex':
        return len >>> 1
      case 'base64':
        return base64ToBytes(string).length
      default:
        if (loweredCase) {
          return mustMatch ? -1 : utf8ToBytes(string).length // assume utf8
        }
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
  var loweredCase = false

  // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
  // property of a typed array.

  // This behaves neither like String nor Uint8Array in that we set start/end
  // to their upper/lower bounds if the value passed is out of range.
  // undefined is handled specially as per ECMA-262 6th Edition,
  // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
  if (start === undefined || start < 0) {
    start = 0
  }
  // Return early if start > this.length. Done here to prevent potential uint32
  // coercion fail below.
  if (start > this.length) {
    return ''
  }

  if (end === undefined || end > this.length) {
    end = this.length
  }

  if (end <= 0) {
    return ''
  }

  // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
  end >>>= 0
  start >>>= 0

  if (end <= start) {
    return ''
  }

  if (!encoding) encoding = 'utf8'

  while (true) {
    switch (encoding) {
      case 'hex':
        return hexSlice(this, start, end)

      case 'utf8':
      case 'utf-8':
        return utf8Slice(this, start, end)

      case 'ascii':
        return asciiSlice(this, start, end)

      case 'latin1':
      case 'binary':
        return latin1Slice(this, start, end)

      case 'base64':
        return base64Slice(this, start, end)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return utf16leSlice(this, start, end)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = (encoding + '').toLowerCase()
        loweredCase = true
    }
  }
}

// This property is used by `Buffer.isBuffer` (and the `is-buffer` npm package)
// to detect a Buffer instance. It's not possible to use `instanceof Buffer`
// reliably in a browserify context because there could be multiple different
// copies of the 'buffer' package in use. This method works even for Buffer
// instances that were created from another copy of the `buffer` package.
// See: https://github.com/feross/buffer/issues/154
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
  var i = b[n]
  b[n] = b[m]
  b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
  var len = this.length
  if (len % 2 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 16-bits')
  }
  for (var i = 0; i < len; i += 2) {
    swap(this, i, i + 1)
  }
  return this
}

Buffer.prototype.swap32 = function swap32 () {
  var len = this.length
  if (len % 4 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 32-bits')
  }
  for (var i = 0; i < len; i += 4) {
    swap(this, i, i + 3)
    swap(this, i + 1, i + 2)
  }
  return this
}

Buffer.prototype.swap64 = function swap64 () {
  var len = this.length
  if (len % 8 !== 0) {
    throw new RangeError('Buffer size must be a multiple of 64-bits')
  }
  for (var i = 0; i < len; i += 8) {
    swap(this, i, i + 7)
    swap(this, i + 1, i + 6)
    swap(this, i + 2, i + 5)
    swap(this, i + 3, i + 4)
  }
  return this
}

Buffer.prototype.toString = function toString () {
  var length = this.length
  if (length === 0) return ''
  if (arguments.length === 0) return utf8Slice(this, 0, length)
  return slowToString.apply(this, arguments)
}

Buffer.prototype.toLocaleString = Buffer.prototype.toString

Buffer.prototype.equals = function equals (b) {
  if (!Buffer.isBuffer(b)) throw new TypeError('Argument must be a Buffer')
  if (this === b) return true
  return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
  var str = ''
  var max = exports.INSPECT_MAX_BYTES
  str = this.toString('hex', 0, max).replace(/(.{2})/g, '$1 ').trim()
  if (this.length > max) str += ' ... '
  return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
  if (isInstance(target, Uint8Array)) {
    target = Buffer.from(target, target.offset, target.byteLength)
  }
  if (!Buffer.isBuffer(target)) {
    throw new TypeError(
      'The "target" argument must be one of type Buffer or Uint8Array. ' +
      'Received type ' + (typeof target)
    )
  }

  if (start === undefined) {
    start = 0
  }
  if (end === undefined) {
    end = target ? target.length : 0
  }
  if (thisStart === undefined) {
    thisStart = 0
  }
  if (thisEnd === undefined) {
    thisEnd = this.length
  }

  if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
    throw new RangeError('out of range index')
  }

  if (thisStart >= thisEnd && start >= end) {
    return 0
  }
  if (thisStart >= thisEnd) {
    return -1
  }
  if (start >= end) {
    return 1
  }

  start >>>= 0
  end >>>= 0
  thisStart >>>= 0
  thisEnd >>>= 0

  if (this === target) return 0

  var x = thisEnd - thisStart
  var y = end - start
  var len = Math.min(x, y)

  var thisCopy = this.slice(thisStart, thisEnd)
  var targetCopy = target.slice(start, end)

  for (var i = 0; i < len; ++i) {
    if (thisCopy[i] !== targetCopy[i]) {
      x = thisCopy[i]
      y = targetCopy[i]
      break
    }
  }

  if (x < y) return -1
  if (y < x) return 1
  return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
  // Empty buffer means no match
  if (buffer.length === 0) return -1

  // Normalize byteOffset
  if (typeof byteOffset === 'string') {
    encoding = byteOffset
    byteOffset = 0
  } else if (byteOffset > 0x7fffffff) {
    byteOffset = 0x7fffffff
  } else if (byteOffset < -0x80000000) {
    byteOffset = -0x80000000
  }
  byteOffset = +byteOffset // Coerce to Number.
  if (numberIsNaN(byteOffset)) {
    // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
    byteOffset = dir ? 0 : (buffer.length - 1)
  }

  // Normalize byteOffset: negative offsets start from the end of the buffer
  if (byteOffset < 0) byteOffset = buffer.length + byteOffset
  if (byteOffset >= buffer.length) {
    if (dir) return -1
    else byteOffset = buffer.length - 1
  } else if (byteOffset < 0) {
    if (dir) byteOffset = 0
    else return -1
  }

  // Normalize val
  if (typeof val === 'string') {
    val = Buffer.from(val, encoding)
  }

  // Finally, search either indexOf (if dir is true) or lastIndexOf
  if (Buffer.isBuffer(val)) {
    // Special case: looking for empty string/buffer always fails
    if (val.length === 0) {
      return -1
    }
    return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
  } else if (typeof val === 'number') {
    val = val & 0xFF // Search for a byte value [0-255]
    if (typeof Uint8Array.prototype.indexOf === 'function') {
      if (dir) {
        return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
      } else {
        return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
      }
    }
    return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
  }

  throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
  var indexSize = 1
  var arrLength = arr.length
  var valLength = val.length

  if (encoding !== undefined) {
    encoding = String(encoding).toLowerCase()
    if (encoding === 'ucs2' || encoding === 'ucs-2' ||
        encoding === 'utf16le' || encoding === 'utf-16le') {
      if (arr.length < 2 || val.length < 2) {
        return -1
      }
      indexSize = 2
      arrLength /= 2
      valLength /= 2
      byteOffset /= 2
    }
  }

  function read (buf, i) {
    if (indexSize === 1) {
      return buf[i]
    } else {
      return buf.readUInt16BE(i * indexSize)
    }
  }

  var i
  if (dir) {
    var foundIndex = -1
    for (i = byteOffset; i < arrLength; i++) {
      if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
        if (foundIndex === -1) foundIndex = i
        if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
      } else {
        if (foundIndex !== -1) i -= i - foundIndex
        foundIndex = -1
      }
    }
  } else {
    if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
    for (i = byteOffset; i >= 0; i--) {
      var found = true
      for (var j = 0; j < valLength; j++) {
        if (read(arr, i + j) !== read(val, j)) {
          found = false
          break
        }
      }
      if (found) return i
    }
  }

  return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
  return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
  return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
  offset = Number(offset) || 0
  var remaining = buf.length - offset
  if (!length) {
    length = remaining
  } else {
    length = Number(length)
    if (length > remaining) {
      length = remaining
    }
  }

  var strLen = string.length

  if (length > strLen / 2) {
    length = strLen / 2
  }
  for (var i = 0; i < length; ++i) {
    var parsed = parseInt(string.substr(i * 2, 2), 16)
    if (numberIsNaN(parsed)) return i
    buf[offset + i] = parsed
  }
  return i
}

function utf8Write (buf, string, offset, length) {
  return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
  return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
  return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
  return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
  return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
  // Buffer#write(string)
  if (offset === undefined) {
    encoding = 'utf8'
    length = this.length
    offset = 0
  // Buffer#write(string, encoding)
  } else if (length === undefined && typeof offset === 'string') {
    encoding = offset
    length = this.length
    offset = 0
  // Buffer#write(string, offset[, length][, encoding])
  } else if (isFinite(offset)) {
    offset = offset >>> 0
    if (isFinite(length)) {
      length = length >>> 0
      if (encoding === undefined) encoding = 'utf8'
    } else {
      encoding = length
      length = undefined
    }
  } else {
    throw new Error(
      'Buffer.write(string, encoding, offset[, length]) is no longer supported'
    )
  }

  var remaining = this.length - offset
  if (length === undefined || length > remaining) length = remaining

  if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
    throw new RangeError('Attempt to write outside buffer bounds')
  }

  if (!encoding) encoding = 'utf8'

  var loweredCase = false
  for (;;) {
    switch (encoding) {
      case 'hex':
        return hexWrite(this, string, offset, length)

      case 'utf8':
      case 'utf-8':
        return utf8Write(this, string, offset, length)

      case 'ascii':
        return asciiWrite(this, string, offset, length)

      case 'latin1':
      case 'binary':
        return latin1Write(this, string, offset, length)

      case 'base64':
        // Warning: maxLength not taken into account in base64Write
        return base64Write(this, string, offset, length)

      case 'ucs2':
      case 'ucs-2':
      case 'utf16le':
      case 'utf-16le':
        return ucs2Write(this, string, offset, length)

      default:
        if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
        encoding = ('' + encoding).toLowerCase()
        loweredCase = true
    }
  }
}

Buffer.prototype.toJSON = function toJSON () {
  return {
    type: 'Buffer',
    data: Array.prototype.slice.call(this._arr || this, 0)
  }
}

function base64Slice (buf, start, end) {
  if (start === 0 && end === buf.length) {
    return base64.fromByteArray(buf)
  } else {
    return base64.fromByteArray(buf.slice(start, end))
  }
}

function utf8Slice (buf, start, end) {
  end = Math.min(buf.length, end)
  var res = []

  var i = start
  while (i < end) {
    var firstByte = buf[i]
    var codePoint = null
    var bytesPerSequence = (firstByte > 0xEF) ? 4
      : (firstByte > 0xDF) ? 3
        : (firstByte > 0xBF) ? 2
          : 1

    if (i + bytesPerSequence <= end) {
      var secondByte, thirdByte, fourthByte, tempCodePoint

      switch (bytesPerSequence) {
        case 1:
          if (firstByte < 0x80) {
            codePoint = firstByte
          }
          break
        case 2:
          secondByte = buf[i + 1]
          if ((secondByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
            if (tempCodePoint > 0x7F) {
              codePoint = tempCodePoint
            }
          }
          break
        case 3:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
            if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
              codePoint = tempCodePoint
            }
          }
          break
        case 4:
          secondByte = buf[i + 1]
          thirdByte = buf[i + 2]
          fourthByte = buf[i + 3]
          if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
            tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
            if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
              codePoint = tempCodePoint
            }
          }
      }
    }

    if (codePoint === null) {
      // we did not generate a valid codePoint so insert a
      // replacement char (U+FFFD) and advance only 1 byte
      codePoint = 0xFFFD
      bytesPerSequence = 1
    } else if (codePoint > 0xFFFF) {
      // encode to utf16 (surrogate pair dance)
      codePoint -= 0x10000
      res.push(codePoint >>> 10 & 0x3FF | 0xD800)
      codePoint = 0xDC00 | codePoint & 0x3FF
    }

    res.push(codePoint)
    i += bytesPerSequence
  }

  return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
  var len = codePoints.length
  if (len <= MAX_ARGUMENTS_LENGTH) {
    return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
  }

  // Decode in chunks to avoid "call stack size exceeded".
  var res = ''
  var i = 0
  while (i < len) {
    res += String.fromCharCode.apply(
      String,
      codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
    )
  }
  return res
}

function asciiSlice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i] & 0x7F)
  }
  return ret
}

function latin1Slice (buf, start, end) {
  var ret = ''
  end = Math.min(buf.length, end)

  for (var i = start; i < end; ++i) {
    ret += String.fromCharCode(buf[i])
  }
  return ret
}

function hexSlice (buf, start, end) {
  var len = buf.length

  if (!start || start < 0) start = 0
  if (!end || end < 0 || end > len) end = len

  var out = ''
  for (var i = start; i < end; ++i) {
    out += toHex(buf[i])
  }
  return out
}

function utf16leSlice (buf, start, end) {
  var bytes = buf.slice(start, end)
  var res = ''
  for (var i = 0; i < bytes.length; i += 2) {
    res += String.fromCharCode(bytes[i] + (bytes[i + 1] * 256))
  }
  return res
}

Buffer.prototype.slice = function slice (start, end) {
  var len = this.length
  start = ~~start
  end = end === undefined ? len : ~~end

  if (start < 0) {
    start += len
    if (start < 0) start = 0
  } else if (start > len) {
    start = len
  }

  if (end < 0) {
    end += len
    if (end < 0) end = 0
  } else if (end > len) {
    end = len
  }

  if (end < start) end = start

  var newBuf = this.subarray(start, end)
  // Return an augmented `Uint8Array` instance
  newBuf.__proto__ = Buffer.prototype
  return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
  if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
  if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }

  return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert) {
    checkOffset(offset, byteLength, this.length)
  }

  var val = this[offset + --byteLength]
  var mul = 1
  while (byteLength > 0 && (mul *= 0x100)) {
    val += this[offset + --byteLength] * mul
  }

  return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 1, this.length)
  return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 2, this.length)
  return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 2, this.length)
  return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 4, this.length)

  return ((this[offset]) |
      (this[offset + 1] << 8) |
      (this[offset + 2] << 16)) +
      (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] * 0x1000000) +
    ((this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var val = this[offset]
  var mul = 1
  var i = 0
  while (++i < byteLength && (mul *= 0x100)) {
    val += this[offset + i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert) checkOffset(offset, byteLength, this.length)

  var i = byteLength
  var mul = 1
  var val = this[offset + --i]
  while (i > 0 && (mul *= 0x100)) {
    val += this[offset + --i] * mul
  }
  mul *= 0x80

  if (val >= mul) val -= Math.pow(2, 8 * byteLength)

  return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 1, this.length)
  if (!(this[offset] & 0x80)) return (this[offset])
  return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset] | (this[offset + 1] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 2, this.length)
  var val = this[offset + 1] | (this[offset] << 8)
  return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset]) |
    (this[offset + 1] << 8) |
    (this[offset + 2] << 16) |
    (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 4, this.length)

  return (this[offset] << 24) |
    (this[offset + 1] << 16) |
    (this[offset + 2] << 8) |
    (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 4, this.length)
  return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
  offset = offset >>> 0
  if (!noAssert) checkOffset(offset, 8, this.length)
  return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
  if (!Buffer.isBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
  if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var mul = 1
  var i = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  byteLength = byteLength >>> 0
  if (!noAssert) {
    var maxBytes = Math.pow(2, 8 * byteLength) - 1
    checkInt(this, value, offset, byteLength, maxBytes, 0)
  }

  var i = byteLength - 1
  var mul = 1
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    this[offset + i] = (value / mul) & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  this[offset] = (value & 0xff)
  this[offset + 1] = (value >>> 8)
  return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
  this[offset] = (value >>> 8)
  this[offset + 1] = (value & 0xff)
  return offset + 2
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  this[offset + 3] = (value >>> 24)
  this[offset + 2] = (value >>> 16)
  this[offset + 1] = (value >>> 8)
  this[offset] = (value & 0xff)
  return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
  this[offset] = (value >>> 24)
  this[offset + 1] = (value >>> 16)
  this[offset + 2] = (value >>> 8)
  this[offset + 3] = (value & 0xff)
  return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) {
    var limit = Math.pow(2, (8 * byteLength) - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = 0
  var mul = 1
  var sub = 0
  this[offset] = value & 0xFF
  while (++i < byteLength && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) {
    var limit = Math.pow(2, (8 * byteLength) - 1)

    checkInt(this, value, offset, byteLength, limit - 1, -limit)
  }

  var i = byteLength - 1
  var mul = 1
  var sub = 0
  this[offset + i] = value & 0xFF
  while (--i >= 0 && (mul *= 0x100)) {
    if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
      sub = 1
    }
    this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
  }

  return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
  if (value < 0) value = 0xff + value + 1
  this[offset] = (value & 0xff)
  return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  this[offset] = (value & 0xff)
  this[offset + 1] = (value >>> 8)
  return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
  this[offset] = (value >>> 8)
  this[offset + 1] = (value & 0xff)
  return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  this[offset] = (value & 0xff)
  this[offset + 1] = (value >>> 8)
  this[offset + 2] = (value >>> 16)
  this[offset + 3] = (value >>> 24)
  return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
  if (value < 0) value = 0xffffffff + value + 1
  this[offset] = (value >>> 24)
  this[offset + 1] = (value >>> 16)
  this[offset + 2] = (value >>> 8)
  this[offset + 3] = (value & 0xff)
  return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
  if (offset + ext > buf.length) throw new RangeError('Index out of range')
  if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
  }
  ieee754.write(buf, value, offset, littleEndian, 23, 4)
  return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
  return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
  return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
  value = +value
  offset = offset >>> 0
  if (!noAssert) {
    checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
  }
  ieee754.write(buf, value, offset, littleEndian, 52, 8)
  return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
  return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
  return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
  if (!Buffer.isBuffer(target)) throw new TypeError('argument should be a Buffer')
  if (!start) start = 0
  if (!end && end !== 0) end = this.length
  if (targetStart >= target.length) targetStart = target.length
  if (!targetStart) targetStart = 0
  if (end > 0 && end < start) end = start

  // Copy 0 bytes; we're done
  if (end === start) return 0
  if (target.length === 0 || this.length === 0) return 0

  // Fatal error conditions
  if (targetStart < 0) {
    throw new RangeError('targetStart out of bounds')
  }
  if (start < 0 || start >= this.length) throw new RangeError('Index out of range')
  if (end < 0) throw new RangeError('sourceEnd out of bounds')

  // Are we oob?
  if (end > this.length) end = this.length
  if (target.length - targetStart < end - start) {
    end = target.length - targetStart + start
  }

  var len = end - start

  if (this === target && typeof Uint8Array.prototype.copyWithin === 'function') {
    // Use built-in when available, missing from IE11
    this.copyWithin(targetStart, start, end)
  } else if (this === target && start < targetStart && targetStart < end) {
    // descending copy from end
    for (var i = len - 1; i >= 0; --i) {
      target[i + targetStart] = this[i + start]
    }
  } else {
    Uint8Array.prototype.set.call(
      target,
      this.subarray(start, end),
      targetStart
    )
  }

  return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
  // Handle string cases:
  if (typeof val === 'string') {
    if (typeof start === 'string') {
      encoding = start
      start = 0
      end = this.length
    } else if (typeof end === 'string') {
      encoding = end
      end = this.length
    }
    if (encoding !== undefined && typeof encoding !== 'string') {
      throw new TypeError('encoding must be a string')
    }
    if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
      throw new TypeError('Unknown encoding: ' + encoding)
    }
    if (val.length === 1) {
      var code = val.charCodeAt(0)
      if ((encoding === 'utf8' && code < 128) ||
          encoding === 'latin1') {
        // Fast path: If `val` fits into a single byte, use that numeric value.
        val = code
      }
    }
  } else if (typeof val === 'number') {
    val = val & 255
  }

  // Invalid ranges are not set to a default, so can range check early.
  if (start < 0 || this.length < start || this.length < end) {
    throw new RangeError('Out of range index')
  }

  if (end <= start) {
    return this
  }

  start = start >>> 0
  end = end === undefined ? this.length : end >>> 0

  if (!val) val = 0

  var i
  if (typeof val === 'number') {
    for (i = start; i < end; ++i) {
      this[i] = val
    }
  } else {
    var bytes = Buffer.isBuffer(val)
      ? val
      : Buffer.from(val, encoding)
    var len = bytes.length
    if (len === 0) {
      throw new TypeError('The value "' + val +
        '" is invalid for argument "value"')
    }
    for (i = 0; i < end - start; ++i) {
      this[i + start] = bytes[i % len]
    }
  }

  return this
}

// HELPER FUNCTIONS
// ================

var INVALID_BASE64_RE = /[^+/0-9A-Za-z-_]/g

function base64clean (str) {
  // Node takes equal signs as end of the Base64 encoding
  str = str.split('=')[0]
  // Node strips out invalid characters like \n and \t from the string, base64-js does not
  str = str.trim().replace(INVALID_BASE64_RE, '')
  // Node converts strings with length < 2 to ''
  if (str.length < 2) return ''
  // Node allows for non-padded base64 strings (missing trailing ===), base64-js does not
  while (str.length % 4 !== 0) {
    str = str + '='
  }
  return str
}

function toHex (n) {
  if (n < 16) return '0' + n.toString(16)
  return n.toString(16)
}

function utf8ToBytes (string, units) {
  units = units || Infinity
  var codePoint
  var length = string.length
  var leadSurrogate = null
  var bytes = []

  for (var i = 0; i < length; ++i) {
    codePoint = string.charCodeAt(i)

    // is surrogate component
    if (codePoint > 0xD7FF && codePoint < 0xE000) {
      // last char was a lead
      if (!leadSurrogate) {
        // no lead yet
        if (codePoint > 0xDBFF) {
          // unexpected trail
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        } else if (i + 1 === length) {
          // unpaired lead
          if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
          continue
        }

        // valid lead
        leadSurrogate = codePoint

        continue
      }

      // 2 leads in a row
      if (codePoint < 0xDC00) {
        if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        leadSurrogate = codePoint
        continue
      }

      // valid surrogate pair
      codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
    } else if (leadSurrogate) {
      // valid bmp char, but last char was a lead
      if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
    }

    leadSurrogate = null

    // encode utf8
    if (codePoint < 0x80) {
      if ((units -= 1) < 0) break
      bytes.push(codePoint)
    } else if (codePoint < 0x800) {
      if ((units -= 2) < 0) break
      bytes.push(
        codePoint >> 0x6 | 0xC0,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x10000) {
      if ((units -= 3) < 0) break
      bytes.push(
        codePoint >> 0xC | 0xE0,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else if (codePoint < 0x110000) {
      if ((units -= 4) < 0) break
      bytes.push(
        codePoint >> 0x12 | 0xF0,
        codePoint >> 0xC & 0x3F | 0x80,
        codePoint >> 0x6 & 0x3F | 0x80,
        codePoint & 0x3F | 0x80
      )
    } else {
      throw new Error('Invalid code point')
    }
  }

  return bytes
}

function asciiToBytes (str) {
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    // Node's code seems to be doing this and not & 0x7F..
    byteArray.push(str.charCodeAt(i) & 0xFF)
  }
  return byteArray
}

function utf16leToBytes (str, units) {
  var c, hi, lo
  var byteArray = []
  for (var i = 0; i < str.length; ++i) {
    if ((units -= 2) < 0) break

    c = str.charCodeAt(i)
    hi = c >> 8
    lo = c % 256
    byteArray.push(lo)
    byteArray.push(hi)
  }

  return byteArray
}

function base64ToBytes (str) {
  return base64.toByteArray(base64clean(str))
}

function blitBuffer (src, dst, offset, length) {
  for (var i = 0; i < length; ++i) {
    if ((i + offset >= dst.length) || (i >= src.length)) break
    dst[i + offset] = src[i]
  }
  return i
}

// ArrayBuffer or Uint8Array objects from other contexts (i.e. iframes) do not pass
// the `instanceof` check but they should be treated as of that type.
// See: https://github.com/feross/buffer/issues/166
function isInstance (obj, type) {
  return obj instanceof type ||
    (obj != null && obj.constructor != null && obj.constructor.name != null &&
      obj.constructor.name === type.name)
}
function numberIsNaN (obj) {
  // For IE11 support
  return obj !== obj // eslint-disable-line no-self-compare
}

}).call(this)}).call(this,require("buffer").Buffer)

},{"base64-js":1,"buffer":2,"ieee754":3}],3:[function(require,module,exports){
/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */
exports.read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = (e * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = (m * 256) + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}

exports.write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = (nBytes * 8) - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = ((value * c) - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}

},{}],4:[function(require,module,exports){
// shim for using process in browser
var process = module.exports = {};

// cached from whatever global is present so that test runners that stub it
// don't break things.  But we need to wrap it in a try catch in case it is
// wrapped in strict mode code which doesn't define any globals.  It's inside a
// function because try/catches deoptimize in certain engines.

var cachedSetTimeout;
var cachedClearTimeout;

function defaultSetTimout() {
    throw new Error('setTimeout has not been defined');
}
function defaultClearTimeout () {
    throw new Error('clearTimeout has not been defined');
}
(function () {
    try {
        if (typeof setTimeout === 'function') {
            cachedSetTimeout = setTimeout;
        } else {
            cachedSetTimeout = defaultSetTimout;
        }
    } catch (e) {
        cachedSetTimeout = defaultSetTimout;
    }
    try {
        if (typeof clearTimeout === 'function') {
            cachedClearTimeout = clearTimeout;
        } else {
            cachedClearTimeout = defaultClearTimeout;
        }
    } catch (e) {
        cachedClearTimeout = defaultClearTimeout;
    }
} ())
function runTimeout(fun) {
    if (cachedSetTimeout === setTimeout) {
        //normal enviroments in sane situations
        return setTimeout(fun, 0);
    }
    // if setTimeout wasn't available but was latter defined
    if ((cachedSetTimeout === defaultSetTimout || !cachedSetTimeout) && setTimeout) {
        cachedSetTimeout = setTimeout;
        return setTimeout(fun, 0);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedSetTimeout(fun, 0);
    } catch(e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't trust the global object when called normally
            return cachedSetTimeout.call(null, fun, 0);
        } catch(e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error
            return cachedSetTimeout.call(this, fun, 0);
        }
    }


}
function runClearTimeout(marker) {
    if (cachedClearTimeout === clearTimeout) {
        //normal enviroments in sane situations
        return clearTimeout(marker);
    }
    // if clearTimeout wasn't available but was latter defined
    if ((cachedClearTimeout === defaultClearTimeout || !cachedClearTimeout) && clearTimeout) {
        cachedClearTimeout = clearTimeout;
        return clearTimeout(marker);
    }
    try {
        // when when somebody has screwed with setTimeout but no I.E. maddness
        return cachedClearTimeout(marker);
    } catch (e){
        try {
            // When we are in I.E. but the script has been evaled so I.E. doesn't  trust the global object when called normally
            return cachedClearTimeout.call(null, marker);
        } catch (e){
            // same as above but when it's a version of I.E. that must have the global object for 'this', hopfully our context correct otherwise it will throw a global error.
            // Some versions of I.E. have different rules for clearTimeout vs setTimeout
            return cachedClearTimeout.call(this, marker);
        }
    }



}
var queue = [];
var draining = false;
var currentQueue;
var queueIndex = -1;

function cleanUpNextTick() {
    if (!draining || !currentQueue) {
        return;
    }
    draining = false;
    if (currentQueue.length) {
        queue = currentQueue.concat(queue);
    } else {
        queueIndex = -1;
    }
    if (queue.length) {
        drainQueue();
    }
}

function drainQueue() {
    if (draining) {
        return;
    }
    var timeout = runTimeout(cleanUpNextTick);
    draining = true;

    var len = queue.length;
    while(len) {
        currentQueue = queue;
        queue = [];
        while (++queueIndex < len) {
            if (currentQueue) {
                currentQueue[queueIndex].run();
            }
        }
        queueIndex = -1;
        len = queue.length;
    }
    currentQueue = null;
    draining = false;
    runClearTimeout(timeout);
}

process.nextTick = function (fun) {
    var args = new Array(arguments.length - 1);
    if (arguments.length > 1) {
        for (var i = 1; i < arguments.length; i++) {
            args[i - 1] = arguments[i];
        }
    }
    queue.push(new Item(fun, args));
    if (queue.length === 1 && !draining) {
        runTimeout(drainQueue);
    }
};

// v8 likes predictible objects
function Item(fun, array) {
    this.fun = fun;
    this.array = array;
}
Item.prototype.run = function () {
    this.fun.apply(null, this.array);
};
process.title = 'browser';
process.browser = true;
process.env = {};
process.argv = [];
process.version = ''; // empty string to avoid regexp issues
process.versions = {};

function noop() {}

process.on = noop;
process.addListener = noop;
process.once = noop;
process.off = noop;
process.removeListener = noop;
process.removeAllListeners = noop;
process.emit = noop;
process.prependListener = noop;
process.prependOnceListener = noop;

process.listeners = function (name) { return [] }

process.binding = function (name) {
    throw new Error('process.binding is not supported');
};

process.cwd = function () { return '/' };
process.chdir = function (dir) {
    throw new Error('process.chdir is not supported');
};
process.umask = function() { return 0; };

},{}],5:[function(require,module,exports){
/*
Breaks a Javascript string into individual user-perceived "characters" 
called extended grapheme clusters by implementing the Unicode UAX-29 standard, version 10.0.0

Usage:
var splitter = new GraphemeSplitter();
//returns an array of strings, one string for each grapheme cluster
var graphemes = splitter.splitGraphemes(string); 

*/
function GraphemeSplitter(){
	var CR = 0,
		LF = 1,
		Control = 2,
		Extend = 3,
		Regional_Indicator = 4,
		SpacingMark = 5,
		L = 6,
		V = 7,
		T = 8,
		LV = 9,
		LVT = 10,
		Other = 11,
		Prepend = 12,
		E_Base = 13,
		E_Modifier = 14,
		ZWJ = 15,
		Glue_After_Zwj = 16,
		E_Base_GAZ = 17;
		
	// BreakTypes
	var NotBreak = 0,
		BreakStart = 1,
		Break = 2,
		BreakLastRegional = 3,
		BreakPenultimateRegional = 4;
		
	function isSurrogate(str, pos) {
		return  0xd800 <= str.charCodeAt(pos) && str.charCodeAt(pos) <= 0xdbff && 
				0xdc00 <= str.charCodeAt(pos + 1) && str.charCodeAt(pos + 1) <= 0xdfff;
	}
		
	// Private function, gets a Unicode code point from a JavaScript UTF-16 string
	// handling surrogate pairs appropriately
	function codePointAt(str, idx){
		if(idx === undefined){
			idx = 0;
		}
		var code = str.charCodeAt(idx);

		// if a high surrogate
		if (0xD800 <= code && code <= 0xDBFF && 
			idx < str.length - 1){
			var hi = code;
			var low = str.charCodeAt(idx + 1);
			if (0xDC00 <= low && low <= 0xDFFF){
				return ((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000;
			}
			return hi;
		}
		
		// if a low surrogate
		if (0xDC00 <= code && code <= 0xDFFF &&
			idx >= 1){
			var hi = str.charCodeAt(idx - 1);
			var low = code;
			if (0xD800 <= hi && hi <= 0xDBFF){
				return ((hi - 0xD800) * 0x400) + (low - 0xDC00) + 0x10000;
			}
			return low;
		}
		
		//just return the char if an unmatched surrogate half or a 
		//single-char codepoint
		return code;
	}
	
	// Private function, returns whether a break is allowed between the 
	// two given grapheme breaking classes
	function shouldBreak(start, mid, end){
		var all = [start].concat(mid).concat([end]);
		var previous = all[all.length - 2]
		var next = end
		
		// Lookahead termintor for:
		// GB10. (E_Base | EBG) Extend* ?	E_Modifier
		var eModifierIndex = all.lastIndexOf(E_Modifier)
		if(eModifierIndex > 1 &&
			all.slice(1, eModifierIndex).every(function(c){return c == Extend}) &&
			[Extend, E_Base, E_Base_GAZ].indexOf(start) == -1){
			return Break
		}

		// Lookahead termintor for:
		// GB12. ^ (RI RI)* RI	?	RI
		// GB13. [^RI] (RI RI)* RI	?	RI
		var rIIndex = all.lastIndexOf(Regional_Indicator)
		if(rIIndex > 0 &&
			all.slice(1, rIIndex).every(function(c){return c == Regional_Indicator}) &&
			[Prepend, Regional_Indicator].indexOf(previous) == -1) { 
			if(all.filter(function(c){return c == Regional_Indicator}).length % 2 == 1) {
				return BreakLastRegional
			}
			else {
				return BreakPenultimateRegional
			}
		}
		
		// GB3. CR X LF
		if(previous == CR && next == LF){
			return NotBreak;
		}
		// GB4. (Control|CR|LF) ÷
		else if(previous == Control || previous == CR || previous == LF){
			if(next == E_Modifier && mid.every(function(c){return c == Extend})){
				return Break
			}
			else {
				return BreakStart
			}
		}
		// GB5. ÷ (Control|CR|LF)
		else if(next == Control || next == CR || next == LF){
			return BreakStart;
		}
		// GB6. L X (L|V|LV|LVT)
		else if(previous == L && 
			(next == L || next == V || next == LV || next == LVT)){
			return NotBreak;
		}
		// GB7. (LV|V) X (V|T)
		else if((previous == LV || previous == V) && 
			(next == V || next == T)){
			return NotBreak;
		}
		// GB8. (LVT|T) X (T)
		else if((previous == LVT || previous == T) && 
			next == T){
			return NotBreak;
		}
		// GB9. X (Extend|ZWJ)
		else if (next == Extend || next == ZWJ){
			return NotBreak;
		}
		// GB9a. X SpacingMark
		else if(next == SpacingMark){
			return NotBreak;
		}
		// GB9b. Prepend X
		else if (previous == Prepend){
			return NotBreak;
		}
		
		// GB10. (E_Base | EBG) Extend* ?	E_Modifier
		var previousNonExtendIndex = all.indexOf(Extend) != -1 ? all.lastIndexOf(Extend) - 1 : all.length - 2;
		if([E_Base, E_Base_GAZ].indexOf(all[previousNonExtendIndex]) != -1 &&
			all.slice(previousNonExtendIndex + 1, -1).every(function(c){return c == Extend}) &&
			next == E_Modifier){
			return NotBreak;
		}
		
		// GB11. ZWJ ? (Glue_After_Zwj | EBG)
		if(previous == ZWJ && [Glue_After_Zwj, E_Base_GAZ].indexOf(next) != -1) {
			return NotBreak;
		}

		// GB12. ^ (RI RI)* RI ? RI
		// GB13. [^RI] (RI RI)* RI ? RI
		if(mid.indexOf(Regional_Indicator) != -1) { 
			return Break;
		}
		if(previous == Regional_Indicator && next == Regional_Indicator) {
			return NotBreak;
		}

		// GB999. Any ? Any
		return BreakStart;
	}
	
	// Returns the next grapheme break in the string after the given index
	this.nextBreak = function(string, index){
		if(index === undefined){
			index = 0;
		}
		if(index < 0){
			return 0;
		}
		if(index >= string.length - 1){
			return string.length;
		}
		var prev = getGraphemeBreakProperty(codePointAt(string, index));
		var mid = []
		for (var i = index + 1; i < string.length; i++) {
			// check for already processed low surrogates
			if(isSurrogate(string, i - 1)){
				continue;
			}
		
			var next = getGraphemeBreakProperty(codePointAt(string, i));
			if(shouldBreak(prev, mid, next)){
				return i;
			}
			
			mid.push(next);
		}
		return string.length;
	};
	
	// Breaks the given string into an array of grapheme cluster strings
	this.splitGraphemes = function(str){
		var res = [];
		var index = 0;
		var brk;
		while((brk = this.nextBreak(str, index)) < str.length){
			res.push(str.slice(index, brk));
			index = brk;
		}
		if(index < str.length){
			res.push(str.slice(index));
		}
		return res;
	};

	// Returns the iterator of grapheme clusters there are in the given string
	this.iterateGraphemes = function(str) {
		var index = 0;
		var res = {
			next: (function() {
				var value;
				var brk;
				if ((brk = this.nextBreak(str, index)) < str.length) {
					value = str.slice(index, brk);
					index = brk;
					return { value: value, done: false };
				}
				if (index < str.length) {
					value = str.slice(index);
					index = str.length;
					return { value: value, done: false };
				}
				return { value: undefined, done: true };
			}).bind(this)
		};
		// ES2015 @@iterator method (iterable) for spread syntax and for...of statement
		if (typeof Symbol !== 'undefined' && Symbol.iterator) {
			res[Symbol.iterator] = function() {return res};
		}
		return res;
	};

	// Returns the number of grapheme clusters there are in the given string
	this.countGraphemes = function(str){
		var count = 0;
		var index = 0;
		var brk;
		while((brk = this.nextBreak(str, index)) < str.length){
			index = brk;
			count++;
		}
		if(index < str.length){
			count++;
		}
		return count;
	};
	
	//given a Unicode code point, determines this symbol's grapheme break property
	function getGraphemeBreakProperty(code){
		
		//grapheme break property for Unicode 10.0.0, 
		//taken from http://www.unicode.org/Public/10.0.0/ucd/auxiliary/GraphemeBreakProperty.txt
		//and adapted to JavaScript rules
		
		if(		
		(0x0600 <= code && code <= 0x0605) || // Cf   [6] ARABIC NUMBER SIGN..ARABIC NUMBER MARK ABOVE
		0x06DD == code || // Cf       ARABIC END OF AYAH
		0x070F == code || // Cf       SYRIAC ABBREVIATION MARK
		0x08E2 == code || // Cf       ARABIC DISPUTED END OF AYAH
		0x0D4E == code || // Lo       MALAYALAM LETTER DOT REPH
		0x110BD == code || // Cf       KAITHI NUMBER SIGN
		(0x111C2 <= code && code <= 0x111C3) || // Lo   [2] SHARADA SIGN JIHVAMULIYA..SHARADA SIGN UPADHMANIYA
		0x11A3A == code || // Lo       ZANABAZAR SQUARE CLUSTER-INITIAL LETTER RA
		(0x11A86 <= code && code <= 0x11A89) || // Lo   [4] SOYOMBO CLUSTER-INITIAL LETTER RA..SOYOMBO CLUSTER-INITIAL LETTER SA
		0x11D46 == code // Lo       MASARAM GONDI REPHA
		){
			return Prepend;
		}
		if(
		0x000D == code // Cc       <control-000D>
		){
			return CR;
		}
		
		if(
		0x000A == code // Cc       <control-000A>
		){
			return LF;
		}
		
		
		if(
		(0x0000 <= code && code <= 0x0009) || // Cc  [10] <control-0000>..<control-0009>
		(0x000B <= code && code <= 0x000C) || // Cc   [2] <control-000B>..<control-000C>
		(0x000E <= code && code <= 0x001F) || // Cc  [18] <control-000E>..<control-001F>
		(0x007F <= code && code <= 0x009F) || // Cc  [33] <control-007F>..<control-009F>
		0x00AD == code || // Cf       SOFT HYPHEN
		0x061C == code || // Cf       ARABIC LETTER MARK
	
		0x180E == code || // Cf       MONGOLIAN VOWEL SEPARATOR
		0x200B == code || // Cf       ZERO WIDTH SPACE
		(0x200E <= code && code <= 0x200F) || // Cf   [2] LEFT-TO-RIGHT MARK..RIGHT-TO-LEFT MARK
		0x2028 == code || // Zl       LINE SEPARATOR
		0x2029 == code || // Zp       PARAGRAPH SEPARATOR
		(0x202A <= code && code <= 0x202E) || // Cf   [5] LEFT-TO-RIGHT EMBEDDING..RIGHT-TO-LEFT OVERRIDE
		(0x2060 <= code && code <= 0x2064) || // Cf   [5] WORD JOINER..INVISIBLE PLUS
		0x2065 == code || // Cn       <reserved-2065>
		(0x2066 <= code && code <= 0x206F) || // Cf  [10] LEFT-TO-RIGHT ISOLATE..NOMINAL DIGIT SHAPES
		(0xD800 <= code && code <= 0xDFFF) || // Cs [2048] <surrogate-D800>..<surrogate-DFFF>
		0xFEFF == code || // Cf       ZERO WIDTH NO-BREAK SPACE
		(0xFFF0 <= code && code <= 0xFFF8) || // Cn   [9] <reserved-FFF0>..<reserved-FFF8>
		(0xFFF9 <= code && code <= 0xFFFB) || // Cf   [3] INTERLINEAR ANNOTATION ANCHOR..INTERLINEAR ANNOTATION TERMINATOR
		(0x1BCA0 <= code && code <= 0x1BCA3) || // Cf   [4] SHORTHAND FORMAT LETTER OVERLAP..SHORTHAND FORMAT UP STEP
		(0x1D173 <= code && code <= 0x1D17A) || // Cf   [8] MUSICAL SYMBOL BEGIN BEAM..MUSICAL SYMBOL END PHRASE
		0xE0000 == code || // Cn       <reserved-E0000>
		0xE0001 == code || // Cf       LANGUAGE TAG
		(0xE0002 <= code && code <= 0xE001F) || // Cn  [30] <reserved-E0002>..<reserved-E001F>
		(0xE0080 <= code && code <= 0xE00FF) || // Cn [128] <reserved-E0080>..<reserved-E00FF>
		(0xE01F0 <= code && code <= 0xE0FFF) // Cn [3600] <reserved-E01F0>..<reserved-E0FFF>
		){
			return Control;
		}
		
		
		if(
		(0x0300 <= code && code <= 0x036F) || // Mn [112] COMBINING GRAVE ACCENT..COMBINING LATIN SMALL LETTER X
		(0x0483 <= code && code <= 0x0487) || // Mn   [5] COMBINING CYRILLIC TITLO..COMBINING CYRILLIC POKRYTIE
		(0x0488 <= code && code <= 0x0489) || // Me   [2] COMBINING CYRILLIC HUNDRED THOUSANDS SIGN..COMBINING CYRILLIC MILLIONS SIGN
		(0x0591 <= code && code <= 0x05BD) || // Mn  [45] HEBREW ACCENT ETNAHTA..HEBREW POINT METEG
		0x05BF == code || // Mn       HEBREW POINT RAFE
		(0x05C1 <= code && code <= 0x05C2) || // Mn   [2] HEBREW POINT SHIN DOT..HEBREW POINT SIN DOT
		(0x05C4 <= code && code <= 0x05C5) || // Mn   [2] HEBREW MARK UPPER DOT..HEBREW MARK LOWER DOT
		0x05C7 == code || // Mn       HEBREW POINT QAMATS QATAN
		(0x0610 <= code && code <= 0x061A) || // Mn  [11] ARABIC SIGN SALLALLAHOU ALAYHE WASSALLAM..ARABIC SMALL KASRA
		(0x064B <= code && code <= 0x065F) || // Mn  [21] ARABIC FATHATAN..ARABIC WAVY HAMZA BELOW
		0x0670 == code || // Mn       ARABIC LETTER SUPERSCRIPT ALEF
		(0x06D6 <= code && code <= 0x06DC) || // Mn   [7] ARABIC SMALL HIGH LIGATURE SAD WITH LAM WITH ALEF MAKSURA..ARABIC SMALL HIGH SEEN
		(0x06DF <= code && code <= 0x06E4) || // Mn   [6] ARABIC SMALL HIGH ROUNDED ZERO..ARABIC SMALL HIGH MADDA
		(0x06E7 <= code && code <= 0x06E8) || // Mn   [2] ARABIC SMALL HIGH YEH..ARABIC SMALL HIGH NOON
		(0x06EA <= code && code <= 0x06ED) || // Mn   [4] ARABIC EMPTY CENTRE LOW STOP..ARABIC SMALL LOW MEEM
		0x0711 == code || // Mn       SYRIAC LETTER SUPERSCRIPT ALAPH
		(0x0730 <= code && code <= 0x074A) || // Mn  [27] SYRIAC PTHAHA ABOVE..SYRIAC BARREKH
		(0x07A6 <= code && code <= 0x07B0) || // Mn  [11] THAANA ABAFILI..THAANA SUKUN
		(0x07EB <= code && code <= 0x07F3) || // Mn   [9] NKO COMBINING SHORT HIGH TONE..NKO COMBINING DOUBLE DOT ABOVE
		(0x0816 <= code && code <= 0x0819) || // Mn   [4] SAMARITAN MARK IN..SAMARITAN MARK DAGESH
		(0x081B <= code && code <= 0x0823) || // Mn   [9] SAMARITAN MARK EPENTHETIC YUT..SAMARITAN VOWEL SIGN A
		(0x0825 <= code && code <= 0x0827) || // Mn   [3] SAMARITAN VOWEL SIGN SHORT A..SAMARITAN VOWEL SIGN U
		(0x0829 <= code && code <= 0x082D) || // Mn   [5] SAMARITAN VOWEL SIGN LONG I..SAMARITAN MARK NEQUDAA
		(0x0859 <= code && code <= 0x085B) || // Mn   [3] MANDAIC AFFRICATION MARK..MANDAIC GEMINATION MARK
		(0x08D4 <= code && code <= 0x08E1) || // Mn  [14] ARABIC SMALL HIGH WORD AR-RUB..ARABIC SMALL HIGH SIGN SAFHA
		(0x08E3 <= code && code <= 0x0902) || // Mn  [32] ARABIC TURNED DAMMA BELOW..DEVANAGARI SIGN ANUSVARA
		0x093A == code || // Mn       DEVANAGARI VOWEL SIGN OE
		0x093C == code || // Mn       DEVANAGARI SIGN NUKTA
		(0x0941 <= code && code <= 0x0948) || // Mn   [8] DEVANAGARI VOWEL SIGN U..DEVANAGARI VOWEL SIGN AI
		0x094D == code || // Mn       DEVANAGARI SIGN VIRAMA
		(0x0951 <= code && code <= 0x0957) || // Mn   [7] DEVANAGARI STRESS SIGN UDATTA..DEVANAGARI VOWEL SIGN UUE
		(0x0962 <= code && code <= 0x0963) || // Mn   [2] DEVANAGARI VOWEL SIGN VOCALIC L..DEVANAGARI VOWEL SIGN VOCALIC LL
		0x0981 == code || // Mn       BENGALI SIGN CANDRABINDU
		0x09BC == code || // Mn       BENGALI SIGN NUKTA
		0x09BE == code || // Mc       BENGALI VOWEL SIGN AA
		(0x09C1 <= code && code <= 0x09C4) || // Mn   [4] BENGALI VOWEL SIGN U..BENGALI VOWEL SIGN VOCALIC RR
		0x09CD == code || // Mn       BENGALI SIGN VIRAMA
		0x09D7 == code || // Mc       BENGALI AU LENGTH MARK
		(0x09E2 <= code && code <= 0x09E3) || // Mn   [2] BENGALI VOWEL SIGN VOCALIC L..BENGALI VOWEL SIGN VOCALIC LL
		(0x0A01 <= code && code <= 0x0A02) || // Mn   [2] GURMUKHI SIGN ADAK BINDI..GURMUKHI SIGN BINDI
		0x0A3C == code || // Mn       GURMUKHI SIGN NUKTA
		(0x0A41 <= code && code <= 0x0A42) || // Mn   [2] GURMUKHI VOWEL SIGN U..GURMUKHI VOWEL SIGN UU
		(0x0A47 <= code && code <= 0x0A48) || // Mn   [2] GURMUKHI VOWEL SIGN EE..GURMUKHI VOWEL SIGN AI
		(0x0A4B <= code && code <= 0x0A4D) || // Mn   [3] GURMUKHI VOWEL SIGN OO..GURMUKHI SIGN VIRAMA
		0x0A51 == code || // Mn       GURMUKHI SIGN UDAAT
		(0x0A70 <= code && code <= 0x0A71) || // Mn   [2] GURMUKHI TIPPI..GURMUKHI ADDAK
		0x0A75 == code || // Mn       GURMUKHI SIGN YAKASH
		(0x0A81 <= code && code <= 0x0A82) || // Mn   [2] GUJARATI SIGN CANDRABINDU..GUJARATI SIGN ANUSVARA
		0x0ABC == code || // Mn       GUJARATI SIGN NUKTA
		(0x0AC1 <= code && code <= 0x0AC5) || // Mn   [5] GUJARATI VOWEL SIGN U..GUJARATI VOWEL SIGN CANDRA E
		(0x0AC7 <= code && code <= 0x0AC8) || // Mn   [2] GUJARATI VOWEL SIGN E..GUJARATI VOWEL SIGN AI
		0x0ACD == code || // Mn       GUJARATI SIGN VIRAMA
		(0x0AE2 <= code && code <= 0x0AE3) || // Mn   [2] GUJARATI VOWEL SIGN VOCALIC L..GUJARATI VOWEL SIGN VOCALIC LL
		(0x0AFA <= code && code <= 0x0AFF) || // Mn   [6] GUJARATI SIGN SUKUN..GUJARATI SIGN TWO-CIRCLE NUKTA ABOVE
		0x0B01 == code || // Mn       ORIYA SIGN CANDRABINDU
		0x0B3C == code || // Mn       ORIYA SIGN NUKTA
		0x0B3E == code || // Mc       ORIYA VOWEL SIGN AA
		0x0B3F == code || // Mn       ORIYA VOWEL SIGN I
		(0x0B41 <= code && code <= 0x0B44) || // Mn   [4] ORIYA VOWEL SIGN U..ORIYA VOWEL SIGN VOCALIC RR
		0x0B4D == code || // Mn       ORIYA SIGN VIRAMA
		0x0B56 == code || // Mn       ORIYA AI LENGTH MARK
		0x0B57 == code || // Mc       ORIYA AU LENGTH MARK
		(0x0B62 <= code && code <= 0x0B63) || // Mn   [2] ORIYA VOWEL SIGN VOCALIC L..ORIYA VOWEL SIGN VOCALIC LL
		0x0B82 == code || // Mn       TAMIL SIGN ANUSVARA
		0x0BBE == code || // Mc       TAMIL VOWEL SIGN AA
		0x0BC0 == code || // Mn       TAMIL VOWEL SIGN II
		0x0BCD == code || // Mn       TAMIL SIGN VIRAMA
		0x0BD7 == code || // Mc       TAMIL AU LENGTH MARK
		0x0C00 == code || // Mn       TELUGU SIGN COMBINING CANDRABINDU ABOVE
		(0x0C3E <= code && code <= 0x0C40) || // Mn   [3] TELUGU VOWEL SIGN AA..TELUGU VOWEL SIGN II
		(0x0C46 <= code && code <= 0x0C48) || // Mn   [3] TELUGU VOWEL SIGN E..TELUGU VOWEL SIGN AI
		(0x0C4A <= code && code <= 0x0C4D) || // Mn   [4] TELUGU VOWEL SIGN O..TELUGU SIGN VIRAMA
		(0x0C55 <= code && code <= 0x0C56) || // Mn   [2] TELUGU LENGTH MARK..TELUGU AI LENGTH MARK
		(0x0C62 <= code && code <= 0x0C63) || // Mn   [2] TELUGU VOWEL SIGN VOCALIC L..TELUGU VOWEL SIGN VOCALIC LL
		0x0C81 == code || // Mn       KANNADA SIGN CANDRABINDU
		0x0CBC == code || // Mn       KANNADA SIGN NUKTA
		0x0CBF == code || // Mn       KANNADA VOWEL SIGN I
		0x0CC2 == code || // Mc       KANNADA VOWEL SIGN UU
		0x0CC6 == code || // Mn       KANNADA VOWEL SIGN E
		(0x0CCC <= code && code <= 0x0CCD) || // Mn   [2] KANNADA VOWEL SIGN AU..KANNADA SIGN VIRAMA
		(0x0CD5 <= code && code <= 0x0CD6) || // Mc   [2] KANNADA LENGTH MARK..KANNADA AI LENGTH MARK
		(0x0CE2 <= code && code <= 0x0CE3) || // Mn   [2] KANNADA VOWEL SIGN VOCALIC L..KANNADA VOWEL SIGN VOCALIC LL
		(0x0D00 <= code && code <= 0x0D01) || // Mn   [2] MALAYALAM SIGN COMBINING ANUSVARA ABOVE..MALAYALAM SIGN CANDRABINDU
		(0x0D3B <= code && code <= 0x0D3C) || // Mn   [2] MALAYALAM SIGN VERTICAL BAR VIRAMA..MALAYALAM SIGN CIRCULAR VIRAMA
		0x0D3E == code || // Mc       MALAYALAM VOWEL SIGN AA
		(0x0D41 <= code && code <= 0x0D44) || // Mn   [4] MALAYALAM VOWEL SIGN U..MALAYALAM VOWEL SIGN VOCALIC RR
		0x0D4D == code || // Mn       MALAYALAM SIGN VIRAMA
		0x0D57 == code || // Mc       MALAYALAM AU LENGTH MARK
		(0x0D62 <= code && code <= 0x0D63) || // Mn   [2] MALAYALAM VOWEL SIGN VOCALIC L..MALAYALAM VOWEL SIGN VOCALIC LL
		0x0DCA == code || // Mn       SINHALA SIGN AL-LAKUNA
		0x0DCF == code || // Mc       SINHALA VOWEL SIGN AELA-PILLA
		(0x0DD2 <= code && code <= 0x0DD4) || // Mn   [3] SINHALA VOWEL SIGN KETTI IS-PILLA..SINHALA VOWEL SIGN KETTI PAA-PILLA
		0x0DD6 == code || // Mn       SINHALA VOWEL SIGN DIGA PAA-PILLA
		0x0DDF == code || // Mc       SINHALA VOWEL SIGN GAYANUKITTA
		0x0E31 == code || // Mn       THAI CHARACTER MAI HAN-AKAT
		(0x0E34 <= code && code <= 0x0E3A) || // Mn   [7] THAI CHARACTER SARA I..THAI CHARACTER PHINTHU
		(0x0E47 <= code && code <= 0x0E4E) || // Mn   [8] THAI CHARACTER MAITAIKHU..THAI CHARACTER YAMAKKAN
		0x0EB1 == code || // Mn       LAO VOWEL SIGN MAI KAN
		(0x0EB4 <= code && code <= 0x0EB9) || // Mn   [6] LAO VOWEL SIGN I..LAO VOWEL SIGN UU
		(0x0EBB <= code && code <= 0x0EBC) || // Mn   [2] LAO VOWEL SIGN MAI KON..LAO SEMIVOWEL SIGN LO
		(0x0EC8 <= code && code <= 0x0ECD) || // Mn   [6] LAO TONE MAI EK..LAO NIGGAHITA
		(0x0F18 <= code && code <= 0x0F19) || // Mn   [2] TIBETAN ASTROLOGICAL SIGN -KHYUD PA..TIBETAN ASTROLOGICAL SIGN SDONG TSHUGS
		0x0F35 == code || // Mn       TIBETAN MARK NGAS BZUNG NYI ZLA
		0x0F37 == code || // Mn       TIBETAN MARK NGAS BZUNG SGOR RTAGS
		0x0F39 == code || // Mn       TIBETAN MARK TSA -PHRU
		(0x0F71 <= code && code <= 0x0F7E) || // Mn  [14] TIBETAN VOWEL SIGN AA..TIBETAN SIGN RJES SU NGA RO
		(0x0F80 <= code && code <= 0x0F84) || // Mn   [5] TIBETAN VOWEL SIGN REVERSED I..TIBETAN MARK HALANTA
		(0x0F86 <= code && code <= 0x0F87) || // Mn   [2] TIBETAN SIGN LCI RTAGS..TIBETAN SIGN YANG RTAGS
		(0x0F8D <= code && code <= 0x0F97) || // Mn  [11] TIBETAN SUBJOINED SIGN LCE TSA CAN..TIBETAN SUBJOINED LETTER JA
		(0x0F99 <= code && code <= 0x0FBC) || // Mn  [36] TIBETAN SUBJOINED LETTER NYA..TIBETAN SUBJOINED LETTER FIXED-FORM RA
		0x0FC6 == code || // Mn       TIBETAN SYMBOL PADMA GDAN
		(0x102D <= code && code <= 0x1030) || // Mn   [4] MYANMAR VOWEL SIGN I..MYANMAR VOWEL SIGN UU
		(0x1032 <= code && code <= 0x1037) || // Mn   [6] MYANMAR VOWEL SIGN AI..MYANMAR SIGN DOT BELOW
		(0x1039 <= code && code <= 0x103A) || // Mn   [2] MYANMAR SIGN VIRAMA..MYANMAR SIGN ASAT
		(0x103D <= code && code <= 0x103E) || // Mn   [2] MYANMAR CONSONANT SIGN MEDIAL WA..MYANMAR CONSONANT SIGN MEDIAL HA
		(0x1058 <= code && code <= 0x1059) || // Mn   [2] MYANMAR VOWEL SIGN VOCALIC L..MYANMAR VOWEL SIGN VOCALIC LL
		(0x105E <= code && code <= 0x1060) || // Mn   [3] MYANMAR CONSONANT SIGN MON MEDIAL NA..MYANMAR CONSONANT SIGN MON MEDIAL LA
		(0x1071 <= code && code <= 0x1074) || // Mn   [4] MYANMAR VOWEL SIGN GEBA KAREN I..MYANMAR VOWEL SIGN KAYAH EE
		0x1082 == code || // Mn       MYANMAR CONSONANT SIGN SHAN MEDIAL WA
		(0x1085 <= code && code <= 0x1086) || // Mn   [2] MYANMAR VOWEL SIGN SHAN E ABOVE..MYANMAR VOWEL SIGN SHAN FINAL Y
		0x108D == code || // Mn       MYANMAR SIGN SHAN COUNCIL EMPHATIC TONE
		0x109D == code || // Mn       MYANMAR VOWEL SIGN AITON AI
		(0x135D <= code && code <= 0x135F) || // Mn   [3] ETHIOPIC COMBINING GEMINATION AND VOWEL LENGTH MARK..ETHIOPIC COMBINING GEMINATION MARK
		(0x1712 <= code && code <= 0x1714) || // Mn   [3] TAGALOG VOWEL SIGN I..TAGALOG SIGN VIRAMA
		(0x1732 <= code && code <= 0x1734) || // Mn   [3] HANUNOO VOWEL SIGN I..HANUNOO SIGN PAMUDPOD
		(0x1752 <= code && code <= 0x1753) || // Mn   [2] BUHID VOWEL SIGN I..BUHID VOWEL SIGN U
		(0x1772 <= code && code <= 0x1773) || // Mn   [2] TAGBANWA VOWEL SIGN I..TAGBANWA VOWEL SIGN U
		(0x17B4 <= code && code <= 0x17B5) || // Mn   [2] KHMER VOWEL INHERENT AQ..KHMER VOWEL INHERENT AA
		(0x17B7 <= code && code <= 0x17BD) || // Mn   [7] KHMER VOWEL SIGN I..KHMER VOWEL SIGN UA
		0x17C6 == code || // Mn       KHMER SIGN NIKAHIT
		(0x17C9 <= code && code <= 0x17D3) || // Mn  [11] KHMER SIGN MUUSIKATOAN..KHMER SIGN BATHAMASAT
		0x17DD == code || // Mn       KHMER SIGN ATTHACAN
		(0x180B <= code && code <= 0x180D) || // Mn   [3] MONGOLIAN FREE VARIATION SELECTOR ONE..MONGOLIAN FREE VARIATION SELECTOR THREE
		(0x1885 <= code && code <= 0x1886) || // Mn   [2] MONGOLIAN LETTER ALI GALI BALUDA..MONGOLIAN LETTER ALI GALI THREE BALUDA
		0x18A9 == code || // Mn       MONGOLIAN LETTER ALI GALI DAGALGA
		(0x1920 <= code && code <= 0x1922) || // Mn   [3] LIMBU VOWEL SIGN A..LIMBU VOWEL SIGN U
		(0x1927 <= code && code <= 0x1928) || // Mn   [2] LIMBU VOWEL SIGN E..LIMBU VOWEL SIGN O
		0x1932 == code || // Mn       LIMBU SMALL LETTER ANUSVARA
		(0x1939 <= code && code <= 0x193B) || // Mn   [3] LIMBU SIGN MUKPHRENG..LIMBU SIGN SA-I
		(0x1A17 <= code && code <= 0x1A18) || // Mn   [2] BUGINESE VOWEL SIGN I..BUGINESE VOWEL SIGN U
		0x1A1B == code || // Mn       BUGINESE VOWEL SIGN AE
		0x1A56 == code || // Mn       TAI THAM CONSONANT SIGN MEDIAL LA
		(0x1A58 <= code && code <= 0x1A5E) || // Mn   [7] TAI THAM SIGN MAI KANG LAI..TAI THAM CONSONANT SIGN SA
		0x1A60 == code || // Mn       TAI THAM SIGN SAKOT
		0x1A62 == code || // Mn       TAI THAM VOWEL SIGN MAI SAT
		(0x1A65 <= code && code <= 0x1A6C) || // Mn   [8] TAI THAM VOWEL SIGN I..TAI THAM VOWEL SIGN OA BELOW
		(0x1A73 <= code && code <= 0x1A7C) || // Mn  [10] TAI THAM VOWEL SIGN OA ABOVE..TAI THAM SIGN KHUEN-LUE KARAN
		0x1A7F == code || // Mn       TAI THAM COMBINING CRYPTOGRAMMIC DOT
		(0x1AB0 <= code && code <= 0x1ABD) || // Mn  [14] COMBINING DOUBLED CIRCUMFLEX ACCENT..COMBINING PARENTHESES BELOW
		0x1ABE == code || // Me       COMBINING PARENTHESES OVERLAY
		(0x1B00 <= code && code <= 0x1B03) || // Mn   [4] BALINESE SIGN ULU RICEM..BALINESE SIGN SURANG
		0x1B34 == code || // Mn       BALINESE SIGN REREKAN
		(0x1B36 <= code && code <= 0x1B3A) || // Mn   [5] BALINESE VOWEL SIGN ULU..BALINESE VOWEL SIGN RA REPA
		0x1B3C == code || // Mn       BALINESE VOWEL SIGN LA LENGA
		0x1B42 == code || // Mn       BALINESE VOWEL SIGN PEPET
		(0x1B6B <= code && code <= 0x1B73) || // Mn   [9] BALINESE MUSICAL SYMBOL COMBINING TEGEH..BALINESE MUSICAL SYMBOL COMBINING GONG
		(0x1B80 <= code && code <= 0x1B81) || // Mn   [2] SUNDANESE SIGN PANYECEK..SUNDANESE SIGN PANGLAYAR
		(0x1BA2 <= code && code <= 0x1BA5) || // Mn   [4] SUNDANESE CONSONANT SIGN PANYAKRA..SUNDANESE VOWEL SIGN PANYUKU
		(0x1BA8 <= code && code <= 0x1BA9) || // Mn   [2] SUNDANESE VOWEL SIGN PAMEPET..SUNDANESE VOWEL SIGN PANEULEUNG
		(0x1BAB <= code && code <= 0x1BAD) || // Mn   [3] SUNDANESE SIGN VIRAMA..SUNDANESE CONSONANT SIGN PASANGAN WA
		0x1BE6 == code || // Mn       BATAK SIGN TOMPI
		(0x1BE8 <= code && code <= 0x1BE9) || // Mn   [2] BATAK VOWEL SIGN PAKPAK E..BATAK VOWEL SIGN EE
		0x1BED == code || // Mn       BATAK VOWEL SIGN KARO O
		(0x1BEF <= code && code <= 0x1BF1) || // Mn   [3] BATAK VOWEL SIGN U FOR SIMALUNGUN SA..BATAK CONSONANT SIGN H
		(0x1C2C <= code && code <= 0x1C33) || // Mn   [8] LEPCHA VOWEL SIGN E..LEPCHA CONSONANT SIGN T
		(0x1C36 <= code && code <= 0x1C37) || // Mn   [2] LEPCHA SIGN RAN..LEPCHA SIGN NUKTA
		(0x1CD0 <= code && code <= 0x1CD2) || // Mn   [3] VEDIC TONE KARSHANA..VEDIC TONE PRENKHA
		(0x1CD4 <= code && code <= 0x1CE0) || // Mn  [13] VEDIC SIGN YAJURVEDIC MIDLINE SVARITA..VEDIC TONE RIGVEDIC KASHMIRI INDEPENDENT SVARITA
		(0x1CE2 <= code && code <= 0x1CE8) || // Mn   [7] VEDIC SIGN VISARGA SVARITA..VEDIC SIGN VISARGA ANUDATTA WITH TAIL
		0x1CED == code || // Mn       VEDIC SIGN TIRYAK
		0x1CF4 == code || // Mn       VEDIC TONE CANDRA ABOVE
		(0x1CF8 <= code && code <= 0x1CF9) || // Mn   [2] VEDIC TONE RING ABOVE..VEDIC TONE DOUBLE RING ABOVE
		(0x1DC0 <= code && code <= 0x1DF9) || // Mn  [58] COMBINING DOTTED GRAVE ACCENT..COMBINING WIDE INVERTED BRIDGE BELOW
		(0x1DFB <= code && code <= 0x1DFF) || // Mn   [5] COMBINING DELETION MARK..COMBINING RIGHT ARROWHEAD AND DOWN ARROWHEAD BELOW
		0x200C == code || // Cf       ZERO WIDTH NON-JOINER
		(0x20D0 <= code && code <= 0x20DC) || // Mn  [13] COMBINING LEFT HARPOON ABOVE..COMBINING FOUR DOTS ABOVE
		(0x20DD <= code && code <= 0x20E0) || // Me   [4] COMBINING ENCLOSING CIRCLE..COMBINING ENCLOSING CIRCLE BACKSLASH
		0x20E1 == code || // Mn       COMBINING LEFT RIGHT ARROW ABOVE
		(0x20E2 <= code && code <= 0x20E4) || // Me   [3] COMBINING ENCLOSING SCREEN..COMBINING ENCLOSING UPWARD POINTING TRIANGLE
		(0x20E5 <= code && code <= 0x20F0) || // Mn  [12] COMBINING REVERSE SOLIDUS OVERLAY..COMBINING ASTERISK ABOVE
		(0x2CEF <= code && code <= 0x2CF1) || // Mn   [3] COPTIC COMBINING NI ABOVE..COPTIC COMBINING SPIRITUS LENIS
		0x2D7F == code || // Mn       TIFINAGH CONSONANT JOINER
		(0x2DE0 <= code && code <= 0x2DFF) || // Mn  [32] COMBINING CYRILLIC LETTER BE..COMBINING CYRILLIC LETTER IOTIFIED BIG YUS
		(0x302A <= code && code <= 0x302D) || // Mn   [4] IDEOGRAPHIC LEVEL TONE MARK..IDEOGRAPHIC ENTERING TONE MARK
		(0x302E <= code && code <= 0x302F) || // Mc   [2] HANGUL SINGLE DOT TONE MARK..HANGUL DOUBLE DOT TONE MARK
		(0x3099 <= code && code <= 0x309A) || // Mn   [2] COMBINING KATAKANA-HIRAGANA VOICED SOUND MARK..COMBINING KATAKANA-HIRAGANA SEMI-VOICED SOUND MARK
		0xA66F == code || // Mn       COMBINING CYRILLIC VZMET
		(0xA670 <= code && code <= 0xA672) || // Me   [3] COMBINING CYRILLIC TEN MILLIONS SIGN..COMBINING CYRILLIC THOUSAND MILLIONS SIGN
		(0xA674 <= code && code <= 0xA67D) || // Mn  [10] COMBINING CYRILLIC LETTER UKRAINIAN IE..COMBINING CYRILLIC PAYEROK
		(0xA69E <= code && code <= 0xA69F) || // Mn   [2] COMBINING CYRILLIC LETTER EF..COMBINING CYRILLIC LETTER IOTIFIED E
		(0xA6F0 <= code && code <= 0xA6F1) || // Mn   [2] BAMUM COMBINING MARK KOQNDON..BAMUM COMBINING MARK TUKWENTIS
		0xA802 == code || // Mn       SYLOTI NAGRI SIGN DVISVARA
		0xA806 == code || // Mn       SYLOTI NAGRI SIGN HASANTA
		0xA80B == code || // Mn       SYLOTI NAGRI SIGN ANUSVARA
		(0xA825 <= code && code <= 0xA826) || // Mn   [2] SYLOTI NAGRI VOWEL SIGN U..SYLOTI NAGRI VOWEL SIGN E
		(0xA8C4 <= code && code <= 0xA8C5) || // Mn   [2] SAURASHTRA SIGN VIRAMA..SAURASHTRA SIGN CANDRABINDU
		(0xA8E0 <= code && code <= 0xA8F1) || // Mn  [18] COMBINING DEVANAGARI DIGIT ZERO..COMBINING DEVANAGARI SIGN AVAGRAHA
		(0xA926 <= code && code <= 0xA92D) || // Mn   [8] KAYAH LI VOWEL UE..KAYAH LI TONE CALYA PLOPHU
		(0xA947 <= code && code <= 0xA951) || // Mn  [11] REJANG VOWEL SIGN I..REJANG CONSONANT SIGN R
		(0xA980 <= code && code <= 0xA982) || // Mn   [3] JAVANESE SIGN PANYANGGA..JAVANESE SIGN LAYAR
		0xA9B3 == code || // Mn       JAVANESE SIGN CECAK TELU
		(0xA9B6 <= code && code <= 0xA9B9) || // Mn   [4] JAVANESE VOWEL SIGN WULU..JAVANESE VOWEL SIGN SUKU MENDUT
		0xA9BC == code || // Mn       JAVANESE VOWEL SIGN PEPET
		0xA9E5 == code || // Mn       MYANMAR SIGN SHAN SAW
		(0xAA29 <= code && code <= 0xAA2E) || // Mn   [6] CHAM VOWEL SIGN AA..CHAM VOWEL SIGN OE
		(0xAA31 <= code && code <= 0xAA32) || // Mn   [2] CHAM VOWEL SIGN AU..CHAM VOWEL SIGN UE
		(0xAA35 <= code && code <= 0xAA36) || // Mn   [2] CHAM CONSONANT SIGN LA..CHAM CONSONANT SIGN WA
		0xAA43 == code || // Mn       CHAM CONSONANT SIGN FINAL NG
		0xAA4C == code || // Mn       CHAM CONSONANT SIGN FINAL M
		0xAA7C == code || // Mn       MYANMAR SIGN TAI LAING TONE-2
		0xAAB0 == code || // Mn       TAI VIET MAI KANG
		(0xAAB2 <= code && code <= 0xAAB4) || // Mn   [3] TAI VIET VOWEL I..TAI VIET VOWEL U
		(0xAAB7 <= code && code <= 0xAAB8) || // Mn   [2] TAI VIET MAI KHIT..TAI VIET VOWEL IA
		(0xAABE <= code && code <= 0xAABF) || // Mn   [2] TAI VIET VOWEL AM..TAI VIET TONE MAI EK
		0xAAC1 == code || // Mn       TAI VIET TONE MAI THO
		(0xAAEC <= code && code <= 0xAAED) || // Mn   [2] MEETEI MAYEK VOWEL SIGN UU..MEETEI MAYEK VOWEL SIGN AAI
		0xAAF6 == code || // Mn       MEETEI MAYEK VIRAMA
		0xABE5 == code || // Mn       MEETEI MAYEK VOWEL SIGN ANAP
		0xABE8 == code || // Mn       MEETEI MAYEK VOWEL SIGN UNAP
		0xABED == code || // Mn       MEETEI MAYEK APUN IYEK
		0xFB1E == code || // Mn       HEBREW POINT JUDEO-SPANISH VARIKA
		(0xFE00 <= code && code <= 0xFE0F) || // Mn  [16] VARIATION SELECTOR-1..VARIATION SELECTOR-16
		(0xFE20 <= code && code <= 0xFE2F) || // Mn  [16] COMBINING LIGATURE LEFT HALF..COMBINING CYRILLIC TITLO RIGHT HALF
		(0xFF9E <= code && code <= 0xFF9F) || // Lm   [2] HALFWIDTH KATAKANA VOICED SOUND MARK..HALFWIDTH KATAKANA SEMI-VOICED SOUND MARK
		0x101FD == code || // Mn       PHAISTOS DISC SIGN COMBINING OBLIQUE STROKE
		0x102E0 == code || // Mn       COPTIC EPACT THOUSANDS MARK
		(0x10376 <= code && code <= 0x1037A) || // Mn   [5] COMBINING OLD PERMIC LETTER AN..COMBINING OLD PERMIC LETTER SII
		(0x10A01 <= code && code <= 0x10A03) || // Mn   [3] KHAROSHTHI VOWEL SIGN I..KHAROSHTHI VOWEL SIGN VOCALIC R
		(0x10A05 <= code && code <= 0x10A06) || // Mn   [2] KHAROSHTHI VOWEL SIGN E..KHAROSHTHI VOWEL SIGN O
		(0x10A0C <= code && code <= 0x10A0F) || // Mn   [4] KHAROSHTHI VOWEL LENGTH MARK..KHAROSHTHI SIGN VISARGA
		(0x10A38 <= code && code <= 0x10A3A) || // Mn   [3] KHAROSHTHI SIGN BAR ABOVE..KHAROSHTHI SIGN DOT BELOW
		0x10A3F == code || // Mn       KHAROSHTHI VIRAMA
		(0x10AE5 <= code && code <= 0x10AE6) || // Mn   [2] MANICHAEAN ABBREVIATION MARK ABOVE..MANICHAEAN ABBREVIATION MARK BELOW
		0x11001 == code || // Mn       BRAHMI SIGN ANUSVARA
		(0x11038 <= code && code <= 0x11046) || // Mn  [15] BRAHMI VOWEL SIGN AA..BRAHMI VIRAMA
		(0x1107F <= code && code <= 0x11081) || // Mn   [3] BRAHMI NUMBER JOINER..KAITHI SIGN ANUSVARA
		(0x110B3 <= code && code <= 0x110B6) || // Mn   [4] KAITHI VOWEL SIGN U..KAITHI VOWEL SIGN AI
		(0x110B9 <= code && code <= 0x110BA) || // Mn   [2] KAITHI SIGN VIRAMA..KAITHI SIGN NUKTA
		(0x11100 <= code && code <= 0x11102) || // Mn   [3] CHAKMA SIGN CANDRABINDU..CHAKMA SIGN VISARGA
		(0x11127 <= code && code <= 0x1112B) || // Mn   [5] CHAKMA VOWEL SIGN A..CHAKMA VOWEL SIGN UU
		(0x1112D <= code && code <= 0x11134) || // Mn   [8] CHAKMA VOWEL SIGN AI..CHAKMA MAAYYAA
		0x11173 == code || // Mn       MAHAJANI SIGN NUKTA
		(0x11180 <= code && code <= 0x11181) || // Mn   [2] SHARADA SIGN CANDRABINDU..SHARADA SIGN ANUSVARA
		(0x111B6 <= code && code <= 0x111BE) || // Mn   [9] SHARADA VOWEL SIGN U..SHARADA VOWEL SIGN O
		(0x111CA <= code && code <= 0x111CC) || // Mn   [3] SHARADA SIGN NUKTA..SHARADA EXTRA SHORT VOWEL MARK
		(0x1122F <= code && code <= 0x11231) || // Mn   [3] KHOJKI VOWEL SIGN U..KHOJKI VOWEL SIGN AI
		0x11234 == code || // Mn       KHOJKI SIGN ANUSVARA
		(0x11236 <= code && code <= 0x11237) || // Mn   [2] KHOJKI SIGN NUKTA..KHOJKI SIGN SHADDA
		0x1123E == code || // Mn       KHOJKI SIGN SUKUN
		0x112DF == code || // Mn       KHUDAWADI SIGN ANUSVARA
		(0x112E3 <= code && code <= 0x112EA) || // Mn   [8] KHUDAWADI VOWEL SIGN U..KHUDAWADI SIGN VIRAMA
		(0x11300 <= code && code <= 0x11301) || // Mn   [2] GRANTHA SIGN COMBINING ANUSVARA ABOVE..GRANTHA SIGN CANDRABINDU
		0x1133C == code || // Mn       GRANTHA SIGN NUKTA
		0x1133E == code || // Mc       GRANTHA VOWEL SIGN AA
		0x11340 == code || // Mn       GRANTHA VOWEL SIGN II
		0x11357 == code || // Mc       GRANTHA AU LENGTH MARK
		(0x11366 <= code && code <= 0x1136C) || // Mn   [7] COMBINING GRANTHA DIGIT ZERO..COMBINING GRANTHA DIGIT SIX
		(0x11370 <= code && code <= 0x11374) || // Mn   [5] COMBINING GRANTHA LETTER A..COMBINING GRANTHA LETTER PA
		(0x11438 <= code && code <= 0x1143F) || // Mn   [8] NEWA VOWEL SIGN U..NEWA VOWEL SIGN AI
		(0x11442 <= code && code <= 0x11444) || // Mn   [3] NEWA SIGN VIRAMA..NEWA SIGN ANUSVARA
		0x11446 == code || // Mn       NEWA SIGN NUKTA
		0x114B0 == code || // Mc       TIRHUTA VOWEL SIGN AA
		(0x114B3 <= code && code <= 0x114B8) || // Mn   [6] TIRHUTA VOWEL SIGN U..TIRHUTA VOWEL SIGN VOCALIC LL
		0x114BA == code || // Mn       TIRHUTA VOWEL SIGN SHORT E
		0x114BD == code || // Mc       TIRHUTA VOWEL SIGN SHORT O
		(0x114BF <= code && code <= 0x114C0) || // Mn   [2] TIRHUTA SIGN CANDRABINDU..TIRHUTA SIGN ANUSVARA
		(0x114C2 <= code && code <= 0x114C3) || // Mn   [2] TIRHUTA SIGN VIRAMA..TIRHUTA SIGN NUKTA
		0x115AF == code || // Mc       SIDDHAM VOWEL SIGN AA
		(0x115B2 <= code && code <= 0x115B5) || // Mn   [4] SIDDHAM VOWEL SIGN U..SIDDHAM VOWEL SIGN VOCALIC RR
		(0x115BC <= code && code <= 0x115BD) || // Mn   [2] SIDDHAM SIGN CANDRABINDU..SIDDHAM SIGN ANUSVARA
		(0x115BF <= code && code <= 0x115C0) || // Mn   [2] SIDDHAM SIGN VIRAMA..SIDDHAM SIGN NUKTA
		(0x115DC <= code && code <= 0x115DD) || // Mn   [2] SIDDHAM VOWEL SIGN ALTERNATE U..SIDDHAM VOWEL SIGN ALTERNATE UU
		(0x11633 <= code && code <= 0x1163A) || // Mn   [8] MODI VOWEL SIGN U..MODI VOWEL SIGN AI
		0x1163D == code || // Mn       MODI SIGN ANUSVARA
		(0x1163F <= code && code <= 0x11640) || // Mn   [2] MODI SIGN VIRAMA..MODI SIGN ARDHACANDRA
		0x116AB == code || // Mn       TAKRI SIGN ANUSVARA
		0x116AD == code || // Mn       TAKRI VOWEL SIGN AA
		(0x116B0 <= code && code <= 0x116B5) || // Mn   [6] TAKRI VOWEL SIGN U..TAKRI VOWEL SIGN AU
		0x116B7 == code || // Mn       TAKRI SIGN NUKTA
		(0x1171D <= code && code <= 0x1171F) || // Mn   [3] AHOM CONSONANT SIGN MEDIAL LA..AHOM CONSONANT SIGN MEDIAL LIGATING RA
		(0x11722 <= code && code <= 0x11725) || // Mn   [4] AHOM VOWEL SIGN I..AHOM VOWEL SIGN UU
		(0x11727 <= code && code <= 0x1172B) || // Mn   [5] AHOM VOWEL SIGN AW..AHOM SIGN KILLER
		(0x11A01 <= code && code <= 0x11A06) || // Mn   [6] ZANABAZAR SQUARE VOWEL SIGN I..ZANABAZAR SQUARE VOWEL SIGN O
		(0x11A09 <= code && code <= 0x11A0A) || // Mn   [2] ZANABAZAR SQUARE VOWEL SIGN REVERSED I..ZANABAZAR SQUARE VOWEL LENGTH MARK
		(0x11A33 <= code && code <= 0x11A38) || // Mn   [6] ZANABAZAR SQUARE FINAL CONSONANT MARK..ZANABAZAR SQUARE SIGN ANUSVARA
		(0x11A3B <= code && code <= 0x11A3E) || // Mn   [4] ZANABAZAR SQUARE CLUSTER-FINAL LETTER YA..ZANABAZAR SQUARE CLUSTER-FINAL LETTER VA
		0x11A47 == code || // Mn       ZANABAZAR SQUARE SUBJOINER
		(0x11A51 <= code && code <= 0x11A56) || // Mn   [6] SOYOMBO VOWEL SIGN I..SOYOMBO VOWEL SIGN OE
		(0x11A59 <= code && code <= 0x11A5B) || // Mn   [3] SOYOMBO VOWEL SIGN VOCALIC R..SOYOMBO VOWEL LENGTH MARK
		(0x11A8A <= code && code <= 0x11A96) || // Mn  [13] SOYOMBO FINAL CONSONANT SIGN G..SOYOMBO SIGN ANUSVARA
		(0x11A98 <= code && code <= 0x11A99) || // Mn   [2] SOYOMBO GEMINATION MARK..SOYOMBO SUBJOINER
		(0x11C30 <= code && code <= 0x11C36) || // Mn   [7] BHAIKSUKI VOWEL SIGN I..BHAIKSUKI VOWEL SIGN VOCALIC L
		(0x11C38 <= code && code <= 0x11C3D) || // Mn   [6] BHAIKSUKI VOWEL SIGN E..BHAIKSUKI SIGN ANUSVARA
		0x11C3F == code || // Mn       BHAIKSUKI SIGN VIRAMA
		(0x11C92 <= code && code <= 0x11CA7) || // Mn  [22] MARCHEN SUBJOINED LETTER KA..MARCHEN SUBJOINED LETTER ZA
		(0x11CAA <= code && code <= 0x11CB0) || // Mn   [7] MARCHEN SUBJOINED LETTER RA..MARCHEN VOWEL SIGN AA
		(0x11CB2 <= code && code <= 0x11CB3) || // Mn   [2] MARCHEN VOWEL SIGN U..MARCHEN VOWEL SIGN E
		(0x11CB5 <= code && code <= 0x11CB6) || // Mn   [2] MARCHEN SIGN ANUSVARA..MARCHEN SIGN CANDRABINDU
		(0x11D31 <= code && code <= 0x11D36) || // Mn   [6] MASARAM GONDI VOWEL SIGN AA..MASARAM GONDI VOWEL SIGN VOCALIC R
		0x11D3A == code || // Mn       MASARAM GONDI VOWEL SIGN E
		(0x11D3C <= code && code <= 0x11D3D) || // Mn   [2] MASARAM GONDI VOWEL SIGN AI..MASARAM GONDI VOWEL SIGN O
		(0x11D3F <= code && code <= 0x11D45) || // Mn   [7] MASARAM GONDI VOWEL SIGN AU..MASARAM GONDI VIRAMA
		0x11D47 == code || // Mn       MASARAM GONDI RA-KARA
		(0x16AF0 <= code && code <= 0x16AF4) || // Mn   [5] BASSA VAH COMBINING HIGH TONE..BASSA VAH COMBINING HIGH-LOW TONE
		(0x16B30 <= code && code <= 0x16B36) || // Mn   [7] PAHAWH HMONG MARK CIM TUB..PAHAWH HMONG MARK CIM TAUM
		(0x16F8F <= code && code <= 0x16F92) || // Mn   [4] MIAO TONE RIGHT..MIAO TONE BELOW
		(0x1BC9D <= code && code <= 0x1BC9E) || // Mn   [2] DUPLOYAN THICK LETTER SELECTOR..DUPLOYAN DOUBLE MARK
		0x1D165 == code || // Mc       MUSICAL SYMBOL COMBINING STEM
		(0x1D167 <= code && code <= 0x1D169) || // Mn   [3] MUSICAL SYMBOL COMBINING TREMOLO-1..MUSICAL SYMBOL COMBINING TREMOLO-3
		(0x1D16E <= code && code <= 0x1D172) || // Mc   [5] MUSICAL SYMBOL COMBINING FLAG-1..MUSICAL SYMBOL COMBINING FLAG-5
		(0x1D17B <= code && code <= 0x1D182) || // Mn   [8] MUSICAL SYMBOL COMBINING ACCENT..MUSICAL SYMBOL COMBINING LOURE
		(0x1D185 <= code && code <= 0x1D18B) || // Mn   [7] MUSICAL SYMBOL COMBINING DOIT..MUSICAL SYMBOL COMBINING TRIPLE TONGUE
		(0x1D1AA <= code && code <= 0x1D1AD) || // Mn   [4] MUSICAL SYMBOL COMBINING DOWN BOW..MUSICAL SYMBOL COMBINING SNAP PIZZICATO
		(0x1D242 <= code && code <= 0x1D244) || // Mn   [3] COMBINING GREEK MUSICAL TRISEME..COMBINING GREEK MUSICAL PENTASEME
		(0x1DA00 <= code && code <= 0x1DA36) || // Mn  [55] SIGNWRITING HEAD RIM..SIGNWRITING AIR SUCKING IN
		(0x1DA3B <= code && code <= 0x1DA6C) || // Mn  [50] SIGNWRITING MOUTH CLOSED NEUTRAL..SIGNWRITING EXCITEMENT
		0x1DA75 == code || // Mn       SIGNWRITING UPPER BODY TILTING FROM HIP JOINTS
		0x1DA84 == code || // Mn       SIGNWRITING LOCATION HEAD NECK
		(0x1DA9B <= code && code <= 0x1DA9F) || // Mn   [5] SIGNWRITING FILL MODIFIER-2..SIGNWRITING FILL MODIFIER-6
		(0x1DAA1 <= code && code <= 0x1DAAF) || // Mn  [15] SIGNWRITING ROTATION MODIFIER-2..SIGNWRITING ROTATION MODIFIER-16
		(0x1E000 <= code && code <= 0x1E006) || // Mn   [7] COMBINING GLAGOLITIC LETTER AZU..COMBINING GLAGOLITIC LETTER ZHIVETE
		(0x1E008 <= code && code <= 0x1E018) || // Mn  [17] COMBINING GLAGOLITIC LETTER ZEMLJA..COMBINING GLAGOLITIC LETTER HERU
		(0x1E01B <= code && code <= 0x1E021) || // Mn   [7] COMBINING GLAGOLITIC LETTER SHTA..COMBINING GLAGOLITIC LETTER YATI
		(0x1E023 <= code && code <= 0x1E024) || // Mn   [2] COMBINING GLAGOLITIC LETTER YU..COMBINING GLAGOLITIC LETTER SMALL YUS
		(0x1E026 <= code && code <= 0x1E02A) || // Mn   [5] COMBINING GLAGOLITIC LETTER YO..COMBINING GLAGOLITIC LETTER FITA
		(0x1E8D0 <= code && code <= 0x1E8D6) || // Mn   [7] MENDE KIKAKUI COMBINING NUMBER TEENS..MENDE KIKAKUI COMBINING NUMBER MILLIONS
		(0x1E944 <= code && code <= 0x1E94A) || // Mn   [7] ADLAM ALIF LENGTHENER..ADLAM NUKTA
		(0xE0020 <= code && code <= 0xE007F) || // Cf  [96] TAG SPACE..CANCEL TAG
		(0xE0100 <= code && code <= 0xE01EF) // Mn [240] VARIATION SELECTOR-17..VARIATION SELECTOR-256
		){
			return Extend;
		}
		
		
		if(
		(0x1F1E6 <= code && code <= 0x1F1FF) // So  [26] REGIONAL INDICATOR SYMBOL LETTER A..REGIONAL INDICATOR SYMBOL LETTER Z
		){
			return Regional_Indicator;
		}
		
		if(
		0x0903 == code || // Mc       DEVANAGARI SIGN VISARGA
		0x093B == code || // Mc       DEVANAGARI VOWEL SIGN OOE
		(0x093E <= code && code <= 0x0940) || // Mc   [3] DEVANAGARI VOWEL SIGN AA..DEVANAGARI VOWEL SIGN II
		(0x0949 <= code && code <= 0x094C) || // Mc   [4] DEVANAGARI VOWEL SIGN CANDRA O..DEVANAGARI VOWEL SIGN AU
		(0x094E <= code && code <= 0x094F) || // Mc   [2] DEVANAGARI VOWEL SIGN PRISHTHAMATRA E..DEVANAGARI VOWEL SIGN AW
		(0x0982 <= code && code <= 0x0983) || // Mc   [2] BENGALI SIGN ANUSVARA..BENGALI SIGN VISARGA
		(0x09BF <= code && code <= 0x09C0) || // Mc   [2] BENGALI VOWEL SIGN I..BENGALI VOWEL SIGN II
		(0x09C7 <= code && code <= 0x09C8) || // Mc   [2] BENGALI VOWEL SIGN E..BENGALI VOWEL SIGN AI
		(0x09CB <= code && code <= 0x09CC) || // Mc   [2] BENGALI VOWEL SIGN O..BENGALI VOWEL SIGN AU
		0x0A03 == code || // Mc       GURMUKHI SIGN VISARGA
		(0x0A3E <= code && code <= 0x0A40) || // Mc   [3] GURMUKHI VOWEL SIGN AA..GURMUKHI VOWEL SIGN II
		0x0A83 == code || // Mc       GUJARATI SIGN VISARGA
		(0x0ABE <= code && code <= 0x0AC0) || // Mc   [3] GUJARATI VOWEL SIGN AA..GUJARATI VOWEL SIGN II
		0x0AC9 == code || // Mc       GUJARATI VOWEL SIGN CANDRA O
		(0x0ACB <= code && code <= 0x0ACC) || // Mc   [2] GUJARATI VOWEL SIGN O..GUJARATI VOWEL SIGN AU
		(0x0B02 <= code && code <= 0x0B03) || // Mc   [2] ORIYA SIGN ANUSVARA..ORIYA SIGN VISARGA
		0x0B40 == code || // Mc       ORIYA VOWEL SIGN II
		(0x0B47 <= code && code <= 0x0B48) || // Mc   [2] ORIYA VOWEL SIGN E..ORIYA VOWEL SIGN AI
		(0x0B4B <= code && code <= 0x0B4C) || // Mc   [2] ORIYA VOWEL SIGN O..ORIYA VOWEL SIGN AU
		0x0BBF == code || // Mc       TAMIL VOWEL SIGN I
		(0x0BC1 <= code && code <= 0x0BC2) || // Mc   [2] TAMIL VOWEL SIGN U..TAMIL VOWEL SIGN UU
		(0x0BC6 <= code && code <= 0x0BC8) || // Mc   [3] TAMIL VOWEL SIGN E..TAMIL VOWEL SIGN AI
		(0x0BCA <= code && code <= 0x0BCC) || // Mc   [3] TAMIL VOWEL SIGN O..TAMIL VOWEL SIGN AU
		(0x0C01 <= code && code <= 0x0C03) || // Mc   [3] TELUGU SIGN CANDRABINDU..TELUGU SIGN VISARGA
		(0x0C41 <= code && code <= 0x0C44) || // Mc   [4] TELUGU VOWEL SIGN U..TELUGU VOWEL SIGN VOCALIC RR
		(0x0C82 <= code && code <= 0x0C83) || // Mc   [2] KANNADA SIGN ANUSVARA..KANNADA SIGN VISARGA
		0x0CBE == code || // Mc       KANNADA VOWEL SIGN AA
		(0x0CC0 <= code && code <= 0x0CC1) || // Mc   [2] KANNADA VOWEL SIGN II..KANNADA VOWEL SIGN U
		(0x0CC3 <= code && code <= 0x0CC4) || // Mc   [2] KANNADA VOWEL SIGN VOCALIC R..KANNADA VOWEL SIGN VOCALIC RR
		(0x0CC7 <= code && code <= 0x0CC8) || // Mc   [2] KANNADA VOWEL SIGN EE..KANNADA VOWEL SIGN AI
		(0x0CCA <= code && code <= 0x0CCB) || // Mc   [2] KANNADA VOWEL SIGN O..KANNADA VOWEL SIGN OO
		(0x0D02 <= code && code <= 0x0D03) || // Mc   [2] MALAYALAM SIGN ANUSVARA..MALAYALAM SIGN VISARGA
		(0x0D3F <= code && code <= 0x0D40) || // Mc   [2] MALAYALAM VOWEL SIGN I..MALAYALAM VOWEL SIGN II
		(0x0D46 <= code && code <= 0x0D48) || // Mc   [3] MALAYALAM VOWEL SIGN E..MALAYALAM VOWEL SIGN AI
		(0x0D4A <= code && code <= 0x0D4C) || // Mc   [3] MALAYALAM VOWEL SIGN O..MALAYALAM VOWEL SIGN AU
		(0x0D82 <= code && code <= 0x0D83) || // Mc   [2] SINHALA SIGN ANUSVARAYA..SINHALA SIGN VISARGAYA
		(0x0DD0 <= code && code <= 0x0DD1) || // Mc   [2] SINHALA VOWEL SIGN KETTI AEDA-PILLA..SINHALA VOWEL SIGN DIGA AEDA-PILLA
		(0x0DD8 <= code && code <= 0x0DDE) || // Mc   [7] SINHALA VOWEL SIGN GAETTA-PILLA..SINHALA VOWEL SIGN KOMBUVA HAA GAYANUKITTA
		(0x0DF2 <= code && code <= 0x0DF3) || // Mc   [2] SINHALA VOWEL SIGN DIGA GAETTA-PILLA..SINHALA VOWEL SIGN DIGA GAYANUKITTA
		0x0E33 == code || // Lo       THAI CHARACTER SARA AM
		0x0EB3 == code || // Lo       LAO VOWEL SIGN AM
		(0x0F3E <= code && code <= 0x0F3F) || // Mc   [2] TIBETAN SIGN YAR TSHES..TIBETAN SIGN MAR TSHES
		0x0F7F == code || // Mc       TIBETAN SIGN RNAM BCAD
		0x1031 == code || // Mc       MYANMAR VOWEL SIGN E
		(0x103B <= code && code <= 0x103C) || // Mc   [2] MYANMAR CONSONANT SIGN MEDIAL YA..MYANMAR CONSONANT SIGN MEDIAL RA
		(0x1056 <= code && code <= 0x1057) || // Mc   [2] MYANMAR VOWEL SIGN VOCALIC R..MYANMAR VOWEL SIGN VOCALIC RR
		0x1084 == code || // Mc       MYANMAR VOWEL SIGN SHAN E
		0x17B6 == code || // Mc       KHMER VOWEL SIGN AA
		(0x17BE <= code && code <= 0x17C5) || // Mc   [8] KHMER VOWEL SIGN OE..KHMER VOWEL SIGN AU
		(0x17C7 <= code && code <= 0x17C8) || // Mc   [2] KHMER SIGN REAHMUK..KHMER SIGN YUUKALEAPINTU
		(0x1923 <= code && code <= 0x1926) || // Mc   [4] LIMBU VOWEL SIGN EE..LIMBU VOWEL SIGN AU
		(0x1929 <= code && code <= 0x192B) || // Mc   [3] LIMBU SUBJOINED LETTER YA..LIMBU SUBJOINED LETTER WA
		(0x1930 <= code && code <= 0x1931) || // Mc   [2] LIMBU SMALL LETTER KA..LIMBU SMALL LETTER NGA
		(0x1933 <= code && code <= 0x1938) || // Mc   [6] LIMBU SMALL LETTER TA..LIMBU SMALL LETTER LA
		(0x1A19 <= code && code <= 0x1A1A) || // Mc   [2] BUGINESE VOWEL SIGN E..BUGINESE VOWEL SIGN O
		0x1A55 == code || // Mc       TAI THAM CONSONANT SIGN MEDIAL RA
		0x1A57 == code || // Mc       TAI THAM CONSONANT SIGN LA TANG LAI
		(0x1A6D <= code && code <= 0x1A72) || // Mc   [6] TAI THAM VOWEL SIGN OY..TAI THAM VOWEL SIGN THAM AI
		0x1B04 == code || // Mc       BALINESE SIGN BISAH
		0x1B35 == code || // Mc       BALINESE VOWEL SIGN TEDUNG
		0x1B3B == code || // Mc       BALINESE VOWEL SIGN RA REPA TEDUNG
		(0x1B3D <= code && code <= 0x1B41) || // Mc   [5] BALINESE VOWEL SIGN LA LENGA TEDUNG..BALINESE VOWEL SIGN TALING REPA TEDUNG
		(0x1B43 <= code && code <= 0x1B44) || // Mc   [2] BALINESE VOWEL SIGN PEPET TEDUNG..BALINESE ADEG ADEG
		0x1B82 == code || // Mc       SUNDANESE SIGN PANGWISAD
		0x1BA1 == code || // Mc       SUNDANESE CONSONANT SIGN PAMINGKAL
		(0x1BA6 <= code && code <= 0x1BA7) || // Mc   [2] SUNDANESE VOWEL SIGN PANAELAENG..SUNDANESE VOWEL SIGN PANOLONG
		0x1BAA == code || // Mc       SUNDANESE SIGN PAMAAEH
		0x1BE7 == code || // Mc       BATAK VOWEL SIGN E
		(0x1BEA <= code && code <= 0x1BEC) || // Mc   [3] BATAK VOWEL SIGN I..BATAK VOWEL SIGN O
		0x1BEE == code || // Mc       BATAK VOWEL SIGN U
		(0x1BF2 <= code && code <= 0x1BF3) || // Mc   [2] BATAK PANGOLAT..BATAK PANONGONAN
		(0x1C24 <= code && code <= 0x1C2B) || // Mc   [8] LEPCHA SUBJOINED LETTER YA..LEPCHA VOWEL SIGN UU
		(0x1C34 <= code && code <= 0x1C35) || // Mc   [2] LEPCHA CONSONANT SIGN NYIN-DO..LEPCHA CONSONANT SIGN KANG
		0x1CE1 == code || // Mc       VEDIC TONE ATHARVAVEDIC INDEPENDENT SVARITA
		(0x1CF2 <= code && code <= 0x1CF3) || // Mc   [2] VEDIC SIGN ARDHAVISARGA..VEDIC SIGN ROTATED ARDHAVISARGA
		0x1CF7 == code || // Mc       VEDIC SIGN ATIKRAMA
		(0xA823 <= code && code <= 0xA824) || // Mc   [2] SYLOTI NAGRI VOWEL SIGN A..SYLOTI NAGRI VOWEL SIGN I
		0xA827 == code || // Mc       SYLOTI NAGRI VOWEL SIGN OO
		(0xA880 <= code && code <= 0xA881) || // Mc   [2] SAURASHTRA SIGN ANUSVARA..SAURASHTRA SIGN VISARGA
		(0xA8B4 <= code && code <= 0xA8C3) || // Mc  [16] SAURASHTRA CONSONANT SIGN HAARU..SAURASHTRA VOWEL SIGN AU
		(0xA952 <= code && code <= 0xA953) || // Mc   [2] REJANG CONSONANT SIGN H..REJANG VIRAMA
		0xA983 == code || // Mc       JAVANESE SIGN WIGNYAN
		(0xA9B4 <= code && code <= 0xA9B5) || // Mc   [2] JAVANESE VOWEL SIGN TARUNG..JAVANESE VOWEL SIGN TOLONG
		(0xA9BA <= code && code <= 0xA9BB) || // Mc   [2] JAVANESE VOWEL SIGN TALING..JAVANESE VOWEL SIGN DIRGA MURE
		(0xA9BD <= code && code <= 0xA9C0) || // Mc   [4] JAVANESE CONSONANT SIGN KERET..JAVANESE PANGKON
		(0xAA2F <= code && code <= 0xAA30) || // Mc   [2] CHAM VOWEL SIGN O..CHAM VOWEL SIGN AI
		(0xAA33 <= code && code <= 0xAA34) || // Mc   [2] CHAM CONSONANT SIGN YA..CHAM CONSONANT SIGN RA
		0xAA4D == code || // Mc       CHAM CONSONANT SIGN FINAL H
		0xAAEB == code || // Mc       MEETEI MAYEK VOWEL SIGN II
		(0xAAEE <= code && code <= 0xAAEF) || // Mc   [2] MEETEI MAYEK VOWEL SIGN AU..MEETEI MAYEK VOWEL SIGN AAU
		0xAAF5 == code || // Mc       MEETEI MAYEK VOWEL SIGN VISARGA
		(0xABE3 <= code && code <= 0xABE4) || // Mc   [2] MEETEI MAYEK VOWEL SIGN ONAP..MEETEI MAYEK VOWEL SIGN INAP
		(0xABE6 <= code && code <= 0xABE7) || // Mc   [2] MEETEI MAYEK VOWEL SIGN YENAP..MEETEI MAYEK VOWEL SIGN SOUNAP
		(0xABE9 <= code && code <= 0xABEA) || // Mc   [2] MEETEI MAYEK VOWEL SIGN CHEINAP..MEETEI MAYEK VOWEL SIGN NUNG
		0xABEC == code || // Mc       MEETEI MAYEK LUM IYEK
		0x11000 == code || // Mc       BRAHMI SIGN CANDRABINDU
		0x11002 == code || // Mc       BRAHMI SIGN VISARGA
		0x11082 == code || // Mc       KAITHI SIGN VISARGA
		(0x110B0 <= code && code <= 0x110B2) || // Mc   [3] KAITHI VOWEL SIGN AA..KAITHI VOWEL SIGN II
		(0x110B7 <= code && code <= 0x110B8) || // Mc   [2] KAITHI VOWEL SIGN O..KAITHI VOWEL SIGN AU
		0x1112C == code || // Mc       CHAKMA VOWEL SIGN E
		0x11182 == code || // Mc       SHARADA SIGN VISARGA
		(0x111B3 <= code && code <= 0x111B5) || // Mc   [3] SHARADA VOWEL SIGN AA..SHARADA VOWEL SIGN II
		(0x111BF <= code && code <= 0x111C0) || // Mc   [2] SHARADA VOWEL SIGN AU..SHARADA SIGN VIRAMA
		(0x1122C <= code && code <= 0x1122E) || // Mc   [3] KHOJKI VOWEL SIGN AA..KHOJKI VOWEL SIGN II
		(0x11232 <= code && code <= 0x11233) || // Mc   [2] KHOJKI VOWEL SIGN O..KHOJKI VOWEL SIGN AU
		0x11235 == code || // Mc       KHOJKI SIGN VIRAMA
		(0x112E0 <= code && code <= 0x112E2) || // Mc   [3] KHUDAWADI VOWEL SIGN AA..KHUDAWADI VOWEL SIGN II
		(0x11302 <= code && code <= 0x11303) || // Mc   [2] GRANTHA SIGN ANUSVARA..GRANTHA SIGN VISARGA
		0x1133F == code || // Mc       GRANTHA VOWEL SIGN I
		(0x11341 <= code && code <= 0x11344) || // Mc   [4] GRANTHA VOWEL SIGN U..GRANTHA VOWEL SIGN VOCALIC RR
		(0x11347 <= code && code <= 0x11348) || // Mc   [2] GRANTHA VOWEL SIGN EE..GRANTHA VOWEL SIGN AI
		(0x1134B <= code && code <= 0x1134D) || // Mc   [3] GRANTHA VOWEL SIGN OO..GRANTHA SIGN VIRAMA
		(0x11362 <= code && code <= 0x11363) || // Mc   [2] GRANTHA VOWEL SIGN VOCALIC L..GRANTHA VOWEL SIGN VOCALIC LL
		(0x11435 <= code && code <= 0x11437) || // Mc   [3] NEWA VOWEL SIGN AA..NEWA VOWEL SIGN II
		(0x11440 <= code && code <= 0x11441) || // Mc   [2] NEWA VOWEL SIGN O..NEWA VOWEL SIGN AU
		0x11445 == code || // Mc       NEWA SIGN VISARGA
		(0x114B1 <= code && code <= 0x114B2) || // Mc   [2] TIRHUTA VOWEL SIGN I..TIRHUTA VOWEL SIGN II
		0x114B9 == code || // Mc       TIRHUTA VOWEL SIGN E
		(0x114BB <= code && code <= 0x114BC) || // Mc   [2] TIRHUTA VOWEL SIGN AI..TIRHUTA VOWEL SIGN O
		0x114BE == code || // Mc       TIRHUTA VOWEL SIGN AU
		0x114C1 == code || // Mc       TIRHUTA SIGN VISARGA
		(0x115B0 <= code && code <= 0x115B1) || // Mc   [2] SIDDHAM VOWEL SIGN I..SIDDHAM VOWEL SIGN II
		(0x115B8 <= code && code <= 0x115BB) || // Mc   [4] SIDDHAM VOWEL SIGN E..SIDDHAM VOWEL SIGN AU
		0x115BE == code || // Mc       SIDDHAM SIGN VISARGA
		(0x11630 <= code && code <= 0x11632) || // Mc   [3] MODI VOWEL SIGN AA..MODI VOWEL SIGN II
		(0x1163B <= code && code <= 0x1163C) || // Mc   [2] MODI VOWEL SIGN O..MODI VOWEL SIGN AU
		0x1163E == code || // Mc       MODI SIGN VISARGA
		0x116AC == code || // Mc       TAKRI SIGN VISARGA
		(0x116AE <= code && code <= 0x116AF) || // Mc   [2] TAKRI VOWEL SIGN I..TAKRI VOWEL SIGN II
		0x116B6 == code || // Mc       TAKRI SIGN VIRAMA
		(0x11720 <= code && code <= 0x11721) || // Mc   [2] AHOM VOWEL SIGN A..AHOM VOWEL SIGN AA
		0x11726 == code || // Mc       AHOM VOWEL SIGN E
		(0x11A07 <= code && code <= 0x11A08) || // Mc   [2] ZANABAZAR SQUARE VOWEL SIGN AI..ZANABAZAR SQUARE VOWEL SIGN AU
		0x11A39 == code || // Mc       ZANABAZAR SQUARE SIGN VISARGA
		(0x11A57 <= code && code <= 0x11A58) || // Mc   [2] SOYOMBO VOWEL SIGN AI..SOYOMBO VOWEL SIGN AU
		0x11A97 == code || // Mc       SOYOMBO SIGN VISARGA
		0x11C2F == code || // Mc       BHAIKSUKI VOWEL SIGN AA
		0x11C3E == code || // Mc       BHAIKSUKI SIGN VISARGA
		0x11CA9 == code || // Mc       MARCHEN SUBJOINED LETTER YA
		0x11CB1 == code || // Mc       MARCHEN VOWEL SIGN I
		0x11CB4 == code || // Mc       MARCHEN VOWEL SIGN O
		(0x16F51 <= code && code <= 0x16F7E) || // Mc  [46] MIAO SIGN ASPIRATION..MIAO VOWEL SIGN NG
		0x1D166 == code || // Mc       MUSICAL SYMBOL COMBINING SPRECHGESANG STEM
		0x1D16D == code // Mc       MUSICAL SYMBOL COMBINING AUGMENTATION DOT
		){
			return SpacingMark;
		}
		
		
		if(
		(0x1100 <= code && code <= 0x115F) || // Lo  [96] HANGUL CHOSEONG KIYEOK..HANGUL CHOSEONG FILLER
		(0xA960 <= code && code <= 0xA97C) // Lo  [29] HANGUL CHOSEONG TIKEUT-MIEUM..HANGUL CHOSEONG SSANGYEORINHIEUH
		){
			return L;
		}
		
		if(
		(0x1160 <= code && code <= 0x11A7) || // Lo  [72] HANGUL JUNGSEONG FILLER..HANGUL JUNGSEONG O-YAE
		(0xD7B0 <= code && code <= 0xD7C6) // Lo  [23] HANGUL JUNGSEONG O-YEO..HANGUL JUNGSEONG ARAEA-E
		){
			return V;
		}
		
		
		if(
		(0x11A8 <= code && code <= 0x11FF) || // Lo  [88] HANGUL JONGSEONG KIYEOK..HANGUL JONGSEONG SSANGNIEUN
		(0xD7CB <= code && code <= 0xD7FB) // Lo  [49] HANGUL JONGSEONG NIEUN-RIEUL..HANGUL JONGSEONG PHIEUPH-THIEUTH
		){
			return T;
		}
		
		if(
		0xAC00 == code || // Lo       HANGUL SYLLABLE GA
		0xAC1C == code || // Lo       HANGUL SYLLABLE GAE
		0xAC38 == code || // Lo       HANGUL SYLLABLE GYA
		0xAC54 == code || // Lo       HANGUL SYLLABLE GYAE
		0xAC70 == code || // Lo       HANGUL SYLLABLE GEO
		0xAC8C == code || // Lo       HANGUL SYLLABLE GE
		0xACA8 == code || // Lo       HANGUL SYLLABLE GYEO
		0xACC4 == code || // Lo       HANGUL SYLLABLE GYE
		0xACE0 == code || // Lo       HANGUL SYLLABLE GO
		0xACFC == code || // Lo       HANGUL SYLLABLE GWA
		0xAD18 == code || // Lo       HANGUL SYLLABLE GWAE
		0xAD34 == code || // Lo       HANGUL SYLLABLE GOE
		0xAD50 == code || // Lo       HANGUL SYLLABLE GYO
		0xAD6C == code || // Lo       HANGUL SYLLABLE GU
		0xAD88 == code || // Lo       HANGUL SYLLABLE GWEO
		0xADA4 == code || // Lo       HANGUL SYLLABLE GWE
		0xADC0 == code || // Lo       HANGUL SYLLABLE GWI
		0xADDC == code || // Lo       HANGUL SYLLABLE GYU
		0xADF8 == code || // Lo       HANGUL SYLLABLE GEU
		0xAE14 == code || // Lo       HANGUL SYLLABLE GYI
		0xAE30 == code || // Lo       HANGUL SYLLABLE GI
		0xAE4C == code || // Lo       HANGUL SYLLABLE GGA
		0xAE68 == code || // Lo       HANGUL SYLLABLE GGAE
		0xAE84 == code || // Lo       HANGUL SYLLABLE GGYA
		0xAEA0 == code || // Lo       HANGUL SYLLABLE GGYAE
		0xAEBC == code || // Lo       HANGUL SYLLABLE GGEO
		0xAED8 == code || // Lo       HANGUL SYLLABLE GGE
		0xAEF4 == code || // Lo       HANGUL SYLLABLE GGYEO
		0xAF10 == code || // Lo       HANGUL SYLLABLE GGYE
		0xAF2C == code || // Lo       HANGUL SYLLABLE GGO
		0xAF48 == code || // Lo       HANGUL SYLLABLE GGWA
		0xAF64 == code || // Lo       HANGUL SYLLABLE GGWAE
		0xAF80 == code || // Lo       HANGUL SYLLABLE GGOE
		0xAF9C == code || // Lo       HANGUL SYLLABLE GGYO
		0xAFB8 == code || // Lo       HANGUL SYLLABLE GGU
		0xAFD4 == code || // Lo       HANGUL SYLLABLE GGWEO
		0xAFF0 == code || // Lo       HANGUL SYLLABLE GGWE
		0xB00C == code || // Lo       HANGUL SYLLABLE GGWI
		0xB028 == code || // Lo       HANGUL SYLLABLE GGYU
		0xB044 == code || // Lo       HANGUL SYLLABLE GGEU
		0xB060 == code || // Lo       HANGUL SYLLABLE GGYI
		0xB07C == code || // Lo       HANGUL SYLLABLE GGI
		0xB098 == code || // Lo       HANGUL SYLLABLE NA
		0xB0B4 == code || // Lo       HANGUL SYLLABLE NAE
		0xB0D0 == code || // Lo       HANGUL SYLLABLE NYA
		0xB0EC == code || // Lo       HANGUL SYLLABLE NYAE
		0xB108 == code || // Lo       HANGUL SYLLABLE NEO
		0xB124 == code || // Lo       HANGUL SYLLABLE NE
		0xB140 == code || // Lo       HANGUL SYLLABLE NYEO
		0xB15C == code || // Lo       HANGUL SYLLABLE NYE
		0xB178 == code || // Lo       HANGUL SYLLABLE NO
		0xB194 == code || // Lo       HANGUL SYLLABLE NWA
		0xB1B0 == code || // Lo       HANGUL SYLLABLE NWAE
		0xB1CC == code || // Lo       HANGUL SYLLABLE NOE
		0xB1E8 == code || // Lo       HANGUL SYLLABLE NYO
		0xB204 == code || // Lo       HANGUL SYLLABLE NU
		0xB220 == code || // Lo       HANGUL SYLLABLE NWEO
		0xB23C == code || // Lo       HANGUL SYLLABLE NWE
		0xB258 == code || // Lo       HANGUL SYLLABLE NWI
		0xB274 == code || // Lo       HANGUL SYLLABLE NYU
		0xB290 == code || // Lo       HANGUL SYLLABLE NEU
		0xB2AC == code || // Lo       HANGUL SYLLABLE NYI
		0xB2C8 == code || // Lo       HANGUL SYLLABLE NI
		0xB2E4 == code || // Lo       HANGUL SYLLABLE DA
		0xB300 == code || // Lo       HANGUL SYLLABLE DAE
		0xB31C == code || // Lo       HANGUL SYLLABLE DYA
		0xB338 == code || // Lo       HANGUL SYLLABLE DYAE
		0xB354 == code || // Lo       HANGUL SYLLABLE DEO
		0xB370 == code || // Lo       HANGUL SYLLABLE DE
		0xB38C == code || // Lo       HANGUL SYLLABLE DYEO
		0xB3A8 == code || // Lo       HANGUL SYLLABLE DYE
		0xB3C4 == code || // Lo       HANGUL SYLLABLE DO
		0xB3E0 == code || // Lo       HANGUL SYLLABLE DWA
		0xB3FC == code || // Lo       HANGUL SYLLABLE DWAE
		0xB418 == code || // Lo       HANGUL SYLLABLE DOE
		0xB434 == code || // Lo       HANGUL SYLLABLE DYO
		0xB450 == code || // Lo       HANGUL SYLLABLE DU
		0xB46C == code || // Lo       HANGUL SYLLABLE DWEO
		0xB488 == code || // Lo       HANGUL SYLLABLE DWE
		0xB4A4 == code || // Lo       HANGUL SYLLABLE DWI
		0xB4C0 == code || // Lo       HANGUL SYLLABLE DYU
		0xB4DC == code || // Lo       HANGUL SYLLABLE DEU
		0xB4F8 == code || // Lo       HANGUL SYLLABLE DYI
		0xB514 == code || // Lo       HANGUL SYLLABLE DI
		0xB530 == code || // Lo       HANGUL SYLLABLE DDA
		0xB54C == code || // Lo       HANGUL SYLLABLE DDAE
		0xB568 == code || // Lo       HANGUL SYLLABLE DDYA
		0xB584 == code || // Lo       HANGUL SYLLABLE DDYAE
		0xB5A0 == code || // Lo       HANGUL SYLLABLE DDEO
		0xB5BC == code || // Lo       HANGUL SYLLABLE DDE
		0xB5D8 == code || // Lo       HANGUL SYLLABLE DDYEO
		0xB5F4 == code || // Lo       HANGUL SYLLABLE DDYE
		0xB610 == code || // Lo       HANGUL SYLLABLE DDO
		0xB62C == code || // Lo       HANGUL SYLLABLE DDWA
		0xB648 == code || // Lo       HANGUL SYLLABLE DDWAE
		0xB664 == code || // Lo       HANGUL SYLLABLE DDOE
		0xB680 == code || // Lo       HANGUL SYLLABLE DDYO
		0xB69C == code || // Lo       HANGUL SYLLABLE DDU
		0xB6B8 == code || // Lo       HANGUL SYLLABLE DDWEO
		0xB6D4 == code || // Lo       HANGUL SYLLABLE DDWE
		0xB6F0 == code || // Lo       HANGUL SYLLABLE DDWI
		0xB70C == code || // Lo       HANGUL SYLLABLE DDYU
		0xB728 == code || // Lo       HANGUL SYLLABLE DDEU
		0xB744 == code || // Lo       HANGUL SYLLABLE DDYI
		0xB760 == code || // Lo       HANGUL SYLLABLE DDI
		0xB77C == code || // Lo       HANGUL SYLLABLE RA
		0xB798 == code || // Lo       HANGUL SYLLABLE RAE
		0xB7B4 == code || // Lo       HANGUL SYLLABLE RYA
		0xB7D0 == code || // Lo       HANGUL SYLLABLE RYAE
		0xB7EC == code || // Lo       HANGUL SYLLABLE REO
		0xB808 == code || // Lo       HANGUL SYLLABLE RE
		0xB824 == code || // Lo       HANGUL SYLLABLE RYEO
		0xB840 == code || // Lo       HANGUL SYLLABLE RYE
		0xB85C == code || // Lo       HANGUL SYLLABLE RO
		0xB878 == code || // Lo       HANGUL SYLLABLE RWA
		0xB894 == code || // Lo       HANGUL SYLLABLE RWAE
		0xB8B0 == code || // Lo       HANGUL SYLLABLE ROE
		0xB8CC == code || // Lo       HANGUL SYLLABLE RYO
		0xB8E8 == code || // Lo       HANGUL SYLLABLE RU
		0xB904 == code || // Lo       HANGUL SYLLABLE RWEO
		0xB920 == code || // Lo       HANGUL SYLLABLE RWE
		0xB93C == code || // Lo       HANGUL SYLLABLE RWI
		0xB958 == code || // Lo       HANGUL SYLLABLE RYU
		0xB974 == code || // Lo       HANGUL SYLLABLE REU
		0xB990 == code || // Lo       HANGUL SYLLABLE RYI
		0xB9AC == code || // Lo       HANGUL SYLLABLE RI
		0xB9C8 == code || // Lo       HANGUL SYLLABLE MA
		0xB9E4 == code || // Lo       HANGUL SYLLABLE MAE
		0xBA00 == code || // Lo       HANGUL SYLLABLE MYA
		0xBA1C == code || // Lo       HANGUL SYLLABLE MYAE
		0xBA38 == code || // Lo       HANGUL SYLLABLE MEO
		0xBA54 == code || // Lo       HANGUL SYLLABLE ME
		0xBA70 == code || // Lo       HANGUL SYLLABLE MYEO
		0xBA8C == code || // Lo       HANGUL SYLLABLE MYE
		0xBAA8 == code || // Lo       HANGUL SYLLABLE MO
		0xBAC4 == code || // Lo       HANGUL SYLLABLE MWA
		0xBAE0 == code || // Lo       HANGUL SYLLABLE MWAE
		0xBAFC == code || // Lo       HANGUL SYLLABLE MOE
		0xBB18 == code || // Lo       HANGUL SYLLABLE MYO
		0xBB34 == code || // Lo       HANGUL SYLLABLE MU
		0xBB50 == code || // Lo       HANGUL SYLLABLE MWEO
		0xBB6C == code || // Lo       HANGUL SYLLABLE MWE
		0xBB88 == code || // Lo       HANGUL SYLLABLE MWI
		0xBBA4 == code || // Lo       HANGUL SYLLABLE MYU
		0xBBC0 == code || // Lo       HANGUL SYLLABLE MEU
		0xBBDC == code || // Lo       HANGUL SYLLABLE MYI
		0xBBF8 == code || // Lo       HANGUL SYLLABLE MI
		0xBC14 == code || // Lo       HANGUL SYLLABLE BA
		0xBC30 == code || // Lo       HANGUL SYLLABLE BAE
		0xBC4C == code || // Lo       HANGUL SYLLABLE BYA
		0xBC68 == code || // Lo       HANGUL SYLLABLE BYAE
		0xBC84 == code || // Lo       HANGUL SYLLABLE BEO
		0xBCA0 == code || // Lo       HANGUL SYLLABLE BE
		0xBCBC == code || // Lo       HANGUL SYLLABLE BYEO
		0xBCD8 == code || // Lo       HANGUL SYLLABLE BYE
		0xBCF4 == code || // Lo       HANGUL SYLLABLE BO
		0xBD10 == code || // Lo       HANGUL SYLLABLE BWA
		0xBD2C == code || // Lo       HANGUL SYLLABLE BWAE
		0xBD48 == code || // Lo       HANGUL SYLLABLE BOE
		0xBD64 == code || // Lo       HANGUL SYLLABLE BYO
		0xBD80 == code || // Lo       HANGUL SYLLABLE BU
		0xBD9C == code || // Lo       HANGUL SYLLABLE BWEO
		0xBDB8 == code || // Lo       HANGUL SYLLABLE BWE
		0xBDD4 == code || // Lo       HANGUL SYLLABLE BWI
		0xBDF0 == code || // Lo       HANGUL SYLLABLE BYU
		0xBE0C == code || // Lo       HANGUL SYLLABLE BEU
		0xBE28 == code || // Lo       HANGUL SYLLABLE BYI
		0xBE44 == code || // Lo       HANGUL SYLLABLE BI
		0xBE60 == code || // Lo       HANGUL SYLLABLE BBA
		0xBE7C == code || // Lo       HANGUL SYLLABLE BBAE
		0xBE98 == code || // Lo       HANGUL SYLLABLE BBYA
		0xBEB4 == code || // Lo       HANGUL SYLLABLE BBYAE
		0xBED0 == code || // Lo       HANGUL SYLLABLE BBEO
		0xBEEC == code || // Lo       HANGUL SYLLABLE BBE
		0xBF08 == code || // Lo       HANGUL SYLLABLE BBYEO
		0xBF24 == code || // Lo       HANGUL SYLLABLE BBYE
		0xBF40 == code || // Lo       HANGUL SYLLABLE BBO
		0xBF5C == code || // Lo       HANGUL SYLLABLE BBWA
		0xBF78 == code || // Lo       HANGUL SYLLABLE BBWAE
		0xBF94 == code || // Lo       HANGUL SYLLABLE BBOE
		0xBFB0 == code || // Lo       HANGUL SYLLABLE BBYO
		0xBFCC == code || // Lo       HANGUL SYLLABLE BBU
		0xBFE8 == code || // Lo       HANGUL SYLLABLE BBWEO
		0xC004 == code || // Lo       HANGUL SYLLABLE BBWE
		0xC020 == code || // Lo       HANGUL SYLLABLE BBWI
		0xC03C == code || // Lo       HANGUL SYLLABLE BBYU
		0xC058 == code || // Lo       HANGUL SYLLABLE BBEU
		0xC074 == code || // Lo       HANGUL SYLLABLE BBYI
		0xC090 == code || // Lo       HANGUL SYLLABLE BBI
		0xC0AC == code || // Lo       HANGUL SYLLABLE SA
		0xC0C8 == code || // Lo       HANGUL SYLLABLE SAE
		0xC0E4 == code || // Lo       HANGUL SYLLABLE SYA
		0xC100 == code || // Lo       HANGUL SYLLABLE SYAE
		0xC11C == code || // Lo       HANGUL SYLLABLE SEO
		0xC138 == code || // Lo       HANGUL SYLLABLE SE
		0xC154 == code || // Lo       HANGUL SYLLABLE SYEO
		0xC170 == code || // Lo       HANGUL SYLLABLE SYE
		0xC18C == code || // Lo       HANGUL SYLLABLE SO
		0xC1A8 == code || // Lo       HANGUL SYLLABLE SWA
		0xC1C4 == code || // Lo       HANGUL SYLLABLE SWAE
		0xC1E0 == code || // Lo       HANGUL SYLLABLE SOE
		0xC1FC == code || // Lo       HANGUL SYLLABLE SYO
		0xC218 == code || // Lo       HANGUL SYLLABLE SU
		0xC234 == code || // Lo       HANGUL SYLLABLE SWEO
		0xC250 == code || // Lo       HANGUL SYLLABLE SWE
		0xC26C == code || // Lo       HANGUL SYLLABLE SWI
		0xC288 == code || // Lo       HANGUL SYLLABLE SYU
		0xC2A4 == code || // Lo       HANGUL SYLLABLE SEU
		0xC2C0 == code || // Lo       HANGUL SYLLABLE SYI
		0xC2DC == code || // Lo       HANGUL SYLLABLE SI
		0xC2F8 == code || // Lo       HANGUL SYLLABLE SSA
		0xC314 == code || // Lo       HANGUL SYLLABLE SSAE
		0xC330 == code || // Lo       HANGUL SYLLABLE SSYA
		0xC34C == code || // Lo       HANGUL SYLLABLE SSYAE
		0xC368 == code || // Lo       HANGUL SYLLABLE SSEO
		0xC384 == code || // Lo       HANGUL SYLLABLE SSE
		0xC3A0 == code || // Lo       HANGUL SYLLABLE SSYEO
		0xC3BC == code || // Lo       HANGUL SYLLABLE SSYE
		0xC3D8 == code || // Lo       HANGUL SYLLABLE SSO
		0xC3F4 == code || // Lo       HANGUL SYLLABLE SSWA
		0xC410 == code || // Lo       HANGUL SYLLABLE SSWAE
		0xC42C == code || // Lo       HANGUL SYLLABLE SSOE
		0xC448 == code || // Lo       HANGUL SYLLABLE SSYO
		0xC464 == code || // Lo       HANGUL SYLLABLE SSU
		0xC480 == code || // Lo       HANGUL SYLLABLE SSWEO
		0xC49C == code || // Lo       HANGUL SYLLABLE SSWE
		0xC4B8 == code || // Lo       HANGUL SYLLABLE SSWI
		0xC4D4 == code || // Lo       HANGUL SYLLABLE SSYU
		0xC4F0 == code || // Lo       HANGUL SYLLABLE SSEU
		0xC50C == code || // Lo       HANGUL SYLLABLE SSYI
		0xC528 == code || // Lo       HANGUL SYLLABLE SSI
		0xC544 == code || // Lo       HANGUL SYLLABLE A
		0xC560 == code || // Lo       HANGUL SYLLABLE AE
		0xC57C == code || // Lo       HANGUL SYLLABLE YA
		0xC598 == code || // Lo       HANGUL SYLLABLE YAE
		0xC5B4 == code || // Lo       HANGUL SYLLABLE EO
		0xC5D0 == code || // Lo       HANGUL SYLLABLE E
		0xC5EC == code || // Lo       HANGUL SYLLABLE YEO
		0xC608 == code || // Lo       HANGUL SYLLABLE YE
		0xC624 == code || // Lo       HANGUL SYLLABLE O
		0xC640 == code || // Lo       HANGUL SYLLABLE WA
		0xC65C == code || // Lo       HANGUL SYLLABLE WAE
		0xC678 == code || // Lo       HANGUL SYLLABLE OE
		0xC694 == code || // Lo       HANGUL SYLLABLE YO
		0xC6B0 == code || // Lo       HANGUL SYLLABLE U
		0xC6CC == code || // Lo       HANGUL SYLLABLE WEO
		0xC6E8 == code || // Lo       HANGUL SYLLABLE WE
		0xC704 == code || // Lo       HANGUL SYLLABLE WI
		0xC720 == code || // Lo       HANGUL SYLLABLE YU
		0xC73C == code || // Lo       HANGUL SYLLABLE EU
		0xC758 == code || // Lo       HANGUL SYLLABLE YI
		0xC774 == code || // Lo       HANGUL SYLLABLE I
		0xC790 == code || // Lo       HANGUL SYLLABLE JA
		0xC7AC == code || // Lo       HANGUL SYLLABLE JAE
		0xC7C8 == code || // Lo       HANGUL SYLLABLE JYA
		0xC7E4 == code || // Lo       HANGUL SYLLABLE JYAE
		0xC800 == code || // Lo       HANGUL SYLLABLE JEO
		0xC81C == code || // Lo       HANGUL SYLLABLE JE
		0xC838 == code || // Lo       HANGUL SYLLABLE JYEO
		0xC854 == code || // Lo       HANGUL SYLLABLE JYE
		0xC870 == code || // Lo       HANGUL SYLLABLE JO
		0xC88C == code || // Lo       HANGUL SYLLABLE JWA
		0xC8A8 == code || // Lo       HANGUL SYLLABLE JWAE
		0xC8C4 == code || // Lo       HANGUL SYLLABLE JOE
		0xC8E0 == code || // Lo       HANGUL SYLLABLE JYO
		0xC8FC == code || // Lo       HANGUL SYLLABLE JU
		0xC918 == code || // Lo       HANGUL SYLLABLE JWEO
		0xC934 == code || // Lo       HANGUL SYLLABLE JWE
		0xC950 == code || // Lo       HANGUL SYLLABLE JWI
		0xC96C == code || // Lo       HANGUL SYLLABLE JYU
		0xC988 == code || // Lo       HANGUL SYLLABLE JEU
		0xC9A4 == code || // Lo       HANGUL SYLLABLE JYI
		0xC9C0 == code || // Lo       HANGUL SYLLABLE JI
		0xC9DC == code || // Lo       HANGUL SYLLABLE JJA
		0xC9F8 == code || // Lo       HANGUL SYLLABLE JJAE
		0xCA14 == code || // Lo       HANGUL SYLLABLE JJYA
		0xCA30 == code || // Lo       HANGUL SYLLABLE JJYAE
		0xCA4C == code || // Lo       HANGUL SYLLABLE JJEO
		0xCA68 == code || // Lo       HANGUL SYLLABLE JJE
		0xCA84 == code || // Lo       HANGUL SYLLABLE JJYEO
		0xCAA0 == code || // Lo       HANGUL SYLLABLE JJYE
		0xCABC == code || // Lo       HANGUL SYLLABLE JJO
		0xCAD8 == code || // Lo       HANGUL SYLLABLE JJWA
		0xCAF4 == code || // Lo       HANGUL SYLLABLE JJWAE
		0xCB10 == code || // Lo       HANGUL SYLLABLE JJOE
		0xCB2C == code || // Lo       HANGUL SYLLABLE JJYO
		0xCB48 == code || // Lo       HANGUL SYLLABLE JJU
		0xCB64 == code || // Lo       HANGUL SYLLABLE JJWEO
		0xCB80 == code || // Lo       HANGUL SYLLABLE JJWE
		0xCB9C == code || // Lo       HANGUL SYLLABLE JJWI
		0xCBB8 == code || // Lo       HANGUL SYLLABLE JJYU
		0xCBD4 == code || // Lo       HANGUL SYLLABLE JJEU
		0xCBF0 == code || // Lo       HANGUL SYLLABLE JJYI
		0xCC0C == code || // Lo       HANGUL SYLLABLE JJI
		0xCC28 == code || // Lo       HANGUL SYLLABLE CA
		0xCC44 == code || // Lo       HANGUL SYLLABLE CAE
		0xCC60 == code || // Lo       HANGUL SYLLABLE CYA
		0xCC7C == code || // Lo       HANGUL SYLLABLE CYAE
		0xCC98 == code || // Lo       HANGUL SYLLABLE CEO
		0xCCB4 == code || // Lo       HANGUL SYLLABLE CE
		0xCCD0 == code || // Lo       HANGUL SYLLABLE CYEO
		0xCCEC == code || // Lo       HANGUL SYLLABLE CYE
		0xCD08 == code || // Lo       HANGUL SYLLABLE CO
		0xCD24 == code || // Lo       HANGUL SYLLABLE CWA
		0xCD40 == code || // Lo       HANGUL SYLLABLE CWAE
		0xCD5C == code || // Lo       HANGUL SYLLABLE COE
		0xCD78 == code || // Lo       HANGUL SYLLABLE CYO
		0xCD94 == code || // Lo       HANGUL SYLLABLE CU
		0xCDB0 == code || // Lo       HANGUL SYLLABLE CWEO
		0xCDCC == code || // Lo       HANGUL SYLLABLE CWE
		0xCDE8 == code || // Lo       HANGUL SYLLABLE CWI
		0xCE04 == code || // Lo       HANGUL SYLLABLE CYU
		0xCE20 == code || // Lo       HANGUL SYLLABLE CEU
		0xCE3C == code || // Lo       HANGUL SYLLABLE CYI
		0xCE58 == code || // Lo       HANGUL SYLLABLE CI
		0xCE74 == code || // Lo       HANGUL SYLLABLE KA
		0xCE90 == code || // Lo       HANGUL SYLLABLE KAE
		0xCEAC == code || // Lo       HANGUL SYLLABLE KYA
		0xCEC8 == code || // Lo       HANGUL SYLLABLE KYAE
		0xCEE4 == code || // Lo       HANGUL SYLLABLE KEO
		0xCF00 == code || // Lo       HANGUL SYLLABLE KE
		0xCF1C == code || // Lo       HANGUL SYLLABLE KYEO
		0xCF38 == code || // Lo       HANGUL SYLLABLE KYE
		0xCF54 == code || // Lo       HANGUL SYLLABLE KO
		0xCF70 == code || // Lo       HANGUL SYLLABLE KWA
		0xCF8C == code || // Lo       HANGUL SYLLABLE KWAE
		0xCFA8 == code || // Lo       HANGUL SYLLABLE KOE
		0xCFC4 == code || // Lo       HANGUL SYLLABLE KYO
		0xCFE0 == code || // Lo       HANGUL SYLLABLE KU
		0xCFFC == code || // Lo       HANGUL SYLLABLE KWEO
		0xD018 == code || // Lo       HANGUL SYLLABLE KWE
		0xD034 == code || // Lo       HANGUL SYLLABLE KWI
		0xD050 == code || // Lo       HANGUL SYLLABLE KYU
		0xD06C == code || // Lo       HANGUL SYLLABLE KEU
		0xD088 == code || // Lo       HANGUL SYLLABLE KYI
		0xD0A4 == code || // Lo       HANGUL SYLLABLE KI
		0xD0C0 == code || // Lo       HANGUL SYLLABLE TA
		0xD0DC == code || // Lo       HANGUL SYLLABLE TAE
		0xD0F8 == code || // Lo       HANGUL SYLLABLE TYA
		0xD114 == code || // Lo       HANGUL SYLLABLE TYAE
		0xD130 == code || // Lo       HANGUL SYLLABLE TEO
		0xD14C == code || // Lo       HANGUL SYLLABLE TE
		0xD168 == code || // Lo       HANGUL SYLLABLE TYEO
		0xD184 == code || // Lo       HANGUL SYLLABLE TYE
		0xD1A0 == code || // Lo       HANGUL SYLLABLE TO
		0xD1BC == code || // Lo       HANGUL SYLLABLE TWA
		0xD1D8 == code || // Lo       HANGUL SYLLABLE TWAE
		0xD1F4 == code || // Lo       HANGUL SYLLABLE TOE
		0xD210 == code || // Lo       HANGUL SYLLABLE TYO
		0xD22C == code || // Lo       HANGUL SYLLABLE TU
		0xD248 == code || // Lo       HANGUL SYLLABLE TWEO
		0xD264 == code || // Lo       HANGUL SYLLABLE TWE
		0xD280 == code || // Lo       HANGUL SYLLABLE TWI
		0xD29C == code || // Lo       HANGUL SYLLABLE TYU
		0xD2B8 == code || // Lo       HANGUL SYLLABLE TEU
		0xD2D4 == code || // Lo       HANGUL SYLLABLE TYI
		0xD2F0 == code || // Lo       HANGUL SYLLABLE TI
		0xD30C == code || // Lo       HANGUL SYLLABLE PA
		0xD328 == code || // Lo       HANGUL SYLLABLE PAE
		0xD344 == code || // Lo       HANGUL SYLLABLE PYA
		0xD360 == code || // Lo       HANGUL SYLLABLE PYAE
		0xD37C == code || // Lo       HANGUL SYLLABLE PEO
		0xD398 == code || // Lo       HANGUL SYLLABLE PE
		0xD3B4 == code || // Lo       HANGUL SYLLABLE PYEO
		0xD3D0 == code || // Lo       HANGUL SYLLABLE PYE
		0xD3EC == code || // Lo       HANGUL SYLLABLE PO
		0xD408 == code || // Lo       HANGUL SYLLABLE PWA
		0xD424 == code || // Lo       HANGUL SYLLABLE PWAE
		0xD440 == code || // Lo       HANGUL SYLLABLE POE
		0xD45C == code || // Lo       HANGUL SYLLABLE PYO
		0xD478 == code || // Lo       HANGUL SYLLABLE PU
		0xD494 == code || // Lo       HANGUL SYLLABLE PWEO
		0xD4B0 == code || // Lo       HANGUL SYLLABLE PWE
		0xD4CC == code || // Lo       HANGUL SYLLABLE PWI
		0xD4E8 == code || // Lo       HANGUL SYLLABLE PYU
		0xD504 == code || // Lo       HANGUL SYLLABLE PEU
		0xD520 == code || // Lo       HANGUL SYLLABLE PYI
		0xD53C == code || // Lo       HANGUL SYLLABLE PI
		0xD558 == code || // Lo       HANGUL SYLLABLE HA
		0xD574 == code || // Lo       HANGUL SYLLABLE HAE
		0xD590 == code || // Lo       HANGUL SYLLABLE HYA
		0xD5AC == code || // Lo       HANGUL SYLLABLE HYAE
		0xD5C8 == code || // Lo       HANGUL SYLLABLE HEO
		0xD5E4 == code || // Lo       HANGUL SYLLABLE HE
		0xD600 == code || // Lo       HANGUL SYLLABLE HYEO
		0xD61C == code || // Lo       HANGUL SYLLABLE HYE
		0xD638 == code || // Lo       HANGUL SYLLABLE HO
		0xD654 == code || // Lo       HANGUL SYLLABLE HWA
		0xD670 == code || // Lo       HANGUL SYLLABLE HWAE
		0xD68C == code || // Lo       HANGUL SYLLABLE HOE
		0xD6A8 == code || // Lo       HANGUL SYLLABLE HYO
		0xD6C4 == code || // Lo       HANGUL SYLLABLE HU
		0xD6E0 == code || // Lo       HANGUL SYLLABLE HWEO
		0xD6FC == code || // Lo       HANGUL SYLLABLE HWE
		0xD718 == code || // Lo       HANGUL SYLLABLE HWI
		0xD734 == code || // Lo       HANGUL SYLLABLE HYU
		0xD750 == code || // Lo       HANGUL SYLLABLE HEU
		0xD76C == code || // Lo       HANGUL SYLLABLE HYI
		0xD788 == code // Lo       HANGUL SYLLABLE HI
		){
			return LV;
		}
		
		if(
		(0xAC01 <= code && code <= 0xAC1B) || // Lo  [27] HANGUL SYLLABLE GAG..HANGUL SYLLABLE GAH
		(0xAC1D <= code && code <= 0xAC37) || // Lo  [27] HANGUL SYLLABLE GAEG..HANGUL SYLLABLE GAEH
		(0xAC39 <= code && code <= 0xAC53) || // Lo  [27] HANGUL SYLLABLE GYAG..HANGUL SYLLABLE GYAH
		(0xAC55 <= code && code <= 0xAC6F) || // Lo  [27] HANGUL SYLLABLE GYAEG..HANGUL SYLLABLE GYAEH
		(0xAC71 <= code && code <= 0xAC8B) || // Lo  [27] HANGUL SYLLABLE GEOG..HANGUL SYLLABLE GEOH
		(0xAC8D <= code && code <= 0xACA7) || // Lo  [27] HANGUL SYLLABLE GEG..HANGUL SYLLABLE GEH
		(0xACA9 <= code && code <= 0xACC3) || // Lo  [27] HANGUL SYLLABLE GYEOG..HANGUL SYLLABLE GYEOH
		(0xACC5 <= code && code <= 0xACDF) || // Lo  [27] HANGUL SYLLABLE GYEG..HANGUL SYLLABLE GYEH
		(0xACE1 <= code && code <= 0xACFB) || // Lo  [27] HANGUL SYLLABLE GOG..HANGUL SYLLABLE GOH
		(0xACFD <= code && code <= 0xAD17) || // Lo  [27] HANGUL SYLLABLE GWAG..HANGUL SYLLABLE GWAH
		(0xAD19 <= code && code <= 0xAD33) || // Lo  [27] HANGUL SYLLABLE GWAEG..HANGUL SYLLABLE GWAEH
		(0xAD35 <= code && code <= 0xAD4F) || // Lo  [27] HANGUL SYLLABLE GOEG..HANGUL SYLLABLE GOEH
		(0xAD51 <= code && code <= 0xAD6B) || // Lo  [27] HANGUL SYLLABLE GYOG..HANGUL SYLLABLE GYOH
		(0xAD6D <= code && code <= 0xAD87) || // Lo  [27] HANGUL SYLLABLE GUG..HANGUL SYLLABLE GUH
		(0xAD89 <= code && code <= 0xADA3) || // Lo  [27] HANGUL SYLLABLE GWEOG..HANGUL SYLLABLE GWEOH
		(0xADA5 <= code && code <= 0xADBF) || // Lo  [27] HANGUL SYLLABLE GWEG..HANGUL SYLLABLE GWEH
		(0xADC1 <= code && code <= 0xADDB) || // Lo  [27] HANGUL SYLLABLE GWIG..HANGUL SYLLABLE GWIH
		(0xADDD <= code && code <= 0xADF7) || // Lo  [27] HANGUL SYLLABLE GYUG..HANGUL SYLLABLE GYUH
		(0xADF9 <= code && code <= 0xAE13) || // Lo  [27] HANGUL SYLLABLE GEUG..HANGUL SYLLABLE GEUH
		(0xAE15 <= code && code <= 0xAE2F) || // Lo  [27] HANGUL SYLLABLE GYIG..HANGUL SYLLABLE GYIH
		(0xAE31 <= code && code <= 0xAE4B) || // Lo  [27] HANGUL SYLLABLE GIG..HANGUL SYLLABLE GIH
		(0xAE4D <= code && code <= 0xAE67) || // Lo  [27] HANGUL SYLLABLE GGAG..HANGUL SYLLABLE GGAH
		(0xAE69 <= code && code <= 0xAE83) || // Lo  [27] HANGUL SYLLABLE GGAEG..HANGUL SYLLABLE GGAEH
		(0xAE85 <= code && code <= 0xAE9F) || // Lo  [27] HANGUL SYLLABLE GGYAG..HANGUL SYLLABLE GGYAH
		(0xAEA1 <= code && code <= 0xAEBB) || // Lo  [27] HANGUL SYLLABLE GGYAEG..HANGUL SYLLABLE GGYAEH
		(0xAEBD <= code && code <= 0xAED7) || // Lo  [27] HANGUL SYLLABLE GGEOG..HANGUL SYLLABLE GGEOH
		(0xAED9 <= code && code <= 0xAEF3) || // Lo  [27] HANGUL SYLLABLE GGEG..HANGUL SYLLABLE GGEH
		(0xAEF5 <= code && code <= 0xAF0F) || // Lo  [27] HANGUL SYLLABLE GGYEOG..HANGUL SYLLABLE GGYEOH
		(0xAF11 <= code && code <= 0xAF2B) || // Lo  [27] HANGUL SYLLABLE GGYEG..HANGUL SYLLABLE GGYEH
		(0xAF2D <= code && code <= 0xAF47) || // Lo  [27] HANGUL SYLLABLE GGOG..HANGUL SYLLABLE GGOH
		(0xAF49 <= code && code <= 0xAF63) || // Lo  [27] HANGUL SYLLABLE GGWAG..HANGUL SYLLABLE GGWAH
		(0xAF65 <= code && code <= 0xAF7F) || // Lo  [27] HANGUL SYLLABLE GGWAEG..HANGUL SYLLABLE GGWAEH
		(0xAF81 <= code && code <= 0xAF9B) || // Lo  [27] HANGUL SYLLABLE GGOEG..HANGUL SYLLABLE GGOEH
		(0xAF9D <= code && code <= 0xAFB7) || // Lo  [27] HANGUL SYLLABLE GGYOG..HANGUL SYLLABLE GGYOH
		(0xAFB9 <= code && code <= 0xAFD3) || // Lo  [27] HANGUL SYLLABLE GGUG..HANGUL SYLLABLE GGUH
		(0xAFD5 <= code && code <= 0xAFEF) || // Lo  [27] HANGUL SYLLABLE GGWEOG..HANGUL SYLLABLE GGWEOH
		(0xAFF1 <= code && code <= 0xB00B) || // Lo  [27] HANGUL SYLLABLE GGWEG..HANGUL SYLLABLE GGWEH
		(0xB00D <= code && code <= 0xB027) || // Lo  [27] HANGUL SYLLABLE GGWIG..HANGUL SYLLABLE GGWIH
		(0xB029 <= code && code <= 0xB043) || // Lo  [27] HANGUL SYLLABLE GGYUG..HANGUL SYLLABLE GGYUH
		(0xB045 <= code && code <= 0xB05F) || // Lo  [27] HANGUL SYLLABLE GGEUG..HANGUL SYLLABLE GGEUH
		(0xB061 <= code && code <= 0xB07B) || // Lo  [27] HANGUL SYLLABLE GGYIG..HANGUL SYLLABLE GGYIH
		(0xB07D <= code && code <= 0xB097) || // Lo  [27] HANGUL SYLLABLE GGIG..HANGUL SYLLABLE GGIH
		(0xB099 <= code && code <= 0xB0B3) || // Lo  [27] HANGUL SYLLABLE NAG..HANGUL SYLLABLE NAH
		(0xB0B5 <= code && code <= 0xB0CF) || // Lo  [27] HANGUL SYLLABLE NAEG..HANGUL SYLLABLE NAEH
		(0xB0D1 <= code && code <= 0xB0EB) || // Lo  [27] HANGUL SYLLABLE NYAG..HANGUL SYLLABLE NYAH
		(0xB0ED <= code && code <= 0xB107) || // Lo  [27] HANGUL SYLLABLE NYAEG..HANGUL SYLLABLE NYAEH
		(0xB109 <= code && code <= 0xB123) || // Lo  [27] HANGUL SYLLABLE NEOG..HANGUL SYLLABLE NEOH
		(0xB125 <= code && code <= 0xB13F) || // Lo  [27] HANGUL SYLLABLE NEG..HANGUL SYLLABLE NEH
		(0xB141 <= code && code <= 0xB15B) || // Lo  [27] HANGUL SYLLABLE NYEOG..HANGUL SYLLABLE NYEOH
		(0xB15D <= code && code <= 0xB177) || // Lo  [27] HANGUL SYLLABLE NYEG..HANGUL SYLLABLE NYEH
		(0xB179 <= code && code <= 0xB193) || // Lo  [27] HANGUL SYLLABLE NOG..HANGUL SYLLABLE NOH
		(0xB195 <= code && code <= 0xB1AF) || // Lo  [27] HANGUL SYLLABLE NWAG..HANGUL SYLLABLE NWAH
		(0xB1B1 <= code && code <= 0xB1CB) || // Lo  [27] HANGUL SYLLABLE NWAEG..HANGUL SYLLABLE NWAEH
		(0xB1CD <= code && code <= 0xB1E7) || // Lo  [27] HANGUL SYLLABLE NOEG..HANGUL SYLLABLE NOEH
		(0xB1E9 <= code && code <= 0xB203) || // Lo  [27] HANGUL SYLLABLE NYOG..HANGUL SYLLABLE NYOH
		(0xB205 <= code && code <= 0xB21F) || // Lo  [27] HANGUL SYLLABLE NUG..HANGUL SYLLABLE NUH
		(0xB221 <= code && code <= 0xB23B) || // Lo  [27] HANGUL SYLLABLE NWEOG..HANGUL SYLLABLE NWEOH
		(0xB23D <= code && code <= 0xB257) || // Lo  [27] HANGUL SYLLABLE NWEG..HANGUL SYLLABLE NWEH
		(0xB259 <= code && code <= 0xB273) || // Lo  [27] HANGUL SYLLABLE NWIG..HANGUL SYLLABLE NWIH
		(0xB275 <= code && code <= 0xB28F) || // Lo  [27] HANGUL SYLLABLE NYUG..HANGUL SYLLABLE NYUH
		(0xB291 <= code && code <= 0xB2AB) || // Lo  [27] HANGUL SYLLABLE NEUG..HANGUL SYLLABLE NEUH
		(0xB2AD <= code && code <= 0xB2C7) || // Lo  [27] HANGUL SYLLABLE NYIG..HANGUL SYLLABLE NYIH
		(0xB2C9 <= code && code <= 0xB2E3) || // Lo  [27] HANGUL SYLLABLE NIG..HANGUL SYLLABLE NIH
		(0xB2E5 <= code && code <= 0xB2FF) || // Lo  [27] HANGUL SYLLABLE DAG..HANGUL SYLLABLE DAH
		(0xB301 <= code && code <= 0xB31B) || // Lo  [27] HANGUL SYLLABLE DAEG..HANGUL SYLLABLE DAEH
		(0xB31D <= code && code <= 0xB337) || // Lo  [27] HANGUL SYLLABLE DYAG..HANGUL SYLLABLE DYAH
		(0xB339 <= code && code <= 0xB353) || // Lo  [27] HANGUL SYLLABLE DYAEG..HANGUL SYLLABLE DYAEH
		(0xB355 <= code && code <= 0xB36F) || // Lo  [27] HANGUL SYLLABLE DEOG..HANGUL SYLLABLE DEOH
		(0xB371 <= code && code <= 0xB38B) || // Lo  [27] HANGUL SYLLABLE DEG..HANGUL SYLLABLE DEH
		(0xB38D <= code && code <= 0xB3A7) || // Lo  [27] HANGUL SYLLABLE DYEOG..HANGUL SYLLABLE DYEOH
		(0xB3A9 <= code && code <= 0xB3C3) || // Lo  [27] HANGUL SYLLABLE DYEG..HANGUL SYLLABLE DYEH
		(0xB3C5 <= code && code <= 0xB3DF) || // Lo  [27] HANGUL SYLLABLE DOG..HANGUL SYLLABLE DOH
		(0xB3E1 <= code && code <= 0xB3FB) || // Lo  [27] HANGUL SYLLABLE DWAG..HANGUL SYLLABLE DWAH
		(0xB3FD <= code && code <= 0xB417) || // Lo  [27] HANGUL SYLLABLE DWAEG..HANGUL SYLLABLE DWAEH
		(0xB419 <= code && code <= 0xB433) || // Lo  [27] HANGUL SYLLABLE DOEG..HANGUL SYLLABLE DOEH
		(0xB435 <= code && code <= 0xB44F) || // Lo  [27] HANGUL SYLLABLE DYOG..HANGUL SYLLABLE DYOH
		(0xB451 <= code && code <= 0xB46B) || // Lo  [27] HANGUL SYLLABLE DUG..HANGUL SYLLABLE DUH
		(0xB46D <= code && code <= 0xB487) || // Lo  [27] HANGUL SYLLABLE DWEOG..HANGUL SYLLABLE DWEOH
		(0xB489 <= code && code <= 0xB4A3) || // Lo  [27] HANGUL SYLLABLE DWEG..HANGUL SYLLABLE DWEH
		(0xB4A5 <= code && code <= 0xB4BF) || // Lo  [27] HANGUL SYLLABLE DWIG..HANGUL SYLLABLE DWIH
		(0xB4C1 <= code && code <= 0xB4DB) || // Lo  [27] HANGUL SYLLABLE DYUG..HANGUL SYLLABLE DYUH
		(0xB4DD <= code && code <= 0xB4F7) || // Lo  [27] HANGUL SYLLABLE DEUG..HANGUL SYLLABLE DEUH
		(0xB4F9 <= code && code <= 0xB513) || // Lo  [27] HANGUL SYLLABLE DYIG..HANGUL SYLLABLE DYIH
		(0xB515 <= code && code <= 0xB52F) || // Lo  [27] HANGUL SYLLABLE DIG..HANGUL SYLLABLE DIH
		(0xB531 <= code && code <= 0xB54B) || // Lo  [27] HANGUL SYLLABLE DDAG..HANGUL SYLLABLE DDAH
		(0xB54D <= code && code <= 0xB567) || // Lo  [27] HANGUL SYLLABLE DDAEG..HANGUL SYLLABLE DDAEH
		(0xB569 <= code && code <= 0xB583) || // Lo  [27] HANGUL SYLLABLE DDYAG..HANGUL SYLLABLE DDYAH
		(0xB585 <= code && code <= 0xB59F) || // Lo  [27] HANGUL SYLLABLE DDYAEG..HANGUL SYLLABLE DDYAEH
		(0xB5A1 <= code && code <= 0xB5BB) || // Lo  [27] HANGUL SYLLABLE DDEOG..HANGUL SYLLABLE DDEOH
		(0xB5BD <= code && code <= 0xB5D7) || // Lo  [27] HANGUL SYLLABLE DDEG..HANGUL SYLLABLE DDEH
		(0xB5D9 <= code && code <= 0xB5F3) || // Lo  [27] HANGUL SYLLABLE DDYEOG..HANGUL SYLLABLE DDYEOH
		(0xB5F5 <= code && code <= 0xB60F) || // Lo  [27] HANGUL SYLLABLE DDYEG..HANGUL SYLLABLE DDYEH
		(0xB611 <= code && code <= 0xB62B) || // Lo  [27] HANGUL SYLLABLE DDOG..HANGUL SYLLABLE DDOH
		(0xB62D <= code && code <= 0xB647) || // Lo  [27] HANGUL SYLLABLE DDWAG..HANGUL SYLLABLE DDWAH
		(0xB649 <= code && code <= 0xB663) || // Lo  [27] HANGUL SYLLABLE DDWAEG..HANGUL SYLLABLE DDWAEH
		(0xB665 <= code && code <= 0xB67F) || // Lo  [27] HANGUL SYLLABLE DDOEG..HANGUL SYLLABLE DDOEH
		(0xB681 <= code && code <= 0xB69B) || // Lo  [27] HANGUL SYLLABLE DDYOG..HANGUL SYLLABLE DDYOH
		(0xB69D <= code && code <= 0xB6B7) || // Lo  [27] HANGUL SYLLABLE DDUG..HANGUL SYLLABLE DDUH
		(0xB6B9 <= code && code <= 0xB6D3) || // Lo  [27] HANGUL SYLLABLE DDWEOG..HANGUL SYLLABLE DDWEOH
		(0xB6D5 <= code && code <= 0xB6EF) || // Lo  [27] HANGUL SYLLABLE DDWEG..HANGUL SYLLABLE DDWEH
		(0xB6F1 <= code && code <= 0xB70B) || // Lo  [27] HANGUL SYLLABLE DDWIG..HANGUL SYLLABLE DDWIH
		(0xB70D <= code && code <= 0xB727) || // Lo  [27] HANGUL SYLLABLE DDYUG..HANGUL SYLLABLE DDYUH
		(0xB729 <= code && code <= 0xB743) || // Lo  [27] HANGUL SYLLABLE DDEUG..HANGUL SYLLABLE DDEUH
		(0xB745 <= code && code <= 0xB75F) || // Lo  [27] HANGUL SYLLABLE DDYIG..HANGUL SYLLABLE DDYIH
		(0xB761 <= code && code <= 0xB77B) || // Lo  [27] HANGUL SYLLABLE DDIG..HANGUL SYLLABLE DDIH
		(0xB77D <= code && code <= 0xB797) || // Lo  [27] HANGUL SYLLABLE RAG..HANGUL SYLLABLE RAH
		(0xB799 <= code && code <= 0xB7B3) || // Lo  [27] HANGUL SYLLABLE RAEG..HANGUL SYLLABLE RAEH
		(0xB7B5 <= code && code <= 0xB7CF) || // Lo  [27] HANGUL SYLLABLE RYAG..HANGUL SYLLABLE RYAH
		(0xB7D1 <= code && code <= 0xB7EB) || // Lo  [27] HANGUL SYLLABLE RYAEG..HANGUL SYLLABLE RYAEH
		(0xB7ED <= code && code <= 0xB807) || // Lo  [27] HANGUL SYLLABLE REOG..HANGUL SYLLABLE REOH
		(0xB809 <= code && code <= 0xB823) || // Lo  [27] HANGUL SYLLABLE REG..HANGUL SYLLABLE REH
		(0xB825 <= code && code <= 0xB83F) || // Lo  [27] HANGUL SYLLABLE RYEOG..HANGUL SYLLABLE RYEOH
		(0xB841 <= code && code <= 0xB85B) || // Lo  [27] HANGUL SYLLABLE RYEG..HANGUL SYLLABLE RYEH
		(0xB85D <= code && code <= 0xB877) || // Lo  [27] HANGUL SYLLABLE ROG..HANGUL SYLLABLE ROH
		(0xB879 <= code && code <= 0xB893) || // Lo  [27] HANGUL SYLLABLE RWAG..HANGUL SYLLABLE RWAH
		(0xB895 <= code && code <= 0xB8AF) || // Lo  [27] HANGUL SYLLABLE RWAEG..HANGUL SYLLABLE RWAEH
		(0xB8B1 <= code && code <= 0xB8CB) || // Lo  [27] HANGUL SYLLABLE ROEG..HANGUL SYLLABLE ROEH
		(0xB8CD <= code && code <= 0xB8E7) || // Lo  [27] HANGUL SYLLABLE RYOG..HANGUL SYLLABLE RYOH
		(0xB8E9 <= code && code <= 0xB903) || // Lo  [27] HANGUL SYLLABLE RUG..HANGUL SYLLABLE RUH
		(0xB905 <= code && code <= 0xB91F) || // Lo  [27] HANGUL SYLLABLE RWEOG..HANGUL SYLLABLE RWEOH
		(0xB921 <= code && code <= 0xB93B) || // Lo  [27] HANGUL SYLLABLE RWEG..HANGUL SYLLABLE RWEH
		(0xB93D <= code && code <= 0xB957) || // Lo  [27] HANGUL SYLLABLE RWIG..HANGUL SYLLABLE RWIH
		(0xB959 <= code && code <= 0xB973) || // Lo  [27] HANGUL SYLLABLE RYUG..HANGUL SYLLABLE RYUH
		(0xB975 <= code && code <= 0xB98F) || // Lo  [27] HANGUL SYLLABLE REUG..HANGUL SYLLABLE REUH
		(0xB991 <= code && code <= 0xB9AB) || // Lo  [27] HANGUL SYLLABLE RYIG..HANGUL SYLLABLE RYIH
		(0xB9AD <= code && code <= 0xB9C7) || // Lo  [27] HANGUL SYLLABLE RIG..HANGUL SYLLABLE RIH
		(0xB9C9 <= code && code <= 0xB9E3) || // Lo  [27] HANGUL SYLLABLE MAG..HANGUL SYLLABLE MAH
		(0xB9E5 <= code && code <= 0xB9FF) || // Lo  [27] HANGUL SYLLABLE MAEG..HANGUL SYLLABLE MAEH
		(0xBA01 <= code && code <= 0xBA1B) || // Lo  [27] HANGUL SYLLABLE MYAG..HANGUL SYLLABLE MYAH
		(0xBA1D <= code && code <= 0xBA37) || // Lo  [27] HANGUL SYLLABLE MYAEG..HANGUL SYLLABLE MYAEH
		(0xBA39 <= code && code <= 0xBA53) || // Lo  [27] HANGUL SYLLABLE MEOG..HANGUL SYLLABLE MEOH
		(0xBA55 <= code && code <= 0xBA6F) || // Lo  [27] HANGUL SYLLABLE MEG..HANGUL SYLLABLE MEH
		(0xBA71 <= code && code <= 0xBA8B) || // Lo  [27] HANGUL SYLLABLE MYEOG..HANGUL SYLLABLE MYEOH
		(0xBA8D <= code && code <= 0xBAA7) || // Lo  [27] HANGUL SYLLABLE MYEG..HANGUL SYLLABLE MYEH
		(0xBAA9 <= code && code <= 0xBAC3) || // Lo  [27] HANGUL SYLLABLE MOG..HANGUL SYLLABLE MOH
		(0xBAC5 <= code && code <= 0xBADF) || // Lo  [27] HANGUL SYLLABLE MWAG..HANGUL SYLLABLE MWAH
		(0xBAE1 <= code && code <= 0xBAFB) || // Lo  [27] HANGUL SYLLABLE MWAEG..HANGUL SYLLABLE MWAEH
		(0xBAFD <= code && code <= 0xBB17) || // Lo  [27] HANGUL SYLLABLE MOEG..HANGUL SYLLABLE MOEH
		(0xBB19 <= code && code <= 0xBB33) || // Lo  [27] HANGUL SYLLABLE MYOG..HANGUL SYLLABLE MYOH
		(0xBB35 <= code && code <= 0xBB4F) || // Lo  [27] HANGUL SYLLABLE MUG..HANGUL SYLLABLE MUH
		(0xBB51 <= code && code <= 0xBB6B) || // Lo  [27] HANGUL SYLLABLE MWEOG..HANGUL SYLLABLE MWEOH
		(0xBB6D <= code && code <= 0xBB87) || // Lo  [27] HANGUL SYLLABLE MWEG..HANGUL SYLLABLE MWEH
		(0xBB89 <= code && code <= 0xBBA3) || // Lo  [27] HANGUL SYLLABLE MWIG..HANGUL SYLLABLE MWIH
		(0xBBA5 <= code && code <= 0xBBBF) || // Lo  [27] HANGUL SYLLABLE MYUG..HANGUL SYLLABLE MYUH
		(0xBBC1 <= code && code <= 0xBBDB) || // Lo  [27] HANGUL SYLLABLE MEUG..HANGUL SYLLABLE MEUH
		(0xBBDD <= code && code <= 0xBBF7) || // Lo  [27] HANGUL SYLLABLE MYIG..HANGUL SYLLABLE MYIH
		(0xBBF9 <= code && code <= 0xBC13) || // Lo  [27] HANGUL SYLLABLE MIG..HANGUL SYLLABLE MIH
		(0xBC15 <= code && code <= 0xBC2F) || // Lo  [27] HANGUL SYLLABLE BAG..HANGUL SYLLABLE BAH
		(0xBC31 <= code && code <= 0xBC4B) || // Lo  [27] HANGUL SYLLABLE BAEG..HANGUL SYLLABLE BAEH
		(0xBC4D <= code && code <= 0xBC67) || // Lo  [27] HANGUL SYLLABLE BYAG..HANGUL SYLLABLE BYAH
		(0xBC69 <= code && code <= 0xBC83) || // Lo  [27] HANGUL SYLLABLE BYAEG..HANGUL SYLLABLE BYAEH
		(0xBC85 <= code && code <= 0xBC9F) || // Lo  [27] HANGUL SYLLABLE BEOG..HANGUL SYLLABLE BEOH
		(0xBCA1 <= code && code <= 0xBCBB) || // Lo  [27] HANGUL SYLLABLE BEG..HANGUL SYLLABLE BEH
		(0xBCBD <= code && code <= 0xBCD7) || // Lo  [27] HANGUL SYLLABLE BYEOG..HANGUL SYLLABLE BYEOH
		(0xBCD9 <= code && code <= 0xBCF3) || // Lo  [27] HANGUL SYLLABLE BYEG..HANGUL SYLLABLE BYEH
		(0xBCF5 <= code && code <= 0xBD0F) || // Lo  [27] HANGUL SYLLABLE BOG..HANGUL SYLLABLE BOH
		(0xBD11 <= code && code <= 0xBD2B) || // Lo  [27] HANGUL SYLLABLE BWAG..HANGUL SYLLABLE BWAH
		(0xBD2D <= code && code <= 0xBD47) || // Lo  [27] HANGUL SYLLABLE BWAEG..HANGUL SYLLABLE BWAEH
		(0xBD49 <= code && code <= 0xBD63) || // Lo  [27] HANGUL SYLLABLE BOEG..HANGUL SYLLABLE BOEH
		(0xBD65 <= code && code <= 0xBD7F) || // Lo  [27] HANGUL SYLLABLE BYOG..HANGUL SYLLABLE BYOH
		(0xBD81 <= code && code <= 0xBD9B) || // Lo  [27] HANGUL SYLLABLE BUG..HANGUL SYLLABLE BUH
		(0xBD9D <= code && code <= 0xBDB7) || // Lo  [27] HANGUL SYLLABLE BWEOG..HANGUL SYLLABLE BWEOH
		(0xBDB9 <= code && code <= 0xBDD3) || // Lo  [27] HANGUL SYLLABLE BWEG..HANGUL SYLLABLE BWEH
		(0xBDD5 <= code && code <= 0xBDEF) || // Lo  [27] HANGUL SYLLABLE BWIG..HANGUL SYLLABLE BWIH
		(0xBDF1 <= code && code <= 0xBE0B) || // Lo  [27] HANGUL SYLLABLE BYUG..HANGUL SYLLABLE BYUH
		(0xBE0D <= code && code <= 0xBE27) || // Lo  [27] HANGUL SYLLABLE BEUG..HANGUL SYLLABLE BEUH
		(0xBE29 <= code && code <= 0xBE43) || // Lo  [27] HANGUL SYLLABLE BYIG..HANGUL SYLLABLE BYIH
		(0xBE45 <= code && code <= 0xBE5F) || // Lo  [27] HANGUL SYLLABLE BIG..HANGUL SYLLABLE BIH
		(0xBE61 <= code && code <= 0xBE7B) || // Lo  [27] HANGUL SYLLABLE BBAG..HANGUL SYLLABLE BBAH
		(0xBE7D <= code && code <= 0xBE97) || // Lo  [27] HANGUL SYLLABLE BBAEG..HANGUL SYLLABLE BBAEH
		(0xBE99 <= code && code <= 0xBEB3) || // Lo  [27] HANGUL SYLLABLE BBYAG..HANGUL SYLLABLE BBYAH
		(0xBEB5 <= code && code <= 0xBECF) || // Lo  [27] HANGUL SYLLABLE BBYAEG..HANGUL SYLLABLE BBYAEH
		(0xBED1 <= code && code <= 0xBEEB) || // Lo  [27] HANGUL SYLLABLE BBEOG..HANGUL SYLLABLE BBEOH
		(0xBEED <= code && code <= 0xBF07) || // Lo  [27] HANGUL SYLLABLE BBEG..HANGUL SYLLABLE BBEH
		(0xBF09 <= code && code <= 0xBF23) || // Lo  [27] HANGUL SYLLABLE BBYEOG..HANGUL SYLLABLE BBYEOH
		(0xBF25 <= code && code <= 0xBF3F) || // Lo  [27] HANGUL SYLLABLE BBYEG..HANGUL SYLLABLE BBYEH
		(0xBF41 <= code && code <= 0xBF5B) || // Lo  [27] HANGUL SYLLABLE BBOG..HANGUL SYLLABLE BBOH
		(0xBF5D <= code && code <= 0xBF77) || // Lo  [27] HANGUL SYLLABLE BBWAG..HANGUL SYLLABLE BBWAH
		(0xBF79 <= code && code <= 0xBF93) || // Lo  [27] HANGUL SYLLABLE BBWAEG..HANGUL SYLLABLE BBWAEH
		(0xBF95 <= code && code <= 0xBFAF) || // Lo  [27] HANGUL SYLLABLE BBOEG..HANGUL SYLLABLE BBOEH
		(0xBFB1 <= code && code <= 0xBFCB) || // Lo  [27] HANGUL SYLLABLE BBYOG..HANGUL SYLLABLE BBYOH
		(0xBFCD <= code && code <= 0xBFE7) || // Lo  [27] HANGUL SYLLABLE BBUG..HANGUL SYLLABLE BBUH
		(0xBFE9 <= code && code <= 0xC003) || // Lo  [27] HANGUL SYLLABLE BBWEOG..HANGUL SYLLABLE BBWEOH
		(0xC005 <= code && code <= 0xC01F) || // Lo  [27] HANGUL SYLLABLE BBWEG..HANGUL SYLLABLE BBWEH
		(0xC021 <= code && code <= 0xC03B) || // Lo  [27] HANGUL SYLLABLE BBWIG..HANGUL SYLLABLE BBWIH
		(0xC03D <= code && code <= 0xC057) || // Lo  [27] HANGUL SYLLABLE BBYUG..HANGUL SYLLABLE BBYUH
		(0xC059 <= code && code <= 0xC073) || // Lo  [27] HANGUL SYLLABLE BBEUG..HANGUL SYLLABLE BBEUH
		(0xC075 <= code && code <= 0xC08F) || // Lo  [27] HANGUL SYLLABLE BBYIG..HANGUL SYLLABLE BBYIH
		(0xC091 <= code && code <= 0xC0AB) || // Lo  [27] HANGUL SYLLABLE BBIG..HANGUL SYLLABLE BBIH
		(0xC0AD <= code && code <= 0xC0C7) || // Lo  [27] HANGUL SYLLABLE SAG..HANGUL SYLLABLE SAH
		(0xC0C9 <= code && code <= 0xC0E3) || // Lo  [27] HANGUL SYLLABLE SAEG..HANGUL SYLLABLE SAEH
		(0xC0E5 <= code && code <= 0xC0FF) || // Lo  [27] HANGUL SYLLABLE SYAG..HANGUL SYLLABLE SYAH
		(0xC101 <= code && code <= 0xC11B) || // Lo  [27] HANGUL SYLLABLE SYAEG..HANGUL SYLLABLE SYAEH
		(0xC11D <= code && code <= 0xC137) || // Lo  [27] HANGUL SYLLABLE SEOG..HANGUL SYLLABLE SEOH
		(0xC139 <= code && code <= 0xC153) || // Lo  [27] HANGUL SYLLABLE SEG..HANGUL SYLLABLE SEH
		(0xC155 <= code && code <= 0xC16F) || // Lo  [27] HANGUL SYLLABLE SYEOG..HANGUL SYLLABLE SYEOH
		(0xC171 <= code && code <= 0xC18B) || // Lo  [27] HANGUL SYLLABLE SYEG..HANGUL SYLLABLE SYEH
		(0xC18D <= code && code <= 0xC1A7) || // Lo  [27] HANGUL SYLLABLE SOG..HANGUL SYLLABLE SOH
		(0xC1A9 <= code && code <= 0xC1C3) || // Lo  [27] HANGUL SYLLABLE SWAG..HANGUL SYLLABLE SWAH
		(0xC1C5 <= code && code <= 0xC1DF) || // Lo  [27] HANGUL SYLLABLE SWAEG..HANGUL SYLLABLE SWAEH
		(0xC1E1 <= code && code <= 0xC1FB) || // Lo  [27] HANGUL SYLLABLE SOEG..HANGUL SYLLABLE SOEH
		(0xC1FD <= code && code <= 0xC217) || // Lo  [27] HANGUL SYLLABLE SYOG..HANGUL SYLLABLE SYOH
		(0xC219 <= code && code <= 0xC233) || // Lo  [27] HANGUL SYLLABLE SUG..HANGUL SYLLABLE SUH
		(0xC235 <= code && code <= 0xC24F) || // Lo  [27] HANGUL SYLLABLE SWEOG..HANGUL SYLLABLE SWEOH
		(0xC251 <= code && code <= 0xC26B) || // Lo  [27] HANGUL SYLLABLE SWEG..HANGUL SYLLABLE SWEH
		(0xC26D <= code && code <= 0xC287) || // Lo  [27] HANGUL SYLLABLE SWIG..HANGUL SYLLABLE SWIH
		(0xC289 <= code && code <= 0xC2A3) || // Lo  [27] HANGUL SYLLABLE SYUG..HANGUL SYLLABLE SYUH
		(0xC2A5 <= code && code <= 0xC2BF) || // Lo  [27] HANGUL SYLLABLE SEUG..HANGUL SYLLABLE SEUH
		(0xC2C1 <= code && code <= 0xC2DB) || // Lo  [27] HANGUL SYLLABLE SYIG..HANGUL SYLLABLE SYIH
		(0xC2DD <= code && code <= 0xC2F7) || // Lo  [27] HANGUL SYLLABLE SIG..HANGUL SYLLABLE SIH
		(0xC2F9 <= code && code <= 0xC313) || // Lo  [27] HANGUL SYLLABLE SSAG..HANGUL SYLLABLE SSAH
		(0xC315 <= code && code <= 0xC32F) || // Lo  [27] HANGUL SYLLABLE SSAEG..HANGUL SYLLABLE SSAEH
		(0xC331 <= code && code <= 0xC34B) || // Lo  [27] HANGUL SYLLABLE SSYAG..HANGUL SYLLABLE SSYAH
		(0xC34D <= code && code <= 0xC367) || // Lo  [27] HANGUL SYLLABLE SSYAEG..HANGUL SYLLABLE SSYAEH
		(0xC369 <= code && code <= 0xC383) || // Lo  [27] HANGUL SYLLABLE SSEOG..HANGUL SYLLABLE SSEOH
		(0xC385 <= code && code <= 0xC39F) || // Lo  [27] HANGUL SYLLABLE SSEG..HANGUL SYLLABLE SSEH
		(0xC3A1 <= code && code <= 0xC3BB) || // Lo  [27] HANGUL SYLLABLE SSYEOG..HANGUL SYLLABLE SSYEOH
		(0xC3BD <= code && code <= 0xC3D7) || // Lo  [27] HANGUL SYLLABLE SSYEG..HANGUL SYLLABLE SSYEH
		(0xC3D9 <= code && code <= 0xC3F3) || // Lo  [27] HANGUL SYLLABLE SSOG..HANGUL SYLLABLE SSOH
		(0xC3F5 <= code && code <= 0xC40F) || // Lo  [27] HANGUL SYLLABLE SSWAG..HANGUL SYLLABLE SSWAH
		(0xC411 <= code && code <= 0xC42B) || // Lo  [27] HANGUL SYLLABLE SSWAEG..HANGUL SYLLABLE SSWAEH
		(0xC42D <= code && code <= 0xC447) || // Lo  [27] HANGUL SYLLABLE SSOEG..HANGUL SYLLABLE SSOEH
		(0xC449 <= code && code <= 0xC463) || // Lo  [27] HANGUL SYLLABLE SSYOG..HANGUL SYLLABLE SSYOH
		(0xC465 <= code && code <= 0xC47F) || // Lo  [27] HANGUL SYLLABLE SSUG..HANGUL SYLLABLE SSUH
		(0xC481 <= code && code <= 0xC49B) || // Lo  [27] HANGUL SYLLABLE SSWEOG..HANGUL SYLLABLE SSWEOH
		(0xC49D <= code && code <= 0xC4B7) || // Lo  [27] HANGUL SYLLABLE SSWEG..HANGUL SYLLABLE SSWEH
		(0xC4B9 <= code && code <= 0xC4D3) || // Lo  [27] HANGUL SYLLABLE SSWIG..HANGUL SYLLABLE SSWIH
		(0xC4D5 <= code && code <= 0xC4EF) || // Lo  [27] HANGUL SYLLABLE SSYUG..HANGUL SYLLABLE SSYUH
		(0xC4F1 <= code && code <= 0xC50B) || // Lo  [27] HANGUL SYLLABLE SSEUG..HANGUL SYLLABLE SSEUH
		(0xC50D <= code && code <= 0xC527) || // Lo  [27] HANGUL SYLLABLE SSYIG..HANGUL SYLLABLE SSYIH
		(0xC529 <= code && code <= 0xC543) || // Lo  [27] HANGUL SYLLABLE SSIG..HANGUL SYLLABLE SSIH
		(0xC545 <= code && code <= 0xC55F) || // Lo  [27] HANGUL SYLLABLE AG..HANGUL SYLLABLE AH
		(0xC561 <= code && code <= 0xC57B) || // Lo  [27] HANGUL SYLLABLE AEG..HANGUL SYLLABLE AEH
		(0xC57D <= code && code <= 0xC597) || // Lo  [27] HANGUL SYLLABLE YAG..HANGUL SYLLABLE YAH
		(0xC599 <= code && code <= 0xC5B3) || // Lo  [27] HANGUL SYLLABLE YAEG..HANGUL SYLLABLE YAEH
		(0xC5B5 <= code && code <= 0xC5CF) || // Lo  [27] HANGUL SYLLABLE EOG..HANGUL SYLLABLE EOH
		(0xC5D1 <= code && code <= 0xC5EB) || // Lo  [27] HANGUL SYLLABLE EG..HANGUL SYLLABLE EH
		(0xC5ED <= code && code <= 0xC607) || // Lo  [27] HANGUL SYLLABLE YEOG..HANGUL SYLLABLE YEOH
		(0xC609 <= code && code <= 0xC623) || // Lo  [27] HANGUL SYLLABLE YEG..HANGUL SYLLABLE YEH
		(0xC625 <= code && code <= 0xC63F) || // Lo  [27] HANGUL SYLLABLE OG..HANGUL SYLLABLE OH
		(0xC641 <= code && code <= 0xC65B) || // Lo  [27] HANGUL SYLLABLE WAG..HANGUL SYLLABLE WAH
		(0xC65D <= code && code <= 0xC677) || // Lo  [27] HANGUL SYLLABLE WAEG..HANGUL SYLLABLE WAEH
		(0xC679 <= code && code <= 0xC693) || // Lo  [27] HANGUL SYLLABLE OEG..HANGUL SYLLABLE OEH
		(0xC695 <= code && code <= 0xC6AF) || // Lo  [27] HANGUL SYLLABLE YOG..HANGUL SYLLABLE YOH
		(0xC6B1 <= code && code <= 0xC6CB) || // Lo  [27] HANGUL SYLLABLE UG..HANGUL SYLLABLE UH
		(0xC6CD <= code && code <= 0xC6E7) || // Lo  [27] HANGUL SYLLABLE WEOG..HANGUL SYLLABLE WEOH
		(0xC6E9 <= code && code <= 0xC703) || // Lo  [27] HANGUL SYLLABLE WEG..HANGUL SYLLABLE WEH
		(0xC705 <= code && code <= 0xC71F) || // Lo  [27] HANGUL SYLLABLE WIG..HANGUL SYLLABLE WIH
		(0xC721 <= code && code <= 0xC73B) || // Lo  [27] HANGUL SYLLABLE YUG..HANGUL SYLLABLE YUH
		(0xC73D <= code && code <= 0xC757) || // Lo  [27] HANGUL SYLLABLE EUG..HANGUL SYLLABLE EUH
		(0xC759 <= code && code <= 0xC773) || // Lo  [27] HANGUL SYLLABLE YIG..HANGUL SYLLABLE YIH
		(0xC775 <= code && code <= 0xC78F) || // Lo  [27] HANGUL SYLLABLE IG..HANGUL SYLLABLE IH
		(0xC791 <= code && code <= 0xC7AB) || // Lo  [27] HANGUL SYLLABLE JAG..HANGUL SYLLABLE JAH
		(0xC7AD <= code && code <= 0xC7C7) || // Lo  [27] HANGUL SYLLABLE JAEG..HANGUL SYLLABLE JAEH
		(0xC7C9 <= code && code <= 0xC7E3) || // Lo  [27] HANGUL SYLLABLE JYAG..HANGUL SYLLABLE JYAH
		(0xC7E5 <= code && code <= 0xC7FF) || // Lo  [27] HANGUL SYLLABLE JYAEG..HANGUL SYLLABLE JYAEH
		(0xC801 <= code && code <= 0xC81B) || // Lo  [27] HANGUL SYLLABLE JEOG..HANGUL SYLLABLE JEOH
		(0xC81D <= code && code <= 0xC837) || // Lo  [27] HANGUL SYLLABLE JEG..HANGUL SYLLABLE JEH
		(0xC839 <= code && code <= 0xC853) || // Lo  [27] HANGUL SYLLABLE JYEOG..HANGUL SYLLABLE JYEOH
		(0xC855 <= code && code <= 0xC86F) || // Lo  [27] HANGUL SYLLABLE JYEG..HANGUL SYLLABLE JYEH
		(0xC871 <= code && code <= 0xC88B) || // Lo  [27] HANGUL SYLLABLE JOG..HANGUL SYLLABLE JOH
		(0xC88D <= code && code <= 0xC8A7) || // Lo  [27] HANGUL SYLLABLE JWAG..HANGUL SYLLABLE JWAH
		(0xC8A9 <= code && code <= 0xC8C3) || // Lo  [27] HANGUL SYLLABLE JWAEG..HANGUL SYLLABLE JWAEH
		(0xC8C5 <= code && code <= 0xC8DF) || // Lo  [27] HANGUL SYLLABLE JOEG..HANGUL SYLLABLE JOEH
		(0xC8E1 <= code && code <= 0xC8FB) || // Lo  [27] HANGUL SYLLABLE JYOG..HANGUL SYLLABLE JYOH
		(0xC8FD <= code && code <= 0xC917) || // Lo  [27] HANGUL SYLLABLE JUG..HANGUL SYLLABLE JUH
		(0xC919 <= code && code <= 0xC933) || // Lo  [27] HANGUL SYLLABLE JWEOG..HANGUL SYLLABLE JWEOH
		(0xC935 <= code && code <= 0xC94F) || // Lo  [27] HANGUL SYLLABLE JWEG..HANGUL SYLLABLE JWEH
		(0xC951 <= code && code <= 0xC96B) || // Lo  [27] HANGUL SYLLABLE JWIG..HANGUL SYLLABLE JWIH
		(0xC96D <= code && code <= 0xC987) || // Lo  [27] HANGUL SYLLABLE JYUG..HANGUL SYLLABLE JYUH
		(0xC989 <= code && code <= 0xC9A3) || // Lo  [27] HANGUL SYLLABLE JEUG..HANGUL SYLLABLE JEUH
		(0xC9A5 <= code && code <= 0xC9BF) || // Lo  [27] HANGUL SYLLABLE JYIG..HANGUL SYLLABLE JYIH
		(0xC9C1 <= code && code <= 0xC9DB) || // Lo  [27] HANGUL SYLLABLE JIG..HANGUL SYLLABLE JIH
		(0xC9DD <= code && code <= 0xC9F7) || // Lo  [27] HANGUL SYLLABLE JJAG..HANGUL SYLLABLE JJAH
		(0xC9F9 <= code && code <= 0xCA13) || // Lo  [27] HANGUL SYLLABLE JJAEG..HANGUL SYLLABLE JJAEH
		(0xCA15 <= code && code <= 0xCA2F) || // Lo  [27] HANGUL SYLLABLE JJYAG..HANGUL SYLLABLE JJYAH
		(0xCA31 <= code && code <= 0xCA4B) || // Lo  [27] HANGUL SYLLABLE JJYAEG..HANGUL SYLLABLE JJYAEH
		(0xCA4D <= code && code <= 0xCA67) || // Lo  [27] HANGUL SYLLABLE JJEOG..HANGUL SYLLABLE JJEOH
		(0xCA69 <= code && code <= 0xCA83) || // Lo  [27] HANGUL SYLLABLE JJEG..HANGUL SYLLABLE JJEH
		(0xCA85 <= code && code <= 0xCA9F) || // Lo  [27] HANGUL SYLLABLE JJYEOG..HANGUL SYLLABLE JJYEOH
		(0xCAA1 <= code && code <= 0xCABB) || // Lo  [27] HANGUL SYLLABLE JJYEG..HANGUL SYLLABLE JJYEH
		(0xCABD <= code && code <= 0xCAD7) || // Lo  [27] HANGUL SYLLABLE JJOG..HANGUL SYLLABLE JJOH
		(0xCAD9 <= code && code <= 0xCAF3) || // Lo  [27] HANGUL SYLLABLE JJWAG..HANGUL SYLLABLE JJWAH
		(0xCAF5 <= code && code <= 0xCB0F) || // Lo  [27] HANGUL SYLLABLE JJWAEG..HANGUL SYLLABLE JJWAEH
		(0xCB11 <= code && code <= 0xCB2B) || // Lo  [27] HANGUL SYLLABLE JJOEG..HANGUL SYLLABLE JJOEH
		(0xCB2D <= code && code <= 0xCB47) || // Lo  [27] HANGUL SYLLABLE JJYOG..HANGUL SYLLABLE JJYOH
		(0xCB49 <= code && code <= 0xCB63) || // Lo  [27] HANGUL SYLLABLE JJUG..HANGUL SYLLABLE JJUH
		(0xCB65 <= code && code <= 0xCB7F) || // Lo  [27] HANGUL SYLLABLE JJWEOG..HANGUL SYLLABLE JJWEOH
		(0xCB81 <= code && code <= 0xCB9B) || // Lo  [27] HANGUL SYLLABLE JJWEG..HANGUL SYLLABLE JJWEH
		(0xCB9D <= code && code <= 0xCBB7) || // Lo  [27] HANGUL SYLLABLE JJWIG..HANGUL SYLLABLE JJWIH
		(0xCBB9 <= code && code <= 0xCBD3) || // Lo  [27] HANGUL SYLLABLE JJYUG..HANGUL SYLLABLE JJYUH
		(0xCBD5 <= code && code <= 0xCBEF) || // Lo  [27] HANGUL SYLLABLE JJEUG..HANGUL SYLLABLE JJEUH
		(0xCBF1 <= code && code <= 0xCC0B) || // Lo  [27] HANGUL SYLLABLE JJYIG..HANGUL SYLLABLE JJYIH
		(0xCC0D <= code && code <= 0xCC27) || // Lo  [27] HANGUL SYLLABLE JJIG..HANGUL SYLLABLE JJIH
		(0xCC29 <= code && code <= 0xCC43) || // Lo  [27] HANGUL SYLLABLE CAG..HANGUL SYLLABLE CAH
		(0xCC45 <= code && code <= 0xCC5F) || // Lo  [27] HANGUL SYLLABLE CAEG..HANGUL SYLLABLE CAEH
		(0xCC61 <= code && code <= 0xCC7B) || // Lo  [27] HANGUL SYLLABLE CYAG..HANGUL SYLLABLE CYAH
		(0xCC7D <= code && code <= 0xCC97) || // Lo  [27] HANGUL SYLLABLE CYAEG..HANGUL SYLLABLE CYAEH
		(0xCC99 <= code && code <= 0xCCB3) || // Lo  [27] HANGUL SYLLABLE CEOG..HANGUL SYLLABLE CEOH
		(0xCCB5 <= code && code <= 0xCCCF) || // Lo  [27] HANGUL SYLLABLE CEG..HANGUL SYLLABLE CEH
		(0xCCD1 <= code && code <= 0xCCEB) || // Lo  [27] HANGUL SYLLABLE CYEOG..HANGUL SYLLABLE CYEOH
		(0xCCED <= code && code <= 0xCD07) || // Lo  [27] HANGUL SYLLABLE CYEG..HANGUL SYLLABLE CYEH
		(0xCD09 <= code && code <= 0xCD23) || // Lo  [27] HANGUL SYLLABLE COG..HANGUL SYLLABLE COH
		(0xCD25 <= code && code <= 0xCD3F) || // Lo  [27] HANGUL SYLLABLE CWAG..HANGUL SYLLABLE CWAH
		(0xCD41 <= code && code <= 0xCD5B) || // Lo  [27] HANGUL SYLLABLE CWAEG..HANGUL SYLLABLE CWAEH
		(0xCD5D <= code && code <= 0xCD77) || // Lo  [27] HANGUL SYLLABLE COEG..HANGUL SYLLABLE COEH
		(0xCD79 <= code && code <= 0xCD93) || // Lo  [27] HANGUL SYLLABLE CYOG..HANGUL SYLLABLE CYOH
		(0xCD95 <= code && code <= 0xCDAF) || // Lo  [27] HANGUL SYLLABLE CUG..HANGUL SYLLABLE CUH
		(0xCDB1 <= code && code <= 0xCDCB) || // Lo  [27] HANGUL SYLLABLE CWEOG..HANGUL SYLLABLE CWEOH
		(0xCDCD <= code && code <= 0xCDE7) || // Lo  [27] HANGUL SYLLABLE CWEG..HANGUL SYLLABLE CWEH
		(0xCDE9 <= code && code <= 0xCE03) || // Lo  [27] HANGUL SYLLABLE CWIG..HANGUL SYLLABLE CWIH
		(0xCE05 <= code && code <= 0xCE1F) || // Lo  [27] HANGUL SYLLABLE CYUG..HANGUL SYLLABLE CYUH
		(0xCE21 <= code && code <= 0xCE3B) || // Lo  [27] HANGUL SYLLABLE CEUG..HANGUL SYLLABLE CEUH
		(0xCE3D <= code && code <= 0xCE57) || // Lo  [27] HANGUL SYLLABLE CYIG..HANGUL SYLLABLE CYIH
		(0xCE59 <= code && code <= 0xCE73) || // Lo  [27] HANGUL SYLLABLE CIG..HANGUL SYLLABLE CIH
		(0xCE75 <= code && code <= 0xCE8F) || // Lo  [27] HANGUL SYLLABLE KAG..HANGUL SYLLABLE KAH
		(0xCE91 <= code && code <= 0xCEAB) || // Lo  [27] HANGUL SYLLABLE KAEG..HANGUL SYLLABLE KAEH
		(0xCEAD <= code && code <= 0xCEC7) || // Lo  [27] HANGUL SYLLABLE KYAG..HANGUL SYLLABLE KYAH
		(0xCEC9 <= code && code <= 0xCEE3) || // Lo  [27] HANGUL SYLLABLE KYAEG..HANGUL SYLLABLE KYAEH
		(0xCEE5 <= code && code <= 0xCEFF) || // Lo  [27] HANGUL SYLLABLE KEOG..HANGUL SYLLABLE KEOH
		(0xCF01 <= code && code <= 0xCF1B) || // Lo  [27] HANGUL SYLLABLE KEG..HANGUL SYLLABLE KEH
		(0xCF1D <= code && code <= 0xCF37) || // Lo  [27] HANGUL SYLLABLE KYEOG..HANGUL SYLLABLE KYEOH
		(0xCF39 <= code && code <= 0xCF53) || // Lo  [27] HANGUL SYLLABLE KYEG..HANGUL SYLLABLE KYEH
		(0xCF55 <= code && code <= 0xCF6F) || // Lo  [27] HANGUL SYLLABLE KOG..HANGUL SYLLABLE KOH
		(0xCF71 <= code && code <= 0xCF8B) || // Lo  [27] HANGUL SYLLABLE KWAG..HANGUL SYLLABLE KWAH
		(0xCF8D <= code && code <= 0xCFA7) || // Lo  [27] HANGUL SYLLABLE KWAEG..HANGUL SYLLABLE KWAEH
		(0xCFA9 <= code && code <= 0xCFC3) || // Lo  [27] HANGUL SYLLABLE KOEG..HANGUL SYLLABLE KOEH
		(0xCFC5 <= code && code <= 0xCFDF) || // Lo  [27] HANGUL SYLLABLE KYOG..HANGUL SYLLABLE KYOH
		(0xCFE1 <= code && code <= 0xCFFB) || // Lo  [27] HANGUL SYLLABLE KUG..HANGUL SYLLABLE KUH
		(0xCFFD <= code && code <= 0xD017) || // Lo  [27] HANGUL SYLLABLE KWEOG..HANGUL SYLLABLE KWEOH
		(0xD019 <= code && code <= 0xD033) || // Lo  [27] HANGUL SYLLABLE KWEG..HANGUL SYLLABLE KWEH
		(0xD035 <= code && code <= 0xD04F) || // Lo  [27] HANGUL SYLLABLE KWIG..HANGUL SYLLABLE KWIH
		(0xD051 <= code && code <= 0xD06B) || // Lo  [27] HANGUL SYLLABLE KYUG..HANGUL SYLLABLE KYUH
		(0xD06D <= code && code <= 0xD087) || // Lo  [27] HANGUL SYLLABLE KEUG..HANGUL SYLLABLE KEUH
		(0xD089 <= code && code <= 0xD0A3) || // Lo  [27] HANGUL SYLLABLE KYIG..HANGUL SYLLABLE KYIH
		(0xD0A5 <= code && code <= 0xD0BF) || // Lo  [27] HANGUL SYLLABLE KIG..HANGUL SYLLABLE KIH
		(0xD0C1 <= code && code <= 0xD0DB) || // Lo  [27] HANGUL SYLLABLE TAG..HANGUL SYLLABLE TAH
		(0xD0DD <= code && code <= 0xD0F7) || // Lo  [27] HANGUL SYLLABLE TAEG..HANGUL SYLLABLE TAEH
		(0xD0F9 <= code && code <= 0xD113) || // Lo  [27] HANGUL SYLLABLE TYAG..HANGUL SYLLABLE TYAH
		(0xD115 <= code && code <= 0xD12F) || // Lo  [27] HANGUL SYLLABLE TYAEG..HANGUL SYLLABLE TYAEH
		(0xD131 <= code && code <= 0xD14B) || // Lo  [27] HANGUL SYLLABLE TEOG..HANGUL SYLLABLE TEOH
		(0xD14D <= code && code <= 0xD167) || // Lo  [27] HANGUL SYLLABLE TEG..HANGUL SYLLABLE TEH
		(0xD169 <= code && code <= 0xD183) || // Lo  [27] HANGUL SYLLABLE TYEOG..HANGUL SYLLABLE TYEOH
		(0xD185 <= code && code <= 0xD19F) || // Lo  [27] HANGUL SYLLABLE TYEG..HANGUL SYLLABLE TYEH
		(0xD1A1 <= code && code <= 0xD1BB) || // Lo  [27] HANGUL SYLLABLE TOG..HANGUL SYLLABLE TOH
		(0xD1BD <= code && code <= 0xD1D7) || // Lo  [27] HANGUL SYLLABLE TWAG..HANGUL SYLLABLE TWAH
		(0xD1D9 <= code && code <= 0xD1F3) || // Lo  [27] HANGUL SYLLABLE TWAEG..HANGUL SYLLABLE TWAEH
		(0xD1F5 <= code && code <= 0xD20F) || // Lo  [27] HANGUL SYLLABLE TOEG..HANGUL SYLLABLE TOEH
		(0xD211 <= code && code <= 0xD22B) || // Lo  [27] HANGUL SYLLABLE TYOG..HANGUL SYLLABLE TYOH
		(0xD22D <= code && code <= 0xD247) || // Lo  [27] HANGUL SYLLABLE TUG..HANGUL SYLLABLE TUH
		(0xD249 <= code && code <= 0xD263) || // Lo  [27] HANGUL SYLLABLE TWEOG..HANGUL SYLLABLE TWEOH
		(0xD265 <= code && code <= 0xD27F) || // Lo  [27] HANGUL SYLLABLE TWEG..HANGUL SYLLABLE TWEH
		(0xD281 <= code && code <= 0xD29B) || // Lo  [27] HANGUL SYLLABLE TWIG..HANGUL SYLLABLE TWIH
		(0xD29D <= code && code <= 0xD2B7) || // Lo  [27] HANGUL SYLLABLE TYUG..HANGUL SYLLABLE TYUH
		(0xD2B9 <= code && code <= 0xD2D3) || // Lo  [27] HANGUL SYLLABLE TEUG..HANGUL SYLLABLE TEUH
		(0xD2D5 <= code && code <= 0xD2EF) || // Lo  [27] HANGUL SYLLABLE TYIG..HANGUL SYLLABLE TYIH
		(0xD2F1 <= code && code <= 0xD30B) || // Lo  [27] HANGUL SYLLABLE TIG..HANGUL SYLLABLE TIH
		(0xD30D <= code && code <= 0xD327) || // Lo  [27] HANGUL SYLLABLE PAG..HANGUL SYLLABLE PAH
		(0xD329 <= code && code <= 0xD343) || // Lo  [27] HANGUL SYLLABLE PAEG..HANGUL SYLLABLE PAEH
		(0xD345 <= code && code <= 0xD35F) || // Lo  [27] HANGUL SYLLABLE PYAG..HANGUL SYLLABLE PYAH
		(0xD361 <= code && code <= 0xD37B) || // Lo  [27] HANGUL SYLLABLE PYAEG..HANGUL SYLLABLE PYAEH
		(0xD37D <= code && code <= 0xD397) || // Lo  [27] HANGUL SYLLABLE PEOG..HANGUL SYLLABLE PEOH
		(0xD399 <= code && code <= 0xD3B3) || // Lo  [27] HANGUL SYLLABLE PEG..HANGUL SYLLABLE PEH
		(0xD3B5 <= code && code <= 0xD3CF) || // Lo  [27] HANGUL SYLLABLE PYEOG..HANGUL SYLLABLE PYEOH
		(0xD3D1 <= code && code <= 0xD3EB) || // Lo  [27] HANGUL SYLLABLE PYEG..HANGUL SYLLABLE PYEH
		(0xD3ED <= code && code <= 0xD407) || // Lo  [27] HANGUL SYLLABLE POG..HANGUL SYLLABLE POH
		(0xD409 <= code && code <= 0xD423) || // Lo  [27] HANGUL SYLLABLE PWAG..HANGUL SYLLABLE PWAH
		(0xD425 <= code && code <= 0xD43F) || // Lo  [27] HANGUL SYLLABLE PWAEG..HANGUL SYLLABLE PWAEH
		(0xD441 <= code && code <= 0xD45B) || // Lo  [27] HANGUL SYLLABLE POEG..HANGUL SYLLABLE POEH
		(0xD45D <= code && code <= 0xD477) || // Lo  [27] HANGUL SYLLABLE PYOG..HANGUL SYLLABLE PYOH
		(0xD479 <= code && code <= 0xD493) || // Lo  [27] HANGUL SYLLABLE PUG..HANGUL SYLLABLE PUH
		(0xD495 <= code && code <= 0xD4AF) || // Lo  [27] HANGUL SYLLABLE PWEOG..HANGUL SYLLABLE PWEOH
		(0xD4B1 <= code && code <= 0xD4CB) || // Lo  [27] HANGUL SYLLABLE PWEG..HANGUL SYLLABLE PWEH
		(0xD4CD <= code && code <= 0xD4E7) || // Lo  [27] HANGUL SYLLABLE PWIG..HANGUL SYLLABLE PWIH
		(0xD4E9 <= code && code <= 0xD503) || // Lo  [27] HANGUL SYLLABLE PYUG..HANGUL SYLLABLE PYUH
		(0xD505 <= code && code <= 0xD51F) || // Lo  [27] HANGUL SYLLABLE PEUG..HANGUL SYLLABLE PEUH
		(0xD521 <= code && code <= 0xD53B) || // Lo  [27] HANGUL SYLLABLE PYIG..HANGUL SYLLABLE PYIH
		(0xD53D <= code && code <= 0xD557) || // Lo  [27] HANGUL SYLLABLE PIG..HANGUL SYLLABLE PIH
		(0xD559 <= code && code <= 0xD573) || // Lo  [27] HANGUL SYLLABLE HAG..HANGUL SYLLABLE HAH
		(0xD575 <= code && code <= 0xD58F) || // Lo  [27] HANGUL SYLLABLE HAEG..HANGUL SYLLABLE HAEH
		(0xD591 <= code && code <= 0xD5AB) || // Lo  [27] HANGUL SYLLABLE HYAG..HANGUL SYLLABLE HYAH
		(0xD5AD <= code && code <= 0xD5C7) || // Lo  [27] HANGUL SYLLABLE HYAEG..HANGUL SYLLABLE HYAEH
		(0xD5C9 <= code && code <= 0xD5E3) || // Lo  [27] HANGUL SYLLABLE HEOG..HANGUL SYLLABLE HEOH
		(0xD5E5 <= code && code <= 0xD5FF) || // Lo  [27] HANGUL SYLLABLE HEG..HANGUL SYLLABLE HEH
		(0xD601 <= code && code <= 0xD61B) || // Lo  [27] HANGUL SYLLABLE HYEOG..HANGUL SYLLABLE HYEOH
		(0xD61D <= code && code <= 0xD637) || // Lo  [27] HANGUL SYLLABLE HYEG..HANGUL SYLLABLE HYEH
		(0xD639 <= code && code <= 0xD653) || // Lo  [27] HANGUL SYLLABLE HOG..HANGUL SYLLABLE HOH
		(0xD655 <= code && code <= 0xD66F) || // Lo  [27] HANGUL SYLLABLE HWAG..HANGUL SYLLABLE HWAH
		(0xD671 <= code && code <= 0xD68B) || // Lo  [27] HANGUL SYLLABLE HWAEG..HANGUL SYLLABLE HWAEH
		(0xD68D <= code && code <= 0xD6A7) || // Lo  [27] HANGUL SYLLABLE HOEG..HANGUL SYLLABLE HOEH
		(0xD6A9 <= code && code <= 0xD6C3) || // Lo  [27] HANGUL SYLLABLE HYOG..HANGUL SYLLABLE HYOH
		(0xD6C5 <= code && code <= 0xD6DF) || // Lo  [27] HANGUL SYLLABLE HUG..HANGUL SYLLABLE HUH
		(0xD6E1 <= code && code <= 0xD6FB) || // Lo  [27] HANGUL SYLLABLE HWEOG..HANGUL SYLLABLE HWEOH
		(0xD6FD <= code && code <= 0xD717) || // Lo  [27] HANGUL SYLLABLE HWEG..HANGUL SYLLABLE HWEH
		(0xD719 <= code && code <= 0xD733) || // Lo  [27] HANGUL SYLLABLE HWIG..HANGUL SYLLABLE HWIH
		(0xD735 <= code && code <= 0xD74F) || // Lo  [27] HANGUL SYLLABLE HYUG..HANGUL SYLLABLE HYUH
		(0xD751 <= code && code <= 0xD76B) || // Lo  [27] HANGUL SYLLABLE HEUG..HANGUL SYLLABLE HEUH
		(0xD76D <= code && code <= 0xD787) || // Lo  [27] HANGUL SYLLABLE HYIG..HANGUL SYLLABLE HYIH
		(0xD789 <= code && code <= 0xD7A3) // Lo  [27] HANGUL SYLLABLE HIG..HANGUL SYLLABLE HIH
		){
			return LVT;
		}
		
		if(
		0x261D == code || // So       WHITE UP POINTING INDEX
		0x26F9 == code || // So       PERSON WITH BALL
		(0x270A <= code && code <= 0x270D) || // So   [4] RAISED FIST..WRITING HAND
		0x1F385 == code || // So       FATHER CHRISTMAS
		(0x1F3C2 <= code && code <= 0x1F3C4) || // So   [3] SNOWBOARDER..SURFER
		0x1F3C7 == code || // So       HORSE RACING
		(0x1F3CA <= code && code <= 0x1F3CC) || // So   [3] SWIMMER..GOLFER
		(0x1F442 <= code && code <= 0x1F443) || // So   [2] EAR..NOSE
		(0x1F446 <= code && code <= 0x1F450) || // So  [11] WHITE UP POINTING BACKHAND INDEX..OPEN HANDS SIGN
		0x1F46E == code || // So       POLICE OFFICER
		(0x1F470 <= code && code <= 0x1F478) || // So   [9] BRIDE WITH VEIL..PRINCESS
		0x1F47C == code || // So       BABY ANGEL
		(0x1F481 <= code && code <= 0x1F483) || // So   [3] INFORMATION DESK PERSON..DANCER
		(0x1F485 <= code && code <= 0x1F487) || // So   [3] NAIL POLISH..HAIRCUT
		0x1F4AA == code || // So       FLEXED BICEPS
		(0x1F574 <= code && code <= 0x1F575) || // So   [2] MAN IN BUSINESS SUIT LEVITATING..SLEUTH OR SPY
		0x1F57A == code || // So       MAN DANCING
		0x1F590 == code || // So       RAISED HAND WITH FINGERS SPLAYED
		(0x1F595 <= code && code <= 0x1F596) || // So   [2] REVERSED HAND WITH MIDDLE FINGER EXTENDED..RAISED HAND WITH PART BETWEEN MIDDLE AND RING FINGERS
		(0x1F645 <= code && code <= 0x1F647) || // So   [3] FACE WITH NO GOOD GESTURE..PERSON BOWING DEEPLY
		(0x1F64B <= code && code <= 0x1F64F) || // So   [5] HAPPY PERSON RAISING ONE HAND..PERSON WITH FOLDED HANDS
		0x1F6A3 == code || // So       ROWBOAT
		(0x1F6B4 <= code && code <= 0x1F6B6) || // So   [3] BICYCLIST..PEDESTRIAN
		0x1F6C0 == code || // So       BATH
		0x1F6CC == code || // So       SLEEPING ACCOMMODATION
		(0x1F918 <= code && code <= 0x1F91C) || // So   [5] SIGN OF THE HORNS..RIGHT-FACING FIST
		(0x1F91E <= code && code <= 0x1F91F) || // So   [2] HAND WITH INDEX AND MIDDLE FINGERS CROSSED..I LOVE YOU HAND SIGN
		0x1F926 == code || // So       FACE PALM
		(0x1F930 <= code && code <= 0x1F939) || // So  [10] PREGNANT WOMAN..JUGGLING
		(0x1F93D <= code && code <= 0x1F93E) || // So   [2] WATER POLO..HANDBALL
		(0x1F9D1 <= code && code <= 0x1F9DD) // So  [13] ADULT..ELF
		){
			return E_Base;
		}

		if(
		(0x1F3FB <= code && code <= 0x1F3FF) // Sk   [5] EMOJI MODIFIER FITZPATRICK TYPE-1-2..EMOJI MODIFIER FITZPATRICK TYPE-6
		){
			return E_Modifier;
		}

		if(
		0x200D == code // Cf       ZERO WIDTH JOINER
		){
			return ZWJ;
		}

		if(
		0x2640 == code || // So       FEMALE SIGN
		0x2642 == code || // So       MALE SIGN
		(0x2695 <= code && code <= 0x2696) || // So   [2] STAFF OF AESCULAPIUS..SCALES
		0x2708 == code || // So       AIRPLANE
		0x2764 == code || // So       HEAVY BLACK HEART
		0x1F308 == code || // So       RAINBOW
		0x1F33E == code || // So       EAR OF RICE
		0x1F373 == code || // So       COOKING
		0x1F393 == code || // So       GRADUATION CAP
		0x1F3A4 == code || // So       MICROPHONE
		0x1F3A8 == code || // So       ARTIST PALETTE
		0x1F3EB == code || // So       SCHOOL
		0x1F3ED == code || // So       FACTORY
		0x1F48B == code || // So       KISS MARK
		(0x1F4BB <= code && code <= 0x1F4BC) || // So   [2] PERSONAL COMPUTER..BRIEFCASE
		0x1F527 == code || // So       WRENCH
		0x1F52C == code || // So       MICROSCOPE
		0x1F5E8 == code || // So       LEFT SPEECH BUBBLE
		0x1F680 == code || // So       ROCKET
		0x1F692 == code // So       FIRE ENGINE
		){
			return Glue_After_Zwj;
		}

		if(
		(0x1F466 <= code && code <= 0x1F469) // So   [4] BOY..WOMAN
		){
			return E_Base_GAZ;
		}
		
		
		//all unlisted characters have a grapheme break property of "Other"
		return Other;
	}
	return this;
}

if (typeof module != 'undefined' && module.exports) {
    module.exports = GraphemeSplitter;
}

},{}],6:[function(require,module,exports){
arguments[4][3][0].apply(exports,arguments)
},{"dup":3}],7:[function(require,module,exports){
'use strict';

module.exports = Pbf;

var ieee754 = require('ieee754');

function Pbf(buf) {
    this.buf = ArrayBuffer.isView && ArrayBuffer.isView(buf) ? buf : new Uint8Array(buf || 0);
    this.pos = 0;
    this.type = 0;
    this.length = this.buf.length;
}

Pbf.Varint  = 0; // varint: int32, int64, uint32, uint64, sint32, sint64, bool, enum
Pbf.Fixed64 = 1; // 64-bit: double, fixed64, sfixed64
Pbf.Bytes   = 2; // length-delimited: string, bytes, embedded messages, packed repeated fields
Pbf.Fixed32 = 5; // 32-bit: float, fixed32, sfixed32

var SHIFT_LEFT_32 = (1 << 16) * (1 << 16),
    SHIFT_RIGHT_32 = 1 / SHIFT_LEFT_32;

// Threshold chosen based on both benchmarking and knowledge about browser string
// data structures (which currently switch structure types at 12 bytes or more)
var TEXT_DECODER_MIN_LENGTH = 12;
var utf8TextDecoder = typeof TextDecoder === 'undefined' ? null : new TextDecoder('utf8');

Pbf.prototype = {

    destroy: function() {
        this.buf = null;
    },

    // === READING =================================================================

    readFields: function(readField, result, end) {
        end = end || this.length;

        while (this.pos < end) {
            var val = this.readVarint(),
                tag = val >> 3,
                startPos = this.pos;

            this.type = val & 0x7;
            readField(tag, result, this);

            if (this.pos === startPos) this.skip(val);
        }
        return result;
    },

    readMessage: function(readField, result) {
        return this.readFields(readField, result, this.readVarint() + this.pos);
    },

    readFixed32: function() {
        var val = readUInt32(this.buf, this.pos);
        this.pos += 4;
        return val;
    },

    readSFixed32: function() {
        var val = readInt32(this.buf, this.pos);
        this.pos += 4;
        return val;
    },

    // 64-bit int handling is based on github.com/dpw/node-buffer-more-ints (MIT-licensed)

    readFixed64: function() {
        var val = readUInt32(this.buf, this.pos) + readUInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;
        this.pos += 8;
        return val;
    },

    readSFixed64: function() {
        var val = readUInt32(this.buf, this.pos) + readInt32(this.buf, this.pos + 4) * SHIFT_LEFT_32;
        this.pos += 8;
        return val;
    },

    readFloat: function() {
        var val = ieee754.read(this.buf, this.pos, true, 23, 4);
        this.pos += 4;
        return val;
    },

    readDouble: function() {
        var val = ieee754.read(this.buf, this.pos, true, 52, 8);
        this.pos += 8;
        return val;
    },

    readVarint: function(isSigned) {
        var buf = this.buf,
            val, b;

        b = buf[this.pos++]; val  =  b & 0x7f;        if (b < 0x80) return val;
        b = buf[this.pos++]; val |= (b & 0x7f) << 7;  if (b < 0x80) return val;
        b = buf[this.pos++]; val |= (b & 0x7f) << 14; if (b < 0x80) return val;
        b = buf[this.pos++]; val |= (b & 0x7f) << 21; if (b < 0x80) return val;
        b = buf[this.pos];   val |= (b & 0x0f) << 28;

        return readVarintRemainder(val, isSigned, this);
    },

    readVarint64: function() { // for compatibility with v2.0.1
        return this.readVarint(true);
    },

    readSVarint: function() {
        var num = this.readVarint();
        return num % 2 === 1 ? (num + 1) / -2 : num / 2; // zigzag encoding
    },

    readBoolean: function() {
        return Boolean(this.readVarint());
    },

    readString: function() {
        var end = this.readVarint() + this.pos;
        var pos = this.pos;
        this.pos = end;

        if (end - pos >= TEXT_DECODER_MIN_LENGTH && utf8TextDecoder) {
            // longer strings are fast with the built-in browser TextDecoder API
            return readUtf8TextDecoder(this.buf, pos, end);
        }
        // short strings are fast with our custom implementation
        return readUtf8(this.buf, pos, end);
    },

    readBytes: function() {
        var end = this.readVarint() + this.pos,
            buffer = this.buf.subarray(this.pos, end);
        this.pos = end;
        return buffer;
    },

    // verbose for performance reasons; doesn't affect gzipped size

    readPackedVarint: function(arr, isSigned) {
        if (this.type !== Pbf.Bytes) return arr.push(this.readVarint(isSigned));
        var end = readPackedEnd(this);
        arr = arr || [];
        while (this.pos < end) arr.push(this.readVarint(isSigned));
        return arr;
    },
    readPackedSVarint: function(arr) {
        if (this.type !== Pbf.Bytes) return arr.push(this.readSVarint());
        var end = readPackedEnd(this);
        arr = arr || [];
        while (this.pos < end) arr.push(this.readSVarint());
        return arr;
    },
    readPackedBoolean: function(arr) {
        if (this.type !== Pbf.Bytes) return arr.push(this.readBoolean());
        var end = readPackedEnd(this);
        arr = arr || [];
        while (this.pos < end) arr.push(this.readBoolean());
        return arr;
    },
    readPackedFloat: function(arr) {
        if (this.type !== Pbf.Bytes) return arr.push(this.readFloat());
        var end = readPackedEnd(this);
        arr = arr || [];
        while (this.pos < end) arr.push(this.readFloat());
        return arr;
    },
    readPackedDouble: function(arr) {
        if (this.type !== Pbf.Bytes) return arr.push(this.readDouble());
        var end = readPackedEnd(this);
        arr = arr || [];
        while (this.pos < end) arr.push(this.readDouble());
        return arr;
    },
    readPackedFixed32: function(arr) {
        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed32());
        var end = readPackedEnd(this);
        arr = arr || [];
        while (this.pos < end) arr.push(this.readFixed32());
        return arr;
    },
    readPackedSFixed32: function(arr) {
        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed32());
        var end = readPackedEnd(this);
        arr = arr || [];
        while (this.pos < end) arr.push(this.readSFixed32());
        return arr;
    },
    readPackedFixed64: function(arr) {
        if (this.type !== Pbf.Bytes) return arr.push(this.readFixed64());
        var end = readPackedEnd(this);
        arr = arr || [];
        while (this.pos < end) arr.push(this.readFixed64());
        return arr;
    },
    readPackedSFixed64: function(arr) {
        if (this.type !== Pbf.Bytes) return arr.push(this.readSFixed64());
        var end = readPackedEnd(this);
        arr = arr || [];
        while (this.pos < end) arr.push(this.readSFixed64());
        return arr;
    },

    skip: function(val) {
        var type = val & 0x7;
        if (type === Pbf.Varint) while (this.buf[this.pos++] > 0x7f) {}
        else if (type === Pbf.Bytes) this.pos = this.readVarint() + this.pos;
        else if (type === Pbf.Fixed32) this.pos += 4;
        else if (type === Pbf.Fixed64) this.pos += 8;
        else throw new Error('Unimplemented type: ' + type);
    },

    // === WRITING =================================================================

    writeTag: function(tag, type) {
        this.writeVarint((tag << 3) | type);
    },

    realloc: function(min) {
        var length = this.length || 16;

        while (length < this.pos + min) length *= 2;

        if (length !== this.length) {
            var buf = new Uint8Array(length);
            buf.set(this.buf);
            this.buf = buf;
            this.length = length;
        }
    },

    finish: function() {
        this.length = this.pos;
        this.pos = 0;
        return this.buf.subarray(0, this.length);
    },

    writeFixed32: function(val) {
        this.realloc(4);
        writeInt32(this.buf, val, this.pos);
        this.pos += 4;
    },

    writeSFixed32: function(val) {
        this.realloc(4);
        writeInt32(this.buf, val, this.pos);
        this.pos += 4;
    },

    writeFixed64: function(val) {
        this.realloc(8);
        writeInt32(this.buf, val & -1, this.pos);
        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);
        this.pos += 8;
    },

    writeSFixed64: function(val) {
        this.realloc(8);
        writeInt32(this.buf, val & -1, this.pos);
        writeInt32(this.buf, Math.floor(val * SHIFT_RIGHT_32), this.pos + 4);
        this.pos += 8;
    },

    writeVarint: function(val) {
        val = +val || 0;

        if (val > 0xfffffff || val < 0) {
            writeBigVarint(val, this);
            return;
        }

        this.realloc(4);

        this.buf[this.pos++] =           val & 0x7f  | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;
        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;
        this.buf[this.pos++] = ((val >>>= 7) & 0x7f) | (val > 0x7f ? 0x80 : 0); if (val <= 0x7f) return;
        this.buf[this.pos++] =   (val >>> 7) & 0x7f;
    },

    writeSVarint: function(val) {
        this.writeVarint(val < 0 ? -val * 2 - 1 : val * 2);
    },

    writeBoolean: function(val) {
        this.writeVarint(Boolean(val));
    },

    writeString: function(str) {
        str = String(str);
        this.realloc(str.length * 4);

        this.pos++; // reserve 1 byte for short string length

        var startPos = this.pos;
        // write the string directly to the buffer and see how much was written
        this.pos = writeUtf8(this.buf, str, this.pos);
        var len = this.pos - startPos;

        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);

        // finally, write the message length in the reserved place and restore the position
        this.pos = startPos - 1;
        this.writeVarint(len);
        this.pos += len;
    },

    writeFloat: function(val) {
        this.realloc(4);
        ieee754.write(this.buf, val, this.pos, true, 23, 4);
        this.pos += 4;
    },

    writeDouble: function(val) {
        this.realloc(8);
        ieee754.write(this.buf, val, this.pos, true, 52, 8);
        this.pos += 8;
    },

    writeBytes: function(buffer) {
        var len = buffer.length;
        this.writeVarint(len);
        this.realloc(len);
        for (var i = 0; i < len; i++) this.buf[this.pos++] = buffer[i];
    },

    writeRawMessage: function(fn, obj) {
        this.pos++; // reserve 1 byte for short message length

        // write the message directly to the buffer and see how much was written
        var startPos = this.pos;
        fn(obj, this);
        var len = this.pos - startPos;

        if (len >= 0x80) makeRoomForExtraLength(startPos, len, this);

        // finally, write the message length in the reserved place and restore the position
        this.pos = startPos - 1;
        this.writeVarint(len);
        this.pos += len;
    },

    writeMessage: function(tag, fn, obj) {
        this.writeTag(tag, Pbf.Bytes);
        this.writeRawMessage(fn, obj);
    },

    writePackedVarint:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedVarint, arr);   },
    writePackedSVarint:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSVarint, arr);  },
    writePackedBoolean:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedBoolean, arr);  },
    writePackedFloat:    function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFloat, arr);    },
    writePackedDouble:   function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedDouble, arr);   },
    writePackedFixed32:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed32, arr);  },
    writePackedSFixed32: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed32, arr); },
    writePackedFixed64:  function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedFixed64, arr);  },
    writePackedSFixed64: function(tag, arr) { if (arr.length) this.writeMessage(tag, writePackedSFixed64, arr); },

    writeBytesField: function(tag, buffer) {
        this.writeTag(tag, Pbf.Bytes);
        this.writeBytes(buffer);
    },
    writeFixed32Field: function(tag, val) {
        this.writeTag(tag, Pbf.Fixed32);
        this.writeFixed32(val);
    },
    writeSFixed32Field: function(tag, val) {
        this.writeTag(tag, Pbf.Fixed32);
        this.writeSFixed32(val);
    },
    writeFixed64Field: function(tag, val) {
        this.writeTag(tag, Pbf.Fixed64);
        this.writeFixed64(val);
    },
    writeSFixed64Field: function(tag, val) {
        this.writeTag(tag, Pbf.Fixed64);
        this.writeSFixed64(val);
    },
    writeVarintField: function(tag, val) {
        this.writeTag(tag, Pbf.Varint);
        this.writeVarint(val);
    },
    writeSVarintField: function(tag, val) {
        this.writeTag(tag, Pbf.Varint);
        this.writeSVarint(val);
    },
    writeStringField: function(tag, str) {
        this.writeTag(tag, Pbf.Bytes);
        this.writeString(str);
    },
    writeFloatField: function(tag, val) {
        this.writeTag(tag, Pbf.Fixed32);
        this.writeFloat(val);
    },
    writeDoubleField: function(tag, val) {
        this.writeTag(tag, Pbf.Fixed64);
        this.writeDouble(val);
    },
    writeBooleanField: function(tag, val) {
        this.writeVarintField(tag, Boolean(val));
    }
};

function readVarintRemainder(l, s, p) {
    var buf = p.buf,
        h, b;

    b = buf[p.pos++]; h  = (b & 0x70) >> 4;  if (b < 0x80) return toNum(l, h, s);
    b = buf[p.pos++]; h |= (b & 0x7f) << 3;  if (b < 0x80) return toNum(l, h, s);
    b = buf[p.pos++]; h |= (b & 0x7f) << 10; if (b < 0x80) return toNum(l, h, s);
    b = buf[p.pos++]; h |= (b & 0x7f) << 17; if (b < 0x80) return toNum(l, h, s);
    b = buf[p.pos++]; h |= (b & 0x7f) << 24; if (b < 0x80) return toNum(l, h, s);
    b = buf[p.pos++]; h |= (b & 0x01) << 31; if (b < 0x80) return toNum(l, h, s);

    throw new Error('Expected varint not more than 10 bytes');
}

function readPackedEnd(pbf) {
    return pbf.type === Pbf.Bytes ?
        pbf.readVarint() + pbf.pos : pbf.pos + 1;
}

function toNum(low, high, isSigned) {
    if (isSigned) {
        return high * 0x100000000 + (low >>> 0);
    }

    return ((high >>> 0) * 0x100000000) + (low >>> 0);
}

function writeBigVarint(val, pbf) {
    var low, high;

    if (val >= 0) {
        low  = (val % 0x100000000) | 0;
        high = (val / 0x100000000) | 0;
    } else {
        low  = ~(-val % 0x100000000);
        high = ~(-val / 0x100000000);

        if (low ^ 0xffffffff) {
            low = (low + 1) | 0;
        } else {
            low = 0;
            high = (high + 1) | 0;
        }
    }

    if (val >= 0x10000000000000000 || val < -0x10000000000000000) {
        throw new Error('Given varint doesn\'t fit into 10 bytes');
    }

    pbf.realloc(10);

    writeBigVarintLow(low, high, pbf);
    writeBigVarintHigh(high, pbf);
}

function writeBigVarintLow(low, high, pbf) {
    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;
    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;
    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;
    pbf.buf[pbf.pos++] = low & 0x7f | 0x80; low >>>= 7;
    pbf.buf[pbf.pos]   = low & 0x7f;
}

function writeBigVarintHigh(high, pbf) {
    var lsb = (high & 0x07) << 4;

    pbf.buf[pbf.pos++] |= lsb         | ((high >>>= 3) ? 0x80 : 0); if (!high) return;
    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;
    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;
    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;
    pbf.buf[pbf.pos++]  = high & 0x7f | ((high >>>= 7) ? 0x80 : 0); if (!high) return;
    pbf.buf[pbf.pos++]  = high & 0x7f;
}

function makeRoomForExtraLength(startPos, len, pbf) {
    var extraLen =
        len <= 0x3fff ? 1 :
        len <= 0x1fffff ? 2 :
        len <= 0xfffffff ? 3 : Math.floor(Math.log(len) / (Math.LN2 * 7));

    // if 1 byte isn't enough for encoding message length, shift the data to the right
    pbf.realloc(extraLen);
    for (var i = pbf.pos - 1; i >= startPos; i--) pbf.buf[i + extraLen] = pbf.buf[i];
}

function writePackedVarint(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeVarint(arr[i]);   }
function writePackedSVarint(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeSVarint(arr[i]);  }
function writePackedFloat(arr, pbf)    { for (var i = 0; i < arr.length; i++) pbf.writeFloat(arr[i]);    }
function writePackedDouble(arr, pbf)   { for (var i = 0; i < arr.length; i++) pbf.writeDouble(arr[i]);   }
function writePackedBoolean(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeBoolean(arr[i]);  }
function writePackedFixed32(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed32(arr[i]);  }
function writePackedSFixed32(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed32(arr[i]); }
function writePackedFixed64(arr, pbf)  { for (var i = 0; i < arr.length; i++) pbf.writeFixed64(arr[i]);  }
function writePackedSFixed64(arr, pbf) { for (var i = 0; i < arr.length; i++) pbf.writeSFixed64(arr[i]); }

// Buffer code below from https://github.com/feross/buffer, MIT-licensed

function readUInt32(buf, pos) {
    return ((buf[pos]) |
        (buf[pos + 1] << 8) |
        (buf[pos + 2] << 16)) +
        (buf[pos + 3] * 0x1000000);
}

function writeInt32(buf, val, pos) {
    buf[pos] = val;
    buf[pos + 1] = (val >>> 8);
    buf[pos + 2] = (val >>> 16);
    buf[pos + 3] = (val >>> 24);
}

function readInt32(buf, pos) {
    return ((buf[pos]) |
        (buf[pos + 1] << 8) |
        (buf[pos + 2] << 16)) +
        (buf[pos + 3] << 24);
}

function readUtf8(buf, pos, end) {
    var str = '';
    var i = pos;

    while (i < end) {
        var b0 = buf[i];
        var c = null; // codepoint
        var bytesPerSequence =
            b0 > 0xEF ? 4 :
            b0 > 0xDF ? 3 :
            b0 > 0xBF ? 2 : 1;

        if (i + bytesPerSequence > end) break;

        var b1, b2, b3;

        if (bytesPerSequence === 1) {
            if (b0 < 0x80) {
                c = b0;
            }
        } else if (bytesPerSequence === 2) {
            b1 = buf[i + 1];
            if ((b1 & 0xC0) === 0x80) {
                c = (b0 & 0x1F) << 0x6 | (b1 & 0x3F);
                if (c <= 0x7F) {
                    c = null;
                }
            }
        } else if (bytesPerSequence === 3) {
            b1 = buf[i + 1];
            b2 = buf[i + 2];
            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80) {
                c = (b0 & 0xF) << 0xC | (b1 & 0x3F) << 0x6 | (b2 & 0x3F);
                if (c <= 0x7FF || (c >= 0xD800 && c <= 0xDFFF)) {
                    c = null;
                }
            }
        } else if (bytesPerSequence === 4) {
            b1 = buf[i + 1];
            b2 = buf[i + 2];
            b3 = buf[i + 3];
            if ((b1 & 0xC0) === 0x80 && (b2 & 0xC0) === 0x80 && (b3 & 0xC0) === 0x80) {
                c = (b0 & 0xF) << 0x12 | (b1 & 0x3F) << 0xC | (b2 & 0x3F) << 0x6 | (b3 & 0x3F);
                if (c <= 0xFFFF || c >= 0x110000) {
                    c = null;
                }
            }
        }

        if (c === null) {
            c = 0xFFFD;
            bytesPerSequence = 1;

        } else if (c > 0xFFFF) {
            c -= 0x10000;
            str += String.fromCharCode(c >>> 10 & 0x3FF | 0xD800);
            c = 0xDC00 | c & 0x3FF;
        }

        str += String.fromCharCode(c);
        i += bytesPerSequence;
    }

    return str;
}

function readUtf8TextDecoder(buf, pos, end) {
    return utf8TextDecoder.decode(buf.subarray(pos, end));
}

function writeUtf8(buf, str, pos) {
    for (var i = 0, c, lead; i < str.length; i++) {
        c = str.charCodeAt(i); // code point

        if (c > 0xD7FF && c < 0xE000) {
            if (lead) {
                if (c < 0xDC00) {
                    buf[pos++] = 0xEF;
                    buf[pos++] = 0xBF;
                    buf[pos++] = 0xBD;
                    lead = c;
                    continue;
                } else {
                    c = lead - 0xD800 << 10 | c - 0xDC00 | 0x10000;
                    lead = null;
                }
            } else {
                if (c > 0xDBFF || (i + 1 === str.length)) {
                    buf[pos++] = 0xEF;
                    buf[pos++] = 0xBF;
                    buf[pos++] = 0xBD;
                } else {
                    lead = c;
                }
                continue;
            }
        } else if (lead) {
            buf[pos++] = 0xEF;
            buf[pos++] = 0xBF;
            buf[pos++] = 0xBD;
            lead = null;
        }

        if (c < 0x80) {
            buf[pos++] = c;
        } else {
            if (c < 0x800) {
                buf[pos++] = c >> 0x6 | 0xC0;
            } else {
                if (c < 0x10000) {
                    buf[pos++] = c >> 0xC | 0xE0;
                } else {
                    buf[pos++] = c >> 0x12 | 0xF0;
                    buf[pos++] = c >> 0xC & 0x3F | 0x80;
                }
                buf[pos++] = c >> 0x6 & 0x3F | 0x80;
            }
            buf[pos++] = c & 0x3F | 0x80;
        }
    }
    return pos;
}

},{"ieee754":6}],8:[function(require,module,exports){
const AttributeCompression = Cesium.AttributeCompression;
const BoundingSphere = Cesium.BoundingSphere;
const Cartesian2 = Cesium.Cartesian2;
const Cartesian3 = Cesium.Cartesian3;
const Color = Cesium.Color;
const ComponentDatatype = Cesium.ComponentDatatype;
const defaultValue = Cesium.defaultValue;
const defined = Cesium.defined;
const destroyObject = Cesium.destroyObject;
const DeveloperError = Cesium.DeveloperError;
const EncodedCartesian3 = Cesium.EncodedCartesian3;
const IndexDatatype = Cesium.IndexDatatype;
const CesiumMath = Cesium.Math;
const Matrix4 = Cesium.Matrix4;
const WebGLConstants = Cesium.WebGLConstants;
const Buffer = Cesium.Buffer;
const BufferUsage = Cesium.BufferUsage;
const ContextLimits = Cesium.ContextLimits;
const DrawCommand = Cesium.DrawCommand;
const Pass = Cesium.Pass;
const RenderState = Cesium.RenderState;
const ShaderProgram = Cesium.ShaderProgram;
const ShaderSource = Cesium.ShaderSource;
const VertexArrayFacade = Cesium.VertexArrayFacade;
const BillboardCollectionFS = Cesium._shadersBillboardCollectionFS;
const BillboardCollectionVS = Cesium._shadersBillboardCollectionVS;
const Billboard = Cesium.Billboard;
const BlendingState = Cesium.BlendingState;
const BlendOption = Cesium.BlendOption;
const HeightReference = Cesium.HeightReference;
const HorizontalOrigin = Cesium.HorizontalOrigin;
const SceneMode = Cesium.SceneMode;
const SDFSettings = Cesium.SDFSettings;
const TextureAtlas = Cesium.TextureAtlas;
const VerticalOrigin = Cesium.VerticalOrigin;

const SHOW_INDEX = Billboard.SHOW_INDEX;
const POSITION_INDEX = Billboard.POSITION_INDEX;
const PIXEL_OFFSET_INDEX = Billboard.PIXEL_OFFSET_INDEX;
const EYE_OFFSET_INDEX = Billboard.EYE_OFFSET_INDEX;
const HORIZONTAL_ORIGIN_INDEX = Billboard.HORIZONTAL_ORIGIN_INDEX;
const VERTICAL_ORIGIN_INDEX = Billboard.VERTICAL_ORIGIN_INDEX;
const SCALE_INDEX = Billboard.SCALE_INDEX;
const IMAGE_INDEX_INDEX = Billboard.IMAGE_INDEX_INDEX;
const COLOR_INDEX = Billboard.COLOR_INDEX;
const ROTATION_INDEX = Billboard.ROTATION_INDEX;
const ALIGNED_AXIS_INDEX = Billboard.ALIGNED_AXIS_INDEX;
const SCALE_BY_DISTANCE_INDEX = Billboard.SCALE_BY_DISTANCE_INDEX;
const TRANSLUCENCY_BY_DISTANCE_INDEX = Billboard.TRANSLUCENCY_BY_DISTANCE_INDEX;
const PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX =
    Billboard.PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX;
const DISTANCE_DISPLAY_CONDITION_INDEX = Billboard.DISTANCE_DISPLAY_CONDITION;
const DISABLE_DEPTH_DISTANCE = Billboard.DISABLE_DEPTH_DISTANCE;
const TEXTURE_COORDINATE_BOUNDS = Billboard.TEXTURE_COORDINATE_BOUNDS;
const SDF_INDEX = Billboard.SDF_INDEX;
const NUMBER_OF_PROPERTIES = Billboard.NUMBER_OF_PROPERTIES;

let attributeLocations;

const attributeLocationsBatched = {
    positionHighAndScale: 0,
    positionLowAndRotation: 1,
    compressedAttribute0: 2, // pixel offset, translate, horizontal origin, vertical origin, show, direction, texture coordinates
    compressedAttribute1: 3, // aligned axis, translucency by distance, image width
    compressedAttribute2: 4, // image height, color, pick color, size in meters, valid aligned axis, 13 bits free
    eyeOffset: 5, // 4 bytes free
    scaleByDistance: 6,
    pixelOffsetScaleByDistance: 7,
    compressedAttribute3: 8,
    textureCoordinateBoundsOrLabelTranslate: 9,
    a_batchId: 10,
    sdf: 11,
};

const attributeLocationsInstanced = {
    direction: 0,
    positionHighAndScale: 1,
    positionLowAndRotation: 2, // texture offset in w
    compressedAttribute0: 3,
    compressedAttribute1: 4,
    compressedAttribute2: 5,
    eyeOffset: 6, // texture range in w
    scaleByDistance: 7,
    pixelOffsetScaleByDistance: 8,
    compressedAttribute3: 9,
    textureCoordinateBoundsOrLabelTranslate: 10,
    a_batchId: 11,
    sdf: 12,
};

/**
 * A renderable collection of billboards.  Billboards are viewport-aligned
 * images positioned in the 3D scene.
 * <br /><br />
 * <div align='center'>
 * <img src='Images/Billboard.png' width='400' height='300' /><br />
 * Example billboards
 * </div>
 * <br /><br />
 * Billboards are added and removed from the collection using {@link BillboardCollection#add}
 * and {@link BillboardCollection#remove}.  Billboards in a collection automatically share textures
 * for images with the same identifier.
 *
 * @alias BillboardCollection
 * @constructor
 *
 * @param {Object} [options] Object with the following properties:
 * @param {Matrix4} [options.modelMatrix=Matrix4.IDENTITY] The 4x4 transformation matrix that transforms each billboard from model to world coordinates.
 * @param {Boolean} [options.debugShowBoundingVolume=false] For debugging only. Determines if this primitive's commands' bounding spheres are shown.
 * @param {Scene} [options.scene] Must be passed in for billboards that use the height reference property or will be depth tested against the globe.
 * @param {BlendOption} [options.blendOption=BlendOption.OPAQUE_AND_TRANSLUCENT] The billboard blending option. The default
 * is used for rendering both opaque and translucent billboards. However, if either all of the billboards are completely opaque or all are completely translucent,
 * setting the technique to BlendOption.OPAQUE or BlendOption.TRANSLUCENT can improve performance by up to 2x.
 * @param {Boolean} [options.show=true] Determines if the billboards in the collection will be shown.
 *
 * @performance For best performance, prefer a few collections, each with many billboards, to
 * many collections with only a few billboards each.  Organize collections so that billboards
 * with the same update frequency are in the same collection, i.e., billboards that do not
 * change should be in one collection; billboards that change every frame should be in another
 * collection; and so on.
 *
 * @see BillboardCollection#add
 * @see BillboardCollection#remove
 * @see Billboard
 * @see LabelCollection
 *
 * @demo {@link https://sandcastle.cesium.com/index.html?src=Billboards.html|Cesium Sandcastle Billboard Demo}
 *
 * @example
 * // Create a billboard collection with two billboards
 * const billboards = scene.primitives.add(new Cesium.BillboardCollection());
 * billboards.add({
 *   position : new Cesium.Cartesian3(1.0, 2.0, 3.0),
 *   image : 'url/to/image'
 * });
 * billboards.add({
 *   position : new Cesium.Cartesian3(4.0, 5.0, 6.0),
 *   image : 'url/to/another/image'
 * });
 */
function BillboardCollection(options) {
    options = defaultValue(options, defaultValue.EMPTY_OBJECT);

    this._scene = options.scene;
    this._batchTable = options.batchTable;

    this._textureAtlas = undefined;
    this._textureAtlasGUID = undefined;
    this._destroyTextureAtlas = true;
    this._sp = undefined;
    this._spTranslucent = undefined;
    this._rsOpaque = undefined;
    this._rsTranslucent = undefined;
    this._vaf = undefined;

    this._billboards = [];
    this._billboardsToUpdate = [];
    this._billboardsToUpdateIndex = 0;
    this._billboardsRemoved = false;
    this._createVertexArray = false;

    this._shaderRotation = false;
    this._compiledShaderRotation = false;

    this._shaderAlignedAxis = false;
    this._compiledShaderAlignedAxis = false;

    this._shaderScaleByDistance = false;
    this._compiledShaderScaleByDistance = false;

    this._shaderTranslucencyByDistance = false;
    this._compiledShaderTranslucencyByDistance = false;

    this._shaderPixelOffsetScaleByDistance = false;
    this._compiledShaderPixelOffsetScaleByDistance = false;

    this._shaderDistanceDisplayCondition = false;
    this._compiledShaderDistanceDisplayCondition = false;

    this._shaderDisableDepthDistance = false;
    this._compiledShaderDisableDepthDistance = false;

    this._shaderClampToGround = false;
    this._compiledShaderClampToGround = false;

    this._propertiesChanged = new Uint32Array(NUMBER_OF_PROPERTIES);

    this._maxSize = 0.0;
    this._maxEyeOffset = 0.0;
    this._maxScale = 1.0;
    this._maxPixelOffset = 0.0;
    this._allHorizontalCenter = true;
    this._allVerticalCenter = true;
    this._allSizedInMeters = true;

    this._baseVolume = new BoundingSphere();
    this._baseVolumeWC = new BoundingSphere();
    this._baseVolume2D = new BoundingSphere();
    this._boundingVolume = new BoundingSphere();
    this._boundingVolumeDirty = false;

    this._colorCommands = [];

    this._ENUENABLED = defaultValue(options.enuEnabled,false);

    /**
     * Determines if billboards in this collection will be shown.
     *
     * @type {Boolean}
     * @default true
     */
    this.show = defaultValue(options.show, true);

    /**
     * The 4x4 transformation matrix that transforms each billboard in this collection from model to world coordinates.
     * When this is the identity matrix, the billboards are drawn in world coordinates, i.e., Earth's WGS84 coordinates.
     * Local reference frames can be used by providing a different transformation matrix, like that returned
     * by {@link Transforms.eastNorthUpToFixedFrame}.
     *
     * @type {Matrix4}
     * @default {@link Matrix4.IDENTITY}
     *
     *
     * @example
     * const center = Cesium.Cartesian3.fromDegrees(-75.59777, 40.03883);
     * billboards.modelMatrix = Cesium.Transforms.eastNorthUpToFixedFrame(center);
     * billboards.add({
     *   image : 'url/to/image',
     *   position : new Cesium.Cartesian3(0.0, 0.0, 0.0) // center
     * });
     * billboards.add({
     *   image : 'url/to/image',
     *   position : new Cesium.Cartesian3(1000000.0, 0.0, 0.0) // east
     * });
     * billboards.add({
     *   image : 'url/to/image',
     *   position : new Cesium.Cartesian3(0.0, 1000000.0, 0.0) // north
     * });
     * billboards.add({
     *   image : 'url/to/image',
     *   position : new Cesium.Cartesian3(0.0, 0.0, 1000000.0) // up
     * });
     *
     * @see Transforms.eastNorthUpToFixedFrame
     */
    this.modelMatrix = Matrix4.clone(
        defaultValue(options.modelMatrix, Matrix4.IDENTITY)
    );
    this._modelMatrix = Matrix4.clone(Matrix4.IDENTITY);

    /**
     * This property is for debugging only; it is not for production use nor is it optimized.
     * <p>
     * Draws the bounding sphere for each draw command in the primitive.
     * </p>
     *
     * @type {Boolean}
     *
     * @default false
     */
    this.debugShowBoundingVolume = defaultValue(
        options.debugShowBoundingVolume,
        false
    );

    /**
     * This property is for debugging only; it is not for production use nor is it optimized.
     * <p>
     * Draws the texture atlas for this BillboardCollection as a fullscreen quad.
     * </p>
     *
     * @type {Boolean}
     *
     * @default false
     */
    this.debugShowTextureAtlas = defaultValue(
        options.debugShowTextureAtlas,
        false
    );

    /**
     * The billboard blending option. The default is used for rendering both opaque and translucent billboards.
     * However, if either all of the billboards are completely opaque or all are completely translucent,
     * setting the technique to BlendOption.OPAQUE or BlendOption.TRANSLUCENT can improve
     * performance by up to 2x.
     * @type {BlendOption}
     * @default BlendOption.OPAQUE_AND_TRANSLUCENT
     */
    this.blendOption = defaultValue(
        options.blendOption,
        BlendOption.OPAQUE_AND_TRANSLUCENT
    );
    this._blendOption = undefined;

    this._mode = SceneMode.SCENE3D;

    // The buffer usage for each attribute is determined based on the usage of the attribute over time.
    this._buffersUsage = [
        BufferUsage.STATIC_DRAW, // SHOW_INDEX
        BufferUsage.STATIC_DRAW, // POSITION_INDEX
        BufferUsage.STATIC_DRAW, // PIXEL_OFFSET_INDEX
        BufferUsage.STATIC_DRAW, // EYE_OFFSET_INDEX
        BufferUsage.STATIC_DRAW, // HORIZONTAL_ORIGIN_INDEX
        BufferUsage.STATIC_DRAW, // VERTICAL_ORIGIN_INDEX
        BufferUsage.STATIC_DRAW, // SCALE_INDEX
        BufferUsage.STATIC_DRAW, // IMAGE_INDEX_INDEX
        BufferUsage.STATIC_DRAW, // COLOR_INDEX
        BufferUsage.STATIC_DRAW, // ROTATION_INDEX
        BufferUsage.STATIC_DRAW, // ALIGNED_AXIS_INDEX
        BufferUsage.STATIC_DRAW, // SCALE_BY_DISTANCE_INDEX
        BufferUsage.STATIC_DRAW, // TRANSLUCENCY_BY_DISTANCE_INDEX
        BufferUsage.STATIC_DRAW, // PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX
        BufferUsage.STATIC_DRAW, // DISTANCE_DISPLAY_CONDITION_INDEX
        BufferUsage.STATIC_DRAW, // TEXTURE_COORDINATE_BOUNDS
    ];

    this._highlightColor = Color.clone(Color.WHITE); // Only used by Vector3DTilePoints

    const that = this;
    this._uniforms = {
        u_atlas: function () {
            return that._textureAtlas.texture;
        },
        u_highlightColor: function () {
            return that._highlightColor;
        },
    };

    const scene = this._scene;
    if (defined(scene) && defined(scene.terrainProviderChanged)) {
        this._removeCallbackFunc = scene.terrainProviderChanged.addEventListener(
            function () {
                const billboards = this._billboards;
                const length = billboards.length;
                for (let i = 0; i < length; ++i) {
                    if (defined(billboards[i])) {
                        billboards[i]._updateClamping();
                    }
                }
            },
            this
        );
    }
}

Object.defineProperties(BillboardCollection.prototype, {
    /**
     * Returns the number of billboards in this collection.  This is commonly used with
     * {@link BillboardCollection#get} to iterate over all the billboards
     * in the collection.
     * @memberof BillboardCollection.prototype
     * @type {Number}
     */
    length: {
        get: function () {
            removeBillboards(this);
            return this._billboards.length;
        },
    },

    /**
     * Gets or sets the textureAtlas.
     * @memberof BillboardCollection.prototype
     * @type {TextureAtlas}
     * @private
     */
    textureAtlas: {
        get: function () {
            return this._textureAtlas;
        },
        set: function (value) {
            if (this._textureAtlas !== value) {
                this._textureAtlas =
                    this._destroyTextureAtlas &&
                    this._textureAtlas &&
                    this._textureAtlas.destroy();
                this._textureAtlas = value;
                this._createVertexArray = true; // New per-billboard texture coordinates
            }
        },
    },

    /**
     * Gets or sets a value which determines if the texture atlas is
     * destroyed when the collection is destroyed.
     *
     * If the texture atlas is used by more than one collection, set this to <code>false</code>,
     * and explicitly destroy the atlas to avoid attempting to destroy it multiple times.
     *
     * @memberof BillboardCollection.prototype
     * @type {Boolean}
     * @private
     *
     * @example
     * // Set destroyTextureAtlas
     * // Destroy a billboard collection but not its texture atlas.
     *
     * const atlas = new TextureAtlas({
     *   scene : scene,
     *   images : images
     * });
     * billboards.textureAtlas = atlas;
     * billboards.destroyTextureAtlas = false;
     * billboards = billboards.destroy();
     * console.log(atlas.isDestroyed()); // False
     */
    destroyTextureAtlas: {
        get: function () {
            return this._destroyTextureAtlas;
        },
        set: function (value) {
            this._destroyTextureAtlas = value;
        },
    },
});

function destroyBillboards(billboards) {
    const length = billboards.length;
    for (let i = 0; i < length; ++i) {
        if (billboards[i]) {
            billboards[i]._destroy();
        }
    }
}

/**
 * Creates and adds a billboard with the specified initial properties to the collection.
 * The added billboard is returned so it can be modified or removed from the collection later.
 *
 * @param {Object}[options] A template describing the billboard's properties as shown in Example 1.
 * @returns {Billboard} The billboard that was added to the collection.
 *
 * @performance Calling <code>add</code> is expected constant time.  However, the collection's vertex buffer
 * is rewritten - an <code>O(n)</code> operation that also incurs CPU to GPU overhead.  For
 * best performance, add as many billboards as possible before calling <code>update</code>.
 *
 * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.
 *
 *
 * @example
 * // Example 1:  Add a billboard, specifying all the default values.
 * const b = billboards.add({
 *   show : true,
 *   position : Cesium.Cartesian3.ZERO,
 *   pixelOffset : Cesium.Cartesian2.ZERO,
 *   eyeOffset : Cesium.Cartesian3.ZERO,
 *   heightReference : Cesium.HeightReference.NONE,
 *   horizontalOrigin : Cesium.HorizontalOrigin.CENTER,
 *   verticalOrigin : Cesium.VerticalOrigin.CENTER,
 *   scale : 1.0,
 *   image : 'url/to/image',
 *   imageSubRegion : undefined,
 *   color : Cesium.Color.WHITE,
 *   id : undefined,
 *   rotation : 0.0,
 *   alignedAxis : Cesium.Cartesian3.ZERO,
 *   width : undefined,
 *   height : undefined,
 *   scaleByDistance : undefined,
 *   translucencyByDistance : undefined,
 *   pixelOffsetScaleByDistance : undefined,
 *   sizeInMeters : false,
 *   distanceDisplayCondition : undefined
 * });
 *
 * @example
 * // Example 2:  Specify only the billboard's cartographic position.
 * const b = billboards.add({
 *   position : Cesium.Cartesian3.fromDegrees(longitude, latitude, height)
 * });
 *
 * @see BillboardCollection#remove
 * @see BillboardCollection#removeAll
 */
BillboardCollection.prototype.add = function (options) {
    const billboard = new Billboard(options, this);
    billboard._index = this._billboards.length;

    this._billboards.push(billboard);
    this._createVertexArray = true;

    return billboard;
};

/**
 * Removes a billboard from the collection.
 *
 * @param {Billboard} billboard The billboard to remove.
 * @returns {Boolean} <code>true</code> if the billboard was removed; <code>false</code> if the billboard was not found in the collection.
 *
 * @performance Calling <code>remove</code> is expected constant time.  However, the collection's vertex buffer
 * is rewritten - an <code>O(n)</code> operation that also incurs CPU to GPU overhead.  For
 * best performance, remove as many billboards as possible before calling <code>update</code>.
 * If you intend to temporarily hide a billboard, it is usually more efficient to call
 * {@link Billboard#show} instead of removing and re-adding the billboard.
 *
 * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.
 *
 *
 * @example
 * const b = billboards.add(...);
 * billboards.remove(b);  // Returns true
 *
 * @see BillboardCollection#add
 * @see BillboardCollection#removeAll
 * @see Billboard#show
 */
BillboardCollection.prototype.remove = function (billboard) {
    if (this.contains(billboard)) {
        this._billboards[billboard._index] = undefined; // Removed later
        this._billboardsRemoved = true;
        this._createVertexArray = true;
        billboard._destroy();
        return true;
    }

    return false;
};

/**
 * Removes all billboards from the collection.
 *
 * @performance <code>O(n)</code>.  It is more efficient to remove all the billboards
 * from a collection and then add new ones than to create a new collection entirely.
 *
 * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.
 *
 *
 * @example
 * billboards.add(...);
 * billboards.add(...);
 * billboards.removeAll();
 *
 * @see BillboardCollection#add
 * @see BillboardCollection#remove
 */
BillboardCollection.prototype.removeAll = function () {
    destroyBillboards(this._billboards);
    this._billboards = [];
    this._billboardsToUpdate = [];
    this._billboardsToUpdateIndex = 0;
    this._billboardsRemoved = false;

    this._createVertexArray = true;
};

function removeBillboards(billboardCollection) {
    if (billboardCollection._billboardsRemoved) {
        billboardCollection._billboardsRemoved = false;

        const newBillboards = [];
        const billboards = billboardCollection._billboards;
        const length = billboards.length;
        for (let i = 0, j = 0; i < length; ++i) {
            const billboard = billboards[i];
            if (defined(billboard)) {
                billboard._index = j++;
                newBillboards.push(billboard);
            }
        }

        billboardCollection._billboards = newBillboards;
    }
}

BillboardCollection.prototype._updateBillboard = function (
    billboard,
    propertyChanged
) {
    if (!billboard._dirty) {
        this._billboardsToUpdate[this._billboardsToUpdateIndex++] = billboard;
    }

    ++this._propertiesChanged[propertyChanged];
};

/**
 * Check whether this collection contains a given billboard.
 *
 * @param {Billboard} [billboard] The billboard to check for.
 * @returns {Boolean} true if this collection contains the billboard, false otherwise.
 *
 * @see BillboardCollection#get
 */
BillboardCollection.prototype.contains = function (billboard) {
    return defined(billboard) && billboard._billboardCollection === this;
};

/**
 * Returns the billboard in the collection at the specified index.  Indices are zero-based
 * and increase as billboards are added.  Removing a billboard shifts all billboards after
 * it to the left, changing their indices.  This function is commonly used with
 * {@link BillboardCollection#length} to iterate over all the billboards
 * in the collection.
 *
 * @param {Number} index The zero-based index of the billboard.
 * @returns {Billboard} The billboard at the specified index.
 *
 * @performance Expected constant time.  If billboards were removed from the collection and
 * {@link BillboardCollection#update} was not called, an implicit <code>O(n)</code>
 * operation is performed.
 *
 * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.
 *
 *
 * @example
 * // Toggle the show property of every billboard in the collection
 * const len = billboards.length;
 * for (let i = 0; i < len; ++i) {
 *   const b = billboards.get(i);
 *   b.show = !b.show;
 * }
 *
 * @see BillboardCollection#length
 */
BillboardCollection.prototype.get = function (index) {
    //>>includeStart('debug', pragmas.debug);
    Check.typeOf.number("index", index);
    //>>includeEnd('debug');

    removeBillboards(this);
    return this._billboards[index];
};

let getIndexBuffer;

function getIndexBufferBatched(context) {
    const sixteenK = 16 * 1024;

    let indexBuffer = context.cache.billboardCollection_indexBufferBatched;
    if (defined(indexBuffer)) {
        return indexBuffer;
    }

    // Subtract 6 because the last index is reserverd for primitive restart.
    // https://www.khronos.org/registry/webgl/specs/latest/2.0/#5.18
    const length = sixteenK * 6 - 6;
    const indices = new Uint16Array(length);
    for (let i = 0, j = 0; i < length; i += 6, j += 4) {
        indices[i] = j;
        indices[i + 1] = j + 1;
        indices[i + 2] = j + 2;

        indices[i + 3] = j + 0;
        indices[i + 4] = j + 2;
        indices[i + 5] = j + 3;
    }

    // PERFORMANCE_IDEA:  Should we reference count billboard collections, and eventually delete this?
    // Is this too much memory to allocate up front?  Should we dynamically grow it?
    indexBuffer = Buffer.createIndexBuffer({
        context: context,
        typedArray: indices,
        usage: BufferUsage.STATIC_DRAW,
        indexDatatype: IndexDatatype.UNSIGNED_SHORT,
    });
    indexBuffer.vertexArrayDestroyable = false;
    context.cache.billboardCollection_indexBufferBatched = indexBuffer;
    return indexBuffer;
}

function getIndexBufferInstanced(context) {
    let indexBuffer = context.cache.billboardCollection_indexBufferInstanced;
    if (defined(indexBuffer)) {
        return indexBuffer;
    }

    indexBuffer = Buffer.createIndexBuffer({
        context: context,
        typedArray: new Uint16Array([0, 1, 2, 0, 2, 3]),
        usage: BufferUsage.STATIC_DRAW,
        indexDatatype: IndexDatatype.UNSIGNED_SHORT,
    });

    indexBuffer.vertexArrayDestroyable = false;
    context.cache.billboardCollection_indexBufferInstanced = indexBuffer;
    return indexBuffer;
}

function getVertexBufferInstanced(context) {
    let vertexBuffer = context.cache.billboardCollection_vertexBufferInstanced;
    if (defined(vertexBuffer)) {
        return vertexBuffer;
    }

    vertexBuffer = Buffer.createVertexBuffer({
        context: context,
        typedArray: new Float32Array([0.0, 0.0, 1.0, 0.0, 1.0, 1.0, 0.0, 1.0]),
        usage: BufferUsage.STATIC_DRAW,
    });

    vertexBuffer.vertexArrayDestroyable = false;
    context.cache.billboardCollection_vertexBufferInstanced = vertexBuffer;
    return vertexBuffer;
}

BillboardCollection.prototype.computeNewBuffersUsage = function () {
    const buffersUsage = this._buffersUsage;
    let usageChanged = false;

    const properties = this._propertiesChanged;
    for (let k = 0; k < NUMBER_OF_PROPERTIES; ++k) {
        const newUsage =
            properties[k] === 0 ? BufferUsage.STATIC_DRAW : BufferUsage.STREAM_DRAW;
        usageChanged = usageChanged || buffersUsage[k] !== newUsage;
        buffersUsage[k] = newUsage;
    }

    return usageChanged;
};

function createVAF(
    context,
    numberOfBillboards,
    buffersUsage,
    instanced,
    batchTable,
    sdf
) {
    const attributes = [
        {
            index: attributeLocations.positionHighAndScale,
            componentsPerAttribute: 4,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[POSITION_INDEX],
        },
        {
            index: attributeLocations.positionLowAndRotation,
            componentsPerAttribute: 4,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[POSITION_INDEX],
        },
        {
            index: attributeLocations.compressedAttribute0,
            componentsPerAttribute: 4,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[PIXEL_OFFSET_INDEX],
        },
        {
            index: attributeLocations.compressedAttribute1,
            componentsPerAttribute: 4,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[TRANSLUCENCY_BY_DISTANCE_INDEX],
        },
        {
            index: attributeLocations.compressedAttribute2,
            componentsPerAttribute: 4,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[COLOR_INDEX],
        },
        {
            index: attributeLocations.eyeOffset,
            componentsPerAttribute: 4,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[EYE_OFFSET_INDEX],
        },
        {
            index: attributeLocations.scaleByDistance,
            componentsPerAttribute: 4,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[SCALE_BY_DISTANCE_INDEX],
        },
        {
            index: attributeLocations.pixelOffsetScaleByDistance,
            componentsPerAttribute: 4,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX],
        },
        {
            index: attributeLocations.compressedAttribute3,
            componentsPerAttribute: 4,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[DISTANCE_DISPLAY_CONDITION_INDEX],
        },
        {
            index: attributeLocations.textureCoordinateBoundsOrLabelTranslate,
            componentsPerAttribute: 4,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[TEXTURE_COORDINATE_BOUNDS],
        },
    ];

    // Instancing requires one non-instanced attribute.
    if (instanced) {
        attributes.push({
            index: attributeLocations.direction,
            componentsPerAttribute: 2,
            componentDatatype: ComponentDatatype.FLOAT,
            vertexBuffer: getVertexBufferInstanced(context),
        });
    }

    if (defined(batchTable)) {
        attributes.push({
            index: attributeLocations.a_batchId,
            componentsPerAttribute: 1,
            componentDatatype: ComponentDatatype.FLOAT,
            bufferUsage: BufferUsage.STATIC_DRAW,
        });
    }

    if (sdf) {
        attributes.push({
            index: attributeLocations.sdf,
            componentsPerAttribute: 2,
            componentDatatype: ComponentDatatype.FLOAT,
            usage: buffersUsage[SDF_INDEX],
        });
    }

    // When instancing is enabled, only one vertex is needed for each billboard.
    const sizeInVertices = instanced
        ? numberOfBillboards
        : 4 * numberOfBillboards;
    return new VertexArrayFacade(context, attributes, sizeInVertices, instanced);
}

///////////////////////////////////////////////////////////////////////////

// Four vertices per billboard.  Each has the same position, etc., but a different screen-space direction vector.

// PERFORMANCE_IDEA:  Save memory if a property is the same for all billboards, use a latched attribute state,
// instead of storing it in a vertex buffer.

const writePositionScratch = new EncodedCartesian3();

function writePositionScaleAndRotation(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    let i;
    const positionHighWriter =
        vafWriters[attributeLocations.positionHighAndScale];
    const positionLowWriter =
        vafWriters[attributeLocations.positionLowAndRotation];
    const position = billboard._getActualPosition();

    if (billboardCollection._mode === SceneMode.SCENE3D) {
        BoundingSphere.expand(
            billboardCollection._baseVolume,
            position,
            billboardCollection._baseVolume
        );
        billboardCollection._boundingVolumeDirty = true;
    }

    EncodedCartesian3.fromCartesian(position, writePositionScratch);
    const scale = billboard.scale;
    const rotation = billboard.rotation;

    if (rotation !== 0.0) {
        billboardCollection._shaderRotation = true;
    }

    billboardCollection._maxScale = Math.max(
        billboardCollection._maxScale,
        scale
    );

    const high = writePositionScratch.high;
    const low = writePositionScratch.low;

    if (billboardCollection._instanced) {
        i = billboard._index;
        positionHighWriter(i, high.x, high.y, high.z, scale);
        positionLowWriter(i, low.x, low.y, low.z, rotation);
    } else {
        i = billboard._index * 4;
        positionHighWriter(i + 0, high.x, high.y, high.z, scale);
        positionHighWriter(i + 1, high.x, high.y, high.z, scale);
        positionHighWriter(i + 2, high.x, high.y, high.z, scale);
        positionHighWriter(i + 3, high.x, high.y, high.z, scale);

        positionLowWriter(i + 0, low.x, low.y, low.z, rotation);
        positionLowWriter(i + 1, low.x, low.y, low.z, rotation);
        positionLowWriter(i + 2, low.x, low.y, low.z, rotation);
        positionLowWriter(i + 3, low.x, low.y, low.z, rotation);
    }
}

const scratchCartesian2 = new Cartesian2();

const UPPER_BOUND = 32768.0; // 2^15

const LEFT_SHIFT16 = 65536.0; // 2^16
const LEFT_SHIFT12 = 4096.0; // 2^12
const LEFT_SHIFT8 = 256.0; // 2^8
const LEFT_SHIFT7 = 128.0;
const LEFT_SHIFT5 = 32.0;
const LEFT_SHIFT3 = 8.0;
const LEFT_SHIFT2 = 4.0;

const RIGHT_SHIFT8 = 1.0 / 256.0;

const LOWER_LEFT = 0.0;
const LOWER_RIGHT = 2.0;
const UPPER_RIGHT = 3.0;
const UPPER_LEFT = 1.0;

function writeCompressedAttrib0(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    let i;
    const writer = vafWriters[attributeLocations.compressedAttribute0];
    const pixelOffset = billboard.pixelOffset;
    const pixelOffsetX = pixelOffset.x;
    const pixelOffsetY = pixelOffset.y;

    const translate = billboard._translate;
    const translateX = translate.x;
    const translateY = translate.y;

    billboardCollection._maxPixelOffset = Math.max(
        billboardCollection._maxPixelOffset,
        Math.abs(pixelOffsetX + translateX),
        Math.abs(-pixelOffsetY + translateY)
    );

    const horizontalOrigin = billboard.horizontalOrigin;
    let verticalOrigin = billboard._verticalOrigin;
    let show = billboard.show && billboard.clusterShow;

    // If the color alpha is zero, do not show this billboard.  This lets us avoid providing
    // color during the pick pass and also eliminates a discard in the fragment shader.
    if (billboard.color.alpha === 0.0) {
        show = false;
    }

    // Raw billboards don't distinguish between BASELINE and BOTTOM, only LabelCollection does that.
    if (verticalOrigin === VerticalOrigin.BASELINE) {
        verticalOrigin = VerticalOrigin.BOTTOM;
    }

    billboardCollection._allHorizontalCenter =
        billboardCollection._allHorizontalCenter &&
        horizontalOrigin === HorizontalOrigin.CENTER;
    billboardCollection._allVerticalCenter =
        billboardCollection._allVerticalCenter &&
        verticalOrigin === VerticalOrigin.CENTER;

    let bottomLeftX = 0;
    let bottomLeftY = 0;
    let width = 0;
    let height = 0;
    const index = billboard._imageIndex;
    if (index !== -1) {
        const imageRectangle = textureAtlasCoordinates[index];

        //>>includeStart('debug', pragmas.debug);
        if (!defined(imageRectangle)) {
            throw new DeveloperError(`Invalid billboard image index: ${index}`);
        }
        //>>includeEnd('debug');

        bottomLeftX = imageRectangle.x;
        bottomLeftY = imageRectangle.y;
        width = imageRectangle.width;
        height = imageRectangle.height;
    }
    const topRightX = bottomLeftX + width;
    const topRightY = bottomLeftY + height;

    let compressed0 =
        Math.floor(
            CesiumMath.clamp(pixelOffsetX, -UPPER_BOUND, UPPER_BOUND) + UPPER_BOUND
        ) * LEFT_SHIFT7;
    compressed0 += (horizontalOrigin + 1.0) * LEFT_SHIFT5;
    compressed0 += (verticalOrigin + 1.0) * LEFT_SHIFT3;
    compressed0 += (show ? 1.0 : 0.0) * LEFT_SHIFT2;

    let compressed1 =
        Math.floor(
            CesiumMath.clamp(pixelOffsetY, -UPPER_BOUND, UPPER_BOUND) + UPPER_BOUND
        ) * LEFT_SHIFT8;
    let compressed2 =
        Math.floor(
            CesiumMath.clamp(translateX, -UPPER_BOUND, UPPER_BOUND) + UPPER_BOUND
        ) * LEFT_SHIFT8;

    const tempTanslateY =
        (CesiumMath.clamp(translateY, -UPPER_BOUND, UPPER_BOUND) + UPPER_BOUND) *
        RIGHT_SHIFT8;
    const upperTranslateY = Math.floor(tempTanslateY);
    const lowerTranslateY = Math.floor(
        (tempTanslateY - upperTranslateY) * LEFT_SHIFT8
    );

    compressed1 += upperTranslateY;
    compressed2 += lowerTranslateY;

    scratchCartesian2.x = bottomLeftX;
    scratchCartesian2.y = bottomLeftY;
    const compressedTexCoordsLL = AttributeCompression.compressTextureCoordinates(
        scratchCartesian2
    );
    scratchCartesian2.x = topRightX;
    const compressedTexCoordsLR = AttributeCompression.compressTextureCoordinates(
        scratchCartesian2
    );
    scratchCartesian2.y = topRightY;
    const compressedTexCoordsUR = AttributeCompression.compressTextureCoordinates(
        scratchCartesian2
    );
    scratchCartesian2.x = bottomLeftX;
    const compressedTexCoordsUL = AttributeCompression.compressTextureCoordinates(
        scratchCartesian2
    );

    if (billboardCollection._instanced) {
        i = billboard._index;
        writer(i, compressed0, compressed1, compressed2, compressedTexCoordsLL);
    } else {
        i = billboard._index * 4;
        writer(
            i + 0,
            compressed0 + LOWER_LEFT,
            compressed1,
            compressed2,
            compressedTexCoordsLL
        );
        writer(
            i + 1,
            compressed0 + LOWER_RIGHT,
            compressed1,
            compressed2,
            compressedTexCoordsLR
        );
        writer(
            i + 2,
            compressed0 + UPPER_RIGHT,
            compressed1,
            compressed2,
            compressedTexCoordsUR
        );
        writer(
            i + 3,
            compressed0 + UPPER_LEFT,
            compressed1,
            compressed2,
            compressedTexCoordsUL
        );
    }
}

function writeCompressedAttrib1(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    let i;
    const writer = vafWriters[attributeLocations.compressedAttribute1];
    const alignedAxis = billboard.alignedAxis;
    if (!Cartesian3.equals(alignedAxis, Cartesian3.ZERO)) {
        billboardCollection._shaderAlignedAxis = true;
    }

    let near = 0.0;
    let nearValue = 1.0;
    let far = 1.0;
    let farValue = 1.0;

    const translucency = billboard.translucencyByDistance;
    if (defined(translucency)) {
        near = translucency.near;
        nearValue = translucency.nearValue;
        far = translucency.far;
        farValue = translucency.farValue;

        if (nearValue !== 1.0 || farValue !== 1.0) {
            // translucency by distance calculation in shader need not be enabled
            // until a billboard with near and far !== 1.0 is found
            billboardCollection._shaderTranslucencyByDistance = true;
        }
    }

    let width = 0;
    const index = billboard._imageIndex;
    if (index !== -1) {
        const imageRectangle = textureAtlasCoordinates[index];

        //>>includeStart('debug', pragmas.debug);
        if (!defined(imageRectangle)) {
            throw new DeveloperError(`Invalid billboard image index: ${index}`);
        }
        //>>includeEnd('debug');

        width = imageRectangle.width;
    }

    const textureWidth = billboardCollection._textureAtlas.texture.width;
    const imageWidth = Math.round(
        defaultValue(billboard.width, textureWidth * width)
    );
    billboardCollection._maxSize = Math.max(
        billboardCollection._maxSize,
        imageWidth
    );

    let compressed0 = CesiumMath.clamp(imageWidth, 0.0, LEFT_SHIFT16);
    let compressed1 = 0.0;

    if (
        Math.abs(Cartesian3.magnitudeSquared(alignedAxis) - 1.0) <
        CesiumMath.EPSILON6
    ) {
        compressed1 = AttributeCompression.octEncodeFloat(alignedAxis);
    }

    nearValue = CesiumMath.clamp(nearValue, 0.0, 1.0);
    nearValue = nearValue === 1.0 ? 255.0 : (nearValue * 255.0) | 0;
    compressed0 = compressed0 * LEFT_SHIFT8 + nearValue;

    farValue = CesiumMath.clamp(farValue, 0.0, 1.0);
    farValue = farValue === 1.0 ? 255.0 : (farValue * 255.0) | 0;
    compressed1 = compressed1 * LEFT_SHIFT8 + farValue;

    if (billboardCollection._instanced) {
        i = billboard._index;
        writer(i, compressed0, compressed1, near, far);
    } else {
        i = billboard._index * 4;
        writer(i + 0, compressed0, compressed1, near, far);
        writer(i + 1, compressed0, compressed1, near, far);
        writer(i + 2, compressed0, compressed1, near, far);
        writer(i + 3, compressed0, compressed1, near, far);
    }
}

function writeCompressedAttrib2(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    let i;
    const writer = vafWriters[attributeLocations.compressedAttribute2];
    const color = billboard.color;
    const pickColor = !defined(billboardCollection._batchTable)
        ? billboard.getPickId(frameState.context).color
        : Color.WHITE;
    const sizeInMeters = billboard.sizeInMeters ? 1.0 : 0.0;
    const validAlignedAxis =
        Math.abs(Cartesian3.magnitudeSquared(billboard.alignedAxis) - 1.0) <
        CesiumMath.EPSILON6
            ? 1.0
            : 0.0;

    billboardCollection._allSizedInMeters =
        billboardCollection._allSizedInMeters && sizeInMeters === 1.0;

    let height = 0;
    const index = billboard._imageIndex;
    if (index !== -1) {
        const imageRectangle = textureAtlasCoordinates[index];

        //>>includeStart('debug', pragmas.debug);
        if (!defined(imageRectangle)) {
            throw new DeveloperError(`Invalid billboard image index: ${index}`);
        }
        //>>includeEnd('debug');

        height = imageRectangle.height;
    }

    const dimensions = billboardCollection._textureAtlas.texture.dimensions;
    const imageHeight = Math.round(
        defaultValue(billboard.height, dimensions.y * height)
    );
    billboardCollection._maxSize = Math.max(
        billboardCollection._maxSize,
        imageHeight
    );
    let labelHorizontalOrigin = defaultValue(
        billboard._labelHorizontalOrigin,
        -2
    );
    labelHorizontalOrigin += 2;
    const compressed3 = imageHeight * LEFT_SHIFT2 + labelHorizontalOrigin;

    let red = Color.floatToByte(color.red);
    let green = Color.floatToByte(color.green);
    let blue = Color.floatToByte(color.blue);
    const compressed0 = red * LEFT_SHIFT16 + green * LEFT_SHIFT8 + blue;

    red = Color.floatToByte(pickColor.red);
    green = Color.floatToByte(pickColor.green);
    blue = Color.floatToByte(pickColor.blue);
    const compressed1 = red * LEFT_SHIFT16 + green * LEFT_SHIFT8 + blue;

    let compressed2 =
        Color.floatToByte(color.alpha) * LEFT_SHIFT16 +
        Color.floatToByte(pickColor.alpha) * LEFT_SHIFT8;
    compressed2 += sizeInMeters * 2.0 + validAlignedAxis;

    if (billboardCollection._instanced) {
        i = billboard._index;
        writer(i, compressed0, compressed1, compressed2, compressed3);
    } else {
        i = billboard._index * 4;
        writer(i + 0, compressed0, compressed1, compressed2, compressed3);
        writer(i + 1, compressed0, compressed1, compressed2, compressed3);
        writer(i + 2, compressed0, compressed1, compressed2, compressed3);
        writer(i + 3, compressed0, compressed1, compressed2, compressed3);
    }
}

function writeEyeOffset(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    let i;
    const writer = vafWriters[attributeLocations.eyeOffset];
    const eyeOffset = billboard.eyeOffset;

    // For billboards that are clamped to ground, move it slightly closer to the camera
    let eyeOffsetZ = eyeOffset.z;
    if (billboard._heightReference !== HeightReference.NONE) {
        eyeOffsetZ *= 1.005;
    }
    billboardCollection._maxEyeOffset = Math.max(
        billboardCollection._maxEyeOffset,
        Math.abs(eyeOffset.x),
        Math.abs(eyeOffset.y),
        Math.abs(eyeOffsetZ)
    );

    if (billboardCollection._instanced) {
        let width = 0;
        let height = 0;
        const index = billboard._imageIndex;
        if (index !== -1) {
            const imageRectangle = textureAtlasCoordinates[index];

            //>>includeStart('debug', pragmas.debug);
            if (!defined(imageRectangle)) {
                throw new DeveloperError(`Invalid billboard image index: ${index}`);
            }
            //>>includeEnd('debug');

            width = imageRectangle.width;
            height = imageRectangle.height;
        }

        scratchCartesian2.x = width;
        scratchCartesian2.y = height;
        const compressedTexCoordsRange = AttributeCompression.compressTextureCoordinates(
            scratchCartesian2
        );

        i = billboard._index;
        writer(i, eyeOffset.x, eyeOffset.y, eyeOffsetZ, compressedTexCoordsRange);
    } else {
        i = billboard._index * 4;
        writer(i + 0, eyeOffset.x, eyeOffset.y, eyeOffsetZ, 0.0);
        writer(i + 1, eyeOffset.x, eyeOffset.y, eyeOffsetZ, 0.0);
        writer(i + 2, eyeOffset.x, eyeOffset.y, eyeOffsetZ, 0.0);
        writer(i + 3, eyeOffset.x, eyeOffset.y, eyeOffsetZ, 0.0);
    }
}

function writeScaleByDistance(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    let i;
    const writer = vafWriters[attributeLocations.scaleByDistance];
    let near = 0.0;
    let nearValue = 1.0;
    let far = 1.0;
    let farValue = 1.0;

    const scale = billboard.scaleByDistance;
    if (defined(scale)) {
        near = scale.near;
        nearValue = scale.nearValue;
        far = scale.far;
        farValue = scale.farValue;

        if (nearValue !== 1.0 || farValue !== 1.0) {
            // scale by distance calculation in shader need not be enabled
            // until a billboard with near and far !== 1.0 is found
            billboardCollection._shaderScaleByDistance = true;
        }
    }

    if (billboardCollection._instanced) {
        i = billboard._index;
        writer(i, near, nearValue, far, farValue);
    } else {
        i = billboard._index * 4;
        writer(i + 0, near, nearValue, far, farValue);
        writer(i + 1, near, nearValue, far, farValue);
        writer(i + 2, near, nearValue, far, farValue);
        writer(i + 3, near, nearValue, far, farValue);
    }
}

function writePixelOffsetScaleByDistance(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    let i;
    const writer = vafWriters[attributeLocations.pixelOffsetScaleByDistance];
    let near = 0.0;
    let nearValue = 1.0;
    let far = 1.0;
    let farValue = 1.0;

    const pixelOffsetScale = billboard.pixelOffsetScaleByDistance;
    if (defined(pixelOffsetScale)) {
        near = pixelOffsetScale.near;
        nearValue = pixelOffsetScale.nearValue;
        far = pixelOffsetScale.far;
        farValue = pixelOffsetScale.farValue;

        if (nearValue !== 1.0 || farValue !== 1.0) {
            // pixelOffsetScale by distance calculation in shader need not be enabled
            // until a billboard with near and far !== 1.0 is found
            billboardCollection._shaderPixelOffsetScaleByDistance = true;
        }
    }

    if (billboardCollection._instanced) {
        i = billboard._index;
        writer(i, near, nearValue, far, farValue);
    } else {
        i = billboard._index * 4;
        writer(i + 0, near, nearValue, far, farValue);
        writer(i + 1, near, nearValue, far, farValue);
        writer(i + 2, near, nearValue, far, farValue);
        writer(i + 3, near, nearValue, far, farValue);
    }
}

function writeCompressedAttribute3(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    let i;
    const writer = vafWriters[attributeLocations.compressedAttribute3];
    let near = 0.0;
    let far = Number.MAX_VALUE;

    const distanceDisplayCondition = billboard.distanceDisplayCondition;
    if (defined(distanceDisplayCondition)) {
        near = distanceDisplayCondition.near;
        far = distanceDisplayCondition.far;

        near *= near;
        far *= far;

        billboardCollection._shaderDistanceDisplayCondition = true;
    }

    let disableDepthTestDistance = billboard.disableDepthTestDistance;
    const clampToGround =
        billboard.heightReference === HeightReference.CLAMP_TO_GROUND &&
        frameState.context.depthTexture;
    if (!defined(disableDepthTestDistance)) {
        disableDepthTestDistance = clampToGround ? 5000.0 : 0.0;
    }

    disableDepthTestDistance *= disableDepthTestDistance;
    if (clampToGround || disableDepthTestDistance > 0.0) {
        billboardCollection._shaderDisableDepthDistance = true;
        if (disableDepthTestDistance === Number.POSITIVE_INFINITY) {
            disableDepthTestDistance = -1.0;
        }
    }

    let imageHeight;
    let imageWidth;

    if (!defined(billboard._labelDimensions)) {
        let height = 0;
        let width = 0;
        const index = billboard._imageIndex;
        if (index !== -1) {
            const imageRectangle = textureAtlasCoordinates[index];

            //>>includeStart('debug', pragmas.debug);
            if (!defined(imageRectangle)) {
                throw new DeveloperError(`Invalid billboard image index: ${index}`);
            }
            //>>includeEnd('debug');

            height = imageRectangle.height;
            width = imageRectangle.width;
        }

        imageHeight = Math.round(
            defaultValue(
                billboard.height,
                billboardCollection._textureAtlas.texture.dimensions.y * height
            )
        );

        const textureWidth = billboardCollection._textureAtlas.texture.width;
        imageWidth = Math.round(
            defaultValue(billboard.width, textureWidth * width)
        );
    } else {
        imageWidth = billboard._labelDimensions.x;
        imageHeight = billboard._labelDimensions.y;
    }

    const w = Math.floor(CesiumMath.clamp(imageWidth, 0.0, LEFT_SHIFT12));
    const h = Math.floor(CesiumMath.clamp(imageHeight, 0.0, LEFT_SHIFT12));
    const dimensions = w * LEFT_SHIFT12 + h;

    if (billboardCollection._instanced) {
        i = billboard._index;
        writer(i, near, far, disableDepthTestDistance, dimensions);
    } else {
        i = billboard._index * 4;
        writer(i + 0, near, far, disableDepthTestDistance, dimensions);
        writer(i + 1, near, far, disableDepthTestDistance, dimensions);
        writer(i + 2, near, far, disableDepthTestDistance, dimensions);
        writer(i + 3, near, far, disableDepthTestDistance, dimensions);
    }
}

function writeTextureCoordinateBoundsOrLabelTranslate(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    if (billboard.heightReference === HeightReference.CLAMP_TO_GROUND) {
        const scene = billboardCollection._scene;
        const context = frameState.context;
        const globeTranslucent = frameState.globeTranslucencyState.translucent;
        const depthTestAgainstTerrain =
            defined(scene.globe) && scene.globe.depthTestAgainstTerrain;

        // Only do manual depth test if the globe is opaque and writes depth
        billboardCollection._shaderClampToGround =
            context.depthTexture && !globeTranslucent && depthTestAgainstTerrain;
    }
    let i;
    const writer =
        vafWriters[attributeLocations.textureCoordinateBoundsOrLabelTranslate];

    if (ContextLimits.maximumVertexTextureImageUnits > 0) {
        //write _labelTranslate, used by depth testing in the vertex shader
        let translateX = 0;
        let translateY = 0;
        if (defined(billboard._labelTranslate)) {
            translateX = billboard._labelTranslate.x;
            translateY = billboard._labelTranslate.y;
        }
        if (billboardCollection._instanced) {
            i = billboard._index;
            writer(i, translateX, translateY, 0.0, 0.0);
        } else {
            i = billboard._index * 4;
            writer(i + 0, translateX, translateY, 0.0, 0.0);
            writer(i + 1, translateX, translateY, 0.0, 0.0);
            writer(i + 2, translateX, translateY, 0.0, 0.0);
            writer(i + 3, translateX, translateY, 0.0, 0.0);
        }
        return;
    }

    //write texture coordinate bounds, used by depth testing in fragment shader
    let minX = 0;
    let minY = 0;
    let width = 0;
    let height = 0;
    const index = billboard._imageIndex;
    if (index !== -1) {
        const imageRectangle = textureAtlasCoordinates[index];

        //>>includeStart('debug', pragmas.debug);
        if (!defined(imageRectangle)) {
            throw new DeveloperError(`Invalid billboard image index: ${index}`);
        }
        //>>includeEnd('debug');

        minX = imageRectangle.x;
        minY = imageRectangle.y;
        width = imageRectangle.width;
        height = imageRectangle.height;
    }
    const maxX = minX + width;
    const maxY = minY + height;

    if (billboardCollection._instanced) {
        i = billboard._index;
        writer(i, minX, minY, maxX, maxY);
    } else {
        i = billboard._index * 4;
        writer(i + 0, minX, minY, maxX, maxY);
        writer(i + 1, minX, minY, maxX, maxY);
        writer(i + 2, minX, minY, maxX, maxY);
        writer(i + 3, minX, minY, maxX, maxY);
    }
}

function writeBatchId(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    if (!defined(billboardCollection._batchTable)) {
        return;
    }

    const writer = vafWriters[attributeLocations.a_batchId];
    const id = billboard._batchIndex;

    let i;
    if (billboardCollection._instanced) {
        i = billboard._index;
        writer(i, id);
    } else {
        i = billboard._index * 4;
        writer(i + 0, id);
        writer(i + 1, id);
        writer(i + 2, id);
        writer(i + 3, id);
    }
}

function writeSDF(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    if (!billboardCollection._sdf) {
        return;
    }

    let i;
    const writer = vafWriters[attributeLocations.sdf];

    const outlineColor = billboard.outlineColor;
    const outlineWidth = billboard.outlineWidth;

    const red = Color.floatToByte(outlineColor.red);
    const green = Color.floatToByte(outlineColor.green);
    const blue = Color.floatToByte(outlineColor.blue);
    const compressed0 = red * LEFT_SHIFT16 + green * LEFT_SHIFT8 + blue;

    // Compute the relative outline distance
    const outlineDistance = outlineWidth / SDFSettings.RADIUS;
    const compressed1 =
        Color.floatToByte(outlineColor.alpha) * LEFT_SHIFT16 +
        Color.floatToByte(outlineDistance) * LEFT_SHIFT8;

    if (billboardCollection._instanced) {
        i = billboard._index;
        writer(i, compressed0, compressed1);
    } else {
        i = billboard._index * 4;
        writer(i + 0, compressed0 + LOWER_LEFT, compressed1);
        writer(i + 1, compressed0 + LOWER_RIGHT, compressed1);
        writer(i + 2, compressed0 + UPPER_RIGHT, compressed1);
        writer(i + 3, compressed0 + UPPER_LEFT, compressed1);
    }
}

function writeBillboard(
    billboardCollection,
    frameState,
    textureAtlasCoordinates,
    vafWriters,
    billboard
) {
    writePositionScaleAndRotation(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
    writeCompressedAttrib0(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
    writeCompressedAttrib1(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
    writeCompressedAttrib2(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
    writeEyeOffset(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
    writeScaleByDistance(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
    writePixelOffsetScaleByDistance(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
    writeCompressedAttribute3(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
    writeTextureCoordinateBoundsOrLabelTranslate(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
    writeBatchId(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
    writeSDF(
        billboardCollection,
        frameState,
        textureAtlasCoordinates,
        vafWriters,
        billboard
    );
}

function recomputeActualPositions(
    billboardCollection,
    billboards,
    length,
    frameState,
    modelMatrix,
    recomputeBoundingVolume
) {
    let boundingVolume;
    if (frameState.mode === SceneMode.SCENE3D) {
        boundingVolume = billboardCollection._baseVolume;
        billboardCollection._boundingVolumeDirty = true;
    } else {
        boundingVolume = billboardCollection._baseVolume2D;
    }

    const positions = [];
    for (let i = 0; i < length; ++i) {
        const billboard = billboards[i];
        const position = billboard.position;
        const actualPosition = Billboard._computeActualPosition(
            billboard,
            position,
            frameState,
            modelMatrix
        );
        if (defined(actualPosition)) {
            billboard._setActualPosition(actualPosition);

            if (recomputeBoundingVolume) {
                positions.push(actualPosition);
            } else {
                BoundingSphere.expand(boundingVolume, actualPosition, boundingVolume);
            }
        }
    }

    if (recomputeBoundingVolume) {
        BoundingSphere.fromPoints(positions, boundingVolume);
    }
}

function updateMode(billboardCollection, frameState) {
    const mode = frameState.mode;

    const billboards = billboardCollection._billboards;
    const billboardsToUpdate = billboardCollection._billboardsToUpdate;
    const modelMatrix = billboardCollection._modelMatrix;

    if (
        billboardCollection._createVertexArray ||
        billboardCollection._mode !== mode ||
        (mode !== SceneMode.SCENE3D &&
            !Matrix4.equals(modelMatrix, billboardCollection.modelMatrix))
    ) {
        billboardCollection._mode = mode;
        Matrix4.clone(billboardCollection.modelMatrix, modelMatrix);
        billboardCollection._createVertexArray = true;

        if (
            mode === SceneMode.SCENE3D ||
            mode === SceneMode.SCENE2D ||
            mode === SceneMode.COLUMBUS_VIEW
        ) {
            recomputeActualPositions(
                billboardCollection,
                billboards,
                billboards.length,
                frameState,
                modelMatrix,
                true
            );
        }
    } else if (mode === SceneMode.MORPHING) {
        recomputeActualPositions(
            billboardCollection,
            billboards,
            billboards.length,
            frameState,
            modelMatrix,
            true
        );
    } else if (mode === SceneMode.SCENE2D || mode === SceneMode.COLUMBUS_VIEW) {
        recomputeActualPositions(
            billboardCollection,
            billboardsToUpdate,
            billboardCollection._billboardsToUpdateIndex,
            frameState,
            modelMatrix,
            false
        );
    }
}

function updateBoundingVolume(collection, frameState, boundingVolume) {
    let pixelScale = 1.0;
    if (!collection._allSizedInMeters || collection._maxPixelOffset !== 0.0) {
        pixelScale = frameState.camera.getPixelSize(
            boundingVolume,
            frameState.context.drawingBufferWidth,
            frameState.context.drawingBufferHeight
        );
    }

    let size = pixelScale * collection._maxScale * collection._maxSize * 2.0;
    if (collection._allHorizontalCenter && collection._allVerticalCenter) {
        size *= 0.5;
    }

    const offset =
        pixelScale * collection._maxPixelOffset + collection._maxEyeOffset;
    boundingVolume.radius += size + offset;
}

function createDebugCommand(billboardCollection, context) {
    const fs =
        "uniform sampler2D billboard_texture; \n" +
        "varying vec2 v_textureCoordinates; \n" +
        "void main() \n" +
        "{ \n" +
        "    gl_FragColor = texture2D(billboard_texture, v_textureCoordinates); \n" +
        "} \n";

    const drawCommand = context.createViewportQuadCommand(fs, {
        uniformMap: {
            billboard_texture: function () {
                return billboardCollection._textureAtlas.texture;
            },
        },
    });
    drawCommand.pass = Pass.OVERLAY;
    return drawCommand;
}

const scratchWriterArray = [];

/**
 * Called when {@link Viewer} or {@link CesiumWidget} render the scene to
 * get the draw commands needed to render this primitive.
 * <p>
 * Do not call this function directly.  This is documented just to
 * list the exceptions that may be propagated when the scene is rendered:
 * </p>
 *
 * @exception {RuntimeError} image with id must be in the atlas.
 */
BillboardCollection.prototype.update = function (frameState) {
    removeBillboards(this);

    if (!this.show) {
        return;
    }

    let billboards = this._billboards;
    let billboardsLength = billboards.length;

    const context = frameState.context;
    this._instanced = context.instancedArrays;
    attributeLocations = this._instanced
        ? attributeLocationsInstanced
        : attributeLocationsBatched;
    getIndexBuffer = this._instanced
        ? getIndexBufferInstanced
        : getIndexBufferBatched;

    let textureAtlas = this._textureAtlas;
    if (!defined(textureAtlas)) {
        textureAtlas = this._textureAtlas = new TextureAtlas({
            context: context,
        });

        for (let ii = 0; ii < billboardsLength; ++ii) {
            billboards[ii]._loadImage();
        }
    }

    const textureAtlasCoordinates = textureAtlas.textureCoordinates;
    if (textureAtlasCoordinates.length === 0) {
        // Can't write billboard vertices until we have texture coordinates
        // provided by a texture atlas
        return;
    }

    updateMode(this, frameState);

    billboards = this._billboards;
    billboardsLength = billboards.length;
    const billboardsToUpdate = this._billboardsToUpdate;
    const billboardsToUpdateLength = this._billboardsToUpdateIndex;

    const properties = this._propertiesChanged;

    const textureAtlasGUID = textureAtlas.guid;
    const createVertexArray =
        this._createVertexArray || this._textureAtlasGUID !== textureAtlasGUID;
    this._textureAtlasGUID = textureAtlasGUID;

    let vafWriters;
    const pass = frameState.passes;
    const picking = pass.pick;

    // PERFORMANCE_IDEA: Round robin multiple buffers.
    if (createVertexArray || (!picking && this.computeNewBuffersUsage())) {
        this._createVertexArray = false;

        for (let k = 0; k < NUMBER_OF_PROPERTIES; ++k) {
            properties[k] = 0;
        }

        this._vaf = this._vaf && this._vaf.destroy();

        if (billboardsLength > 0) {
            // PERFORMANCE_IDEA:  Instead of creating a new one, resize like std::vector.
            this._vaf = createVAF(
                context,
                billboardsLength,
                this._buffersUsage,
                this._instanced,
                this._batchTable,
                this._sdf
            );
            vafWriters = this._vaf.writers;

            // Rewrite entire buffer if billboards were added or removed.
            for (let i = 0; i < billboardsLength; ++i) {
                const billboard = this._billboards[i];
                billboard._dirty = false; // In case it needed an update.
                writeBillboard(
                    this,
                    frameState,
                    textureAtlasCoordinates,
                    vafWriters,
                    billboard
                );
            }

            // Different billboard collections share the same index buffer.
            this._vaf.commit(getIndexBuffer(context));
        }

        this._billboardsToUpdateIndex = 0;
    } else if (billboardsToUpdateLength > 0) {
        // Billboards were modified, but none were added or removed.
        const writers = scratchWriterArray;
        writers.length = 0;

        if (
            properties[POSITION_INDEX] ||
            properties[ROTATION_INDEX] ||
            properties[SCALE_INDEX]
        ) {
            writers.push(writePositionScaleAndRotation);
        }

        if (
            properties[IMAGE_INDEX_INDEX] ||
            properties[PIXEL_OFFSET_INDEX] ||
            properties[HORIZONTAL_ORIGIN_INDEX] ||
            properties[VERTICAL_ORIGIN_INDEX] ||
            properties[SHOW_INDEX]
        ) {
            writers.push(writeCompressedAttrib0);
            if (this._instanced) {
                writers.push(writeEyeOffset);
            }
        }

        if (
            properties[IMAGE_INDEX_INDEX] ||
            properties[ALIGNED_AXIS_INDEX] ||
            properties[TRANSLUCENCY_BY_DISTANCE_INDEX]
        ) {
            writers.push(writeCompressedAttrib1);
            writers.push(writeCompressedAttrib2);
        }

        if (properties[IMAGE_INDEX_INDEX] || properties[COLOR_INDEX]) {
            writers.push(writeCompressedAttrib2);
        }

        if (properties[EYE_OFFSET_INDEX]) {
            writers.push(writeEyeOffset);
        }

        if (properties[SCALE_BY_DISTANCE_INDEX]) {
            writers.push(writeScaleByDistance);
        }

        if (properties[PIXEL_OFFSET_SCALE_BY_DISTANCE_INDEX]) {
            writers.push(writePixelOffsetScaleByDistance);
        }

        if (
            properties[DISTANCE_DISPLAY_CONDITION_INDEX] ||
            properties[DISABLE_DEPTH_DISTANCE] ||
            properties[IMAGE_INDEX_INDEX] ||
            properties[POSITION_INDEX]
        ) {
            writers.push(writeCompressedAttribute3);
        }

        if (properties[IMAGE_INDEX_INDEX] || properties[POSITION_INDEX]) {
            writers.push(writeTextureCoordinateBoundsOrLabelTranslate);
        }

        if (properties[SDF_INDEX]) {
            writers.push(writeSDF);
        }

        const numWriters = writers.length;
        vafWriters = this._vaf.writers;

        if (billboardsToUpdateLength / billboardsLength > 0.1) {
            // If more than 10% of billboard change, rewrite the entire buffer.

            // PERFORMANCE_IDEA:  I totally made up 10% :).

            for (let m = 0; m < billboardsToUpdateLength; ++m) {
                const b = billboardsToUpdate[m];
                b._dirty = false;

                for (let n = 0; n < numWriters; ++n) {
                    writers[n](this, frameState, textureAtlasCoordinates, vafWriters, b);
                }
            }
            this._vaf.commit(getIndexBuffer(context));
        } else {
            for (let h = 0; h < billboardsToUpdateLength; ++h) {
                const bb = billboardsToUpdate[h];
                bb._dirty = false;

                for (let o = 0; o < numWriters; ++o) {
                    writers[o](this, frameState, textureAtlasCoordinates, vafWriters, bb);
                }

                if (this._instanced) {
                    this._vaf.subCommit(bb._index, 1);
                } else {
                    this._vaf.subCommit(bb._index * 4, 4);
                }
            }
            this._vaf.endSubCommits();
        }

        this._billboardsToUpdateIndex = 0;
    }

    // If the number of total billboards ever shrinks considerably
    // Truncate billboardsToUpdate so that we free memory that we're
    // not going to be using.
    if (billboardsToUpdateLength > billboardsLength * 1.5) {
        billboardsToUpdate.length = billboardsLength;
    }

    if (!defined(this._vaf) || !defined(this._vaf.va)) {
        return;
    }

    if (this._boundingVolumeDirty) {
        this._boundingVolumeDirty = false;
        BoundingSphere.transform(
            this._baseVolume,
            this.modelMatrix,
            this._baseVolumeWC
        );
    }

    let boundingVolume;
    let modelMatrix = Matrix4.IDENTITY;
    if (frameState.mode === SceneMode.SCENE3D) {
        modelMatrix = this.modelMatrix;
        boundingVolume = BoundingSphere.clone(
            this._baseVolumeWC,
            this._boundingVolume
        );
    } else {
        boundingVolume = BoundingSphere.clone(
            this._baseVolume2D,
            this._boundingVolume
        );
    }
    updateBoundingVolume(this, frameState, boundingVolume);

    const blendOptionChanged = this._blendOption !== this.blendOption;
    this._blendOption = this.blendOption;

    if (blendOptionChanged) {
        if (
            this._blendOption === BlendOption.OPAQUE ||
            this._blendOption === BlendOption.OPAQUE_AND_TRANSLUCENT
        ) {
            this._rsOpaque = RenderState.fromCache({
                depthTest: {
                    enabled: true,
                    func: WebGLConstants.LESS,
                },
                depthMask: true,
            });
        } else {
            this._rsOpaque = undefined;
        }

        // If OPAQUE_AND_TRANSLUCENT is in use, only the opaque pass gets the benefit of the depth buffer,
        // not the translucent pass.  Otherwise, if the TRANSLUCENT pass is on its own, it turns on
        // a depthMask in lieu of full depth sorting (because it has opaque-ish fragments that look bad in OIT).
        // When the TRANSLUCENT depth mask is in use, label backgrounds require the depth func to be LEQUAL.
        const useTranslucentDepthMask =
            this._blendOption === BlendOption.TRANSLUCENT;

        if (
            this._blendOption === BlendOption.TRANSLUCENT ||
            this._blendOption === BlendOption.OPAQUE_AND_TRANSLUCENT
        ) {
            this._rsTranslucent = RenderState.fromCache({
                depthTest: {
                    enabled: true,
                    func: useTranslucentDepthMask
                        ? WebGLConstants.LEQUAL
                        : WebGLConstants.LESS,
                },
                depthMask: useTranslucentDepthMask,
                blending: BlendingState.ALPHA_BLEND,
            });
        } else {
            this._rsTranslucent = undefined;
        }
    }

    this._shaderDisableDepthDistance =
        this._shaderDisableDepthDistance ||
        frameState.minimumDisableDepthTestDistance !== 0.0;

    let vsSource;
    let fsSource;
    let vs;
    let fs;
    let vertDefines;

    const supportVSTextureReads =
        ContextLimits.maximumVertexTextureImageUnits > 0;

    if (
        blendOptionChanged ||
        this._shaderRotation !== this._compiledShaderRotation ||
        this._shaderAlignedAxis !== this._compiledShaderAlignedAxis ||
        this._shaderScaleByDistance !== this._compiledShaderScaleByDistance ||
        this._shaderTranslucencyByDistance !==
        this._compiledShaderTranslucencyByDistance ||
        this._shaderPixelOffsetScaleByDistance !==
        this._compiledShaderPixelOffsetScaleByDistance ||
        this._shaderDistanceDisplayCondition !==
        this._compiledShaderDistanceDisplayCondition ||
        this._shaderDisableDepthDistance !==
        this._compiledShaderDisableDepthDistance ||
        this._shaderClampToGround !== this._compiledShaderClampToGround ||
        this._sdf !== this._compiledSDF
    ) {
        vsSource = BillboardCollectionVS;
        fsSource = BillboardCollectionFS;

        vertDefines = [];
        if (defined(this._batchTable)) {
            vertDefines.push("VECTOR_TILE");
            vsSource = this._batchTable.getVertexShaderCallback(
                false,
                "a_batchId",
                undefined
            )(vsSource);
            fsSource = this._batchTable.getFragmentShaderCallback(
                false,
                undefined
            )(fsSource);
        }

        vs = new ShaderSource({
            defines: vertDefines,
            sources: [vsSource],
        });

        if (this._ENUENABLED) {
            vs.defines.push("ENU_ENABLED");
        }

        if (this._instanced) {
            vs.defines.push("INSTANCED");
        }
        if (this._shaderRotation) {
            vs.defines.push("ROTATION");
        }
        if (this._shaderAlignedAxis) {
            vs.defines.push("ALIGNED_AXIS");
        }
        if (this._shaderScaleByDistance) {
            vs.defines.push("EYE_DISTANCE_SCALING");
        }
        if (this._shaderTranslucencyByDistance) {
            vs.defines.push("EYE_DISTANCE_TRANSLUCENCY");
        }
        if (this._shaderPixelOffsetScaleByDistance) {
            vs.defines.push("EYE_DISTANCE_PIXEL_OFFSET");
        }
        if (this._shaderDistanceDisplayCondition) {
            vs.defines.push("DISTANCE_DISPLAY_CONDITION");
        }
        if (this._shaderDisableDepthDistance) {
            vs.defines.push("DISABLE_DEPTH_DISTANCE");
        }
        if (this._shaderClampToGround) {
            if (supportVSTextureReads) {
                vs.defines.push("VERTEX_DEPTH_CHECK");
            } else {
                vs.defines.push("FRAGMENT_DEPTH_CHECK");
            }
        }

        const sdfEdge = 1.0 - SDFSettings.CUTOFF;

        if (this._sdf) {
            vs.defines.push("SDF");
        }

        const vectorFragDefine = defined(this._batchTable) ? "VECTOR_TILE" : "";

        if (this._blendOption === BlendOption.OPAQUE_AND_TRANSLUCENT) {
            fs = new ShaderSource({
                defines: ["OPAQUE", vectorFragDefine],
                sources: [fsSource],
            });
            if (this._shaderClampToGround) {
                if (supportVSTextureReads) {
                    fs.defines.push("VERTEX_DEPTH_CHECK");
                } else {
                    fs.defines.push("FRAGMENT_DEPTH_CHECK");
                }
            }

            if (this._sdf) {
                fs.defines.push("SDF");
                fs.defines.push(`SDF_EDGE ${sdfEdge}`);
            }

            this._sp = ShaderProgram.replaceCache({
                context: context,
                shaderProgram: this._sp,
                vertexShaderSource: vs,
                fragmentShaderSource: fs,
                attributeLocations: attributeLocations,
            });

            fs = new ShaderSource({
                defines: ["TRANSLUCENT", vectorFragDefine],
                sources: [fsSource],
            });
            if (this._shaderClampToGround) {
                if (supportVSTextureReads) {
                    fs.defines.push("VERTEX_DEPTH_CHECK");
                } else {
                    fs.defines.push("FRAGMENT_DEPTH_CHECK");
                }
            }
            if (this._sdf) {
                fs.defines.push("SDF");
                fs.defines.push(`SDF_EDGE ${sdfEdge}`);
            }
            this._spTranslucent = ShaderProgram.replaceCache({
                context: context,
                shaderProgram: this._spTranslucent,
                vertexShaderSource: vs,
                fragmentShaderSource: fs,
                attributeLocations: attributeLocations,
            });
        }

        if (this._blendOption === BlendOption.OPAQUE) {
            fs = new ShaderSource({
                defines: [vectorFragDefine],
                sources: [fsSource],
            });
            if (this._shaderClampToGround) {
                if (supportVSTextureReads) {
                    fs.defines.push("VERTEX_DEPTH_CHECK");
                } else {
                    fs.defines.push("FRAGMENT_DEPTH_CHECK");
                }
            }
            if (this._sdf) {
                fs.defines.push("SDF");
                fs.defines.push(`SDF_EDGE ${sdfEdge}`);
            }
            this._sp = ShaderProgram.replaceCache({
                context: context,
                shaderProgram: this._sp,
                vertexShaderSource: vs,
                fragmentShaderSource: fs,
                attributeLocations: attributeLocations,
            });
        }

        if (this._blendOption === BlendOption.TRANSLUCENT) {
            fs = new ShaderSource({
                defines: [vectorFragDefine],
                sources: [fsSource],
            });
            if (this._shaderClampToGround) {
                if (supportVSTextureReads) {
                    fs.defines.push("VERTEX_DEPTH_CHECK");
                } else {
                    fs.defines.push("FRAGMENT_DEPTH_CHECK");
                }
            }
            if (this._sdf) {
                fs.defines.push("SDF");
                fs.defines.push(`SDF_EDGE ${sdfEdge}`);
            }
            this._spTranslucent = ShaderProgram.replaceCache({
                context: context,
                shaderProgram: this._spTranslucent,
                vertexShaderSource: vs,
                fragmentShaderSource: fs,
                attributeLocations: attributeLocations,
            });
        }

        this._compiledShaderRotation = this._shaderRotation;
        this._compiledShaderAlignedAxis = this._shaderAlignedAxis;
        this._compiledShaderScaleByDistance = this._shaderScaleByDistance;
        this._compiledShaderTranslucencyByDistance = this._shaderTranslucencyByDistance;
        this._compiledShaderPixelOffsetScaleByDistance = this._shaderPixelOffsetScaleByDistance;
        this._compiledShaderDistanceDisplayCondition = this._shaderDistanceDisplayCondition;
        this._compiledShaderDisableDepthDistance = this._shaderDisableDepthDistance;
        this._compiledShaderClampToGround = this._shaderClampToGround;
        this._compiledSDF = this._sdf;
    }

    const commandList = frameState.commandList;

    if (pass.render || pass.pick) {
        const colorList = this._colorCommands;

        const opaque = this._blendOption === BlendOption.OPAQUE;
        const opaqueAndTranslucent =
            this._blendOption === BlendOption.OPAQUE_AND_TRANSLUCENT;

        const va = this._vaf.va;
        const vaLength = va.length;

        let uniforms = this._uniforms;
        let pickId;
        if (defined(this._batchTable)) {
            uniforms = this._batchTable.getUniformMapCallback()(uniforms);
            pickId = this._batchTable.getPickId();
        } else {
            pickId = "v_pickColor";
        }

        colorList.length = vaLength;
        const totalLength = opaqueAndTranslucent ? vaLength * 2 : vaLength;
        for (let j = 0; j < totalLength; ++j) {
            let command = colorList[j];
            if (!defined(command)) {
                command = colorList[j] = new DrawCommand();
            }

            const opaqueCommand = opaque || (opaqueAndTranslucent && j % 2 === 0);

            command.pass =
                opaqueCommand || !opaqueAndTranslucent ? Pass.OPAQUE : Pass.TRANSLUCENT;
            command.owner = this;

            const index = opaqueAndTranslucent ? Math.floor(j / 2.0) : j;
            command.boundingVolume = boundingVolume;
            command.modelMatrix = modelMatrix;
            command.count = va[index].indicesCount;
            command.shaderProgram = opaqueCommand ? this._sp : this._spTranslucent;
            command.uniformMap = uniforms;
            command.vertexArray = va[index].va;
            command.renderState = opaqueCommand
                ? this._rsOpaque
                : this._rsTranslucent;
            command.debugShowBoundingVolume = this.debugShowBoundingVolume;
            command.pickId = pickId;

            if (this._instanced) {
                command.count = 6;
                command.instanceCount = billboardsLength;
            }

            commandList.push(command);
        }

        if (this.debugShowTextureAtlas) {
            if (!defined(this.debugCommand)) {
                this.debugCommand = createDebugCommand(this, frameState.context);
            }

            commandList.push(this.debugCommand);
        }
    }
};

/**
 * Returns true if this object was destroyed; otherwise, false.
 * <br /><br />
 * If this object was destroyed, it should not be used; calling any function other than
 * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.
 *
 * @returns {Boolean} <code>true</code> if this object was destroyed; otherwise, <code>false</code>.
 *
 * @see BillboardCollection#destroy
 */
BillboardCollection.prototype.isDestroyed = function () {
    return false;
};

/**
 * Destroys the WebGL resources held by this object.  Destroying an object allows for deterministic
 * release of WebGL resources, instead of relying on the garbage collector to destroy this object.
 * <br /><br />
 * Once an object is destroyed, it should not be used; calling any function other than
 * <code>isDestroyed</code> will result in a {@link DeveloperError} exception.  Therefore,
 * assign the return value (<code>undefined</code>) to the object as done in the example.
 *
 * @exception {DeveloperError} This object was destroyed, i.e., destroy() was called.
 *
 *
 * @example
 * billboards = billboards && billboards.destroy();
 *
 * @see BillboardCollection#isDestroyed
 */
BillboardCollection.prototype.destroy = function () {
    if (defined(this._removeCallbackFunc)) {
        this._removeCallbackFunc();
        this._removeCallbackFunc = undefined;
    }

    this._textureAtlas =
        this._destroyTextureAtlas &&
        this._textureAtlas &&
        this._textureAtlas.destroy();
    this._sp = this._sp && this._sp.destroy();
    this._spTranslucent = this._spTranslucent && this._spTranslucent.destroy();
    this._vaf = this._vaf && this._vaf.destroy();
    destroyBillboards(this._billboards);

    return destroyObject(this);
};

module.exports = BillboardCollection;

},{}],9:[function(require,module,exports){
/**
 * Created by user on 2020/3/7.
 */
//根据高度获取地图层级
function altitudeToZoom(altitude) {
    var A = 40487.57;
    var B = 0.00007096758;
    var C = 91610.74;
    var D = -40467.74;

    return Math.round(D+(A-D)/(1+Math.pow(altitude/C, B)));
}
class CameraExt{
    constructor() {
        Cesium.Camera.prototype.getLevel = function () {
            let height = this._positionCartographic.height;
            if(height == this.prevCameraHeight){
                return this.level;
            }
            this.level = altitudeToZoom(height);
            this.prevCameraHeight = height;
            return this.level;
        };
    }
}
module.exports = CameraExt;
new CameraExt();
},{}],10:[function(require,module,exports){
/**
 * Created by user on 2020/3/6.
 */

const BoundingRectangle = Cesium.BoundingRectangle;
const Cartesian2 = Cesium.Cartesian2;
const Color = Cesium.Color;
const defined = Cesium.defined;
const destroyObject = Cesium.destroyObject;
const BlendOption = Cesium.BlendOption;
const HeightReference = Cesium.HeightReference;
const HorizontalOrigin = Cesium.HorizontalOrigin;
const LabelStyle = Cesium.LabelStyle;
const SDFSettings = Cesium.SDFSettings;
const TextureAtlas = Cesium.TextureAtlas;
const VerticalOrigin = Cesium.VerticalOrigin;


const LabelCollection = Cesium.LabelCollection;
const BillboardCollection = require('../ext/BillboardCollection.js');
const GraphemeSplitter = require('grapheme-splitter');


// var SDFSettings = {
//     /**
//      * The font size in pixels
//      *
//      * @type {Number}
//      * @constant
//      */
//     FONT_SIZE: 24.0,
//
//     /**
//      * Whitespace padding around glyphs.
//      *
//      * @type {Number}
//      * @constant
//      */
//     PADDING: 0.0,
//
//     /**
//      * How many pixels around the glyph shape to use for encoding distance
//      *
//      * @type {Number}
//      * @constant
//      */
//     RADIUS: 8.0,
//
//     /**
//      * How much of the radius (relative) is used for the inside part the glyph.
//      *
//      * @type {Number}
//      * @constant
//      */
//     CUTOFF: 0.25
// };

function Glyph() {
    this.textureInfo = undefined;
    this.dimensions = undefined;
    this.billboard = undefined;
}

// GlyphTextureInfo represents a single character, drawn in a particular style,
// shared and reference counted across all labels.  It may or may not have an
// index into the label collection's texture atlas, depending on whether the character
// has both width and height, but it always has a valid dimensions object.
function GlyphTextureInfo(labelCollection, index, dimensions) {
    this.labelCollection = labelCollection;
    this.index = index;
    this.dimensions = dimensions;
}


// Traditionally, leading is %20 of the font size.
const defaultLineSpacingPercent = 1.2;
const whitePixelCanvasId = "ID_WHITE_PIXEL";
const whitePixelSize = new Cartesian2(4, 4);
const whitePixelBoundingRegion = new BoundingRectangle(1, 1, 1, 1);


function addWhitePixelCanvas(textureAtlas) {
    const canvas = document.createElement("canvas");
    canvas.width = whitePixelSize.x;
    canvas.height = whitePixelSize.y;

    const context2D = canvas.getContext("2d");
    context2D.fillStyle = "#fff";
    context2D.fillRect(0, 0, canvas.width, canvas.height);

    // Canvas operations take a frame to draw. Use the asynchronous add function which resolves a promise and allows the draw to complete,
    // but there's no need to wait on the promise before operation can continue
    textureAtlas.addImage(whitePixelCanvasId, canvas);
}

function drawRoundRect(ctx, x, y, width, height, radius){
    ctx.beginPath();
    // y = y -1;
    ctx.arc((x + radius), (y + radius), radius, Math.PI, Math.PI * 3 / 2);
    ctx.lineTo((width - radius + x), y);
    ctx.arc((width - radius + x), (radius + y), radius, Math.PI * 3 / 2, Math.PI * 2);
    ctx.lineTo((width + x), (height + y - radius));
    ctx.arc((width - radius + x), (height - radius + y), radius, 0, Math.PI * 1 / 2);
    ctx.lineTo((radius + x), (height +y));
    ctx.arc((radius + x), (height - radius + y), radius, Math.PI * 1 / 2, Math.PI);
    ctx.closePath();
}

function unbindGlyph(labelCollection, glyph) {
    glyph.textureInfo = undefined;
    glyph.dimensions = undefined;

    const billboard = glyph.billboard;
    if (defined(billboard)) {
        billboard.show = false;
        billboard.image = undefined;
        if (defined(billboard._removeCallbackFunc)) {
            billboard._removeCallbackFunc();
            billboard._removeCallbackFunc = undefined;
        }
        labelCollection._spareBillboards.push(billboard);
        glyph.billboard = undefined;
    }
}

function addGlyphToTextureAtlas(textureAtlas, id, canvas, glyphTextureInfo) {
    glyphTextureInfo.index = textureAtlas.addImageSync(id, canvas);
}

const splitter = new GraphemeSplitter();

function rebindAllGlyphs(labelCollection, label,mapboxGlyphs) {
    const text = label._renderedText;
    if(text.length == 0){
        return;
    }
    const graphemes = splitter.splitGraphemes(text);
    const textLength = graphemes.length;
    const glyphs = label._glyphs;
    const glyphsLength = glyphs.length;

    let glyph;
    let glyphIndex;
    let textIndex;

    // Compute a font size scale relative to the sdf font generated size.
    // label._relativeSize = label._fontSize / SDFSettings.FONT_SIZE;
    label._relativeSize = label._fontSize / 24;

    // if we have more glyphs than needed, unbind the extras.
    if (textLength < glyphsLength) {
        for (glyphIndex = textLength; glyphIndex < glyphsLength; ++glyphIndex) {
            unbindGlyph(labelCollection, glyphs[glyphIndex]);
        }
    }

    // presize glyphs to match the new text length
    glyphs.length = textLength;

    const showBackground =
        label._showBackground && text.split("\n").join("").length > 0;
    let backgroundBillboard = label._backgroundBillboard;
    const backgroundBillboardCollection =
        labelCollection._backgroundBillboardCollection;
    if (!showBackground) {
        if (defined(backgroundBillboard)) {
            backgroundBillboardCollection.remove(backgroundBillboard);
            label._backgroundBillboard = backgroundBillboard = undefined;
        }
    } else {
        if (!defined(backgroundBillboard)) {
            backgroundBillboard = backgroundBillboardCollection.add({
                collection: labelCollection,
                image: whitePixelCanvasId,
                imageSubRegion: whitePixelBoundingRegion,
            });
            label._backgroundBillboard = backgroundBillboard;
        }

        backgroundBillboard.color = label._backgroundColor;
        backgroundBillboard.show = label._show;
        backgroundBillboard.position = label._position;
        backgroundBillboard.eyeOffset = label._eyeOffset;
        backgroundBillboard.pixelOffset = label._pixelOffset;
        backgroundBillboard.horizontalOrigin = HorizontalOrigin.LEFT;
        backgroundBillboard.verticalOrigin = label._verticalOrigin;
        backgroundBillboard.heightReference = label._heightReference;
        backgroundBillboard.scale = label.totalScale;
        backgroundBillboard.pickPrimitive = label;
        backgroundBillboard.id = label._id;
        backgroundBillboard.translucencyByDistance = label._translucencyByDistance;
        backgroundBillboard.pixelOffsetScaleByDistance = label._pixelOffsetScaleByDistance;
        backgroundBillboard.scaleByDistance = label._scaleByDistance;
        backgroundBillboard.distanceDisplayCondition = label._distanceDisplayCondition;
        backgroundBillboard.disableDepthTestDistance = label._disableDepthTestDistance;
    }

    const glyphTextureCache = labelCollection._glyphTextureCache;

    // walk the text looking for new characters (creating new glyphs for each)
    // or changed characters (rebinding existing glyphs)
    for (textIndex = 0; textIndex < textLength; ++textIndex) {
        const character = graphemes[textIndex];
        const verticalOrigin = label._verticalOrigin;

        const id = JSON.stringify([
            character,
            label._fontFamily,
            label._fontStyle,
            label._fontWeight,
            +verticalOrigin
        ]);

        let glyphTextureInfo = glyphTextureCache[id];
        if (!defined(glyphTextureInfo)) {
            var chartCode = character.charCodeAt(0);
            var fontName = '微软雅黑';
            var mapboxGlyph = mapboxGlyphs[fontName][chartCode];

            if(!mapboxGlyph){
                //没找到的生僻字用？号代替
                mapboxGlyph = mapboxGlyphs[fontName][63];
            }

            if(!mapboxGlyph.hasOwnProperty('dimensions')){
                mapboxGlyph.dimensions = {width:mapboxGlyph.width -3,height:24,
                    descent:0,minx:0,miny:0,maxx:0,maxy:0
                };
            }


            glyphTextureInfo = new GlyphTextureInfo(labelCollection, -1, mapboxGlyph.dimensions);
            glyphTextureCache[id] = glyphTextureInfo;

            if (mapboxGlyph.width > 0 && mapboxGlyph.height > 0) {
                if (character !== ' ') {
                    addGlyphToTextureAtlas(labelCollection._textureAtlas, id, mapboxGlyph, glyphTextureInfo);
                }
            }
        }

        glyph = glyphs[textIndex];

        if (defined(glyph)) {
            // clean up leftover information from the previous glyph
            if (glyphTextureInfo.index === -1) {
                // no texture, and therefore no billboard, for this glyph.
                // so, completely unbind glyph.
                unbindGlyph(labelCollection, glyph);
            } else if (defined(glyph.textureInfo)) {
                // we have a texture and billboard.  If we had one before, release
                // our reference to that texture info, but reuse the billboard.
                glyph.textureInfo = undefined;
            }
        } else {
            // create a glyph object
            glyph = new Glyph();
            glyphs[textIndex] = glyph;
        }

        glyph.textureInfo = glyphTextureInfo;
        glyph.dimensions = glyphTextureInfo.dimensions;
        // console.timeEnd('jsonid');
        // console.time('other');
        // if we have a texture, configure the existing billboard, or obtain one
        if (glyphTextureInfo.index !== -1) {
            let billboard = glyph.billboard;
            const spareBillboards = labelCollection._spareBillboards;
            if (!defined(billboard)) {
                if (spareBillboards.length > 0) {
                    billboard = spareBillboards.pop();
                } else {
                    billboard = labelCollection._billboardCollection.add({
                        collection : labelCollection
                    });
                    billboard._labelDimensions = new Cartesian2();
                    billboard._labelTranslate = new Cartesian2();
                }
                glyph.billboard = billboard;
            }

            billboard.show = label._show;
            billboard.position = label._position;
            billboard.eyeOffset = label._eyeOffset;
            billboard.pixelOffset = label._pixelOffset;
            billboard.horizontalOrigin = HorizontalOrigin.LEFT;
            billboard.verticalOrigin = label._verticalOrigin;
            billboard.heightReference = label._heightReference;
            billboard.scale = label.totalScale;
            billboard.pickPrimitive = label;
            billboard.id = label._id;
            billboard.image = id;
            billboard.translucencyByDistance = label._translucencyByDistance;
            billboard.pixelOffsetScaleByDistance = label._pixelOffsetScaleByDistance;
            billboard.scaleByDistance = label._scaleByDistance;
            billboard.distanceDisplayCondition = label._distanceDisplayCondition;
            billboard.disableDepthTestDistance = label._disableDepthTestDistance;
            billboard._batchIndex = label._batchIndex;
            billboard.outlineColor = label.outlineColor;
            if (label.style === LabelStyle.FILL_AND_OUTLINE) {
                billboard.color = label._fillColor;
                billboard.outlineWidth = label.outlineWidth;
            } else if (label.style === LabelStyle.FILL) {
                billboard.color = label._fillColor;
                billboard.outlineWidth = 0.0;
            } else if (label.style === LabelStyle.OUTLINE) {
                billboard.color = Color.TRANSPARENT;
                billboard.outlineWidth = label.outlineWidth;
            }

            /*************新增开始**************/
            // billboard.rotation  = label._rotation;
            /*************新增结束**************/
        }
    }
    // changing glyphs will cause the position of the
    // glyphs to change, since different characters have different widths
    label._repositionAllGlyphs = true;
}

function calculateWidthOffset(lineWidth, horizontalOrigin, backgroundPadding) {
    if (horizontalOrigin === HorizontalOrigin.CENTER) {
        return -lineWidth / 2;
    } else if (horizontalOrigin === HorizontalOrigin.RIGHT) {
        return -(lineWidth + backgroundPadding.x);
    }
    return backgroundPadding.x;
}

// reusable Cartesian2 instances
const glyphPixelOffset = new Cartesian2();
const scratchBackgroundPadding = new Cartesian2();

function repositionAllGlyphs(label) {
    const glyphs = label._glyphs;
    const text = label._renderedText;
    let glyph;
    let dimensions;
    let lastLineWidth = 0;
    let maxLineWidth = 0;
    const lineWidths = [];
    let maxGlyphDescent = Number.NEGATIVE_INFINITY;
    let maxGlyphY = 0;
    let numberOfLines = 1;
    let glyphIndex;
    const glyphLength = glyphs.length;

    const backgroundBillboard = label._backgroundBillboard;
    const backgroundPadding = Cartesian2.clone(
        defined(backgroundBillboard) ? label._backgroundPadding : Cartesian2.ZERO,
        scratchBackgroundPadding
    );

    // We need to scale the background padding, which is specified in pixels by the inverse of the relative size so it is scaled properly.
    backgroundPadding.x /= label._relativeSize;
    backgroundPadding.y /= label._relativeSize;

    for (glyphIndex = 0; glyphIndex < glyphLength; ++glyphIndex) {
        if (text.charAt(glyphIndex) === "\n") {
            lineWidths.push(lastLineWidth);
            ++numberOfLines;
            lastLineWidth = 0;
        } else {
            glyph = glyphs[glyphIndex];
            dimensions = glyph.dimensions;
            maxGlyphY = Math.max(maxGlyphY, dimensions.height - dimensions.descent);
            maxGlyphDescent = Math.max(maxGlyphDescent, dimensions.descent);

            //Computing the line width must also account for the kerning that occurs between letters.
            lastLineWidth += dimensions.width - dimensions.minx;
            if (glyphIndex < glyphLength - 1) {
                lastLineWidth += glyphs[glyphIndex + 1].dimensions.minx;
            }
            maxLineWidth = Math.max(maxLineWidth, lastLineWidth);
        }
    }
    lineWidths.push(lastLineWidth);
    const maxLineHeight = maxGlyphY + maxGlyphDescent;

    const scale = label.totalScale;
    const horizontalOrigin = label._horizontalOrigin;
    const verticalOrigin = label._verticalOrigin;
    let lineIndex = 0;
    let lineWidth = lineWidths[lineIndex];
    let widthOffset = calculateWidthOffset(
        lineWidth,
        horizontalOrigin,
        backgroundPadding
    );
    const lineSpacing =
        (defined(label._lineHeight)
            ? label._lineHeight
            : defaultLineSpacingPercent * label._fontSize) / label._relativeSize;
    const otherLinesHeight = lineSpacing * (numberOfLines - 1);
    let totalLineWidth = maxLineWidth;
    let totalLineHeight = maxLineHeight + otherLinesHeight;

    glyphPixelOffset.x = widthOffset * scale;
    glyphPixelOffset.y = 0;

    let firstCharOfLine = true;

    let lineOffsetY = 0;
    for (glyphIndex = 0; glyphIndex < glyphLength; ++glyphIndex) {
        if (text.charAt(glyphIndex) === ' ') {
            ++lineIndex;
            lineOffsetY += lineSpacing;
            lineWidth = lineWidths[lineIndex];
            widthOffset = calculateWidthOffset(
                lineWidth,
                horizontalOrigin,
                backgroundPadding
            );
            glyphPixelOffset.x = widthOffset * scale;
            firstCharOfLine = true;
        } else {
            glyph = glyphs[glyphIndex];
            dimensions = glyph.dimensions;
            if (verticalOrigin === VerticalOrigin.TOP) {
                glyphPixelOffset.y = dimensions.height - maxGlyphY - backgroundPadding.y;
                glyphPixelOffset.y += SDFSettings.PADDING;
            } else if (verticalOrigin === VerticalOrigin.CENTER) {
                glyphPixelOffset.y = (otherLinesHeight + dimensions.height - maxGlyphY) / 2;
            } else if (verticalOrigin === VerticalOrigin.BASELINE) {
                glyphPixelOffset.y = otherLinesHeight;
                glyphPixelOffset.y -= SDFSettings.PADDING;
            } else {
                // VerticalOrigin.BOTTOM
                glyphPixelOffset.y = otherLinesHeight + maxGlyphDescent + backgroundPadding.y;
                glyphPixelOffset.y -= SDFSettings.PADDING;
            }
            glyphPixelOffset.y = (glyphPixelOffset.y - dimensions.descent - lineOffsetY) * scale;

            // Handle any offsets for the first character of the line since the bounds might not be right on the bottom left pixel.
            if (firstCharOfLine)
            {
                glyphPixelOffset.x -= SDFSettings.PADDING * scale;
                firstCharOfLine = false;
            }

            if (defined(glyph.billboard)) {
                glyph.billboard._setTranslate(glyphPixelOffset);
                glyph.billboard._labelDimensions.x = totalLineWidth;
                glyph.billboard._labelDimensions.y = totalLineHeight;
                glyph.billboard._labelHorizontalOrigin = horizontalOrigin;
            }

            //Compute the next x offset taking into account the kerning performed
            //on both the current letter as well as the next letter to be drawn
            //as well as any applied scale.
            if (glyphIndex < glyphLength - 1) {
                const nextGlyph = glyphs[glyphIndex + 1];
                glyphPixelOffset.x +=
                    (dimensions.width - dimensions.minx + nextGlyph.dimensions.minx) *
                    scale;
            }
        }
    }

    if (defined(backgroundBillboard) && (text.split(' ').join('').length > 0)) {
        if (horizontalOrigin === HorizontalOrigin.CENTER) {
            widthOffset = -maxLineWidth / 2 - backgroundPadding.x;
        } else if (horizontalOrigin === HorizontalOrigin.RIGHT) {
            widthOffset = -(maxLineWidth + backgroundPadding.x * 2);
        } else {
            widthOffset = 0;
        }
        glyphPixelOffset.x = widthOffset * scale;

        if (verticalOrigin === VerticalOrigin.TOP) {
            glyphPixelOffset.y = maxLineHeight - maxGlyphY - maxGlyphDescent;
        } else if (verticalOrigin === VerticalOrigin.CENTER) {
            glyphPixelOffset.y = (maxLineHeight - maxGlyphY) / 2 - maxGlyphDescent;
        } else if (verticalOrigin === VerticalOrigin.BASELINE) {
            glyphPixelOffset.y = -backgroundPadding.y - maxGlyphDescent;
        } else {
            // VerticalOrigin.BOTTOM
            glyphPixelOffset.y = 0;
        }
        glyphPixelOffset.y = glyphPixelOffset.y * scale;

        backgroundBillboard.width = totalLineWidth;
        backgroundBillboard.height = totalLineHeight;
        backgroundBillboard._setTranslate(glyphPixelOffset);
        backgroundBillboard._labelTranslate = Cartesian2.clone(
            glyphPixelOffset,
            backgroundBillboard._labelTranslate
        );
    }

    //存起来用于计算避让box
    label.totalWidth = totalLineWidth*scale;
    label.totalHeight = totalLineHeight*scale;

    if (label.heightReference === HeightReference.CLAMP_TO_GROUND) {
        for (glyphIndex = 0; glyphIndex < glyphLength; ++glyphIndex) {
            glyph = glyphs[glyphIndex];
            const billboard = glyph.billboard;
            if (defined(billboard)) {
                billboard._labelTranslate = Cartesian2.clone(
                    glyphPixelOffset,
                    billboard._labelTranslate
                );
            }
        }
    }
}

function destroyLabel(labelCollection, label) {
    const glyphs = label._glyphs;
    for (let i = 0, len = glyphs.length; i < len; ++i) {
        unbindGlyph(labelCollection, glyphs[i]);
    }
    if (defined(label._backgroundBillboard)) {
        labelCollection._backgroundBillboardCollection.remove(
            label._backgroundBillboard
        );
        label._backgroundBillboard = undefined;
    }
    label._labelCollection = undefined;

    if (defined(label._removeCallbackFunc)) {
        label._removeCallbackFunc();
    }

    destroyObject(label);
}


class LabelCollectionExt extends LabelCollection{
    constructor(options) {
        super(options);

        this._backgroundBillboardCollection = new BillboardCollection({
            scene : this._scene
        });
        this._backgroundBillboardCollection.destroyTextureAtlas = false;

        this._billboardCollection = new BillboardCollection({
            scene : this._scene,
            batchTable : this._batchTable,
            enuEnabled :options.enuEnabled
        });
        this._billboardCollection.destroyTextureAtlas = false;
        this._billboardCollection._sdf = true;
    }

    setGlyphs(mapboxGlyphs){
        this.mapboxGlyphs = mapboxGlyphs;
    }

    update(frameState){
        if(!this.mapboxGlyphs){
            return;
        }

        if (!this.show) {
            return;
        }

        const billboardCollection = this._billboardCollection;
        const backgroundBillboardCollection = this._backgroundBillboardCollection;

        billboardCollection.modelMatrix = this.modelMatrix;
        billboardCollection.debugShowBoundingVolume = this.debugShowBoundingVolume;
        backgroundBillboardCollection.modelMatrix = this.modelMatrix;
        backgroundBillboardCollection.debugShowBoundingVolume = this.debugShowBoundingVolume;

        const context = frameState.context;

        if (!defined(this._textureAtlas)) {
            this._textureAtlas = new TextureAtlas({
                context: context,
            });
            billboardCollection.textureAtlas = this._textureAtlas;
        }

        if (!defined(this._backgroundTextureAtlas)) {
            this._backgroundTextureAtlas = new TextureAtlas({
                context: context,
                initialSize: whitePixelSize,
            });
            backgroundBillboardCollection.textureAtlas = this._backgroundTextureAtlas;
            addWhitePixelCanvas(this._backgroundTextureAtlas);
        }

        const len = this._labelsToUpdate.length;
        for (let i = 0; i < len; ++i) {
            const label = this._labelsToUpdate[i];
            if (label.isDestroyed()) {
                continue;
            }

            const preUpdateGlyphCount = label._glyphs.length;

            if (label._rebindAllGlyphs) {
                rebindAllGlyphs(this, label,this.mapboxGlyphs);
                label._rebindAllGlyphs = false;
            }

            if (label._repositionAllGlyphs) {
                repositionAllGlyphs(label);
                label._repositionAllGlyphs = false;
            }

            const glyphCountDifference = label._glyphs.length - preUpdateGlyphCount;
            this._totalGlyphCount += glyphCountDifference;
        }

        const blendOption =
            backgroundBillboardCollection.length > 0
                ? BlendOption.TRANSLUCENT
                : this.blendOption;
        billboardCollection.blendOption = blendOption;
        backgroundBillboardCollection.blendOption = blendOption;

        billboardCollection._highlightColor = this._highlightColor;
        backgroundBillboardCollection._highlightColor = this._highlightColor;

        this._labelsToUpdate.length = 0;
        backgroundBillboardCollection.update(frameState);
        billboardCollection.update(frameState);
    }
}

module.exports = LabelCollectionExt;
},{"../ext/BillboardCollection.js":8,"grapheme-splitter":5}],11:[function(require,module,exports){
/**
 *  使用同一级瓦片贴图
 * Created by user on 2020/3/7.
 */

const Cartesian3 =Cesium.Cartesian3;
const Cartographic =Cesium.Cartographic;
const defaultValue =Cesium.defaultValue;
const defined =Cesium.defined;
const defineProperties =Cesium.defineProperties;
const DeveloperError =Cesium.DeveloperError;
const Event =Cesium.Event;
const getTimestamp =Cesium.getTimestamp;
const CesiumMath =Cesium.Math;
const Matrix4 =Cesium.Matrix4;
const OrthographicFrustum =Cesium.OrthographicFrustum;
const OrthographicOffCenterFrustum =Cesium.OrthographicOffCenterFrustum;
const Ray =Cesium.Ray;
const Rectangle =Cesium.Rectangle;
const Visibility =Cesium.Visibility;
const QuadtreeOccluders =Cesium.QuadtreeOccluders;
const QuadtreeTile =Cesium.QuadtreeTile;
const QuadtreeTileLoadState =Cesium.QuadtreeTileLoadState;
const SceneMode =Cesium.SceneMode;
const TileReplacementQueue =Cesium.TileReplacementQueue;
const TileSelectionResult =Cesium.TileSelectionResult;
const QuadtreePrimitive = Cesium.QuadtreePrimitive;

var comparisonPoint;
var centerScratch = new Cartographic();
function compareDistanceToPoint(a, b) {
    var center = Rectangle.center(a.rectangle, centerScratch);
    var alon = center.longitude - comparisonPoint.longitude;
    var alat = center.latitude - comparisonPoint.latitude;

    center = Rectangle.center(b.rectangle, centerScratch);
    var blon = center.longitude - comparisonPoint.longitude;
    var blat = center.latitude - comparisonPoint.latitude;

    return (alon * alon + alat * alat) - (blon * blon + blat * blat);
}

var cameraOriginScratch = new Cartesian3();
var rootTraversalDetails = [];

function selectTilesForRendering(primitive, frameState) {
    var debug = primitive._debug;
    if (debug.suspendLodUpdate) {
        return;
    }

    // Clear the render list.
    var tilesToRender = primitive._tilesToRender;
    tilesToRender.length = 0;

    // We can't render anything before the level zero tiles exist.
    var i;
    var tileProvider = primitive._tileProvider;
    if (!defined(primitive._levelZeroTiles)) {
        if (tileProvider.ready) {
            var tilingScheme = tileProvider.tilingScheme;
            primitive._levelZeroTiles = QuadtreeTile.createLevelZeroTiles(tilingScheme);
            var numberOfRootTiles = primitive._levelZeroTiles.length;
            if (rootTraversalDetails.length < numberOfRootTiles) {
                rootTraversalDetails = new Array(numberOfRootTiles);
                for (i = 0; i < numberOfRootTiles; ++i) {
                    if (rootTraversalDetails[i] === undefined) {
                        rootTraversalDetails[i] = new TraversalDetails();
                    }
                }
            }
        } else {
            // Nothing to do until the provider is ready.
            return;
        }
    }

    primitive._occluders.ellipsoid.cameraPosition = frameState.camera.positionWC;

    var tile;
    var levelZeroTiles = primitive._levelZeroTiles;
    var occluders = levelZeroTiles.length > 1 ? primitive._occluders : undefined;

    // Sort the level zero tiles by the distance from the center to the camera.
    // The level zero tiles aren't necessarily a nice neat quad, so we can't use the
    // quadtree ordering we use elsewhere in the tree
    comparisonPoint = frameState.camera.positionCartographic;
    levelZeroTiles.sort(compareDistanceToPoint);

    var customDataAdded = primitive._addHeightCallbacks;
    var customDataRemoved = primitive._removeHeightCallbacks;
    var frameNumber = frameState.frameNumber;

    var len;
    if (customDataAdded.length > 0 || customDataRemoved.length > 0) {
        for (i = 0, len = levelZeroTiles.length; i < len; ++i) {
            tile = levelZeroTiles[i];
            tile._updateCustomData(frameNumber, customDataAdded, customDataRemoved);
        }

        customDataAdded.length = 0;
        customDataRemoved.length = 0;
    }

    var camera = frameState.camera;

    primitive._cameraPositionCartographic = camera.positionCartographic;
    var cameraFrameOrigin = Matrix4.getTranslation(camera.transform, cameraOriginScratch);
    primitive._cameraReferenceFrameOriginCartographic = primitive.tileProvider.tilingScheme.ellipsoid.cartesianToCartographic(cameraFrameOrigin, primitive._cameraReferenceFrameOriginCartographic);

    // Traverse in depth-first, near-to-far order.
    for (i = 0, len = levelZeroTiles.length; i < len; ++i) {
        tile = levelZeroTiles[i];
        primitive._tileReplacementQueue.markTileRendered(tile);
        if (!tile.renderable) {
            queueTileLoad(primitive, primitive._tileLoadQueueHigh, tile, frameState);
            ++debug.tilesWaitingForChildren;
        } else {
            visitIfVisible(primitive, tile, tileProvider, frameState, occluders, false, rootTraversalDetails[i]);
        }
    }

    primitive._lastSelectionFrameNumber = frameNumber;
}

function queueTileLoad(primitive, queue, tile, frameState) {
    if (!tile.needsLoading) {
        return;
    }

    if (primitive.tileProvider.computeTileLoadPriority !== undefined) {
        tile._loadPriority = primitive.tileProvider.computeTileLoadPriority(tile, frameState);
    }
    queue.push(tile);
}

/**
 * Tracks details of traversing a tile while selecting tiles for rendering.
 * @alias TraversalDetails
 * @constructor
 * @private
 */
function TraversalDetails() {
    /**
     * True if all selected (i.e. not culled or refined) tiles in this tile's subtree
     * are renderable. If the subtree is renderable, we'll render it; no drama.
     */
    this.allAreRenderable = true;

    /**
     * True if any tiles in this tile's subtree were rendered last frame. If any
     * were, we must render the subtree rather than this tile, because rendering
     * this tile would cause detail to vanish that was visible last frame, and
     * that's no good.
     */
    this.anyWereRenderedLastFrame = false;

    /**
     * Counts the number of selected tiles in this tile's subtree that are
     * not yet ready to be rendered because they need more loading. Note that
     * this value will _not_ necessarily be zero when
     * {@link TraversalDetails#allAreRenderable} is true, for subtle reasons.
     * When {@link TraversalDetails#allAreRenderable} and
     * {@link TraversalDetails#anyWereRenderedLastFrame} are both false, we
     * will render this tile instead of any tiles in its subtree and
     * the `allAreRenderable` value for this tile will reflect only whether _this_
     * tile is renderable. The `notYetRenderableCount` value, however, will still
     * reflect the total number of tiles that we are waiting on, including the
     * ones that we're not rendering. `notYetRenderableCount` is only reset
     * when a subtree is removed from the render queue because the
     * `notYetRenderableCount` exceeds the
     * {@link QuadtreePrimitive#loadingDescendantLimit}.
     */
    this.notYetRenderableCount = 0;
}

function TraversalQuadDetails() {
    this.southwest = new TraversalDetails();
    this.southeast = new TraversalDetails();
    this.northwest = new TraversalDetails();
    this.northeast = new TraversalDetails();
}

TraversalQuadDetails.prototype.combine = function(result) {
    var southwest = this.southwest;
    var southeast = this.southeast;
    var northwest = this.northwest;
    var northeast = this.northeast;

    result.allAreRenderable = southwest.allAreRenderable && southeast.allAreRenderable && northwest.allAreRenderable && northeast.allAreRenderable;
    result.anyWereRenderedLastFrame = southwest.anyWereRenderedLastFrame || southeast.anyWereRenderedLastFrame || northwest.anyWereRenderedLastFrame || northeast.anyWereRenderedLastFrame;
    result.notYetRenderableCount = southwest.notYetRenderableCount + southeast.notYetRenderableCount + northwest.notYetRenderableCount + northeast.notYetRenderableCount;
};

var traversalQuadsByLevel = new Array(31); // level 30 tiles are ~2cm wide at the equator, should be good enough.
for (var i = 0; i < traversalQuadsByLevel.length; ++i) {
    traversalQuadsByLevel[i] = new TraversalQuadDetails();
}

function altitudeToZoom(altitude) {
    var A = 40487.57;
    var B = 0.00007096758;
    var C = 91610.74;
    var D = -40467.74;

    return Math.round(D+(A-D)/(1+Math.pow(altitude/C, B)));
}

/**
 * Visits a tile for possible rendering. When we call this function with a tile:
 *
 *    * the tile has been determined to be visible (possibly based on a bounding volume that is not very tight-fitting)
 *    * its parent tile does _not_ meet the SSE (unless ancestorMeetsSse=true, see comments below)
 *    * the tile may or may not be renderable
 *
 * @private
 *
 * @param {Primitive} primitive The QuadtreePrimitive.
 * @param {FrameState} frameState The frame state.
 * @param {QuadtreeTile} tile The tile to visit
 * @param {Boolean} ancestorMeetsSse True if a tile higher in the tile tree already met the SSE and we're refining further only
 *                  to maintain detail while that higher tile loads.
 * @param {TraversalDetails} traveralDetails On return, populated with details of how the traversal of this tile went.
 */
function visitTile(primitive, frameState, tile, ancestorMeetsSse, traversalDetails) {
    var debug = primitive._debug;

    ++debug.tilesVisited;

    primitive._tileReplacementQueue.markTileRendered(tile);
    tile._updateCustomData(frameState.frameNumber);

    if (tile.level > debug.maxDepthVisited) {
        debug.maxDepthVisited = tile.level;
    }

    // var meetsSse = screenSpaceError(primitive, frameState, tile) < primitive.maximumScreenSpaceError;

    if (frameState.mode === SceneMode.SCENE2D || frameState.camera.frustum instanceof OrthographicFrustum || frameState.camera.frustum instanceof OrthographicOffCenterFrustum) {
        return screenSpaceError2D(primitive, frameState, tile);
    }
    var meetsSse = screenSpaceError(primitive, frameState, tile) < primitive.maximumScreenSpaceError ;
    // var meetsSse = tile.level ==  altitudeToZoom(frameState.camera.positionCartographic.height);
    var southwestChild = tile.southwestChild;
    var southeastChild = tile.southeastChild;
    var northwestChild = tile.northwestChild;
    var northeastChild = tile.northeastChild;

    var lastFrame = primitive._lastSelectionFrameNumber;
    var lastFrameSelectionResult = tile._lastSelectionResultFrame === lastFrame ? tile._lastSelectionResult : TileSelectionResult.NONE;

    var tileProvider = primitive.tileProvider;

    if (meetsSse || ancestorMeetsSse) {
        // This tile (or an ancestor) is the one we want to render this frame, but we'll do different things depending
        // on the state of this tile and on what we did _last_ frame.

        // We can render it if _any_ of the following are true:
        // 1. We rendered it (or kicked it) last frame.
        // 2. This tile was culled last frame, or it wasn't even visited because an ancestor was culled.
        // 3. The tile is completely done loading.
        // 4. a) Terrain is ready, and
        //    b) All necessary imagery is ready. Necessary imagery is imagery that was rendered with this tile
        //       or any descendants last frame. Such imagery is required because rendering this tile without
        //       it would cause detail to disappear.
        //
        // Determining condition 4 is more expensive, so we check the others first.
        //
        // Note that even if we decide to render a tile here, it may later get "kicked" in favor of an ancestor.

        var oneRenderedLastFrame = TileSelectionResult.originalResult(lastFrameSelectionResult) === TileSelectionResult.RENDERED;
        var twoCulledOrNotVisited = TileSelectionResult.originalResult(lastFrameSelectionResult) === TileSelectionResult.CULLED || lastFrameSelectionResult === TileSelectionResult.NONE;
        var threeCompletelyLoaded = tile.state === QuadtreeTileLoadState.DONE;

        var renderable = oneRenderedLastFrame || twoCulledOrNotVisited || threeCompletelyLoaded;

        if (!renderable) {
            // Check the more expensive condition 4 above. This requires details of the thing
            // we're rendering (e.g. the globe surface), so delegate it to the tile provider.
            if (defined(tileProvider.canRenderWithoutLosingDetail)) {
                renderable = tileProvider.canRenderWithoutLosingDetail(tile);
            }
        }

        if (renderable) {
            // Only load this tile if it (not just an ancestor) meets the SSE.
            if (meetsSse) {
                queueTileLoad(primitive, primitive._tileLoadQueueMedium, tile, frameState);
            }
            addTileToRenderList(primitive, tile);

            traversalDetails.allAreRenderable = tile.renderable;
            traversalDetails.anyWereRenderedLastFrame = lastFrameSelectionResult === TileSelectionResult.RENDERED;
            traversalDetails.notYetRenderableCount = tile.renderable ? 0 : 1;

            tile._lastSelectionResultFrame = frameState.frameNumber;
            tile._lastSelectionResult = TileSelectionResult.RENDERED;

            if (!traversalDetails.anyWereRenderedLastFrame) {
                // Tile is newly-rendered this frame, so update its heights.
                primitive._tileToUpdateHeights.push(tile);
            }

            return;
        }

        // Otherwise, we can't render this tile (or its fill) because doing so would cause detail to disappear
        // that was visible last frame. Instead, keep rendering any still-visible descendants that were rendered
        // last frame and render fills for newly-visible descendants. E.g. if we were rendering level 15 last
        // frame but this frame we want level 14 and the closest renderable level <= 14 is 0, rendering level
        // zero would be pretty jarring so instead we keep rendering level 15 even though its SSE is better
        // than required. So fall through to continue traversal...
        ancestorMeetsSse = true;

        // Load this blocker tile with high priority, but only if this tile (not just an ancestor) meets the SSE.
        if (meetsSse) {
            queueTileLoad(primitive, primitive._tileLoadQueueHigh, tile, frameState);
        }
    }

    if (tileProvider.canRefine(tile)) {
        var allAreUpsampled = southwestChild.upsampledFromParent && southeastChild.upsampledFromParent &&
            northwestChild.upsampledFromParent && northeastChild.upsampledFromParent;

        if (allAreUpsampled) {
            // No point in rendering the children because they're all upsampled.  Render this tile instead.
            addTileToRenderList(primitive, tile);

            // Rendered tile that's not waiting on children loads with medium priority.
            queueTileLoad(primitive, primitive._tileLoadQueueMedium, tile, frameState);

            // Make sure we don't unload the children and forget they're upsampled.
            primitive._tileReplacementQueue.markTileRendered(southwestChild);
            primitive._tileReplacementQueue.markTileRendered(southeastChild);
            primitive._tileReplacementQueue.markTileRendered(northwestChild);
            primitive._tileReplacementQueue.markTileRendered(northeastChild);

            traversalDetails.allAreRenderable = tile.renderable;
            traversalDetails.anyWereRenderedLastFrame = lastFrameSelectionResult === TileSelectionResult.RENDERED;
            traversalDetails.notYetRenderableCount = tile.renderable ? 0 : 1;

            tile._lastSelectionResultFrame = frameState.frameNumber;
            tile._lastSelectionResult = TileSelectionResult.RENDERED;

            if (!traversalDetails.anyWereRenderedLastFrame) {
                // Tile is newly-rendered this frame, so update its heights.
                primitive._tileToUpdateHeights.push(tile);
            }

            return;
        }

        // SSE is not good enough, so refine.
        tile._lastSelectionResultFrame = frameState.frameNumber;
        tile._lastSelectionResult = TileSelectionResult.REFINED;

        var firstRenderedDescendantIndex = primitive._tilesToRender.length;
        var loadIndexLow = primitive._tileLoadQueueLow.length;
        var loadIndexMedium = primitive._tileLoadQueueMedium.length;
        var loadIndexHigh = primitive._tileLoadQueueHigh.length;
        var tilesToUpdateHeightsIndex = primitive._tileToUpdateHeights.length;

        // No need to add the children to the load queue because they'll be added (if necessary) when they're visited.
        visitVisibleChildrenNearToFar(primitive, southwestChild, southeastChild, northwestChild, northeastChild, frameState, ancestorMeetsSse, traversalDetails);

        // If no descendant tiles were added to the render list by the function above, it means they were all
        // culled even though this tile was deemed visible. That's pretty common.

        if (firstRenderedDescendantIndex !== primitive._tilesToRender.length) {
            // At least one descendant tile was added to the render list.
            // The traversalDetails tell us what happened while visiting the children.

            var allAreRenderable = traversalDetails.allAreRenderable;
            var anyWereRenderedLastFrame = traversalDetails.anyWereRenderedLastFrame;
            var notYetRenderableCount = traversalDetails.notYetRenderableCount;
            var queuedForLoad = false;

            if (!allAreRenderable && !anyWereRenderedLastFrame) {
                // Some of our descendants aren't ready to render yet, and none were rendered last frame,
                // so kick them all out of the render list and render this tile instead. Continue to load them though!

                // Mark the rendered descendants and their ancestors - up to this tile - as kicked.
                var renderList = primitive._tilesToRender;
                for (var i = firstRenderedDescendantIndex; i < renderList.length; ++i) {
                    var workTile = renderList[i];
                    while (workTile !== undefined && workTile._lastSelectionResult !== TileSelectionResult.KICKED && workTile !== tile) {
                        workTile._lastSelectionResult = TileSelectionResult.kick(workTile._lastSelectionResult);
                        workTile = workTile.parent;
                    }
                }

                // Remove all descendants from the render list and add this tile.
                primitive._tilesToRender.length = firstRenderedDescendantIndex;
                primitive._tileToUpdateHeights.length = tilesToUpdateHeightsIndex;
                addTileToRenderList(primitive, tile);

                tile._lastSelectionResult = TileSelectionResult.RENDERED;

                // If we're waiting on heaps of descendants, the above will take too long. So in that case,
                // load this tile INSTEAD of loading any of the descendants, and tell the up-level we're only waiting
                // on this tile. Keep doing this until we actually manage to render this tile.
                var wasRenderedLastFrame = lastFrameSelectionResult === TileSelectionResult.RENDERED;
                if (!wasRenderedLastFrame && notYetRenderableCount > primitive.loadingDescendantLimit) {
                    // Remove all descendants from the load queues.
                    primitive._tileLoadQueueLow.length = loadIndexLow;
                    primitive._tileLoadQueueMedium.length = loadIndexMedium;
                    primitive._tileLoadQueueHigh.length = loadIndexHigh;
                    queueTileLoad(primitive, primitive._tileLoadQueueMedium, tile, frameState);
                    traversalDetails.notYetRenderableCount = tile.renderable ? 0 : 1;
                    queuedForLoad = true;
                }

                traversalDetails.allAreRenderable = tile.renderable;
                traversalDetails.anyWereRenderedLastFrame = wasRenderedLastFrame;

                if (!wasRenderedLastFrame) {
                    // Tile is newly-rendered this frame, so update its heights.
                    primitive._tileToUpdateHeights.push(tile);
                }

                ++debug.tilesWaitingForChildren;
            }

            if (primitive.preloadAncestors && !queuedForLoad) {
                queueTileLoad(primitive, primitive._tileLoadQueueLow, tile, frameState);
            }
        }

        return;
    }

    tile._lastSelectionResultFrame = frameState.frameNumber;
    tile._lastSelectionResult = TileSelectionResult.RENDERED;

    // We'd like to refine but can't because we have no availability data for this tile's children,
    // so we have no idea if refinining would involve a load or an upsample. We'll have to finish
    // loading this tile first in order to find that out, so load this refinement blocker with
    // high priority.
    addTileToRenderList(primitive, tile);
    queueTileLoad(primitive, primitive._tileLoadQueueHigh, tile, frameState);

    traversalDetails.allAreRenderable = tile.renderable;
    traversalDetails.anyWereRenderedLastFrame = lastFrameSelectionResult === TileSelectionResult.RENDERED;
    traversalDetails.notYetRenderableCount = tile.renderable ? 0 : 1;
}

function visitVisibleChildrenNearToFar(primitive, southwest, southeast, northwest, northeast, frameState, ancestorMeetsSse, traversalDetails) {
    var cameraPosition = frameState.camera.positionCartographic;
    var tileProvider = primitive._tileProvider;
    var occluders = primitive._occluders;

    var quadDetails = traversalQuadsByLevel[southwest.level];
    var southwestDetails = quadDetails.southwest;
    var southeastDetails = quadDetails.southeast;
    var northwestDetails = quadDetails.northwest;
    var northeastDetails = quadDetails.northeast;

    if (cameraPosition.longitude < southwest.rectangle.east) {
        if (cameraPosition.latitude < southwest.rectangle.north) {
            // Camera in southwest quadrant
            visitIfVisible(primitive, southwest, tileProvider, frameState, occluders, ancestorMeetsSse, southwestDetails);
            visitIfVisible(primitive, southeast, tileProvider, frameState, occluders, ancestorMeetsSse, southeastDetails);
            visitIfVisible(primitive, northwest, tileProvider, frameState, occluders, ancestorMeetsSse, northwestDetails);
            visitIfVisible(primitive, northeast, tileProvider, frameState, occluders, ancestorMeetsSse, northeastDetails);
        } else {
            // Camera in northwest quadrant
            visitIfVisible(primitive, northwest, tileProvider, frameState, occluders, ancestorMeetsSse, northwestDetails);
            visitIfVisible(primitive, southwest, tileProvider, frameState, occluders, ancestorMeetsSse, southwestDetails);
            visitIfVisible(primitive, northeast, tileProvider, frameState, occluders, ancestorMeetsSse, northeastDetails);
            visitIfVisible(primitive, southeast, tileProvider, frameState, occluders, ancestorMeetsSse, southeastDetails);
        }
    } else if (cameraPosition.latitude < southwest.rectangle.north) {
        // Camera southeast quadrant
        visitIfVisible(primitive, southeast, tileProvider, frameState, occluders, ancestorMeetsSse, southeastDetails);
        visitIfVisible(primitive, southwest, tileProvider, frameState, occluders, ancestorMeetsSse, southwestDetails);
        visitIfVisible(primitive, northeast, tileProvider, frameState, occluders, ancestorMeetsSse, northeastDetails);
        visitIfVisible(primitive, northwest, tileProvider, frameState, occluders, ancestorMeetsSse, northwestDetails);
    } else {
        // Camera in northeast quadrant
        visitIfVisible(primitive, northeast, tileProvider, frameState, occluders, ancestorMeetsSse, northeastDetails);
        visitIfVisible(primitive, northwest, tileProvider, frameState, occluders, ancestorMeetsSse, northwestDetails);
        visitIfVisible(primitive, southeast, tileProvider, frameState, occluders, ancestorMeetsSse, southeastDetails);
        visitIfVisible(primitive, southwest, tileProvider, frameState, occluders, ancestorMeetsSse, southwestDetails);
    }

    quadDetails.combine(traversalDetails);
}

function containsNeededPosition(primitive, tile) {
    var rectangle = tile.rectangle;
    return (defined(primitive._cameraPositionCartographic) && Rectangle.contains(rectangle, primitive._cameraPositionCartographic)) ||
        (defined(primitive._cameraReferenceFrameOriginCartographic) && Rectangle.contains(rectangle, primitive._cameraReferenceFrameOriginCartographic));
}

function visitIfVisible(primitive, tile, tileProvider, frameState, occluders, ancestorMeetsSse, traversalDetails) {
    if (tileProvider.computeTileVisibility(tile, frameState, occluders) !== Visibility.NONE) {
        return visitTile(primitive, frameState, tile, ancestorMeetsSse, traversalDetails);
    }

    ++primitive._debug.tilesCulled;
    primitive._tileReplacementQueue.markTileRendered(tile);

    traversalDetails.allAreRenderable = true;
    traversalDetails.anyWereRenderedLastFrame = false;
    traversalDetails.notYetRenderableCount = 0;

    if (containsNeededPosition(primitive, tile)) {
        // Load the tile(s) that contains the camera's position and
        // the origin of its reference frame with medium priority.
        // But we only need to load until the terrain is available, no need to load imagery.
        if (!defined(tile.data) || !defined(tile.data.vertexArray)) {
            queueTileLoad(primitive, primitive._tileLoadQueueMedium, tile, frameState);
        }

        var lastFrame = primitive._lastSelectionFrameNumber;
        var lastFrameSelectionResult = tile._lastSelectionResultFrame === lastFrame ? tile._lastSelectionResult : TileSelectionResult.NONE;
        if (lastFrameSelectionResult !== TileSelectionResult.CULLED_BUT_NEEDED && lastFrameSelectionResult !== TileSelectionResult.RENDERED) {
            primitive._tileToUpdateHeights.push(tile);
        }

        tile._lastSelectionResult = TileSelectionResult.CULLED_BUT_NEEDED;
    } else if (primitive.preloadSiblings || tile.level === 0) {
        // Load culled level zero tiles with low priority.
        // For all other levels, only load culled tiles if preloadSiblings is enabled.
        queueTileLoad(primitive, primitive._tileLoadQueueLow, tile, frameState);
        tile._lastSelectionResult = TileSelectionResult.CULLED;
    } else {
        tile._lastSelectionResult = TileSelectionResult.CULLED;
    }

    tile._lastSelectionResultFrame = frameState.frameNumber;
}

function screenSpaceError(primitive, frameState, tile) {
    if (
        frameState.mode === SceneMode.SCENE2D ||
        frameState.camera.frustum instanceof OrthographicFrustum ||
        frameState.camera.frustum instanceof OrthographicOffCenterFrustum
    ) {
        return screenSpaceError2D(primitive, frameState, tile);
    }

    var maxGeometricError = primitive._tileProvider.getLevelMaximumGeometricError(
        tile.level
    );

    var distance = tile._distance;
    var height = frameState.context.drawingBufferHeight;
    var sseDenominator = frameState.camera.frustum.sseDenominator;

    var error = (maxGeometricError * height) / (distance * sseDenominator);

    if (frameState.fog.enabled) {
        error -=
            CesiumMath.fog(distance, frameState.fog.density) * frameState.fog.sse;
    }

    error /= frameState.pixelRatio;

    return error;
}

function screenSpaceError2D(primitive, frameState, tile) {
    var camera = frameState.camera;
    var frustum = camera.frustum;
    if (defined(frustum._offCenterFrustum)) {
        frustum = frustum._offCenterFrustum;
    }

    var context = frameState.context;
    var width = context.drawingBufferWidth;
    var height = context.drawingBufferHeight;

    var maxGeometricError = primitive._tileProvider.getLevelMaximumGeometricError(tile.level);
    var pixelSize = Math.max(frustum.top - frustum.bottom, frustum.right - frustum.left) / Math.max(width, height);
    var error = maxGeometricError / pixelSize;

    if (frameState.fog.enabled && frameState.mode !== SceneMode.SCENE2D) {
        error -= CesiumMath.fog(tile._distance, frameState.fog.density) * frameState.fog.sse;
    }

    error /= frameState.pixelRatio;

    return error;
}

function addTileToRenderList(primitive, tile) {
    primitive._tilesToRender.push(tile);
}

function processTileLoadQueue(primitive, frameState) {
    var tileLoadQueueHigh = primitive._tileLoadQueueHigh;
    var tileLoadQueueMedium = primitive._tileLoadQueueMedium;
    var tileLoadQueueLow = primitive._tileLoadQueueLow;

    if (tileLoadQueueHigh.length === 0 && tileLoadQueueMedium.length === 0 && tileLoadQueueLow.length === 0) {
        return;
    }

    // Remove any tiles that were not used this frame beyond the number
    // we're allowed to keep.
    primitive._tileReplacementQueue.trimTiles(primitive.tileCacheSize);

    var endTime = getTimestamp() + primitive._loadQueueTimeSlice;
    var tileProvider = primitive._tileProvider;

    var didSomeLoading = processSinglePriorityLoadQueue(primitive, frameState, tileProvider, endTime, tileLoadQueueHigh, false);
    didSomeLoading = processSinglePriorityLoadQueue(primitive, frameState, tileProvider, endTime, tileLoadQueueMedium, didSomeLoading);
    processSinglePriorityLoadQueue(primitive, frameState, tileProvider, endTime, tileLoadQueueLow, didSomeLoading);
}

function sortByLoadPriority(a, b) {
    return a._loadPriority - b._loadPriority;
}

function processSinglePriorityLoadQueue(primitive, frameState, tileProvider, endTime, loadQueue, didSomeLoading) {
    if (tileProvider.computeTileLoadPriority !== undefined) {
        loadQueue.sort(sortByLoadPriority);
    }

    for (var i = 0, len = loadQueue.length; i < len && (getTimestamp() < endTime || !didSomeLoading); ++i) {
        var tile = loadQueue[i];
        primitive._tileReplacementQueue.markTileRendered(tile);
        tileProvider.loadTile(frameState, tile);
        didSomeLoading = true;
    }

    return didSomeLoading;
}

var scratchRay = new Ray();
var scratchCartographic = new Cartographic();
var scratchPosition = new Cartesian3();
var scratchArray = [];

function updateHeights(primitive, frameState) {
    if (!primitive.tileProvider.ready) {
        return;
    }

    var tryNextFrame = scratchArray;
    tryNextFrame.length = 0;
    var tilesToUpdateHeights = primitive._tileToUpdateHeights;
    var terrainProvider = primitive._tileProvider.terrainProvider;

    var startTime = getTimestamp();
    var timeSlice = primitive._updateHeightsTimeSlice;
    var endTime = startTime + timeSlice;

    var mode = frameState.mode;
    var projection = frameState.mapProjection;
    var ellipsoid = primitive.tileProvider.tilingScheme.ellipsoid;
    var i;

    while (tilesToUpdateHeights.length > 0) {
        var tile = tilesToUpdateHeights[0];
        if (!defined(tile.data) || !defined(tile.data.mesh)) {
            // Tile isn't loaded enough yet, so try again next frame if this tile is still
            // being rendered.
            var selectionResult = tile._lastSelectionResultFrame === primitive._lastSelectionFrameNumber
                ? tile._lastSelectionResult
                : TileSelectionResult.NONE;
            if (selectionResult === TileSelectionResult.RENDERED || selectionResult === TileSelectionResult.CULLED_BUT_NEEDED) {
                tryNextFrame.push(tile);
            }
            tilesToUpdateHeights.shift();
            primitive._lastTileIndex = 0;
            continue;
        }
        var customData = tile.customData;
        var customDataLength = customData.length;

        var timeSliceMax = false;
        for (i = primitive._lastTileIndex; i < customDataLength; ++i) {
            var data = customData[i];

            if (tile.level > data.level) {
                if (!defined(data.positionOnEllipsoidSurface)) {
                    // cartesian has to be on the ellipsoid surface for `ellipsoid.geodeticSurfaceNormal`
                    data.positionOnEllipsoidSurface = Cartesian3.fromRadians(data.positionCartographic.longitude, data.positionCartographic.latitude, 0.0, ellipsoid);
                }

                if (mode === SceneMode.SCENE3D) {
                    var surfaceNormal = ellipsoid.geodeticSurfaceNormal(data.positionOnEllipsoidSurface, scratchRay.direction);

                    // compute origin point

                    // Try to find the intersection point between the surface normal and z-axis.
                    // minimum height (-11500.0) for the terrain set, need to get this information from the terrain provider
                    var rayOrigin = ellipsoid.getSurfaceNormalIntersectionWithZAxis(data.positionOnEllipsoidSurface, 11500.0, scratchRay.origin);

                    // Theoretically, not with Earth datums, the intersection point can be outside the ellipsoid
                    if (!defined(rayOrigin)) {
                        // intersection point is outside the ellipsoid, try other value
                        // minimum height (-11500.0) for the terrain set, need to get this information from the terrain provider
                        var minimumHeight;
                        if (defined(tile.data.tileBoundingRegion)) {
                            minimumHeight = tile.data.tileBoundingRegion.minimumHeight;
                        }
                        var magnitude = Math.min(defaultValue(minimumHeight, 0.0), -11500.0);

                        // multiply by the *positive* value of the magnitude
                        var vectorToMinimumPoint = Cartesian3.multiplyByScalar(surfaceNormal, Math.abs(magnitude) + 1, scratchPosition);
                        Cartesian3.subtract(data.positionOnEllipsoidSurface, vectorToMinimumPoint, scratchRay.origin);
                    }
                } else {
                    Cartographic.clone(data.positionCartographic, scratchCartographic);

                    // minimum height for the terrain set, need to get this information from the terrain provider
                    scratchCartographic.height = -11500.0;
                    projection.project(scratchCartographic, scratchPosition);
                    Cartesian3.fromElements(scratchPosition.z, scratchPosition.x, scratchPosition.y, scratchPosition);
                    Cartesian3.clone(scratchPosition, scratchRay.origin);
                    Cartesian3.clone(Cartesian3.UNIT_X, scratchRay.direction);
                }

                var position = tile.data.pick(scratchRay, mode, projection, false, scratchPosition);
                if (defined(position)) {
                    data.callback(position);
                    data.level = tile.level;
                }
            } else if (tile.level === data.level) {
                var children = tile.children;
                var childrenLength = children.length;

                var child;
                for (var j = 0; j < childrenLength; ++j) {
                    child = children[j];
                    if (Rectangle.contains(child.rectangle, data.positionCartographic)) {
                        break;
                    }
                }

                var tileDataAvailable = terrainProvider.getTileDataAvailable(child.x, child.y, child.level);
                var parentTile = tile.parent;
                if ((defined(tileDataAvailable) && !tileDataAvailable) ||
                    (defined(parentTile) && defined(parentTile.data) && defined(parentTile.data.terrainData) &&
                        !parentTile.data.terrainData.isChildAvailable(parentTile.x, parentTile.y, child.x, child.y))) {
                    data.removeFunc();
                }
            }

            if (getTimestamp() >= endTime) {
                timeSliceMax = true;
                break;
            }
        }

        if (timeSliceMax) {
            primitive._lastTileIndex = i;
            break;
        } else {
            primitive._lastTileIndex = 0;
            tilesToUpdateHeights.shift();
        }
    }
    for (i = 0; i < tryNextFrame.length; i++) {
        tilesToUpdateHeights.push(tryNextFrame[i]);
    }
}

function createRenderCommandsForSelectedTiles(primitive, frameState) {
    var tileProvider = primitive._tileProvider;
    var tilesToRender = primitive._tilesToRender;

    for (var i = 0, len = tilesToRender.length; i < len; ++i) {
        var tile = tilesToRender[i];
        tileProvider.showTileThisFrame(tile, frameState);
    }
}


class QuadtreePrimitiveExt{
    constructor() {
        QuadtreePrimitive.prototype.render = function(frameState) {
            var passes = frameState.passes;
            var tileProvider = this._tileProvider;

            if (passes.render) {
                tileProvider.beginUpdate(frameState);

                selectTilesForRendering(this, frameState);
                createRenderCommandsForSelectedTiles(this, frameState);

                /*************新增开始**************/
                var _imageryLayers = tileProvider._imageryLayers;
                for(var i = 0;i<_imageryLayers.length;i++){
                    var _imageryProvider = _imageryLayers._layers[i]._imageryProvider;
                    if(_imageryProvider.draw){
                        _imageryProvider.draw(this._tilesToRender);
                    }
                }
                /*************新增结束**************/

                tileProvider.endUpdate(frameState);
            }

            if (passes.pick && this._tilesToRender.length > 0) {
                tileProvider.updateForPick(frameState);
            }
        };
    }
}

module.exports = QuadtreePrimitiveExt;
new QuadtreePrimitiveExt();
},{}],12:[function(require,module,exports){
'use strict';
const CustomMap = module.exports = {};


//扩展cesium类
require('./ext/CameraExt');
require('./ext/QuadtreePrimitiveExt');
CustomMap.LabelCollectionExt = require('./ext/LabelCollectionExt');
CustomMap.BillboardCollection = require('./ext/BillboardCollection');
CustomMap.LabelTileServiceImageryProvider = require('./layer/label/LabelTileServiceImageryProvider');

// CustomMap.LabelTileServiceImageryProvider = require('./layer/label/LabelTileServiceImageryProvider');
// CustomMap.ModelTileServiceImageryProvider = require('./layer/model/ModelTileServiceImageryProvider');
CustomMap.ImageTileProvider = require('./layer/image/ImageTileProvider');





},{"./ext/BillboardCollection":8,"./ext/CameraExt":9,"./ext/LabelCollectionExt":10,"./ext/QuadtreePrimitiveExt":11,"./layer/image/ImageTileProvider":13,"./layer/label/LabelTileServiceImageryProvider":16}],13:[function(require,module,exports){
const Color = Cesium.Color;
const defaultValue = Cesium.defaultValue;
const defined = Cesium.defined;
const Event = Cesium.Event;
const GeographicTilingScheme = Cesium.GeographicTilingScheme;
const when = Cesium.when;

/**
 * @typedef {Object} TileCoordinatesImageryProvider.ConstructorOptions
 *
 * Initialization options for the TileCoordinatesImageryProvider constructor
 *
 * @property {TilingScheme} [tilingScheme=new GeographicTilingScheme()] The tiling scheme for which to draw tiles.
 * @property {Ellipsoid} [ellipsoid] The ellipsoid.  If the tilingScheme is specified,
 *                    this parameter is ignored and the tiling scheme's ellipsoid is used instead. If neither
 *                    parameter is specified, the WGS84 ellipsoid is used.
 * @property {Color} [color=Color.YELLOW] The color to draw the tile box and label.
 * @property {Number} [tileWidth=256] The width of the tile for level-of-detail selection purposes.
 * @property {Number} [tileHeight=256] The height of the tile for level-of-detail selection purposes.
 */

/**
 * An {@link ImageryProvider} that draws a box around every rendered tile in the tiling scheme, and draws
 * a label inside it indicating the X, Y, Level coordinates of the tile.  This is mostly useful for
 * debugging terrain and imagery rendering problems.
 *
 * @alias TileCoordinatesImageryProvider
 * @constructor
 *
 * @param {TileCoordinatesImageryProvider.ConstructorOptions} [options] Object describing initialization options
 */
function ImageTileProvider(options) {
  options = defaultValue(options, defaultValue.EMPTY_OBJECT);

  this._tilingScheme = defined(options.tilingScheme)
    ? options.tilingScheme
    : new GeographicTilingScheme({ ellipsoid: options.ellipsoid });
  this._color = defaultValue(options.color, Color.YELLOW);
  this._errorEvent = new Event();
  this._tileWidth = defaultValue(options.tileWidth, 256);
  this._tileHeight = defaultValue(options.tileHeight, 256);
  this._readyPromise = when.resolve(true);
  this.options = options;
  if(this.options.hasOwnProperty('showLevels')){
    this.showLevels = this.options['showLevels'];
    for(let i =0;i<this.showLevels.length;i++){
      this.showLevels[i] = parseInt(this.showLevels[i]);
    }
  }else{
    this.showLevels = [0,1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12, 13, 14, 15, 16, 17, 18, 19,20,21,22,23,24,25,26];
  }

  /**
   * The default alpha blending value of this provider, with 0.0 representing fully transparent and
   * 1.0 representing fully opaque.
   *
   * @type {Number|undefined}
   * @default undefined
   */
  this.defaultAlpha = undefined;

  /**
   * The default alpha blending value on the night side of the globe of this provider, with 0.0 representing fully transparent and
   * 1.0 representing fully opaque.
   *
   * @type {Number|undefined}
   * @default undefined
   */
  this.defaultNightAlpha = undefined;

  /**
   * The default alpha blending value on the day side of the globe of this provider, with 0.0 representing fully transparent and
   * 1.0 representing fully opaque.
   *
   * @type {Number|undefined}
   * @default undefined
   */
  this.defaultDayAlpha = undefined;

  /**
   * The default brightness of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0
   * makes the imagery darker while greater than 1.0 makes it brighter.
   *
   * @type {Number|undefined}
   * @default undefined
   */
  this.defaultBrightness = undefined;

  /**
   * The default contrast of this provider.  1.0 uses the unmodified imagery color.  Less than 1.0 reduces
   * the contrast while greater than 1.0 increases it.
   *
   * @type {Number|undefined}
   * @default undefined
   */
  this.defaultContrast = undefined;

  /**
   * The default hue of this provider in radians. 0.0 uses the unmodified imagery color.
   *
   * @type {Number|undefined}
   * @default undefined
   */
  this.defaultHue = undefined;

  /**
   * The default saturation of this provider. 1.0 uses the unmodified imagery color. Less than 1.0 reduces the
   * saturation while greater than 1.0 increases it.
   *
   * @type {Number|undefined}
   * @default undefined
   */
  this.defaultSaturation = undefined;

  /**
   * The default gamma correction to apply to this provider.  1.0 uses the unmodified imagery color.
   *
   * @type {Number|undefined}
   * @default undefined
   */
  this.defaultGamma = undefined;

  /**
   * The default texture minification filter to apply to this provider.
   *
   * @type {TextureMinificationFilter}
   * @default undefined
   */
  this.defaultMinificationFilter = undefined;

  /**
   * The default texture magnification filter to apply to this provider.
   *
   * @type {TextureMagnificationFilter}
   * @default undefined
   */
  this.defaultMagnificationFilter = undefined;
}

Object.defineProperties(ImageTileProvider.prototype, {
  /**
   * Gets the proxy used by this provider.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Proxy}
   * @readonly
   */
  proxy: {
    get: function () {
      return undefined;
    },
  },

  /**
   * Gets the width of each tile, in pixels. This function should
   * not be called before {@link TileCoordinatesImageryProvider#ready} returns true.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Number}
   * @readonly
   */
  tileWidth: {
    get: function () {
      return this._tileWidth;
    },
  },

  /**
   * Gets the height of each tile, in pixels.  This function should
   * not be called before {@link TileCoordinatesImageryProvider#ready} returns true.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Number}
   * @readonly
   */
  tileHeight: {
    get: function () {
      return this._tileHeight;
    },
  },

  /**
   * Gets the maximum level-of-detail that can be requested.  This function should
   * not be called before {@link TileCoordinatesImageryProvider#ready} returns true.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Number|undefined}
   * @readonly
   */
  maximumLevel: {
    get: function () {
      return undefined;
    },
  },

  /**
   * Gets the minimum level-of-detail that can be requested.  This function should
   * not be called before {@link TileCoordinatesImageryProvider#ready} returns true.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Number}
   * @readonly
   */
  minimumLevel: {
    get: function () {
      return undefined;
    },
  },

  /**
   * Gets the tiling scheme used by this provider.  This function should
   * not be called before {@link TileCoordinatesImageryProvider#ready} returns true.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {TilingScheme}
   * @readonly
   */
  tilingScheme: {
    get: function () {
      return this._tilingScheme;
    },
  },

  /**
   * Gets the rectangle, in radians, of the imagery provided by this instance.  This function should
   * not be called before {@link TileCoordinatesImageryProvider#ready} returns true.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Rectangle}
   * @readonly
   */
  rectangle: {
    get: function () {
      return this._tilingScheme.rectangle;
    },
  },

  /**
   * Gets the tile discard policy.  If not undefined, the discard policy is responsible
   * for filtering out "missing" tiles via its shouldDiscardImage function.  If this function
   * returns undefined, no tiles are filtered.  This function should
   * not be called before {@link TileCoordinatesImageryProvider#ready} returns true.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {TileDiscardPolicy}
   * @readonly
   */
  tileDiscardPolicy: {
    get: function () {
      return undefined;
    },
  },

  /**
   * Gets an event that is raised when the imagery provider encounters an asynchronous error.  By subscribing
   * to the event, you will be notified of the error and can potentially recover from it.  Event listeners
   * are passed an instance of {@link TileProviderError}.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Event}
   * @readonly
   */
  errorEvent: {
    get: function () {
      return this._errorEvent;
    },
  },

  /**
   * Gets a value indicating whether or not the provider is ready for use.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Boolean}
   * @readonly
   */
  ready: {
    get: function () {
      return true;
    },
  },

  /**
   * Gets a promise that resolves to true when the provider is ready for use.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Promise.<Boolean>}
   * @readonly
   */
  readyPromise: {
    get: function () {
      return this._readyPromise;
    },
  },

  /**
   * Gets the credit to display when this imagery provider is active.  Typically this is used to credit
   * the source of the imagery.  This function should not be called before {@link TileCoordinatesImageryProvider#ready} returns true.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Credit}
   * @readonly
   */
  credit: {
    get: function () {
      return undefined;
    },
  },

  /**
   * Gets a value indicating whether or not the images provided by this imagery provider
   * include an alpha channel.  If this property is false, an alpha channel, if present, will
   * be ignored.  If this property is true, any images without an alpha channel will be treated
   * as if their alpha is 1.0 everywhere.  Setting this property to false reduces memory usage
   * and texture upload time.
   * @memberof TileCoordinatesImageryProvider.prototype
   * @type {Boolean}
   * @readonly
   */
  hasAlphaChannel: {
    get: function () {
      return true;
    },
  },
});

/**
 * Gets the credits to be displayed when a given tile is displayed.
 *
 * @param {Number} x The tile X coordinate.
 * @param {Number} y The tile Y coordinate.
 * @param {Number} level The tile level;
 * @returns {Credit[]} The credits to be displayed when the tile is displayed.
 *
 * @exception {DeveloperError} <code>getTileCredits</code> must not be called before the imagery provider is ready.
 */
ImageTileProvider.prototype.getTileCredits = function (
  x,
  y,
  level
) {
  return undefined;
};

/**
 * Requests the image for a given tile.  This function should
 * not be called before {@link TileCoordinatesImageryProvider#ready} returns true.
 *
 * @param {Number} x The tile X coordinate.
 * @param {Number} y The tile Y coordinate.
 * @param {Number} level The tile level.
 * @param {Request} [request] The request object. Intended for internal use only.
 * @returns {Promise.<HTMLImageElement|HTMLCanvasElement>|undefined} A promise for the image that will resolve when the image is available, or
 *          undefined if there are too many active requests to the server, and the request
 *          should be retried later.  The resolved image may be either an
 *          Image or a Canvas DOM object.
 */
ImageTileProvider.prototype.requestImage = function (
  x,
  y,
  level,
  request
) {
  if(this.showLevels.indexOf(level) > -1){
    return this.options.img;
  }else{
    return document.createElement('canvas');
  }
};

/**
 * Picking features is not currently supported by this imagery provider, so this function simply returns
 * undefined.
 *
 * @param {Number} x The tile X coordinate.
 * @param {Number} y The tile Y coordinate.
 * @param {Number} level The tile level.
 * @param {Number} longitude The longitude at which to pick features.
 * @param {Number} latitude  The latitude at which to pick features.
 * @return {Promise.<ImageryLayerFeatureInfo[]>|undefined} A promise for the picked features that will resolve when the asynchronous
 *                   picking completes.  The resolved value is an array of {@link ImageryLayerFeatureInfo}
 *                   instances.  The array may be empty if no features are found at the given location.
 *                   It may also be undefined if picking is not supported.
 */
ImageTileProvider.prototype.pickFeatures = function (
  x,
  y,
  level,
  longitude,
  latitude
) {
  return undefined;
};


module.exports = ImageTileProvider;

},{}],14:[function(require,module,exports){
"use strict";
const GAnnoAvoid = require("./avoid/GAnnoAvoid");
const GCutLine = require("./avoid/GCutLine");
let tiles = [];
let labelAvoid = null;
let finished = true;

let styleMap;
//是否需要重新切割线注记
let needCutLine = false;

let z;
let viewer;

class AvoidTile {
  static init(ts, heading, sm, vr) {
    finished = false;
    styleMap = sm;
    tiles = ts;
    viewer = vr;
    needCutLine = false;
    let l = viewer.camera.getLevel();
    if (!z || Math.abs(l - z) > 0.1) {
      needCutLine = true;
    }
    z = l;
    labelAvoid = new GAnnoAvoid(null, null, heading);
  }

  static setTiles(ts, heading) {
    finished = false;
    tiles = ts;

    labelAvoid = new GAnnoAvoid(null, null, heading);
  }

  static avoidTile() {
    const startTime = new Date().getTime();
    const shouldPausePlacement = () => {
      const elapsedTime = new Date().getTime() - startTime;
      return elapsedTime > 3;
    };

    let level = viewer.camera.getLevel();
    // console.time('avoidTile');
    while (tiles.length > 0) {
      // console.log('+++++++++++++++++');
      let tile = tiles.shift();
      if (tile.isDestroy) {
        continue;
      }

      //注记第一次参与避让，不用重新切线注记
      if (needCutLine) {
        // let scale = Math.pow(2,tile.level)/Math.pow(2,level)*0.5;
        // AvoidTile.cutLine(tile,tile.features,scale);
      }

      //转换为屏幕坐标
      tile.updateScreenPt(tile.features);

      //计算避让box
      labelAvoid.GLabelBox.setBox(tile.features, tile.styleMap, true);
      //开始避让
      labelAvoid.defaultAvoid(tile.features, tile.styleMap, true, true, false);

      AvoidTile.updateLineLable(tile.features);
      //避让
      if (shouldPausePlacement()) {
        // console.timeEnd('avoidTile');
        return;
      }
    }
    // console.timeEnd('avoidTile');
    finished = true;
  }

  static cutLine(tile, features, scale) {
    for (let i = 0; i < features.length; i++) {
      let feature = features[i];
      if (feature.lineType != "text") {
        continue;
      }

      let f = GCutLine.createLineTextFeatrue(
        feature,
        styleMap[feature.styleId],
        0,
        scale
      ).feature;

      feature.anglePositions = [];
      if (f) {
        for (let j = 0; j < f.sourceAngleData.length; j++) {
          let anglePosition = [];
          let sourceAngleData = f.sourceAngleData[j];
          let position = tile.toLonLat([
            sourceAngleData[0][0],
            sourceAngleData[0][1],
          ]);
          anglePosition.push(position);
          anglePosition.push(feature.sourceAngleData[j][1]);
          feature.anglePositions.push(anglePosition);

          let label = feature.labels[j];
          if (feature.anglePositions[j][0]) {
            label.show = true;
            label.position = feature.anglePositions[j][0];
          } else {
            label.show = false;
          }
        }
      }
    }
  }

  static screenToposition(x, y) {
    let c = new Cesium.Cartesian2(x, y);
    let position = viewer.camera.pickEllipsoid(c, viewer.scene.globe.ellipsoid);
    return position;
  }

  //更新线注记的角度和是否反向
  static updateLineLable(features) {
    for (let i = 0; i < features.length; i++) {
      let feature = features[i];
      if (!feature.hidden && feature.lineType == "text" && feature.labels) {
        for (let j = 0; j < feature.labels.length; j++) {
          let label = feature.labels[j];
          if (feature.changeDirection) {
            label.text = feature.label.charAt(feature.labels.length - 1 - j);
          } else {
            label.text = feature.label.charAt(j);
          }

          let angle = -feature.textPoints[j][2];
          if (angle != label.angle) {
            label.angle = angle;
            label.rotation = Cesium.Math.toRadians(angle);
          }
        }
      }
    }
  }

  static isFinished() {
    return finished;
  }
}

module.exports = AvoidTile;

},{"./avoid/GAnnoAvoid":18,"./avoid/GCutLine":19}],15:[function(require,module,exports){
/**
 * Created by kongjian on 2017/5/1.
 */
const LabelDrawer = require('./avoid/LabelDrawer');
const ParseLabelData = require('./avoid/ParseLabelData');
const GridFilterLabel = require('./avoid/GridFilterLabel');
const LabelCollectionExt = require('../../ext/LabelCollectionExt');

const BEGIN = 1;
const ADDED = 2;
const REMOVED = 3;
class LabelTile{
    constructor(name,xyz,tileSize,rectangle,data,indexDbNames,styleFun,dataType,level,styleMap,
                textures,scene) {
        this.name = name;
        this.xyz = xyz;
        this.tileSize = tileSize;
        this.rectangle = rectangle;
        this.sourceData = data;
        this.indexDbNames = indexDbNames;
        this.styleFun = styleFun;
        this.dataType = dataType;
        this.level = level;
        this.styleMap = styleMap;
        this.textures = textures;
        this.scene = scene;

        this.labelCollection = new LabelCollectionExt({blendOption:Cesium.BlendOption.OPAQUE,enuEnabled:false});
        this.roadLabelCollection = new LabelCollectionExt({blendOption:Cesium.BlendOption.OPAQUE,enuEnabled:true});
        this.billboardCollection = new Cesium.BillboardCollection({blendOption:Cesium.BlendOption.OPAQUE});
        //全局是否开启避让
        this.ableAvoid = true;
        //全局是否开启权重排序
        this.ableWeight = true;
        //过滤格网大小
        this.cellsize = 4;
        //网格内保留点的个数
        this.maxPerCell = 1;

        this.state =BEGIN;
        this.ready = false;
        this.parse();
    }

    reset(){
        this.state =BEGIN;
        this.ready = false;
        this.parse();
    }

    parse(){
        // console.time('执行样式文件');
        if(this.dataType == 'Binary'){
            let drawer = new LabelDrawer(this.sourceData,this.styleMap,this.level);
            this.styleFun.call({}, drawer, this.level);
        }else{
            let render = new LabelDrawer(this.sourceData,this.styleMap,this.level);
            this.styleFun.call({}, render, this.level);
        }

        // console.timeEnd('执行样式文件');

        // console.time('注记解析');
        //转换瓦片坐标为屏幕坐标,并构造label数据
        let features = ParseLabelData.parseLayerDatas(
            this.sourceData,this.styleMap,this.textures,this.xyz,true);
        // console.timeEnd('注记解析');

        // console.time('去除瓦片外的注记');
        //移除瓦片外的点注记
        features.pointFeatures = GridFilterLabel.removeTileOutPointFeatures(features.pointFeatures,this.tileSize);
        // console.timeEnd('去除瓦片外的注记');
        // console.time('第一次过滤');
        //第一次格网过滤
        let labelFeatures = GridFilterLabel.fristFilter(features.pointFeatures,features.lineFeatures,
            this.styleMap,this.ableWeight,true, this.tileSize,this.cellsize,this.tileSize*0.5,this.maxPerCell);
        // console.timeEnd('第一次过滤');

        // console.time('第二次过滤');
        //第二次格网过滤
        this.features = GridFilterLabel.scendFilter(labelFeatures.pointFeatures,labelFeatures.lineFeatures,this.styleMap,this.ableWeight,true,this.tileSize, this.cellsize, this.tileSize*0.5);
        // console.timeEnd('第二次过滤');

        //构造需要绘制的label和Billboard对象
        this.toLabelBillboards(this.features);
        // console.timeEnd('转换为绘制对象参数');

        this.updateData();
    }

    updateData(){
        // console.time('转换为经纬度');
        //瓦片坐标转成经纬度坐标
        this.toCartesian3(this.features);
        // console.timeEnd('转换为经纬度');
        this.updateLabelPostion(this.features);
    }

    toCartesian3(features){
        for(let i =0;i<features.length;i++){
            let feature = features[i];
            feature.anglePositions = [];

            for(let j = 0;j<feature.sourceAngleData.length;j++){
                let anglePosition = [];
                let sourceAngleData = feature.sourceAngleData[j];
                let position = this.toLonLat([sourceAngleData[0][0],sourceAngleData[0][1]]);
                anglePosition.push(position);
                anglePosition.push(sourceAngleData[1]);
                feature.anglePositions.push(anglePosition);
            }
        }
    }

    toLonLat(pt){
        let x = pt[0];
        let y = pt[1];
        let lon = Cesium.Math.toDegrees(this.rectangle.west + this.rectangle.width/ this.tileSize* x);
        let lat = Cesium.Math.toDegrees(this.rectangle.north - this.rectangle.height/ this.tileSize* y);
        let position = Cesium.Cartesian3.fromDegrees(lon, lat,0);
        return position;
    }




    /**
     * 将经世界坐标转成屏幕坐标
     */
    updateScreenPt(features){
        for(let i =0;i<features.length;i++) {
            let feature = features[i];
            feature.datas = [];
            for(let j = 0;j<feature.anglePositions.length;j++){
                let anglePostion = feature.anglePositions[j];
                if(!anglePostion[0]){
                    feature.datas.push([[-50,-50],anglePostion[1]]);
                    continue;
                }
                var pt = Cesium.SceneTransforms.wgs84ToWindowCoordinates(this.scene, anglePostion[0]);
                if(pt){
                    feature.datas.push([[pt.x,pt.y],anglePostion[1]]);
                }else{
                    //在视线外
                    feature.datas.push([[-50,-50],anglePostion[1]]);
                }
            }
        }
    }

    /**
     * 将要素转换成能绘制的label和Billboard对象
     * @param features
     */
    toLabelBillboards(features){
        for(let i = 0;i<features.length;i++){
            let feature = features[i];
            if(feature.type == 1){
                this.toPointLabelOption(feature);
            }
            // if(feature.type == 2){
            //     this.toLineLabelOption(feature);
            // }
        }
    }

    /**
     *  当高程数据更新后，更新注记的高程值
     * @param features
     */
    updateLabelPostion(features){
        for(let i = 0;i<features.length;i++){
            let feature = features[i];

            if(feature.labelOptions){
                for(let i = 0;i<feature.labelOptions.length;i++){
                    let labelOption = feature.labelOptions[i];
                    labelOption.position = feature.anglePositions[i][0];
                }
            }


            if(feature.billboardOption){
                feature.billboardOption.position = feature.anglePositions[0][0];
            }

            if(feature.labels){
                for(let j = 0;j<feature.labels.length;j++){
                    let label = feature.labels[j];
                    label.position = feature.anglePositions[j][0];
                }
            }

            if(feature.billboard){
                feature.billboard.position = feature.anglePositions[0][0];
            }
        }
    }


    /**
     *
     * @param feature
     */
    toPointLabelOption(feature){
        feature.labelOptions = [];
        let style = this.styleMap[feature.styleId];

        let iconWidth = feature.iconImg? feature.iconImg.width:0;
        let dis = style.graphicDistance + iconWidth *0.5;
        let option = {
            show:false,
            disableDepthTestDistance:Number.POSITIVE_INFINITY,
            text:feature.label+'',
            font:style.pointFillFont,
            style: Cesium.LabelStyle.FILL,
            verticalOrigin:Cesium.VerticalOrigin.CENTER,
            pixelOffset: new Cesium.Cartesian2(dis, 0),
            fillColor: Cesium.Color.fromCssColorString(style.pointFillStyle).withAlpha(style.pointFillAlpha)
        };

        //有背景框
        if (style.pointHashBackground == true){
            option.showBackground = true;
            option.backgroundColor =Cesium.Color.fromCssColorString(style.pointBackgroundColor).withAlpha(style.pointBackgroundAlpha);
            option.backgroundPadding = new Cesium.Cartesian2(style.pointBackgroundGap, style.pointBackgroundGap);
        }

        //有描边
        if (style.pointHashOutline == true){
            option.style =Cesium.LabelStyle.FILL_AND_OUTLINE;
            option.outlineColor = Cesium.Color.fromCssColorString(style.pointStrokeStyle).withAlpha(style.pointStrokeAlpha),
                option.outlineWidth = style.pointLineWidth+2;
        }

        feature.labelOptions.push(option);
        //有图标
        if(feature.iconImg){
            let option = this.toBillboardOption(feature.iconImg,style);
            feature.billboardOption = option;
        }
    }

    toLineLabelOption(feature){
        feature.labelOptions = [];
        let style = this.styleMap[feature.styleId];
        if(feature.lineType == 'text'){
            if(style.lineHashBackground == true){
                let index = Math.floor(feature.sourceAngleData.length/2);

                let option = {
                    show:false,
                    disableDepthTestDistance:Number.POSITIVE_INFINITY,
                    text:feature.label+'',
                    font:style.lineFillFont,
                    style: Cesium.LabelStyle.FILL,
                    verticalOrigin:Cesium.VerticalOrigin.CENTER,
                    horizontalOrigin:Cesium.HorizontalOrigin.CENTER,
                    fillColor: Cesium.Color.fromCssColorString(style.lineFillStyle).withAlpha(style.lineFillAlpha)
                };

                //有背景框
                option.showBackground = true;
                option.backgroundColor =Cesium.Color.fromCssColorString(style.backgroundColor).withAlpha(style.backgroundAlpha),
                    option.backgroundPadding = style.lineBackgroundGap;

                feature.labelOptions.push(option);
            }else if(feature.sourceAngleData.length == 1){
                let option = {
                    show:false,
                    disableDepthTestDistance:Number.POSITIVE_INFINITY,
                    text:feature.label+'',
                    font:style.lineFillFont,
                    style: Cesium.LabelStyle.FILL,
                    verticalOrigin:Cesium.VerticalOrigin.CENTER,
                    horizontalOrigin:Cesium.HorizontalOrigin.CENTER,
                    fillColor: Cesium.Color.fromCssColorString(style.lineFillStyle).withAlpha(style.lineFillAlpha)
                };

                feature.labelOptions.push(option);
            }else{
                for(let i = 0;i<feature.sourceAngleData.length;i++){
                    let sourceAnglePosition = feature.sourceAngleData[i];
                    let option = {
                        show:false,
                        disableDepthTestDistance:Number.POSITIVE_INFINITY,
                        text:(feature.label+'').charAt(i),
                        font:style.lineFillFont,
                        style: Cesium.LabelStyle.FILL,
                        verticalOrigin:Cesium.VerticalOrigin.CENTER,
                        horizontalOrigin:Cesium.HorizontalOrigin.CENTER,
                        rotation:Cesium.Math.toRadians(sourceAnglePosition[1]),
                        fillColor: Cesium.Color.fromCssColorString(style.lineFillStyle).withAlpha(style.lineFillAlpha)
                    };

                    //有描边
                    if (style.lineHashOutline == true){
                        option.style =Cesium.LabelStyle.FILL_AND_OUTLINE;
                        option.outlineColor = Cesium.Color.fromCssColorString(style.lineStrokeStyle).withAlpha(style.lineStrokeAlpha),
                            option.outlineWidth = style.lineLineWidth;
                    }

                    feature.labelOptions.push(option);
                }
            }
        }

        if(feature.lineType == 'code'){
            let style = this.styleMap[feature.styleId];

            let option = {
                show:false,
                disableDepthTestDistance:Number.POSITIVE_INFINITY,
                text:feature.label+'',
                font:style.codeLineFillFont,
                style: Cesium.LabelStyle.FILL,
                verticalOrigin:Cesium.VerticalOrigin.CENTER,
                horizontalOrigin:Cesium.HorizontalOrigin.CENTER,
                fillColor: Cesium.Color.fromCssColorString(style.codeLineFillStyle).withAlpha(style.codeLineFillAlpha)
            };

            //背景框
            option.showBackground = true;
            option.backgroundColor =Cesium.Color.fromCssColorString(style.codeBackgroundColor).withAlpha(style.codeBackgroundAlpha);
            option.backgroundPadding = new Cesium.Cartesian2(style.codeLineBackgroundGap, style.codeLineBackgroundGap);

            //有描边
            if(style.codeLineHashOutline == true){
                option.style =Cesium.LabelStyle.FILL_AND_OUTLINE;
                option.outlineColor = Cesium.Color.fromCssColorString(style.codeLineStrokeStyle).withAlpha(style.codeLineStrokeAlpha),
                    option.outlineWidth = style.codeLineLineWidth+2;
            }

            feature.labelOptions.push(option);
        }
    }

    /**
     *
     * @param feature
     */
    toBillboardOption(image,style) {
        let width = style.graphicWidth;
        let height = style.graphicHeight;

        if(!width || !height){
            width = image.width;
            height = image.height;
        }

        let billboardOption = {
            show:false,
            disableDepthTestDistance:Number.POSITIVE_INFINITY,
            image:image,
            width:width,
            height:height
        };
        return billboardOption;
    }



    addToMap(){
        // console.time('构建绘制对象并添加到绘制列表中');
        if(this.state == BEGIN){
            this.toDrawLabel();
        }

        if(this.labelCollection._labels.length >0){
            this.scene.primitives.add(this.labelCollection);
        }

        if(this.roadLabelCollection._labels.length >0) {
            this.scene.primitives.add(this.roadLabelCollection);
        }
        if(this.billboardCollection._billboards.length >0) {
            this.scene.primitives.add(this.billboardCollection);
        }

        this.updateNow();
        // console.timeEnd('构建绘制对象并添加到绘制列表中');
        // console.log('注记个数：'+this.features.length);

        this.state = ADDED;
    }

    toDrawLabel(){
        for(let i =0;i<this.features.length;i++){
            let feature  = this.features[i];
            feature.labels = [];
            if(feature.type == 1){
                for(let j = 0;j<feature.labelOptions.length;j++){
                    feature.labels.push(this.labelCollection.add(feature.labelOptions[j]));
                }
                if(feature.iconImg){
                    feature.billboard = this.billboardCollection.add(feature.billboardOption);
                }
            }

            // if(feature.type == 2){
            //     if(feature.lineType == 'text'){
            //         for(let k = 0;k<feature.labelOptions.length;k++){
            //             feature.labels.push(this.roadLabelCollection.add(feature.labelOptions[k]));
            //         }
            //     }
            //
            //     if(feature.lineType == 'code'){
            //         for(let m = 0;m<feature.labelOptions.length;m++){
            //             feature.labels.push(this.labelCollection.add(feature.labelOptions[m]));
            //         }
            //     }
            // }
        }
    }

    updateNow(){
        if(this.labelCollection._labels.length >0){
            this.labelCollection.update(this.scene._frameState);
        }

        if(this.roadLabelCollection._labels.length >0) {
            this.roadLabelCollection.update(this.scene._frameState);
        }
        if(this.billboardCollection._billboards.length >0) {
            this.billboardCollection.update(this.scene._frameState);
        }

    }

    remove(){
        if(this.state ==ADDED){
            this.scene.primitives.remove(this.labelCollection);
            this.scene.primitives.remove(this.roadLabelCollection);
            this.scene.primitives.remove(this.billboardCollection);
            this.state = REMOVED;
        }
    }

    show(){
        if(this.state == BEGIN || this.state == REMOVED){
            this.addToMap();
        }
    }

    destroy(){
        this.remove();
        this.labelCollection.destroy();
        this.roadLabelCollection.destroy();
        this.billboardCollection.destroy();
        this.isDestroy = true;
    }

}

module.exports = LabelTile;


},{"../../ext/LabelCollectionExt":10,"./avoid/GridFilterLabel":23,"./avoid/LabelDrawer":24,"./avoid/ParseLabelData":25}],16:[function(require,module,exports){
const combine = Cesium.combine;
const Credit  = Cesium.Credit;
const defaultValue = Cesium.defaultValue;
const defined = Cesium.defined;
const DeveloperError = Cesium.DeveloperError;
const Event = Cesium.Event;
const freezeObject = Cesium.freezeObject;
const isArray = Array.isArray;
const Rectangle = Cesium.Rectangle;
const Resource = Cesium.Resource;
const WebMercatorTilingScheme = Cesium.WebMercatorTilingScheme;
const defer =Cesium.defer;
const TimeDynamicImagery = Cesium.TimeDynamicImagery;
const LabelTile = require('./LabelTile');
const GlyphSource = require('./glyph/GlyphSource');
const AvoidTile = require('./AvoidTile');
const Buffer = require('../../utils/Buffer');
const VarintReader = require('../../utils/VarintReader');

let defaultParameters = {
    service : 'WMTS',
    version : '1.0.0',
    request : 'GetTile'
};

/**
 *
 * @see ArcGisMapServerImageryProvider
 * @see BingMapsImageryProvider
 * @see GoogleEarthEnterpriseMapsProvider
 * @see OpenStreetMapImageryProvider
 * @see SingleTileImageryProvider
 * @see TileMapServiceImageryProvider
 * @see WebMapServiceImageryProvider
 * @see UrlTemplateImageryProvider
 */
class LabelTileServiceImageryProvider{
    constructor(viewer,options) {
        this.viewer = viewer;
        this.indexDbName = 'house_'+this.indexDbName;
        options = defaultValue(options, defaultValue.EMPTY_OBJECT);
        this.id = Math.random();
        this.scene = viewer.scene;
        this.needDecode = defaultValue(options.needDecode, false);

        //>>includeStart('debug', pragmas.debug);
        if (!defined(options.url)) {
            throw new DeveloperError('options.url is required.');
        }
        //>>includeEnd('debug');

        let resource = Resource.createIfNeeded(options.url);

        let style = options.style;
        let tileMatrixSetID = options.tileMatrixSetID;
        let url = resource.url;
        if (url.indexOf('{') >= 0) {
            let templateValues = {
                style: style,
                Style: style,
                TileMatrixSet: tileMatrixSetID
            };

            resource.setTemplateValues(templateValues);
            this._useKvp = false;
        } else {
            resource.setQueryParameters(defaultParameters);
            this._useKvp = true;
        }

        this._resource = resource;
        this._layer = options.layer;
        this._style = style;
        this._tileMatrixSetID = tileMatrixSetID;
        this._tileMatrixLabels = options.tileMatrixLabels;
        this._format = defaultValue(options.format, 'image/jpeg');
        this._tileDiscardPolicy = options.tileDiscardPolicy;

        this._tilingScheme = defined(options.tilingScheme) ? options.tilingScheme : new WebMercatorTilingScheme({ellipsoid: options.ellipsoid});
        this._tileWidth = defaultValue(options.tileWidth, 256);
        this._tileHeight = defaultValue(options.tileHeight, 256);

        this._minimumLevel = defaultValue(options.minimumLevel, 0);
        this._maximumLevel = options.maximumLevel;

        this._rectangle = defaultValue(options.rectangle, this._tilingScheme.rectangle);
        this._dimensions = options.dimensions;

        let that = this;
        this._reload = undefined;
        if (defined(options.times)) {
            this._timeDynamicImagery = new TimeDynamicImagery({
                clock: options.clock,
                times: options.times,
                requestImageFunction: function (x, y, level, request, interval) {
                    return requestImage(that, x, y, level, request, interval);
                },
                reloadFunction: function () {
                    if (defined(that._reload)) {
                        that._reload();
                    }
                }
            });
        }

        this._readyPromise = defer();

        // Check the number of tiles at the minimum level.  If it's more than four,
        // throw an exception, because starting at the higher minimum
        // level will cause too many tiles to be downloaded and rendered.
        let swTile = this._tilingScheme.positionToTileXY(Rectangle.southwest(this._rectangle), this._minimumLevel);
        let neTile = this._tilingScheme.positionToTileXY(Rectangle.northeast(this._rectangle), this._minimumLevel);
        let tileCount = (Math.abs(neTile.x - swTile.x) + 1) * (Math.abs(neTile.y - swTile.y) + 1);
        //>>includeStart('debug', pragmas.debug);
        if (tileCount > 4) {
            throw new DeveloperError('The imagery provider\'s rectangle and minimumLevel indicate that there are ' + tileCount + ' tiles at the minimum level. Imagery providers with more than four tiles at the minimum level are not supported.');
        }
        //>>includeEnd('debug');

        this._errorEvent = new Event();

        let credit = options.credit;
        this._credit = typeof credit === 'string' ? new Credit(credit) : credit;

        this._subdomains = options.subdomains;
        if (isArray(this._subdomains)) {
            this._subdomains = this._subdomains.slice();
        } else if (defined(this._subdomains) && this._subdomains.length > 0) {
            this._subdomains = this._subdomains.split('');
        } else {
            this._subdomains = ['a', 'b', 'c'];
        }

        this.dataType = 'binary';
        if(options.hasOwnProperty('dataType')){
            this.dataType = options['dataType'];
        }else{
            this.dataType = 'Json';
        }


        this.needDecode = options.needDecode;
        this.parseUrl(options.url);

        let promises = this.loadStyle();

        if(this.dataType == 'binary'){
            let styleUrl = this.host + '/mapserver/serverInfo/'+this.servername+'.json?'+Math.random();
            let resource = Resource.createIfNeeded(styleUrl);
            let promise2 = resource.fetchJson();
            promises.push(promise2);
        }

        this.hasTerrain = false;
        if(viewer.terrainProvider.name == 'RGBWorldTerrainProvider'){
            this.hasTerrain = true;
        }

        // this.dbMap = {};
        // //获取本图层下面的图层indexDbNames
        // this.indexDbNames = this.getBottomProviderIndexDbNames();
        // let promise3 = ElevationTool.getDBMap(this.indexDbNames,this.dbMap).promise;
        // promises.push(promise3);

        Promise.all(promises).then(function(data){
            let results = data[2];
            if (results && results.layerMap) {
                this.serverInfo = {};
                this.layerFieldMap = {};
                for (let key in results.layerMap) {
                    this.serverInfo[key] = {
                        geometryType: results.layerMap[key].geometryType,
                        fieldsConfig: results.layerMap[key].fields
                    };
                    if (!this.layerFieldMap[key]) {
                        this.layerFieldMap[key] = results.layerMap[key].fields.length;
                    }
                }
            };

            this.ready = {
                value : true
            }
            this._readyPromise.resolve(true);
        }.bind(this));


        this.cache = {};
        //纹理
        this.textures = {};
        //样式
        this.styleMap = {};


        if(options.glyphUrl  && options.fontName){
            this.fontName = options.fontName;
            if(!this.viewer.glyphSource){
                this.viewer.glyphSource = new GlyphSource(options.glyphUrl);
            }
        }


        //上一次的坐标点
        this.prevPosition = null;
        //上一次渲染的瓦片个数
        this.prevRenderTilesLength = -1;
        this.image  = document.createElement('canvas');
    }



    updateStle(url){
        let resource = Resource.createIfNeeded(url);
        let style = this._style;
        let tileMatrixSetID = this.tileMatrixSetID;
        url = resource.url;
        if (url.indexOf('{') >= 0) {
            let templateValues = {
                style: style,
                Style: style,
                TileMatrixSet: tileMatrixSetID
            };

            resource.setTemplateValues(templateValues);
            this._useKvp = false;
        } else {
            resource.setQueryParameters(defaultParameters);
            this._useKvp = true;
        }

        this._resource = resource;
        this.parseUrl(url);

        Promise.all(this.loadStyle()).then(function(){
            for(let key in this.cache){
                let labelTile = this.cache[key];
                labelTile.reset();
            }
        }.bind(this));

        //纹理
        this.textures = {};
        //样式
        this.styleMap = {};
    }

    draw(tilesToRender){
        let renderTileMap = this.getRenderTileMap(tilesToRender);

        //移除不是当前屏幕要显示的瓦片
        for(let key in this.cache){
            if (!renderTileMap[key]){
                let tile = this.cache[key];
                tile.remove();
            }
        }


        let renderTiles = [];
        //增加本次最新的瓦片去绘制
        for(let name in renderTileMap){
            let labelTile = this.cache[name];
            if(labelTile && labelTile.ready){
                renderTiles.push(labelTile);
                labelTile.show(this.styleFun);
            }
        }

        this.avoid(renderTiles);
    }

    avoid(renderTiles){
        let position = this.scene.camera.position;
        let dis = 100;
        if(this.prevPosition){
            dis = Cesium.Cartesian3.distance(position,this.prevPosition);
        }

        let heading = Cesium.Math.toDegrees(this.viewer.camera.heading).toFixed(2);
        if(heading > 180){
            heading = heading - 360;
        }


        if(dis >10){
            AvoidTile.init(renderTiles,heading,this.styleMap,this.viewer);
            this.prevPosition = new Cesium.Cartesian3(position.x,position.y,position.z);
        }else{
            if(heading !=this.prevHeading || this.prevRenderTilesLength !=renderTiles.length && renderTiles.length  > 0){
                AvoidTile.setTiles(renderTiles,heading);
                this.prevRenderTilesLength = renderTiles.length;
            }
            this.prevHeading = heading;
        }

        if(!AvoidTile.isFinished()){
            AvoidTile.avoidTile();
        }
    }

    /**
     * 获取当前要显示的tile
     * @returns {{}}
     */
    getRenderTileMap(renderTiles){
        let renderTileMap ={};
        for(let i = 0;i<renderTiles.length;i++){
            let tileImagerys = renderTiles[i].data.imagery;
            for(let j = 0;j<tileImagerys.length;j++){
                let tileImagery = tileImagerys[j];
                let imagery = tileImagery.readyImagery;
                if(imagery && imagery.imageryLayer._imageryProvider.id == this.id){
                    let key = imagery.x+'_'+imagery.y+'_'+imagery.level;
                    renderTileMap[key] = true;
                }
            }
        }

        return renderTileMap;
    }

    /**
     * 解析url
     */
    parseUrl(url){
        let urlParts = url.split('?');
        let urlPartOne = urlParts[0].split('/mapserver/');

        this.host = urlPartOne[0];
        if(this._subdomains.length > 0){
            this.host = this.host.replace('{s}',this._subdomains[0]);
        }

        this.servername = urlPartOne[1].split('/')[1];

        this.queryParam = urlParts[1];
        let params = this.queryParam.split('&');
        for(let i = 0;i<params.length;i++){
            let param = params[i];
            let keyValue = param.split('=');
            if(keyValue[0] == 'styleId'){
                this.styleId = keyValue[1];
                return;
            }
        }
    };

    loadStyle(){
        let styleUrl = this.host + '/mapserver/styleInfo/'+this.servername+'/'+this.styleId+'/label/style.js?'+Math.random();
        let resource = Resource.createIfNeeded(styleUrl);
        let promise1 = resource.fetchText().then(function(result){
            if(this.dataType == 'binary'){
                this.styleFun = new Function("render","level", result);
            }else{
                this.styleFun = new Function("drawer","level", result);
            }
        }.bind(this));


        let deferred = defer();
        let imageUrl = this.host + '/mapserver/styleInfo/'+this.servername+'/'+this.styleId+'/label/texture.js?'+Math.random();
        let imageResource = Resource.createIfNeeded(imageUrl);
        imageResource.fetchText().then(function(deferred,result){
            let textures = JSON.parse(result);
            let totalCount = 0;
            for(let i in textures){
                totalCount++;
            }

            if(totalCount == 0){
                deferred.resolve();
                return;
            }

            let count = 0;
            for(let key in textures){
                let img = new Image();
                img.name = key;
                img.onload = function(data) {
                    count++;
                    let name = data.target.name;
                    this.textures[name] =data.target;
                    if(count == totalCount){
                        deferred.resolve();
                    }
                }.bind(this);
                img.src = textures[key];
            }
        }.bind(this,deferred));

        return [promise1,deferred.promise];
    };

    requestImageNow(imageryProvider, col, row, level, request, interval) {
        let labels = imageryProvider._tileMatrixLabels;
        let tileMatrix = defined(labels) ? labels[level] : level.toString();
        let subdomains = imageryProvider._subdomains;
        let staticDimensions = imageryProvider._dimensions;
        let dynamicIntervalData = defined(interval) ? interval.data : undefined;

        let resource;
        if (!imageryProvider._useKvp) {
            let templateValues = {
                z: tileMatrix,
                y: row.toString(),
                x: col.toString(),
                s: subdomains[(col + row + level) % subdomains.length]
            };

            resource = imageryProvider._resource.getDerivedResource({
                request: request
            });
            resource.setTemplateValues(templateValues);

            if (defined(staticDimensions)) {
                resource.setTemplateValues(staticDimensions);
            }

            if (defined(dynamicIntervalData)) {
                resource.setTemplateValues(dynamicIntervalData);
            }
        } else {
            // build KVP request
            let query = {};
            query.tilematrix = tileMatrix;
            query.layer = imageryProvider._layer;
            query.style = imageryProvider._style;
            query.tilerow = row;
            query.tilecol = col;
            query.tilematrixset = imageryProvider._tileMatrixSetID;
            query.format = imageryProvider._format;

            if (defined(staticDimensions)) {
                query = combine(query, staticDimensions);
            }

            if (defined(dynamicIntervalData)) {
                query = combine(query, dynamicIntervalData);
            }
            resource = imageryProvider._resource.getDerivedResource({
                queryParameters: query,
                request: request
            });
        }
        let deferred = defer();
        let xyz = {x:col,y:row,z:level};
        let success = this.requestJsonData(deferred,imageryProvider, resource,xyz);
        if(!success){
            return undefined;
        }
        return deferred.promise;
    }

        requestJsonData(deferred,imageryProvider, url,xyz){
        let resource = Resource.createIfNeeded(url);
        let promises =[];
        let jsonPromise = null;
        if(this.dataType == 'binary'){
            jsonPromise = resource.fetchArrayBuffer();
        }else{
            jsonPromise = resource.fetchJson();
        }

        if(!jsonPromise){
            return false;
        }

        promises.push(jsonPromise);

        let level = url._templateValues.z;

        Promise.all(promises).then(function(deferred,xyz,level,result){
            let data = result[0];
            if(!data){
                deferred.resolve(this.image);;
                return true;
            }

            let labelTile = this.jsonPromiseResult(xyz,level,data);
            let stacks = this.getStacks(labelTile.features);
            this.getGlyphs(stacks,function(deferred,labelTile,glyphs){
                labelTile.labelCollection.setGlyphs(glyphs);
                labelTile.roadLabelCollection.setGlyphs(glyphs);
                labelTile.ready = true;
                deferred.resolve(this.image);
            }.bind(this,deferred,labelTile));
        }.bind(this,deferred,xyz,level));
        return true;
    }

    jsonPromiseResult(xyz,level,data){
        if(this.dataType == 'binary'){
            data = this.toBuffer(data);
            data = this.parseBinaryData(data);
        }

        let labelData =  data.label? data.label:data;

        if(data !={}){
            let x = xyz.x;
            let y = xyz.y;
            let z = xyz.z;

            let rectangle = this._tilingScheme.tileXYToRectangle(x, y, z);
            let name = x+'_'+y+'_'+z;
            let labelTile = this.cache[name];
            if(!labelTile){
                labelTile = new LabelTile(name,xyz,this.tileWidth,rectangle,labelData,this.indexDbNames,this.styleFun,this.dataType,
                    level,this.styleMap,this.textures,this.scene);
                this.cache[labelTile.name] = labelTile;
            }

            return labelTile;
        }
    }

    toBuffer(ab) {
        let buf = new Buffer(ab.byteLength);
        let view = new Uint8Array(ab);
        for (let i = 0; i < buf.length; ++i) {
            buf[i] = view[i];
        }
        return buf;
    }

    parseBinaryData(buf){
        let vant = new VarintReader(buf, 4, this.layerFieldMap);
        let layerNameArr = vant.getAllLayerNames();
        let layers = {};
        for (let i = 0; i < layerNameArr.length; i++) {
            let layerName = layerNameArr[i];
            layers[layerName] = {
                features: [],
                fieldsConfig: this.serverInfo[layerName] ? this.serverInfo[layerName].fieldsConfig : {},
                type: 1
            };

            let geometryType =vant.getGeometryType(layerName);
            let props = vant.getLayerPro(layerName);
            if (geometryType.toLowerCase() == "point") {
                layers[layerName].type = 1;
            } else if (geometryType.toLowerCase() == "line" ||
                geometryType.toLowerCase() == "linestring" || geometryType.toLowerCase() == "multilinestring") {
                layers[layerName].type = 2;
            }
            if (props && props.length > 0) {
                for (let k = 0; k < props.length; k++) {
                    let tDataArr = [];
                    tDataArr.push(geometryType);
                    tDataArr.push(props[k]);
                    tDataArr.push(vant.getCoordinatesByIndex(layerName, k, 10));
                    layers[layerName].features.push(tDataArr);
                }
            }
        }
        return layers;
    }

    //获取文字的code码,默认只支持一种字体
    getStacks(features){
        let stack = [];
        let statcks = {};
        statcks[this.fontName] = stack;
        let index = 0;
        for(let i = 0;i<features.length;i++){
            let label = features[i].label;
            if(label){
                for (let j = 0; j < label.length; j++) {
                    stack[index] = label.charCodeAt(j);
                    index++;
                }
            }
        }

        //多加个？号
        stack[index] = '?'.charCodeAt(0);
        return statcks;
    }

    // 获取字体
    getGlyphs(stacks, callback) {
        let remaining = Object.keys(stacks).length;
        const allGlyphs = {};

        for (const fontName in stacks) {
            this.viewer.glyphSource.getSimpleGlyphs(fontName, stacks[fontName],  done);
        }

        function done(err, glyphs, fontName) {
            if (err) console.error(err);

            allGlyphs[fontName] = glyphs;
            remaining--;

            if (remaining === 0)
                callback(allGlyphs);
        }
    }



    // updateTileElevation(xyz,tileSize){
    //     // var labels = this._tileMatrixLabels;
    //     // var tileMatrix = defined(labels) ? labels[xyz.z] : xyz.z;
    //     let name = xyz.x+'_'+xyz.y+'_'+xyz.z;
    //     let tile = this.cache[name];
    //
    //     //如果label瓦片还没，或者瓦片已经存在，并且已经有高程值了
    //     if(!tile){
    //         return false;
    //     }
    //
    //     console.log('label图层重设高程：'+name);
    //
    //     let key =  xyz.x+'_'+xyz.y+'_'+xyz.z;
    //     let promise = ElevationTool.getElevation(this.dbMap,this.indexDbNames,key);
    //     promise.then(function(name,elevationDataMap){
    //         tile = this.cache[name];
    //         if(tile){
    //             tile.updateElevationData(elevationDataMap);
    //         }
    //     }.bind(this,name));
    //     return true;
    // }

    get url() {
        return this._resource.url;
    }

    get proxy() {
        return this._resource.proxy;
    }

    get tileWidth() {
        return this._tileWidth;
    }

    get tileHeight() {
        return this._tileHeight;
    }

    get maximumLevel() {
        return this._maximumLevel;
    }

    get minimumLevel() {
        return this._minimumLevel;
    }

    get tilingScheme() {
        return this._tilingScheme;
    }

    get rectangle() {
        return this._rectangle;
    }

    get tileDiscardPolicy() {
        return this._tileDiscardPolicy;
    }

    get errorEvent() {
        return this._errorEvent;
    }

    get format() {
        return this._format;
    }

    get readyPromise() {
        return this._readyPromise;
    }

    get credit() {
        return this._credit;
    }

    get hasAlphaChannel() {
        return true;
    }

    get clock() {
        return this._timeDynamicImagery.clock;
    }

    set clock(value) {
        this._timeDynamicImagery.clock = value;
    }

    get times() {
        return this._timeDynamicImagery.times;
    }

    set times(value) {
        this._timeDynamicImagery.times = value;
    }

    get dimensions() {
        return this._dimensions;
    }

    set dimensions(value){
        if (this._dimensions !== value) {
            this._dimensions = value;
            if (defined(this._reload)) {
                this._reload();
            }
        }
    }

    getTileCredits(x, y, level) {
        return undefined;
    };

    requestImage(x, y, level, request) {
        let result;
        let timeDynamicImagery = this._timeDynamicImagery;
        let currentInterval;

        // Try and load from cache
        if (defined(timeDynamicImagery)) {
            currentInterval = timeDynamicImagery.currentInterval;
            result = timeDynamicImagery.getFromCache(x, y, level, request);
        }

        // Couldn't load from cache
        if (!defined(result)) {
            result = this.requestImageNow(this, x, y, level, request, currentInterval);
        }

        // If we are approaching an interval, preload this tile in the next interval
        if (defined(result) && defined(timeDynamicImagery)) {
            timeDynamicImagery.checkApproachingInterval(x, y, level, request);
        }

        return result;
    };

    pickFeatures(x, y, level, longitude, latitude) {
        return undefined;
    };

    destroy(){
        for(let key in this.cache){
            let tile = this.cache[key];
            tile.destroy();
        }
        this.cache = {};
    };

    removeImageryFromCache(x,y,z){
        let key = x+'_'+y+'_'+z;
        let tile = this.cache[key];
        if(tile){
            tile.destroy();
            delete this.cache[key];
        }
    }
}
module.exports =LabelTileServiceImageryProvider;

},{"../../utils/Buffer":32,"../../utils/VarintReader":36,"./AvoidTile":14,"./LabelTile":15,"./glyph/GlyphSource":27}],17:[function(require,module,exports){
let Font = null
const _path = './../../../../';
class AvoidUtil{
    static getRealLength(str) {
        var length = str.length;
        var realLength = 0
        for (var i = 0; i < length; i++) {
            let charCode = str.charCodeAt(i);
            if (charCode >= 0 && charCode <= 128) {
                realLength += 0.5;
            } else {
                realLength += 1;
            }
        }
        return realLength;
    }

    /**
     * 判断文本是否不为空
     *  Parameters :
     *  label - 要显示的文本
     *
     */
    static isNotNull(label){
        if(!label && label !=0){
            return false;
        }

        //如果是字符串
        if(typeof(label) == 'string'){
            label = label.toLowerCase();
            if(label == ''|| label == 'undefined' || label == 'null'){
                return false;
            }
        }
        return true;
    }

    /**
     * 统一转为微软雅黑
     */
    static formatFont(font,ratio,isChangeFont){
        var fontArr = font;
        if(isChangeFont){
            if(Font == null){
                Font = require(_path + 'src/utils/font/Font');
            }

            var farr = font.split(' ');
            if(farr.length - 1 != 0){
                if('italic' == farr[0].toLowerCase()){
                    if(farr[arr.length -1] != 'simbei'){
                        farr[farr.length -1] = Font.getDefaultFont();
                    }
                }
            }
            farr[farr.length -1] = 'SimHei';
            fontArr =farr.join(' ');
        }

        return fontArr.replace(
            /(\d+\.?\d*)(px|em|rem|pt)/g,
            function(w, m, u) {
                if(m < 12){
                    m = 12 * ratio;
                }else{
                    m = Math.round(m) * ratio;
                }
                return m + u;
            }
        );
    };

    /**
     * 对注记进行去空格等处理
     */
    static formatLabel(label){

        if(label){
            label = label + '';
            //去掉不可见字符
            label =  label.replace( /([\x00-\x1f\x7f])/g,'');
            label = label.replace(/(\s*$)/g,"");
            label = label.replace(/<br\/>/g, "");
        }
        return label;
    }

    //获取两点连线与y轴的夹角
    static getAngle( p1,p2){
        if(!p2 || !p1){
        }
        if(p2[0]-p1[0] == 0){
            if(p2[1]>p1[0]){
                return 90;
            }else{
                return -90;
            }
        }
        let k = (p2[1]-p1[1])/(p2[0]-p1[0]);
        let angle = 360*Math.atan(k)/(2*Math.PI);
        return angle;
    }

    /**
     *  更新线文字注记的角度
     * @param angle
     * @returns {*}
     */
    static getUpdateAngle(angle,bearing){
        let totalAngle = angle - bearing;
        if(totalAngle > 45 && totalAngle <= 135){
            return  -90;
        }
        if(totalAngle > 135 && totalAngle <= 225){
            return  - 180;
        }

        if(totalAngle >= -225 && totalAngle < -135){
            return  180;
        }
        if(totalAngle >= -135 && totalAngle < -45){
            return  90;
        }
        return 0;
    }

    /**
     *  更新线文字注记的角度
     * @param angle
     * @returns {*}
     */
    static updateAngle(angle,bearing){
        let totalAngle = angle - bearing;
        if(totalAngle > 45 && totalAngle <= 135){
            return angle -90;
        }
        if(totalAngle > 135 && totalAngle <= 225){
            return angle - 180;
        }

        if(totalAngle >= -225 && totalAngle < -135){
            return angle + 180;
        }
        if(totalAngle >= -135 && totalAngle < -45){
            return angle + 90;
        }
        return angle;
    }

    /**
     * 是否需要改变线的方向
     *  Parameters :
     *  p1 - 线段起点
     *  p2 -线段的重点
     *  angle - 两点连线与x轴的夹角
     */
    static isChangeDirection(label,p1,p2,angle){
        let showChange = false;
        //判断是否包含汉字
        if(/.*[\u4e00-\u9fa5]+.*$/.test(label)) {
            //如果是垂直线
            if(p1[0] == p2[0]){
                if(p1[1]>p2[1]){
                    showChange = true;
                    return showChange;
                }
            }

            //如果是反斜线，并且夹角与x轴的夹角大于45度
            if(angle<-45 && angle>-90 ){
                if(p1[0]< p2[0]){
                    showChange = true;
                }
            }else{
                if(p1[0]> p2[0]){
                    showChange = true;
                }
            }
        }else{
            if(p1[0] > p2[0]){
                showChange = true;
            }
        }
        return showChange;
    }


    /**
     * 如果文字注记旋转角度方向不一致(有的字向左，有的字向右旋转)，则调整为一致
     * @param textPoints
     */
    // static textToSameBearing(angle,textPoints){
        //保证竖方向的字是正的
        // if(angle >= 45){
        //     angle = angle - 90;
        // }else{
        //     if(angle <= - 45){
        //         angle = angle + 90;
        //     }
        // }
        //
        // for(let i = 0;i<textPoints.length;i++){
        //     let p = textPoints[i][1];
        //     let offsetAngle = angle - p;
        //     if(offsetAngle > 45){
        //         textPoints[i][1] = p +90;
        //     }
        //     if(offsetAngle < -45){
        //         textPoints[i][1] = p -90;
        //     }
        // }
    // }

    static textToSameBearing(textPoints){
        if(textPoints.length < 2){
            return;
        }
        for(let i = 1;i<textPoints.length;i++){
            let preAngle = textPoints[i-1][1];
            let angle1 = textPoints[i][1];
            if(Math.abs(angle1 - preAngle) > 45){
                if(angle1 - preAngle > 0){
                    textPoints[i][1] = angle1 -90;
                }else{
                    textPoints[i][1] = angle1 +90;
                }
            }
        }
    }
}

module.exports = AvoidUtil;




},{}],18:[function(require,module,exports){
/**
 * Class: GAnnoAvoid
 * 避让策略类
 *
 * Inherits:
 *  - <Object>
 */
const GGridIndex = require('./GGridIndex');
const GLabelBox = require('./GLabelBox');
const Uitl = require('./Util');
class GAnnoAvoid{
    constructor(ctx,formatFont,bearing) {
        this.ctx = ctx;
        this.grid=null;
        if(!ctx){
            this.grid = new GGridIndex(4096, 32, 0);
        }
        this.GLabelBox = new GLabelBox(ctx,formatFont,bearing);

        this.featureMap = {};
    }

    //避让
    defaultAvoid(features,styleMap,isClient,hasImportant,ableWeight){
        if(this.ctx){
            if(isClient){
                this.grid = new GGridIndex(4096, 32, 0);
            }else{
                this.grid = new GGridIndex(512, 32, 32);
            }
        }

        if(features== null || features.length<1) return [];
        // console.time('mergeFeatures');
        // features = this.mergeFeatures(features);
        // console.timeEnd('mergeFeatures');
        // console.time('排序');

        if(ableWeight){
            //权值排序
            Uitl.sort(features,styleMap,hasImportant);
        }
        // console.timeEnd('排序');

        // console.time('避让');
        //将注记添加到单元格中，进行避让
        for(let i =0;i<features.length;i++){
            let feature = features[i];
            let style = styleMap[feature.styleId];
            this.avoidFeature(feature,style);

            this.showOrHideFeature(feature);
        }
        // console.timeEnd('避让');
        // features = this.GLabelBox.filterFeature(features);
        return features;
    }

    /**
     * 给要素设置避让的box和注记的绘制坐标
     * @param f
     */
    avoidFeature(f,style){
        if(style.show == false || f.hidden == true || !f.boxs){
            f.hidden =true;
            return;
        }

        let show = true;
        if(f.boxs){
            if(f.type == 1){
                //点注记跟其它注记避让
                show =this.avoidPoint(f,style);
            }else{
                if(f.isCollision){
                    f.hidden = true;
                    return;
                }else{
                    //线注记跟其它注记进行避让
                    show =this.avoidLine(f,style);
                }
            }
        }

            f.hidden = !show;
        //如果注记显示不下
        // if(!show){
        //     let keys = this.getCollisionFeatureIds(f);
        //     let showFeature = this.isShowCurrFeature(style,f,keys);
        //
        //     if(showFeature){
        //         this.hideCollisionFeatures(f,keys);
        //         f.hidden = false;
        //         this.addBoxFeatureCells(f,style);
        //     }else{
        //         f.hidden = true;
        //     }
        // }
    }

    /**
     * 将点注记加入到计算出的多个单元格中
     * @param feature
     */
    avoidPoint(feature,style){
        feature.boxIndex = 0;

        //如果为重要的，则不避让
        if(style.isImportant == true){
            this.addBoxFeatureCells(feature,style);
            return true;
        }

        //如果前面有小图标，并且开启了四宫格避让
        if((style.isFourDirections || style.isEightDirections) && style.texture){
            return this.addFourCollisionFeatureToCells(feature,style,0);
        }else{
            //如果没有指定的方向
            if(feature.boxIndexs && !feature.boxIndexs[0]){
                return false;
            }

            let isCollision = this.isCollision(feature.box);
            if(isCollision){
                return false;
            }
            this.addBoxFeatureCells(feature,style);
            return true;
        }
    }


    /**
     * 将线注记加入到计算出的多个单元格中
     * @param feature
     */
    avoidLine(feature,style){
        //如果为重要的，则不避让
        if(style.isImportant == true){
            this.addBoxFeatureCells(feature,style);
            return true;
        }

        //线注记是否与其它注记相交
        let isCollision = false;
        for(let i = 0 ;i<feature.boxs.length;i++){
            let box = feature.boxs[i];
            if(this.isCollision(box)){
                isCollision = true;
                break;
            }
        }

        if(isCollision){
            return false;
        }else{
            this.addBoxFeatureCells(feature,style);
            return true;
        }
    }

    /**
     * 将点注记添加到单元格中
     * @param feature 点注记
     * @param index 点注记四宫格的index
     */
    addFourCollisionFeatureToCells(feature,style,index){
        let isCollision = true;
        let box = [];
        //如果有指定的方向
        if(!feature.boxIndexs || (feature.boxIndexs && feature.boxIndexs[index])){
            box = feature.boxs[index];
            isCollision = this.isCollision(box);
        }

        // 如果相交,进行四宫,八宫格避让
        if(isCollision){
            index ++;
            if(index == feature.boxs.length){
                index = index - feature.boxs.length;
            }

            //所有方向全部避让完成，仍然相交
            if(index == 0){
                return false;
            }else{
                //换个点注记方向的box，再进行递归避让检测
               return this.addFourCollisionFeatureToCells(feature,style,index);
            }
        }else{
            //换成偏移点
            // feature.textPoint =feature.fourPoints[index];
            feature.boxIndex = index;
            feature.box = box;
            this.addBoxFeatureCells(feature,style);
            return true;
        }
    }

    /**
     *  返回注记的box是否与其它注记相交
     * @param row
     * @param col
     * @param feature
     */
    isCollision(box){
        let x1 = box[0];
        let y1 = box[1];

        let x2 = box[2];
        let y2 = box[3];
        let result = this.grid.query(x1,y1,x2,y2);
        return result.length>0;
    }

    getCollisionIds(box){
        // if(!box){
        //     debugger;
        // }
        let x1 = box[0];
        let y1 = box[1];

        let x2 = box[2];
        let y2 = box[3];
        return this.grid.query(x1,y1,x2,y2);
    }

    /**
     * 获取被压盖的注记集合
     * @param feature
     * @returns {Array}
     */
    getCollisionFeatureIds(feature){
        if(feature.type ==1){
            return this.getCollisionIds(feature.boxs[feature.boxIndex]);
        }

        if(feature.type ==2){
            let ids = [];
            for(let i = 0;i<feature.boxs.length;i++){
                let keys = this.getCollisionIds(feature.boxs[i]);
                ids = ids.concat(keys);
            }
            return ids;
        }
    }

    /**
     *  判断当前注记在它避让压盖的注记中，当前注记是否要显示
     * @param style
     * @param feature
     * @param keys
     * @returns {boolean}
     */
    isShowCurrFeature(style,feature,keys){
        if(style.isImportant){
            return true;
        }

        let weight = feature.weight;
        for(let i =0;i<keys.length;i++){
            let item =this.featureMap[keys[i]];
            if(item){
                let itemStyle = item.style;
                if(itemStyle.isImportant){
                    return false;
                }

                let itemFeature = item.feature;
                if(itemFeature.weight >= weight){
                    return false;
                }
            }
        }
        return true;
    }

    /**
     *  隐藏掉压盖的注记
     * @param keys
     */
    hideCollisionFeatures(f,keys){
        for(let i =0;i<keys.length;i++){
            let item =this.featureMap[keys[i]];
            if(item){
                let itemFeature = item.feature;
                let itemStyle = item.style;

                //重要注记和不是同一个注记不隐藏
                if(itemStyle.isImportant && itemFeature.objectId != f.objectId){
                    continue;
                }

                //隐藏掉该注记, 该注记为被其它权重更高的注记顶掉了
                itemFeature.hidden = true;
                this.showOrHideFeature(itemFeature);

                //去掉注记占据的网格
                this.removeBoxFeatureCells(itemFeature);
            }
        }
    }


    /**
     *  注记box所占的单元格标识为true
     */
    addBoxToCells(feature,key,box){
        let x1 = box[0];
        let y1 = box[1];
        let x2 = box[2];
        let y2 = box[3];
        this.grid.insert(key,x1,y1,x2,y2);
    }


    // 获取过滤后的要素.
    filterFeature(features){
        let returnFeatures = [];
        //剔除需避让的要素
        for(let i= 0 ;i<features.length;i++){
            if(!features[i].hidden ) {
                features[i].drawed = true;
                returnFeatures.push(features[i]);
            }
        }
        return returnFeatures;
    }


    addBoxFeatureCells(feature,style){
        this.featureMap[feature.primaryId] = {feature,style};

        if(feature.type == 1){
            this.addBoxToCells(feature,feature.primaryId,feature.box);
        }

        if(feature.type == 2){
            for(let i = 0 ;i<feature.boxs.length;i++){
                let box = feature.boxs[i];
                this.addBoxToCells(feature,feature.primaryId,box);
            }
        }
    }

    removeBoxFeatureCells(feature){
        if(this.featureMap[feature.primaryId]){
            delete this.featureMap[feature.primaryId];
        }else{
            //注记没有加入到网格中
            return;
        }

        if(feature.type == 1){
            this.removeBoxToCells(feature.primaryId,feature.box);
        }

        if(feature.type == 2){
            for(let i = 0 ;i<feature.boxs.length;i++){
                let box = feature.boxs[i];
                this.removeBoxToCells(feature.primaryId,box);
            }
        }
    }

    /**
     *  注记box所占的单元格标识为true
     */
    removeBoxToCells(key,box){
        let x1 = box[0];
        let y1 = box[1];
        let x2 = box[2];
        let y2 = box[3];
        this.grid.remove(key,x1,y1,x2,y2);
    }

    showOrHideFeature(feature){
        let show = !feature.hidden;

        if(feature.labels){
            for(let i = 0;i<feature.labels.length;i++){
                let label = feature.labels[i];
                label.show = show;
                if(feature.type == 1 && show){
                    label.pixelOffset = feature.offsetPostion[feature.boxIndex];
                }
            }
        }

        if(feature.iconImg){
            feature.billboard.show = show;
        }
    }
}
module.exports = GAnnoAvoid;
},{"./GGridIndex":21,"./GLabelBox":22,"./Util":26}],19:[function(require,module,exports){
const GDistance = require('./GDistance');
const GisTools = require('./../../../utils/gistools/GisTools');
const AvoidUtil = require('./AvoidUtil');
class GCutLine{
    static cutLineFeature(feature,style,scale){
        let fs = [];
        let index = 0;
        if(feature.sourceData.length < 4){
            return fs;
        }

        let lineText = this.createLineTextFeatrue(feature,style,index,scale);
        index = lineText.index;
        if(lineText.feature){
            fs.push(lineText.feature);
        }

        let lineCode= this.createLineCodeFeatrue(feature,style,index);
        index = lineCode.index;
        if(lineCode.feature){
            fs.push(lineCode.feature);
        }

        let lineArrow= this.createLineArrowFeatrue(feature,style,index);
        if(lineArrow.feature){
            fs.push(lineArrow.feature);
        }
        return fs;
    }

    /**
     * 创建线文字注记
     *  Parameters :
     *  feature
     *  index - 可用的line的index位置
     *  scale 字间距缩放比例
     */
    static createLineTextFeatrue(feature,style,index,scale,filedName){
        let line = feature.sourceData;
        if(filedName){
            line = feature[filedName];
        }

        let d = new GDistance();
        let gaps = [];
        let textFeature =null;

        if(!scale){
            scale = 1;
        }

        if(AvoidUtil.isNotNull(feature.label)) {
            //线注记的文字内容
            feature.label = feature.label+ '';
            for (let count = 0; count < feature.label.length; count++) {
                gaps.push((style.lineHeight*1.2 +2+ style.gap)*scale);
            }

            let cloneGaps = [].concat(gaps);
            let points = d.getNodePath(line, gaps);
            let textPoints = points.pointList;

            if(textPoints.length > 1){
                index = points.index;
                //需要延长的字个数
                let delayLength = feature.label.length - textPoints.length;
                if(delayLength > 0){
                    index = line.length;
                    //摆不下的字数少于3个字延长
                    if(delayLength <style.extendedNum){
                        this.delayTextPoint(line,textPoints,feature.label,(style.chinaLabelWidth + style.gap)*scale);
                    }else{
                        return {feature:null,index:index};
                    }
                }


                //如果文字注记旋转角度方向不一致(有的字向左，有的字向右旋转)，则调整为一致
                AvoidUtil.textToSameBearing(textPoints);
                textFeature =  this.cloneFeature(feature);

                if(style.changeDirection != false){
                    //改变方向
                    //判断是否应该换方向
                    // let showChanged = AvoidUtil.isChangeDirection(feature.label,p1, p2,angle);
                    // if (showChanged) {
                    //     textPoints = textPoints.reverse();
                    // }
                }

                textFeature.attributeId = feature.attributeId +'_text';
                textFeature.sourceAngleData = textPoints;
                textFeature.lineType = 'text';
            }else{
                //gl 暂时不支持画一个点的线注记
                // if(style.isTransverse && !style.showRoadCode){
                //     textFeature =  this.cloneFeature(feature);
                //     textFeature.attributeId = feature.layerName +'__'+ feature.objectId +'_text';
                //     textFeature.sourceAngleData = [[[line[0],line[1]],0]];
                //     textFeature.lineType = 'text';
                //     index =2;
                // }
            }

            if(textFeature){
                //平移
                if(style.lineOffset && textFeature.sourceAngleData.length > 1){
                    textFeature.sourceAngleData = GisTools.lineOffset(textFeature.sourceAngleData,style.lineOffset);
                }
                textFeature.textPoints = textFeature.sourceAngleData;
                textFeature.primaryId = textFeature.attributeId + '_row_' + feature.xyz.y + '_col_' + feature.xyz.x + '_level_' + feature.xyz.z
                    + '_x_' + textFeature.sourceAngleData[0][0][0] + '_y_' + textFeature.sourceAngleData[0][0][1];
                textFeature.id = textFeature.attributeId + '_row_' + feature.xyz.y + '_col_' + feature.xyz.x + '_level_' + feature.xyz.z
                    + '_x_' + line[0] + '_y_' + line[1];
            }
        }
        return {feature:textFeature,index:index};
    }

    /**
     * 创建线编码注记
     *  Parameters :
     *  feature
     *  index - 可用的line的index位置
     */
    static createLineCodeFeatrue(feature,style,index){
        let line = feature.sourceData;
        let d = new GDistance();
        let gaps = [];
        let codeFeature =null;

        let roadLabel = feature.roadCodeLabel;
        //如果有道路编码
        if(style.showRoadCode && AvoidUtil.isNotNull(roadLabel) && index < line.length){
            let codeLine = line.slice(index,line.length -1);
            //默认是30个像素
            gaps.push(30);
            let cPoints = d.getNodePath(codeLine, gaps);
            let codePoints = cPoints.pointList;
            if(codePoints.length  == 1){
                index = index + cPoints.index;
                codeFeature =  this.cloneFeature(feature);
                codeFeature.attributeId = feature.attributeId+'_code';
                codeFeature.sourceAngleData = codePoints;
                codeFeature.lineType = 'code';
                codeFeature.label = roadLabel+'';
            }

            if(codePoints.length ==0){
                codeFeature =  this.cloneFeature(feature);
                codeFeature.attributeId = feature.attributeId+'_code';
                codeFeature.sourceAngleData = [[[line[0],line[1]],0]];
                codeFeature.lineType = 'code';
                codeFeature.label = roadLabel+'';
                index = 2;
            }

            codeFeature.textPoints = [codeFeature.sourceAngleData[0][0]];
            codeFeature.primaryId = codeFeature.attributeId + '_row_' + feature.xyz.y + '_col_' + feature.xyz.x + '_level_' + feature.xyz.z
                + '_x_' + codeFeature.sourceAngleData[0][0][0] + '_y_' + codeFeature.sourceAngleData[0][0][1];
            codeFeature.id = codeFeature.attributeId + '_row_' + feature.xyz.y + '_col_' + feature.xyz.x + '_level_' + feature.xyz.z
                + '_x_' + line[0] + '_y_' + line[1];
        }
        return {feature:codeFeature,index:index};
    }

    /**
     * 创建线箭头注记
     *  Parameters :
     *  feature
     *  index - 可用的line的index位置
     */
    static createLineArrowFeatrue(feature,style,index){
        let line = feature.sourceData;
        let d = new GDistance();
        let gaps = [];
        let arrowFeature =null;

        //如果有箭头
        if(style.showArrow && index < line.length){
            let arrowLine = line.slice(index,line.length -1);
            gaps.push(16);
            gaps.push(16);
            let aPoints = d.getNodePath(arrowLine, gaps);
            let arrowPoints = aPoints.pointList;

            if(arrowPoints.length == 2){
                arrowFeature =  this.cloneFeature(feature);
                arrowFeature.attributeId = feature.attributeId+'_arrow';
                arrowFeature.sourceAngleData = arrowPoints;
                arrowFeature.textPoints = arrowPoints;
                arrowFeature.lineType = 'arrow';

                arrowFeature.primaryId = arrowFeature.attributeId + '_row_' + feature.xyz.y + '_col_' + feature.xyz.x + '_level_' + feature.xyz.z
                    + '_x_' + arrowFeature.sourceAngleData[0][0][0] + '_y_' + arrowFeature.sourceAngleData[0][0][1];
                arrowFeature.id = arrowFeature.attributeId + '_row_' + feature.xyz.y + '_col_' + feature.xyz.x + '_level_' + feature.xyz.z
                    + '_x_' + line[0] + '_y_' + line[1];
            }
        }
        return {feature:arrowFeature,index:index};
    }

    /**
     * 当线文字放不下时，获取延长线上的点
     *  Parameters :
     *  line - 原始线坐标
     *  textPoints - 切割之后的点坐标
     *  label - 线注记
     *  gap - 每个字之间的间隔
     *  showChanged
     *
     */
    static delayTextPoint(line,textPoints,label,gap){
        let fristPoint = null;
        let secondPoint = null;
        //如果只能放下一个字
        if(textPoints.length == 1){
            fristPoint = [line[0],line[1]];
        }else{
            fristPoint = textPoints[textPoints.length-2][0];
        }
        secondPoint = textPoints[textPoints.length-1][0];
        let angle = textPoints[textPoints.length-1][1];

        let len = textPoints.length;
        for(let i = 1;i<label.length - len +1;i++){
            let p = this.getPoint(fristPoint,secondPoint,gap*i);
            let textPoint = [p,angle];
            textPoints.push(textPoint);
        }
    }

    /**
     * 克隆feature
     *  Parameters :
     *  feature - 单个线注记要素
     */
    static cloneFeature(feature){
        return {type:feature.type,datas:feature.datas,centerPoint:feature.centerPoint,sourceData:feature.sourceData,label:feature.label,roadCodeLabel:feature.roadCodeLabel,
            attributes:feature.attributes,attributeId:feature.attributeId,styleId:feature.styleId,textures:feature.textures,xyz:feature.xyz,
            lineType:feature.lineType,weight:feature.weight,layerName:feature.layerName,objectId:feature.objectId};
    }


    /**
     * 求两点之间的距离
     */
    static getDistance(p1,p2){
        let calX = p2[0] - p1[0];
        let calY = p2[1] - p1[1];
        return Math.pow((calX *calX + calY * calY), 0.5);
    }

    /**
     * 获取线的长度
     */
    static getLineDistance(line){
        if(line.length <4){
            return 0;
        }

        let dis = 0;
        for(let i = 0;i<line.length/2-1;i++){
            let p1 = [line[2*i],line[2*i+1]];
            let p2 = [line[2*(i+1)],line[2*(i+1)+1]];
            dis = dis + this.getDistance(p1,p2);
        }
        return dis;
    }

    /**
     * 已知两点，延长距离，获取延长线上的点坐标
     */
    static getPoint(p1,p2,d){
        let xab = p2[0] - p1[0];
        let yab = p2[1] - p1[1];
        let xd = p2[0];
        let yd = p2[1];
        if(xab == 0){
            if(yab > 0){
                yd = p2[1] + d;
            }else{
                yd = p2[1] - d;
            }
        }else{
            let xbd = Math.sqrt((d * d)/((yab/xab) * (yab/xab) + 1));
            if (xab < 0) {
                xbd = -xbd
            }

            xd = p2[0] + xbd;
            yd = p2[1] + yab / xab * xbd;
        }
        return [xd,yd];
    }
}

module.exports = GCutLine;
},{"./../../../utils/gistools/GisTools":37,"./AvoidUtil":17,"./GDistance":20}],20:[function(require,module,exports){
/**
 * Created by matt on 2017/3/5.
 */
class GDistance{
    getLengthPoint(fromX, fromY, toX, toY, len,index){
        let dx = toX - fromX;
        let dy = toY - fromY;
        let x_new;
        let y_new;
        if(dx == 0){
            x_new = toX;
            if(dy > 0){
                y_new = fromY + len;
            }else{
                y_new = fromY - len;
            }
            if(index == null){
                return [x_new,y_new];
            }else{
                return [x_new,y_new,index];
            }
        }

        let tan = dy / dx;
        let sec = Math.sqrt((tan * tan) + 1);
        let dx_new = Math.abs(len / sec);
        let dy_new = Math.abs(dx_new * tan);
        if(dx > 0){
            x_new = fromX + dx_new;
        }else{
            x_new = fromX - dx_new;
        }
        if(dy > 0){
            y_new = fromY + dy_new;
        }else{
            y_new = fromY - dy_new;
        }
        if(index == null){
            return [x_new,y_new];
        }else{
            return [x_new,y_new,index];
        }
    }

    getAngle(p1,p2){
        if(p2[0]-p1[0] == 0){
            if(p2[1]>p1[0]){
                return 90;
            }else{
                return -90;
            }
        }
        let k = (p2[1]-p1[1])/(p2[0]-p1[0]);
        let angle = 360*Math.atan(k)/(2*Math.PI);
        return angle;
    }

    length(x0, y0, x1, y1){
        let dx = x1 - x0;
        let dy = y1 - y0;
        let len = Math.sqrt(dx * dx + dy * dy);
        return len;
    }

    getNodePath(coords,interval){
        let previous = [];
        let points = {};
        let pointList = [];
        let intervalLength = interval.length;

        //初始化标记长度等于单位长度
        let fun_getInterval = function(interval){
            let value = interval[0];
            interval.splice(0,1);
            return value;
        }
        let markLength = fun_getInterval(interval);
        let index = 0;
        while(true){
            if(pointList.length == intervalLength){
                points.index = index;

                // if(pointList.length > 0){
                //     let fristPt = [[coords[0],coords[1]],pointList[0][1]];
                //     pointList.unshift(fristPt);
                //     pointList.pop();
                // }

                points.pointList = pointList;
                return points;
            }
            if(index >= coords.length){
                points.index = index;

                // if(pointList.length > 0){
                //     let fristPt = [[coords[0],coords[1]],pointList[0][1]];
                //     pointList.unshift(fristPt);
                //     pointList.pop();
                // }

                points.pointList = pointList;
                return points;
            }
            let x = coords[index];
            let y = coords[index + 1];
            //判断上一个节点是否为空
            if(previous.length == 0){
                //如果为空就设置当前点到 上一个节点上
                previous[0] = x;
                previous[1] = y;
                continue;
            }else{

                //如果不为空则需要求上一个节点与当前结点的距离
                let lengthPath = this.length(previous[0], previous[1], x, y);
                //把节点长度加起来

                if(lengthPath >= markLength){
                    //如果长度大于标记长度，则需要上一点到标记成都的点
                    let savePoint = this.getLengthPoint(previous[0],previous[1], x,y, markLength,null);
                    let angle = this.getAngle(previous,[x,y]);

                    if(angle == 90){
                        angle = 0;
                    }
                    if(angle == -90){
                        angle = 0;
                    }
                    if(angle == 0){
                        angle = 0.5;
                    }

                    //保证竖方向的字是正的
                    if(angle >= 45){
                        angle = angle - 90;
                    }else{
                        if(angle <= - 45){
                            angle = angle + 90;
                        }
                    }


                    let pointAngle = [savePoint,angle];
                    pointList.push(pointAngle);
                    previous[0] = savePoint[0];
                    previous[1] = savePoint[1];
                    markLength = fun_getInterval(interval);
                }else{
                    markLength = markLength - lengthPath;

                    previous[0] = x;
                    previous[1] = y;
                    index = index + 2;
                }
            }
        }

        points.index = index;

        // if(pointList.length > 0){
        //     let fristPt = [[coords[0],coords[1]],pointList[0][1]];
        //     pointList.unshift(fristPt);
        //     pointList.pop();
        // }
        points.pointList = pointList;
        return points;
    }
}

module.exports = GDistance;






},{}],21:[function(require,module,exports){

module.exports = GGridIndex;
var NUM_PARAMS = 3;
function GGridIndex(extent, n, padding) {
    var cells = this.cells = [];

    if (extent instanceof ArrayBuffer) {
        this.arrayBuffer = extent;
        var array = new Int32Array(this.arrayBuffer);
        extent = array[0];
        n = array[1];
        padding = array[2];

        this.d = n + 2 * padding;
        for (var k = 0; k < this.d * this.d; k++) {
            var start = array[NUM_PARAMS + k];
            var end = array[NUM_PARAMS + k + 1];
            cells.push(start === end ?
                    null :
                    array.subarray(start, end));
        }
        var keysOffset = array[NUM_PARAMS + cells.length];
        var bboxesOffset = array[NUM_PARAMS + cells.length + 1];
        this.keys = array.subarray(keysOffset, bboxesOffset);
        this.bboxes = array.subarray(bboxesOffset);

        this.insert = this._insertReadonly;

    } else {
        this.d = n + 2 * padding;
        for (var i = 0; i < this.d * this.d; i++) {
            cells.push([]);
        }
        this.keys = [];
        this.bboxes = [];
    }

    this.n = n;
    this.extent = extent;
    this.padding = padding;
    this.scale = n / extent;
    this.uid = 0;

    var p = (padding / n) * extent;
    this.min = -p;
    this.max = extent + p;

    this.keyUidMap = {};
}


GGridIndex.prototype.insert = function(key, x1, y1, x2, y2) {
    this._forEachCell(x1, y1, x2, y2, this._insertCell, this.uid++);
    this.keyUidMap[key] = this.uid;
    this.keys.push(key);
    this.bboxes.push(x1);
    this.bboxes.push(y1);
    this.bboxes.push(x2);
    this.bboxes.push(y2);
};

GGridIndex.prototype.remove = function(key,x1, y1, x2, y2) {
    var cx1 = this._convertToCellCoord(x1);
    var cy1 = this._convertToCellCoord(y1);
    var cx2 = this._convertToCellCoord(x2);
    var cy2 = this._convertToCellCoord(y2);
    let uid = this.keyUidMap[key];
    delete this.keyUidMap[key];

    for (var x = cx1; x <= cx2; x++) {
        for (var y = cy1; y <= cy2; y++) {
            var cellIndex = this.d * y + x;
            this.cells[cellIndex][uid] = -1;
        }
    }
};


GGridIndex.prototype._insertReadonly = function() {
    throw 'Cannot insert into a GridIndex created from an ArrayBuffer.';
};

GGridIndex.prototype._insertCell = function(x1, y1, x2, y2, cellIndex, uid) {
    this.cells[cellIndex].push(uid);
};

GGridIndex.prototype.query = function(x1, y1, x2, y2) {
    var min = this.min;
    var max = this.max;
    if (x1 <= min && y1 <= min && max <= x2 && max <= y2) {
        // We use `Array#slice` because `this.keys` may be a `Int32Array` and
        // some browsers (Safari and IE) do not support `TypedArray#slice`
        // https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/TypedArray/slice#Browser_compatibility
        return Array.prototype.slice.call(this.keys);

    } else {
        var result = [];
        var seenUids = {};
        this._forEachCell(x1, y1, x2, y2, this._queryCell, result, seenUids);
        return result;
    }
};

GGridIndex.prototype._queryCell = function(x1, y1, x2, y2, cellIndex, result, seenUids) {
    var cell = this.cells[cellIndex];
    if (cell !== null) {
        var keys = this.keys;
        var bboxes = this.bboxes;
        for (var u = 0; u < cell.length; u++) {
            var uid = cell[u];
            if(uid == -1){
                continue;
            }

            if (seenUids[uid] === undefined) {
                var offset = uid * 4;
                if ((x1 <= bboxes[offset + 2]) &&
                    (y1 <= bboxes[offset + 3]) &&
                    (x2 >= bboxes[offset + 0]) &&
                    (y2 >= bboxes[offset + 1])) {
                    seenUids[uid] = true;
                    result.push(keys[uid]);
                } else {
                    seenUids[uid] = false;
                }
            }
        }
    }
};

GGridIndex.prototype._forEachCell = function(x1, y1, x2, y2, fn, arg1, arg2) {
    var cx1 = this._convertToCellCoord(x1);
    var cy1 = this._convertToCellCoord(y1);
    var cx2 = this._convertToCellCoord(x2);
    var cy2 = this._convertToCellCoord(y2);
    for (var x = cx1; x <= cx2; x++) {
        for (var y = cy1; y <= cy2; y++) {
            var cellIndex = this.d * y + x;
            if (fn.call(this, x1, y1, x2, y2, cellIndex, arg1, arg2)) return;
        }
    }
};

GGridIndex.prototype._convertToCellCoord = function(x) {
    return Math.max(0, Math.min(this.d - 1, Math.floor(x * this.scale) + this.padding));
};

GGridIndex.prototype.toArrayBuffer = function() {
    if (this.arrayBuffer) return this.arrayBuffer;

    var cells = this.cells;

    var metadataLength = NUM_PARAMS + this.cells.length + 1 + 1;
    var totalCellLength = 0;
    for (var i = 0; i < this.cells.length; i++) {
        totalCellLength += this.cells[i].length;
    }

    var array = new Int32Array(metadataLength + totalCellLength + this.keys.length + this.bboxes.length);
    array[0] = this.extent;
    array[1] = this.n;
    array[2] = this.padding;

    var offset = metadataLength;
    for (var k = 0; k < cells.length; k++) {
        var cell = cells[k];
        array[NUM_PARAMS + k] = offset;
        array.set(cell, offset);
        offset += cell.length;
    }

    array[NUM_PARAMS + cells.length] = offset;
    array.set(this.keys, offset);
    offset += this.keys.length;

    array[NUM_PARAMS + cells.length + 1] = offset;
    array.set(this.bboxes, offset);
    offset += this.bboxes.length;

    return array.buffer;
};

},{}],22:[function(require,module,exports){
/**
 * Class: GLabelBox
 *  计算注记避让box类
 *
 * Inherits:
 *  - <Object>
 */
const AvoidUtil =  require('./AvoidUtil');
const Util =  require('./Util');
class GLabelBox{
    constructor(ctx,formatFont,bearing) {
        this.boxDistance = 0;
        this.ctx =  ctx;
        this.formatFont = formatFont;
        this.bearing = bearing;
    }

    setBox(features,styleMap,isClient){
        features.forEach(function(f, index) {
            f.hidden = false;
            let style = styleMap[f.styleId];

            //如果要素不显示,没字就不画
            if(style.show == false){
                f.hidden =true;
                return;
            }

            if(f.type == 1){
                //构造点盒子
                if(isClient){
                    this.setPointBox(f,f.datas,this.ctx,style);
                }else{
                    this.setPointBox(f,f.sourceAngleData,this.ctx,style);
                }
            }
            if(f.type == 2){
                //如果是线文本注记
                if(f.lineType == 'text'){
                    if(isClient){
                        this.setTextLineBox(f,f.datas,this.ctx,style);
                    }else{
                        this.setTextLineBox(f,f.sourceAngleData,this.ctx,style);
                    }
                }

                //如果是线编码注记
                if(f.lineType == 'code') {
                    if(isClient){
                        this.setCodeLineBox(f,f.datas,this.ctx,style);
                    }else{
                        this.setCodeLineBox(f,f.sourceAngleData,this.ctx,style);
                    }
                }

                //如果是线箭头注记
                if(f.lineType == 'arrow') {
                    if(isClient){
                        this.setArrowLineBox(f,f.datas,style);
                    }else{
                        this.setArrowLineBox(f,f.sourceAngleData,style);
                    }
                }
            }
        }.bind(this));

        return features;
    }


    //构造点注记的boxs,上下左右四个方向
    setPointBox(feature,datas,ctx,style){
        style.isImportant = false;
        //对要显示的点注记内容按照用户的转换函数进行转换
        if(style.labelFunction){
            let labelFunction = new Function("label", style.labelFunction);
            try{
                feature.label = labelFunction.call({}, feature.attributes[style.labelfield]);
            }catch (e){
                console.warn(feature.label + ': 调用labelFunction失败!');
            }
        }

        let labelIsNotNull = AvoidUtil.isNotNull(feature.label);
        //如既没有文字，又没有图标,则不显示
        if(!labelIsNotNull && !feature.iconImg){
            feature.hidden =true;
            return;
        }

        let param =this.getFontWidthHeight(ctx,feature,style,labelIsNotNull);
        let graphicWidth = param.graphicWidth;
        let graphicHeight = param.graphicHeight;
        let fontWidth = param.fontWidth;
        let fontHeight = param.fontHeight;
        let maxFontheight = param.maxFontheight;

        let pointOffsetX = style.pointOffsetX;
        let pointOffsetY = style.pointOffsetY;
        if(!pointOffsetX){
            pointOffsetX = 0;
        }
        if(!pointOffsetY){
            pointOffsetY = 0;
        }
        let pt = [datas[0][0][0],datas[0][0][1]];
        pt[0] = pt[0]+pointOffsetX;
        pt[1] = pt[1]+pointOffsetY;

        if(pt[0] <0 || pt[1] <0 ){
            feature.hidden =true;
            return;
        }

        let pointBackgroundGap = style.pointBackgroundGap;
        if(style.pointHashBackground != true){
            pointBackgroundGap = 0;
        }

        let graphicDistance = style.graphicDistance;
        if(graphicHeight == 0 || graphicWidth ==0){
            graphicDistance = 0;
        }

        if(!style.hasOwnProperty('direction')){
            style.direction = 0;
        }

        let boxs = [];

        let offsetPostion = [];
        //如果有图标
        if(style.texture){
            //如果有文字
            if(feature.label){
                //避让的box比实际的box多加2个像素，避让很少部分的压盖
                boxs = this.getPointAvoidBox(pt,style,graphicDistance,
                    graphicWidth,graphicHeight,fontWidth+2,maxFontheight+2);

                offsetPostion = this.getPointOffsetPosition(style,graphicDistance,
                    graphicWidth,graphicHeight,fontWidth,fontHeight);
            }else{//只有图标，没有文字
                let middleBox = [ pt[0] - graphicWidth*0.5,
                    pt[1] -fontHeight*0.5,
                    pt[0] +graphicWidth*0.5,
                    pt[1] +fontHeight*0.5];
                middleBox = this.boxScale(middleBox,style.pointBoxDisance);
                boxs = [middleBox];

                offsetPostion = [new Cesium.Cartesian2(0,0)];
            }
        }else{
            let middleBox = [pt[0] - fontWidth*0.5,pt[1] -maxFontheight*0.5,
                pt[0] + fontWidth*0.5 ,pt[1] +maxFontheight*0.5  ];
            middleBox = this.boxScale(middleBox,style.pointBoxDisance);
            boxs = [middleBox];
            offsetPostion = [new Cesium.Cartesian2(-fontWidth*0.5,0)];
        }

        feature.boxs = boxs;
        feature.offsetPostion =offsetPostion;
        feature.box = boxs[0];
    }

    /**
     *  获取点注记的图标宽高，和注记的宽高和注记的最大高度
     * @param ctx
     * @param feature
     * @param style
     * @param labelIsNotNull
     * @returns {{}}
     */
    getFontWidthHeight(ctx,feature,style,labelIsNotNull){
        let currPara = {};
        let graphicWidth = style.graphicWidth;
        let graphicHeight = style.graphicHeight;

        let img = feature.iconImg;
        if(img){
            //如果没有
            if(!graphicWidth || !graphicHeight) {
                graphicWidth = img.width;
                graphicHeight = img.height;
            }
        }else{
            graphicWidth = 0;
            graphicHeight = 0;
        }

        currPara.graphicWidth = graphicWidth;
        currPara.graphicHeight = graphicHeight;
        currPara.fontWidth = graphicWidth;
        currPara.fontHeight = graphicHeight;

        if(labelIsNotNull){

            let lableObject = feature.labels[0];

            //各行的最宽宽度
            currPara.fontWidth =  lableObject.totalWidth;
            //文字的高度 * 文字的行数+  行间距
            currPara.fontHeight = lableObject.totalHeight;
            // 如果点符号高度（用点符号宽度代替）高于文字高度 则用点符号高度替换文字高度
            currPara.maxFontheight = currPara.fontHeight> graphicHeight ? currPara.fontHeight: graphicHeight;
        }

        return currPara;
    }

    /**
     *  获取点注记有图标也有文字时的避让boxs
     * @param pt
     * @param style
     * @param graphicDistance
     * @param graphicWidth
     * @param graphicHeight
     * @param fontWidth
     * @param maxFontheight
     * @returns {[*,*,*,*]}
     */
    getPointAvoidBox(pt,style,graphicDistance,graphicWidth,graphicHeight,fontWidth,maxFontheight){
        let rightBox = [ pt[0] - graphicWidth*0.5 ,
            pt[1] -maxFontheight*0.5,
            pt[0] +graphicWidth*0.5 +graphicDistance+ fontWidth ,
            pt[1] +maxFontheight*0.5];

        let leftBox = [pt[0] -graphicWidth*0.5 -graphicDistance- fontWidth,
            rightBox[1],pt[0] + graphicWidth*0.5,
            rightBox[3]];
        let bottomBox = [pt[0]-fontWidth*0.5,
            pt[1] -graphicHeight*0.5 , pt[0]+fontWidth*0.5,
            pt[1]+graphicHeight*0.5 + graphicDistance +maxFontheight] ;

        let topBox = [bottomBox[0],pt[1]  -graphicDistance  - maxFontheight-graphicHeight*0.5 ,
            bottomBox[2],pt[1]+graphicHeight*0.5];

        rightBox = this.boxScale(rightBox,style.pointBoxDisance);
        leftBox = this.boxScale(leftBox,style.pointBoxDisance);
        bottomBox = this.boxScale(bottomBox,style.pointBoxDisance);
        topBox = this.boxScale(topBox,style.pointBoxDisance);
        let boxs = [rightBox,leftBox,bottomBox,topBox];

        if(!style.isFourDirections && !style.isEightDirections){
            return [boxs[style.direction]];
        }

        if(style.isFourDirections){
            if(style.direction > 0){
                let item = boxs.splice(style.direction,1);
                boxs.unshift(item[0]);
            }
            return boxs;
        }


        let rightTopBox = [rightBox[0],topBox[1],
            rightBox[2],pt[1]+graphicHeight*0.5];
        let rightBottomBox = [rightBox[0],pt[1]-graphicHeight*0.5,
            rightBox[2],bottomBox[3]];
        let leftTopBox = [leftBox[0],topBox[1],
            leftBox[2],pt[1]+graphicHeight*0.5];
        let leftBottomBox = [leftBox[0],pt[1]-graphicHeight*0.5,
            leftBox[2],bottomBox[3]];

        boxs = [rightBox,leftBox,bottomBox,topBox,rightTopBox,rightBottomBox,leftTopBox,leftBottomBox];
        if(style.direction > 0){
            let item = boxs.splice(style.direction,1);
            boxs.unshift(item[0]);
        }
        return boxs;
    }

    /**
     *  获取点注记的偏移位置
     * @param style
     * @param graphicDistance
     * @param graphicWidth
     * @param graphicHeight
     * @param fontWidth
     * @param fontHeight
     * @returns {*}
     */
    getPointOffsetPosition(style,graphicDistance,graphicWidth,graphicHeight,fontWidth,fontHeight){
        //不包括点图标,用于文字绘制的起点坐标
        let rPoint = new Cesium.Cartesian2(graphicWidth*0.5 + graphicDistance ,
            0);
        let lPoint = new Cesium.Cartesian2( -graphicWidth*0.5 - graphicDistance  -fontWidth,
            0);
        let bPoint = new Cesium.Cartesian2(- fontWidth*0.5,
            graphicDistance  + fontHeight*0.5+graphicHeight*0.5);
        let tPoint = new Cesium.Cartesian2(bPoint.x,
            -graphicDistance - fontHeight*0.5-graphicHeight*0.5);

        let drawPositions = [rPoint ,lPoint  ,bPoint  ,tPoint ];

        if(!style.isFourDirections && !style.isEightDirections){
            return [drawPositions[style.direction]];
        }


        if(style.isFourDirections){
            if(style.direction > 0){
                let item = drawPositions.splice(style.direction,1);
                drawPositions.unshift(item[0]);
            }
            return drawPositions;
        }

        let rtPoint = new Cesium.Cartesian2(rPoint.x,tPoint.y);
        let rbPoint = new Cesium.Cartesian2(rPoint.x,bPoint.y);
        let ltPoint = new Cesium.Cartesian2(lPoint.x,tPoint.y);
        let lbPoint = new Cesium.Cartesian2(lPoint.x,bPoint.y);
        drawPositions = [rPoint ,lPoint ,bPoint ,tPoint ,rtPoint ,rbPoint ,ltPoint ,lbPoint];

        if(style.direction > 0){
            let item = drawPositions.splice(style.direction,1);
            drawPositions.unshift(item[0]);
        }
        return drawPositions;
    }

    /**
     * 设置线文字的box
     *  Parameters :
     *  feature - 单个线注记要素
     */
    setTextLineBox(feature,datas,ctx,style){
        let label = feature.label;
        let textPoints = datas;
        if(textPoints.length == 0){
            feature.hidden = true;
            return;
        }

        //将分段的点数据和角度数据保留，留给后面绘制
        feature.textPoints = textPoints;
        //线的boxs
        let lineBoxs = [];
        //如果线注记带底色
        if(style.lineHashBackground == true || textPoints.length ==1){
            let p = textPoints[0][0];
            if(textPoints.length >1){
                //获取线段的中间点
                let index = Math.floor(label.length/2);
                p = textPoints[index][0];
            }


            let w = feature.label.length * style.lineHeight;
            if(ctx){
                ctx.save();
                if(this.formatFont){
                    ctx.font = Util.formatFont(style.lineFillFont,1,true);
                }else{
                    ctx.font = style.lineFillFont;
                }

                w = Util.measureText(feature.label,ctx.font,ctx);
                ctx.restore();
            }else{
                // w = w * scale;
            }


            if(!style.lineBackgroundGap){
                style.lineBackgroundGap = 0;
            }
            let minX = p[0] - w/2 -style.lineBackgroundGap;
            let maxX =  p[0]+ w/2 +style.lineBackgroundGap;
            let minY = p[1] -style.lineHeight*0.5-style.lineBackgroundGap;
            let maxY = p[1]+style.lineHeight*0.5 +style.lineBackgroundGap;
            let box = [minX,minY,maxX,maxY];
            this.boxScale(box,style.lineTextBoxDisance);
            lineBoxs.push(box);
        }else{
            //如果文字需要旋转
            if(style.lineTextRotate || style.lineTextRotate == 0){
                for(let m = 0;m<textPoints.length;m++){
                    textPoints[m][1] = style.lineTextRotate;
                }
            }else{
                // //获取两点连线与x轴的夹角
                // feature.angle = AvoidUtil.getAngle(textPoints[0][0],textPoints[textPoints.length - 1][0]);
                // //如果文字注记旋转角度方向不一致(有的字向左，有的字向右旋转)，则调整为一致
                // AvoidUtil.textToSameBearing(feature.angle,textPoints);
                //更新角度
                this.updateAngle(textPoints);

                if(!style.isImportant){
                    //判断线文字之间的最大夹角是否大于指定的阈值
                    if(this.isMessy(feature,textPoints,style,label)){
                        feature.hidden = true;
                        return;
                    }
                }
            }

            //获取每个字的box,判断每个字之前是否有压盖
            let boxs = this.getLineBoxs(label,textPoints,style,ctx);
            if(boxs){
                lineBoxs =lineBoxs.concat(boxs);
            }else{
                feature.hidden = true;
                return;
            }
        }

        //是否改变方向
        let angle = AvoidUtil.getAngle(textPoints[0][0],textPoints[textPoints.length - 1][0]);
        let showChanged = AvoidUtil.isChangeDirection(label,textPoints[0][0],textPoints[textPoints.length - 1][0],angle);
        feature.changeDirection = showChanged;

        feature.boxs = lineBoxs;
    }

    boxScale(box,pointBoxDisance){
        if(!pointBoxDisance && pointBoxDisance!=0){
            pointBoxDisance = this.boxDistance;
        }

        box[0] = box[0]-pointBoxDisance*0.5;
        box[1] = box[1]-pointBoxDisance*0.5;
        box[2] = box[2]+pointBoxDisance*0.5;
        box[3] = box[3]+pointBoxDisance*0.5;
        return box;
    }


    /**
     * 设置线编码的box
     *  Parameters :
     *  feature - 单个线注记要素
     */
    setCodeLineBox(feature,datas,ctx,style){
        let codePoints = datas;
        if(codePoints.length == 0){
            feature.hidden = true;
            return;
        }

        //如果要显示道路编号
        let p = codePoints[0][0];
        let w = feature.label.length * style.codeLineHeight;
        let scale = 1;
        if(ctx){
            ctx.save();
            if(this.formatFont){
                ctx.font = Util.formatFont(style.codeLineFillFont,1,true);
            }else{
                ctx.font = style.codeLineFillFont;
            }

            w = Util.measureText(feature.label,ctx.font,ctx);
            ctx.restore();
        }else{
            // scale = codePoints[0][3];
            // w = w*scale;
        }


        let minX = p[0] - w/2 -style.codeLineBackgroundGap;
        let maxX =  p[0]+ w/2 +style.codeLineBackgroundGap;
        let minY = p[1] -style.codeLineHeight*0.5-style.codeLineBackgroundGap;
        let maxY = p[1]+ style.codeLineHeight*0.5 +style.codeLineBackgroundGap;
        let box = [minX,minY,maxX,maxY];
        this.boxScale(box,style.lineCodeBoxDisance);
        feature.boxs = [box];
        feature.codePoint = p;
    }

    /**
     * 设置线箭头的box
     *  Parameters :
     *  feature - 单个线注记要素
     */
    setArrowLineBox(feature,datas,style){
        let arrowPoints = datas;
        if(arrowPoints.length != 3){
            feature.hiden = true;
            return;
        }

        let p = arrowPoints[0][0];
        let p1 = arrowPoints[1][0];

        let minX = p[0]<p1[0]?p[0]:p1[0];
        let maxX = p[0]>p1[0]?p[0]:p1[0];
        let minY = p[1]<p1[1]?p[1]:p1[1];
        let maxY = p[1]>p1[1]?p[1]:p1[1];
        let box = [minX,minY,maxX,maxY];
        this.boxScale(box,style.lineArrowBoxDisance);
        feature.boxs = [box];
        feature.arrowPoint = arrowPoints;
    }



    /**
     * 判断线文字之间的最大夹角是否大于指定的阈值
     *  Parameters :
     * textPoints - 文本注记的线段数组
     *  style -要素的样式
     */
    isMessy(feature,textPoints,style,label){
        let firstPoint = textPoints[0][0];
        let minX = firstPoint[0];
        let minY = firstPoint[1];
        let maxX = firstPoint[0];
        let maxY = firstPoint[1];

        let minAngle = textPoints[0][1];
        let maxAngle = textPoints[0][1];
        for(let i = 0;i<label.length;i++){
            let currPoint = textPoints[i][0];
            let currAngle = textPoints[i][1];
            if(currPoint[0]>maxX)   // 判断最大值
                maxX=currPoint[0];
            if(currPoint[0]<minX)   // 判断最小值
                minX=currPoint[0];

            if(currPoint[1]>maxY)   // 判断最大值
                maxY=currPoint[1];
            if(currPoint[1]<minY)   // 判断最小值
                minY=currPoint[1];

            if(currAngle>maxAngle)   // 判断最大值
                maxAngle=currAngle;
            if(currAngle<minAngle)   // 判断最小值
                minAngle=currAngle;
        }

        //如果文字之间，相差的最大角度大于配置的角度度则不画
        if(maxAngle -minAngle > style.angle){
            if(style.angleSwitch ==false  && style.angleColor){
                feature.lineFillStyle = style.angleColor;
            }else{
                return true;
            }
        }
        return false;
    }

    /**
     * 检测线文字之间是否有自压盖
     *  Parameters :
     * boxs -
     *  style -要素的样式
     */
    getLineBoxs(label,textPoints,style,ctx){
        //和其它注记避让的boxs
        let boxs = [];
        //自相交避让的boxs
        let owmCrashBoxs = [];
        for(let i = 0;i<label.length;i++){
            let pt = textPoints[i][0];
            //解决旋转后的注记和不旋转的注记样式不一致的问题
            if(textPoints[i][1] == 0){
                textPoints[i][1] = 0.5;
            }

            let scale = 1;
            if(!ctx){
                // scale = textPoints[i][3];
            }

            //考虑到线文字注记有角度偏转，box统一增加1.2倍
            let labelBox = [pt[0]-style.lineHeight*1.2*0.5*scale,pt[1]-style.lineHeight*1.2*0.5*scale,
                pt[0]+style.lineHeight*1.2*0.5*scale,pt[1]+style.lineHeight*1.2*0.5*scale];
            let owmCrashBox = [pt[0]-style.lineHeight*0.6*0.25*scale,pt[1]-style.lineHeight*0.6*0.25*scale,
                pt[0]+style.lineHeight*0.6*0.25*scale,pt[1]+style.lineHeight*0.6*0.25*scale];
            owmCrashBoxs.push(owmCrashBox);
            boxs.push(labelBox);
        }


        if(!style.isImportant){
            for(let j = 0;j<owmCrashBoxs.length-1;j++){
                let box1 = owmCrashBoxs[j];
                for(let k=j+1 ;k<owmCrashBoxs.length ;k++){
                    let box2 = owmCrashBoxs[k];
                    if(this.crashBox(box1,box2)){
                        return null;
                    }
                }
            }
        }
        return boxs;
    }

    // 两个盒子是否相交.
    crashBox(ibox,jbox){
        return ibox[0] <= jbox[2] &&
            ibox[2]  >= jbox[0] &&
            ibox[1]  <= jbox[3] &&
            ibox[3]  >= jbox[1] ;
    }


    /**
     *  更新线文字注记在gl绘制中的角度
     * @param textPoints
     */
    updateAngle(textPoints){
        let angle = AvoidUtil.getUpdateAngle(textPoints[0][1],this.bearing);

        for(let i = 0;i<textPoints.length;i++){
            textPoints[i][2] = textPoints[i][1]+angle;
        }
    }

}

module.exports = GLabelBox;
},{"./AvoidUtil":17,"./Util":26}],23:[function(require,module,exports){
const GridFilter = require('./../../../utils/gistools/GridFilter');
const Util = require('./Util');
const GisTools = require('../../../utils/gistools/GisTools');
class GridFilterLabel{
    /**
     *  第一次初步过滤
     * @param pointFeatures 点注记集合
     * @param lineFeatures 线注记集合
     * @param styleMap 样式map
     * @param ableWeight 全局是否权重避让
     * @param needSort 第一次过滤是否需要排序
     * @param tilesize 瓦片大小
     * @param cellsize 每个小网格宽度
     * @param buffer 外扩多大像素
     * @param maxPerCell 每个网格内最多放多少个点
     * @returns {{pointFeatures: Array, lineFeatures: Array, importantFeatures: Array}}
     */
    static fristFilter(pointFeatures,lineFeatures,styleMap,ableWeight,needSort,tilesize, cellsize, buffer,maxPerCell){
        if(ableWeight && needSort){
            Util.sort(pointFeatures);
            Util.sort(lineFeatures);
        }

        //第一次过滤
         pointFeatures = GridFilterLabel.fristFilterStart(pointFeatures,tilesize, cellsize, buffer,maxPerCell);
         lineFeatures = GridFilterLabel.fristFilterStart(lineFeatures,tilesize, cellsize, buffer,maxPerCell);
        return {pointFeatures:pointFeatures,lineFeatures:lineFeatures};
    }


    /**
     *  第二次初步过滤
     * @param pointFeatures 点注记集合
     * @param lineFeatures 线注记集合
     * @param styleMap 样式map
     * @param ableWeight 全局是否权重避让
     * @param needSort 第二次过滤是否需要排序
     * @param tilesize 全局画布最大宽
     * @param cellsize 每个小网格宽度
     * @param buffer 外扩多大像素
     * @param maxPerCell 每个网格内最多放多少个点
     * @returns {{pointFeatures: Array, lineFeatures: Array, importantFeatures: Array}}
     */
    static scendFilter(pointFeatures,lineFeatures,styleMap,ableWeight,needSort,tilesize, cellsize, buffer,maxPerCell){
        if(ableWeight && needSort){
            Util.sort(pointFeatures);
            Util.sort(lineFeatures);
        }
        //第二次过滤
         pointFeatures = GridFilterLabel.scendFilterStart(pointFeatures,tilesize, 16, buffer);
         lineFeatures = GridFilterLabel.scendFilterStart(lineFeatures,tilesize, 16, buffer);

        let returnFeatures = [];
        returnFeatures = returnFeatures.concat(pointFeatures);
        returnFeatures = returnFeatures.concat(lineFeatures);
        return returnFeatures;
    }


    /**
     *  移除瓦片外的点注记
     * @param features
     * @param tilesize
     */
    static removeTileOutPointFeatures(features,tileSize){
        let newFeatures = [];
        for(let i = 0;i<features.length;i++){
            let feature = features[i];
            let pt =feature .centerPoint;
            if(pt[0] >= 0 && pt[0] <= tileSize && pt[1] >= 0 && pt[1] <= tileSize){
                newFeatures.push(feature);
            }
        }
        return newFeatures;
    }

    /**
     *  移除瓦片外的线注记
     * @param features
     * @param tilesize
     */
    static removeTileOutLineFeatures(features,tileSize){
        let newFeatures = [];
        for(let i = 0;i<features.length;i++){
            let feature = features[i];
            for(let j = 0;j<feature.datas.length;j++){
                let pt = feature.datas[j][0];
                if(pt[0] >= 0 && pt[0] <= tileSize && pt[1] >= 0 && pt[1] <= tileSize){
                    newFeatures.push(feature);
                    break;
                }
            }
        }
        return newFeatures;
    }

    /**
     *  注记第一次初步格网过滤
     * @param features
     * @param tilesize 瓦片大小
     * @param cellsize 小正方形网格的宽
     * @param buffer  外扩多少像素
     * @param maxPerCell  小正方形中允许放多小个注记
     * @returns {Array}
     */
    static fristFilterStart(features,tilesize, cellsize, buffer,maxPerCell){
        let gridFilter = new GridFilter(tilesize, cellsize, buffer,maxPerCell);
        let returnFeatures = [];
        for(let i = 0;i<features.length;i++){
            let feature = features[i];
            let bool = gridFilter.filter(feature.centerPoint[0],feature.centerPoint[1]);
            if(bool){
                returnFeatures.push(feature);
            }
        }
        return returnFeatures;
    }

    /**
     *  注记第二次box格网过滤
     * @param features
     * @param tilesize 瓦片大小
     * @param cellsize 小正方形网格的宽
     * @param buffer  外扩多少像素
     * @param maxPerCell  小正方形中允许放多小个注记
     * @returns {Array}
     */
    static scendFilterStart(features,tilesize, cellsize, buffer){
        let gridFilter = new GridFilter(tilesize, cellsize, buffer,1);
        let returnFeatures = [];
        for(let i = 0;i<features.length;i++){
            let feature = features[i];
            let bool = gridFilter.filterByBox(feature.filterBox);
            if(bool){
                returnFeatures.push(feature);
            }
        }
        return returnFeatures;
    }



    /**
     *  第三次过滤，注记去重
     * @param features
     * @param tileSize
     * @returns {Array}
     */
    static threeFilter(features,styleMap,tileSize){
        let fs= GridFilterLabel.getImportantOtherFeatures(features,styleMap);

        let labelMap = Util.groupByLabel(fs.otherFeatures);
        let returnFeatures = [];

        let box2= [0,0,tileSize,tileSize];
        for(let label in labelMap){
            let labelArr = labelMap[label];
            if(labelArr.length == 1){
                returnFeatures.push(labelArr[0]);
            }else{
                let inBoxFeatures = [];
                for(let i = 0;i<labelArr.length;i++){
                    let feature = labelArr[i];
                    if(feature.type ==1){
                        if(GisTools.isInBox(feature.box,box2)){
                            inBoxFeatures.push(feature);
                        }else{
                            returnFeatures.push(feature);
                        }
                    }

                    if(feature.type ==2){
                        let isInBox = true;
                        for(let j =0;j<feature.boxs.length;j++){
                            let box = feature.boxs[j];
                            if(!GisTools.isInBox(box,box2)){
                                isInBox = false;
                                break;
                            }
                        }

                        if(isInBox){
                            inBoxFeatures.push(feature);
                        }else{
                            returnFeatures.push(feature);
                        }
                    }
                }

                if(inBoxFeatures.length > 0){
                    //按照权重排序
                    inBoxFeatures = Util.sortPrimaryId(inBoxFeatures);
                    //保留第一个
                    // returnFeatures.push(inBoxFeatures[0]);
                    returnFeatures = returnFeatures.concat(GridFilterLabel.distinctFeatures(inBoxFeatures,styleMap));
                }
            }
        }

        returnFeatures = returnFeatures.concat(fs.importantFeatures);
        return returnFeatures;
    }


    static distinctFeatures(features,styleMap){
        let feature = features[0];
        let field = '';
        if(feature.type == 1){
            field = 'distance';
        }
        if(feature.type == 2){
            if(feature.lineType == 'text'){
                field = 'lineTextDistance';
            }
            if(feature.lineType == 'code'){
                field = 'lineCodeDistance';
            }
        }

        let fs = [];
        fs.push(features[0]);
        for(let i = 0;i<features.length -1;i++){
            let feature = features[i];
            if(feature.hidden ==true){
                continue;
            }
            let nextFeature = features[i+1];
            //求两个点注记之间的距离
            let distance = GridFilterLabel.getDistance(feature.centerPoint,nextFeature.centerPoint);
            let style = styleMap[feature.styleId];
            let d = style[field]?style[field]:0;
            if(distance < d){
                nextFeature.hidden = true;
            }else{
                fs.push(nextFeature);
            }
        }
        return fs;
    }

    /**
     * 求两点之间的距离
     */
    static getDistance(p1,p2){
        let calX = p2[0] - p1[0];
        let calY = p2[1] - p1[1];
        return Math.pow((calX *calX + calY * calY), 0.5);
    }


    /**
     *  将注记分为重要注记和非重要注记
     * @param features
     * @param styleMap
     */
    static getImportantOtherFeatures(features,styleMap){
        let importantFeatures =[];
        let otherFeatures = [];

        for(let i = 0;i<features.length;i++){
            let feature = features[i];
            let style = styleMap[feature.styleId];
            if(style.isImportant){
                importantFeatures.push(feature);
            }else{
                otherFeatures.push(feature);
            }
        }

        return {otherFeatures:otherFeatures,importantFeatures:importantFeatures};
    }

}

module.exports = GridFilterLabel;
},{"../../../utils/gistools/GisTools":37,"./../../../utils/gistools/GridFilter":38,"./Util":26}],24:[function(require,module,exports){
/**
 * Created by kongjian on 2017/5/1.
 */
class LabelDrawer{
    constructor(layerDataMap,styleMap,level) {
        this.layerDataMap = layerDataMap;
        this.level = level;
        this.styleMap = styleMap;
        this.propertyGetterMap = {};
    }

    getLayer(layername){
        this.layerDatas = {};
        let data = this.layerDataMap[layername];
        if(data == null || data.features == null){
            return this;
        }
        this.propertyGetterMap[layername] = this.getProperty(data.fieldsConfig);
        this.layerDatas[layername] = data;
        return this;
    }

    getAllLayer(){
        this.layerDatas = this.layerDataMap;
        for(let layername in this.layerDataMap){
            this.propertyGetterMap[layername] = this.getProperty(this.layerDataMap[layername].fieldsConfig);
        }
        return this;
    }


    getGroupLayer(layername,value){
        this.layerDatas = {};
        let valueArr = value.split(',');
        let length = valueArr.length;
        if(length == 0){
            return this;
        }

        let data = this.layerDataMap[layername];
        if(data == null || data.features == null){
            return this;
        }
        this.propertyGetterMap[layername] = this.getProperty(data.fieldsConfig);
        this.layerDatas[layername] = data;
        return this;
    }

    getProperty(fieldsConfig){
        let propertyConfig = {};
        let idIndex = 0;
        for(var i = 0 ;i < fieldsConfig.length; i ++){
            if(fieldsConfig[i].id == 'true' || fieldsConfig[i].id == true){
                idIndex = fieldsConfig[i].index;
            }
            propertyConfig[fieldsConfig[i].name] = parseInt(fieldsConfig[i].index);
        }
        return {propertyConfig:propertyConfig,idIndex:idIndex};
    }

    setStyle(fn){
		for(let layername in  this.layerDatas){
		    let layerData = this.layerDatas[layername];
		    let propertyGetter = this.propertyGetterMap[layername];
		    for(let i =0;i<layerData.features.length;i++){
                let feature = layerData.features[i];

                let get = function(key){
                    return feature[1][propertyGetter.propertyConfig[key]]
                };

                let style = fn.call({},this.level,get);

                if(style && style.show == true){
                    if(!this.styleMap[style._id]){
                        this.styleMap[style._id] = style;
                    }
                    feature.avoidWeight = this.getWeight(style,feature,propertyGetter);
                    feature.styleId = style._id;
                }

            }
        }
    }

    setGlobalStyle(fn){
        this.globalStyle = fn.call({});
    }

    getWeight(style,feature,propertyGetter){

        let weight = feature[1][propertyGetter.propertyConfig[style.avoidField]];
        if (weight) {
            weight = parseInt(weight);
            if (isNaN(weight)) {
                weight = 0;
            }
        }else{
            weight =  0;
        }

        if(weight ==0){
            if(style.avoidWeight){
                return style.avoidWeight;
            }
        }
        return weight;
    }

    draw(){

    }
}

module.exports = LabelDrawer;


},{}],25:[function(require,module,exports){
const GCutLine = require('./GCutLine');
const AvoidUtil =  require('./AvoidUtil');
const _path = './../../../../';
let TextureManager =null;
class ParseLabelData{
    /**
     * 解析瓦片内注记数据
     * @param layerDatas
     * @param styleMap
     * @param isClient
     */
    static parseLayerDatas(layerDatas,styleMap,textures,xyz,isClient){
        let pointFeatures = [];
        let lineFeatures =[];
        for(let layername in layerDatas){
            if(layername == '_layerAvoids'){
                continue;
            }
            let layerData = layerDatas[layername];
            layerData.xyz = xyz;
            let propertyGetter = ParseLabelData.getProperty(layerData.fieldsConfig);
            if(layerData.type == 1){
                let pfs = ParseLabelData.parsePointLayer(layerData,layername,propertyGetter,styleMap,textures,isClient);
                pointFeatures = pointFeatures.concat(pfs);
            }
            if(layerData.type == 2){
                let lfs = ParseLabelData.parseLineLayer(layerData,layername,propertyGetter,styleMap,isClient);
                lineFeatures = lineFeatures.concat(lfs);
            }
        }

        return {pointFeatures:pointFeatures,lineFeatures:lineFeatures};
    }

    /**
     *  解析点图层数据
     */
    static parsePointLayer(layerData,layername,propertyGetter,styleMap,textures,isClient){
        let pointFeatures = [];
        for(let i =0;i<layerData.features.length;i++){
            let feature = layerData.features[i];
            let style = styleMap[feature.styleId];
            if(!style){
                continue;
            }

            feature.centerPoint = feature[2];
            feature.attributeId = layername +'__'+ feature[1][propertyGetter.idIndex];
            feature.layerName = layername;
            feature.xyz = layerData.xyz;
            feature.propertyGetter =propertyGetter;
            feature.type =layerData.type;
            feature.weight = feature.avoidWeight;
            if(feature.avoidWeight == null || isNaN(feature.avoidWeight)){
                feature.avoidWeight = style.avoidWeight;
                feature.weight = feature.avoidWeight;
                if(feature.weight == null){
                    feature.weight = 0;
                    feature.avoidWeight = 0;
                }
            }
            if(style.isImportant){
                feature.avoidWeight = 99999999;
                feature.weight = 99999999;
            }

            feature = ParseLabelData.parsePoint(feature,style,textures,isClient);
            pointFeatures.push(feature);
        }

        return pointFeatures;
    }


    /**
     *  解析线图层数据
     */
    static parseLineLayer(layerData,layername,propertyGetter,styleMap,isClient){
        let lineFeatures = [];
        for(let i =0;i<layerData.features.length;i++){
            let feature = layerData.features[i];
            let style = styleMap[feature.styleId];
            if(!style){
                continue;
            }
            feature.layerName = layername;
            let features = ParseLabelData.parseLine(feature,style,layerData,propertyGetter,isClient);
            lineFeatures = lineFeatures.concat(features);
        }
        return lineFeatures;
    }

    /**
     *  解析点数据
     * @param feature
     * @param style
     * @param isClient
     * @returns {Array}
     */
    static parsePoint(feature,style,textures,isClient){
        if(isClient){
            feature.iconImg = textures[style.texture];
        }else{
            if(TextureManager == null){
                TextureManager = require(_path + 'src/process/texture/TextureManager');
            }
            if(style.texture){
                let texture = TextureManager.getTexture(style.texture);
                if(texture != null) {
                    feature.iconImg = texture.toPattern(ratio);
                }
            }
        }

        feature.attributes = ParseLabelData.getAttributes(feature[1],feature.propertyGetter);
        let point = feature[2];
        let sourceAngleData = [[point, 0]];
        let label = feature.attributes[style.labelfield];
        feature.primaryId = feature.attributeId + '_row_' + feature.xyz.y + '_col_' + feature.xyz.x + '_level_' + feature.xyz.z + '_x_' + sourceAngleData[0][0][0] + '_y_' + sourceAngleData[0][0][1];
        //去掉尾部的空格
        feature.label = AvoidUtil.formatLabel(label);
        feature.weight = feature.avoidWeight;

        let radius = 0;
        if(style.pointBoxDisance){
            radius = style.pointBoxDisance*0.5;
        }

        feature.filterBox =[feature.centerPoint[0]-radius,feature.centerPoint[1]-radius,
            feature.centerPoint[0]+radius,feature.centerPoint[1]+radius];
        feature.sourceData = point;
        feature.sourceAngleData = sourceAngleData;

        if(isClient){
            feature.id = Math.round(Math.random() * 256 * 256 * 256);
            // feature.datas = ParseLabelData.transformData(sourceAngleData, feature.xyz);
        }
        // else{
        //     feature.datas = sourceAngleData;
        // }

        return feature;
    }

    /**
     *  解析线数据
     * @param itemData
     * @param style
     * @param isClient
     * @returns {Array}
     */
    static parseLine(feature,style,layerData,propertyGetter,isClient){
        if (feature[2].length == 0) {
            return [];
        }

        let lines = [];
        ParseLabelData.processLineString(lines,feature[2],feature,style,layerData,propertyGetter,isClient);
        return lines;
    }

    static processLineString(lines,components,feature,style,layerData,propertyGetter,isClient) {
        if (Array.isArray(components[0])) {
            let len = components.length;
            for (let i = 0; i < len; i++) {
                let component = components[i];
                ParseLabelData.processLineString(lines,component,feature,style,layerData,propertyGetter,isClient);
            }
        } else {
            let ls = ParseLabelData.parseMultiLine(feature,components,layerData,propertyGetter,style,isClient);
            for(let i =0;i<ls.length;i++){
                lines.push(ls[i]);
            }
        }
    }

    /**
     *  解析多线数据
     * @param itemData
     * @param style
     * @param isClient
     * @returns {Array}
     */
    static parseMultiLine(feature,line, layerData,propertyGetter,style,isClient){
        let attributes = ParseLabelData.getAttributes(feature[1],propertyGetter);
        let multiLines = [];
        let label = attributes[style.labelfield];
        let roadCodeLabel = attributes[style.roadCodeLabel];
        //去掉尾部的空格
        label = AvoidUtil.formatLabel(label);
        //去掉尾部的空格
        roadCodeLabel = AvoidUtil.formatLabel(roadCodeLabel);

        let objectid = feature[1][propertyGetter.idIndex];
        let attributeId = feature.layerName +'__'+ objectid;
        let weight = feature.avoidWeight;
        if(style.isImportant){
            weight = 99999999;
        }

        let featureItem = {
            type: layerData.type,
            sourceData: line,
            label: label,
            weight: feature.avoidWeight,
            roadCodeLabel: roadCodeLabel,
            attributes: attributes,
            attributeId:attributeId ,
            styleId: feature.styleId,
            xyz: layerData.xyz,
            layerName: feature.layerName
        };
        multiLines = multiLines.concat(ParseLabelData.cutLineFeature(featureItem,style,isClient, false));
        return multiLines;
    }


    /**
     *  切割线注记
     * @param feature
     * @param style
     * @param isClient
     * @param isLocal
     * @returns {*}
     */
    static cutLineFeature(feature, style,isClient,isLocal){
        if(isClient) {
            if (style.type == '_default__') {
                feature.sourceAngleData = ParseLabelData.lineToSourceAngleData(feature.sourceData);
                // feature.datas = ParseLabelData.transformData(feature.sourceAngleData, feature.xyz);
                return [feature];
            }
        }

        let features = GCutLine.cutLineFeature(feature,style,1.0);
        //默认外扩为10
        let radius = 5;

        for (let i = 0; i < features.length; i++) {
            let f = features[i];

            f.primaryId = f.attributeId + '_row_' + feature.xyz.y + '_col_' + feature.xyz.x + '_level_' + feature.xyz.z
                + '_x_' + f.sourceAngleData[0][0][0] + '_y_' + f.sourceAngleData[0][0][1];

            if(isClient){
                //转换为屏幕坐标
                // if (isLocal) {
                //     f.datas = feature.transformData(this.extent, this.res);
                // } else {
                //     f.datas = ParseLabelData.transformData(f.sourceAngleData, f.xyz,maxExtent,extent,res,tileSize);
                // }
                //用于拾取的id
                f.id = Math.round(Math.random() * 256 * 256 * 256);
            }
            // else{
            //     f.datas = f.sourceAngleData;
            // }

            f.layerName = feature.layerName;
            //获取注记的中心点
            if (f.lineType == 'text') {
                let centerIndex = Math.floor(f.sourceAngleData.length / 2);
                f.centerPoint = f.sourceAngleData[centerIndex][0];
                if(style.lineTextBoxDisance){
                    //杭州的外扩距离设置太大，导致大片没线注记，故注释掉了这段
                    radius = style.lineTextBoxDisance*0.5;
                }
            }

            //获取注记的中心点
            if (f.lineType == 'code') {
                f.centerPoint = f.sourceAngleData[0][0];
                if(style.lineCodeBoxDisance){
                    radius = style.lineCodeBoxDisance*0.5;
                }
            }

            //获取注记的中心点
            if (f.lineType == 'arrow') {
                f.centerPoint = f.sourceAngleData[1][0];
            }

            //第二次过滤的box
            f.filterBox = [f.centerPoint[0]-radius,f.centerPoint[1]-radius,f.centerPoint[0]+radius,f.centerPoint[1]+radius];
        }
        return features;
    }

    /**
     * 将线注记原始坐标带点和角度的格式，和切过的线的格式一致（针对默认样式的线主机）
     * Parameters:
     * line - 线注记原始数据
     * Returns:
     */
    static lineToSourceAngleData(line) {
        let sourceAngleData = [];
        for (let i = 0; i < line.length; i++) {
            let x = line[i];
            let y = line[i + 1];
            sourceAngleData.push([[x, y], 0]);
            i++;
        }
        return sourceAngleData;
    };

    /**
     * 将瓦片内坐标转换为当前屏幕坐标
     * Parameters:
     * points - 瓦片内坐标数组,item示例：[[12,20],0] [12,20]为点坐标，0为旋转的角度
     * xyz - 瓦片的层行列号
     * Returns:
     * rdata - 本地屏幕内坐标数组
     */
    static transformData(points, xyz,maxExtent,extent,res,tileSize) {
        //取出当前视口左上角的地理坐标
        let left = extent[0];
        let top = extent[3];

        //地图最大的范围
        let mLeft = maxExtent[0];
        let mTop = maxExtent[3];

        //计算坐上角的屏幕坐标
        let x = (left - mLeft) / res;
        let y = (mTop - top) / res;

        let rPoint = [];

        for (let i = 0; i < points.length; i++) {
            let point = points[i][0];
            let gx = point[0] + xyz.x * tileSize;
            let gy = point[1] + xyz.y * tileSize;
            let p = [gx - x, gy - y];
            rPoint.push([p, points[i][1]]);
        }
        return rPoint;
    };

    static toLonlat(rectangle,point,tileSize){
        var lon = CesiumMath.toDegrees(rectangle.west + rectangle.width/ tileSize* x);
        var lat = CesiumMath.toDegrees(rectangle.north - rectangle.height/ tileSize* y);
        return [lon,lat];
    }




    static getProperty(fieldsConfig){
        let propertyConfig = {};
        let idIndex = 0;
        for(var i = 0 ;i < fieldsConfig.length; i ++){
            if(fieldsConfig[i].id == 'true' || fieldsConfig[i].id == true){
                idIndex = fieldsConfig[i].index;
            }
            propertyConfig[fieldsConfig[i].name] = parseInt(fieldsConfig[i].index);
        }
        return {propertyConfig:propertyConfig,idIndex:idIndex};
    }

    static getAttributes(feature,propertyGetter){
        let attributes = {};
        let propertyConfig = propertyGetter.propertyConfig;
        for(let name in propertyConfig){
            attributes[name] = feature[propertyConfig[name]];
        }
        return attributes;
    }
}

module.exports = ParseLabelData;
},{"./AvoidUtil":17,"./GCutLine":19}],26:[function(require,module,exports){
class Util{
    static measureText(label,font,ctx){
        return ctx.measureText(label).width;
    }

    //要素排序.
    static sort(features,styleMap,hasImportant){
        if(features.length > 0) {
            //从大到少排序
            return  features.sort(function (a, b) {
                if(hasImportant){
                    let aStyle = styleMap[a.styleId];
                    let bStyle = styleMap[b.styleId];
                    if(aStyle.isImportant && !bStyle.isImportant){
                        return -1;
                    }
                    if(bStyle.isImportant && !aStyle.isImportant){
                        return 1;
                    }
                }

                let aAttr = a.weight;
                let bAttr = b.weight;

                // let aId = a.attributeId;
                // let bId = b.attributeId;
                let aId = a.primaryId;
                let bId = b.primaryId;

                if(!aAttr){
                    aAttr = -1;
                }
                if(!bAttr){
                    bAttr = -1;
                }
                if (aAttr < bAttr) {
                    return 1;
                } else if (aAttr == bAttr){
                    if(aId < bId){
                        return 1;
                    }
                    else{
                        return -1;
                    }
                } else {
                    return -1;
                }
            }.bind(this));
        }
    }

    //要素排序.
    static sortPrimaryId(features){
        if(features.length > 0) {
            //从大到少排序
            return  features.sort(function (a, b) {
                let aAttr = a.weight;
                let bAttr = b.weight;

                let aId = a.primaryId;
                let bId = b.primaryId;

                if(!aAttr){
                    aAttr = -1;
                }
                if(!bAttr){
                    bAttr = -1;
                }
                if (aAttr < bAttr) {
                    return 1;
                } else if (aAttr == bAttr){
                    if(aId < bId){
                        return 1;
                    }
                    else{
                        return -1;
                    }
                } else {
                    return -1;
                }
            }.bind(this));
        }
    }

    /**
     * 把注记按照显示的注记名称分组
     * @param features
     * @returns {{}}
     */
    static groupByLabel(features){
        let labelMap = {};
        for(let i = 0;i<features.length;i++){
            let feature = features[i];
            if(feature.label == null && feature.iconImg != null){
                if(labelMap[feature.attributeId] == null){
                    labelMap[feature.attributeId] = [];
                }
                labelMap[feature.attributeId].push(feature);
            }else {
                if (!labelMap[feature.type + '_' + feature.label]) {
                    labelMap[feature.type + '_' + feature.label] = [];
                }
                labelMap[feature.type + '_' + feature.label].push(feature);
            }
        }
        return labelMap;
    }
}
module.exports = Util;




},{}],27:[function(require,module,exports){
'use strict';

const verticalizePunctuation = require('./verticalize_punctuation');
const Glyphs = require('./glyphs');
const Protobuf = require('pbf');
const Resource = Cesium.Resource;

/**
 * A glyph source has a URL from which to load new glyphs and manages
 * GlyphAtlases in which to store glyphs used by the requested fontstacks
 * and ranges.
 *
 * @private
 */
class GlyphSource {
    /**
     * @param {string} url glyph template url
     */
    constructor(url) {
        // this.url = url && normalizeURL(url);
        this.url = url;
        this.stacks = {};
        this.loading = {};
    }


    getSimpleGlyphs(fontstack, glyphIDs, callback) {
        if (this.stacks[fontstack] === undefined) {
            this.stacks[fontstack] = {};
        }

        const glyphs = {};
        const stack = this.stacks[fontstack];

        // the number of pixels the sdf bitmaps are padded by
        const buffer = 3;

        const missing = {};
        let remaining = 0;

        const getGlyph = (glyphID) => {
            const range = Math.floor(glyphID / 256);

            if (stack[range]) {
                const glyph = stack[range].glyphs[glyphID];
                if (glyph) glyphs[glyphID] = glyph;
            } else {
                if (missing[range] === undefined) {
                    missing[range] = [];
                    remaining++;
                }
                missing[range].push(glyphID);
            }
        };

        for (let i = 0; i < glyphIDs.length; i++) {
            const glyphID = glyphIDs[i];
            const string = String.fromCharCode(glyphID);
            getGlyph(glyphID);
            if (verticalizePunctuation.lookup[string]) {
                getGlyph(verticalizePunctuation.lookup[string].charCodeAt(0));
            }
        }

        if (!remaining) callback(undefined, glyphs, fontstack);

        const onRangeLoaded = (err, range, data) => {
            if (!err) {
                const stack = this.stacks[fontstack][range] = data.stacks[0];
                for (let i = 0; i < missing[range].length; i++) {
                    const glyphID = missing[range][i];
                    const glyph = stack.glyphs[glyphID];
                    if (glyph){
                        glyphs[glyphID] = glyph;
                    }
                }
            }
            remaining--;
            if (!remaining) callback(undefined, glyphs, fontstack);
        };

        for (const r in missing) {
            this.loadRange(fontstack, r, onRangeLoaded);
        }
    }

    loadRange(fontstack, range, callback) {
        if (range * 256 > 65535) return callback('glyphs > 65535 not supported');

        if (this.loading[fontstack] === undefined) {
            this.loading[fontstack] = {};
        }
        const loading = this.loading[fontstack];

        if (loading[range]) {
            loading[range].push(callback);
        } else {
            loading[range] = [callback];

            const rangeName = `${range * 256}-${range * 256 + 255}`;
            const url = glyphUrl(fontstack, rangeName, this.url);

            let resource = new Resource({url:url});
            resource.fetchArrayBuffer().then(function(data){
                const glyphs = new Glyphs(new Protobuf(data));
                for (let i = 0; i < loading[range].length; i++) {
                    loading[range][i](null, range, glyphs);
                }
                delete loading[range];
            }.bind(this));
            // ajax.getArrayBuffer(url, (err, response) => {
            //     const glyphs = !err && new Glyphs(new Protobuf(response.data));
            //     for (let i = 0; i < loading[range].length; i++) {
            //         loading[range][i](err, range, glyphs);
            //     }
            //     delete loading[range];
            // });
        }
    }
}

/**
 * Use CNAME sharding to load a specific glyph range over a randomized
 * but consistent subdomain.
 * @param {string} fontstack comma-joined fonts
 * @param {string} range comma-joined range
 * @param {url} url templated url
 * @param {string} [subdomains=abc] subdomains as a string where each letter is one.
 * @returns {string} a url to load that section of glyphs
 * @private
 */
function glyphUrl(fontstack, range, url) {
    fontstack = encodeURIComponent(fontstack);
    return url
        .replace('{fontstack}', fontstack)
        .replace('{range}', range);
}

module.exports = GlyphSource;

},{"./glyphs":28,"./verticalize_punctuation":31,"pbf":7}],28:[function(require,module,exports){
'use strict';

module.exports = Glyphs;

function toRGBA(glyph){
    glyph.height=glyph.height + 6;
    glyph.width = glyph.width + 6;

    let dist = new Uint8Array(glyph.bitmap.length*4);
    //由a通道恢复成rgba通道
    for(let i = 0;i<glyph.bitmap.length;i++){
        let a = glyph.bitmap[i];
        // if(a != 0){
        //     dist[i*4 + 0] = a;
        //     dist[i*4 + 1] = a;
        //     dist[i*4 + 2] = a;
        //     dist[i*4 + 3] = a;
        // }
        if(a != 0){
            dist[i*4 + 0] = a;
            dist[i*4 + 1] = a;
            dist[i*4 + 2] = a;
            dist[i*4 + 3] = a;
        }
    }
    glyph.arrayBufferView = dist;
}


// function toRGBA(glyph){
//     glyph.rw = glyph.width;
//     glyph.rh = glyph.height;
//     glyph.height = glyph.height + 6 + (glyph.width - glyph.height);
//     glyph.width = glyph.width + 6;
//
//     var gamma = 0.21;
//     var buff = (256.0 - 64.0) / 256.0;
//     var p1 = buff - gamma;
//     var p2 = buff + gamma;
//
//     let dist = new Uint8Array(glyph.bitmap.length*4);
//     for(let i = 0;i<glyph.bitmap.length;i++){
//         let a = glyph.bitmap[i];
//         var o = smoothstep(p1,p2,a/256);
//         dist[i*4 + 0] = 255;
//         dist[i*4 + 1] = 255;
//         dist[i*4 + 2] = 255;
//         dist[i*4 + 3] = o*256;
//     }
//     glyph.arrayBufferView = dist;
// }

function smoothstep (min, max, value) {
    var x = Math.max(0, Math.min(1, (value-min)/(max-min)));
    return x*x*(3 - 2*x);
};

function Glyphs(pbf, end) {
    this.stacks = pbf.readFields(readFontstacks, [], end);
    for(var i =0;i<this.stacks.length;i++){
        var glyphs = this.stacks[i].glyphs;
        for(var key in glyphs){
            var glyph =glyphs[key];
            toRGBA(glyph);
        }
    }
}

function readFontstacks(tag, stacks, pbf) {
    if (tag === 1) {
        const fontstack = pbf.readMessage(readFontstack, {glyphs: {}});
        stacks.push(fontstack);
    }
}

function readFontstack(tag, fontstack, pbf) {
    if (tag === 1) fontstack.name = pbf.readString();
    else if (tag === 2) fontstack.range = pbf.readString();
    else if (tag === 3) {
        const glyph = pbf.readMessage(readGlyph, {});
        fontstack.glyphs[glyph.id] = glyph;
    }
}

function readGlyph(tag, glyph, pbf) {
    if (tag === 1) glyph.id = pbf.readVarint();
    else if (tag === 2) glyph.bitmap = pbf.readBytes();
    else if (tag === 3) glyph.width = pbf.readVarint();
    else if (tag === 4) glyph.height = pbf.readVarint();
    else if (tag === 5) glyph.left = pbf.readSVarint();
    else if (tag === 6) glyph.top = pbf.readSVarint();
    else if (tag === 7) glyph.advance = pbf.readVarint();
}

},{}],29:[function(require,module,exports){
'use strict';
// @flow

// The following table comes from <http://www.unicode.org/Public/9.0.0/ucd/Blocks.txt>.
// Keep it synchronized with <http://www.unicode.org/Public/UCD/latest/ucd/Blocks.txt>.

// type UnicodeBlockLookup = {[key: string]: (char: number) => boolean};

const unicodeBlockLookup = {
    // 'Basic Latin': (char) => char >= 0x0000 && char <= 0x007F,
    'Latin-1 Supplement': (char) => char >= 0x0080 && char <= 0x00FF,
    // 'Latin Extended-A': (char) => char >= 0x0100 && char <= 0x017F,
    // 'Latin Extended-B': (char) => char >= 0x0180 && char <= 0x024F,
    // 'IPA Extensions': (char) => char >= 0x0250 && char <= 0x02AF,
    // 'Spacing Modifier Letters': (char) => char >= 0x02B0 && char <= 0x02FF,
    // 'Combining Diacritical Marks': (char) => char >= 0x0300 && char <= 0x036F,
    // 'Greek and Coptic': (char) => char >= 0x0370 && char <= 0x03FF,
    // 'Cyrillic': (char) => char >= 0x0400 && char <= 0x04FF,
    // 'Cyrillic Supplement': (char) => char >= 0x0500 && char <= 0x052F,
    // 'Armenian': (char) => char >= 0x0530 && char <= 0x058F,
    //'Hebrew': (char) => char >= 0x0590 && char <= 0x05FF,
    'Arabic': (char) => char >= 0x0600 && char <= 0x06FF,
    //'Syriac': (char) => char >= 0x0700 && char <= 0x074F,
    'Arabic Supplement': (char) => char >= 0x0750 && char <= 0x077F,
    // 'Thaana': (char) => char >= 0x0780 && char <= 0x07BF,
    // 'NKo': (char) => char >= 0x07C0 && char <= 0x07FF,
    // 'Samaritan': (char) => char >= 0x0800 && char <= 0x083F,
    // 'Mandaic': (char) => char >= 0x0840 && char <= 0x085F,
    'Arabic Extended-A': (char) => char >= 0x08A0 && char <= 0x08FF,
    // 'Devanagari': (char) => char >= 0x0900 && char <= 0x097F,
    // 'Bengali': (char) => char >= 0x0980 && char <= 0x09FF,
    // 'Gurmukhi': (char) => char >= 0x0A00 && char <= 0x0A7F,
    // 'Gujarati': (char) => char >= 0x0A80 && char <= 0x0AFF,
    // 'Oriya': (char) => char >= 0x0B00 && char <= 0x0B7F,
    // 'Tamil': (char) => char >= 0x0B80 && char <= 0x0BFF,
    // 'Telugu': (char) => char >= 0x0C00 && char <= 0x0C7F,
    // 'Kannada': (char) => char >= 0x0C80 && char <= 0x0CFF,
    // 'Malayalam': (char) => char >= 0x0D00 && char <= 0x0D7F,
    // 'Sinhala': (char) => char >= 0x0D80 && char <= 0x0DFF,
    // 'Thai': (char) => char >= 0x0E00 && char <= 0x0E7F,
    // 'Lao': (char) => char >= 0x0E80 && char <= 0x0EFF,
    // 'Tibetan': (char) => char >= 0x0F00 && char <= 0x0FFF,
    // 'Myanmar': (char) => char >= 0x1000 && char <= 0x109F,
    // 'Georgian': (char) => char >= 0x10A0 && char <= 0x10FF,
    'Hangul Jamo': (char) => char >= 0x1100 && char <= 0x11FF,
    // 'Ethiopic': (char) => char >= 0x1200 && char <= 0x137F,
    // 'Ethiopic Supplement': (char) => char >= 0x1380 && char <= 0x139F,
    // 'Cherokee': (char) => char >= 0x13A0 && char <= 0x13FF,
    'Unified Canadian Aboriginal Syllabics': (char) => char >= 0x1400 && char <= 0x167F,
    // 'Ogham': (char) => char >= 0x1680 && char <= 0x169F,
    // 'Runic': (char) => char >= 0x16A0 && char <= 0x16FF,
    // 'Tagalog': (char) => char >= 0x1700 && char <= 0x171F,
    // 'Hanunoo': (char) => char >= 0x1720 && char <= 0x173F,
    // 'Buhid': (char) => char >= 0x1740 && char <= 0x175F,
    // 'Tagbanwa': (char) => char >= 0x1760 && char <= 0x177F,
    // 'Khmer': (char) => char >= 0x1780 && char <= 0x17FF,
    // 'Mongolian': (char) => char >= 0x1800 && char <= 0x18AF,
    'Unified Canadian Aboriginal Syllabics Extended': (char) => char >= 0x18B0 && char <= 0x18FF,
    // 'Limbu': (char) => char >= 0x1900 && char <= 0x194F,
    // 'Tai Le': (char) => char >= 0x1950 && char <= 0x197F,
    // 'New Tai Lue': (char) => char >= 0x1980 && char <= 0x19DF,
    // 'Khmer Symbols': (char) => char >= 0x19E0 && char <= 0x19FF,
    // 'Buginese': (char) => char >= 0x1A00 && char <= 0x1A1F,
    // 'Tai Tham': (char) => char >= 0x1A20 && char <= 0x1AAF,
    // 'Combining Diacritical Marks Extended': (char) => char >= 0x1AB0 && char <= 0x1AFF,
    // 'Balinese': (char) => char >= 0x1B00 && char <= 0x1B7F,
    // 'Sundanese': (char) => char >= 0x1B80 && char <= 0x1BBF,
    // 'Batak': (char) => char >= 0x1BC0 && char <= 0x1BFF,
    // 'Lepcha': (char) => char >= 0x1C00 && char <= 0x1C4F,
    // 'Ol Chiki': (char) => char >= 0x1C50 && char <= 0x1C7F,
    // 'Cyrillic Extended-C': (char) => char >= 0x1C80 && char <= 0x1C8F,
    // 'Sundanese Supplement': (char) => char >= 0x1CC0 && char <= 0x1CCF,
    // 'Vedic Extensions': (char) => char >= 0x1CD0 && char <= 0x1CFF,
    // 'Phonetic Extensions': (char) => char >= 0x1D00 && char <= 0x1D7F,
    // 'Phonetic Extensions Supplement': (char) => char >= 0x1D80 && char <= 0x1DBF,
    // 'Combining Diacritical Marks Supplement': (char) => char >= 0x1DC0 && char <= 0x1DFF,
    // 'Latin Extended Additional': (char) => char >= 0x1E00 && char <= 0x1EFF,
    // 'Greek Extended': (char) => char >= 0x1F00 && char <= 0x1FFF,
    'General Punctuation': (char) => char >= 0x2000 && char <= 0x206F,
    // 'Superscripts and Subscripts': (char) => char >= 0x2070 && char <= 0x209F,
    // 'Currency Symbols': (char) => char >= 0x20A0 && char <= 0x20CF,
    // 'Combining Diacritical Marks for Symbols': (char) => char >= 0x20D0 && char <= 0x20FF,
    'Letterlike Symbols': (char) => char >= 0x2100 && char <= 0x214F,
    'Number Forms': (char) => char >= 0x2150 && char <= 0x218F,
    // 'Arrows': (char) => char >= 0x2190 && char <= 0x21FF,
    // 'Mathematical Operators': (char) => char >= 0x2200 && char <= 0x22FF,
    'Miscellaneous Technical': (char) => char >= 0x2300 && char <= 0x23FF,
    'Control Pictures': (char) => char >= 0x2400 && char <= 0x243F,
    'Optical Character Recognition': (char) => char >= 0x2440 && char <= 0x245F,
    'Enclosed Alphanumerics': (char) => char >= 0x2460 && char <= 0x24FF,
    // 'Box Drawing': (char) => char >= 0x2500 && char <= 0x257F,
    // 'Block Elements': (char) => char >= 0x2580 && char <= 0x259F,
    'Geometric Shapes': (char) => char >= 0x25A0 && char <= 0x25FF,
    'Miscellaneous Symbols': (char) => char >= 0x2600 && char <= 0x26FF,
    // 'Dingbats': (char) => char >= 0x2700 && char <= 0x27BF,
    // 'Miscellaneous Mathematical Symbols-A': (char) => char >= 0x27C0 && char <= 0x27EF,
    // 'Supplemental Arrows-A': (char) => char >= 0x27F0 && char <= 0x27FF,
    // 'Braille Patterns': (char) => char >= 0x2800 && char <= 0x28FF,
    // 'Supplemental Arrows-B': (char) => char >= 0x2900 && char <= 0x297F,
    // 'Miscellaneous Mathematical Symbols-B': (char) => char >= 0x2980 && char <= 0x29FF,
    // 'Supplemental Mathematical Operators': (char) => char >= 0x2A00 && char <= 0x2AFF,
    'Miscellaneous Symbols and Arrows': (char) => char >= 0x2B00 && char <= 0x2BFF,
    // 'Glagolitic': (char) => char >= 0x2C00 && char <= 0x2C5F,
    // 'Latin Extended-C': (char) => char >= 0x2C60 && char <= 0x2C7F,
    // 'Coptic': (char) => char >= 0x2C80 && char <= 0x2CFF,
    // 'Georgian Supplement': (char) => char >= 0x2D00 && char <= 0x2D2F,
    // 'Tifinagh': (char) => char >= 0x2D30 && char <= 0x2D7F,
    // 'Ethiopic Extended': (char) => char >= 0x2D80 && char <= 0x2DDF,
    // 'Cyrillic Extended-A': (char) => char >= 0x2DE0 && char <= 0x2DFF,
    // 'Supplemental Punctuation': (char) => char >= 0x2E00 && char <= 0x2E7F,
    'CJK Radicals Supplement': (char) => char >= 0x2E80 && char <= 0x2EFF,
    'Kangxi Radicals': (char) => char >= 0x2F00 && char <= 0x2FDF,
    'Ideographic Description Characters': (char) => char >= 0x2FF0 && char <= 0x2FFF,
    'CJK Symbols and Punctuation': (char) => char >= 0x3000 && char <= 0x303F,
    'Hiragana': (char) => char >= 0x3040 && char <= 0x309F,
    'Katakana': (char) => char >= 0x30A0 && char <= 0x30FF,
    'Bopomofo': (char) => char >= 0x3100 && char <= 0x312F,
    'Hangul Compatibility Jamo': (char) => char >= 0x3130 && char <= 0x318F,
    'Kanbun': (char) => char >= 0x3190 && char <= 0x319F,
    'Bopomofo Extended': (char) => char >= 0x31A0 && char <= 0x31BF,
    'CJK Strokes': (char) => char >= 0x31C0 && char <= 0x31EF,
    'Katakana Phonetic Extensions': (char) => char >= 0x31F0 && char <= 0x31FF,
    'Enclosed CJK Letters and Months': (char) => char >= 0x3200 && char <= 0x32FF,
    'CJK Compatibility': (char) => char >= 0x3300 && char <= 0x33FF,
    'CJK Unified Ideographs Extension A': (char) => char >= 0x3400 && char <= 0x4DBF,
    'Yijing Hexagram Symbols': (char) => char >= 0x4DC0 && char <= 0x4DFF,
    'CJK Unified Ideographs': (char) => char >= 0x4E00 && char <= 0x9FFF,
    'Yi Syllables': (char) => char >= 0xA000 && char <= 0xA48F,
    'Yi Radicals': (char) => char >= 0xA490 && char <= 0xA4CF,
    // 'Lisu': (char) => char >= 0xA4D0 && char <= 0xA4FF,
    // 'Vai': (char) => char >= 0xA500 && char <= 0xA63F,
    // 'Cyrillic Extended-B': (char) => char >= 0xA640 && char <= 0xA69F,
    // 'Bamum': (char) => char >= 0xA6A0 && char <= 0xA6FF,
    // 'Modifier Tone Letters': (char) => char >= 0xA700 && char <= 0xA71F,
    // 'Latin Extended-D': (char) => char >= 0xA720 && char <= 0xA7FF,
    // 'Syloti Nagri': (char) => char >= 0xA800 && char <= 0xA82F,
    // 'Common Indic Number Forms': (char) => char >= 0xA830 && char <= 0xA83F,
    // 'Phags-pa': (char) => char >= 0xA840 && char <= 0xA87F,
    // 'Saurashtra': (char) => char >= 0xA880 && char <= 0xA8DF,
    // 'Devanagari Extended': (char) => char >= 0xA8E0 && char <= 0xA8FF,
    // 'Kayah Li': (char) => char >= 0xA900 && char <= 0xA92F,
    // 'Rejang': (char) => char >= 0xA930 && char <= 0xA95F,
    'Hangul Jamo Extended-A': (char) => char >= 0xA960 && char <= 0xA97F,
    // 'Javanese': (char) => char >= 0xA980 && char <= 0xA9DF,
    // 'Myanmar Extended-B': (char) => char >= 0xA9E0 && char <= 0xA9FF,
    // 'Cham': (char) => char >= 0xAA00 && char <= 0xAA5F,
    // 'Myanmar Extended-A': (char) => char >= 0xAA60 && char <= 0xAA7F,
    // 'Tai Viet': (char) => char >= 0xAA80 && char <= 0xAADF,
    // 'Meetei Mayek Extensions': (char) => char >= 0xAAE0 && char <= 0xAAFF,
    // 'Ethiopic Extended-A': (char) => char >= 0xAB00 && char <= 0xAB2F,
    // 'Latin Extended-E': (char) => char >= 0xAB30 && char <= 0xAB6F,
    // 'Cherokee Supplement': (char) => char >= 0xAB70 && char <= 0xABBF,
    // 'Meetei Mayek': (char) => char >= 0xABC0 && char <= 0xABFF,
    'Hangul Syllables': (char) => char >= 0xAC00 && char <= 0xD7AF,
    'Hangul Jamo Extended-B': (char) => char >= 0xD7B0 && char <= 0xD7FF,
    // 'High Surrogates': (char) => char >= 0xD800 && char <= 0xDB7F,
    // 'High Private Use Surrogates': (char) => char >= 0xDB80 && char <= 0xDBFF,
    // 'Low Surrogates': (char) => char >= 0xDC00 && char <= 0xDFFF,
    'Private Use Area': (char) => char >= 0xE000 && char <= 0xF8FF,
    'CJK Compatibility Ideographs': (char) => char >= 0xF900 && char <= 0xFAFF,
    // 'Alphabetic Presentation Forms': (char) => char >= 0xFB00 && char <= 0xFB4F,
    'Arabic Presentation Forms-A': (char) => char >= 0xFB50 && char <= 0xFDFF,
    // 'Variation Selectors': (char) => char >= 0xFE00 && char <= 0xFE0F,
    'Vertical Forms': (char) => char >= 0xFE10 && char <= 0xFE1F,
    // 'Combining Half Marks': (char) => char >= 0xFE20 && char <= 0xFE2F,
    'CJK Compatibility Forms': (char) => char >= 0xFE30 && char <= 0xFE4F,
    'Small Form Variants': (char) => char >= 0xFE50 && char <= 0xFE6F,
    'Arabic Presentation Forms-B': (char) => char >= 0xFE70 && char <= 0xFEFF,
    'Halfwidth and Fullwidth Forms': (char) => char >= 0xFF00 && char <= 0xFFEF
    // 'Specials': (char) => char >= 0xFFF0 && char <= 0xFFFF,
    // 'Linear B Syllabary': (char) => char >= 0x10000 && char <= 0x1007F,
    // 'Linear B Ideograms': (char) => char >= 0x10080 && char <= 0x100FF,
    // 'Aegean Numbers': (char) => char >= 0x10100 && char <= 0x1013F,
    // 'Ancient Greek Numbers': (char) => char >= 0x10140 && char <= 0x1018F,
    // 'Ancient Symbols': (char) => char >= 0x10190 && char <= 0x101CF,
    // 'Phaistos Disc': (char) => char >= 0x101D0 && char <= 0x101FF,
    // 'Lycian': (char) => char >= 0x10280 && char <= 0x1029F,
    // 'Carian': (char) => char >= 0x102A0 && char <= 0x102DF,
    // 'Coptic Epact Numbers': (char) => char >= 0x102E0 && char <= 0x102FF,
    // 'Old Italic': (char) => char >= 0x10300 && char <= 0x1032F,
    // 'Gothic': (char) => char >= 0x10330 && char <= 0x1034F,
    // 'Old Permic': (char) => char >= 0x10350 && char <= 0x1037F,
    // 'Ugaritic': (char) => char >= 0x10380 && char <= 0x1039F,
    // 'Old Persian': (char) => char >= 0x103A0 && char <= 0x103DF,
    // 'Deseret': (char) => char >= 0x10400 && char <= 0x1044F,
    // 'Shavian': (char) => char >= 0x10450 && char <= 0x1047F,
    // 'Osmanya': (char) => char >= 0x10480 && char <= 0x104AF,
    // 'Osage': (char) => char >= 0x104B0 && char <= 0x104FF,
    // 'Elbasan': (char) => char >= 0x10500 && char <= 0x1052F,
    // 'Caucasian Albanian': (char) => char >= 0x10530 && char <= 0x1056F,
    // 'Linear A': (char) => char >= 0x10600 && char <= 0x1077F,
    // 'Cypriot Syllabary': (char) => char >= 0x10800 && char <= 0x1083F,
    // 'Imperial Aramaic': (char) => char >= 0x10840 && char <= 0x1085F,
    // 'Palmyrene': (char) => char >= 0x10860 && char <= 0x1087F,
    // 'Nabataean': (char) => char >= 0x10880 && char <= 0x108AF,
    // 'Hatran': (char) => char >= 0x108E0 && char <= 0x108FF,
    // 'Phoenician': (char) => char >= 0x10900 && char <= 0x1091F,
    // 'Lydian': (char) => char >= 0x10920 && char <= 0x1093F,
    // 'Meroitic Hieroglyphs': (char) => char >= 0x10980 && char <= 0x1099F,
    // 'Meroitic Cursive': (char) => char >= 0x109A0 && char <= 0x109FF,
    // 'Kharoshthi': (char) => char >= 0x10A00 && char <= 0x10A5F,
    // 'Old South Arabian': (char) => char >= 0x10A60 && char <= 0x10A7F,
    // 'Old North Arabian': (char) => char >= 0x10A80 && char <= 0x10A9F,
    // 'Manichaean': (char) => char >= 0x10AC0 && char <= 0x10AFF,
    // 'Avestan': (char) => char >= 0x10B00 && char <= 0x10B3F,
    // 'Inscriptional Parthian': (char) => char >= 0x10B40 && char <= 0x10B5F,
    // 'Inscriptional Pahlavi': (char) => char >= 0x10B60 && char <= 0x10B7F,
    // 'Psalter Pahlavi': (char) => char >= 0x10B80 && char <= 0x10BAF,
    // 'Old Turkic': (char) => char >= 0x10C00 && char <= 0x10C4F,
    // 'Old Hungarian': (char) => char >= 0x10C80 && char <= 0x10CFF,
    // 'Rumi Numeral Symbols': (char) => char >= 0x10E60 && char <= 0x10E7F,
    // 'Brahmi': (char) => char >= 0x11000 && char <= 0x1107F,
    // 'Kaithi': (char) => char >= 0x11080 && char <= 0x110CF,
    // 'Sora Sompeng': (char) => char >= 0x110D0 && char <= 0x110FF,
    // 'Chakma': (char) => char >= 0x11100 && char <= 0x1114F,
    // 'Mahajani': (char) => char >= 0x11150 && char <= 0x1117F,
    // 'Sharada': (char) => char >= 0x11180 && char <= 0x111DF,
    // 'Sinhala Archaic Numbers': (char) => char >= 0x111E0 && char <= 0x111FF,
    // 'Khojki': (char) => char >= 0x11200 && char <= 0x1124F,
    // 'Multani': (char) => char >= 0x11280 && char <= 0x112AF,
    // 'Khudawadi': (char) => char >= 0x112B0 && char <= 0x112FF,
    // 'Grantha': (char) => char >= 0x11300 && char <= 0x1137F,
    // 'Newa': (char) => char >= 0x11400 && char <= 0x1147F,
    // 'Tirhuta': (char) => char >= 0x11480 && char <= 0x114DF,
    // 'Siddham': (char) => char >= 0x11580 && char <= 0x115FF,
    // 'Modi': (char) => char >= 0x11600 && char <= 0x1165F,
    // 'Mongolian Supplement': (char) => char >= 0x11660 && char <= 0x1167F,
    // 'Takri': (char) => char >= 0x11680 && char <= 0x116CF,
    // 'Ahom': (char) => char >= 0x11700 && char <= 0x1173F,
    // 'Warang Citi': (char) => char >= 0x118A0 && char <= 0x118FF,
    // 'Pau Cin Hau': (char) => char >= 0x11AC0 && char <= 0x11AFF,
    // 'Bhaiksuki': (char) => char >= 0x11C00 && char <= 0x11C6F,
    // 'Marchen': (char) => char >= 0x11C70 && char <= 0x11CBF,
    // 'Cuneiform': (char) => char >= 0x12000 && char <= 0x123FF,
    // 'Cuneiform Numbers and Punctuation': (char) => char >= 0x12400 && char <= 0x1247F,
    // 'Early Dynastic Cuneiform': (char) => char >= 0x12480 && char <= 0x1254F,
    // 'Egyptian Hieroglyphs': (char) => char >= 0x13000 && char <= 0x1342F,
    // 'Anatolian Hieroglyphs': (char) => char >= 0x14400 && char <= 0x1467F,
    // 'Bamum Supplement': (char) => char >= 0x16800 && char <= 0x16A3F,
    // 'Mro': (char) => char >= 0x16A40 && char <= 0x16A6F,
    // 'Bassa Vah': (char) => char >= 0x16AD0 && char <= 0x16AFF,
    // 'Pahawh Hmong': (char) => char >= 0x16B00 && char <= 0x16B8F,
    // 'Miao': (char) => char >= 0x16F00 && char <= 0x16F9F,
    // 'Ideographic Symbols and Punctuation': (char) => char >= 0x16FE0 && char <= 0x16FFF,
    // 'Tangut': (char) => char >= 0x17000 && char <= 0x187FF,
    // 'Tangut Components': (char) => char >= 0x18800 && char <= 0x18AFF,
    // 'Kana Supplement': (char) => char >= 0x1B000 && char <= 0x1B0FF,
    // 'Duployan': (char) => char >= 0x1BC00 && char <= 0x1BC9F,
    // 'Shorthand Format Controls': (char) => char >= 0x1BCA0 && char <= 0x1BCAF,
    // 'Byzantine Musical Symbols': (char) => char >= 0x1D000 && char <= 0x1D0FF,
    // 'Musical Symbols': (char) => char >= 0x1D100 && char <= 0x1D1FF,
    // 'Ancient Greek Musical Notation': (char) => char >= 0x1D200 && char <= 0x1D24F,
    // 'Tai Xuan Jing Symbols': (char) => char >= 0x1D300 && char <= 0x1D35F,
    // 'Counting Rod Numerals': (char) => char >= 0x1D360 && char <= 0x1D37F,
    // 'Mathematical Alphanumeric Symbols': (char) => char >= 0x1D400 && char <= 0x1D7FF,
    // 'Sutton SignWriting': (char) => char >= 0x1D800 && char <= 0x1DAAF,
    // 'Glagolitic Supplement': (char) => char >= 0x1E000 && char <= 0x1E02F,
    // 'Mende Kikakui': (char) => char >= 0x1E800 && char <= 0x1E8DF,
    // 'Adlam': (char) => char >= 0x1E900 && char <= 0x1E95F,
    // 'Arabic Mathematical Alphabetic Symbols': (char) => char >= 0x1EE00 && char <= 0x1EEFF,
    // 'Mahjong Tiles': (char) => char >= 0x1F000 && char <= 0x1F02F,
    // 'Domino Tiles': (char) => char >= 0x1F030 && char <= 0x1F09F,
    // 'Playing Cards': (char) => char >= 0x1F0A0 && char <= 0x1F0FF,
    // 'Enclosed Alphanumeric Supplement': (char) => char >= 0x1F100 && char <= 0x1F1FF,
    // 'Enclosed Ideographic Supplement': (char) => char >= 0x1F200 && char <= 0x1F2FF,
    // 'Miscellaneous Symbols and Pictographs': (char) => char >= 0x1F300 && char <= 0x1F5FF,
    // 'Emoticons': (char) => char >= 0x1F600 && char <= 0x1F64F,
    // 'Ornamental Dingbats': (char) => char >= 0x1F650 && char <= 0x1F67F,
    // 'Transport and Map Symbols': (char) => char >= 0x1F680 && char <= 0x1F6FF,
    // 'Alchemical Symbols': (char) => char >= 0x1F700 && char <= 0x1F77F,
    // 'Geometric Shapes Extended': (char) => char >= 0x1F780 && char <= 0x1F7FF,
    // 'Supplemental Arrows-C': (char) => char >= 0x1F800 && char <= 0x1F8FF,
    // 'Supplemental Symbols and Pictographs': (char) => char >= 0x1F900 && char <= 0x1F9FF,
    // 'CJK Unified Ideographs Extension B': (char) => char >= 0x20000 && char <= 0x2A6DF,
    // 'CJK Unified Ideographs Extension C': (char) => char >= 0x2A700 && char <= 0x2B73F,
    // 'CJK Unified Ideographs Extension D': (char) => char >= 0x2B740 && char <= 0x2B81F,
    // 'CJK Unified Ideographs Extension E': (char) => char >= 0x2B820 && char <= 0x2CEAF,
    // 'CJK Compatibility Ideographs Supplement': (char) => char >= 0x2F800 && char <= 0x2FA1F,
    // 'Tags': (char) => char >= 0xE0000 && char <= 0xE007F,
    // 'Variation Selectors Supplement': (char) => char >= 0xE0100 && char <= 0xE01EF,
    // 'Supplementary Private Use Area-A': (char) => char >= 0xF0000 && char <= 0xFFFFF,
    // 'Supplementary Private Use Area-B': (char) => char >= 0x100000 && char <= 0x10FFFF,
};

module.exports = unicodeBlockLookup;

},{}],30:[function(require,module,exports){
'use strict';
/* eslint-disable new-cap */

const isChar = require('./is_char_in_unicode_block');

module.exports.allowsIdeographicBreaking = function(chars) {
    for (const char of chars) {
        if (!exports.charAllowsIdeographicBreaking(char.charCodeAt(0))) return false;
    }
    return true;
};

module.exports.allowsVerticalWritingMode = function(chars) {
    for (const char of chars) {
        if (exports.charHasUprightVerticalOrientation(char.charCodeAt(0))) return true;
    }
    return false;
};

module.exports.allowsLetterSpacing = function(chars) {
    for (const char of chars) {
        if (!exports.charAllowsLetterSpacing(char.charCodeAt(0))) return false;
    }
    return true;
};

module.exports.charAllowsLetterSpacing = function(char) {
    if (isChar['Arabic'](char)) return false;
    if (isChar['Arabic Supplement'](char)) return false;
    if (isChar['Arabic Extended-A'](char)) return false;
    if (isChar['Arabic Presentation Forms-A'](char)) return false;
    if (isChar['Arabic Presentation Forms-B'](char)) return false;

    return true;
};

module.exports.charAllowsIdeographicBreaking = function(char) {
    // Return early for characters outside all ideographic ranges.
    if (char < 0x2E80) return false;

    if (isChar['Bopomofo Extended'](char)) return true;
    if (isChar['Bopomofo'](char)) return true;
    if (isChar['CJK Compatibility Forms'](char)) return true;
    if (isChar['CJK Compatibility Ideographs'](char)) return true;
    if (isChar['CJK Compatibility'](char)) return true;
    if (isChar['CJK Radicals Supplement'](char)) return true;
    if (isChar['CJK Strokes'](char)) return true;
    if (isChar['CJK Symbols and Punctuation'](char)) return true;
    if (isChar['CJK Unified Ideographs Extension A'](char)) return true;
    if (isChar['CJK Unified Ideographs'](char)) return true;
    if (isChar['Enclosed CJK Letters and Months'](char)) return true;
    if (isChar['Halfwidth and Fullwidth Forms'](char)) return true;
    if (isChar['Hiragana'](char)) return true;
    if (isChar['Ideographic Description Characters'](char)) return true;
    if (isChar['Kangxi Radicals'](char)) return true;
    if (isChar['Katakana Phonetic Extensions'](char)) return true;
    if (isChar['Katakana'](char)) return true;
    if (isChar['Vertical Forms'](char)) return true;
    if (isChar['Yi Radicals'](char)) return true;
    if (isChar['Yi Syllables'](char)) return true;

    return false;
};

// The following logic comes from
// <http://www.unicode.org/Public/vertical/revision-16/VerticalOrientation-16.txt>.
// The data file denotes with “U” or “Tu” any codepoint that may be drawn
// upright in vertical text but does not distinguish between upright and
// “neutral” characters.

// Blocks in the Unicode supplementary planes are excluded from this module due
// to <https://github.com/mapbox/mapbox-gl/issues/29>.

/**
 * Returns true if the given Unicode codepoint identifies a character with
 * upright orientation.
 *
 * A character has upright orientation if it is drawn upright (unrotated)
 * whether the line is oriented horizontally or vertically, even if both
 * adjacent characters can be rotated. For example, a Chinese character is
 * always drawn upright. An uprightly oriented character causes an adjacent
 * “neutral” character to be drawn upright as well.
 */
exports.charHasUprightVerticalOrientation = function(char) {
    if (char === 0x02EA /* modifier letter yin departing tone mark */ ||
        char === 0x02EB /* modifier letter yang departing tone mark */) {
        return true;
    }

    // Return early for characters outside all ranges whose characters remain
    // upright in vertical writing mode.
    if (char < 0x1100) return false;

    if (isChar['Bopomofo Extended'](char)) return true;
    if (isChar['Bopomofo'](char)) return true;
    if (isChar['CJK Compatibility Forms'](char)) {
        if (!(char >= 0xFE49 /* dashed overline */ && char <= 0xFE4F /* wavy low line */)) {
            return true;
        }
    }
    if (isChar['CJK Compatibility Ideographs'](char)) return true;
    if (isChar['CJK Compatibility'](char)) return true;
    if (isChar['CJK Radicals Supplement'](char)) return true;
    if (isChar['CJK Strokes'](char)) return true;
    if (isChar['CJK Symbols and Punctuation'](char)) {
        if (!(char >= 0x3008 /* left angle bracket */ && char <= 0x3011 /* right black lenticular bracket */) &&
            !(char >= 0x3014 /* left tortoise shell bracket */ && char <= 0x301F /* low double prime quotation mark */) &&
            char !== 0x3030 /* wavy dash */) {
            return true;
        }
    }
    if (isChar['CJK Unified Ideographs Extension A'](char)) return true;
    if (isChar['CJK Unified Ideographs'](char)) return true;
    if (isChar['Enclosed CJK Letters and Months'](char)) return true;
    if (isChar['Hangul Compatibility Jamo'](char)) return true;
    if (isChar['Hangul Jamo Extended-A'](char)) return true;
    if (isChar['Hangul Jamo Extended-B'](char)) return true;
    if (isChar['Hangul Jamo'](char)) return true;
    if (isChar['Hangul Syllables'](char)) return true;
    if (isChar['Hiragana'](char)) return true;
    if (isChar['Ideographic Description Characters'](char)) return true;
    if (isChar['Kanbun'](char)) return true;
    if (isChar['Kangxi Radicals'](char)) return true;
    if (isChar['Katakana Phonetic Extensions'](char)) return true;
    if (isChar['Katakana'](char)) {
        if (char !== 0x30FC /* katakana-hiragana prolonged sound mark */) {
            return true;
        }
    }
    if (isChar['Halfwidth and Fullwidth Forms'](char)) {
        if (char !== 0xFF08 /* fullwidth left parenthesis */ &&
            char !== 0xFF09 /* fullwidth right parenthesis */ &&
            char !== 0xFF0D /* fullwidth hyphen-minus */ &&
            !(char >= 0xFF1A /* fullwidth colon */ && char <= 0xFF1E /* fullwidth greater-than sign */) &&
            char !== 0xFF3B /* fullwidth left square bracket */ &&
            char !== 0xFF3D /* fullwidth right square bracket */ &&
            char !== 0xFF3F /* fullwidth low line */ &&
            !(char >= 0xFF5B /* fullwidth left curly bracket */ && char <= 0xFFDF) &&
            char !== 0xFFE3 /* fullwidth macron */ &&
            !(char >= 0xFFE8 /* halfwidth forms light vertical */ && char <= 0xFFEF)) {
            return true;
        }
    }
    if (isChar['Small Form Variants'](char)) {
        if (!(char >= 0xFE58 /* small em dash */ && char <= 0xFE5E /* small right tortoise shell bracket */) &&
            !(char >= 0xFE63 /* small hyphen-minus */ && char <= 0xFE66 /* small equals sign */)) {
            return true;
        }
    }
    if (isChar['Unified Canadian Aboriginal Syllabics'](char)) return true;
    if (isChar['Unified Canadian Aboriginal Syllabics Extended'](char)) return true;
    if (isChar['Vertical Forms'](char)) return true;
    if (isChar['Yijing Hexagram Symbols'](char)) return true;
    if (isChar['Yi Syllables'](char)) return true;
    if (isChar['Yi Radicals'](char)) return true;

    return false;
};

/**
 * Returns true if the given Unicode codepoint identifies a character with
 * neutral orientation.
 *
 * A character has neutral orientation if it may be drawn rotated or unrotated
 * when the line is oriented vertically, depending on the orientation of the
 * adjacent characters. For example, along a verticlly oriented line, the vulgar
 * fraction ½ is drawn upright among Chinese characters but rotated among Latin
 * letters. A neutrally oriented character does not influence whether an
 * adjacent character is drawn upright or rotated.
 */
exports.charHasNeutralVerticalOrientation = function(char) {
    if (isChar['Latin-1 Supplement'](char)) {
        if (char === 0x00A7 /* section sign */ ||
            char === 0x00A9 /* copyright sign */ ||
            char === 0x00AE /* registered sign */ ||
            char === 0x00B1 /* plus-minus sign */ ||
            char === 0x00BC /* vulgar fraction one quarter */ ||
            char === 0x00BD /* vulgar fraction one half */ ||
            char === 0x00BE /* vulgar fraction three quarters */ ||
            char === 0x00D7 /* multiplication sign */ ||
            char === 0x00F7 /* division sign */) {
            return true;
        }
    }
    if (isChar['General Punctuation'](char)) {
        if (char === 0x2016 /* double vertical line */ ||
            char === 0x2020 /* dagger */ ||
            char === 0x2021 /* double dagger */ ||
            char === 0x2030 /* per mille sign */ ||
            char === 0x2031 /* per ten thousand sign */ ||
            char === 0x203B /* reference mark */ ||
            char === 0x203C /* double exclamation mark */ ||
            char === 0x2042 /* asterism */ ||
            char === 0x2047 /* double question mark */ ||
            char === 0x2048 /* question exclamation mark */ ||
            char === 0x2049 /* exclamation question mark */ ||
            char === 0x2051 /* two asterisks aligned vertically */) {
            return true;
        }
    }
    if (isChar['Letterlike Symbols'](char)) return true;
    if (isChar['Number Forms'](char)) return true;
    if (isChar['Miscellaneous Technical'](char)) {
        if ((char >= 0x2300 /* diameter sign */ && char <= 0x2307 /* wavy line */) ||
            (char >= 0x230C /* bottom right crop */ && char <= 0x231F /* bottom right corner */) ||
            (char >= 0x2324 /* up arrowhead between two horizontal bars */ && char <= 0x2328 /* keyboard */) ||
            char === 0x232B /* erase to the left */ ||
            (char >= 0x237D /* shouldered open box */ && char <= 0x239A /* clear screen symbol */) ||
            (char >= 0x23BE /* dentistry symbol light vertical and top right */ && char <= 0x23CD /* square foot */) ||
            char === 0x23CF /* eject symbol */ ||
            (char >= 0x23D1 /* metrical breve */ && char <= 0x23DB /* fuse */) ||
            (char >= 0x23E2 /* white trapezium */ && char <= 0x23FF)) {
            return true;
        }
    }
    if (isChar['Control Pictures'](char) && char !== 0x2423 /* open box */) return true;
    if (isChar['Optical Character Recognition'](char)) return true;
    if (isChar['Enclosed Alphanumerics'](char)) return true;
    if (isChar['Geometric Shapes'](char)) return true;
    if (isChar['Miscellaneous Symbols'](char)) {
        if (!(char >= 0x261A /* black left pointing index */ && char <= 0x261F /* white down pointing index */)) {
            return true;
        }
    }
    if (isChar['Miscellaneous Symbols and Arrows'](char)) {
        if ((char >= 0x2B12 /* square with top half black */ && char <= 0x2B2F /* white vertical ellipse */) ||
            (char >= 0x2B50 /* white medium star */ && char <= 0x2B59 /* heavy circled saltire */) ||
            (char >= 0x2BB8 /* upwards white arrow from bar with horizontal bar */ && char <= 0x2BEB)) {
            return true;
        }
    }
    if (isChar['CJK Symbols and Punctuation'](char)) return true;
    if (isChar['Katakana'](char)) return true;
    if (isChar['Private Use Area'](char)) return true;
    if (isChar['CJK Compatibility Forms'](char)) return true;
    if (isChar['Small Form Variants'](char)) return true;
    if (isChar['Halfwidth and Fullwidth Forms'](char)) return true;

    if (char === 0x221E /* infinity */ ||
        char === 0x2234 /* therefore */ ||
        char === 0x2235 /* because */ ||
        (char >= 0x2700 /* black safety scissors */ && char <= 0x2767 /* rotated floral heart bullet */) ||
        (char >= 0x2776 /* dingbat negative circled digit one */ && char <= 0x2793 /* dingbat negative circled sans-serif number ten */) ||
        char === 0xFFFC /* object replacement character */ ||
        char === 0xFFFD /* replacement character */) {
        return true;
    }

    return false;
};

/**
 * Returns true if the given Unicode codepoint identifies a character with
 * rotated orientation.
 *
 * A character has rotated orientation if it is drawn rotated when the line is
 * oriented vertically, even if both adjacent characters are upright. For
 * example, a Latin letter is drawn rotated along a vertical line. A rotated
 * character causes an adjacent “neutral” character to be drawn rotated as well.
 */
exports.charHasRotatedVerticalOrientation = function(char) {
    return !(exports.charHasUprightVerticalOrientation(char) ||
             exports.charHasNeutralVerticalOrientation(char));
};

},{"./is_char_in_unicode_block":29}],31:[function(require,module,exports){
'use strict';

const scriptDetection = require('./script_detection');

module.exports = function verticalizePunctuation(input) {
    let output = '';

    for (let i = 0; i < input.length; i++) {
        const nextCharCode = input.charCodeAt(i + 1) || null;
        const prevCharCode = input.charCodeAt(i - 1) || null;

        const canReplacePunctuation = (
            (!nextCharCode || !scriptDetection.charHasRotatedVerticalOrientation(nextCharCode) || module.exports.lookup[input[i + 1]]) &&
            (!prevCharCode || !scriptDetection.charHasRotatedVerticalOrientation(prevCharCode) || module.exports.lookup[input[i - 1]])
        );

        if (canReplacePunctuation && module.exports.lookup[input[i]]) {
            output += module.exports.lookup[input[i]];
        } else {
            output += input[i];
        }
    }

    return output;
};

module.exports.lookup = {
    '!': '︕',
    '#': '＃',
    '$': '＄',
    '%': '％',
    '&': '＆',
    '(': '︵',
    ')': '︶',
    '*': '＊',
    '+': '＋',
    ',': '︐',
    '-': '︲',
    '.': '・',
    '/': '／',
    ':': '︓',
    ';': '︔',
    '<': '︿',
    '=': '＝',
    '>': '﹀',
    '?': '︖',
    '@': '＠',
    '[': '﹇',
    '\\': '＼',
    ']': '﹈',
    '^': '＾',
    '_': '︳',
    '`': '｀',
    '{': '︷',
    '|': '―',
    '}': '︸',
    '~': '～',
    '¢': '￠',
    '£': '￡',
    '¥': '￥',
    '¦': '￤',
    '¬': '￢',
    '¯': '￣',
    '–': '︲',
    '—': '︱',
    '‘': '﹃',
    '’': '﹄',
    '“': '﹁',
    '”': '﹂',
    '…': '︙',
    '‧': '・',
    '₩': '￦',
    '、': '︑',
    '。': '︒',
    '〈': '︿',
    '〉': '﹀',
    '《': '︽',
    '》': '︾',
    '「': '﹁',
    '」': '﹂',
    '『': '﹃',
    '』': '﹄',
    '【': '︻',
    '】': '︼',
    '〔': '︹',
    '〕': '︺',
    '〖': '︗',
    '〗': '︘',
    '！': '︕',
    '（': '︵',
    '）': '︶',
    '，': '︐',
    '－': '︲',
    '．': '・',
    '：': '︓',
    '；': '︔',
    '＜': '︿',
    '＞': '﹀',
    '？': '︖',
    '［': '﹇',
    '］': '﹈',
    '＿': '︳',
    '｛': '︷',
    '｜': '―',
    '｝': '︸',
    '｟': '︵',
    '｠': '︶',
    '｡': '︒',
    '｢': '﹁',
    '｣': '﹂'
};

},{"./script_detection":30}],32:[function(require,module,exports){
(function (Buffer){(function (){
/*!
 * The buffer module from node.js, for the browser.
 *
 * @author   Feross Aboukhadijeh <feross@feross.org> <http://feross.org>
 * @license  MIT
 */
/* eslint-disable no-proto */

const ieee754 = require('./ieee754');
const isArray = require('./isArray');

var INSPECT_MAX_BYTES = 50;


/**
 * If `Buffer.TYPED_ARRAY_SUPPORT`:
 *   === true    Use Uint8Array implementation (fastest)
 *   === false   Use Object implementation (most compatible, even IE6)
 *
 * Browsers that support typed arrays are IE 10+, Firefox 4+, Chrome 7+, Safari 5.1+,
 * Opera 11.6+, iOS 4.2+.
 *
 * Due to various browser bugs, sometimes the Object implementation will be used even
 * when the browser supports typed arrays.
 *
 * Note:
 *
 *   - Firefox 4-29 lacks support for adding new properties to `Uint8Array` instances,
 *     See: https://bugzilla.mozilla.org/show_bug.cgi?id=695438.
 *
 *   - Chrome 9-10 is missing the `TypedArray.prototype.subarray` function.
 *
 *   - IE10 has a broken `TypedArray.prototype.subarray` function which returns arrays of
 *     incorrect length in some situations.

 * We detect these buggy browsers and set `Buffer.TYPED_ARRAY_SUPPORT` to `false` so they
 * get the Object implementation, which is slower but behaves correctly.
 */
Buffer.TYPED_ARRAY_SUPPORT = true;

/*
 * Export kMaxLength after typed array support is determined.
 */
var _kMaxLength = kMaxLength()
function typedArraySupport () {
    return true;
}

function kMaxLength () {
    return Buffer.TYPED_ARRAY_SUPPORT
        ? 0x7fffffff
        : 0x3fffffff
}

function createBuffer (that, length) {
    if (kMaxLength() < length) {
        throw new RangeError('Invalid typed array length')
    }
    if (Buffer.TYPED_ARRAY_SUPPORT) {
        // Return an augmented `Uint8Array` instance, for best performance
        that = new Uint8Array(length)
        that.__proto__ = Buffer.prototype
    } else {
        // Fallback: Return an object instance of the Buffer class
        if (that === null) {
            that = new Buffer(length)
        }
        that.length = length
    }

    return that
}

/**
 * The Buffer constructor returns instances of `Uint8Array` that have their
 * prototype changed to `Buffer.prototype`. Furthermore, `Buffer` is a subclass of
 * `Uint8Array`, so the returned instances will have all the node `Buffer` methods
 * and the `Uint8Array` methods. Square bracket notation works as expected -- it
 * returns a single octet.
 *
 * The `Uint8Array` prototype remains unmodified.
 */

module.exports = function Buffer (arg, encodingOrOffset, length) {
    if (!Buffer.TYPED_ARRAY_SUPPORT && !(this instanceof Buffer)) {
        return new Buffer(arg, encodingOrOffset, length)
    }

    // Common case.
    if (typeof arg === 'number') {
        if (typeof encodingOrOffset === 'string') {
            throw new Error(
                'If encoding is specified then the first argument must be a string'
            )
        }
        return allocUnsafe(this, arg)
    }
    return from(this, arg, encodingOrOffset, length)
}

Buffer.poolSize = 8192 // not used by this implementation

// TODO: Legacy, not needed anymore. Remove in next major version.
Buffer._augment = function (arr) {
    arr.__proto__ = Buffer.prototype
    return arr
}

function from (that, value, encodingOrOffset, length) {
    if (typeof value === 'number') {
        throw new TypeError('"value" argument must not be a number')
    }

    if (typeof ArrayBuffer !== 'undefined' && value instanceof ArrayBuffer) {
        return fromArrayBuffer(that, value, encodingOrOffset, length)
    }

    if (typeof value === 'string') {
        return fromString(that, value, encodingOrOffset)
    }

    return fromObject(that, value)
}

/**
 * Functionally equivalent to Buffer(arg, encoding) but throws a TypeError
 * if value is a number.
 * Buffer.from(str[, encoding])
 * Buffer.from(array)
 * Buffer.from(buffer)
 * Buffer.from(arrayBuffer[, byteOffset[, length]])
 **/
Buffer.from = function (value, encodingOrOffset, length) {
    return from(null, value, encodingOrOffset, length)
}

if (Buffer.TYPED_ARRAY_SUPPORT) {
    Buffer.prototype.__proto__ = Uint8Array.prototype
    Buffer.__proto__ = Uint8Array
    if (typeof Symbol !== 'undefined' && Symbol.species &&
        Buffer[Symbol.species] === Buffer) {
        // Fix subarray() in ES2016. See: https://github.com/feross/buffer/pull/97
        // Object.defineProperty(Buffer, Symbol.species, {
        //   value: null,
        //   configurable: true
        // })
    }
}

function assertSize (size) {
    if (typeof size !== 'number') {
        throw new TypeError('"size" argument must be a number')
    } else if (size < 0) {
        throw new RangeError('"size" argument must not be negative')
    }
}

function alloc (that, size, fill, encoding) {
    assertSize(size)
    if (size <= 0) {
        return createBuffer(that, size)
    }
    if (fill !== undefined) {
        // Only pay attention to encoding if it's a string. This
        // prevents accidentally sending in a number that would
        // be interpretted as a start offset.
        return typeof encoding === 'string'
            ? createBuffer(that, size).fill(fill, encoding)
            : createBuffer(that, size).fill(fill)
    }
    return createBuffer(that, size)
}

/**
 * Creates a new filled Buffer instance.
 * alloc(size[, fill[, encoding]])
 **/
Buffer.alloc = function (size, fill, encoding) {
    return alloc(null, size, fill, encoding)
}

function allocUnsafe (that, size) {
    assertSize(size)
    that = createBuffer(that, size < 0 ? 0 : checked(size) | 0)
    if (!Buffer.TYPED_ARRAY_SUPPORT) {
        for (var i = 0; i < size; ++i) {
            that[i] = 0
        }
    }
    return that
}

/**
 * Equivalent to Buffer(num), by default creates a non-zero-filled Buffer instance.
 * */
Buffer.allocUnsafe = function (size) {
    return allocUnsafe(null, size)
}
/**
 * Equivalent to SlowBuffer(num), by default creates a non-zero-filled Buffer instance.
 */
Buffer.allocUnsafeSlow = function (size) {
    return allocUnsafe(null, size)
}

function fromString (that, string, encoding) {
    if (typeof encoding !== 'string' || encoding === '') {
        encoding = 'utf8'
    }

    if (!Buffer.isEncoding(encoding)) {
        throw new TypeError('"encoding" must be a valid string encoding')
    }

    var length = byteLength(string, encoding) | 0
    that = createBuffer(that, length)

    var actual = that.write(string, encoding)

    if (actual !== length) {
        // Writing a hex string, for example, that contains invalid characters will
        // cause everything after the first invalid character to be ignored. (e.g.
        // 'abxxcd' will be treated as 'ab')
        that = that.slice(0, actual)
    }

    return that
}

function fromArrayLike (that, array) {
    var length = array.length < 0 ? 0 : checked(array.length) | 0
    that = createBuffer(that, length)
    for (var i = 0; i < length; i += 1) {
        that[i] = array[i] & 255
    }
    return that
}

function fromArrayBuffer (that, array, byteOffset, length) {
    array.byteLength // this throws if `array` is not a valid ArrayBuffer

    if (byteOffset < 0 || array.byteLength < byteOffset) {
        throw new RangeError('\'offset\' is out of bounds')
    }

    if (array.byteLength < byteOffset + (length || 0)) {
        throw new RangeError('\'length\' is out of bounds')
    }

    if (byteOffset === undefined && length === undefined) {
        array = new Uint8Array(array)
    } else if (length === undefined) {
        array = new Uint8Array(array, byteOffset)
    } else {
        array = new Uint8Array(array, byteOffset, length)
    }

    if (Buffer.TYPED_ARRAY_SUPPORT) {
        // Return an augmented `Uint8Array` instance, for best performance
        that = array
        that.__proto__ = Buffer.prototype
    } else {
        // Fallback: Return an object instance of the Buffer class
        that = fromArrayLike(that, array)
    }
    return that
}

function fromObject (that, obj) {
    if (internalIsBuffer(obj)) {
        var len = checked(obj.length) | 0
        that = createBuffer(that, len)

        if (that.length === 0) {
            return that
        }

        obj.copy(that, 0, 0, len)
        return that
    }

    if (obj) {
        if ((typeof ArrayBuffer !== 'undefined' &&
            obj.buffer instanceof ArrayBuffer) || 'length' in obj) {
            if (typeof obj.length !== 'number' || isnan(obj.length)) {
                return createBuffer(that, 0)
            }
            return fromArrayLike(that, obj)
        }

        if (obj.type === 'Buffer' && isArray(obj.data)) {
            return fromArrayLike(that, obj.data)
        }
    }

    throw new TypeError('First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.')
}

function checked (length) {
    // Note: cannot use `length < kMaxLength()` here because that fails when
    // length is NaN (which is otherwise coerced to zero.)
    if (length >= kMaxLength()) {
        throw new RangeError('Attempt to allocate Buffer larger than maximum ' +
            'size: 0x' + kMaxLength().toString(16) + ' bytes')
    }
    return length | 0
}

// export function SlowBuffer (length) {
//   if (+length != length) { // eslint-disable-line eqeqeq
//     length = 0
//   }
//   return Buffer.alloc(+length)
// }
Buffer.isBuffer = isBuffer;
function internalIsBuffer (b) {
    return !!(b != null && b._isBuffer)
}

Buffer.compare = function compare (a, b) {
    if (!internalIsBuffer(a) || !internalIsBuffer(b)) {
        throw new TypeError('Arguments must be Buffers')
    }

    if (a === b) return 0

    var x = a.length
    var y = b.length

    for (var i = 0, len = Math.min(x, y); i < len; ++i) {
        if (a[i] !== b[i]) {
            x = a[i]
            y = b[i]
            break
        }
    }

    if (x < y) return -1
    if (y < x) return 1
    return 0
}

Buffer.isEncoding = function isEncoding (encoding) {
    switch (String(encoding).toLowerCase()) {
        case 'hex':
        case 'utf8':
        case 'utf-8':
        case 'ascii':
        case 'latin1':
        case 'binary':
        case 'base64':
        case 'ucs2':
        case 'ucs-2':
        case 'utf16le':
        case 'utf-16le':
            return true
        default:
            return false
    }
}

Buffer.concat = function concat (list, length) {
    if (!isArray(list)) {
        throw new TypeError('"list" argument must be an Array of Buffers')
    }

    if (list.length === 0) {
        return Buffer.alloc(0)
    }

    var i
    if (length === undefined) {
        length = 0
        for (i = 0; i < list.length; ++i) {
            length += list[i].length
        }
    }

    var buffer = Buffer.allocUnsafe(length)
    var pos = 0
    for (i = 0; i < list.length; ++i) {
        var buf = list[i]
        if (!internalIsBuffer(buf)) {
            throw new TypeError('"list" argument must be an Array of Buffers')
        }
        buf.copy(buffer, pos)
        pos += buf.length
    }
    return buffer
}

function byteLength (string, encoding) {
    if (internalIsBuffer(string)) {
        return string.length
    }
    if (typeof ArrayBuffer !== 'undefined' && typeof ArrayBuffer.isView === 'function' &&
        (ArrayBuffer.isView(string) || string instanceof ArrayBuffer)) {
        return string.byteLength
    }
    if (typeof string !== 'string') {
        string = '' + string
    }

    var len = string.length
    if (len === 0) return 0

    // Use a for loop to avoid recursion
    var loweredCase = false
    for (;;) {
        switch (encoding) {
            case 'ascii':
            case 'latin1':
            case 'binary':
                return len
            case 'utf8':
            case 'utf-8':
            case undefined:
                return utf8ToBytes(string).length
            case 'ucs2':
            case 'ucs-2':
            case 'utf16le':
            case 'utf-16le':
                return len * 2
            case 'hex':
                return len >>> 1
            case 'base64':
            default:
                if (loweredCase) return utf8ToBytes(string).length // assume utf8
                encoding = ('' + encoding).toLowerCase()
                loweredCase = true
        }
    }
}
Buffer.byteLength = byteLength

function slowToString (encoding, start, end) {
    var loweredCase = false

    // No need to verify that "this.length <= MAX_UINT32" since it's a read-only
    // property of a typed array.

    // This behaves neither like String nor Uint8Array in that we set start/end
    // to their upper/lower bounds if the value passed is out of range.
    // undefined is handled specially as per ECMA-262 6th Edition,
    // Section 13.3.3.7 Runtime Semantics: KeyedBindingInitialization.
    if (start === undefined || start < 0) {
        start = 0
    }
    // Return early if start > this.length. Done here to prevent potential uint32
    // coercion fail below.
    if (start > this.length) {
        return ''
    }

    if (end === undefined || end > this.length) {
        end = this.length
    }

    if (end <= 0) {
        return ''
    }

    // Force coersion to uint32. This will also coerce falsey/NaN values to 0.
    end >>>= 0
    start >>>= 0

    if (end <= start) {
        return ''
    }

    if (!encoding) encoding = 'utf8'

    while (true) {
        switch (encoding) {
            case 'hex':
                return hexSlice(this, start, end)

            case 'utf8':
            case 'utf-8':
                return utf8Slice(this, start, end)

            case 'ascii':
                return asciiSlice(this, start, end)

            case 'latin1':
            case 'binary':
                return latin1Slice(this, start, end)

            case 'base64':
                // return base64Slice(this, start, end)

            case 'ucs2':
            case 'ucs-2':
            case 'utf16le':
            case 'utf-16le':
                return utf16leSlice(this, start, end)

            default:
                if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
                encoding = (encoding + '').toLowerCase()
                loweredCase = true
        }
    }
}

// The property is used by `Buffer.isBuffer` and `is-buffer` (in Safari 5-7) to detect
// Buffer instances.
Buffer.prototype._isBuffer = true

function swap (b, n, m) {
    var i = b[n]
    b[n] = b[m]
    b[m] = i
}

Buffer.prototype.swap16 = function swap16 () {
    var len = this.length
    if (len % 2 !== 0) {
        throw new RangeError('Buffer size must be a multiple of 16-bits')
    }
    for (var i = 0; i < len; i += 2) {
        swap(this, i, i + 1)
    }
    return this
}

Buffer.prototype.swap32 = function swap32 () {
    var len = this.length
    if (len % 4 !== 0) {
        throw new RangeError('Buffer size must be a multiple of 32-bits')
    }
    for (var i = 0; i < len; i += 4) {
        swap(this, i, i + 3)
        swap(this, i + 1, i + 2)
    }
    return this
}

Buffer.prototype.swap64 = function swap64 () {
    var len = this.length
    if (len % 8 !== 0) {
        throw new RangeError('Buffer size must be a multiple of 64-bits')
    }
    for (var i = 0; i < len; i += 8) {
        swap(this, i, i + 7)
        swap(this, i + 1, i + 6)
        swap(this, i + 2, i + 5)
        swap(this, i + 3, i + 4)
    }
    return this
}

Buffer.prototype.toString = function toString () {
    var length = this.length | 0
    if (length === 0) return ''
    if (arguments.length === 0) return utf8Slice(this, 0, length)
    return slowToString.apply(this, arguments)
}

Buffer.prototype.equals = function equals (b) {
    if (!internalIsBuffer(b)) throw new TypeError('Argument must be a Buffer')
    if (this === b) return true
    return Buffer.compare(this, b) === 0
}

Buffer.prototype.inspect = function inspect () {
    var str = ''
    var max = INSPECT_MAX_BYTES
    if (this.length > 0) {
        str = this.toString('hex', 0, max).match(/.{2}/g).join(' ')
        if (this.length > max) str += ' ... '
    }
    return '<Buffer ' + str + '>'
}

Buffer.prototype.compare = function compare (target, start, end, thisStart, thisEnd) {
    if (!internalIsBuffer(target)) {
        throw new TypeError('Argument must be a Buffer')
    }

    if (start === undefined) {
        start = 0
    }
    if (end === undefined) {
        end = target ? target.length : 0
    }
    if (thisStart === undefined) {
        thisStart = 0
    }
    if (thisEnd === undefined) {
        thisEnd = this.length
    }

    if (start < 0 || end > target.length || thisStart < 0 || thisEnd > this.length) {
        throw new RangeError('out of range index')
    }

    if (thisStart >= thisEnd && start >= end) {
        return 0
    }
    if (thisStart >= thisEnd) {
        return -1
    }
    if (start >= end) {
        return 1
    }

    start >>>= 0
    end >>>= 0
    thisStart >>>= 0
    thisEnd >>>= 0

    if (this === target) return 0

    var x = thisEnd - thisStart
    var y = end - start
    var len = Math.min(x, y)

    var thisCopy = this.slice(thisStart, thisEnd)
    var targetCopy = target.slice(start, end)

    for (var i = 0; i < len; ++i) {
        if (thisCopy[i] !== targetCopy[i]) {
            x = thisCopy[i]
            y = targetCopy[i]
            break
        }
    }

    if (x < y) return -1
    if (y < x) return 1
    return 0
}

// Finds either the first index of `val` in `buffer` at offset >= `byteOffset`,
// OR the last index of `val` in `buffer` at offset <= `byteOffset`.
//
// Arguments:
// - buffer - a Buffer to search
// - val - a string, Buffer, or number
// - byteOffset - an index into `buffer`; will be clamped to an int32
// - encoding - an optional encoding, relevant is val is a string
// - dir - true for indexOf, false for lastIndexOf
function bidirectionalIndexOf (buffer, val, byteOffset, encoding, dir) {
    // Empty buffer means no match
    if (buffer.length === 0) return -1

    // Normalize byteOffset
    if (typeof byteOffset === 'string') {
        encoding = byteOffset
        byteOffset = 0
    } else if (byteOffset > 0x7fffffff) {
        byteOffset = 0x7fffffff
    } else if (byteOffset < -0x80000000) {
        byteOffset = -0x80000000
    }
    byteOffset = +byteOffset  // Coerce to Number.
    if (isNaN(byteOffset)) {
        // byteOffset: it it's undefined, null, NaN, "foo", etc, search whole buffer
        byteOffset = dir ? 0 : (buffer.length - 1)
    }

    // Normalize byteOffset: negative offsets start from the end of the buffer
    if (byteOffset < 0) byteOffset = buffer.length + byteOffset
    if (byteOffset >= buffer.length) {
        if (dir) return -1
        else byteOffset = buffer.length - 1
    } else if (byteOffset < 0) {
        if (dir) byteOffset = 0
        else return -1
    }

    // Normalize val
    if (typeof val === 'string') {
        val = Buffer.from(val, encoding)
    }

    // Finally, search either indexOf (if dir is true) or lastIndexOf
    if (internalIsBuffer(val)) {
        // Special case: looking for empty string/buffer always fails
        if (val.length === 0) {
            return -1
        }
        return arrayIndexOf(buffer, val, byteOffset, encoding, dir)
    } else if (typeof val === 'number') {
        val = val & 0xFF // Search for a byte value [0-255]
        if (Buffer.TYPED_ARRAY_SUPPORT &&
            typeof Uint8Array.prototype.indexOf === 'function') {
            if (dir) {
                return Uint8Array.prototype.indexOf.call(buffer, val, byteOffset)
            } else {
                return Uint8Array.prototype.lastIndexOf.call(buffer, val, byteOffset)
            }
        }
        return arrayIndexOf(buffer, [ val ], byteOffset, encoding, dir)
    }

    throw new TypeError('val must be string, number or Buffer')
}

function arrayIndexOf (arr, val, byteOffset, encoding, dir) {
    var indexSize = 1
    var arrLength = arr.length
    var valLength = val.length

    if (encoding !== undefined) {
        encoding = String(encoding).toLowerCase()
        if (encoding === 'ucs2' || encoding === 'ucs-2' ||
            encoding === 'utf16le' || encoding === 'utf-16le') {
            if (arr.length < 2 || val.length < 2) {
                return -1
            }
            indexSize = 2
            arrLength /= 2
            valLength /= 2
            byteOffset /= 2
        }
    }

    function read (buf, i) {
        if (indexSize === 1) {
            return buf[i]
        } else {
            return buf.readUInt16BE(i * indexSize)
        }
    }

    var i
    if (dir) {
        var foundIndex = -1
        for (i = byteOffset; i < arrLength; i++) {
            if (read(arr, i) === read(val, foundIndex === -1 ? 0 : i - foundIndex)) {
                if (foundIndex === -1) foundIndex = i
                if (i - foundIndex + 1 === valLength) return foundIndex * indexSize
            } else {
                if (foundIndex !== -1) i -= i - foundIndex
                foundIndex = -1
            }
        }
    } else {
        if (byteOffset + valLength > arrLength) byteOffset = arrLength - valLength
        for (i = byteOffset; i >= 0; i--) {
            var found = true
            for (var j = 0; j < valLength; j++) {
                if (read(arr, i + j) !== read(val, j)) {
                    found = false
                    break
                }
            }
            if (found) return i
        }
    }

    return -1
}

Buffer.prototype.includes = function includes (val, byteOffset, encoding) {
    return this.indexOf(val, byteOffset, encoding) !== -1
}

Buffer.prototype.indexOf = function indexOf (val, byteOffset, encoding) {
    return bidirectionalIndexOf(this, val, byteOffset, encoding, true)
}

Buffer.prototype.lastIndexOf = function lastIndexOf (val, byteOffset, encoding) {
    return bidirectionalIndexOf(this, val, byteOffset, encoding, false)
}

function hexWrite (buf, string, offset, length) {
    offset = Number(offset) || 0
    var remaining = buf.length - offset
    if (!length) {
        length = remaining
    } else {
        length = Number(length)
        if (length > remaining) {
            length = remaining
        }
    }

    // must be an even number of digits
    var strLen = string.length
    if (strLen % 2 !== 0) throw new TypeError('Invalid hex string')

    if (length > strLen / 2) {
        length = strLen / 2
    }
    for (var i = 0; i < length; ++i) {
        var parsed = parseInt(string.substr(i * 2, 2), 16)
        if (isNaN(parsed)) return i
        buf[offset + i] = parsed
    }
    return i
}

function utf8Write (buf, string, offset, length) {
    return blitBuffer(utf8ToBytes(string, buf.length - offset), buf, offset, length)
}

function asciiWrite (buf, string, offset, length) {
    return blitBuffer(asciiToBytes(string), buf, offset, length)
}

function latin1Write (buf, string, offset, length) {
    return asciiWrite(buf, string, offset, length)
}

function base64Write (buf, string, offset, length) {
    return blitBuffer(base64ToBytes(string), buf, offset, length)
}

function ucs2Write (buf, string, offset, length) {
    return blitBuffer(utf16leToBytes(string, buf.length - offset), buf, offset, length)
}

Buffer.prototype.write = function write (string, offset, length, encoding) {
    // Buffer#write(string)
    if (offset === undefined) {
        encoding = 'utf8'
        length = this.length
        offset = 0
        // Buffer#write(string, encoding)
    } else if (length === undefined && typeof offset === 'string') {
        encoding = offset
        length = this.length
        offset = 0
        // Buffer#write(string, offset[, length][, encoding])
    } else if (isFinite(offset)) {
        offset = offset | 0
        if (isFinite(length)) {
            length = length | 0
            if (encoding === undefined) encoding = 'utf8'
        } else {
            encoding = length
            length = undefined
        }
        // legacy write(string, encoding, offset, length) - remove in v0.13
    } else {
        throw new Error(
            'Buffer.write(string, encoding, offset[, length]) is no longer supported'
        )
    }

    var remaining = this.length - offset
    if (length === undefined || length > remaining) length = remaining

    if ((string.length > 0 && (length < 0 || offset < 0)) || offset > this.length) {
        throw new RangeError('Attempt to write outside buffer bounds')
    }

    if (!encoding) encoding = 'utf8'

    var loweredCase = false
    for (;;) {
        switch (encoding) {
            case 'hex':
                return hexWrite(this, string, offset, length)

            case 'utf8':
            case 'utf-8':
                return utf8Write(this, string, offset, length)

            case 'ascii':
                return asciiWrite(this, string, offset, length)

            case 'latin1':
            case 'binary':
                return latin1Write(this, string, offset, length)

            case 'base64':
                // Warning: maxLength not taken into account in base64Write
                return base64Write(this, string, offset, length)

            case 'ucs2':
            case 'ucs-2':
            case 'utf16le':
            case 'utf-16le':
                return ucs2Write(this, string, offset, length)

            default:
                if (loweredCase) throw new TypeError('Unknown encoding: ' + encoding)
                encoding = ('' + encoding).toLowerCase()
                loweredCase = true
        }
    }
}

Buffer.prototype.toJSON = function toJSON () {
    return {
        type: 'Buffer',
        data: Array.prototype.slice.call(this._arr || this, 0)
    }
}


function utf8Slice (buf, start, end) {
    end = Math.min(buf.length, end)
    var res = []

    var i = start
    while (i < end) {
        var firstByte = buf[i]
        var codePoint = null
        var bytesPerSequence = (firstByte > 0xEF) ? 4
            : (firstByte > 0xDF) ? 3
                : (firstByte > 0xBF) ? 2
                    : 1

        if (i + bytesPerSequence <= end) {
            var secondByte, thirdByte, fourthByte, tempCodePoint

            switch (bytesPerSequence) {
                case 1:
                    if (firstByte < 0x80) {
                        codePoint = firstByte
                    }
                    break
                case 2:
                    secondByte = buf[i + 1]
                    if ((secondByte & 0xC0) === 0x80) {
                        tempCodePoint = (firstByte & 0x1F) << 0x6 | (secondByte & 0x3F)
                        if (tempCodePoint > 0x7F) {
                            codePoint = tempCodePoint
                        }
                    }
                    break
                case 3:
                    secondByte = buf[i + 1]
                    thirdByte = buf[i + 2]
                    if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80) {
                        tempCodePoint = (firstByte & 0xF) << 0xC | (secondByte & 0x3F) << 0x6 | (thirdByte & 0x3F)
                        if (tempCodePoint > 0x7FF && (tempCodePoint < 0xD800 || tempCodePoint > 0xDFFF)) {
                            codePoint = tempCodePoint
                        }
                    }
                    break
                case 4:
                    secondByte = buf[i + 1]
                    thirdByte = buf[i + 2]
                    fourthByte = buf[i + 3]
                    if ((secondByte & 0xC0) === 0x80 && (thirdByte & 0xC0) === 0x80 && (fourthByte & 0xC0) === 0x80) {
                        tempCodePoint = (firstByte & 0xF) << 0x12 | (secondByte & 0x3F) << 0xC | (thirdByte & 0x3F) << 0x6 | (fourthByte & 0x3F)
                        if (tempCodePoint > 0xFFFF && tempCodePoint < 0x110000) {
                            codePoint = tempCodePoint
                        }
                    }
            }
        }

        if (codePoint === null) {
            // we did not generate a valid codePoint so insert a
            // replacement char (U+FFFD) and advance only 1 byte
            codePoint = 0xFFFD
            bytesPerSequence = 1
        } else if (codePoint > 0xFFFF) {
            // encode to utf16 (surrogate pair dance)
            codePoint -= 0x10000
            res.push(codePoint >>> 10 & 0x3FF | 0xD800)
            codePoint = 0xDC00 | codePoint & 0x3FF
        }

        res.push(codePoint)
        i += bytesPerSequence
    }

    return decodeCodePointsArray(res)
}

// Based on http://stackoverflow.com/a/22747272/680742, the browser with
// the lowest limit is Chrome, with 0x10000 args.
// We go 1 magnitude less, for safety
var MAX_ARGUMENTS_LENGTH = 0x1000

function decodeCodePointsArray (codePoints) {
    var len = codePoints.length
    if (len <= MAX_ARGUMENTS_LENGTH) {
        return String.fromCharCode.apply(String, codePoints) // avoid extra slice()
    }

    // Decode in chunks to avoid "call stack size exceeded".
    var res = ''
    var i = 0
    while (i < len) {
        res += String.fromCharCode.apply(
            String,
            codePoints.slice(i, i += MAX_ARGUMENTS_LENGTH)
        )
    }
    return res
}

function asciiSlice (buf, start, end) {
    var ret = ''
    end = Math.min(buf.length, end)

    for (var i = start; i < end; ++i) {
        ret += String.fromCharCode(buf[i] & 0x7F)
    }
    return ret
}

function latin1Slice (buf, start, end) {
    var ret = ''
    end = Math.min(buf.length, end)

    for (var i = start; i < end; ++i) {
        ret += String.fromCharCode(buf[i])
    }
    return ret
}

function hexSlice (buf, start, end) {
    var len = buf.length

    if (!start || start < 0) start = 0
    if (!end || end < 0 || end > len) end = len

    var out = ''
    for (var i = start; i < end; ++i) {
        out += toHex(buf[i])
    }
    return out
}

function utf16leSlice (buf, start, end) {
    var bytes = buf.slice(start, end)
    var res = ''
    for (var i = 0; i < bytes.length; i += 2) {
        res += String.fromCharCode(bytes[i] + bytes[i + 1] * 256)
    }
    return res
}

Buffer.prototype.slice = function slice (start, end) {
    var len = this.length
    start = ~~start
    end = end === undefined ? len : ~~end

    if (start < 0) {
        start += len
        if (start < 0) start = 0
    } else if (start > len) {
        start = len
    }

    if (end < 0) {
        end += len
        if (end < 0) end = 0
    } else if (end > len) {
        end = len
    }

    if (end < start) end = start

    var newBuf
    if (Buffer.TYPED_ARRAY_SUPPORT) {
        newBuf = this.subarray(start, end)
        newBuf.__proto__ = Buffer.prototype
    } else {
        var sliceLen = end - start
        newBuf = new Buffer(sliceLen, undefined)
        for (var i = 0; i < sliceLen; ++i) {
            newBuf[i] = this[i + start]
        }
    }

    return newBuf
}

/*
 * Need to make sure that buffer isn't trying to write out of bounds.
 */
function checkOffset (offset, ext, length) {
    if ((offset % 1) !== 0 || offset < 0) throw new RangeError('offset is not uint')
    if (offset + ext > length) throw new RangeError('Trying to access beyond buffer length')
}

Buffer.prototype.readUIntLE = function readUIntLE (offset, byteLength, noAssert) {
    offset = offset | 0
    byteLength = byteLength | 0
    if (!noAssert) checkOffset(offset, byteLength, this.length)

    var val = this[offset]
    var mul = 1
    var i = 0
    while (++i < byteLength && (mul *= 0x100)) {
        val += this[offset + i] * mul
    }

    return val
}

Buffer.prototype.readUIntBE = function readUIntBE (offset, byteLength, noAssert) {
    offset = offset | 0
    byteLength = byteLength | 0
    if (!noAssert) {
        checkOffset(offset, byteLength, this.length)
    }

    var val = this[offset + --byteLength]
    var mul = 1
    while (byteLength > 0 && (mul *= 0x100)) {
        val += this[offset + --byteLength] * mul
    }

    return val
}

Buffer.prototype.readUInt8 = function readUInt8 (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 1, this.length)
    return this[offset]
}

Buffer.prototype.readUInt16LE = function readUInt16LE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 2, this.length)
    return this[offset] | (this[offset + 1] << 8)
}

Buffer.prototype.readUInt16BE = function readUInt16BE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 2, this.length)
    return (this[offset] << 8) | this[offset + 1]
}

Buffer.prototype.readUInt32LE = function readUInt32LE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length)

    return ((this[offset]) |
        (this[offset + 1] << 8) |
        (this[offset + 2] << 16)) +
        (this[offset + 3] * 0x1000000)
}

Buffer.prototype.readUInt32BE = function readUInt32BE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length)

    return (this[offset] * 0x1000000) +
        ((this[offset + 1] << 16) |
        (this[offset + 2] << 8) |
        this[offset + 3])
}

Buffer.prototype.readIntLE = function readIntLE (offset, byteLength, noAssert) {
    offset = offset | 0
    byteLength = byteLength | 0
    if (!noAssert) checkOffset(offset, byteLength, this.length)

    var val = this[offset]
    var mul = 1
    var i = 0
    while (++i < byteLength && (mul *= 0x100)) {
        val += this[offset + i] * mul
    }
    mul *= 0x80

    if (val >= mul) val -= Math.pow(2, 8 * byteLength)

    return val
}

Buffer.prototype.readIntBE = function readIntBE (offset, byteLength, noAssert) {
    offset = offset | 0
    byteLength = byteLength | 0
    if (!noAssert) checkOffset(offset, byteLength, this.length)

    var i = byteLength
    var mul = 1
    var val = this[offset + --i]
    while (i > 0 && (mul *= 0x100)) {
        val += this[offset + --i] * mul
    }
    mul *= 0x80

    if (val >= mul) val -= Math.pow(2, 8 * byteLength)

    return val
}

Buffer.prototype.readInt8 = function readInt8 (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 1, this.length)
    if (!(this[offset] & 0x80)) return (this[offset])
    return ((0xff - this[offset] + 1) * -1)
}

Buffer.prototype.readInt16LE = function readInt16LE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 2, this.length)
    var val = this[offset] | (this[offset + 1] << 8)
    return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt16BE = function readInt16BE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 2, this.length)
    var val = this[offset + 1] | (this[offset] << 8)
    return (val & 0x8000) ? val | 0xFFFF0000 : val
}

Buffer.prototype.readInt32LE = function readInt32LE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length)

    return (this[offset]) |
        (this[offset + 1] << 8) |
        (this[offset + 2] << 16) |
        (this[offset + 3] << 24)
}

Buffer.prototype.readInt32BE = function readInt32BE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length)

    return (this[offset] << 24) |
        (this[offset + 1] << 16) |
        (this[offset + 2] << 8) |
        (this[offset + 3])
}

Buffer.prototype.readFloatLE = function readFloatLE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length)
    return ieee754.read(this, offset, true, 23, 4)
}

Buffer.prototype.readFloatBE = function readFloatBE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 4, this.length)
    return ieee754.read(this, offset, false, 23, 4)
}

Buffer.prototype.readDoubleLE = function readDoubleLE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 8, this.length)
    return ieee754.read(this, offset, true, 52, 8)
}

Buffer.prototype.readDoubleBE = function readDoubleBE (offset, noAssert) {
    if (!noAssert) checkOffset(offset, 8, this.length)
    return ieee754.read(this, offset, false, 52, 8)
}

function checkInt (buf, value, offset, ext, max, min) {
    if (!internalIsBuffer(buf)) throw new TypeError('"buffer" argument must be a Buffer instance')
    if (value > max || value < min) throw new RangeError('"value" argument is out of bounds')
    if (offset + ext > buf.length) throw new RangeError('Index out of range')
}

Buffer.prototype.writeUIntLE = function writeUIntLE (value, offset, byteLength, noAssert) {
    value = +value
    offset = offset | 0
    byteLength = byteLength | 0
    if (!noAssert) {
        var maxBytes = Math.pow(2, 8 * byteLength) - 1
        checkInt(this, value, offset, byteLength, maxBytes, 0)
    }

    var mul = 1
    var i = 0
    this[offset] = value & 0xFF
    while (++i < byteLength && (mul *= 0x100)) {
        this[offset + i] = (value / mul) & 0xFF
    }

    return offset + byteLength
}

Buffer.prototype.writeUIntBE = function writeUIntBE (value, offset, byteLength, noAssert) {
    value = +value
    offset = offset | 0
    byteLength = byteLength | 0
    if (!noAssert) {
        var maxBytes = Math.pow(2, 8 * byteLength) - 1
        checkInt(this, value, offset, byteLength, maxBytes, 0)
    }

    var i = byteLength - 1
    var mul = 1
    this[offset + i] = value & 0xFF
    while (--i >= 0 && (mul *= 0x100)) {
        this[offset + i] = (value / mul) & 0xFF
    }

    return offset + byteLength
}

Buffer.prototype.writeUInt8 = function writeUInt8 (value, offset, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) checkInt(this, value, offset, 1, 0xff, 0)
    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
    this[offset] = (value & 0xff)
    return offset + 1
}

function objectWriteUInt16 (buf, value, offset, littleEndian) {
    if (value < 0) value = 0xffff + value + 1
    for (var i = 0, j = Math.min(buf.length - offset, 2); i < j; ++i) {
        buf[offset + i] = (value & (0xff << (8 * (littleEndian ? i : 1 - i)))) >>>
            (littleEndian ? i : 1 - i) * 8
    }
}

Buffer.prototype.writeUInt16LE = function writeUInt16LE (value, offset, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
    if (Buffer.TYPED_ARRAY_SUPPORT) {
        this[offset] = (value & 0xff)
        this[offset + 1] = (value >>> 8)
    } else {
        objectWriteUInt16(this, value, offset, true)
    }
    return offset + 2
}

Buffer.prototype.writeUInt16BE = function writeUInt16BE (value, offset, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) checkInt(this, value, offset, 2, 0xffff, 0)
    if (Buffer.TYPED_ARRAY_SUPPORT) {
        this[offset] = (value >>> 8)
        this[offset + 1] = (value & 0xff)
    } else {
        objectWriteUInt16(this, value, offset, false)
    }
    return offset + 2
}

function objectWriteUInt32 (buf, value, offset, littleEndian) {
    if (value < 0) value = 0xffffffff + value + 1
    for (var i = 0, j = Math.min(buf.length - offset, 4); i < j; ++i) {
        buf[offset + i] = (value >>> (littleEndian ? i : 3 - i) * 8) & 0xff
    }
}

Buffer.prototype.writeUInt32LE = function writeUInt32LE (value, offset, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
    if (Buffer.TYPED_ARRAY_SUPPORT) {
        this[offset + 3] = (value >>> 24)
        this[offset + 2] = (value >>> 16)
        this[offset + 1] = (value >>> 8)
        this[offset] = (value & 0xff)
    } else {
        objectWriteUInt32(this, value, offset, true)
    }
    return offset + 4
}

Buffer.prototype.writeUInt32BE = function writeUInt32BE (value, offset, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) checkInt(this, value, offset, 4, 0xffffffff, 0)
    if (Buffer.TYPED_ARRAY_SUPPORT) {
        this[offset] = (value >>> 24)
        this[offset + 1] = (value >>> 16)
        this[offset + 2] = (value >>> 8)
        this[offset + 3] = (value & 0xff)
    } else {
        objectWriteUInt32(this, value, offset, false)
    }
    return offset + 4
}

Buffer.prototype.writeIntLE = function writeIntLE (value, offset, byteLength, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) {
        var limit = Math.pow(2, 8 * byteLength - 1)

        checkInt(this, value, offset, byteLength, limit - 1, -limit)
    }

    var i = 0
    var mul = 1
    var sub = 0
    this[offset] = value & 0xFF
    while (++i < byteLength && (mul *= 0x100)) {
        if (value < 0 && sub === 0 && this[offset + i - 1] !== 0) {
            sub = 1
        }
        this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
    }

    return offset + byteLength
}

Buffer.prototype.writeIntBE = function writeIntBE (value, offset, byteLength, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) {
        var limit = Math.pow(2, 8 * byteLength - 1)

        checkInt(this, value, offset, byteLength, limit - 1, -limit)
    }

    var i = byteLength - 1
    var mul = 1
    var sub = 0
    this[offset + i] = value & 0xFF
    while (--i >= 0 && (mul *= 0x100)) {
        if (value < 0 && sub === 0 && this[offset + i + 1] !== 0) {
            sub = 1
        }
        this[offset + i] = ((value / mul) >> 0) - sub & 0xFF
    }

    return offset + byteLength
}

Buffer.prototype.writeInt8 = function writeInt8 (value, offset, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) checkInt(this, value, offset, 1, 0x7f, -0x80)
    if (!Buffer.TYPED_ARRAY_SUPPORT) value = Math.floor(value)
    if (value < 0) value = 0xff + value + 1
    this[offset] = (value & 0xff)
    return offset + 1
}

Buffer.prototype.writeInt16LE = function writeInt16LE (value, offset, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
    if (Buffer.TYPED_ARRAY_SUPPORT) {
        this[offset] = (value & 0xff)
        this[offset + 1] = (value >>> 8)
    } else {
        objectWriteUInt16(this, value, offset, true)
    }
    return offset + 2
}

Buffer.prototype.writeInt16BE = function writeInt16BE (value, offset, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) checkInt(this, value, offset, 2, 0x7fff, -0x8000)
    if (Buffer.TYPED_ARRAY_SUPPORT) {
        this[offset] = (value >>> 8)
        this[offset + 1] = (value & 0xff)
    } else {
        objectWriteUInt16(this, value, offset, false)
    }
    return offset + 2
}

Buffer.prototype.writeInt32LE = function writeInt32LE (value, offset, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
    if (Buffer.TYPED_ARRAY_SUPPORT) {
        this[offset] = (value & 0xff)
        this[offset + 1] = (value >>> 8)
        this[offset + 2] = (value >>> 16)
        this[offset + 3] = (value >>> 24)
    } else {
        objectWriteUInt32(this, value, offset, true)
    }
    return offset + 4
}

Buffer.prototype.writeInt32BE = function writeInt32BE (value, offset, noAssert) {
    value = +value
    offset = offset | 0
    if (!noAssert) checkInt(this, value, offset, 4, 0x7fffffff, -0x80000000)
    if (value < 0) value = 0xffffffff + value + 1
    if (Buffer.TYPED_ARRAY_SUPPORT) {
        this[offset] = (value >>> 24)
        this[offset + 1] = (value >>> 16)
        this[offset + 2] = (value >>> 8)
        this[offset + 3] = (value & 0xff)
    } else {
        objectWriteUInt32(this, value, offset, false)
    }
    return offset + 4
}

function checkIEEE754 (buf, value, offset, ext, max, min) {
    if (offset + ext > buf.length) throw new RangeError('Index out of range')
    if (offset < 0) throw new RangeError('Index out of range')
}

function writeFloat (buf, value, offset, littleEndian, noAssert) {
    if (!noAssert) {
        checkIEEE754(buf, value, offset, 4, 3.4028234663852886e+38, -3.4028234663852886e+38)
    }
    ieee754.write(buf, value, offset, littleEndian, 23, 4)
    return offset + 4
}

Buffer.prototype.writeFloatLE = function writeFloatLE (value, offset, noAssert) {
    return writeFloat(this, value, offset, true, noAssert)
}

Buffer.prototype.writeFloatBE = function writeFloatBE (value, offset, noAssert) {
    return writeFloat(this, value, offset, false, noAssert)
}

function writeDouble (buf, value, offset, littleEndian, noAssert) {
    if (!noAssert) {
        checkIEEE754(buf, value, offset, 8, 1.7976931348623157E+308, -1.7976931348623157E+308)
    }
    ieee754.write(buf, value, offset, littleEndian, 52, 8)
    return offset + 8
}

Buffer.prototype.writeDoubleLE = function writeDoubleLE (value, offset, noAssert) {
    return writeDouble(this, value, offset, true, noAssert)
}

Buffer.prototype.writeDoubleBE = function writeDoubleBE (value, offset, noAssert) {
    return writeDouble(this, value, offset, false, noAssert)
}

// copy(targetBuffer, targetStart=0, sourceStart=0, sourceEnd=buffer.length)
Buffer.prototype.copy = function copy (target, targetStart, start, end) {
    if (!start) start = 0
    if (!end && end !== 0) end = this.length
    if (targetStart >= target.length) targetStart = target.length
    if (!targetStart) targetStart = 0
    if (end > 0 && end < start) end = start

    // Copy 0 bytes; we're done
    if (end === start) return 0
    if (target.length === 0 || this.length === 0) return 0

    // Fatal error conditions
    if (targetStart < 0) {
        throw new RangeError('targetStart out of bounds')
    }
    if (start < 0 || start >= this.length) throw new RangeError('sourceStart out of bounds')
    if (end < 0) throw new RangeError('sourceEnd out of bounds')

    // Are we oob?
    if (end > this.length) end = this.length
    if (target.length - targetStart < end - start) {
        end = target.length - targetStart + start
    }

    var len = end - start
    var i

    if (this === target && start < targetStart && targetStart < end) {
        // descending copy from end
        for (i = len - 1; i >= 0; --i) {
            target[i + targetStart] = this[i + start]
        }
    } else if (len < 1000 || !Buffer.TYPED_ARRAY_SUPPORT) {
        // ascending copy from start
        for (i = 0; i < len; ++i) {
            target[i + targetStart] = this[i + start]
        }
    } else {
        Uint8Array.prototype.set.call(
            target,
            this.subarray(start, start + len),
            targetStart
        )
    }

    return len
}

// Usage:
//    buffer.fill(number[, offset[, end]])
//    buffer.fill(buffer[, offset[, end]])
//    buffer.fill(string[, offset[, end]][, encoding])
Buffer.prototype.fill = function fill (val, start, end, encoding) {
    // Handle string cases:
    if (typeof val === 'string') {
        if (typeof start === 'string') {
            encoding = start
            start = 0
            end = this.length
        } else if (typeof end === 'string') {
            encoding = end
            end = this.length
        }
        if (val.length === 1) {
            var code = val.charCodeAt(0)
            if (code < 256) {
                val = code
            }
        }
        if (encoding !== undefined && typeof encoding !== 'string') {
            throw new TypeError('encoding must be a string')
        }
        if (typeof encoding === 'string' && !Buffer.isEncoding(encoding)) {
            throw new TypeError('Unknown encoding: ' + encoding)
        }
    } else if (typeof val === 'number') {
        val = val & 255
    }

    // Invalid ranges are not set to a default, so can range check early.
    if (start < 0 || this.length < start || this.length < end) {
        throw new RangeError('Out of range index')
    }

    if (end <= start) {
        return this
    }

    start = start >>> 0
    end = end === undefined ? this.length : end >>> 0

    if (!val) val = 0

    var i
    if (typeof val === 'number') {
        for (i = start; i < end; ++i) {
            this[i] = val
        }
    } else {
        var bytes = internalIsBuffer(val)
            ? val
            : utf8ToBytes(new Buffer(val, encoding).toString())
        var len = bytes.length
        for (i = 0; i < end - start; ++i) {
            this[i + start] = bytes[i % len]
        }
    }

    return this
}

// HELPER FUNCTIONS
// ================


function stringtrim (str) {
    if (str.trim) return str.trim()
    return str.replace(/^\s+|\s+$/g, '')
}

function toHex (n) {
    if (n < 16) return '0' + n.toString(16)
    return n.toString(16)
}

function utf8ToBytes (string, units) {
    units = units || Infinity
    var codePoint
    var length = string.length
    var leadSurrogate = null
    var bytes = []

    for (var i = 0; i < length; ++i) {
        codePoint = string.charCodeAt(i)

        // is surrogate component
        if (codePoint > 0xD7FF && codePoint < 0xE000) {
            // last char was a lead
            if (!leadSurrogate) {
                // no lead yet
                if (codePoint > 0xDBFF) {
                    // unexpected trail
                    if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
                    continue
                } else if (i + 1 === length) {
                    // unpaired lead
                    if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
                    continue
                }

                // valid lead
                leadSurrogate = codePoint

                continue
            }

            // 2 leads in a row
            if (codePoint < 0xDC00) {
                if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
                leadSurrogate = codePoint
                continue
            }

            // valid surrogate pair
            codePoint = (leadSurrogate - 0xD800 << 10 | codePoint - 0xDC00) + 0x10000
        } else if (leadSurrogate) {
            // valid bmp char, but last char was a lead
            if ((units -= 3) > -1) bytes.push(0xEF, 0xBF, 0xBD)
        }

        leadSurrogate = null

        // encode utf8
        if (codePoint < 0x80) {
            if ((units -= 1) < 0) break
            bytes.push(codePoint)
        } else if (codePoint < 0x800) {
            if ((units -= 2) < 0) break
            bytes.push(
                codePoint >> 0x6 | 0xC0,
                codePoint & 0x3F | 0x80
            )
        } else if (codePoint < 0x10000) {
            if ((units -= 3) < 0) break
            bytes.push(
                codePoint >> 0xC | 0xE0,
                codePoint >> 0x6 & 0x3F | 0x80,
                codePoint & 0x3F | 0x80
            )
        } else if (codePoint < 0x110000) {
            if ((units -= 4) < 0) break
            bytes.push(
                codePoint >> 0x12 | 0xF0,
                codePoint >> 0xC & 0x3F | 0x80,
                codePoint >> 0x6 & 0x3F | 0x80,
                codePoint & 0x3F | 0x80
            )
        } else {
            throw new Error('Invalid code point')
        }
    }

    return bytes
}

function asciiToBytes (str) {
    var byteArray = []
    for (var i = 0; i < str.length; ++i) {
        // Node's code seems to be doing this and not & 0x7F..
        byteArray.push(str.charCodeAt(i) & 0xFF)
    }
    return byteArray
}

function utf16leToBytes (str, units) {
    var c, hi, lo
    var byteArray = []
    for (var i = 0; i < str.length; ++i) {
        if ((units -= 2) < 0) break

        c = str.charCodeAt(i)
        hi = c >> 8
        lo = c % 256
        byteArray.push(lo)
        byteArray.push(hi)
    }

    return byteArray
}


function blitBuffer (src, dst, offset, length) {
    for (var i = 0; i < length; ++i) {
        if ((i + offset >= dst.length) || (i >= src.length)) break
        dst[i + offset] = src[i]
    }
    return i
}

function isnan (val) {
    return val !== val // eslint-disable-line no-self-compare
}


// the following is from is-buffer, also by Feross Aboukhadijeh and with same lisence
// The _isBuffer check is for Safari 5-7 support, because it's missing
// Object.prototype.constructor. Remove this eventually
function isBuffer(obj) {
  return obj != null && (!!obj._isBuffer || isFastBuffer(obj) || isSlowBuffer(obj))
}

function isFastBuffer (obj) {
    return !!obj.constructor && typeof obj.constructor.isBuffer === 'function' && obj.constructor.isBuffer(obj)
}

// For Node v0.10 support. Remove this eventually.
function isSlowBuffer (obj) {
    return typeof obj.readFloatLE === 'function' && typeof obj.slice === 'function' && isFastBuffer(obj.slice(0, 0))
}

}).call(this)}).call(this,require("buffer").Buffer)

},{"./ieee754":39,"./isArray":40,"buffer":2}],33:[function(require,module,exports){
(function (Buffer){(function (){
/**
 * 编码工具类
 */
class CodeTool {

    constructor() {}

    /**
     * //生成随机头
     * @returns {[]}
     */
    static getHeaderArray(headerLength) {
        let harr = [];
        for (let i = 0; i < headerLength; i++) {
            harr[i] = this._getRandomNum();
        }
        return harr;
    }

    /**
     * 生成随机数头
     * @returns {number}
     * @private
     */
    static _getRandomNum() {
        let Range = 80;
        let Rand = Math.random();
        return (50 + Math.round(Rand * Range));
    }

    /**
     * 字符串转byte数组
     * @param str 字符串
     * @param encoding 字符串编码;默认utf8
     * @returns {[]} 字节数组
     */
    static stringToByte(str, encoding) {
        if (encoding === undefined) {
            encoding = "utf8";
        }
        let bytes = [];
        let buffer = Buffer.from(str, encoding);
        for (let i = 0; i < buffer.length; i++) {
            bytes.push(buffer[i]);
        }

        return bytes;
    }

    /**
     * byte数组转字符串
     * @param bytes 字节数组
     * @param encoding 字符串编码;默认utf8
     * @returns {string}
     */
    static byteToString(bytes, encoding) {
        if (encoding === undefined) {
            encoding = "utf8";
        }
        return Buffer.from(bytes).toString(encoding);
    }

    /**
     * 数字转byte数组
     * @param num
     * @returns {number[]}
     */
    static intToBytes(num) {
        return [(num >> 24) & 0x00ff, (num >> 16) & 0x00ff, (num >> 8) & 0x00ff, num & 0x00ff];
    }

    /**
     * byte数组转数字
     * @param bytes
     * @returns {number}
     */
    static bytesToInt(bytes) {
        return bytes[0] << 24 | bytes[1] << 16 | bytes[2] << 8 | bytes[3];
    }

    /**
     * varint转数字
     * @param buffer 单个数字的varint编码
     * @returns {number}
     */
    static varintToInt(buffer) {
        let intBuffer = [];
        let highBuffer = [];
        let j = 3;
        let offset = 0;
        for (let i = buffer.length - 1; i >= 0; i--) {
            if (i - 1 >= 0) {
                highBuffer[0] = (buffer[i - 1] << (7 - offset));
            } else {
                highBuffer[0] = 0;
            }
            if (j === -1) {
                break;
            }
            intBuffer[j] = ((buffer[i] & 0x7f) >> offset | highBuffer[0]);
            j--;
            offset++;
        }

        let t = intBuffer[0] << 24 & 0xff000000 | intBuffer[1] << 16 & 0x00ff0000 | intBuffer[2] << 8 & 0x0000ff00 | intBuffer[3] & 0x000000ff;
        t = (t >> 1) ^ -(t & 1);
        return t;
    }

    /**
     * 数字转varint编码
     * @param num
     * @returns {[]|number[]}
     */
    static intToVarint(num) {
        if (num === 0) {
            return [0];
        }

        num = this._zigZagEncoding(num);
        let buffer = [];
        let now;
        let high = 0;
        for (let i = 5; i > 0; i--) {
            now = num >> ((i - 1) * 7) & 0x7f;
            if (high !== 0) {
                now = now | 0x80;
            }
            if (now !== 0) {
                buffer.push(now);
            }
            high = now;
        }
        return buffer;
    }


    /**
     * varint编码转数字数组
     * @param buffer
     * @returns {[]}
     */
    static varintToIntArray(buffer) {
        let varintCode = [];
        let high;
        let bf_index = 0;
        let nums = [];
        for (let i = 0; i < buffer.length; i++) {
            high = 0x00000000 | (buffer[i] >> 7) & 0x01;
            if (high === 0) {
                if (bf_index > 0 && bf_index <= 5) {
                    nums.push(this.varintToInt(varintCode));
                    varintCode = [];
                    bf_index = 0;
                }
            }
            varintCode.push(buffer[i]);
            bf_index++;

        }
        nums.push(this.varintToInt(varintCode));
        return nums;
    }

    /**
     * 数字数组转varint编码buffer
     * @param numArray 数字数组
     * @returns {Buffer} varint编码buffer
     */
    static intArrayToVarintBuffer(numArray) {
        let bytea = [];
        let numBytes;
        for (let i = 0; i < numArray.length; i++) {
            numBytes = this.intToVarint(numArray[i]);
            bytea.push(...numBytes);
        }
        return Buffer.from(bytea);
    }

    /**
     * 负数转正数编码
     * @param num
     * @returns {number}
     * @private
     */
    static _zigZagEncoding(num) {
        return (num >> 31) ^ (num << 1);
    }

}
module.exports = CodeTool;
}).call(this)}).call(this,require("buffer").Buffer)

},{"buffer":2}],34:[function(require,module,exports){
/**
 * Created by matt on 2017/7/16.
 */
//几个像素可以算是命中
let _dis = 5;

class GisTools {
    static pointDistToLine(x, y, startx, starty, endx, endy) {
        let se = (startx - endx) * (startx - endx) + (starty - endy) * (starty - endy);
        let p = ((x - startx) * (endx - startx) + (y - starty) * (endy - starty));
        let r = p / se;
        let outx = startx + r * (endx - startx);
        let outy = starty + r * (endy - starty);
        let des = Math.sqrt((x - outx) * (x - outx) + (y - outy) * (y - outy));

        //console.log(des);
        return des;
    }
    static isPointOnSegment(px, py, p1x, p1y, p2x, p2y) {

        if ((px - _dis > p1x && px + _dis > p2x) || (px + _dis < p1x && px - _dis < p2x)) {
            return 0;
        }
        if ((py - _dis > p1y && py + _dis > p2y) || (py + _dis < p1y && py - _dis < p2y)) {
            return 0;
        }
        let d = GisTools.pointDistToLine(px, py, p1x, p1y, p2x, p2y);
        if (d < _dis) {
            return 1;
        } else {
            return 0;
        }
    }
    static pointInLine(px, py, polyline) {
        let flag = 0;
        let line = [];
        if (Array.isArray(polyline[0])) {
            line = polyline;
        } else {
            line.push(polyline);
        }
        for (var polyIndex = 0; polyIndex < line.length; polyIndex++) {
            let subpoly = line[polyIndex];
            let length = subpoly.length / 2;
            // for (var i = 0, l = length, j = l - 1; i < l; j = i, i++) {

            for (var i = 0; i < length - 1; i++) {
                let j;
                j = i + 1;
                let sx = subpoly[2 * i],
                    sy = subpoly[2 * i + 1],
                    tx = subpoly[2 * j],
                    ty = subpoly[2 * j + 1]
                if (GisTools.isPointOnSegment(px, py, sx, sy, tx, ty) == 1) {
                    return 1;
                }
            }
        }
        return 0;
    }
    static pointInPolygon(px, py, polygen) {
        let flag = 0;
        let poly = [];
        if (Array.isArray(polygen[0])) {
            poly = polygen;
        } else {
            poly.push(polygen);
        }

        for (var polyIndex = 0; polyIndex < poly.length; polyIndex++) {
            let subpoly = poly[polyIndex];
            let length = subpoly.length / 2;


            for (var i = 0, l = length, j = l - 1; i < l; j = i, i++) {
                let sx = subpoly[2 * i],
                    sy = subpoly[2 * i + 1],
                    tx = subpoly[2 * j],
                    ty = subpoly[2 * j + 1]

                // 点与多边形顶点重合
                if ((sx === px && sy === py) || (tx === px && ty === py)) {
                    return 1
                }

                // 判断线段两端点是否在射线两侧
                if ((sy < py && ty >= py) || (sy >= py && ty < py)) {
                    // 线段上与射线 Y 坐标相同的点的 X 坐标
                    let x = sx + (py - sy) * (tx - sx) / (ty - sy)

                    // 点在多边形的边上
                    if (x === px) {
                        return 1
                    }
                    if (x > px) {
                        flag = !flag
                    }
                }
            }
        }
        return flag ? 1 : 0;

    }

    static lineIntersects(line1StartX, line1StartY, line1EndX, line1EndY, line2StartX, line2StartY, line2EndX, line2EndY) {
        var denominator,
            a,
            b,
            numerator1,
            numerator2,
            onLine1 = false,
            onLine2 = false,
            res = [null, null];

        denominator = ((line2EndY - line2StartY) * (line1EndX - line1StartX)) - ((line2EndX - line2StartX) * (line1EndY - line1StartY));
        if (denominator === 0) {
            if (res[0] !== null && res[1] !== null) {
                return res;
            } else {
                return false;
            }
        }
        a = line1StartY - line2StartY;
        b = line1StartX - line2StartX;
        numerator1 = ((line2EndX - line2StartX) * a) - ((line2EndY - line2StartY) * b);
        numerator2 = ((line1EndX - line1StartX) * a) - ((line1EndY - line1StartY) * b);
        a = numerator1 / denominator;
        b = numerator2 / denominator;

        // if we cast these lines infinitely in both directions, they intersect here:
        res[0] = line1StartX + (a * (line1EndX - line1StartX));
        res[1] = line1StartY + (a * (line1EndY - line1StartY));


        // if line2 is a segment and line1 is infinite, they intersect if:
        if (b > 0 && b < 1) {
            return res;
        } else {
            return false;
        }
    }

    /**
     * 判断两个poly的关系
     * @param polyOut
     * @param polyIn
     * @returns {1,相交，2包涵，3，没关系}
     */
    static polyWith(polyOut, polyIn) {
        let lengthOut = polyOut.length / 2;
        let lengthIn = polyIn.length / 2;
        let flag = false;
        let bY;
        let aX;
        let aY;
        let bX;
        let dY;
        let cX;
        let cY;
        let dX;
        for (let i = 0; i < lengthOut; i++) {

            if (i != lengthOut - 1) {
                aX = polyOut[(i * 2)];
                aY = polyOut[(i * 2 + 1)];
                bX = polyOut[(i * 2 + 2)];
                bY = polyOut[(i * 2 + 3)];
            } else {
                aX = polyOut[(i * 2)];
                aY = polyOut[(i * 2 + 1)];
                bX = polyOut[0];
                bY = polyOut[1];
            }
            for (let j = 0; j < lengthIn; j++) {

                if (j != lengthIn - 1) {
                    cX = polyIn[(j * 2)];
                    cY = polyIn[(j * 2 + 1)];
                    dX = polyIn[(j * 2 + 2)];
                    dY = polyIn[(j * 2 + 3)];
                } else {
                    cX = polyIn[(j * 2)];
                    cY = polyIn[(j * 2 + 1)];
                    dX = polyIn[0];
                    dY = polyIn[1];
                }

                if (GisTools.lineIntersects(aX, aY, bX, bY, cX, cY, dX, dY) != false) {
                    return 1;
                }
            }
        }

        let firstX = polyIn[0];
        let firstY = polyIn[1];
        if (GisTools.pointInPolygon(firstX, firstY, polyOut)) {
            return 2;
        }
        return 3;
    }

    /**
     * 把bbox转成double Array
     * @param left
     * @param bottom
     * @param right
     * @param top
     * @returns {Array}
     */
    static boxToPolyArr(left, bottom, right, top) {
        let arr = [];
        arr.push(left);
        arr.push(bottom);

        arr.push(left);
        arr.push(top);

        arr.push(right);
        arr.push(top);

        arr.push(right);
        arr.push(bottom);

        arr.push(left);
        arr.push(bottom);

        return arr;
    }

    static getExtensionPoint(p1, p2, d) {
        let xab = p2[0] - p1[0];
        let yab = p2[1] - p1[1];
        let xd = p2[0];
        let yd = p2[1];
        if (xab == 0) {
            if (yab > 0) {
                yd = p2[1] + d;
            } else {
                yd = p2[1] - d;
            }
        } else {
            let xbd = Math.sqrt((d * d) / ((yab / xab) * (yab / xab) + 1));
            if (xab < 0) {
                xbd = -xbd
            }

            xd = p2[0] + xbd;
            yd = p2[1] + yab / xab * xbd;
        }
        return [xd, yd];
    }


    /**
     * 线平行偏移
     * @param coords
     * @param distance
     * @returns {Array}
     */
    static lineOffset(coords, distance) {
        let segments = [];
        let finalCoords = [];
        coords.forEach(function(currentCoords, index) {
            if (index !== coords.length - 1) {
                let segment = GisTools.processSegment(currentCoords, coords[index + 1], distance);
                segments.push(segment);
                if (index > 0) {
                    let seg2Coords = segments[index - 1];
                    let intersects = GisTools.lineIntersects(segment[0][0], segment[0][1], segment[1][0], segment[1][1],
                        seg2Coords[0][0], seg2Coords[0][1], seg2Coords[1][0], seg2Coords[1][1]);

                    // Handling for line segments that aren't straight
                    if (intersects !== false) {
                        seg2Coords[1] = intersects;
                        segment[0] = intersects;
                    }

                    finalCoords.push(seg2Coords[0]);
                    if (index === coords.length - 2) {
                        finalCoords.push(segment[0]);
                        finalCoords.push(segment[1]);
                    }
                }
                // Handling for lines that only have 1 segment
                if (coords.length === 2) {
                    finalCoords.push(segment[0]);
                    finalCoords.push(segment[1]);
                }
            }
        });
        return finalCoords;
    }

    /**
     * Process Segment
     * Inspiration taken from http://stackoverflow.com/questions/2825412/draw-a-parallel-line
     *
     * @private
     * @param {Array<number>} point1 Point coordinates
     * @param {Array<number>} point2 Point coordinates
     * @param {number} offset Offset
     * @returns {Array<Array<number>>} offset points
     */
    static processSegment(pointAngle1, pointAngle2, offset) {
        let point1 = pointAngle1[0];
        let point2 = pointAngle2[0];
        let L = Math.sqrt((point1[0] - point2[0]) * (point1[0] - point2[0]) + (point1[1] - point2[1]) * (point1[1] - point2[1]));

        let out1x = point1[0] + offset * (point2[1] - point1[1]) / L;
        let out2x = point2[0] + offset * (point2[1] - point1[1]) / L;
        let out1y = point1[1] + offset * (point1[0] - point2[0]) / L;
        let out2y = point2[1] + offset * (point1[0] - point2[0]) / L;
        return [
            [
                [out1x, out1y], pointAngle1[1]
            ],
            [
                [out2x, out2y], pointAngle2[1]
            ]
        ];
    }

    /**
     *  判断box1是否在box2内部
     * @param box1
     * @param box2
     */
    static isInBox(box1, box2) {
        if (box1[0] >= box2[0] && box1[1] >= box2[1] && box1[2] <= box2[2] && box1[3] <= box2[3]) {
            return true;
        }
        return false;
    }

    static Utf8ArrayToStr(array) {
        var out, i, len, c;
        var char2, char3;

        out = "";
        len = array.length;
        i = 0;
        while (i < len) {
            c = array[i++];
            switch (c >> 4) {
                case 0:
                case 1:
                case 2:
                case 3:
                case 4:
                case 5:
                case 6:
                case 7:
                    // 0xxxxxxx
                    out += String.fromCharCode(c);
                    break;
                case 12:
                case 13:
                    // 110x xxxx   10xx xxxx
                    char2 = array[i++];
                    out += String.fromCharCode(((c & 0x1F) << 6) | (char2 & 0x3F));
                    break;
                case 14:
                    // 1110 xxxx  10xx xxxx  10xx xxxx
                    char2 = array[i++];
                    char3 = array[i++];
                    out += String.fromCharCode(((c & 0x0F) << 12) |
                        ((char2 & 0x3F) << 6) |
                        ((char3 & 0x3F) << 0));
                    break;
            }
        }

        return out;
    }

}
module.exports = GisTools;
},{}],35:[function(require,module,exports){
(function (Buffer){(function (){
class LayerContentModel {

    constructor() {
        this.layerHeaderProBuffer = Buffer.alloc(0);
        this.coordinateBufferArray = [];
        this.featureArray = [];
    }

    /**
     * 获取头属性
     * @returns {Buffer}
     */
    getLayerHeaderProBuffer() {
        return this.layerHeaderProBuffer;
    }

    /**
     * 设置头属性
     * @param headerProMap {Buffer}
     */
    setLayerHeaderProBuffer(layerHeaderProBuffer) {
        this.layerHeaderProBuffer = layerHeaderProBuffer;
    }

    /**
     * 获得要素buffer数组
     * @returns {[Buffer]}
     */
    getFeatureArray() {
        return this.featureArray;
    }

    /**
     * 设置要素buffer数组
     * @param featureArray {[Buffer]}
     */
    setFeatureArray(featureArray) {
        this.featureArray = featureArray;
    }

    /**
     * 获得坐标buffer数组
     * @returns {[Buffer]}
     */
    getCoordinateBufferArray() {
        return this.coordinateBufferArray;
    }

    /**
     * 设置坐标buffer数组
     * @param coordinateBufferArray {[Buffer]}
     */
    setCoordinateBufferArray(coordinateBufferArray) {
        this.coordinateBufferArray = coordinateBufferArray;
    }

}

module.exports = LayerContentModel;
}).call(this)}).call(this,require("buffer").Buffer)

},{"buffer":2}],36:[function(require,module,exports){
const uncompress = require('./snappyJs');
const CodeTool = require('./CodeTool');
const LayerContentModel = require('./LayerContentModel');
const GisTool = require('./GisTools');

/**
 * 瓦片数据解析
 */
class VarintReader {

    /**
     * 构造函数
     * @param vectorVarintBuffer {Buffer} vector或layer格式buffer
     * @param headerLength {number} 数据头长度
     * @param proSizeObj {Object} 要素属性数量
     */
    constructor(vectorVarintBuffer, headerLength, proSizeObj) {
        //缩进长度
        this.headerLength = headerLength;
        //要素属性数量
        this.proSizeObj = proSizeObj;
        //数字类型的byte长度
        this.intLength = 4;
        //瓦片数据的标识
        this.vectorName = "vector";
        //空间类型的key
        this.gTypeKey = "gType";
        //字符串编码
        this.encoding = "utf8";
        //要素属性间隔
        this.featureSpace = "#@";
        //瓦片buffer
        this.vectorVarintBuffer = vectorVarintBuffer;
        //图层buffer
        this.layerMap = new Object();
        //瓦片头带有的属性
        this.vectorHeaderProMap = new Object();
        //图层头带的属性
        this.layerHeaderProMap = new Object();
         this.layerHeaderProBuffer = new Object();
        //图层的空间数据类型
        this.geometyTypeMap = new Object();
        //图层要素
        this.featureMap = new Object();
        this.featureArrayMap = new Object();
        //图层坐标索引buffer
        this.offsetBufferMap = new Object();
        //图层坐标索引数组
        this.offsetArrayMap = new Object();
        //图层坐标
        this.varintMap = new Object();

        this._parseVector(vectorVarintBuffer);
    }

    /**
     * 获取vector的头属性
     * @returns {Object}
     */
    getVectorHeaderProMap() {
        return this.vectorHeaderProMap;
    }

    /**
     * 获取layer的头属性
     * @returns {Object}
     */
    getLayerHeaderProMap() {
        return this.layerHeaderProMap;
    }

    /**
     * 获得图层varint编码buffer
     * @param layerName {string}
     * @returns {Buffer}
     */
    getLayerBuffer(layerName) {
        return this.layerMap[layerName];
    }

    /**
     * 通过要素过滤对应的buffer
     * @param layerName {string}图层名称
     * @param featureIndexArray {[number]}选择的要素数组下标
     * @returns {LayerContentModel}
     */
    getLayerProByFilter(layerName, featureIndexArray) {
        let coordinateBufferArray = [];
        let offsetArray = this.offsetArrayMap[layerName];
        let featureArray = this._lazyParseFeature(layerName);
        let filterArray = [];
        let idx;
        let offset;
        let length;
        let proSize = this.proSizeObj[layerName];
        for (let i = 0; i < featureIndexArray.length; i++) {
            idx = featureIndexArray[i];
            //挑选要素
            filterArray.push(...featureArray[idx]);
            //挑选要素对应的坐标索引
            offset = offsetArray[idx*2];
            length = offsetArray[idx*2 + 1];
            coordinateBufferArray.push(this.varintMap[layerName].slice(offset, offset + length));
        }

        let model = new LayerContentModel();
        model.setLayerHeaderProBuffer(this.layerHeaderProBuffer[layerName]);
        model.setFeatureArray(filterArray);
        model.setCoordinateBufferArray(coordinateBufferArray);

        return model;
    }

    /**
     * 获得图层名称数组
     * @returns {[图层名称1， 图层名称2， ...]}
     */
    getAllLayerNames() {
        let layerNames = [];
        for (let value in this.layerMap) {
            layerNames.push(value);
        }
        return layerNames;
    }


    /**
     * 图层的空间类型
     * @param {string} layerName
     * @returns {any}
     */
    getGeometryType(layerName) {
        return this.geometyTypeMap[layerName];
    }

    /**
     * 获取指定的图层要素属性
     * @param layerName {string} 图层名称
     * @param featureIndex {number}要素数组的下标
     * @returns {*|string[]}
     */
    getLayerProByIndex(layerName, featureIndex) {
        let featureArray = this._lazyParseFeature(layerName);
        return featureArray[featureIndex]
    }

    /**
     * 图层的属性信息
     * @param layerName {string}图层名称
     * @returns {[属性数组]}
     */
    getLayerPro(layerName) {
        return this._lazyParseFeature(layerName);
    }

    /**
     * 获得图层所有坐标数组的偏移量数组
     * @param layerName {string}图层名称
     * @returns {[number]} [属性1字节开始位置，属性1坐标字节长度 ,属性2字节开始位置，属性2坐标字节长度 ,....]
     */
    getOffsetArray(layerName) {
        return this.offsetArrayMap[layerName];
    }

    /**
     * 获得图层某个属性的坐标偏移量数组
     * @param layerName {string}图层名称
     * @param featureIndex {number} 要素所在数组的位置
     * @returns {[属性字节开始位置，属性坐标字节长度]}
     */
    getOffsetByIndex(layerName, featureIndex) {
        let all = this.offsetArrayMap[layerName];

        let arr = [];
        arr.push(all[featureIndex * 2]);
        arr.push(all[featureIndex * 2 + 1]);

        return arr;
    }

    /**
     * 获得图层的所有坐标字节
     * @param layerName {string}图层名称
     * @returns {Buffer}
     */
    getLayerCoordinate(layerName) {
        return this.varintMap[layerName];
    }

    /**
     * 获得要素
     * @param layerName {string}图层名称
     * @returns {[object]} [要素属性数组， 坐标偏移量， 坐标varint数组]
     */
    getLayerFeature(layerName) {
        return [this.featureMap[layerName], this.offsetArrayMap[layerName], this.varintMap[layerName]];
    }

    /**
     * 图层所有数字坐标
     * @param layerName {string} 图层名称
     * @param precision {number} 数字精度
     * @returns {[[number]]} [[要素1坐标],[要素2坐标],...]
     */
    getAllCoordinates(layerName, precision) {
        let ofs = this.offsetArrayMap[layerName];
        let buffer = this.varintMap[layerName];
        let coorArray = [];
        let offset;
        let length;
        let bf;
        for (let i = 0; i < ofs.length / 2; i++) {
            offset = ofs[i * 2];
            length = ofs[i * 2 + 1];
            bf = buffer.slice(offset, offset + length);
            coorArray.push(this._bufferToDoubleArray(bf, precision)[0]);
        }
        return coorArray;
    }

    /**
     * 图层某个要素的数字坐标
     * @param layerName {string}图层名称
     * @param proIndex {[number]} 属性所在数组的位置
     * @param precision {number} 数字精度
     * @returns {[number]} 要素坐标
     */
    getCoordinatesByIndex(layerName, proIndex, precision) {
        let ofs = this.getOffsetByIndex(layerName, proIndex);
        let buffer = this.varintMap[layerName];
        let offset = ofs[0];
        let length = ofs[1];
        let bf = buffer.slice(offset, offset + length);
        return this._bufferToDoubleArray(bf, precision)[0];
    }

    /**
     * 解析瓦片数据
     * @param vectorVarintBuffer {Buffer} varint编码Buffer
     * @private
     */
    _parseVector(vectorVarintBuffer) {
        //读取geometry类型的字节长度
        let offset = this.headerLength;

        let typeLength = vectorVarintBuffer.readInt32BE(offset);
        offset = offset + this.intLength;
        //读取数据类型。vector是多图层结构；其它geometry类型的为单图层结构
        let type = vectorVarintBuffer.slice( offset, offset + typeLength).toString("utf-8");
        offset = offset + typeLength;
        if (type !== this.vectorName) {
            console.error("不是瓦片数据！");
            return;
        }
        //读取vector头属性
        let array = this._parseHeaderPro(vectorVarintBuffer, offset);
        offset = array[0];
        this.vectorHeaderProMap = array[1];

        //读取坐标数据索引字节开始位置
        let indexLength = vectorVarintBuffer.readInt32BE(offset);
        //截取index表述字节
        offset = offset + this.intLength;
        let indexBuffer = vectorVarintBuffer.slice(offset, offset + indexLength);
        //截取数字字节
        offset = offset + indexLength;
        let dataBuffer = vectorVarintBuffer.slice(offset, this.vectorVarintBuffer.length);

        let layerNameLength = 0;
        let layerName;
        let dataLength;
        let dataBegin = 0;
        let begin = 0;
        let end = 0;
        let layerBuffer;
        for (let i = 0; i < indexBuffer.length;) {
            begin = i;
            layerNameLength = indexBuffer.readInt32BE(begin);
            begin = begin + this.intLength;
            end = begin + layerNameLength;
            layerName = indexBuffer.toString(this.encoding, begin, end);
            begin = end;
            dataLength = indexBuffer.readInt32BE(begin);
            begin = begin + this.intLength;
            //截取每个layer的坐标字节段
            layerBuffer = dataBuffer.slice(dataBegin, dataBegin + dataLength);
            dataBegin = dataBegin + dataLength;
            this.layerMap[layerName] = layerBuffer;
            this._parseLayer(layerName, layerBuffer);
            i = begin;
        }
    }

    /**
     * 解析图层Buffer
     * @param layerName 图层名
     * @param buffer varint编码Buffer
     * @private
     */
    _parseLayer(layerName, layerBuffer) {

        if (layerBuffer.length === 0) {
            return;
        }

        let offset = this.headerLength;
        //读取layer头属性
        let array = this._parseHeaderPro(layerBuffer, offset);
        offset = array[0];
        this.layerHeaderProMap[layerName] = array[1];
        this.layerHeaderProBuffer[layerName] = array[2];
        //读取空间类型
        let geometrytype = this.layerHeaderProMap[layerName][this.gTypeKey];
        this.geometyTypeMap[layerName] = geometrytype;
        //要素数组
        let featureLength = layerBuffer.readInt32BE(offset);
        offset = offset + this.intLength;
        let featureBuffer = layerBuffer.slice(offset, offset + featureLength);
        featureBuffer = uncompress(featureBuffer);
        offset = offset + featureLength;
        this.featureMap[layerName]=featureBuffer;
        //读取偏移量数组
        let indexRes = this._parseIndex(layerBuffer, offset);
        offset = indexRes.offset;
        this.offsetBufferMap[layerName]=indexRes.buffer;
        this.offsetArrayMap[layerName]=indexRes.array;
        //读取坐标
        let varintBuf = layerBuffer.slice(offset);
        this.varintMap[layerName]=varintBuf;
    }
        /**
         * 解析头属性
         * @param varintBuffer
         * @param offset
         * @returns {(*|Map<any, any>)[]}
         * @private
         */
    _parseHeaderPro(varintBuffer, offset) {
        let proMap = new Object();
        let headerProLength = varintBuffer.readInt32BE(offset);
        offset = offset + this.intLength;
        let headerProBuffer = varintBuffer.slice(offset, offset + headerProLength);
        offset = offset + headerProLength;
        if (headerProLength == 0) {
            return [offset, proMap];
        }

        let headerProArray = GisTool.Utf8ArrayToStr(uncompress(headerProBuffer)).split(":");

        for (let i = 0; i < headerProArray.length / 2; i++) {
            proMap[headerProArray[i * 2]] = headerProArray[i * 2 + 1];
        }

        return [offset, proMap, headerProBuffer];
    }

    /**
     * 解析偏移量数组
     * @param layerBuffer
     * @param offset
     * @returns {{offset: *, array: *[], buffer: *}}
     * @private
     */
    _parseIndex(layerBuffer, offset) {
        //读取偏移量数组长度
        let length = layerBuffer.readInt32BE(offset);
        offset = offset + this.intLength;
        //截取出偏移量数组
        let buffer = layerBuffer.slice(offset, offset + length);
        offset = offset + length;
        //把varint编码的byte流转换为数组
        let array = CodeTool.varintToIntArray(buffer);
        return {
            "offset": offset,
            "buffer": buffer,
            "array": array
        };
    }

    _lazyParseFeature(layerName) {
        let featureArray = this.featureArrayMap[layerName];
        let proSize = this.proSizeObj[layerName];
        if (featureArray == undefined) {
            let buffer = this.featureMap[layerName];
            let props = [];
            if (buffer.length > 0) {
                props = GisTool.Utf8ArrayToStr(this.featureMap[layerName]).split(this.featureSpace);
            } else {
                this.featureArrayMap[layerName] = [];
                return [];
            }
            let item = [];
            let length = (props.length - 1) / proSize;
            featureArray = [];
            let current = 0;
            let next = current;
            for (let i = 0; i < length; i++) {
                next = current + proSize;
                item = props.slice(current, next);
                featureArray.push(item);
                current = next;
            }
            this.featureArrayMap[layerName] = featureArray;
        }
        return featureArray;
    }

    /**
     * varint坐标转数字坐标
     * @param buffer varint字节数组
     * @param precision 数字精度
     * @returns {[number]} 数字坐标
     * @private
     */
    _bufferToDoubleArray(buffer, precision) {
        let varintCode = [];
        let path = [];
        let high;
        let bf_index = 0;
        let nums = [];
        let oldX = 0;
        let oldY = 0;
        let x;
        let y;
        let isX = true;
        //多循环一次处理最后一段数据
        for (let i = 0; i <= buffer.length; i++) { //buffer.length
            high = 0x00000000 | (buffer[i] >> 7) & 0x01;
            if (high === 0 && bf_index > 0) {
                if (bf_index > 0 && bf_index <= 5) {
                    if (isX) {
                        x = CodeTool.varintToInt(varintCode) + oldX;
                        path.push(x / precision);
                        isX = false;
                        oldX = x;
                    } else {
                        y = CodeTool.varintToInt(varintCode) + oldY;
                        path.push(y / precision);
                        isX = true;
                        oldY = y;
                    }
                    bf_index = 0;
                    varintCode = [];
                } else if (bf_index > 5) { //bf_index > 5为间隔符
                    oldX = 0;
                    oldY = 0;
                    bf_index = 0;
                    varintCode = [];
                    nums.push(path);
                    path = [];
                }
            }

             if (i !== buffer.length){
                varintCode.push(buffer[i]);
                bf_index++;
            } else {
                if (path.length > 0) {
                nums.push(path);
                }
            }
        }
        return nums;
    }

}

module.exports = VarintReader;
},{"./CodeTool":33,"./GisTools":34,"./LayerContentModel":35,"./snappyJs":41}],37:[function(require,module,exports){
/**
 * Created by matt on 2017/7/16.
 */
//几个像素可以算是命中
let _dis =  5;

class GisTools{
    static pointDistToLine(x, y, startx, starty, endx, endy) {
        let se =  (startx - endx) * (startx - endx) + (starty - endy) * (starty - endy);
        let p = ((x - startx) * (endx - startx) + (y - starty) * (endy - starty));
        let r = p / se;
        let outx = startx + r * (endx - startx);
        let outy = starty + r * (endy - starty);
        let des = Math.sqrt((x - outx) * (x - outx) + (y - outy) * (y - outy));

        //console.log(des);
        return des;
    }
    static isPointOnSegment(px,py,p1x,p1y,p2x,p2y) {

        if ((px - _dis > p1x && px + _dis > p2x) || (px + _dis < p1x && px - _dis < p2x)) {
            return 0;
        }
        if ((py - _dis > p1y && py + _dis > p2y) || (py + _dis < p1y && py - _dis < p2y)) {
            return 0;
        }
        let d = GisTools.pointDistToLine(px,py,p1x,p1y,p2x,p2y);
        if(d < _dis){
            return 1;
        }else{
            return 0;
        }
    }
    static pointInLine(px,py, polyline) {
        let flag = 0;
        let line = [];
        if(Array.isArray(polyline[0])) {
            line = polyline;
        }else{
            line.push(polyline);
        }
        for(var polyIndex = 0 ; polyIndex < line.length ; polyIndex++){
            let subpoly = line[polyIndex];
            let length = subpoly.length / 2;
           // for (var i = 0, l = length, j = l - 1; i < l; j = i, i++) {

            for (var i = 0; i < length - 1 ; i++) {
                let j;
                j = i + 1;
                let sx = subpoly[2 * i],
                    sy = subpoly[2 * i + 1],
                    tx = subpoly[2 * j],
                    ty = subpoly[2 * j + 1]
                if(GisTools.isPointOnSegment(px,py,sx,sy,tx,ty) == 1){
                    return 1;
                }else{

                }
            }
        }
        return 0;
    }
    static pointInPolygon(px,py, polygen) {
        let flag = 0;
        let poly = [];
        if(Array.isArray(polygen[0])) {
            poly = polygen;
        }else{
            poly.push(polygen);
        }

        for(var polyIndex = 0 ; polyIndex < poly.length ; polyIndex++){
            let subpoly = poly[polyIndex];
            let length = subpoly.length / 2;


            for (var i = 0, l = length, j = l - 1; i < l; j = i, i++) {
                let sx = subpoly[2 * i],
                    sy = subpoly[2 * i + 1],
                    tx = subpoly[2 * j],
                    ty = subpoly[2 * j + 1]

                // 点与多边形顶点重合
                if ((sx === px && sy === py) || (tx === px && ty === py)) {
                    return 1
                }

                // 判断线段两端点是否在射线两侧
                if ((sy < py && ty >= py) || (sy >= py && ty < py)) {
                    // 线段上与射线 Y 坐标相同的点的 X 坐标
                    let x = sx + (py - sy) * (tx - sx) / (ty - sy)

                    // 点在多边形的边上
                    if (x === px) {
                        return 1
                    }
                    if (x > px) {
                        flag = !flag
                    }
                }
            }
        }
        return flag ? 1 : 0;

    }

    static lineIntersects(line1StartX, line1StartY, line1EndX, line1EndY, line2StartX, line2StartY, line2EndX, line2EndY) {
        var denominator,
            a,
            b,
            numerator1,
            numerator2,
            onLine1= false,
            onLine2= false,
            res = [null, null];

        denominator = ((line2EndY - line2StartY) * (line1EndX - line1StartX)) - ((line2EndX - line2StartX) * (line1EndY - line1StartY));
        if (denominator === 0) {
            if(res[0] !== null && res[1] !== null) {
                return res;
            } else {
                return false;
            }
        }
        a = line1StartY - line2StartY;
        b = line1StartX - line2StartX;
        numerator1 = ((line2EndX - line2StartX) * a) - ((line2EndY - line2StartY) * b);
        numerator2 = ((line1EndX - line1StartX) * a) - ((line1EndY - line1StartY) * b);
        a = numerator1 / denominator;
        b = numerator2 / denominator;

        // if we cast these lines infinitely in both directions, they intersect here:
        res[0] = line1StartX + (a * (line1EndX - line1StartX));
        res[1] = line1StartY + (a * (line1EndY - line1StartY));


        // if line2 is a segment and line1 is infinite, they intersect if:
        if (b > 0 && b < 1) {
            return res;
        }
        else {
            return false;
        }
    }

    /**
     * 判断两个poly的关系
     * @param polyOut
     * @param polyIn
     * @returns {1,相交，2包涵，3，没关系}
     */
    static polyWith(polyOut, polyIn) {
        let lengthOut = polyOut.length / 2;
        let lengthIn = polyIn.length / 2;
        let flag = false;
        let bY;
        let aX;
        let aY;
        let bX;
        let dY;
        let cX;
        let cY;
        let dX;
        for (let i = 0; i < lengthOut; i++) {

            if (i != lengthOut - 1) {
                aX = polyOut[(i * 2)];
                aY = polyOut[(i * 2 + 1)];
                bX = polyOut[(i * 2 + 2)];
                bY = polyOut[(i * 2 + 3)];
            } else {
                aX = polyOut[(i * 2)];
                aY = polyOut[(i * 2 + 1)];
                bX = polyOut[0];
                bY = polyOut[1];
            }
            for (let j = 0; j < lengthIn; j++) {

                if (j != lengthIn - 1) {
                    cX = polyIn[(j * 2)];
                    cY = polyIn[(j * 2 + 1)];
                    dX = polyIn[(j * 2 + 2)];
                    dY = polyIn[(j * 2 + 3)];
                } else {
                    cX = polyIn[(j * 2)];
                    cY = polyIn[(j * 2 + 1)];
                    dX = polyIn[0];
                    dY = polyIn[1];
                }

                if (GisTools.lineIntersects(aX, aY, bX, bY, cX, cY, dX, dY) != false) {
                    return 1;
                }
            }
        }

        let firstX = polyIn[0];
        let firstY = polyIn[1];
        if (GisTools.pointInPolygon(firstX, firstY,  polyOut )) {
            return 2;
        }
        return 3;
    }

    /**
     * 把bbox转成double Array
     * @param left
     * @param bottom
     * @param right
     * @param top
     * @returns {Array}
     */
    static boxToPolyArr(left, bottom, right, top){
        let arr = [];
        arr.push(left);
        arr.push(bottom);

        arr.push(left);
        arr.push(top);

        arr.push(right);
        arr.push(top);

        arr.push(right);
        arr.push(bottom);

        arr.push(left);
        arr.push(bottom);

        return arr;
    }

    static getExtensionPoint(p1,p2,d){
        let xab = p2[0] - p1[0];
        let yab = p2[1] - p1[1];
        let xd = p2[0];
        let yd = p2[1];
        if(xab == 0){
            if(yab > 0){
                yd = p2[1] + d;
            }else{
                yd = p2[1] - d;
            }
        }else{
            let xbd = Math.sqrt((d * d)/((yab/xab) * (yab/xab) + 1));
            if (xab < 0) {
                xbd = -xbd
            }

            xd = p2[0] + xbd;
            yd = p2[1] + yab / xab * xbd;
        }
        return [xd,yd];
    }


    /**
     * 线平行偏移
     * @param coords
     * @param distance
     * @returns {Array}
     */
    static lineOffset(coords, distance) {
        let segments = [];
        let finalCoords = [];
        coords.forEach(function (currentCoords, index) {
            if (index !== coords.length - 1) {
                let segment = GisTools.processSegment(currentCoords, coords[index + 1], distance);
                segments.push(segment);
                if (index > 0) {
                    let seg2Coords = segments[index - 1];
                    let intersects = GisTools.lineIntersects(segment[0][0],segment[0][1], segment[1][0],segment[1][1],
                        seg2Coords[0][0],seg2Coords[0][1],seg2Coords[1][0],seg2Coords[1][1]);

                    // Handling for line segments that aren't straight
                    if (intersects !== false) {
                        seg2Coords[1] = intersects;
                        segment[0] = intersects;
                    }

                    finalCoords.push(seg2Coords[0]);
                    if (index === coords.length - 2) {
                        finalCoords.push(segment[0]);
                        finalCoords.push(segment[1]);
                    }
                }
                // Handling for lines that only have 1 segment
                if (coords.length === 2) {
                    finalCoords.push(segment[0]);
                    finalCoords.push(segment[1]);
                }
            }
        });
        return finalCoords;
    }

    /**
     * Process Segment
     * Inspiration taken from http://stackoverflow.com/questions/2825412/draw-a-parallel-line
     *
     * @private
     * @param {Array<number>} point1 Point coordinates
     * @param {Array<number>} point2 Point coordinates
     * @param {number} offset Offset
     * @returns {Array<Array<number>>} offset points
     */
    static processSegment(pointAngle1, pointAngle2, offset) {
        let point1 = pointAngle1[0];
        let point2 = pointAngle2[0];
        let L = Math.sqrt((point1[0] - point2[0]) * (point1[0] - point2[0]) + (point1[1] - point2[1]) * (point1[1] - point2[1]));

        let out1x = point1[0] + offset * (point2[1] - point1[1]) / L;
        let out2x = point2[0] + offset * (point2[1] - point1[1]) / L;
        let out1y = point1[1] + offset * (point1[0] - point2[0]) / L;
        let out2y = point2[1] + offset * (point1[0] - point2[0]) / L;
        return [[[out1x, out1y],pointAngle1[1]], [[out2x, out2y],pointAngle2[1]]];
    }

    /**
     *  判断box1是否在box2内部
     * @param box1
     * @param box2
     */
    static isInBox(box1,box2){
        if(box1[0] >= box2[0] && box1[1] >= box2[1] && box1[2]<= box2[2] && box1[3] <=box2[3]){
            return true;
        }
        return false;
    }
}
module.exports = exports = GisTools;




},{}],38:[function(require,module,exports){

class GridFilter{
    /**
     *
     * @param tilesize 瓦片大小
     * @param cellsize 小正方形网格的宽
     * @param buffer  外扩多少像素
     * @param maxPerCell  小正方形中允许放多小个注记
     */
    constructor(tilesize, cellsize, buffer,maxPerCell) {
        let n = tilesize / cellsize;
        let padding = buffer / cellsize;
        this.maxPerCell = maxPerCell == null ? 1 : maxPerCell;

        this.cells = {};
        this.d = n + 2 * padding;
        this.n = n;
        this.padding = padding;
        this.scale = n / tilesize;
        let p = (padding / n) * tilesize;
        this.min = -p;
        this.max = tilesize + p;
    }

    /**
     *  是否能放下指定的点
     * @param x
     * @param y
     * @returns {boolean}
     */
    filter(x,y){
        if (x < this.min || x > this.max || y < this.min || y > this.max ) {
            return false;
        }

        let cx = this.convertToCellCoord(x);
        let cy = this.convertToCellCoord(y);
        let cellIndex = this.d * cy + cx;
        //console.log('格网号：'+cellIndex);
        if(this.cells[cellIndex] >= this.maxPerCell){
            return false;
        }else{
            let i = this.cells[cellIndex];
            if(i == null){
                this.cells[cellIndex] = 1;
            }else{
                this.cells[cellIndex] = i++;
            }
            return true;
        }
    }

    /**
     *  是否能放下指定的box
     * @param box
     * @returns {boolean}
     */
    filterByBox(box){
        let startX = this.convertToCellCoord(box[0]);
        let endX = this.convertToCellCoord(box[2]);
        let startY = this.convertToCellCoord(box[1]);
        let endY = this.convertToCellCoord(box[3]);
        for(let i =startX;i<= endX;i++){
            for(let j=startY;j<=endY;j++){
                let cellIndex = this.d * j + i;
                //如果任意一个小格网被占用，则本box不能放下
                if(this.cells[cellIndex]){
                    return false;
                }
            }
        }

        //标识小格网被占用
        for(let i =startX;i<= endX;i++){
            for(let j=startY;j<=endY;j++){
                let cellIndex = this.d * j + i;
                this.cells[cellIndex] = 1;
            }
        }
        return true;
    }


    clean(){
        this.cells = {};
        this.saveCount = 0;
    }

    convertToCellCoord(x){
        return Math.max(0, Math.min(this.d - 1, Math.floor(x * this.scale) + this.padding));
    }
}

module.exports = GridFilter;
},{}],39:[function(require,module,exports){

var read = function (buffer, offset, isLE, mLen, nBytes) {
  var e, m
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var nBits = -7
  var i = isLE ? (nBytes - 1) : 0
  var d = isLE ? -1 : 1
  var s = buffer[offset + i]

  i += d

  e = s & ((1 << (-nBits)) - 1)
  s >>= (-nBits)
  nBits += eLen
  for (; nBits > 0; e = e * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  m = e & ((1 << (-nBits)) - 1)
  e >>= (-nBits)
  nBits += mLen
  for (; nBits > 0; m = m * 256 + buffer[offset + i], i += d, nBits -= 8) {}

  if (e === 0) {
    e = 1 - eBias
  } else if (e === eMax) {
    return m ? NaN : ((s ? -1 : 1) * Infinity)
  } else {
    m = m + Math.pow(2, mLen)
    e = e - eBias
  }
  return (s ? -1 : 1) * m * Math.pow(2, e - mLen)
}
var write = function (buffer, value, offset, isLE, mLen, nBytes) {
  var e, m, c
  var eLen = nBytes * 8 - mLen - 1
  var eMax = (1 << eLen) - 1
  var eBias = eMax >> 1
  var rt = (mLen === 23 ? Math.pow(2, -24) - Math.pow(2, -77) : 0)
  var i = isLE ? 0 : (nBytes - 1)
  var d = isLE ? 1 : -1
  var s = value < 0 || (value === 0 && 1 / value < 0) ? 1 : 0

  value = Math.abs(value)

  if (isNaN(value) || value === Infinity) {
    m = isNaN(value) ? 1 : 0
    e = eMax
  } else {
    e = Math.floor(Math.log(value) / Math.LN2)
    if (value * (c = Math.pow(2, -e)) < 1) {
      e--
      c *= 2
    }
    if (e + eBias >= 1) {
      value += rt / c
    } else {
      value += rt * Math.pow(2, 1 - eBias)
    }
    if (value * c >= 2) {
      e++
      c /= 2
    }

    if (e + eBias >= eMax) {
      m = 0
      e = eMax
    } else if (e + eBias >= 1) {
      m = (value * c - 1) * Math.pow(2, mLen)
      e = e + eBias
    } else {
      m = value * Math.pow(2, eBias - 1) * Math.pow(2, mLen)
      e = 0
    }
  }

  for (; mLen >= 8; buffer[offset + i] = m & 0xff, i += d, m /= 256, mLen -= 8) {}

  e = (e << mLen) | m
  eLen += mLen
  for (; eLen > 0; buffer[offset + i] = e & 0xff, i += d, e /= 256, eLen -= 8) {}

  buffer[offset + i - d] |= s * 128
}

module.exports = {read,write};

},{}],40:[function(require,module,exports){
var toString = {}.toString;

module.exports =  Array.isArray || function (arr) {
  return toString.call(arr) == '[object Array]';
};

},{}],41:[function(require,module,exports){
(function (process,Buffer){(function (){
/**
 * Modules in this bundle
 * @license
 *
 * snappyjs:
 *   license: MIT (http://opensource.org/licenses/MIT)
 *   author: Zhipeng Jia
 *   version: 0.6.0
 *
 * This header is generated by licensify (https://github.com/twada/licensify)
 */
// define(['exports'], function (exports) {

    'use strict'

    var WORD_MASK = [0, 0xff, 0xffff, 0xffffff, 0xffffffff]

    function copyBytes (fromArray, fromPos, toArray, toPos, length) {
        var i
        for (i = 0; i < length; i++) {
            toArray[toPos + i] = fromArray[fromPos + i]
        }
    }

    function selfCopyBytes (array, pos, offset, length) {
        var i
        for (i = 0; i < length; i++) {
            array[pos + i] = array[pos - offset + i]
        }
    }

    function SnappyDecompressor (compressed) {
        this.array = compressed
        this.pos = 0
    }

    SnappyDecompressor.prototype.readUncompressedLength = function () {
        var result = 0
        var shift = 0
        var c, val
        while (shift < 32 && this.pos < this.array.length) {
            c = this.array[this.pos]
            this.pos += 1
            val = c & 0x7f
            if (((val << shift) >>> shift) !== val) {
                return -1
            }
            result |= val << shift
            if (c < 128) {
                return result
            }
            shift += 7
        }
        return -1
    }

    SnappyDecompressor.prototype.uncompressToBuffer = function (outBuffer) {
        var array = this.array
        var arrayLength = array.length
        var pos = this.pos
        var outPos = 0

        var c, len, smallLen
        var offset

        while (pos < array.length) {
            c = array[pos]
            pos += 1
            if ((c & 0x3) === 0) {
                // Literal
                len = (c >>> 2) + 1
                if (len > 60) {
                    if (pos + 3 >= arrayLength) {
                        return false
                    }
                    smallLen = len - 60
                    len = array[pos] + (array[pos + 1] << 8) + (array[pos + 2] << 16) + (array[pos + 3] << 24)
                    len = (len & WORD_MASK[smallLen]) + 1
                    pos += smallLen
                }
                if (pos + len > arrayLength) {
                    return false
                }
                copyBytes(array, pos, outBuffer, outPos, len)
                pos += len
                outPos += len
            } else {
                switch (c & 0x3) {
                    case 1:
                        len = ((c >>> 2) & 0x7) + 4
                        offset = array[pos] + ((c >>> 5) << 8)
                        pos += 1
                        break
                    case 2:
                        if (pos + 1 >= arrayLength) {
                            return false
                        }
                        len = (c >>> 2) + 1
                        offset = array[pos] + (array[pos + 1] << 8)
                        pos += 2
                        break
                    case 3:
                        if (pos + 3 >= arrayLength) {
                            return false
                        }
                        len = (c >>> 2) + 1
                        offset = array[pos] + (array[pos + 1] << 8) + (array[pos + 2] << 16) + (array[pos + 3] << 24)
                        pos += 4
                        break
                    default:
                        break
                }
                if (offset === 0 || offset > outPos) {
                    return false
                }
                selfCopyBytes(outBuffer, outPos, offset, len)
                outPos += len
            }
        }
        return true
    }


    // var snappyJS = {};
    // SnappyDecompressor.prototype.readUncompressedLength = function () {
    //     var result = 0
    //     var shift = 0
    //     var c, val
    //     while (shift < 32 && this.pos < this.array.length) {
    //         c = this.array[this.pos]
    //         this.pos += 1
    //         val = c & 0x7f
    //         if (((val << shift) >>> shift) !== val) {
    //             return -1
    //         }
    //         result |= val << shift
    //         if (c < 128) {
    //             return result
    //         }
    //         shift += 7
    //     }
    //     return -1
    // }
    //
    // SnappyDecompressor.prototype.uncompressToBuffer = function (outBuffer) {
    //     var array = this.array
    //     var arrayLength = array.length
    //     var pos = this.pos
    //     var outPos = 0
    //
    //     var c, len, smallLen
    //     var offset
    //
    //     while (pos < array.length) {
    //         c = array[pos]
    //         pos += 1
    //         if ((c & 0x3) === 0) {
    //             // Literal
    //             len = (c >>> 2) + 1
    //             if (len > 60) {
    //                 if (pos + 3 >= arrayLength) {
    //                     return false
    //                 }
    //                 smallLen = len - 60
    //                 len = array[pos] + (array[pos + 1] << 8) + (array[pos + 2] << 16) + (array[pos + 3] << 24)
    //                 len = (len & WORD_MASK[smallLen]) + 1
    //                 pos += smallLen
    //             }
    //             if (pos + len > arrayLength) {
    //                 return false
    //             }
    //             copyBytes(array, pos, outBuffer, outPos, len)
    //             pos += len
    //             outPos += len
    //         } else {
    //             switch (c & 0x3) {
    //                 case 1:
    //                     len = ((c >>> 2) & 0x7) + 4
    //                     offset = array[pos] + ((c >>> 5) << 8)
    //                     pos += 1
    //                     break
    //                 case 2:
    //                     if (pos + 1 >= arrayLength) {
    //                         return false
    //                     }
    //                     len = (c >>> 2) + 1
    //                     offset = array[pos] + (array[pos + 1] << 8)
    //                     pos += 2
    //                     break
    //                 case 3:
    //                     if (pos + 3 >= arrayLength) {
    //                         return false
    //                     }
    //                     len = (c >>> 2) + 1
    //                     offset = array[pos] + (array[pos + 1] << 8) + (array[pos + 2] << 16) + (array[pos + 3] << 24)
    //                     pos += 4
    //                     break
    //                 default:
    //                     break
    //             }
    //             if (offset === 0 || offset > outPos) {
    //                 return false
    //             }
    //             selfCopyBytes(outBuffer, outPos, offset, len)
    //             outPos += len
    //         }
    //     }
    //     return true
    // }


    function isNode () {
        if (typeof process === 'object') {
            if (typeof process.versions === 'object') {
                if (typeof process.versions.node !== 'undefined') {
                    return true
                }
            }
        }
        return false
    }

    function isUint8Array (object) {
        return object instanceof Uint8Array && (!isNode() || !Buffer.isBuffer(object))
    }

    function isArrayBuffer (object) {
        return object instanceof ArrayBuffer
    }

    function isBuffer (object) {
        if (!isNode()) {
            return false
        }
        return Buffer.isBuffer(object)
    }
    var TYPE_ERROR_MSG = 'Argument compressed must be type of ArrayBuffer, Buffer, or Uint8Array'
    function uncompress (compressed) {
        if (!isUint8Array(compressed) && !isArrayBuffer(compressed) && !isBuffer(compressed)) {
            throw new TypeError(TYPE_ERROR_MSG)
        }
        var uint8Mode = false
        var arrayBufferMode = false
        if (isUint8Array(compressed)) {
            uint8Mode = true
        } else if (isArrayBuffer(compressed)) {
            arrayBufferMode = true
            compressed = new Uint8Array(compressed)
        }
        var decompressor = new SnappyDecompressor(compressed)
        var length = decompressor.readUncompressedLength()
        if (length === -1) {
            throw new Error('Invalid Snappy bitstream')
        }
        var uncompressed, uncompressedView
        if (uint8Mode) {
            uncompressed = new Uint8Array(length)
            if (!decompressor.uncompressToBuffer(uncompressed)) {
                throw new Error('Invalid Snappy bitstream')
            }
        } else if (arrayBufferMode) {
            uncompressed = new ArrayBuffer(length)
            uncompressedView = new Uint8Array(uncompressed)
            if (!decompressor.uncompressToBuffer(uncompressedView)) {
                throw new Error('Invalid Snappy bitstream')
            }
        } else {
            uncompressed = Buffer.alloc(length)
            if (!decompressor.uncompressToBuffer(uncompressed)) {
                throw new Error('Invalid Snappy bitstream')
            }
        }
        return uncompressed
    }

module.exports = uncompress;

}).call(this)}).call(this,require('_process'),require("buffer").Buffer)

},{"_process":4,"buffer":2}]},{},[12])(12)
});

//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvX2Jyb3dzZXItcGFja0A2LjEuMEBicm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJDOi9Vc2Vycy9BZG1pbmlzdHJhdG9yL0FwcERhdGEvUm9hbWluZy9ucG0vbm9kZV9tb2R1bGVzL2Jyb3dzZXJpZnkvbm9kZV9tb2R1bGVzL19iYXNlNjQtanNAMS41LjFAYmFzZTY0LWpzL2luZGV4LmpzIiwiQzovVXNlcnMvQWRtaW5pc3RyYXRvci9BcHBEYXRhL1JvYW1pbmcvbnBtL25vZGVfbW9kdWxlcy9icm93c2VyaWZ5L25vZGVfbW9kdWxlcy9fYnVmZmVyQDUuMi4xQGJ1ZmZlci9pbmRleC5qcyIsIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvX2llZWU3NTRAMS4yLjFAaWVlZTc1NC9pbmRleC5qcyIsIkM6L1VzZXJzL0FkbWluaXN0cmF0b3IvQXBwRGF0YS9Sb2FtaW5nL25wbS9ub2RlX21vZHVsZXMvYnJvd3NlcmlmeS9ub2RlX21vZHVsZXMvX3Byb2Nlc3NAMC4xMS4xMEBwcm9jZXNzL2Jyb3dzZXIuanMiLCJub2RlX21vZHVsZXMvZ3JhcGhlbWUtc3BsaXR0ZXIvaW5kZXguanMiLCJub2RlX21vZHVsZXMvcGJmL2luZGV4LmpzIiwic3JjL2V4dC9CaWxsYm9hcmRDb2xsZWN0aW9uLmpzIiwic3JjL2V4dC9DYW1lcmFFeHQuanMiLCJzcmMvZXh0L0xhYmVsQ29sbGVjdGlvbkV4dC5qcyIsInNyYy9leHQvUXVhZHRyZWVQcmltaXRpdmVFeHQuanMiLCJzcmMvaW5kZXguanMiLCJzcmMvbGF5ZXIvaW1hZ2UvSW1hZ2VUaWxlUHJvdmlkZXIuanMiLCJzcmMvbGF5ZXIvbGFiZWwvQXZvaWRUaWxlLmpzIiwic3JjL2xheWVyL2xhYmVsL0xhYmVsVGlsZS5qcyIsInNyYy9sYXllci9sYWJlbC9MYWJlbFRpbGVTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyLmpzIiwic3JjL2xheWVyL2xhYmVsL2F2b2lkL0F2b2lkVXRpbC5qcyIsInNyYy9sYXllci9sYWJlbC9hdm9pZC9HQW5ub0F2b2lkLmpzIiwic3JjL2xheWVyL2xhYmVsL2F2b2lkL0dDdXRMaW5lLmpzIiwic3JjL2xheWVyL2xhYmVsL2F2b2lkL0dEaXN0YW5jZS5qcyIsInNyYy9sYXllci9sYWJlbC9hdm9pZC9HR3JpZEluZGV4LmpzIiwic3JjL2xheWVyL2xhYmVsL2F2b2lkL0dMYWJlbEJveC5qcyIsInNyYy9sYXllci9sYWJlbC9hdm9pZC9HcmlkRmlsdGVyTGFiZWwuanMiLCJzcmMvbGF5ZXIvbGFiZWwvYXZvaWQvTGFiZWxEcmF3ZXIuanMiLCJzcmMvbGF5ZXIvbGFiZWwvYXZvaWQvUGFyc2VMYWJlbERhdGEuanMiLCJzcmMvbGF5ZXIvbGFiZWwvYXZvaWQvVXRpbC5qcyIsInNyYy9sYXllci9sYWJlbC9nbHlwaC9HbHlwaFNvdXJjZS5qcyIsInNyYy9sYXllci9sYWJlbC9nbHlwaC9nbHlwaHMuanMiLCJzcmMvbGF5ZXIvbGFiZWwvZ2x5cGgvaXNfY2hhcl9pbl91bmljb2RlX2Jsb2NrLmpzIiwic3JjL2xheWVyL2xhYmVsL2dseXBoL3NjcmlwdF9kZXRlY3Rpb24uanMiLCJzcmMvbGF5ZXIvbGFiZWwvZ2x5cGgvdmVydGljYWxpemVfcHVuY3R1YXRpb24uanMiLCJzcmMvdXRpbHMvQnVmZmVyLmpzIiwic3JjL3V0aWxzL0NvZGVUb29sLmpzIiwic3JjL3V0aWxzL0dpc1Rvb2xzLmpzIiwic3JjL3V0aWxzL0xheWVyQ29udGVudE1vZGVsLmpzIiwic3JjL3V0aWxzL1ZhcmludFJlYWRlci5qcyIsInNyYy91dGlscy9naXN0b29scy9HaXNUb29scy5qcyIsInNyYy91dGlscy9naXN0b29scy9HcmlkRmlsdGVyLmpzIiwic3JjL3V0aWxzL2llZWU3NTQuanMiLCJzcmMvdXRpbHMvaXNBcnJheS5qcyIsInNyYy91dGlscy9zbmFwcHlKcy5qcyJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQTtBQ0FBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOzs7QUN0SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7OztBQ2p2REE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNyRkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMvc0RBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ2xvQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeDNFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDMUJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDam5CQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3J5QkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDbEJBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMvWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN2SkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeGNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDeHZCQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3T0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMxWUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDelNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDL0tBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDckxBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BtQkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNsUkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3BIQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNqWEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUNoSEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUMzSUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7O0FDN0ZBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzdSQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUN4UUE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQy9HQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7Ozs7QUN2dURBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUM5TEE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7O0FDeFhBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7Ozs7QUMxREE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ25kQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQzlVQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTs7QUM3RkE7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQ3RGQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7OztBQ0xBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBIiwiZmlsZSI6ImdlbmVyYXRlZC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzQ29udGVudCI6WyIoZnVuY3Rpb24oKXtmdW5jdGlvbiByKGUsbix0KXtmdW5jdGlvbiBvKGksZil7aWYoIW5baV0pe2lmKCFlW2ldKXt2YXIgYz1cImZ1bmN0aW9uXCI9PXR5cGVvZiByZXF1aXJlJiZyZXF1aXJlO2lmKCFmJiZjKXJldHVybiBjKGksITApO2lmKHUpcmV0dXJuIHUoaSwhMCk7dmFyIGE9bmV3IEVycm9yKFwiQ2Fubm90IGZpbmQgbW9kdWxlICdcIitpK1wiJ1wiKTt0aHJvdyBhLmNvZGU9XCJNT0RVTEVfTk9UX0ZPVU5EXCIsYX12YXIgcD1uW2ldPXtleHBvcnRzOnt9fTtlW2ldWzBdLmNhbGwocC5leHBvcnRzLGZ1bmN0aW9uKHIpe3ZhciBuPWVbaV1bMV1bcl07cmV0dXJuIG8obnx8cil9LHAscC5leHBvcnRzLHIsZSxuLHQpfXJldHVybiBuW2ldLmV4cG9ydHN9Zm9yKHZhciB1PVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmUsaT0wO2k8dC5sZW5ndGg7aSsrKW8odFtpXSk7cmV0dXJuIG99cmV0dXJuIHJ9KSgpIiwiJ3VzZSBzdHJpY3QnXG5cbmV4cG9ydHMuYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGhcbmV4cG9ydHMudG9CeXRlQXJyYXkgPSB0b0J5dGVBcnJheVxuZXhwb3J0cy5mcm9tQnl0ZUFycmF5ID0gZnJvbUJ5dGVBcnJheVxuXG52YXIgbG9va3VwID0gW11cbnZhciByZXZMb29rdXAgPSBbXVxudmFyIEFyciA9IHR5cGVvZiBVaW50OEFycmF5ICE9PSAndW5kZWZpbmVkJyA/IFVpbnQ4QXJyYXkgOiBBcnJheVxuXG52YXIgY29kZSA9ICdBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWmFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6MDEyMzQ1Njc4OSsvJ1xuZm9yICh2YXIgaSA9IDAsIGxlbiA9IGNvZGUubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcbiAgbG9va3VwW2ldID0gY29kZVtpXVxuICByZXZMb29rdXBbY29kZS5jaGFyQ29kZUF0KGkpXSA9IGlcbn1cblxuLy8gU3VwcG9ydCBkZWNvZGluZyBVUkwtc2FmZSBiYXNlNjQgc3RyaW5ncywgYXMgTm9kZS5qcyBkb2VzLlxuLy8gU2VlOiBodHRwczovL2VuLndpa2lwZWRpYS5vcmcvd2lraS9CYXNlNjQjVVJMX2FwcGxpY2F0aW9uc1xucmV2TG9va3VwWyctJy5jaGFyQ29kZUF0KDApXSA9IDYyXG5yZXZMb29rdXBbJ18nLmNoYXJDb2RlQXQoMCldID0gNjNcblxuZnVuY3Rpb24gZ2V0TGVucyAoYjY0KSB7XG4gIHZhciBsZW4gPSBiNjQubGVuZ3RoXG5cbiAgaWYgKGxlbiAlIDQgPiAwKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIHN0cmluZy4gTGVuZ3RoIG11c3QgYmUgYSBtdWx0aXBsZSBvZiA0JylcbiAgfVxuXG4gIC8vIFRyaW0gb2ZmIGV4dHJhIGJ5dGVzIGFmdGVyIHBsYWNlaG9sZGVyIGJ5dGVzIGFyZSBmb3VuZFxuICAvLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9iZWF0Z2FtbWl0L2Jhc2U2NC1qcy9pc3N1ZXMvNDJcbiAgdmFyIHZhbGlkTGVuID0gYjY0LmluZGV4T2YoJz0nKVxuICBpZiAodmFsaWRMZW4gPT09IC0xKSB2YWxpZExlbiA9IGxlblxuXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSB2YWxpZExlbiA9PT0gbGVuXG4gICAgPyAwXG4gICAgOiA0IC0gKHZhbGlkTGVuICUgNClcblxuICByZXR1cm4gW3ZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW5dXG59XG5cbi8vIGJhc2U2NCBpcyA0LzMgKyB1cCB0byB0d28gY2hhcmFjdGVycyBvZiB0aGUgb3JpZ2luYWwgZGF0YVxuZnVuY3Rpb24gYnl0ZUxlbmd0aCAoYjY0KSB7XG4gIHZhciBsZW5zID0gZ2V0TGVucyhiNjQpXG4gIHZhciB2YWxpZExlbiA9IGxlbnNbMF1cbiAgdmFyIHBsYWNlSG9sZGVyc0xlbiA9IGxlbnNbMV1cbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIF9ieXRlTGVuZ3RoIChiNjQsIHZhbGlkTGVuLCBwbGFjZUhvbGRlcnNMZW4pIHtcbiAgcmV0dXJuICgodmFsaWRMZW4gKyBwbGFjZUhvbGRlcnNMZW4pICogMyAvIDQpIC0gcGxhY2VIb2xkZXJzTGVuXG59XG5cbmZ1bmN0aW9uIHRvQnl0ZUFycmF5IChiNjQpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVucyA9IGdldExlbnMoYjY0KVxuICB2YXIgdmFsaWRMZW4gPSBsZW5zWzBdXG4gIHZhciBwbGFjZUhvbGRlcnNMZW4gPSBsZW5zWzFdXG5cbiAgdmFyIGFyciA9IG5ldyBBcnIoX2J5dGVMZW5ndGgoYjY0LCB2YWxpZExlbiwgcGxhY2VIb2xkZXJzTGVuKSlcblxuICB2YXIgY3VyQnl0ZSA9IDBcblxuICAvLyBpZiB0aGVyZSBhcmUgcGxhY2Vob2xkZXJzLCBvbmx5IGdldCB1cCB0byB0aGUgbGFzdCBjb21wbGV0ZSA0IGNoYXJzXG4gIHZhciBsZW4gPSBwbGFjZUhvbGRlcnNMZW4gPiAwXG4gICAgPyB2YWxpZExlbiAtIDRcbiAgICA6IHZhbGlkTGVuXG5cbiAgdmFyIGlcbiAgZm9yIChpID0gMDsgaSA8IGxlbjsgaSArPSA0KSB7XG4gICAgdG1wID1cbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSldIDw8IDE4KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPDwgMTIpIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDIpXSA8PCA2KSB8XG4gICAgICByZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDMpXVxuICAgIGFycltjdXJCeXRlKytdID0gKHRtcCA+PiAxNikgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSAodG1wID4+IDgpICYgMHhGRlxuICAgIGFycltjdXJCeXRlKytdID0gdG1wICYgMHhGRlxuICB9XG5cbiAgaWYgKHBsYWNlSG9sZGVyc0xlbiA9PT0gMikge1xuICAgIHRtcCA9XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkpXSA8PCAyKSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAxKV0gPj4gNClcbiAgICBhcnJbY3VyQnl0ZSsrXSA9IHRtcCAmIDB4RkZcbiAgfVxuXG4gIGlmIChwbGFjZUhvbGRlcnNMZW4gPT09IDEpIHtcbiAgICB0bXAgPVxuICAgICAgKHJldkxvb2t1cFtiNjQuY2hhckNvZGVBdChpKV0gPDwgMTApIHxcbiAgICAgIChyZXZMb29rdXBbYjY0LmNoYXJDb2RlQXQoaSArIDEpXSA8PCA0KSB8XG4gICAgICAocmV2TG9va3VwW2I2NC5jaGFyQ29kZUF0KGkgKyAyKV0gPj4gMilcbiAgICBhcnJbY3VyQnl0ZSsrXSA9ICh0bXAgPj4gOCkgJiAweEZGXG4gICAgYXJyW2N1ckJ5dGUrK10gPSB0bXAgJiAweEZGXG4gIH1cblxuICByZXR1cm4gYXJyXG59XG5cbmZ1bmN0aW9uIHRyaXBsZXRUb0Jhc2U2NCAobnVtKSB7XG4gIHJldHVybiBsb29rdXBbbnVtID4+IDE4ICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gPj4gMTIgJiAweDNGXSArXG4gICAgbG9va3VwW251bSA+PiA2ICYgMHgzRl0gK1xuICAgIGxvb2t1cFtudW0gJiAweDNGXVxufVxuXG5mdW5jdGlvbiBlbmNvZGVDaHVuayAodWludDgsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHRtcFxuICB2YXIgb3V0cHV0ID0gW11cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyBpICs9IDMpIHtcbiAgICB0bXAgPVxuICAgICAgKCh1aW50OFtpXSA8PCAxNikgJiAweEZGMDAwMCkgK1xuICAgICAgKCh1aW50OFtpICsgMV0gPDwgOCkgJiAweEZGMDApICtcbiAgICAgICh1aW50OFtpICsgMl0gJiAweEZGKVxuICAgIG91dHB1dC5wdXNoKHRyaXBsZXRUb0Jhc2U2NCh0bXApKVxuICB9XG4gIHJldHVybiBvdXRwdXQuam9pbignJylcbn1cblxuZnVuY3Rpb24gZnJvbUJ5dGVBcnJheSAodWludDgpIHtcbiAgdmFyIHRtcFxuICB2YXIgbGVuID0gdWludDgubGVuZ3RoXG4gIHZhciBleHRyYUJ5dGVzID0gbGVuICUgMyAvLyBpZiB3ZSBoYXZlIDEgYnl0ZSBsZWZ0LCBwYWQgMiBieXRlc1xuICB2YXIgcGFydHMgPSBbXVxuICB2YXIgbWF4Q2h1bmtMZW5ndGggPSAxNjM4MyAvLyBtdXN0IGJlIG11bHRpcGxlIG9mIDNcblxuICAvLyBnbyB0aHJvdWdoIHRoZSBhcnJheSBldmVyeSB0aHJlZSBieXRlcywgd2UnbGwgZGVhbCB3aXRoIHRyYWlsaW5nIHN0dWZmIGxhdGVyXG4gIGZvciAodmFyIGkgPSAwLCBsZW4yID0gbGVuIC0gZXh0cmFCeXRlczsgaSA8IGxlbjI7IGkgKz0gbWF4Q2h1bmtMZW5ndGgpIHtcbiAgICBwYXJ0cy5wdXNoKGVuY29kZUNodW5rKHVpbnQ4LCBpLCAoaSArIG1heENodW5rTGVuZ3RoKSA+IGxlbjIgPyBsZW4yIDogKGkgKyBtYXhDaHVua0xlbmd0aCkpKVxuICB9XG5cbiAgLy8gcGFkIHRoZSBlbmQgd2l0aCB6ZXJvcywgYnV0IG1ha2Ugc3VyZSB0byBub3QgZm9yZ2V0IHRoZSBleHRyYSBieXRlc1xuICBpZiAoZXh0cmFCeXRlcyA9PT0gMSkge1xuICAgIHRtcCA9IHVpbnQ4W2xlbiAtIDFdXG4gICAgcGFydHMucHVzaChcbiAgICAgIGxvb2t1cFt0bXAgPj4gMl0gK1xuICAgICAgbG9va3VwWyh0bXAgPDwgNCkgJiAweDNGXSArXG4gICAgICAnPT0nXG4gICAgKVxuICB9IGVsc2UgaWYgKGV4dHJhQnl0ZXMgPT09IDIpIHtcbiAgICB0bXAgPSAodWludDhbbGVuIC0gMl0gPDwgOCkgKyB1aW50OFtsZW4gLSAxXVxuICAgIHBhcnRzLnB1c2goXG4gICAgICBsb29rdXBbdG1wID4+IDEwXSArXG4gICAgICBsb29rdXBbKHRtcCA+PiA0KSAmIDB4M0ZdICtcbiAgICAgIGxvb2t1cFsodG1wIDw8IDIpICYgMHgzRl0gK1xuICAgICAgJz0nXG4gICAgKVxuICB9XG5cbiAgcmV0dXJuIHBhcnRzLmpvaW4oJycpXG59XG4iLCIvKiFcbiAqIFRoZSBidWZmZXIgbW9kdWxlIGZyb20gbm9kZS5qcywgZm9yIHRoZSBicm93c2VyLlxuICpcbiAqIEBhdXRob3IgICBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmc+XG4gKiBAbGljZW5zZSAgTUlUXG4gKi9cbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXG5cbid1c2Ugc3RyaWN0J1xuXG52YXIgYmFzZTY0ID0gcmVxdWlyZSgnYmFzZTY0LWpzJylcbnZhciBpZWVlNzU0ID0gcmVxdWlyZSgnaWVlZTc1NCcpXG5cbmV4cG9ydHMuQnVmZmVyID0gQnVmZmVyXG5leHBvcnRzLlNsb3dCdWZmZXIgPSBTbG93QnVmZmVyXG5leHBvcnRzLklOU1BFQ1RfTUFYX0JZVEVTID0gNTBcblxudmFyIEtfTUFYX0xFTkdUSCA9IDB4N2ZmZmZmZmZcbmV4cG9ydHMua01heExlbmd0aCA9IEtfTUFYX0xFTkdUSFxuXG4vKipcbiAqIElmIGBCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVGA6XG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxuICogICA9PT0gZmFsc2UgICBQcmludCB3YXJuaW5nIGFuZCByZWNvbW1lbmQgdXNpbmcgYGJ1ZmZlcmAgdjQueCB3aGljaCBoYXMgYW4gT2JqZWN0XG4gKiAgICAgICAgICAgICAgIGltcGxlbWVudGF0aW9uIChtb3N0IGNvbXBhdGlibGUsIGV2ZW4gSUU2KVxuICpcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcbiAqIE9wZXJhIDExLjYrLCBpT1MgNC4yKy5cbiAqXG4gKiBXZSByZXBvcnQgdGhhdCB0aGUgYnJvd3NlciBkb2VzIG5vdCBzdXBwb3J0IHR5cGVkIGFycmF5cyBpZiB0aGUgYXJlIG5vdCBzdWJjbGFzc2FibGVcbiAqIHVzaW5nIF9fcHJvdG9fXy4gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWBcbiAqIChTZWU6IGh0dHBzOi8vYnVnemlsbGEubW96aWxsYS5vcmcvc2hvd19idWcuY2dpP2lkPTY5NTQzOCkuIElFIDEwIGxhY2tzIHN1cHBvcnRcbiAqIGZvciBfX3Byb3RvX18gYW5kIGhhcyBhIGJ1Z2d5IHR5cGVkIGFycmF5IGltcGxlbWVudGF0aW9uLlxuICovXG5CdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCA9IHR5cGVkQXJyYXlTdXBwb3J0KClcblxuaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCAmJiB0eXBlb2YgY29uc29sZSAhPT0gJ3VuZGVmaW5lZCcgJiZcbiAgICB0eXBlb2YgY29uc29sZS5lcnJvciA9PT0gJ2Z1bmN0aW9uJykge1xuICBjb25zb2xlLmVycm9yKFxuICAgICdUaGlzIGJyb3dzZXIgbGFja3MgdHlwZWQgYXJyYXkgKFVpbnQ4QXJyYXkpIHN1cHBvcnQgd2hpY2ggaXMgcmVxdWlyZWQgYnkgJyArXG4gICAgJ2BidWZmZXJgIHY1LnguIFVzZSBgYnVmZmVyYCB2NC54IGlmIHlvdSByZXF1aXJlIG9sZCBicm93c2VyIHN1cHBvcnQuJ1xuICApXG59XG5cbmZ1bmN0aW9uIHR5cGVkQXJyYXlTdXBwb3J0ICgpIHtcbiAgLy8gQ2FuIHR5cGVkIGFycmF5IGluc3RhbmNlcyBjYW4gYmUgYXVnbWVudGVkP1xuICB0cnkge1xuICAgIHZhciBhcnIgPSBuZXcgVWludDhBcnJheSgxKVxuICAgIGFyci5fX3Byb3RvX18gPSB7IF9fcHJvdG9fXzogVWludDhBcnJheS5wcm90b3R5cGUsIGZvbzogZnVuY3Rpb24gKCkgeyByZXR1cm4gNDIgfSB9XG4gICAgcmV0dXJuIGFyci5mb28oKSA9PT0gNDJcbiAgfSBjYXRjaCAoZSkge1xuICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbk9iamVjdC5kZWZpbmVQcm9wZXJ0eShCdWZmZXIucHJvdG90eXBlLCAncGFyZW50Jywge1xuICBlbnVtZXJhYmxlOiB0cnVlLFxuICBnZXQ6IGZ1bmN0aW9uICgpIHtcbiAgICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcih0aGlzKSkgcmV0dXJuIHVuZGVmaW5lZFxuICAgIHJldHVybiB0aGlzLmJ1ZmZlclxuICB9XG59KVxuXG5PYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLnByb3RvdHlwZSwgJ29mZnNldCcsIHtcbiAgZW51bWVyYWJsZTogdHJ1ZSxcbiAgZ2V0OiBmdW5jdGlvbiAoKSB7XG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIodGhpcykpIHJldHVybiB1bmRlZmluZWRcbiAgICByZXR1cm4gdGhpcy5ieXRlT2Zmc2V0XG4gIH1cbn0pXG5cbmZ1bmN0aW9uIGNyZWF0ZUJ1ZmZlciAobGVuZ3RoKSB7XG4gIGlmIChsZW5ndGggPiBLX01BWF9MRU5HVEgpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIFwiJyArIGxlbmd0aCArICdcIiBpcyBpbnZhbGlkIGZvciBvcHRpb24gXCJzaXplXCInKVxuICB9XG4gIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlXG4gIHZhciBidWYgPSBuZXcgVWludDhBcnJheShsZW5ndGgpXG4gIGJ1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXG4gIHJldHVybiBidWZcbn1cblxuLyoqXG4gKiBUaGUgQnVmZmVyIGNvbnN0cnVjdG9yIHJldHVybnMgaW5zdGFuY2VzIG9mIGBVaW50OEFycmF5YCB0aGF0IGhhdmUgdGhlaXJcbiAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2ZcbiAqIGBVaW50OEFycmF5YCwgc28gdGhlIHJldHVybmVkIGluc3RhbmNlcyB3aWxsIGhhdmUgYWxsIHRoZSBub2RlIGBCdWZmZXJgIG1ldGhvZHNcbiAqIGFuZCB0aGUgYFVpbnQ4QXJyYXlgIG1ldGhvZHMuIFNxdWFyZSBicmFja2V0IG5vdGF0aW9uIHdvcmtzIGFzIGV4cGVjdGVkIC0tIGl0XG4gKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LlxuICpcbiAqIFRoZSBgVWludDhBcnJheWAgcHJvdG90eXBlIHJlbWFpbnMgdW5tb2RpZmllZC5cbiAqL1xuXG5mdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XG4gIC8vIENvbW1vbiBjYXNlLlxuICBpZiAodHlwZW9mIGFyZyA9PT0gJ251bWJlcicpIHtcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nT3JPZmZzZXQgPT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgICAnVGhlIFwic3RyaW5nXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIHN0cmluZy4gUmVjZWl2ZWQgdHlwZSBudW1iZXInXG4gICAgICApXG4gICAgfVxuICAgIHJldHVybiBhbGxvY1Vuc2FmZShhcmcpXG4gIH1cbiAgcmV0dXJuIGZyb20oYXJnLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG59XG5cbi8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XG5pZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLnNwZWNpZXMgIT0gbnVsbCAmJlxuICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xuICBPYmplY3QuZGVmaW5lUHJvcGVydHkoQnVmZmVyLCBTeW1ib2wuc3BlY2llcywge1xuICAgIHZhbHVlOiBudWxsLFxuICAgIGNvbmZpZ3VyYWJsZTogdHJ1ZSxcbiAgICBlbnVtZXJhYmxlOiBmYWxzZSxcbiAgICB3cml0YWJsZTogZmFsc2VcbiAgfSlcbn1cblxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXG5cbmZ1bmN0aW9uIGZyb20gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcbiAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcbiAgICByZXR1cm4gZnJvbVN0cmluZyh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldClcbiAgfVxuXG4gIGlmIChBcnJheUJ1ZmZlci5pc1ZpZXcodmFsdWUpKSB7XG4gICAgcmV0dXJuIGZyb21BcnJheUxpa2UodmFsdWUpXG4gIH1cblxuICBpZiAodmFsdWUgPT0gbnVsbCkge1xuICAgIHRocm93IFR5cGVFcnJvcihcbiAgICAgICdUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCAnICtcbiAgICAgICdvciBBcnJheS1saWtlIE9iamVjdC4gUmVjZWl2ZWQgdHlwZSAnICsgKHR5cGVvZiB2YWx1ZSlcbiAgICApXG4gIH1cblxuICBpZiAoaXNJbnN0YW5jZSh2YWx1ZSwgQXJyYXlCdWZmZXIpIHx8XG4gICAgICAodmFsdWUgJiYgaXNJbnN0YW5jZSh2YWx1ZS5idWZmZXIsIEFycmF5QnVmZmVyKSkpIHtcbiAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICBpZiAodHlwZW9mIHZhbHVlID09PSAnbnVtYmVyJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAnVGhlIFwidmFsdWVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBvZiB0eXBlIG51bWJlci4gUmVjZWl2ZWQgdHlwZSBudW1iZXInXG4gICAgKVxuICB9XG5cbiAgdmFyIHZhbHVlT2YgPSB2YWx1ZS52YWx1ZU9mICYmIHZhbHVlLnZhbHVlT2YoKVxuICBpZiAodmFsdWVPZiAhPSBudWxsICYmIHZhbHVlT2YgIT09IHZhbHVlKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5mcm9tKHZhbHVlT2YsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcbiAgfVxuXG4gIHZhciBiID0gZnJvbU9iamVjdCh2YWx1ZSlcbiAgaWYgKGIpIHJldHVybiBiXG5cbiAgaWYgKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1ByaW1pdGl2ZSAhPSBudWxsICYmXG4gICAgICB0eXBlb2YgdmFsdWVbU3ltYm9sLnRvUHJpbWl0aXZlXSA9PT0gJ2Z1bmN0aW9uJykge1xuICAgIHJldHVybiBCdWZmZXIuZnJvbShcbiAgICAgIHZhbHVlW1N5bWJvbC50b1ByaW1pdGl2ZV0oJ3N0cmluZycpLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGhcbiAgICApXG4gIH1cblxuICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICdUaGUgZmlyc3QgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgQXJyYXlCdWZmZXIsIEFycmF5LCAnICtcbiAgICAnb3IgQXJyYXktbGlrZSBPYmplY3QuIFJlY2VpdmVkIHR5cGUgJyArICh0eXBlb2YgdmFsdWUpXG4gIClcbn1cblxuLyoqXG4gKiBGdW5jdGlvbmFsbHkgZXF1aXZhbGVudCB0byBCdWZmZXIoYXJnLCBlbmNvZGluZykgYnV0IHRocm93cyBhIFR5cGVFcnJvclxuICogaWYgdmFsdWUgaXMgYSBudW1iZXIuXG4gKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXG4gKiBCdWZmZXIuZnJvbShhcnJheSlcbiAqIEJ1ZmZlci5mcm9tKGJ1ZmZlcilcbiAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxuICoqL1xuQnVmZmVyLmZyb20gPSBmdW5jdGlvbiAodmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gZnJvbSh2YWx1ZSwgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKVxufVxuXG4vLyBOb3RlOiBDaGFuZ2UgcHJvdG90eXBlICphZnRlciogQnVmZmVyLmZyb20gaXMgZGVmaW5lZCB0byB3b3JrYXJvdW5kIENocm9tZSBidWc6XG4vLyBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzE0OFxuQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxuQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcblxuZnVuY3Rpb24gYXNzZXJ0U2l6ZSAoc2l6ZSkge1xuICBpZiAodHlwZW9mIHNpemUgIT09ICdudW1iZXInKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJzaXplXCIgYXJndW1lbnQgbXVzdCBiZSBvZiB0eXBlIG51bWJlcicpXG4gIH0gZWxzZSBpZiAoc2l6ZSA8IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignVGhlIHZhbHVlIFwiJyArIHNpemUgKyAnXCIgaXMgaW52YWxpZCBmb3Igb3B0aW9uIFwic2l6ZVwiJylcbiAgfVxufVxuXG5mdW5jdGlvbiBhbGxvYyAoc2l6ZSwgZmlsbCwgZW5jb2RpbmcpIHtcbiAgYXNzZXJ0U2l6ZShzaXplKVxuICBpZiAoc2l6ZSA8PSAwKSB7XG4gICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplKVxuICB9XG4gIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcbiAgICAvLyBPbmx5IHBheSBhdHRlbnRpb24gdG8gZW5jb2RpbmcgaWYgaXQncyBhIHN0cmluZy4gVGhpc1xuICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcbiAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXG4gICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZydcbiAgICAgID8gY3JlYXRlQnVmZmVyKHNpemUpLmZpbGwoZmlsbCwgZW5jb2RpbmcpXG4gICAgICA6IGNyZWF0ZUJ1ZmZlcihzaXplKS5maWxsKGZpbGwpXG4gIH1cbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplKVxufVxuXG4vKipcbiAqIENyZWF0ZXMgYSBuZXcgZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqIGFsbG9jKHNpemVbLCBmaWxsWywgZW5jb2RpbmddXSlcbiAqKi9cbkJ1ZmZlci5hbGxvYyA9IGZ1bmN0aW9uIChzaXplLCBmaWxsLCBlbmNvZGluZykge1xuICByZXR1cm4gYWxsb2Moc2l6ZSwgZmlsbCwgZW5jb2RpbmcpXG59XG5cbmZ1bmN0aW9uIGFsbG9jVW5zYWZlIChzaXplKSB7XG4gIGFzc2VydFNpemUoc2l6ZSlcbiAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcihzaXplIDwgMCA/IDAgOiBjaGVja2VkKHNpemUpIHwgMClcbn1cblxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIEJ1ZmZlcihudW0pLCBieSBkZWZhdWx0IGNyZWF0ZXMgYSBub24temVyby1maWxsZWQgQnVmZmVyIGluc3RhbmNlLlxuICogKi9cbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKVxufVxuLyoqXG4gKiBFcXVpdmFsZW50IHRvIFNsb3dCdWZmZXIobnVtKSwgYnkgZGVmYXVsdCBjcmVhdGVzIGEgbm9uLXplcm8tZmlsbGVkIEJ1ZmZlciBpbnN0YW5jZS5cbiAqL1xuQnVmZmVyLmFsbG9jVW5zYWZlU2xvdyA9IGZ1bmN0aW9uIChzaXplKSB7XG4gIHJldHVybiBhbGxvY1Vuc2FmZShzaXplKVxufVxuXG5mdW5jdGlvbiBmcm9tU3RyaW5nIChzdHJpbmcsIGVuY29kaW5nKSB7XG4gIGlmICh0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnIHx8IGVuY29kaW5nID09PSAnJykge1xuICAgIGVuY29kaW5nID0gJ3V0ZjgnXG4gIH1cblxuICBpZiAoIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1Vua25vd24gZW5jb2Rpbmc6ICcgKyBlbmNvZGluZylcbiAgfVxuXG4gIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxuICB2YXIgYnVmID0gY3JlYXRlQnVmZmVyKGxlbmd0aClcblxuICB2YXIgYWN0dWFsID0gYnVmLndyaXRlKHN0cmluZywgZW5jb2RpbmcpXG5cbiAgaWYgKGFjdHVhbCAhPT0gbGVuZ3RoKSB7XG4gICAgLy8gV3JpdGluZyBhIGhleCBzdHJpbmcsIGZvciBleGFtcGxlLCB0aGF0IGNvbnRhaW5zIGludmFsaWQgY2hhcmFjdGVycyB3aWxsXG4gICAgLy8gY2F1c2UgZXZlcnl0aGluZyBhZnRlciB0aGUgZmlyc3QgaW52YWxpZCBjaGFyYWN0ZXIgdG8gYmUgaWdub3JlZC4gKGUuZy5cbiAgICAvLyAnYWJ4eGNkJyB3aWxsIGJlIHRyZWF0ZWQgYXMgJ2FiJylcbiAgICBidWYgPSBidWYuc2xpY2UoMCwgYWN0dWFsKVxuICB9XG5cbiAgcmV0dXJuIGJ1ZlxufVxuXG5mdW5jdGlvbiBmcm9tQXJyYXlMaWtlIChhcnJheSkge1xuICB2YXIgbGVuZ3RoID0gYXJyYXkubGVuZ3RoIDwgMCA/IDAgOiBjaGVja2VkKGFycmF5Lmxlbmd0aCkgfCAwXG4gIHZhciBidWYgPSBjcmVhdGVCdWZmZXIobGVuZ3RoKVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XG4gICAgYnVmW2ldID0gYXJyYXlbaV0gJiAyNTVcbiAgfVxuICByZXR1cm4gYnVmXG59XG5cbmZ1bmN0aW9uIGZyb21BcnJheUJ1ZmZlciAoYXJyYXksIGJ5dGVPZmZzZXQsIGxlbmd0aCkge1xuICBpZiAoYnl0ZU9mZnNldCA8IDAgfHwgYXJyYXkuYnl0ZUxlbmd0aCA8IGJ5dGVPZmZzZXQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignXCJvZmZzZXRcIiBpcyBvdXRzaWRlIG9mIGJ1ZmZlciBib3VuZHMnKVxuICB9XG5cbiAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcImxlbmd0aFwiIGlzIG91dHNpZGUgb2YgYnVmZmVyIGJvdW5kcycpXG4gIH1cblxuICB2YXIgYnVmXG4gIGlmIChieXRlT2Zmc2V0ID09PSB1bmRlZmluZWQgJiYgbGVuZ3RoID09PSB1bmRlZmluZWQpIHtcbiAgICBidWYgPSBuZXcgVWludDhBcnJheShhcnJheSlcbiAgfSBlbHNlIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCkge1xuICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0KVxuICB9IGVsc2Uge1xuICAgIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpXG4gIH1cblxuICAvLyBSZXR1cm4gYW4gYXVnbWVudGVkIGBVaW50OEFycmF5YCBpbnN0YW5jZVxuICBidWYuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxuICByZXR1cm4gYnVmXG59XG5cbmZ1bmN0aW9uIGZyb21PYmplY3QgKG9iaikge1xuICBpZiAoQnVmZmVyLmlzQnVmZmVyKG9iaikpIHtcbiAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcbiAgICB2YXIgYnVmID0gY3JlYXRlQnVmZmVyKGxlbilcblxuICAgIGlmIChidWYubGVuZ3RoID09PSAwKSB7XG4gICAgICByZXR1cm4gYnVmXG4gICAgfVxuXG4gICAgb2JqLmNvcHkoYnVmLCAwLCAwLCBsZW4pXG4gICAgcmV0dXJuIGJ1ZlxuICB9XG5cbiAgaWYgKG9iai5sZW5ndGggIT09IHVuZGVmaW5lZCkge1xuICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgbnVtYmVySXNOYU4ob2JqLmxlbmd0aCkpIHtcbiAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIoMClcbiAgICB9XG4gICAgcmV0dXJuIGZyb21BcnJheUxpa2Uob2JqKVxuICB9XG5cbiAgaWYgKG9iai50eXBlID09PSAnQnVmZmVyJyAmJiBBcnJheS5pc0FycmF5KG9iai5kYXRhKSkge1xuICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKG9iai5kYXRhKVxuICB9XG59XG5cbmZ1bmN0aW9uIGNoZWNrZWQgKGxlbmd0aCkge1xuICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBLX01BWF9MRU5HVEhgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cbiAgLy8gbGVuZ3RoIGlzIE5hTiAod2hpY2ggaXMgb3RoZXJ3aXNlIGNvZXJjZWQgdG8gemVyby4pXG4gIGlmIChsZW5ndGggPj0gS19NQVhfTEVOR1RIKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gYWxsb2NhdGUgQnVmZmVyIGxhcmdlciB0aGFuIG1heGltdW0gJyArXG4gICAgICAgICAgICAgICAgICAgICAgICAgJ3NpemU6IDB4JyArIEtfTUFYX0xFTkdUSC50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcbiAgfVxuICByZXR1cm4gbGVuZ3RoIHwgMFxufVxuXG5mdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcbiAgaWYgKCtsZW5ndGggIT0gbGVuZ3RoKSB7IC8vIGVzbGludC1kaXNhYmxlLWxpbmUgZXFlcWVxXG4gICAgbGVuZ3RoID0gMFxuICB9XG4gIHJldHVybiBCdWZmZXIuYWxsb2MoK2xlbmd0aClcbn1cblxuQnVmZmVyLmlzQnVmZmVyID0gZnVuY3Rpb24gaXNCdWZmZXIgKGIpIHtcbiAgcmV0dXJuIGIgIT0gbnVsbCAmJiBiLl9pc0J1ZmZlciA9PT0gdHJ1ZSAmJlxuICAgIGIgIT09IEJ1ZmZlci5wcm90b3R5cGUgLy8gc28gQnVmZmVyLmlzQnVmZmVyKEJ1ZmZlci5wcm90b3R5cGUpIHdpbGwgYmUgZmFsc2Vcbn1cblxuQnVmZmVyLmNvbXBhcmUgPSBmdW5jdGlvbiBjb21wYXJlIChhLCBiKSB7XG4gIGlmIChpc0luc3RhbmNlKGEsIFVpbnQ4QXJyYXkpKSBhID0gQnVmZmVyLmZyb20oYSwgYS5vZmZzZXQsIGEuYnl0ZUxlbmd0aClcbiAgaWYgKGlzSW5zdGFuY2UoYiwgVWludDhBcnJheSkpIGIgPSBCdWZmZXIuZnJvbShiLCBiLm9mZnNldCwgYi5ieXRlTGVuZ3RoKVxuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihhKSB8fCAhQnVmZmVyLmlzQnVmZmVyKGIpKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihcbiAgICAgICdUaGUgXCJidWYxXCIsIFwiYnVmMlwiIGFyZ3VtZW50cyBtdXN0IGJlIG9uZSBvZiB0eXBlIEJ1ZmZlciBvciBVaW50OEFycmF5J1xuICAgIClcbiAgfVxuXG4gIGlmIChhID09PSBiKSByZXR1cm4gMFxuXG4gIHZhciB4ID0gYS5sZW5ndGhcbiAgdmFyIHkgPSBiLmxlbmd0aFxuXG4gIGZvciAodmFyIGkgPSAwLCBsZW4gPSBNYXRoLm1pbih4LCB5KTsgaSA8IGxlbjsgKytpKSB7XG4gICAgaWYgKGFbaV0gIT09IGJbaV0pIHtcbiAgICAgIHggPSBhW2ldXG4gICAgICB5ID0gYltpXVxuICAgICAgYnJlYWtcbiAgICB9XG4gIH1cblxuICBpZiAoeCA8IHkpIHJldHVybiAtMVxuICBpZiAoeSA8IHgpIHJldHVybiAxXG4gIHJldHVybiAwXG59XG5cbkJ1ZmZlci5pc0VuY29kaW5nID0gZnVuY3Rpb24gaXNFbmNvZGluZyAoZW5jb2RpbmcpIHtcbiAgc3dpdGNoIChTdHJpbmcoZW5jb2RpbmcpLnRvTG93ZXJDYXNlKCkpIHtcbiAgICBjYXNlICdoZXgnOlxuICAgIGNhc2UgJ3V0ZjgnOlxuICAgIGNhc2UgJ3V0Zi04JzpcbiAgICBjYXNlICdhc2NpaSc6XG4gICAgY2FzZSAnbGF0aW4xJzpcbiAgICBjYXNlICdiaW5hcnknOlxuICAgIGNhc2UgJ2Jhc2U2NCc6XG4gICAgY2FzZSAndWNzMic6XG4gICAgY2FzZSAndWNzLTInOlxuICAgIGNhc2UgJ3V0ZjE2bGUnOlxuICAgIGNhc2UgJ3V0Zi0xNmxlJzpcbiAgICAgIHJldHVybiB0cnVlXG4gICAgZGVmYXVsdDpcbiAgICAgIHJldHVybiBmYWxzZVxuICB9XG59XG5cbkJ1ZmZlci5jb25jYXQgPSBmdW5jdGlvbiBjb25jYXQgKGxpc3QsIGxlbmd0aCkge1xuICBpZiAoIUFycmF5LmlzQXJyYXkobGlzdCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxuICB9XG5cbiAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XG4gICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgbGVuZ3RoID0gMFxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XG4gICAgICBsZW5ndGggKz0gbGlzdFtpXS5sZW5ndGhcbiAgICB9XG4gIH1cblxuICB2YXIgYnVmZmVyID0gQnVmZmVyLmFsbG9jVW5zYWZlKGxlbmd0aClcbiAgdmFyIHBvcyA9IDBcbiAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcbiAgICB2YXIgYnVmID0gbGlzdFtpXVxuICAgIGlmIChpc0luc3RhbmNlKGJ1ZiwgVWludDhBcnJheSkpIHtcbiAgICAgIGJ1ZiA9IEJ1ZmZlci5mcm9tKGJ1ZilcbiAgICB9XG4gICAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYnVmKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJsaXN0XCIgYXJndW1lbnQgbXVzdCBiZSBhbiBBcnJheSBvZiBCdWZmZXJzJylcbiAgICB9XG4gICAgYnVmLmNvcHkoYnVmZmVyLCBwb3MpXG4gICAgcG9zICs9IGJ1Zi5sZW5ndGhcbiAgfVxuICByZXR1cm4gYnVmZmVyXG59XG5cbmZ1bmN0aW9uIGJ5dGVMZW5ndGggKHN0cmluZywgZW5jb2RpbmcpIHtcbiAgaWYgKEJ1ZmZlci5pc0J1ZmZlcihzdHJpbmcpKSB7XG4gICAgcmV0dXJuIHN0cmluZy5sZW5ndGhcbiAgfVxuICBpZiAoQXJyYXlCdWZmZXIuaXNWaWV3KHN0cmluZykgfHwgaXNJbnN0YW5jZShzdHJpbmcsIEFycmF5QnVmZmVyKSkge1xuICAgIHJldHVybiBzdHJpbmcuYnl0ZUxlbmd0aFxuICB9XG4gIGlmICh0eXBlb2Ygc3RyaW5nICE9PSAnc3RyaW5nJykge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IoXG4gICAgICAnVGhlIFwic3RyaW5nXCIgYXJndW1lbnQgbXVzdCBiZSBvbmUgb2YgdHlwZSBzdHJpbmcsIEJ1ZmZlciwgb3IgQXJyYXlCdWZmZXIuICcgK1xuICAgICAgJ1JlY2VpdmVkIHR5cGUgJyArIHR5cGVvZiBzdHJpbmdcbiAgICApXG4gIH1cblxuICB2YXIgbGVuID0gc3RyaW5nLmxlbmd0aFxuICB2YXIgbXVzdE1hdGNoID0gKGFyZ3VtZW50cy5sZW5ndGggPiAyICYmIGFyZ3VtZW50c1syXSA9PT0gdHJ1ZSlcbiAgaWYgKCFtdXN0TWF0Y2ggJiYgbGVuID09PSAwKSByZXR1cm4gMFxuXG4gIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxuICB2YXIgbG93ZXJlZENhc2UgPSBmYWxzZVxuICBmb3IgKDs7KSB7XG4gICAgc3dpdGNoIChlbmNvZGluZykge1xuICAgICAgY2FzZSAnYXNjaWknOlxuICAgICAgY2FzZSAnbGF0aW4xJzpcbiAgICAgIGNhc2UgJ2JpbmFyeSc6XG4gICAgICAgIHJldHVybiBsZW5cbiAgICAgIGNhc2UgJ3V0ZjgnOlxuICAgICAgY2FzZSAndXRmLTgnOlxuICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiBsZW4gKiAyXG4gICAgICBjYXNlICdoZXgnOlxuICAgICAgICByZXR1cm4gbGVuID4+PiAxXG4gICAgICBjYXNlICdiYXNlNjQnOlxuICAgICAgICByZXR1cm4gYmFzZTY0VG9CeXRlcyhzdHJpbmcpLmxlbmd0aFxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB7XG4gICAgICAgICAgcmV0dXJuIG11c3RNYXRjaCA/IC0xIDogdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGggLy8gYXNzdW1lIHV0ZjhcbiAgICAgICAgfVxuICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgICAgIGxvd2VyZWRDYXNlID0gdHJ1ZVxuICAgIH1cbiAgfVxufVxuQnVmZmVyLmJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoXG5cbmZ1bmN0aW9uIHNsb3dUb1N0cmluZyAoZW5jb2RpbmcsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcblxuICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0IFwidGhpcy5sZW5ndGggPD0gTUFYX1VJTlQzMlwiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHlcbiAgLy8gcHJvcGVydHkgb2YgYSB0eXBlZCBhcnJheS5cblxuICAvLyBUaGlzIGJlaGF2ZXMgbmVpdGhlciBsaWtlIFN0cmluZyBub3IgVWludDhBcnJheSBpbiB0aGF0IHdlIHNldCBzdGFydC9lbmRcbiAgLy8gdG8gdGhlaXIgdXBwZXIvbG93ZXIgYm91bmRzIGlmIHRoZSB2YWx1ZSBwYXNzZWQgaXMgb3V0IG9mIHJhbmdlLlxuICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLFxuICAvLyBTZWN0aW9uIDEzLjMuMy43IFJ1bnRpbWUgU2VtYW50aWNzOiBLZXllZEJpbmRpbmdJbml0aWFsaXphdGlvbi5cbiAgaWYgKHN0YXJ0ID09PSB1bmRlZmluZWQgfHwgc3RhcnQgPCAwKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgLy8gUmV0dXJuIGVhcmx5IGlmIHN0YXJ0ID4gdGhpcy5sZW5ndGguIERvbmUgaGVyZSB0byBwcmV2ZW50IHBvdGVudGlhbCB1aW50MzJcbiAgLy8gY29lcmNpb24gZmFpbCBiZWxvdy5cbiAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIGlmIChlbmQgPT09IHVuZGVmaW5lZCB8fCBlbmQgPiB0aGlzLmxlbmd0aCkge1xuICAgIGVuZCA9IHRoaXMubGVuZ3RoXG4gIH1cblxuICBpZiAoZW5kIDw9IDApIHtcbiAgICByZXR1cm4gJydcbiAgfVxuXG4gIC8vIEZvcmNlIGNvZXJzaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuXG4gIGVuZCA+Pj49IDBcbiAgc3RhcnQgPj4+PSAwXG5cbiAgaWYgKGVuZCA8PSBzdGFydCkge1xuICAgIHJldHVybiAnJ1xuICB9XG5cbiAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcblxuICB3aGlsZSAodHJ1ZSkge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1dGYxNmxlU2xpY2UodGhpcywgc3RhcnQsIGVuZClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKGVuY29kaW5nICsgJycpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbi8vIFRoaXMgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCAoYW5kIHRoZSBgaXMtYnVmZmVyYCBucG0gcGFja2FnZSlcbi8vIHRvIGRldGVjdCBhIEJ1ZmZlciBpbnN0YW5jZS4gSXQncyBub3QgcG9zc2libGUgdG8gdXNlIGBpbnN0YW5jZW9mIEJ1ZmZlcmBcbi8vIHJlbGlhYmx5IGluIGEgYnJvd3NlcmlmeSBjb250ZXh0IGJlY2F1c2UgdGhlcmUgY291bGQgYmUgbXVsdGlwbGUgZGlmZmVyZW50XG4vLyBjb3BpZXMgb2YgdGhlICdidWZmZXInIHBhY2thZ2UgaW4gdXNlLiBUaGlzIG1ldGhvZCB3b3JrcyBldmVuIGZvciBCdWZmZXJcbi8vIGluc3RhbmNlcyB0aGF0IHdlcmUgY3JlYXRlZCBmcm9tIGFub3RoZXIgY29weSBvZiB0aGUgYGJ1ZmZlcmAgcGFja2FnZS5cbi8vIFNlZTogaHR0cHM6Ly9naXRodWIuY29tL2Zlcm9zcy9idWZmZXIvaXNzdWVzLzE1NFxuQnVmZmVyLnByb3RvdHlwZS5faXNCdWZmZXIgPSB0cnVlXG5cbmZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHtcbiAgdmFyIGkgPSBiW25dXG4gIGJbbl0gPSBiW21dXG4gIGJbbV0gPSBpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDE2ID0gZnVuY3Rpb24gc3dhcDE2ICgpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIGlmIChsZW4gJSAyICE9PSAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAxNi1iaXRzJylcbiAgfVxuICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSAyKSB7XG4gICAgc3dhcCh0aGlzLCBpLCBpICsgMSlcbiAgfVxuICByZXR1cm4gdGhpc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XG4gIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuICUgNCAhPT0gMCkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgMzItYml0cycpXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gNCkge1xuICAgIHN3YXAodGhpcywgaSwgaSArIDMpXG4gICAgc3dhcCh0aGlzLCBpICsgMSwgaSArIDIpXG4gIH1cbiAgcmV0dXJuIHRoaXNcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkge1xuICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcbiAgaWYgKGxlbiAlIDggIT09IDApIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDY0LWJpdHMnKVxuICB9XG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDgpIHtcbiAgICBzd2FwKHRoaXMsIGksIGkgKyA3KVxuICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyA2KVxuICAgIHN3YXAodGhpcywgaSArIDIsIGkgKyA1KVxuICAgIHN3YXAodGhpcywgaSArIDMsIGkgKyA0KVxuICB9XG4gIHJldHVybiB0aGlzXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XG4gIHZhciBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcbiAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPT09IDApIHJldHVybiB1dGY4U2xpY2UodGhpcywgMCwgbGVuZ3RoKVxuICByZXR1cm4gc2xvd1RvU3RyaW5nLmFwcGx5KHRoaXMsIGFyZ3VtZW50cylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS50b0xvY2FsZVN0cmluZyA9IEJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmdcblxuQnVmZmVyLnByb3RvdHlwZS5lcXVhbHMgPSBmdW5jdGlvbiBlcXVhbHMgKGIpIHtcbiAgaWYgKCFCdWZmZXIuaXNCdWZmZXIoYikpIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxuICBpZiAodGhpcyA9PT0gYikgcmV0dXJuIHRydWVcbiAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xuICB2YXIgc3RyID0gJydcbiAgdmFyIG1heCA9IGV4cG9ydHMuSU5TUEVDVF9NQVhfQllURVNcbiAgc3RyID0gdGhpcy50b1N0cmluZygnaGV4JywgMCwgbWF4KS5yZXBsYWNlKC8oLnsyfSkvZywgJyQxICcpLnRyaW0oKVxuICBpZiAodGhpcy5sZW5ndGggPiBtYXgpIHN0ciArPSAnIC4uLiAnXG4gIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7XG4gIGlmIChpc0luc3RhbmNlKHRhcmdldCwgVWludDhBcnJheSkpIHtcbiAgICB0YXJnZXQgPSBCdWZmZXIuZnJvbSh0YXJnZXQsIHRhcmdldC5vZmZzZXQsIHRhcmdldC5ieXRlTGVuZ3RoKVxuICB9XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHtcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKFxuICAgICAgJ1RoZSBcInRhcmdldFwiIGFyZ3VtZW50IG11c3QgYmUgb25lIG9mIHR5cGUgQnVmZmVyIG9yIFVpbnQ4QXJyYXkuICcgK1xuICAgICAgJ1JlY2VpdmVkIHR5cGUgJyArICh0eXBlb2YgdGFyZ2V0KVxuICAgIClcbiAgfVxuXG4gIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgc3RhcnQgPSAwXG4gIH1cbiAgaWYgKGVuZCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5kID0gdGFyZ2V0ID8gdGFyZ2V0Lmxlbmd0aCA6IDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID09PSB1bmRlZmluZWQpIHtcbiAgICB0aGlzU3RhcnQgPSAwXG4gIH1cbiAgaWYgKHRoaXNFbmQgPT09IHVuZGVmaW5lZCkge1xuICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aFxuICB9XG5cbiAgaWYgKHN0YXJ0IDwgMCB8fCBlbmQgPiB0YXJnZXQubGVuZ3RoIHx8IHRoaXNTdGFydCA8IDAgfHwgdGhpc0VuZCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ291dCBvZiByYW5nZSBpbmRleCcpXG4gIH1cblxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQgJiYgc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDBcbiAgfVxuICBpZiAodGhpc1N0YXJ0ID49IHRoaXNFbmQpIHtcbiAgICByZXR1cm4gLTFcbiAgfVxuICBpZiAoc3RhcnQgPj0gZW5kKSB7XG4gICAgcmV0dXJuIDFcbiAgfVxuXG4gIHN0YXJ0ID4+Pj0gMFxuICBlbmQgPj4+PSAwXG4gIHRoaXNTdGFydCA+Pj49IDBcbiAgdGhpc0VuZCA+Pj49IDBcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0KSByZXR1cm4gMFxuXG4gIHZhciB4ID0gdGhpc0VuZCAtIHRoaXNTdGFydFxuICB2YXIgeSA9IGVuZCAtIHN0YXJ0XG4gIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxuXG4gIHZhciB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKVxuICB2YXIgdGFyZ2V0Q29weSA9IHRhcmdldC5zbGljZShzdGFydCwgZW5kKVxuXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcbiAgICBpZiAodGhpc0NvcHlbaV0gIT09IHRhcmdldENvcHlbaV0pIHtcbiAgICAgIHggPSB0aGlzQ29weVtpXVxuICAgICAgeSA9IHRhcmdldENvcHlbaV1cbiAgICAgIGJyZWFrXG4gICAgfVxuICB9XG5cbiAgaWYgKHggPCB5KSByZXR1cm4gLTFcbiAgaWYgKHkgPCB4KSByZXR1cm4gMVxuICByZXR1cm4gMFxufVxuXG4vLyBGaW5kcyBlaXRoZXIgdGhlIGZpcnN0IGluZGV4IG9mIGB2YWxgIGluIGBidWZmZXJgIGF0IG9mZnNldCA+PSBgYnl0ZU9mZnNldGAsXG4vLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLlxuLy9cbi8vIEFyZ3VtZW50czpcbi8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoXG4vLyAtIHZhbCAtIGEgc3RyaW5nLCBCdWZmZXIsIG9yIG51bWJlclxuLy8gLSBieXRlT2Zmc2V0IC0gYW4gaW5kZXggaW50byBgYnVmZmVyYDsgd2lsbCBiZSBjbGFtcGVkIHRvIGFuIGludDMyXG4vLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZ1xuLy8gLSBkaXIgLSB0cnVlIGZvciBpbmRleE9mLCBmYWxzZSBmb3IgbGFzdEluZGV4T2ZcbmZ1bmN0aW9uIGJpZGlyZWN0aW9uYWxJbmRleE9mIChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcikge1xuICAvLyBFbXB0eSBidWZmZXIgbWVhbnMgbm8gbWF0Y2hcbiAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAtMVxuXG4gIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0XG4gIGlmICh0eXBlb2YgYnl0ZU9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IGJ5dGVPZmZzZXRcbiAgICBieXRlT2Zmc2V0ID0gMFxuICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPiAweDdmZmZmZmZmKSB7XG4gICAgYnl0ZU9mZnNldCA9IDB4N2ZmZmZmZmZcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHtcbiAgICBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcbiAgfVxuICBieXRlT2Zmc2V0ID0gK2J5dGVPZmZzZXQgLy8gQ29lcmNlIHRvIE51bWJlci5cbiAgaWYgKG51bWJlcklzTmFOKGJ5dGVPZmZzZXQpKSB7XG4gICAgLy8gYnl0ZU9mZnNldDogaXQgaXQncyB1bmRlZmluZWQsIG51bGwsIE5hTiwgXCJmb29cIiwgZXRjLCBzZWFyY2ggd2hvbGUgYnVmZmVyXG4gICAgYnl0ZU9mZnNldCA9IGRpciA/IDAgOiAoYnVmZmVyLmxlbmd0aCAtIDEpXG4gIH1cblxuICAvLyBOb3JtYWxpemUgYnl0ZU9mZnNldDogbmVnYXRpdmUgb2Zmc2V0cyBzdGFydCBmcm9tIHRoZSBlbmQgb2YgdGhlIGJ1ZmZlclxuICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxuICBpZiAoYnl0ZU9mZnNldCA+PSBidWZmZXIubGVuZ3RoKSB7XG4gICAgaWYgKGRpcikgcmV0dXJuIC0xXG4gICAgZWxzZSBieXRlT2Zmc2V0ID0gYnVmZmVyLmxlbmd0aCAtIDFcbiAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgMCkge1xuICAgIGlmIChkaXIpIGJ5dGVPZmZzZXQgPSAwXG4gICAgZWxzZSByZXR1cm4gLTFcbiAgfVxuXG4gIC8vIE5vcm1hbGl6ZSB2YWxcbiAgaWYgKHR5cGVvZiB2YWwgPT09ICdzdHJpbmcnKSB7XG4gICAgdmFsID0gQnVmZmVyLmZyb20odmFsLCBlbmNvZGluZylcbiAgfVxuXG4gIC8vIEZpbmFsbHksIHNlYXJjaCBlaXRoZXIgaW5kZXhPZiAoaWYgZGlyIGlzIHRydWUpIG9yIGxhc3RJbmRleE9mXG4gIGlmIChCdWZmZXIuaXNCdWZmZXIodmFsKSkge1xuICAgIC8vIFNwZWNpYWwgY2FzZTogbG9va2luZyBmb3IgZW1wdHkgc3RyaW5nL2J1ZmZlciBhbHdheXMgZmFpbHNcbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMCkge1xuICAgICAgcmV0dXJuIC0xXG4gICAgfVxuICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAweEZGIC8vIFNlYXJjaCBmb3IgYSBieXRlIHZhbHVlIFswLTI1NV1cbiAgICBpZiAodHlwZW9mIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgIGlmIChkaXIpIHtcbiAgICAgICAgcmV0dXJuIFVpbnQ4QXJyYXkucHJvdG90eXBlLmluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5sYXN0SW5kZXhPZi5jYWxsKGJ1ZmZlciwgdmFsLCBieXRlT2Zmc2V0KVxuICAgICAgfVxuICAgIH1cbiAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcbiAgfVxuXG4gIHRocm93IG5ldyBUeXBlRXJyb3IoJ3ZhbCBtdXN0IGJlIHN0cmluZywgbnVtYmVyIG9yIEJ1ZmZlcicpXG59XG5cbmZ1bmN0aW9uIGFycmF5SW5kZXhPZiAoYXJyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcbiAgdmFyIGluZGV4U2l6ZSA9IDFcbiAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcbiAgdmFyIHZhbExlbmd0aCA9IHZhbC5sZW5ndGhcblxuICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCkge1xuICAgIGVuY29kaW5nID0gU3RyaW5nKGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXG4gICAgaWYgKGVuY29kaW5nID09PSAndWNzMicgfHwgZW5jb2RpbmcgPT09ICd1Y3MtMicgfHxcbiAgICAgICAgZW5jb2RpbmcgPT09ICd1dGYxNmxlJyB8fCBlbmNvZGluZyA9PT0gJ3V0Zi0xNmxlJykge1xuICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XG4gICAgICAgIHJldHVybiAtMVxuICAgICAgfVxuICAgICAgaW5kZXhTaXplID0gMlxuICAgICAgYXJyTGVuZ3RoIC89IDJcbiAgICAgIHZhbExlbmd0aCAvPSAyXG4gICAgICBieXRlT2Zmc2V0IC89IDJcbiAgICB9XG4gIH1cblxuICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcbiAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XG4gICAgICByZXR1cm4gYnVmW2ldXG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiBidWYucmVhZFVJbnQxNkJFKGkgKiBpbmRleFNpemUpXG4gICAgfVxuICB9XG5cbiAgdmFyIGlcbiAgaWYgKGRpcikge1xuICAgIHZhciBmb3VuZEluZGV4ID0gLTFcbiAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcbiAgICAgIGlmIChyZWFkKGFyciwgaSkgPT09IHJlYWQodmFsLCBmb3VuZEluZGV4ID09PSAtMSA/IDAgOiBpIC0gZm91bmRJbmRleCkpIHtcbiAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxuICAgICAgICBpZiAoaSAtIGZvdW5kSW5kZXggKyAxID09PSB2YWxMZW5ndGgpIHJldHVybiBmb3VuZEluZGV4ICogaW5kZXhTaXplXG4gICAgICB9IGVsc2Uge1xuICAgICAgICBpZiAoZm91bmRJbmRleCAhPT0gLTEpIGkgLT0gaSAtIGZvdW5kSW5kZXhcbiAgICAgICAgZm91bmRJbmRleCA9IC0xXG4gICAgICB9XG4gICAgfVxuICB9IGVsc2Uge1xuICAgIGlmIChieXRlT2Zmc2V0ICsgdmFsTGVuZ3RoID4gYXJyTGVuZ3RoKSBieXRlT2Zmc2V0ID0gYXJyTGVuZ3RoIC0gdmFsTGVuZ3RoXG4gICAgZm9yIChpID0gYnl0ZU9mZnNldDsgaSA+PSAwOyBpLS0pIHtcbiAgICAgIHZhciBmb3VuZCA9IHRydWVcbiAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcbiAgICAgICAgaWYgKHJlYWQoYXJyLCBpICsgaikgIT09IHJlYWQodmFsLCBqKSkge1xuICAgICAgICAgIGZvdW5kID0gZmFsc2VcbiAgICAgICAgICBicmVha1xuICAgICAgICB9XG4gICAgICB9XG4gICAgICBpZiAoZm91bmQpIHJldHVybiBpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIC0xXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUuaW5jbHVkZXMgPSBmdW5jdGlvbiBpbmNsdWRlcyAodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykge1xuICByZXR1cm4gdGhpcy5pbmRleE9mKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpICE9PSAtMVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmluZGV4T2YgPSBmdW5jdGlvbiBpbmRleE9mICh2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nKSB7XG4gIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcbiAgcmV0dXJuIGJpZGlyZWN0aW9uYWxJbmRleE9mKHRoaXMsIHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGZhbHNlKVxufVxuXG5mdW5jdGlvbiBoZXhXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIG9mZnNldCA9IE51bWJlcihvZmZzZXQpIHx8IDBcbiAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcbiAgaWYgKCFsZW5ndGgpIHtcbiAgICBsZW5ndGggPSByZW1haW5pbmdcbiAgfSBlbHNlIHtcbiAgICBsZW5ndGggPSBOdW1iZXIobGVuZ3RoKVxuICAgIGlmIChsZW5ndGggPiByZW1haW5pbmcpIHtcbiAgICAgIGxlbmd0aCA9IHJlbWFpbmluZ1xuICAgIH1cbiAgfVxuXG4gIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXG5cbiAgaWYgKGxlbmd0aCA+IHN0ckxlbiAvIDIpIHtcbiAgICBsZW5ndGggPSBzdHJMZW4gLyAyXG4gIH1cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIHZhciBwYXJzZWQgPSBwYXJzZUludChzdHJpbmcuc3Vic3RyKGkgKiAyLCAyKSwgMTYpXG4gICAgaWYgKG51bWJlcklzTmFOKHBhcnNlZCkpIHJldHVybiBpXG4gICAgYnVmW29mZnNldCArIGldID0gcGFyc2VkXG4gIH1cbiAgcmV0dXJuIGlcbn1cblxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgcmV0dXJuIGJsaXRCdWZmZXIodXRmOFRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYXNjaWlXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKGFzY2lpVG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxufVxuXG5mdW5jdGlvbiBsYXRpbjFXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcbn1cblxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xuICByZXR1cm4gYmxpdEJ1ZmZlcihiYXNlNjRUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbmZ1bmN0aW9uIHVjczJXcml0ZSAoYnVmLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKSB7XG4gIHJldHVybiBibGl0QnVmZmVyKHV0ZjE2bGVUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGUgPSBmdW5jdGlvbiB3cml0ZSAoc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCwgZW5jb2RpbmcpIHtcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcbiAgaWYgKG9mZnNldCA9PT0gdW5kZWZpbmVkKSB7XG4gICAgZW5jb2RpbmcgPSAndXRmOCdcbiAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxuICAgIG9mZnNldCA9IDBcbiAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXG4gIH0gZWxzZSBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQgJiYgdHlwZW9mIG9mZnNldCA9PT0gJ3N0cmluZycpIHtcbiAgICBlbmNvZGluZyA9IG9mZnNldFxuICAgIGxlbmd0aCA9IHRoaXMubGVuZ3RoXG4gICAgb2Zmc2V0ID0gMFxuICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxuICB9IGVsc2UgaWYgKGlzRmluaXRlKG9mZnNldCkpIHtcbiAgICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgICBpZiAoaXNGaW5pdGUobGVuZ3RoKSkge1xuICAgICAgbGVuZ3RoID0gbGVuZ3RoID4+PiAwXG4gICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkgZW5jb2RpbmcgPSAndXRmOCdcbiAgICB9IGVsc2Uge1xuICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcbiAgICAgIGxlbmd0aCA9IHVuZGVmaW5lZFxuICAgIH1cbiAgfSBlbHNlIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoXG4gICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnXG4gICAgKVxuICB9XG5cbiAgdmFyIHJlbWFpbmluZyA9IHRoaXMubGVuZ3RoIC0gb2Zmc2V0XG4gIGlmIChsZW5ndGggPT09IHVuZGVmaW5lZCB8fCBsZW5ndGggPiByZW1haW5pbmcpIGxlbmd0aCA9IHJlbWFpbmluZ1xuXG4gIGlmICgoc3RyaW5nLmxlbmd0aCA+IDAgJiYgKGxlbmd0aCA8IDAgfHwgb2Zmc2V0IDwgMCkpIHx8IG9mZnNldCA+IHRoaXMubGVuZ3RoKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0F0dGVtcHQgdG8gd3JpdGUgb3V0c2lkZSBidWZmZXIgYm91bmRzJylcbiAgfVxuXG4gIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXG5cbiAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcbiAgZm9yICg7Oykge1xuICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcbiAgICAgIGNhc2UgJ2hleCc6XG4gICAgICAgIHJldHVybiBoZXhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICd1dGY4JzpcbiAgICAgIGNhc2UgJ3V0Zi04JzpcbiAgICAgICAgcmV0dXJuIHV0ZjhXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxuXG4gICAgICBjYXNlICdhc2NpaSc6XG4gICAgICAgIHJldHVybiBhc2NpaVdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ2xhdGluMSc6XG4gICAgICBjYXNlICdiaW5hcnknOlxuICAgICAgICByZXR1cm4gbGF0aW4xV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgY2FzZSAnYmFzZTY0JzpcbiAgICAgICAgLy8gV2FybmluZzogbWF4TGVuZ3RoIG5vdCB0YWtlbiBpbnRvIGFjY291bnQgaW4gYmFzZTY0V3JpdGVcbiAgICAgICAgcmV0dXJuIGJhc2U2NFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXG5cbiAgICAgIGNhc2UgJ3VjczInOlxuICAgICAgY2FzZSAndWNzLTInOlxuICAgICAgY2FzZSAndXRmMTZsZSc6XG4gICAgICBjYXNlICd1dGYtMTZsZSc6XG4gICAgICAgIHJldHVybiB1Y3MyV3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcblxuICAgICAgZGVmYXVsdDpcbiAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXG4gICAgICAgIGVuY29kaW5nID0gKCcnICsgZW5jb2RpbmcpLnRvTG93ZXJDYXNlKClcbiAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXG4gICAgfVxuICB9XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcbiAgcmV0dXJuIHtcbiAgICB0eXBlOiAnQnVmZmVyJyxcbiAgICBkYXRhOiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbCh0aGlzLl9hcnIgfHwgdGhpcywgMClcbiAgfVxufVxuXG5mdW5jdGlvbiBiYXNlNjRTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIGlmIChzdGFydCA9PT0gMCAmJiBlbmQgPT09IGJ1Zi5sZW5ndGgpIHtcbiAgICByZXR1cm4gYmFzZTY0LmZyb21CeXRlQXJyYXkoYnVmKVxuICB9IGVsc2Uge1xuICAgIHJldHVybiBiYXNlNjQuZnJvbUJ5dGVBcnJheShidWYuc2xpY2Uoc3RhcnQsIGVuZCkpXG4gIH1cbn1cblxuZnVuY3Rpb24gdXRmOFNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxuICB2YXIgcmVzID0gW11cblxuICB2YXIgaSA9IHN0YXJ0XG4gIHdoaWxlIChpIDwgZW5kKSB7XG4gICAgdmFyIGZpcnN0Qnl0ZSA9IGJ1ZltpXVxuICAgIHZhciBjb2RlUG9pbnQgPSBudWxsXG4gICAgdmFyIGJ5dGVzUGVyU2VxdWVuY2UgPSAoZmlyc3RCeXRlID4gMHhFRikgPyA0XG4gICAgICA6IChmaXJzdEJ5dGUgPiAweERGKSA/IDNcbiAgICAgICAgOiAoZmlyc3RCeXRlID4gMHhCRikgPyAyXG4gICAgICAgICAgOiAxXG5cbiAgICBpZiAoaSArIGJ5dGVzUGVyU2VxdWVuY2UgPD0gZW5kKSB7XG4gICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XG5cbiAgICAgIHN3aXRjaCAoYnl0ZXNQZXJTZXF1ZW5jZSkge1xuICAgICAgICBjYXNlIDE6XG4gICAgICAgICAgaWYgKGZpcnN0Qnl0ZSA8IDB4ODApIHtcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IGZpcnN0Qnl0ZVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweDFGKSA8PCAweDYgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDM6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgaWYgKChzZWNvbmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKHRoaXJkQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcbiAgICAgICAgICAgIGlmICh0ZW1wQ29kZVBvaW50ID4gMHg3RkYgJiYgKHRlbXBDb2RlUG9pbnQgPCAweEQ4MDAgfHwgdGVtcENvZGVQb2ludCA+IDB4REZGRikpIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgICAgICBicmVha1xuICAgICAgICBjYXNlIDQ6XG4gICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cbiAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXG4gICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cbiAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xuICAgICAgICAgICAgdGVtcENvZGVQb2ludCA9IChmaXJzdEJ5dGUgJiAweEYpIDw8IDB4MTIgfCAoc2Vjb25kQnl0ZSAmIDB4M0YpIDw8IDB4QyB8ICh0aGlyZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAoZm91cnRoQnl0ZSAmIDB4M0YpXG4gICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4RkZGRiAmJiB0ZW1wQ29kZVBvaW50IDwgMHgxMTAwMDApIHtcbiAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxuICAgICAgICAgICAgfVxuICAgICAgICAgIH1cbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoY29kZVBvaW50ID09PSBudWxsKSB7XG4gICAgICAvLyB3ZSBkaWQgbm90IGdlbmVyYXRlIGEgdmFsaWQgY29kZVBvaW50IHNvIGluc2VydCBhXG4gICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXG4gICAgICBjb2RlUG9pbnQgPSAweEZGRkRcbiAgICAgIGJ5dGVzUGVyU2VxdWVuY2UgPSAxXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPiAweEZGRkYpIHtcbiAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXG4gICAgICBjb2RlUG9pbnQgLT0gMHgxMDAwMFxuICAgICAgcmVzLnB1c2goY29kZVBvaW50ID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKVxuICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcbiAgICB9XG5cbiAgICByZXMucHVzaChjb2RlUG9pbnQpXG4gICAgaSArPSBieXRlc1BlclNlcXVlbmNlXG4gIH1cblxuICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcbn1cblxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXG4vLyB0aGUgbG93ZXN0IGxpbWl0IGlzIENocm9tZSwgd2l0aCAweDEwMDAwIGFyZ3MuXG4vLyBXZSBnbyAxIG1hZ25pdHVkZSBsZXNzLCBmb3Igc2FmZXR5XG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcblxuZnVuY3Rpb24gZGVjb2RlQ29kZVBvaW50c0FycmF5IChjb2RlUG9pbnRzKSB7XG4gIHZhciBsZW4gPSBjb2RlUG9pbnRzLmxlbmd0aFxuICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XG4gICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXG4gIH1cblxuICAvLyBEZWNvZGUgaW4gY2h1bmtzIHRvIGF2b2lkIFwiY2FsbCBzdGFjayBzaXplIGV4Y2VlZGVkXCIuXG4gIHZhciByZXMgPSAnJ1xuICB2YXIgaSA9IDBcbiAgd2hpbGUgKGkgPCBsZW4pIHtcbiAgICByZXMgKz0gU3RyaW5nLmZyb21DaGFyQ29kZS5hcHBseShcbiAgICAgIFN0cmluZyxcbiAgICAgIGNvZGVQb2ludHMuc2xpY2UoaSwgaSArPSBNQVhfQVJHVU1FTlRTX0xFTkdUSClcbiAgICApXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5mdW5jdGlvbiBhc2NpaVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcbiAgdmFyIHJldCA9ICcnXG4gIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcblxuICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xuICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBsYXRpbjFTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciByZXQgPSAnJ1xuICBlbmQgPSBNYXRoLm1pbihidWYubGVuZ3RoLCBlbmQpXG5cbiAgZm9yICh2YXIgaSA9IHN0YXJ0OyBpIDwgZW5kOyArK2kpIHtcbiAgICByZXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShidWZbaV0pXG4gIH1cbiAgcmV0dXJuIHJldFxufVxuXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBsZW4gPSBidWYubGVuZ3RoXG5cbiAgaWYgKCFzdGFydCB8fCBzdGFydCA8IDApIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCB8fCBlbmQgPCAwIHx8IGVuZCA+IGxlbikgZW5kID0gbGVuXG5cbiAgdmFyIG91dCA9ICcnXG4gIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcbiAgfVxuICByZXR1cm4gb3V0XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XG4gIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxuICB2YXIgcmVzID0gJydcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBieXRlcy5sZW5ndGg7IGkgKz0gMikge1xuICAgIHJlcyArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ5dGVzW2ldICsgKGJ5dGVzW2kgKyAxXSAqIDI1NikpXG4gIH1cbiAgcmV0dXJuIHJlc1xufVxuXG5CdWZmZXIucHJvdG90eXBlLnNsaWNlID0gZnVuY3Rpb24gc2xpY2UgKHN0YXJ0LCBlbmQpIHtcbiAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXG4gIHN0YXJ0ID0gfn5zdGFydFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IGxlbiA6IH5+ZW5kXG5cbiAgaWYgKHN0YXJ0IDwgMCkge1xuICAgIHN0YXJ0ICs9IGxlblxuICAgIGlmIChzdGFydCA8IDApIHN0YXJ0ID0gMFxuICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XG4gICAgc3RhcnQgPSBsZW5cbiAgfVxuXG4gIGlmIChlbmQgPCAwKSB7XG4gICAgZW5kICs9IGxlblxuICAgIGlmIChlbmQgPCAwKSBlbmQgPSAwXG4gIH0gZWxzZSBpZiAoZW5kID4gbGVuKSB7XG4gICAgZW5kID0gbGVuXG4gIH1cblxuICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XG5cbiAgdmFyIG5ld0J1ZiA9IHRoaXMuc3ViYXJyYXkoc3RhcnQsIGVuZClcbiAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2VcbiAgbmV3QnVmLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcbiAgcmV0dXJuIG5ld0J1ZlxufVxuXG4vKlxuICogTmVlZCB0byBtYWtlIHN1cmUgdGhhdCBidWZmZXIgaXNuJ3QgdHJ5aW5nIHRvIHdyaXRlIG91dCBvZiBib3VuZHMuXG4gKi9cbmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7XG4gIGlmICgob2Zmc2V0ICUgMSkgIT09IDAgfHwgb2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ29mZnNldCBpcyBub3QgdWludCcpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBsZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdUcnlpbmcgdG8gYWNjZXNzIGJleW9uZCBidWZmZXIgbGVuZ3RoJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludExFID0gZnVuY3Rpb24gcmVhZFVJbnRMRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnRCRSA9IGZ1bmN0aW9uIHJlYWRVSW50QkUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuICB9XG5cbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXVxuICB2YXIgbXVsID0gMVxuICB3aGlsZSAoYnl0ZUxlbmd0aCA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdICogbXVsXG4gIH1cblxuICByZXR1cm4gdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQ4ID0gZnVuY3Rpb24gcmVhZFVJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDE2QkUgPSBmdW5jdGlvbiByZWFkVUludDE2QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiAodGhpc1tvZmZzZXRdIDw8IDgpIHwgdGhpc1tvZmZzZXQgKyAxXVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRVSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKCh0aGlzW29mZnNldF0pIHxcbiAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcbiAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSkgK1xuICAgICAgKHRoaXNbb2Zmc2V0ICsgM10gKiAweDEwMDAwMDApXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkJFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdICogMHgxMDAwMDAwKSArXG4gICAgKCh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgIHRoaXNbb2Zmc2V0ICsgM10pXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludExFID0gZnVuY3Rpb24gcmVhZEludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxuXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF1cbiAgdmFyIG11bCA9IDFcbiAgdmFyIGkgPSAwXG4gIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgaV0gKiBtdWxcbiAgfVxuICBtdWwgKj0gMHg4MFxuXG4gIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXG5cbiAgcmV0dXJuIHZhbFxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcblxuICB2YXIgaSA9IGJ5dGVMZW5ndGhcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgLS1pXVxuICB3aGlsZSAoaSA+IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyAtLWldICogbXVsXG4gIH1cbiAgbXVsICo9IDB4ODBcblxuICBpZiAodmFsID49IG11bCkgdmFsIC09IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKVxuXG4gIHJldHVybiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50OCA9IGZ1bmN0aW9uIHJlYWRJbnQ4IChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDEsIHRoaXMubGVuZ3RoKVxuICBpZiAoISh0aGlzW29mZnNldF0gJiAweDgwKSkgcmV0dXJuICh0aGlzW29mZnNldF0pXG4gIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXG4gIHZhciB2YWwgPSB0aGlzW29mZnNldF0gfCAodGhpc1tvZmZzZXQgKyAxXSA8PCA4KVxuICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDE2QkUgPSBmdW5jdGlvbiByZWFkSW50MTZCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAyLCB0aGlzLmxlbmd0aClcbiAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXG4gIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MzJMRSA9IGZ1bmN0aW9uIHJlYWRJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuXG4gIHJldHVybiAodGhpc1tvZmZzZXRdKSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDJdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgM10gPDwgMjQpXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyQkUgPSBmdW5jdGlvbiByZWFkSW50MzJCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcblxuICByZXR1cm4gKHRoaXNbb2Zmc2V0XSA8PCAyNCkgfFxuICAgICh0aGlzW29mZnNldCArIDFdIDw8IDE2KSB8XG4gICAgKHRoaXNbb2Zmc2V0ICsgMl0gPDwgOCkgfFxuICAgICh0aGlzW29mZnNldCArIDNdKVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdExFID0gZnVuY3Rpb24gcmVhZEZsb2F0TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXG4gIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCAyMywgNClcbn1cblxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRCRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdEJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxuICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDUyLCA4KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVCRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVCRSAob2Zmc2V0LCBub0Fzc2VydCkge1xuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcbiAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIGZhbHNlLCA1MiwgOClcbn1cblxuZnVuY3Rpb24gY2hlY2tJbnQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgZXh0LCBtYXgsIG1pbikge1xuICBpZiAoIUJ1ZmZlci5pc0J1ZmZlcihidWYpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImJ1ZmZlclwiIGFyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXIgaW5zdGFuY2UnKVxuICBpZiAodmFsdWUgPiBtYXggfHwgdmFsdWUgPCBtaW4pIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgaXMgb3V0IG9mIGJvdW5kcycpXG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkge1xuICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcbiAgfVxuXG4gIHZhciBtdWwgPSAxXG4gIHZhciBpID0gMFxuICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICB0aGlzW29mZnNldCArIGldID0gKHZhbHVlIC8gbXVsKSAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVVSW50QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnRCRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbWF4Qnl0ZXMgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCkgLSAxXG4gICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbWF4Qnl0ZXMsIDApXG4gIH1cblxuICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXG4gIHZhciBtdWwgPSAxXG4gIHRoaXNbb2Zmc2V0ICsgaV0gPSB2YWx1ZSAmIDB4RkZcbiAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDggPSBmdW5jdGlvbiB3cml0ZVVJbnQ4ICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHhmZiwgMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDJcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgPj4+IDI0KVxuICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4ZmZmZmZmZmYsIDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDE2KVxuICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldCArIDNdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludExFID0gZnVuY3Rpb24gd3JpdGVJbnRMRSAodmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCAoOCAqIGJ5dGVMZW5ndGgpIC0gMSlcblxuICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxuICB9XG5cbiAgdmFyIGkgPSAwXG4gIHZhciBtdWwgPSAxXG4gIHZhciBzdWIgPSAwXG4gIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xuICAgIGlmICh2YWx1ZSA8IDAgJiYgc3ViID09PSAwICYmIHRoaXNbb2Zmc2V0ICsgaSAtIDFdICE9PSAwKSB7XG4gICAgICBzdWIgPSAxXG4gICAgfVxuICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcbiAgfVxuXG4gIHJldHVybiBvZmZzZXQgKyBieXRlTGVuZ3RoXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlSW50QkUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgdmFyIGxpbWl0ID0gTWF0aC5wb3coMiwgKDggKiBieXRlTGVuZ3RoKSAtIDEpXG5cbiAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBsaW1pdCAtIDEsIC1saW1pdClcbiAgfVxuXG4gIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcbiAgdmFyIG11bCA9IDFcbiAgdmFyIHN1YiA9IDBcbiAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxuICB3aGlsZSAoLS1pID49IDAgJiYgKG11bCAqPSAweDEwMCkpIHtcbiAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgKyAxXSAhPT0gMCkge1xuICAgICAgc3ViID0gMVxuICAgIH1cbiAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXG4gIH1cblxuICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50OCA9IGZ1bmN0aW9uIHdyaXRlSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDEsIDB4N2YsIC0weDgwKVxuICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcbiAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcbiAgcmV0dXJuIG9mZnNldCArIDFcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDE2TEUgPSBmdW5jdGlvbiB3cml0ZUludDE2TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXG4gIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXG4gIHJldHVybiBvZmZzZXQgKyAyXG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQxNkJFID0gZnVuY3Rpb24gd3JpdGVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMiwgMHg3ZmZmLCAtMHg4MDAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXG4gIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgJiAweGZmKVxuICByZXR1cm4gb2Zmc2V0ICsgMlxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDQsIDB4N2ZmZmZmZmYsIC0weDgwMDAwMDAwKVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiA4KVxuICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiAxNilcbiAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVJbnQzMkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICB2YWx1ZSA9ICt2YWx1ZVxuICBvZmZzZXQgPSBvZmZzZXQgPj4+IDBcbiAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXG4gIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxuICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDI0KVxuICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcbiAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gOClcbiAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSAmIDB4ZmYpXG4gIHJldHVybiBvZmZzZXQgKyA0XG59XG5cbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XG4gIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcbiAgaWYgKG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxufVxuXG5mdW5jdGlvbiB3cml0ZUZsb2F0IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgbm9Bc3NlcnQpIHtcbiAgdmFsdWUgPSArdmFsdWVcbiAgb2Zmc2V0ID0gb2Zmc2V0ID4+PiAwXG4gIGlmICghbm9Bc3NlcnQpIHtcbiAgICBjaGVja0lFRUU3NTQoYnVmLCB2YWx1ZSwgb2Zmc2V0LCA0LCAzLjQwMjgyMzQ2NjM4NTI4ODZlKzM4LCAtMy40MDI4MjM0NjYzODUyODg2ZSszOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCAyMywgNClcbiAgcmV0dXJuIG9mZnNldCArIDRcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUZsb2F0TEUgPSBmdW5jdGlvbiB3cml0ZUZsb2F0TEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XG4gIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRmxvYXQodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG5mdW5jdGlvbiB3cml0ZURvdWJsZSAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4sIG5vQXNzZXJ0KSB7XG4gIHZhbHVlID0gK3ZhbHVlXG4gIG9mZnNldCA9IG9mZnNldCA+Pj4gMFxuICBpZiAoIW5vQXNzZXJ0KSB7XG4gICAgY2hlY2tJRUVFNzU0KGJ1ZiwgdmFsdWUsIG9mZnNldCwgOCwgMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgsIC0xLjc5NzY5MzEzNDg2MjMxNTdFKzMwOClcbiAgfVxuICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcbiAgcmV0dXJuIG9mZnNldCArIDhcbn1cblxuQnVmZmVyLnByb3RvdHlwZS53cml0ZURvdWJsZUxFID0gZnVuY3Rpb24gd3JpdGVEb3VibGVMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcbiAgcmV0dXJuIHdyaXRlRG91YmxlKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxufVxuXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRG91YmxlQkUgPSBmdW5jdGlvbiB3cml0ZURvdWJsZUJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xuICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxufVxuXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXG5CdWZmZXIucHJvdG90eXBlLmNvcHkgPSBmdW5jdGlvbiBjb3B5ICh0YXJnZXQsIHRhcmdldFN0YXJ0LCBzdGFydCwgZW5kKSB7XG4gIGlmICghQnVmZmVyLmlzQnVmZmVyKHRhcmdldCkpIHRocm93IG5ldyBUeXBlRXJyb3IoJ2FyZ3VtZW50IHNob3VsZCBiZSBhIEJ1ZmZlcicpXG4gIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxuICBpZiAoIWVuZCAmJiBlbmQgIT09IDApIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXRTdGFydCA+PSB0YXJnZXQubGVuZ3RoKSB0YXJnZXRTdGFydCA9IHRhcmdldC5sZW5ndGhcbiAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXG4gIGlmIChlbmQgPiAwICYmIGVuZCA8IHN0YXJ0KSBlbmQgPSBzdGFydFxuXG4gIC8vIENvcHkgMCBieXRlczsgd2UncmUgZG9uZVxuICBpZiAoZW5kID09PSBzdGFydCkgcmV0dXJuIDBcbiAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXG5cbiAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xuICBpZiAodGFyZ2V0U3RhcnQgPCAwKSB7XG4gICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3RhcmdldFN0YXJ0IG91dCBvZiBib3VuZHMnKVxuICB9XG4gIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdJbmRleCBvdXQgb2YgcmFuZ2UnKVxuICBpZiAoZW5kIDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ3NvdXJjZUVuZCBvdXQgb2YgYm91bmRzJylcblxuICAvLyBBcmUgd2Ugb29iP1xuICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXG4gIGlmICh0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgPCBlbmQgLSBzdGFydCkge1xuICAgIGVuZCA9IHRhcmdldC5sZW5ndGggLSB0YXJnZXRTdGFydCArIHN0YXJ0XG4gIH1cblxuICB2YXIgbGVuID0gZW5kIC0gc3RhcnRcblxuICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5jb3B5V2l0aGluID09PSAnZnVuY3Rpb24nKSB7XG4gICAgLy8gVXNlIGJ1aWx0LWluIHdoZW4gYXZhaWxhYmxlLCBtaXNzaW5nIGZyb20gSUUxMVxuICAgIHRoaXMuY29weVdpdGhpbih0YXJnZXRTdGFydCwgc3RhcnQsIGVuZClcbiAgfSBlbHNlIGlmICh0aGlzID09PSB0YXJnZXQgJiYgc3RhcnQgPCB0YXJnZXRTdGFydCAmJiB0YXJnZXRTdGFydCA8IGVuZCkge1xuICAgIC8vIGRlc2NlbmRpbmcgY29weSBmcm9tIGVuZFxuICAgIGZvciAodmFyIGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkge1xuICAgICAgdGFyZ2V0W2kgKyB0YXJnZXRTdGFydF0gPSB0aGlzW2kgKyBzdGFydF1cbiAgICB9XG4gIH0gZWxzZSB7XG4gICAgVWludDhBcnJheS5wcm90b3R5cGUuc2V0LmNhbGwoXG4gICAgICB0YXJnZXQsXG4gICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBlbmQpLFxuICAgICAgdGFyZ2V0U3RhcnRcbiAgICApXG4gIH1cblxuICByZXR1cm4gbGVuXG59XG5cbi8vIFVzYWdlOlxuLy8gICAgYnVmZmVyLmZpbGwobnVtYmVyWywgb2Zmc2V0WywgZW5kXV0pXG4vLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcbi8vICAgIGJ1ZmZlci5maWxsKHN0cmluZ1ssIG9mZnNldFssIGVuZF1dWywgZW5jb2RpbmddKVxuQnVmZmVyLnByb3RvdHlwZS5maWxsID0gZnVuY3Rpb24gZmlsbCAodmFsLCBzdGFydCwgZW5kLCBlbmNvZGluZykge1xuICAvLyBIYW5kbGUgc3RyaW5nIGNhc2VzOlxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcbiAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xuICAgICAgZW5jb2RpbmcgPSBzdGFydFxuICAgICAgc3RhcnQgPSAwXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcbiAgICAgIGVuY29kaW5nID0gZW5kXG4gICAgICBlbmQgPSB0aGlzLmxlbmd0aFxuICAgIH1cbiAgICBpZiAoZW5jb2RpbmcgIT09IHVuZGVmaW5lZCAmJiB0eXBlb2YgZW5jb2RpbmcgIT09ICdzdHJpbmcnKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdlbmNvZGluZyBtdXN0IGJlIGEgc3RyaW5nJylcbiAgICB9XG4gICAgaWYgKHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZycgJiYgIUJ1ZmZlci5pc0VuY29kaW5nKGVuY29kaW5nKSkge1xuICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxuICAgIH1cbiAgICBpZiAodmFsLmxlbmd0aCA9PT0gMSkge1xuICAgICAgdmFyIGNvZGUgPSB2YWwuY2hhckNvZGVBdCgwKVxuICAgICAgaWYgKChlbmNvZGluZyA9PT0gJ3V0ZjgnICYmIGNvZGUgPCAxMjgpIHx8XG4gICAgICAgICAgZW5jb2RpbmcgPT09ICdsYXRpbjEnKSB7XG4gICAgICAgIC8vIEZhc3QgcGF0aDogSWYgYHZhbGAgZml0cyBpbnRvIGEgc2luZ2xlIGJ5dGUsIHVzZSB0aGF0IG51bWVyaWMgdmFsdWUuXG4gICAgICAgIHZhbCA9IGNvZGVcbiAgICAgIH1cbiAgICB9XG4gIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICB2YWwgPSB2YWwgJiAyNTVcbiAgfVxuXG4gIC8vIEludmFsaWQgcmFuZ2VzIGFyZSBub3Qgc2V0IHRvIGEgZGVmYXVsdCwgc28gY2FuIHJhbmdlIGNoZWNrIGVhcmx5LlxuICBpZiAoc3RhcnQgPCAwIHx8IHRoaXMubGVuZ3RoIDwgc3RhcnQgfHwgdGhpcy5sZW5ndGggPCBlbmQpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignT3V0IG9mIHJhbmdlIGluZGV4JylcbiAgfVxuXG4gIGlmIChlbmQgPD0gc3RhcnQpIHtcbiAgICByZXR1cm4gdGhpc1xuICB9XG5cbiAgc3RhcnQgPSBzdGFydCA+Pj4gMFxuICBlbmQgPSBlbmQgPT09IHVuZGVmaW5lZCA/IHRoaXMubGVuZ3RoIDogZW5kID4+PiAwXG5cbiAgaWYgKCF2YWwpIHZhbCA9IDBcblxuICB2YXIgaVxuICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcbiAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XG4gICAgICB0aGlzW2ldID0gdmFsXG4gICAgfVxuICB9IGVsc2Uge1xuICAgIHZhciBieXRlcyA9IEJ1ZmZlci5pc0J1ZmZlcih2YWwpXG4gICAgICA/IHZhbFxuICAgICAgOiBCdWZmZXIuZnJvbSh2YWwsIGVuY29kaW5nKVxuICAgIHZhciBsZW4gPSBieXRlcy5sZW5ndGhcbiAgICBpZiAobGVuID09PSAwKSB7XG4gICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdUaGUgdmFsdWUgXCInICsgdmFsICtcbiAgICAgICAgJ1wiIGlzIGludmFsaWQgZm9yIGFyZ3VtZW50IFwidmFsdWVcIicpXG4gICAgfVxuICAgIGZvciAoaSA9IDA7IGkgPCBlbmQgLSBzdGFydDsgKytpKSB7XG4gICAgICB0aGlzW2kgKyBzdGFydF0gPSBieXRlc1tpICUgbGVuXVxuICAgIH1cbiAgfVxuXG4gIHJldHVybiB0aGlzXG59XG5cbi8vIEhFTFBFUiBGVU5DVElPTlNcbi8vID09PT09PT09PT09PT09PT1cblxudmFyIElOVkFMSURfQkFTRTY0X1JFID0gL1teKy8wLTlBLVphLXotX10vZ1xuXG5mdW5jdGlvbiBiYXNlNjRjbGVhbiAoc3RyKSB7XG4gIC8vIE5vZGUgdGFrZXMgZXF1YWwgc2lnbnMgYXMgZW5kIG9mIHRoZSBCYXNlNjQgZW5jb2RpbmdcbiAgc3RyID0gc3RyLnNwbGl0KCc9JylbMF1cbiAgLy8gTm9kZSBzdHJpcHMgb3V0IGludmFsaWQgY2hhcmFjdGVycyBsaWtlIFxcbiBhbmQgXFx0IGZyb20gdGhlIHN0cmluZywgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHN0ciA9IHN0ci50cmltKCkucmVwbGFjZShJTlZBTElEX0JBU0U2NF9SRSwgJycpXG4gIC8vIE5vZGUgY29udmVydHMgc3RyaW5ncyB3aXRoIGxlbmd0aCA8IDIgdG8gJydcbiAgaWYgKHN0ci5sZW5ndGggPCAyKSByZXR1cm4gJydcbiAgLy8gTm9kZSBhbGxvd3MgZm9yIG5vbi1wYWRkZWQgYmFzZTY0IHN0cmluZ3MgKG1pc3NpbmcgdHJhaWxpbmcgPT09KSwgYmFzZTY0LWpzIGRvZXMgbm90XG4gIHdoaWxlIChzdHIubGVuZ3RoICUgNCAhPT0gMCkge1xuICAgIHN0ciA9IHN0ciArICc9J1xuICB9XG4gIHJldHVybiBzdHJcbn1cblxuZnVuY3Rpb24gdG9IZXggKG4pIHtcbiAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXG4gIHJldHVybiBuLnRvU3RyaW5nKDE2KVxufVxuXG5mdW5jdGlvbiB1dGY4VG9CeXRlcyAoc3RyaW5nLCB1bml0cykge1xuICB1bml0cyA9IHVuaXRzIHx8IEluZmluaXR5XG4gIHZhciBjb2RlUG9pbnRcbiAgdmFyIGxlbmd0aCA9IHN0cmluZy5sZW5ndGhcbiAgdmFyIGxlYWRTdXJyb2dhdGUgPSBudWxsXG4gIHZhciBieXRlcyA9IFtdXG5cbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXG5cbiAgICAvLyBpcyBzdXJyb2dhdGUgY29tcG9uZW50XG4gICAgaWYgKGNvZGVQb2ludCA+IDB4RDdGRiAmJiBjb2RlUG9pbnQgPCAweEUwMDApIHtcbiAgICAgIC8vIGxhc3QgY2hhciB3YXMgYSBsZWFkXG4gICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcbiAgICAgICAgLy8gbm8gbGVhZCB5ZXRcbiAgICAgICAgaWYgKGNvZGVQb2ludCA+IDB4REJGRikge1xuICAgICAgICAgIC8vIHVuZXhwZWN0ZWQgdHJhaWxcbiAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcbiAgICAgICAgICBjb250aW51ZVxuICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcbiAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXG4gICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgICAgY29udGludWVcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIHZhbGlkIGxlYWRcbiAgICAgICAgbGVhZFN1cnJvZ2F0ZSA9IGNvZGVQb2ludFxuXG4gICAgICAgIGNvbnRpbnVlXG4gICAgICB9XG5cbiAgICAgIC8vIDIgbGVhZHMgaW4gYSByb3dcbiAgICAgIGlmIChjb2RlUG9pbnQgPCAweERDMDApIHtcbiAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcbiAgICAgICAgY29udGludWVcbiAgICAgIH1cblxuICAgICAgLy8gdmFsaWQgc3Vycm9nYXRlIHBhaXJcbiAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcbiAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcbiAgICAgIC8vIHZhbGlkIGJtcCBjaGFyLCBidXQgbGFzdCBjaGFyIHdhcyBhIGxlYWRcbiAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxuICAgIH1cblxuICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXG5cbiAgICAvLyBlbmNvZGUgdXRmOFxuICAgIGlmIChjb2RlUG9pbnQgPCAweDgwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDEpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxuICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcbiAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xuICAgICAgYnl0ZXMucHVzaChcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiB8IDB4QzAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDEwMDAwKSB7XG4gICAgICBpZiAoKHVuaXRzIC09IDMpIDwgMCkgYnJlYWtcbiAgICAgIGJ5dGVzLnB1c2goXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgfCAweEUwLFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHg2ICYgMHgzRiB8IDB4ODAsXG4gICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXG4gICAgICApXG4gICAgfSBlbHNlIGlmIChjb2RlUG9pbnQgPCAweDExMDAwMCkge1xuICAgICAgaWYgKCh1bml0cyAtPSA0KSA8IDApIGJyZWFrXG4gICAgICBieXRlcy5wdXNoKFxuICAgICAgICBjb2RlUG9pbnQgPj4gMHgxMiB8IDB4RjAsXG4gICAgICAgIGNvZGVQb2ludCA+PiAweEMgJiAweDNGIHwgMHg4MCxcbiAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxuICAgICAgICBjb2RlUG9pbnQgJiAweDNGIHwgMHg4MFxuICAgICAgKVxuICAgIH0gZWxzZSB7XG4gICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgY29kZSBwb2ludCcpXG4gICAgfVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVzXG59XG5cbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XG4gIHZhciBieXRlQXJyYXkgPSBbXVxuICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xuICAgIC8vIE5vZGUncyBjb2RlIHNlZW1zIHRvIGJlIGRvaW5nIHRoaXMgYW5kIG5vdCAmIDB4N0YuLlxuICAgIGJ5dGVBcnJheS5wdXNoKHN0ci5jaGFyQ29kZUF0KGkpICYgMHhGRilcbiAgfVxuICByZXR1cm4gYnl0ZUFycmF5XG59XG5cbmZ1bmN0aW9uIHV0ZjE2bGVUb0J5dGVzIChzdHIsIHVuaXRzKSB7XG4gIHZhciBjLCBoaSwgbG9cbiAgdmFyIGJ5dGVBcnJheSA9IFtdXG4gIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XG4gICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXG5cbiAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcbiAgICBoaSA9IGMgPj4gOFxuICAgIGxvID0gYyAlIDI1NlxuICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxuICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxuICB9XG5cbiAgcmV0dXJuIGJ5dGVBcnJheVxufVxuXG5mdW5jdGlvbiBiYXNlNjRUb0J5dGVzIChzdHIpIHtcbiAgcmV0dXJuIGJhc2U2NC50b0J5dGVBcnJheShiYXNlNjRjbGVhbihzdHIpKVxufVxuXG5mdW5jdGlvbiBibGl0QnVmZmVyIChzcmMsIGRzdCwgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xuICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcbiAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cbiAgfVxuICByZXR1cm4gaVxufVxuXG4vLyBBcnJheUJ1ZmZlciBvciBVaW50OEFycmF5IG9iamVjdHMgZnJvbSBvdGhlciBjb250ZXh0cyAoaS5lLiBpZnJhbWVzKSBkbyBub3QgcGFzc1xuLy8gdGhlIGBpbnN0YW5jZW9mYCBjaGVjayBidXQgdGhleSBzaG91bGQgYmUgdHJlYXRlZCBhcyBvZiB0aGF0IHR5cGUuXG4vLyBTZWU6IGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyL2lzc3Vlcy8xNjZcbmZ1bmN0aW9uIGlzSW5zdGFuY2UgKG9iaiwgdHlwZSkge1xuICByZXR1cm4gb2JqIGluc3RhbmNlb2YgdHlwZSB8fFxuICAgIChvYmogIT0gbnVsbCAmJiBvYmouY29uc3RydWN0b3IgIT0gbnVsbCAmJiBvYmouY29uc3RydWN0b3IubmFtZSAhPSBudWxsICYmXG4gICAgICBvYmouY29uc3RydWN0b3IubmFtZSA9PT0gdHlwZS5uYW1lKVxufVxuZnVuY3Rpb24gbnVtYmVySXNOYU4gKG9iaikge1xuICAvLyBGb3IgSUUxMSBzdXBwb3J0XG4gIHJldHVybiBvYmogIT09IG9iaiAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxufVxuIiwiLyohIGllZWU3NTQuIEJTRC0zLUNsYXVzZSBMaWNlbnNlLiBGZXJvc3MgQWJvdWtoYWRpamVoIDxodHRwczovL2Zlcm9zcy5vcmcvb3BlbnNvdXJjZT4gKi9cbmV4cG9ydHMucmVhZCA9IGZ1bmN0aW9uIChidWZmZXIsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtXG4gIHZhciBlTGVuID0gKG5CeXRlcyAqIDgpIC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gKGUgKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgbSA9IGUgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgZSA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gbUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBtID0gKG0gKiAyNTYpICsgYnVmZmVyW29mZnNldCArIGldLCBpICs9IGQsIG5CaXRzIC09IDgpIHt9XG5cbiAgaWYgKGUgPT09IDApIHtcbiAgICBlID0gMSAtIGVCaWFzXG4gIH0gZWxzZSBpZiAoZSA9PT0gZU1heCkge1xuICAgIHJldHVybiBtID8gTmFOIDogKChzID8gLTEgOiAxKSAqIEluZmluaXR5KVxuICB9IGVsc2Uge1xuICAgIG0gPSBtICsgTWF0aC5wb3coMiwgbUxlbilcbiAgICBlID0gZSAtIGVCaWFzXG4gIH1cbiAgcmV0dXJuIChzID8gLTEgOiAxKSAqIG0gKiBNYXRoLnBvdygyLCBlIC0gbUxlbilcbn1cblxuZXhwb3J0cy53cml0ZSA9IGZ1bmN0aW9uIChidWZmZXIsIHZhbHVlLCBvZmZzZXQsIGlzTEUsIG1MZW4sIG5CeXRlcykge1xuICB2YXIgZSwgbSwgY1xuICB2YXIgZUxlbiA9IChuQnl0ZXMgKiA4KSAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAoKHZhbHVlICogYykgLSAxKSAqIE1hdGgucG93KDIsIG1MZW4pXG4gICAgICBlID0gZSArIGVCaWFzXG4gICAgfSBlbHNlIHtcbiAgICAgIG0gPSB2YWx1ZSAqIE1hdGgucG93KDIsIGVCaWFzIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IDBcbiAgICB9XG4gIH1cblxuICBmb3IgKDsgbUxlbiA+PSA4OyBidWZmZXJbb2Zmc2V0ICsgaV0gPSBtICYgMHhmZiwgaSArPSBkLCBtIC89IDI1NiwgbUxlbiAtPSA4KSB7fVxuXG4gIGUgPSAoZSA8PCBtTGVuKSB8IG1cbiAgZUxlbiArPSBtTGVuXG4gIGZvciAoOyBlTGVuID4gMDsgYnVmZmVyW29mZnNldCArIGldID0gZSAmIDB4ZmYsIGkgKz0gZCwgZSAvPSAyNTYsIGVMZW4gLT0gOCkge31cblxuICBidWZmZXJbb2Zmc2V0ICsgaSAtIGRdIHw9IHMgKiAxMjhcbn1cbiIsIi8vIHNoaW0gZm9yIHVzaW5nIHByb2Nlc3MgaW4gYnJvd3NlclxudmFyIHByb2Nlc3MgPSBtb2R1bGUuZXhwb3J0cyA9IHt9O1xuXG4vLyBjYWNoZWQgZnJvbSB3aGF0ZXZlciBnbG9iYWwgaXMgcHJlc2VudCBzbyB0aGF0IHRlc3QgcnVubmVycyB0aGF0IHN0dWIgaXRcbi8vIGRvbid0IGJyZWFrIHRoaW5ncy4gIEJ1dCB3ZSBuZWVkIHRvIHdyYXAgaXQgaW4gYSB0cnkgY2F0Y2ggaW4gY2FzZSBpdCBpc1xuLy8gd3JhcHBlZCBpbiBzdHJpY3QgbW9kZSBjb2RlIHdoaWNoIGRvZXNuJ3QgZGVmaW5lIGFueSBnbG9iYWxzLiAgSXQncyBpbnNpZGUgYVxuLy8gZnVuY3Rpb24gYmVjYXVzZSB0cnkvY2F0Y2hlcyBkZW9wdGltaXplIGluIGNlcnRhaW4gZW5naW5lcy5cblxudmFyIGNhY2hlZFNldFRpbWVvdXQ7XG52YXIgY2FjaGVkQ2xlYXJUaW1lb3V0O1xuXG5mdW5jdGlvbiBkZWZhdWx0U2V0VGltb3V0KCkge1xuICAgIHRocm93IG5ldyBFcnJvcignc2V0VGltZW91dCBoYXMgbm90IGJlZW4gZGVmaW5lZCcpO1xufVxuZnVuY3Rpb24gZGVmYXVsdENsZWFyVGltZW91dCAoKSB7XG4gICAgdGhyb3cgbmV3IEVycm9yKCdjbGVhclRpbWVvdXQgaGFzIG5vdCBiZWVuIGRlZmluZWQnKTtcbn1cbihmdW5jdGlvbiAoKSB7XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBzZXRUaW1lb3V0ID09PSAnZnVuY3Rpb24nKSB7XG4gICAgICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gc2V0VGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBkZWZhdWx0U2V0VGltb3V0O1xuICAgICAgICB9XG4gICAgfSBjYXRjaCAoZSkge1xuICAgICAgICBjYWNoZWRTZXRUaW1lb3V0ID0gZGVmYXVsdFNldFRpbW91dDtcbiAgICB9XG4gICAgdHJ5IHtcbiAgICAgICAgaWYgKHR5cGVvZiBjbGVhclRpbWVvdXQgPT09ICdmdW5jdGlvbicpIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGNsZWFyVGltZW91dDtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgICAgIH1cbiAgICB9IGNhdGNoIChlKSB7XG4gICAgICAgIGNhY2hlZENsZWFyVGltZW91dCA9IGRlZmF1bHRDbGVhclRpbWVvdXQ7XG4gICAgfVxufSAoKSlcbmZ1bmN0aW9uIHJ1blRpbWVvdXQoZnVuKSB7XG4gICAgaWYgKGNhY2hlZFNldFRpbWVvdXQgPT09IHNldFRpbWVvdXQpIHtcbiAgICAgICAgLy9ub3JtYWwgZW52aXJvbWVudHMgaW4gc2FuZSBzaXR1YXRpb25zXG4gICAgICAgIHJldHVybiBzZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfVxuICAgIC8vIGlmIHNldFRpbWVvdXQgd2Fzbid0IGF2YWlsYWJsZSBidXQgd2FzIGxhdHRlciBkZWZpbmVkXG4gICAgaWYgKChjYWNoZWRTZXRUaW1lb3V0ID09PSBkZWZhdWx0U2V0VGltb3V0IHx8ICFjYWNoZWRTZXRUaW1lb3V0KSAmJiBzZXRUaW1lb3V0KSB7XG4gICAgICAgIGNhY2hlZFNldFRpbWVvdXQgPSBzZXRUaW1lb3V0O1xuICAgICAgICByZXR1cm4gc2V0VGltZW91dChmdW4sIDApO1xuICAgIH1cbiAgICB0cnkge1xuICAgICAgICAvLyB3aGVuIHdoZW4gc29tZWJvZHkgaGFzIHNjcmV3ZWQgd2l0aCBzZXRUaW1lb3V0IGJ1dCBubyBJLkUuIG1hZGRuZXNzXG4gICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0KGZ1biwgMCk7XG4gICAgfSBjYXRjaChlKXtcbiAgICAgICAgdHJ5IHtcbiAgICAgICAgICAgIC8vIFdoZW4gd2UgYXJlIGluIEkuRS4gYnV0IHRoZSBzY3JpcHQgaGFzIGJlZW4gZXZhbGVkIHNvIEkuRS4gZG9lc24ndCB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZFNldFRpbWVvdXQuY2FsbChudWxsLCBmdW4sIDApO1xuICAgICAgICB9IGNhdGNoKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3JcbiAgICAgICAgICAgIHJldHVybiBjYWNoZWRTZXRUaW1lb3V0LmNhbGwodGhpcywgZnVuLCAwKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG59XG5mdW5jdGlvbiBydW5DbGVhclRpbWVvdXQobWFya2VyKSB7XG4gICAgaWYgKGNhY2hlZENsZWFyVGltZW91dCA9PT0gY2xlYXJUaW1lb3V0KSB7XG4gICAgICAgIC8vbm9ybWFsIGVudmlyb21lbnRzIGluIHNhbmUgc2l0dWF0aW9uc1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIC8vIGlmIGNsZWFyVGltZW91dCB3YXNuJ3QgYXZhaWxhYmxlIGJ1dCB3YXMgbGF0dGVyIGRlZmluZWRcbiAgICBpZiAoKGNhY2hlZENsZWFyVGltZW91dCA9PT0gZGVmYXVsdENsZWFyVGltZW91dCB8fCAhY2FjaGVkQ2xlYXJUaW1lb3V0KSAmJiBjbGVhclRpbWVvdXQpIHtcbiAgICAgICAgY2FjaGVkQ2xlYXJUaW1lb3V0ID0gY2xlYXJUaW1lb3V0O1xuICAgICAgICByZXR1cm4gY2xlYXJUaW1lb3V0KG1hcmtlcik7XG4gICAgfVxuICAgIHRyeSB7XG4gICAgICAgIC8vIHdoZW4gd2hlbiBzb21lYm9keSBoYXMgc2NyZXdlZCB3aXRoIHNldFRpbWVvdXQgYnV0IG5vIEkuRS4gbWFkZG5lc3NcbiAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dChtYXJrZXIpO1xuICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICB0cnkge1xuICAgICAgICAgICAgLy8gV2hlbiB3ZSBhcmUgaW4gSS5FLiBidXQgdGhlIHNjcmlwdCBoYXMgYmVlbiBldmFsZWQgc28gSS5FLiBkb2Vzbid0ICB0cnVzdCB0aGUgZ2xvYmFsIG9iamVjdCB3aGVuIGNhbGxlZCBub3JtYWxseVxuICAgICAgICAgICAgcmV0dXJuIGNhY2hlZENsZWFyVGltZW91dC5jYWxsKG51bGwsIG1hcmtlcik7XG4gICAgICAgIH0gY2F0Y2ggKGUpe1xuICAgICAgICAgICAgLy8gc2FtZSBhcyBhYm92ZSBidXQgd2hlbiBpdCdzIGEgdmVyc2lvbiBvZiBJLkUuIHRoYXQgbXVzdCBoYXZlIHRoZSBnbG9iYWwgb2JqZWN0IGZvciAndGhpcycsIGhvcGZ1bGx5IG91ciBjb250ZXh0IGNvcnJlY3Qgb3RoZXJ3aXNlIGl0IHdpbGwgdGhyb3cgYSBnbG9iYWwgZXJyb3IuXG4gICAgICAgICAgICAvLyBTb21lIHZlcnNpb25zIG9mIEkuRS4gaGF2ZSBkaWZmZXJlbnQgcnVsZXMgZm9yIGNsZWFyVGltZW91dCB2cyBzZXRUaW1lb3V0XG4gICAgICAgICAgICByZXR1cm4gY2FjaGVkQ2xlYXJUaW1lb3V0LmNhbGwodGhpcywgbWFya2VyKTtcbiAgICAgICAgfVxuICAgIH1cblxuXG5cbn1cbnZhciBxdWV1ZSA9IFtdO1xudmFyIGRyYWluaW5nID0gZmFsc2U7XG52YXIgY3VycmVudFF1ZXVlO1xudmFyIHF1ZXVlSW5kZXggPSAtMTtcblxuZnVuY3Rpb24gY2xlYW5VcE5leHRUaWNrKCkge1xuICAgIGlmICghZHJhaW5pbmcgfHwgIWN1cnJlbnRRdWV1ZSkge1xuICAgICAgICByZXR1cm47XG4gICAgfVxuICAgIGRyYWluaW5nID0gZmFsc2U7XG4gICAgaWYgKGN1cnJlbnRRdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgcXVldWUgPSBjdXJyZW50UXVldWUuY29uY2F0KHF1ZXVlKTtcbiAgICB9IGVsc2Uge1xuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgfVxuICAgIGlmIChxdWV1ZS5sZW5ndGgpIHtcbiAgICAgICAgZHJhaW5RdWV1ZSgpO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gZHJhaW5RdWV1ZSgpIHtcbiAgICBpZiAoZHJhaW5pbmcpIHtcbiAgICAgICAgcmV0dXJuO1xuICAgIH1cbiAgICB2YXIgdGltZW91dCA9IHJ1blRpbWVvdXQoY2xlYW5VcE5leHRUaWNrKTtcbiAgICBkcmFpbmluZyA9IHRydWU7XG5cbiAgICB2YXIgbGVuID0gcXVldWUubGVuZ3RoO1xuICAgIHdoaWxlKGxlbikge1xuICAgICAgICBjdXJyZW50UXVldWUgPSBxdWV1ZTtcbiAgICAgICAgcXVldWUgPSBbXTtcbiAgICAgICAgd2hpbGUgKCsrcXVldWVJbmRleCA8IGxlbikge1xuICAgICAgICAgICAgaWYgKGN1cnJlbnRRdWV1ZSkge1xuICAgICAgICAgICAgICAgIGN1cnJlbnRRdWV1ZVtxdWV1ZUluZGV4XS5ydW4oKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICBxdWV1ZUluZGV4ID0gLTE7XG4gICAgICAgIGxlbiA9IHF1ZXVlLmxlbmd0aDtcbiAgICB9XG4gICAgY3VycmVudFF1ZXVlID0gbnVsbDtcbiAgICBkcmFpbmluZyA9IGZhbHNlO1xuICAgIHJ1bkNsZWFyVGltZW91dCh0aW1lb3V0KTtcbn1cblxucHJvY2Vzcy5uZXh0VGljayA9IGZ1bmN0aW9uIChmdW4pIHtcbiAgICB2YXIgYXJncyA9IG5ldyBBcnJheShhcmd1bWVudHMubGVuZ3RoIC0gMSk7XG4gICAgaWYgKGFyZ3VtZW50cy5sZW5ndGggPiAxKSB7XG4gICAgICAgIGZvciAodmFyIGkgPSAxOyBpIDwgYXJndW1lbnRzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcmdzW2kgLSAxXSA9IGFyZ3VtZW50c1tpXTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBxdWV1ZS5wdXNoKG5ldyBJdGVtKGZ1biwgYXJncykpO1xuICAgIGlmIChxdWV1ZS5sZW5ndGggPT09IDEgJiYgIWRyYWluaW5nKSB7XG4gICAgICAgIHJ1blRpbWVvdXQoZHJhaW5RdWV1ZSk7XG4gICAgfVxufTtcblxuLy8gdjggbGlrZXMgcHJlZGljdGlibGUgb2JqZWN0c1xuZnVuY3Rpb24gSXRlbShmdW4sIGFycmF5KSB7XG4gICAgdGhpcy5mdW4gPSBmdW47XG4gICAgdGhpcy5hcnJheSA9IGFycmF5O1xufVxuSXRlbS5wcm90b3R5cGUucnVuID0gZnVuY3Rpb24gKCkge1xuICAgIHRoaXMuZnVuLmFwcGx5KG51bGwsIHRoaXMuYXJyYXkpO1xufTtcbnByb2Nlc3MudGl0bGUgPSAnYnJvd3Nlcic7XG5wcm9jZXNzLmJyb3dzZXIgPSB0cnVlO1xucHJvY2Vzcy5lbnYgPSB7fTtcbnByb2Nlc3MuYXJndiA9IFtdO1xucHJvY2Vzcy52ZXJzaW9uID0gJyc7IC8vIGVtcHR5IHN0cmluZyB0byBhdm9pZCByZWdleHAgaXNzdWVzXG5wcm9jZXNzLnZlcnNpb25zID0ge307XG5cbmZ1bmN0aW9uIG5vb3AoKSB7fVxuXG5wcm9jZXNzLm9uID0gbm9vcDtcbnByb2Nlc3MuYWRkTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5vbmNlID0gbm9vcDtcbnByb2Nlc3Mub2ZmID0gbm9vcDtcbnByb2Nlc3MucmVtb3ZlTGlzdGVuZXIgPSBub29wO1xucHJvY2Vzcy5yZW1vdmVBbGxMaXN0ZW5lcnMgPSBub29wO1xucHJvY2Vzcy5lbWl0ID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZExpc3RlbmVyID0gbm9vcDtcbnByb2Nlc3MucHJlcGVuZE9uY2VMaXN0ZW5lciA9IG5vb3A7XG5cbnByb2Nlc3MubGlzdGVuZXJzID0gZnVuY3Rpb24gKG5hbWUpIHsgcmV0dXJuIFtdIH1cblxucHJvY2Vzcy5iaW5kaW5nID0gZnVuY3Rpb24gKG5hbWUpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuYmluZGluZyBpcyBub3Qgc3VwcG9ydGVkJyk7XG59O1xuXG5wcm9jZXNzLmN3ZCA9IGZ1bmN0aW9uICgpIHsgcmV0dXJuICcvJyB9O1xucHJvY2Vzcy5jaGRpciA9IGZ1bmN0aW9uIChkaXIpIHtcbiAgICB0aHJvdyBuZXcgRXJyb3IoJ3Byb2Nlc3MuY2hkaXIgaXMgbm90IHN1cHBvcnRlZCcpO1xufTtcbnByb2Nlc3MudW1hc2sgPSBmdW5jdGlvbigpIHsgcmV0dXJuIDA7IH07XG4iLCIvKlxyXG5CcmVha3MgYSBKYXZhc2NyaXB0IHN0cmluZyBpbnRvIGluZGl2aWR1YWwgdXNlci1wZXJjZWl2ZWQgXCJjaGFyYWN0ZXJzXCIgXHJcbmNhbGxlZCBleHRlbmRlZCBncmFwaGVtZSBjbHVzdGVycyBieSBpbXBsZW1lbnRpbmcgdGhlIFVuaWNvZGUgVUFYLTI5IHN0YW5kYXJkLCB2ZXJzaW9uIDEwLjAuMFxyXG5cclxuVXNhZ2U6XHJcbnZhciBzcGxpdHRlciA9IG5ldyBHcmFwaGVtZVNwbGl0dGVyKCk7XHJcbi8vcmV0dXJucyBhbiBhcnJheSBvZiBzdHJpbmdzLCBvbmUgc3RyaW5nIGZvciBlYWNoIGdyYXBoZW1lIGNsdXN0ZXJcclxudmFyIGdyYXBoZW1lcyA9IHNwbGl0dGVyLnNwbGl0R3JhcGhlbWVzKHN0cmluZyk7IFxyXG5cclxuKi9cclxuZnVuY3Rpb24gR3JhcGhlbWVTcGxpdHRlcigpe1xyXG5cdHZhciBDUiA9IDAsXHJcblx0XHRMRiA9IDEsXHJcblx0XHRDb250cm9sID0gMixcclxuXHRcdEV4dGVuZCA9IDMsXHJcblx0XHRSZWdpb25hbF9JbmRpY2F0b3IgPSA0LFxyXG5cdFx0U3BhY2luZ01hcmsgPSA1LFxyXG5cdFx0TCA9IDYsXHJcblx0XHRWID0gNyxcclxuXHRcdFQgPSA4LFxyXG5cdFx0TFYgPSA5LFxyXG5cdFx0TFZUID0gMTAsXHJcblx0XHRPdGhlciA9IDExLFxyXG5cdFx0UHJlcGVuZCA9IDEyLFxyXG5cdFx0RV9CYXNlID0gMTMsXHJcblx0XHRFX01vZGlmaWVyID0gMTQsXHJcblx0XHRaV0ogPSAxNSxcclxuXHRcdEdsdWVfQWZ0ZXJfWndqID0gMTYsXHJcblx0XHRFX0Jhc2VfR0FaID0gMTc7XHJcblx0XHRcclxuXHQvLyBCcmVha1R5cGVzXHJcblx0dmFyIE5vdEJyZWFrID0gMCxcclxuXHRcdEJyZWFrU3RhcnQgPSAxLFxyXG5cdFx0QnJlYWsgPSAyLFxyXG5cdFx0QnJlYWtMYXN0UmVnaW9uYWwgPSAzLFxyXG5cdFx0QnJlYWtQZW51bHRpbWF0ZVJlZ2lvbmFsID0gNDtcclxuXHRcdFxyXG5cdGZ1bmN0aW9uIGlzU3Vycm9nYXRlKHN0ciwgcG9zKSB7XHJcblx0XHRyZXR1cm4gIDB4ZDgwMCA8PSBzdHIuY2hhckNvZGVBdChwb3MpICYmIHN0ci5jaGFyQ29kZUF0KHBvcykgPD0gMHhkYmZmICYmIFxyXG5cdFx0XHRcdDB4ZGMwMCA8PSBzdHIuY2hhckNvZGVBdChwb3MgKyAxKSAmJiBzdHIuY2hhckNvZGVBdChwb3MgKyAxKSA8PSAweGRmZmY7XHJcblx0fVxyXG5cdFx0XHJcblx0Ly8gUHJpdmF0ZSBmdW5jdGlvbiwgZ2V0cyBhIFVuaWNvZGUgY29kZSBwb2ludCBmcm9tIGEgSmF2YVNjcmlwdCBVVEYtMTYgc3RyaW5nXHJcblx0Ly8gaGFuZGxpbmcgc3Vycm9nYXRlIHBhaXJzIGFwcHJvcHJpYXRlbHlcclxuXHRmdW5jdGlvbiBjb2RlUG9pbnRBdChzdHIsIGlkeCl7XHJcblx0XHRpZihpZHggPT09IHVuZGVmaW5lZCl7XHJcblx0XHRcdGlkeCA9IDA7XHJcblx0XHR9XHJcblx0XHR2YXIgY29kZSA9IHN0ci5jaGFyQ29kZUF0KGlkeCk7XHJcblxyXG5cdFx0Ly8gaWYgYSBoaWdoIHN1cnJvZ2F0ZVxyXG5cdFx0aWYgKDB4RDgwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHhEQkZGICYmIFxyXG5cdFx0XHRpZHggPCBzdHIubGVuZ3RoIC0gMSl7XHJcblx0XHRcdHZhciBoaSA9IGNvZGU7XHJcblx0XHRcdHZhciBsb3cgPSBzdHIuY2hhckNvZGVBdChpZHggKyAxKTtcclxuXHRcdFx0aWYgKDB4REMwMCA8PSBsb3cgJiYgbG93IDw9IDB4REZGRil7XHJcblx0XHRcdFx0cmV0dXJuICgoaGkgLSAweEQ4MDApICogMHg0MDApICsgKGxvdyAtIDB4REMwMCkgKyAweDEwMDAwO1xyXG5cdFx0XHR9XHJcblx0XHRcdHJldHVybiBoaTtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gaWYgYSBsb3cgc3Vycm9nYXRlXHJcblx0XHRpZiAoMHhEQzAwIDw9IGNvZGUgJiYgY29kZSA8PSAweERGRkYgJiZcclxuXHRcdFx0aWR4ID49IDEpe1xyXG5cdFx0XHR2YXIgaGkgPSBzdHIuY2hhckNvZGVBdChpZHggLSAxKTtcclxuXHRcdFx0dmFyIGxvdyA9IGNvZGU7XHJcblx0XHRcdGlmICgweEQ4MDAgPD0gaGkgJiYgaGkgPD0gMHhEQkZGKXtcclxuXHRcdFx0XHRyZXR1cm4gKChoaSAtIDB4RDgwMCkgKiAweDQwMCkgKyAobG93IC0gMHhEQzAwKSArIDB4MTAwMDA7XHJcblx0XHRcdH1cclxuXHRcdFx0cmV0dXJuIGxvdztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly9qdXN0IHJldHVybiB0aGUgY2hhciBpZiBhbiB1bm1hdGNoZWQgc3Vycm9nYXRlIGhhbGYgb3IgYSBcclxuXHRcdC8vc2luZ2xlLWNoYXIgY29kZXBvaW50XHJcblx0XHRyZXR1cm4gY29kZTtcclxuXHR9XHJcblx0XHJcblx0Ly8gUHJpdmF0ZSBmdW5jdGlvbiwgcmV0dXJucyB3aGV0aGVyIGEgYnJlYWsgaXMgYWxsb3dlZCBiZXR3ZWVuIHRoZSBcclxuXHQvLyB0d28gZ2l2ZW4gZ3JhcGhlbWUgYnJlYWtpbmcgY2xhc3Nlc1xyXG5cdGZ1bmN0aW9uIHNob3VsZEJyZWFrKHN0YXJ0LCBtaWQsIGVuZCl7XHJcblx0XHR2YXIgYWxsID0gW3N0YXJ0XS5jb25jYXQobWlkKS5jb25jYXQoW2VuZF0pO1xyXG5cdFx0dmFyIHByZXZpb3VzID0gYWxsW2FsbC5sZW5ndGggLSAyXVxyXG5cdFx0dmFyIG5leHQgPSBlbmRcclxuXHRcdFxyXG5cdFx0Ly8gTG9va2FoZWFkIHRlcm1pbnRvciBmb3I6XHJcblx0XHQvLyBHQjEwLiAoRV9CYXNlIHwgRUJHKSBFeHRlbmQqID9cdEVfTW9kaWZpZXJcclxuXHRcdHZhciBlTW9kaWZpZXJJbmRleCA9IGFsbC5sYXN0SW5kZXhPZihFX01vZGlmaWVyKVxyXG5cdFx0aWYoZU1vZGlmaWVySW5kZXggPiAxICYmXHJcblx0XHRcdGFsbC5zbGljZSgxLCBlTW9kaWZpZXJJbmRleCkuZXZlcnkoZnVuY3Rpb24oYyl7cmV0dXJuIGMgPT0gRXh0ZW5kfSkgJiZcclxuXHRcdFx0W0V4dGVuZCwgRV9CYXNlLCBFX0Jhc2VfR0FaXS5pbmRleE9mKHN0YXJ0KSA9PSAtMSl7XHJcblx0XHRcdHJldHVybiBCcmVha1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIExvb2thaGVhZCB0ZXJtaW50b3IgZm9yOlxyXG5cdFx0Ly8gR0IxMi4gXiAoUkkgUkkpKiBSSVx0P1x0UklcclxuXHRcdC8vIEdCMTMuIFteUkldIChSSSBSSSkqIFJJXHQ/XHRSSVxyXG5cdFx0dmFyIHJJSW5kZXggPSBhbGwubGFzdEluZGV4T2YoUmVnaW9uYWxfSW5kaWNhdG9yKVxyXG5cdFx0aWYocklJbmRleCA+IDAgJiZcclxuXHRcdFx0YWxsLnNsaWNlKDEsIHJJSW5kZXgpLmV2ZXJ5KGZ1bmN0aW9uKGMpe3JldHVybiBjID09IFJlZ2lvbmFsX0luZGljYXRvcn0pICYmXHJcblx0XHRcdFtQcmVwZW5kLCBSZWdpb25hbF9JbmRpY2F0b3JdLmluZGV4T2YocHJldmlvdXMpID09IC0xKSB7IFxyXG5cdFx0XHRpZihhbGwuZmlsdGVyKGZ1bmN0aW9uKGMpe3JldHVybiBjID09IFJlZ2lvbmFsX0luZGljYXRvcn0pLmxlbmd0aCAlIDIgPT0gMSkge1xyXG5cdFx0XHRcdHJldHVybiBCcmVha0xhc3RSZWdpb25hbFxyXG5cdFx0XHR9XHJcblx0XHRcdGVsc2Uge1xyXG5cdFx0XHRcdHJldHVybiBCcmVha1BlbnVsdGltYXRlUmVnaW9uYWxcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHQvLyBHQjMuIENSIFggTEZcclxuXHRcdGlmKHByZXZpb3VzID09IENSICYmIG5leHQgPT0gTEYpe1xyXG5cdFx0XHRyZXR1cm4gTm90QnJlYWs7XHJcblx0XHR9XHJcblx0XHQvLyBHQjQuIChDb250cm9sfENSfExGKSDDt1xyXG5cdFx0ZWxzZSBpZihwcmV2aW91cyA9PSBDb250cm9sIHx8IHByZXZpb3VzID09IENSIHx8IHByZXZpb3VzID09IExGKXtcclxuXHRcdFx0aWYobmV4dCA9PSBFX01vZGlmaWVyICYmIG1pZC5ldmVyeShmdW5jdGlvbihjKXtyZXR1cm4gYyA9PSBFeHRlbmR9KSl7XHJcblx0XHRcdFx0cmV0dXJuIEJyZWFrXHJcblx0XHRcdH1cclxuXHRcdFx0ZWxzZSB7XHJcblx0XHRcdFx0cmV0dXJuIEJyZWFrU3RhcnRcclxuXHRcdFx0fVxyXG5cdFx0fVxyXG5cdFx0Ly8gR0I1LiDDtyAoQ29udHJvbHxDUnxMRilcclxuXHRcdGVsc2UgaWYobmV4dCA9PSBDb250cm9sIHx8IG5leHQgPT0gQ1IgfHwgbmV4dCA9PSBMRil7XHJcblx0XHRcdHJldHVybiBCcmVha1N0YXJ0O1xyXG5cdFx0fVxyXG5cdFx0Ly8gR0I2LiBMIFggKEx8VnxMVnxMVlQpXHJcblx0XHRlbHNlIGlmKHByZXZpb3VzID09IEwgJiYgXHJcblx0XHRcdChuZXh0ID09IEwgfHwgbmV4dCA9PSBWIHx8IG5leHQgPT0gTFYgfHwgbmV4dCA9PSBMVlQpKXtcclxuXHRcdFx0cmV0dXJuIE5vdEJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0Ly8gR0I3LiAoTFZ8VikgWCAoVnxUKVxyXG5cdFx0ZWxzZSBpZigocHJldmlvdXMgPT0gTFYgfHwgcHJldmlvdXMgPT0gVikgJiYgXHJcblx0XHRcdChuZXh0ID09IFYgfHwgbmV4dCA9PSBUKSl7XHJcblx0XHRcdHJldHVybiBOb3RCcmVhaztcclxuXHRcdH1cclxuXHRcdC8vIEdCOC4gKExWVHxUKSBYIChUKVxyXG5cdFx0ZWxzZSBpZigocHJldmlvdXMgPT0gTFZUIHx8IHByZXZpb3VzID09IFQpICYmIFxyXG5cdFx0XHRuZXh0ID09IFQpe1xyXG5cdFx0XHRyZXR1cm4gTm90QnJlYWs7XHJcblx0XHR9XHJcblx0XHQvLyBHQjkuIFggKEV4dGVuZHxaV0opXHJcblx0XHRlbHNlIGlmIChuZXh0ID09IEV4dGVuZCB8fCBuZXh0ID09IFpXSil7XHJcblx0XHRcdHJldHVybiBOb3RCcmVhaztcclxuXHRcdH1cclxuXHRcdC8vIEdCOWEuIFggU3BhY2luZ01hcmtcclxuXHRcdGVsc2UgaWYobmV4dCA9PSBTcGFjaW5nTWFyayl7XHJcblx0XHRcdHJldHVybiBOb3RCcmVhaztcclxuXHRcdH1cclxuXHRcdC8vIEdCOWIuIFByZXBlbmQgWFxyXG5cdFx0ZWxzZSBpZiAocHJldmlvdXMgPT0gUHJlcGVuZCl7XHJcblx0XHRcdHJldHVybiBOb3RCcmVhaztcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0Ly8gR0IxMC4gKEVfQmFzZSB8IEVCRykgRXh0ZW5kKiA/XHRFX01vZGlmaWVyXHJcblx0XHR2YXIgcHJldmlvdXNOb25FeHRlbmRJbmRleCA9IGFsbC5pbmRleE9mKEV4dGVuZCkgIT0gLTEgPyBhbGwubGFzdEluZGV4T2YoRXh0ZW5kKSAtIDEgOiBhbGwubGVuZ3RoIC0gMjtcclxuXHRcdGlmKFtFX0Jhc2UsIEVfQmFzZV9HQVpdLmluZGV4T2YoYWxsW3ByZXZpb3VzTm9uRXh0ZW5kSW5kZXhdKSAhPSAtMSAmJlxyXG5cdFx0XHRhbGwuc2xpY2UocHJldmlvdXNOb25FeHRlbmRJbmRleCArIDEsIC0xKS5ldmVyeShmdW5jdGlvbihjKXtyZXR1cm4gYyA9PSBFeHRlbmR9KSAmJlxyXG5cdFx0XHRuZXh0ID09IEVfTW9kaWZpZXIpe1xyXG5cdFx0XHRyZXR1cm4gTm90QnJlYWs7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdC8vIEdCMTEuIFpXSiA/IChHbHVlX0FmdGVyX1p3aiB8IEVCRylcclxuXHRcdGlmKHByZXZpb3VzID09IFpXSiAmJiBbR2x1ZV9BZnRlcl9ad2osIEVfQmFzZV9HQVpdLmluZGV4T2YobmV4dCkgIT0gLTEpIHtcclxuXHRcdFx0cmV0dXJuIE5vdEJyZWFrO1xyXG5cdFx0fVxyXG5cclxuXHRcdC8vIEdCMTIuIF4gKFJJIFJJKSogUkkgPyBSSVxyXG5cdFx0Ly8gR0IxMy4gW15SSV0gKFJJIFJJKSogUkkgPyBSSVxyXG5cdFx0aWYobWlkLmluZGV4T2YoUmVnaW9uYWxfSW5kaWNhdG9yKSAhPSAtMSkgeyBcclxuXHRcdFx0cmV0dXJuIEJyZWFrO1xyXG5cdFx0fVxyXG5cdFx0aWYocHJldmlvdXMgPT0gUmVnaW9uYWxfSW5kaWNhdG9yICYmIG5leHQgPT0gUmVnaW9uYWxfSW5kaWNhdG9yKSB7XHJcblx0XHRcdHJldHVybiBOb3RCcmVhaztcclxuXHRcdH1cclxuXHJcblx0XHQvLyBHQjk5OS4gQW55ID8gQW55XHJcblx0XHRyZXR1cm4gQnJlYWtTdGFydDtcclxuXHR9XHJcblx0XHJcblx0Ly8gUmV0dXJucyB0aGUgbmV4dCBncmFwaGVtZSBicmVhayBpbiB0aGUgc3RyaW5nIGFmdGVyIHRoZSBnaXZlbiBpbmRleFxyXG5cdHRoaXMubmV4dEJyZWFrID0gZnVuY3Rpb24oc3RyaW5nLCBpbmRleCl7XHJcblx0XHRpZihpbmRleCA9PT0gdW5kZWZpbmVkKXtcclxuXHRcdFx0aW5kZXggPSAwO1xyXG5cdFx0fVxyXG5cdFx0aWYoaW5kZXggPCAwKXtcclxuXHRcdFx0cmV0dXJuIDA7XHJcblx0XHR9XHJcblx0XHRpZihpbmRleCA+PSBzdHJpbmcubGVuZ3RoIC0gMSl7XHJcblx0XHRcdHJldHVybiBzdHJpbmcubGVuZ3RoO1xyXG5cdFx0fVxyXG5cdFx0dmFyIHByZXYgPSBnZXRHcmFwaGVtZUJyZWFrUHJvcGVydHkoY29kZVBvaW50QXQoc3RyaW5nLCBpbmRleCkpO1xyXG5cdFx0dmFyIG1pZCA9IFtdXHJcblx0XHRmb3IgKHZhciBpID0gaW5kZXggKyAxOyBpIDwgc3RyaW5nLmxlbmd0aDsgaSsrKSB7XHJcblx0XHRcdC8vIGNoZWNrIGZvciBhbHJlYWR5IHByb2Nlc3NlZCBsb3cgc3Vycm9nYXRlc1xyXG5cdFx0XHRpZihpc1N1cnJvZ2F0ZShzdHJpbmcsIGkgLSAxKSl7XHJcblx0XHRcdFx0Y29udGludWU7XHJcblx0XHRcdH1cclxuXHRcdFxyXG5cdFx0XHR2YXIgbmV4dCA9IGdldEdyYXBoZW1lQnJlYWtQcm9wZXJ0eShjb2RlUG9pbnRBdChzdHJpbmcsIGkpKTtcclxuXHRcdFx0aWYoc2hvdWxkQnJlYWsocHJldiwgbWlkLCBuZXh0KSl7XHJcblx0XHRcdFx0cmV0dXJuIGk7XHJcblx0XHRcdH1cclxuXHRcdFx0XHJcblx0XHRcdG1pZC5wdXNoKG5leHQpO1xyXG5cdFx0fVxyXG5cdFx0cmV0dXJuIHN0cmluZy5sZW5ndGg7XHJcblx0fTtcclxuXHRcclxuXHQvLyBCcmVha3MgdGhlIGdpdmVuIHN0cmluZyBpbnRvIGFuIGFycmF5IG9mIGdyYXBoZW1lIGNsdXN0ZXIgc3RyaW5nc1xyXG5cdHRoaXMuc3BsaXRHcmFwaGVtZXMgPSBmdW5jdGlvbihzdHIpe1xyXG5cdFx0dmFyIHJlcyA9IFtdO1xyXG5cdFx0dmFyIGluZGV4ID0gMDtcclxuXHRcdHZhciBicms7XHJcblx0XHR3aGlsZSgoYnJrID0gdGhpcy5uZXh0QnJlYWsoc3RyLCBpbmRleCkpIDwgc3RyLmxlbmd0aCl7XHJcblx0XHRcdHJlcy5wdXNoKHN0ci5zbGljZShpbmRleCwgYnJrKSk7XHJcblx0XHRcdGluZGV4ID0gYnJrO1xyXG5cdFx0fVxyXG5cdFx0aWYoaW5kZXggPCBzdHIubGVuZ3RoKXtcclxuXHRcdFx0cmVzLnB1c2goc3RyLnNsaWNlKGluZGV4KSk7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzO1xyXG5cdH07XHJcblxyXG5cdC8vIFJldHVybnMgdGhlIGl0ZXJhdG9yIG9mIGdyYXBoZW1lIGNsdXN0ZXJzIHRoZXJlIGFyZSBpbiB0aGUgZ2l2ZW4gc3RyaW5nXHJcblx0dGhpcy5pdGVyYXRlR3JhcGhlbWVzID0gZnVuY3Rpb24oc3RyKSB7XHJcblx0XHR2YXIgaW5kZXggPSAwO1xyXG5cdFx0dmFyIHJlcyA9IHtcclxuXHRcdFx0bmV4dDogKGZ1bmN0aW9uKCkge1xyXG5cdFx0XHRcdHZhciB2YWx1ZTtcclxuXHRcdFx0XHR2YXIgYnJrO1xyXG5cdFx0XHRcdGlmICgoYnJrID0gdGhpcy5uZXh0QnJlYWsoc3RyLCBpbmRleCkpIDwgc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0dmFsdWUgPSBzdHIuc2xpY2UoaW5kZXgsIGJyayk7XHJcblx0XHRcdFx0XHRpbmRleCA9IGJyaztcclxuXHRcdFx0XHRcdHJldHVybiB7IHZhbHVlOiB2YWx1ZSwgZG9uZTogZmFsc2UgfTtcclxuXHRcdFx0XHR9XHJcblx0XHRcdFx0aWYgKGluZGV4IDwgc3RyLmxlbmd0aCkge1xyXG5cdFx0XHRcdFx0dmFsdWUgPSBzdHIuc2xpY2UoaW5kZXgpO1xyXG5cdFx0XHRcdFx0aW5kZXggPSBzdHIubGVuZ3RoO1xyXG5cdFx0XHRcdFx0cmV0dXJuIHsgdmFsdWU6IHZhbHVlLCBkb25lOiBmYWxzZSB9O1xyXG5cdFx0XHRcdH1cclxuXHRcdFx0XHRyZXR1cm4geyB2YWx1ZTogdW5kZWZpbmVkLCBkb25lOiB0cnVlIH07XHJcblx0XHRcdH0pLmJpbmQodGhpcylcclxuXHRcdH07XHJcblx0XHQvLyBFUzIwMTUgQEBpdGVyYXRvciBtZXRob2QgKGl0ZXJhYmxlKSBmb3Igc3ByZWFkIHN5bnRheCBhbmQgZm9yLi4ub2Ygc3RhdGVtZW50XHJcblx0XHRpZiAodHlwZW9mIFN5bWJvbCAhPT0gJ3VuZGVmaW5lZCcgJiYgU3ltYm9sLml0ZXJhdG9yKSB7XHJcblx0XHRcdHJlc1tTeW1ib2wuaXRlcmF0b3JdID0gZnVuY3Rpb24oKSB7cmV0dXJuIHJlc307XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gcmVzO1xyXG5cdH07XHJcblxyXG5cdC8vIFJldHVybnMgdGhlIG51bWJlciBvZiBncmFwaGVtZSBjbHVzdGVycyB0aGVyZSBhcmUgaW4gdGhlIGdpdmVuIHN0cmluZ1xyXG5cdHRoaXMuY291bnRHcmFwaGVtZXMgPSBmdW5jdGlvbihzdHIpe1xyXG5cdFx0dmFyIGNvdW50ID0gMDtcclxuXHRcdHZhciBpbmRleCA9IDA7XHJcblx0XHR2YXIgYnJrO1xyXG5cdFx0d2hpbGUoKGJyayA9IHRoaXMubmV4dEJyZWFrKHN0ciwgaW5kZXgpKSA8IHN0ci5sZW5ndGgpe1xyXG5cdFx0XHRpbmRleCA9IGJyaztcclxuXHRcdFx0Y291bnQrKztcclxuXHRcdH1cclxuXHRcdGlmKGluZGV4IDwgc3RyLmxlbmd0aCl7XHJcblx0XHRcdGNvdW50Kys7XHJcblx0XHR9XHJcblx0XHRyZXR1cm4gY291bnQ7XHJcblx0fTtcclxuXHRcclxuXHQvL2dpdmVuIGEgVW5pY29kZSBjb2RlIHBvaW50LCBkZXRlcm1pbmVzIHRoaXMgc3ltYm9sJ3MgZ3JhcGhlbWUgYnJlYWsgcHJvcGVydHlcclxuXHRmdW5jdGlvbiBnZXRHcmFwaGVtZUJyZWFrUHJvcGVydHkoY29kZSl7XHJcblx0XHRcclxuXHRcdC8vZ3JhcGhlbWUgYnJlYWsgcHJvcGVydHkgZm9yIFVuaWNvZGUgMTAuMC4wLCBcclxuXHRcdC8vdGFrZW4gZnJvbSBodHRwOi8vd3d3LnVuaWNvZGUub3JnL1B1YmxpYy8xMC4wLjAvdWNkL2F1eGlsaWFyeS9HcmFwaGVtZUJyZWFrUHJvcGVydHkudHh0XHJcblx0XHQvL2FuZCBhZGFwdGVkIHRvIEphdmFTY3JpcHQgcnVsZXNcclxuXHRcdFxyXG5cdFx0aWYoXHRcdFxyXG5cdFx0KDB4MDYwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgwNjA1KSB8fCAvLyBDZiAgIFs2XSBBUkFCSUMgTlVNQkVSIFNJR04uLkFSQUJJQyBOVU1CRVIgTUFSSyBBQk9WRVxyXG5cdFx0MHgwNkREID09IGNvZGUgfHwgLy8gQ2YgICAgICAgQVJBQklDIEVORCBPRiBBWUFIXHJcblx0XHQweDA3MEYgPT0gY29kZSB8fCAvLyBDZiAgICAgICBTWVJJQUMgQUJCUkVWSUFUSU9OIE1BUktcclxuXHRcdDB4MDhFMiA9PSBjb2RlIHx8IC8vIENmICAgICAgIEFSQUJJQyBESVNQVVRFRCBFTkQgT0YgQVlBSFxyXG5cdFx0MHgwRDRFID09IGNvZGUgfHwgLy8gTG8gICAgICAgTUFMQVlBTEFNIExFVFRFUiBET1QgUkVQSFxyXG5cdFx0MHgxMTBCRCA9PSBjb2RlIHx8IC8vIENmICAgICAgIEtBSVRISSBOVU1CRVIgU0lHTlxyXG5cdFx0KDB4MTExQzIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTExQzMpIHx8IC8vIExvICAgWzJdIFNIQVJBREEgU0lHTiBKSUhWQU1VTElZQS4uU0hBUkFEQSBTSUdOIFVQQURITUFOSVlBXHJcblx0XHQweDExQTNBID09IGNvZGUgfHwgLy8gTG8gICAgICAgWkFOQUJBWkFSIFNRVUFSRSBDTFVTVEVSLUlOSVRJQUwgTEVUVEVSIFJBXHJcblx0XHQoMHgxMUE4NiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMUE4OSkgfHwgLy8gTG8gICBbNF0gU09ZT01CTyBDTFVTVEVSLUlOSVRJQUwgTEVUVEVSIFJBLi5TT1lPTUJPIENMVVNURVItSU5JVElBTCBMRVRURVIgU0FcclxuXHRcdDB4MTFENDYgPT0gY29kZSAvLyBMbyAgICAgICBNQVNBUkFNIEdPTkRJIFJFUEhBXHJcblx0XHQpe1xyXG5cdFx0XHRyZXR1cm4gUHJlcGVuZDtcclxuXHRcdH1cclxuXHRcdGlmKFxyXG5cdFx0MHgwMDBEID09IGNvZGUgLy8gQ2MgICAgICAgPGNvbnRyb2wtMDAwRD5cclxuXHRcdCl7XHJcblx0XHRcdHJldHVybiBDUjtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYoXHJcblx0XHQweDAwMEEgPT0gY29kZSAvLyBDYyAgICAgICA8Y29udHJvbC0wMDBBPlxyXG5cdFx0KXtcclxuXHRcdFx0cmV0dXJuIExGO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdGlmKFxyXG5cdFx0KDB4MDAwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgwMDA5KSB8fCAvLyBDYyAgWzEwXSA8Y29udHJvbC0wMDAwPi4uPGNvbnRyb2wtMDAwOT5cclxuXHRcdCgweDAwMEIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDAwQykgfHwgLy8gQ2MgICBbMl0gPGNvbnRyb2wtMDAwQj4uLjxjb250cm9sLTAwMEM+XHJcblx0XHQoMHgwMDBFIDw9IGNvZGUgJiYgY29kZSA8PSAweDAwMUYpIHx8IC8vIENjICBbMThdIDxjb250cm9sLTAwMEU+Li48Y29udHJvbC0wMDFGPlxyXG5cdFx0KDB4MDA3RiA8PSBjb2RlICYmIGNvZGUgPD0gMHgwMDlGKSB8fCAvLyBDYyAgWzMzXSA8Y29udHJvbC0wMDdGPi4uPGNvbnRyb2wtMDA5Rj5cclxuXHRcdDB4MDBBRCA9PSBjb2RlIHx8IC8vIENmICAgICAgIFNPRlQgSFlQSEVOXHJcblx0XHQweDA2MUMgPT0gY29kZSB8fCAvLyBDZiAgICAgICBBUkFCSUMgTEVUVEVSIE1BUktcclxuXHRcclxuXHRcdDB4MTgwRSA9PSBjb2RlIHx8IC8vIENmICAgICAgIE1PTkdPTElBTiBWT1dFTCBTRVBBUkFUT1JcclxuXHRcdDB4MjAwQiA9PSBjb2RlIHx8IC8vIENmICAgICAgIFpFUk8gV0lEVEggU1BBQ0VcclxuXHRcdCgweDIwMEUgPD0gY29kZSAmJiBjb2RlIDw9IDB4MjAwRikgfHwgLy8gQ2YgICBbMl0gTEVGVC1UTy1SSUdIVCBNQVJLLi5SSUdIVC1UTy1MRUZUIE1BUktcclxuXHRcdDB4MjAyOCA9PSBjb2RlIHx8IC8vIFpsICAgICAgIExJTkUgU0VQQVJBVE9SXHJcblx0XHQweDIwMjkgPT0gY29kZSB8fCAvLyBacCAgICAgICBQQVJBR1JBUEggU0VQQVJBVE9SXHJcblx0XHQoMHgyMDJBIDw9IGNvZGUgJiYgY29kZSA8PSAweDIwMkUpIHx8IC8vIENmICAgWzVdIExFRlQtVE8tUklHSFQgRU1CRURESU5HLi5SSUdIVC1UTy1MRUZUIE9WRVJSSURFXHJcblx0XHQoMHgyMDYwIDw9IGNvZGUgJiYgY29kZSA8PSAweDIwNjQpIHx8IC8vIENmICAgWzVdIFdPUkQgSk9JTkVSLi5JTlZJU0lCTEUgUExVU1xyXG5cdFx0MHgyMDY1ID09IGNvZGUgfHwgLy8gQ24gICAgICAgPHJlc2VydmVkLTIwNjU+XHJcblx0XHQoMHgyMDY2IDw9IGNvZGUgJiYgY29kZSA8PSAweDIwNkYpIHx8IC8vIENmICBbMTBdIExFRlQtVE8tUklHSFQgSVNPTEFURS4uTk9NSU5BTCBESUdJVCBTSEFQRVNcclxuXHRcdCgweEQ4MDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4REZGRikgfHwgLy8gQ3MgWzIwNDhdIDxzdXJyb2dhdGUtRDgwMD4uLjxzdXJyb2dhdGUtREZGRj5cclxuXHRcdDB4RkVGRiA9PSBjb2RlIHx8IC8vIENmICAgICAgIFpFUk8gV0lEVEggTk8tQlJFQUsgU1BBQ0VcclxuXHRcdCgweEZGRjAgPD0gY29kZSAmJiBjb2RlIDw9IDB4RkZGOCkgfHwgLy8gQ24gICBbOV0gPHJlc2VydmVkLUZGRjA+Li48cmVzZXJ2ZWQtRkZGOD5cclxuXHRcdCgweEZGRjkgPD0gY29kZSAmJiBjb2RlIDw9IDB4RkZGQikgfHwgLy8gQ2YgICBbM10gSU5URVJMSU5FQVIgQU5OT1RBVElPTiBBTkNIT1IuLklOVEVSTElORUFSIEFOTk9UQVRJT04gVEVSTUlOQVRPUlxyXG5cdFx0KDB4MUJDQTAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUJDQTMpIHx8IC8vIENmICAgWzRdIFNIT1JUSEFORCBGT1JNQVQgTEVUVEVSIE9WRVJMQVAuLlNIT1JUSEFORCBGT1JNQVQgVVAgU1RFUFxyXG5cdFx0KDB4MUQxNzMgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUQxN0EpIHx8IC8vIENmICAgWzhdIE1VU0lDQUwgU1lNQk9MIEJFR0lOIEJFQU0uLk1VU0lDQUwgU1lNQk9MIEVORCBQSFJBU0VcclxuXHRcdDB4RTAwMDAgPT0gY29kZSB8fCAvLyBDbiAgICAgICA8cmVzZXJ2ZWQtRTAwMDA+XHJcblx0XHQweEUwMDAxID09IGNvZGUgfHwgLy8gQ2YgICAgICAgTEFOR1VBR0UgVEFHXHJcblx0XHQoMHhFMDAwMiA8PSBjb2RlICYmIGNvZGUgPD0gMHhFMDAxRikgfHwgLy8gQ24gIFszMF0gPHJlc2VydmVkLUUwMDAyPi4uPHJlc2VydmVkLUUwMDFGPlxyXG5cdFx0KDB4RTAwODAgPD0gY29kZSAmJiBjb2RlIDw9IDB4RTAwRkYpIHx8IC8vIENuIFsxMjhdIDxyZXNlcnZlZC1FMDA4MD4uLjxyZXNlcnZlZC1FMDBGRj5cclxuXHRcdCgweEUwMUYwIDw9IGNvZGUgJiYgY29kZSA8PSAweEUwRkZGKSAvLyBDbiBbMzYwMF0gPHJlc2VydmVkLUUwMUYwPi4uPHJlc2VydmVkLUUwRkZGPlxyXG5cdFx0KXtcclxuXHRcdFx0cmV0dXJuIENvbnRyb2w7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0aWYoXHJcblx0XHQoMHgwMzAwIDw9IGNvZGUgJiYgY29kZSA8PSAweDAzNkYpIHx8IC8vIE1uIFsxMTJdIENPTUJJTklORyBHUkFWRSBBQ0NFTlQuLkNPTUJJTklORyBMQVRJTiBTTUFMTCBMRVRURVIgWFxyXG5cdFx0KDB4MDQ4MyA8PSBjb2RlICYmIGNvZGUgPD0gMHgwNDg3KSB8fCAvLyBNbiAgIFs1XSBDT01CSU5JTkcgQ1lSSUxMSUMgVElUTE8uLkNPTUJJTklORyBDWVJJTExJQyBQT0tSWVRJRVxyXG5cdFx0KDB4MDQ4OCA8PSBjb2RlICYmIGNvZGUgPD0gMHgwNDg5KSB8fCAvLyBNZSAgIFsyXSBDT01CSU5JTkcgQ1lSSUxMSUMgSFVORFJFRCBUSE9VU0FORFMgU0lHTi4uQ09NQklOSU5HIENZUklMTElDIE1JTExJT05TIFNJR05cclxuXHRcdCgweDA1OTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDVCRCkgfHwgLy8gTW4gIFs0NV0gSEVCUkVXIEFDQ0VOVCBFVE5BSFRBLi5IRUJSRVcgUE9JTlQgTUVURUdcclxuXHRcdDB4MDVCRiA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEhFQlJFVyBQT0lOVCBSQUZFXHJcblx0XHQoMHgwNUMxIDw9IGNvZGUgJiYgY29kZSA8PSAweDA1QzIpIHx8IC8vIE1uICAgWzJdIEhFQlJFVyBQT0lOVCBTSElOIERPVC4uSEVCUkVXIFBPSU5UIFNJTiBET1RcclxuXHRcdCgweDA1QzQgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDVDNSkgfHwgLy8gTW4gICBbMl0gSEVCUkVXIE1BUksgVVBQRVIgRE9ULi5IRUJSRVcgTUFSSyBMT1dFUiBET1RcclxuXHRcdDB4MDVDNyA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEhFQlJFVyBQT0lOVCBRQU1BVFMgUUFUQU5cclxuXHRcdCgweDA2MTAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDYxQSkgfHwgLy8gTW4gIFsxMV0gQVJBQklDIFNJR04gU0FMTEFMTEFIT1UgQUxBWUhFIFdBU1NBTExBTS4uQVJBQklDIFNNQUxMIEtBU1JBXHJcblx0XHQoMHgwNjRCIDw9IGNvZGUgJiYgY29kZSA8PSAweDA2NUYpIHx8IC8vIE1uICBbMjFdIEFSQUJJQyBGQVRIQVRBTi4uQVJBQklDIFdBVlkgSEFNWkEgQkVMT1dcclxuXHRcdDB4MDY3MCA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEFSQUJJQyBMRVRURVIgU1VQRVJTQ1JJUFQgQUxFRlxyXG5cdFx0KDB4MDZENiA8PSBjb2RlICYmIGNvZGUgPD0gMHgwNkRDKSB8fCAvLyBNbiAgIFs3XSBBUkFCSUMgU01BTEwgSElHSCBMSUdBVFVSRSBTQUQgV0lUSCBMQU0gV0lUSCBBTEVGIE1BS1NVUkEuLkFSQUJJQyBTTUFMTCBISUdIIFNFRU5cclxuXHRcdCgweDA2REYgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDZFNCkgfHwgLy8gTW4gICBbNl0gQVJBQklDIFNNQUxMIEhJR0ggUk9VTkRFRCBaRVJPLi5BUkFCSUMgU01BTEwgSElHSCBNQUREQVxyXG5cdFx0KDB4MDZFNyA8PSBjb2RlICYmIGNvZGUgPD0gMHgwNkU4KSB8fCAvLyBNbiAgIFsyXSBBUkFCSUMgU01BTEwgSElHSCBZRUguLkFSQUJJQyBTTUFMTCBISUdIIE5PT05cclxuXHRcdCgweDA2RUEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDZFRCkgfHwgLy8gTW4gICBbNF0gQVJBQklDIEVNUFRZIENFTlRSRSBMT1cgU1RPUC4uQVJBQklDIFNNQUxMIExPVyBNRUVNXHJcblx0XHQweDA3MTEgPT0gY29kZSB8fCAvLyBNbiAgICAgICBTWVJJQUMgTEVUVEVSIFNVUEVSU0NSSVBUIEFMQVBIXHJcblx0XHQoMHgwNzMwIDw9IGNvZGUgJiYgY29kZSA8PSAweDA3NEEpIHx8IC8vIE1uICBbMjddIFNZUklBQyBQVEhBSEEgQUJPVkUuLlNZUklBQyBCQVJSRUtIXHJcblx0XHQoMHgwN0E2IDw9IGNvZGUgJiYgY29kZSA8PSAweDA3QjApIHx8IC8vIE1uICBbMTFdIFRIQUFOQSBBQkFGSUxJLi5USEFBTkEgU1VLVU5cclxuXHRcdCgweDA3RUIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDdGMykgfHwgLy8gTW4gICBbOV0gTktPIENPTUJJTklORyBTSE9SVCBISUdIIFRPTkUuLk5LTyBDT01CSU5JTkcgRE9VQkxFIERPVCBBQk9WRVxyXG5cdFx0KDB4MDgxNiA8PSBjb2RlICYmIGNvZGUgPD0gMHgwODE5KSB8fCAvLyBNbiAgIFs0XSBTQU1BUklUQU4gTUFSSyBJTi4uU0FNQVJJVEFOIE1BUksgREFHRVNIXHJcblx0XHQoMHgwODFCIDw9IGNvZGUgJiYgY29kZSA8PSAweDA4MjMpIHx8IC8vIE1uICAgWzldIFNBTUFSSVRBTiBNQVJLIEVQRU5USEVUSUMgWVVULi5TQU1BUklUQU4gVk9XRUwgU0lHTiBBXHJcblx0XHQoMHgwODI1IDw9IGNvZGUgJiYgY29kZSA8PSAweDA4MjcpIHx8IC8vIE1uICAgWzNdIFNBTUFSSVRBTiBWT1dFTCBTSUdOIFNIT1JUIEEuLlNBTUFSSVRBTiBWT1dFTCBTSUdOIFVcclxuXHRcdCgweDA4MjkgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDgyRCkgfHwgLy8gTW4gICBbNV0gU0FNQVJJVEFOIFZPV0VMIFNJR04gTE9ORyBJLi5TQU1BUklUQU4gTUFSSyBORVFVREFBXHJcblx0XHQoMHgwODU5IDw9IGNvZGUgJiYgY29kZSA8PSAweDA4NUIpIHx8IC8vIE1uICAgWzNdIE1BTkRBSUMgQUZGUklDQVRJT04gTUFSSy4uTUFOREFJQyBHRU1JTkFUSU9OIE1BUktcclxuXHRcdCgweDA4RDQgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDhFMSkgfHwgLy8gTW4gIFsxNF0gQVJBQklDIFNNQUxMIEhJR0ggV09SRCBBUi1SVUIuLkFSQUJJQyBTTUFMTCBISUdIIFNJR04gU0FGSEFcclxuXHRcdCgweDA4RTMgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDkwMikgfHwgLy8gTW4gIFszMl0gQVJBQklDIFRVUk5FRCBEQU1NQSBCRUxPVy4uREVWQU5BR0FSSSBTSUdOIEFOVVNWQVJBXHJcblx0XHQweDA5M0EgPT0gY29kZSB8fCAvLyBNbiAgICAgICBERVZBTkFHQVJJIFZPV0VMIFNJR04gT0VcclxuXHRcdDB4MDkzQyA9PSBjb2RlIHx8IC8vIE1uICAgICAgIERFVkFOQUdBUkkgU0lHTiBOVUtUQVxyXG5cdFx0KDB4MDk0MSA8PSBjb2RlICYmIGNvZGUgPD0gMHgwOTQ4KSB8fCAvLyBNbiAgIFs4XSBERVZBTkFHQVJJIFZPV0VMIFNJR04gVS4uREVWQU5BR0FSSSBWT1dFTCBTSUdOIEFJXHJcblx0XHQweDA5NEQgPT0gY29kZSB8fCAvLyBNbiAgICAgICBERVZBTkFHQVJJIFNJR04gVklSQU1BXHJcblx0XHQoMHgwOTUxIDw9IGNvZGUgJiYgY29kZSA8PSAweDA5NTcpIHx8IC8vIE1uICAgWzddIERFVkFOQUdBUkkgU1RSRVNTIFNJR04gVURBVFRBLi5ERVZBTkFHQVJJIFZPV0VMIFNJR04gVVVFXHJcblx0XHQoMHgwOTYyIDw9IGNvZGUgJiYgY29kZSA8PSAweDA5NjMpIHx8IC8vIE1uICAgWzJdIERFVkFOQUdBUkkgVk9XRUwgU0lHTiBWT0NBTElDIEwuLkRFVkFOQUdBUkkgVk9XRUwgU0lHTiBWT0NBTElDIExMXHJcblx0XHQweDA5ODEgPT0gY29kZSB8fCAvLyBNbiAgICAgICBCRU5HQUxJIFNJR04gQ0FORFJBQklORFVcclxuXHRcdDB4MDlCQyA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEJFTkdBTEkgU0lHTiBOVUtUQVxyXG5cdFx0MHgwOUJFID09IGNvZGUgfHwgLy8gTWMgICAgICAgQkVOR0FMSSBWT1dFTCBTSUdOIEFBXHJcblx0XHQoMHgwOUMxIDw9IGNvZGUgJiYgY29kZSA8PSAweDA5QzQpIHx8IC8vIE1uICAgWzRdIEJFTkdBTEkgVk9XRUwgU0lHTiBVLi5CRU5HQUxJIFZPV0VMIFNJR04gVk9DQUxJQyBSUlxyXG5cdFx0MHgwOUNEID09IGNvZGUgfHwgLy8gTW4gICAgICAgQkVOR0FMSSBTSUdOIFZJUkFNQVxyXG5cdFx0MHgwOUQ3ID09IGNvZGUgfHwgLy8gTWMgICAgICAgQkVOR0FMSSBBVSBMRU5HVEggTUFSS1xyXG5cdFx0KDB4MDlFMiA8PSBjb2RlICYmIGNvZGUgPD0gMHgwOUUzKSB8fCAvLyBNbiAgIFsyXSBCRU5HQUxJIFZPV0VMIFNJR04gVk9DQUxJQyBMLi5CRU5HQUxJIFZPV0VMIFNJR04gVk9DQUxJQyBMTFxyXG5cdFx0KDB4MEEwMSA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQTAyKSB8fCAvLyBNbiAgIFsyXSBHVVJNVUtISSBTSUdOIEFEQUsgQklOREkuLkdVUk1VS0hJIFNJR04gQklORElcclxuXHRcdDB4MEEzQyA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEdVUk1VS0hJIFNJR04gTlVLVEFcclxuXHRcdCgweDBBNDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEE0MikgfHwgLy8gTW4gICBbMl0gR1VSTVVLSEkgVk9XRUwgU0lHTiBVLi5HVVJNVUtISSBWT1dFTCBTSUdOIFVVXHJcblx0XHQoMHgwQTQ3IDw9IGNvZGUgJiYgY29kZSA8PSAweDBBNDgpIHx8IC8vIE1uICAgWzJdIEdVUk1VS0hJIFZPV0VMIFNJR04gRUUuLkdVUk1VS0hJIFZPV0VMIFNJR04gQUlcclxuXHRcdCgweDBBNEIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEE0RCkgfHwgLy8gTW4gICBbM10gR1VSTVVLSEkgVk9XRUwgU0lHTiBPTy4uR1VSTVVLSEkgU0lHTiBWSVJBTUFcclxuXHRcdDB4MEE1MSA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEdVUk1VS0hJIFNJR04gVURBQVRcclxuXHRcdCgweDBBNzAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEE3MSkgfHwgLy8gTW4gICBbMl0gR1VSTVVLSEkgVElQUEkuLkdVUk1VS0hJIEFEREFLXHJcblx0XHQweDBBNzUgPT0gY29kZSB8fCAvLyBNbiAgICAgICBHVVJNVUtISSBTSUdOIFlBS0FTSFxyXG5cdFx0KDB4MEE4MSA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQTgyKSB8fCAvLyBNbiAgIFsyXSBHVUpBUkFUSSBTSUdOIENBTkRSQUJJTkRVLi5HVUpBUkFUSSBTSUdOIEFOVVNWQVJBXHJcblx0XHQweDBBQkMgPT0gY29kZSB8fCAvLyBNbiAgICAgICBHVUpBUkFUSSBTSUdOIE5VS1RBXHJcblx0XHQoMHgwQUMxIDw9IGNvZGUgJiYgY29kZSA8PSAweDBBQzUpIHx8IC8vIE1uICAgWzVdIEdVSkFSQVRJIFZPV0VMIFNJR04gVS4uR1VKQVJBVEkgVk9XRUwgU0lHTiBDQU5EUkEgRVxyXG5cdFx0KDB4MEFDNyA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQUM4KSB8fCAvLyBNbiAgIFsyXSBHVUpBUkFUSSBWT1dFTCBTSUdOIEUuLkdVSkFSQVRJIFZPV0VMIFNJR04gQUlcclxuXHRcdDB4MEFDRCA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEdVSkFSQVRJIFNJR04gVklSQU1BXHJcblx0XHQoMHgwQUUyIDw9IGNvZGUgJiYgY29kZSA8PSAweDBBRTMpIHx8IC8vIE1uICAgWzJdIEdVSkFSQVRJIFZPV0VMIFNJR04gVk9DQUxJQyBMLi5HVUpBUkFUSSBWT1dFTCBTSUdOIFZPQ0FMSUMgTExcclxuXHRcdCgweDBBRkEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEFGRikgfHwgLy8gTW4gICBbNl0gR1VKQVJBVEkgU0lHTiBTVUtVTi4uR1VKQVJBVEkgU0lHTiBUV08tQ0lSQ0xFIE5VS1RBIEFCT1ZFXHJcblx0XHQweDBCMDEgPT0gY29kZSB8fCAvLyBNbiAgICAgICBPUklZQSBTSUdOIENBTkRSQUJJTkRVXHJcblx0XHQweDBCM0MgPT0gY29kZSB8fCAvLyBNbiAgICAgICBPUklZQSBTSUdOIE5VS1RBXHJcblx0XHQweDBCM0UgPT0gY29kZSB8fCAvLyBNYyAgICAgICBPUklZQSBWT1dFTCBTSUdOIEFBXHJcblx0XHQweDBCM0YgPT0gY29kZSB8fCAvLyBNbiAgICAgICBPUklZQSBWT1dFTCBTSUdOIElcclxuXHRcdCgweDBCNDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEI0NCkgfHwgLy8gTW4gICBbNF0gT1JJWUEgVk9XRUwgU0lHTiBVLi5PUklZQSBWT1dFTCBTSUdOIFZPQ0FMSUMgUlJcclxuXHRcdDB4MEI0RCA9PSBjb2RlIHx8IC8vIE1uICAgICAgIE9SSVlBIFNJR04gVklSQU1BXHJcblx0XHQweDBCNTYgPT0gY29kZSB8fCAvLyBNbiAgICAgICBPUklZQSBBSSBMRU5HVEggTUFSS1xyXG5cdFx0MHgwQjU3ID09IGNvZGUgfHwgLy8gTWMgICAgICAgT1JJWUEgQVUgTEVOR1RIIE1BUktcclxuXHRcdCgweDBCNjIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEI2MykgfHwgLy8gTW4gICBbMl0gT1JJWUEgVk9XRUwgU0lHTiBWT0NBTElDIEwuLk9SSVlBIFZPV0VMIFNJR04gVk9DQUxJQyBMTFxyXG5cdFx0MHgwQjgyID09IGNvZGUgfHwgLy8gTW4gICAgICAgVEFNSUwgU0lHTiBBTlVTVkFSQVxyXG5cdFx0MHgwQkJFID09IGNvZGUgfHwgLy8gTWMgICAgICAgVEFNSUwgVk9XRUwgU0lHTiBBQVxyXG5cdFx0MHgwQkMwID09IGNvZGUgfHwgLy8gTW4gICAgICAgVEFNSUwgVk9XRUwgU0lHTiBJSVxyXG5cdFx0MHgwQkNEID09IGNvZGUgfHwgLy8gTW4gICAgICAgVEFNSUwgU0lHTiBWSVJBTUFcclxuXHRcdDB4MEJENyA9PSBjb2RlIHx8IC8vIE1jICAgICAgIFRBTUlMIEFVIExFTkdUSCBNQVJLXHJcblx0XHQweDBDMDAgPT0gY29kZSB8fCAvLyBNbiAgICAgICBURUxVR1UgU0lHTiBDT01CSU5JTkcgQ0FORFJBQklORFUgQUJPVkVcclxuXHRcdCgweDBDM0UgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEM0MCkgfHwgLy8gTW4gICBbM10gVEVMVUdVIFZPV0VMIFNJR04gQUEuLlRFTFVHVSBWT1dFTCBTSUdOIElJXHJcblx0XHQoMHgwQzQ2IDw9IGNvZGUgJiYgY29kZSA8PSAweDBDNDgpIHx8IC8vIE1uICAgWzNdIFRFTFVHVSBWT1dFTCBTSUdOIEUuLlRFTFVHVSBWT1dFTCBTSUdOIEFJXHJcblx0XHQoMHgwQzRBIDw9IGNvZGUgJiYgY29kZSA8PSAweDBDNEQpIHx8IC8vIE1uICAgWzRdIFRFTFVHVSBWT1dFTCBTSUdOIE8uLlRFTFVHVSBTSUdOIFZJUkFNQVxyXG5cdFx0KDB4MEM1NSA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQzU2KSB8fCAvLyBNbiAgIFsyXSBURUxVR1UgTEVOR1RIIE1BUksuLlRFTFVHVSBBSSBMRU5HVEggTUFSS1xyXG5cdFx0KDB4MEM2MiA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQzYzKSB8fCAvLyBNbiAgIFsyXSBURUxVR1UgVk9XRUwgU0lHTiBWT0NBTElDIEwuLlRFTFVHVSBWT1dFTCBTSUdOIFZPQ0FMSUMgTExcclxuXHRcdDB4MEM4MSA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEtBTk5BREEgU0lHTiBDQU5EUkFCSU5EVVxyXG5cdFx0MHgwQ0JDID09IGNvZGUgfHwgLy8gTW4gICAgICAgS0FOTkFEQSBTSUdOIE5VS1RBXHJcblx0XHQweDBDQkYgPT0gY29kZSB8fCAvLyBNbiAgICAgICBLQU5OQURBIFZPV0VMIFNJR04gSVxyXG5cdFx0MHgwQ0MyID09IGNvZGUgfHwgLy8gTWMgICAgICAgS0FOTkFEQSBWT1dFTCBTSUdOIFVVXHJcblx0XHQweDBDQzYgPT0gY29kZSB8fCAvLyBNbiAgICAgICBLQU5OQURBIFZPV0VMIFNJR04gRVxyXG5cdFx0KDB4MENDQyA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQ0NEKSB8fCAvLyBNbiAgIFsyXSBLQU5OQURBIFZPV0VMIFNJR04gQVUuLktBTk5BREEgU0lHTiBWSVJBTUFcclxuXHRcdCgweDBDRDUgPD0gY29kZSAmJiBjb2RlIDw9IDB4MENENikgfHwgLy8gTWMgICBbMl0gS0FOTkFEQSBMRU5HVEggTUFSSy4uS0FOTkFEQSBBSSBMRU5HVEggTUFSS1xyXG5cdFx0KDB4MENFMiA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQ0UzKSB8fCAvLyBNbiAgIFsyXSBLQU5OQURBIFZPV0VMIFNJR04gVk9DQUxJQyBMLi5LQU5OQURBIFZPV0VMIFNJR04gVk9DQUxJQyBMTFxyXG5cdFx0KDB4MEQwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgwRDAxKSB8fCAvLyBNbiAgIFsyXSBNQUxBWUFMQU0gU0lHTiBDT01CSU5JTkcgQU5VU1ZBUkEgQUJPVkUuLk1BTEFZQUxBTSBTSUdOIENBTkRSQUJJTkRVXHJcblx0XHQoMHgwRDNCIDw9IGNvZGUgJiYgY29kZSA8PSAweDBEM0MpIHx8IC8vIE1uICAgWzJdIE1BTEFZQUxBTSBTSUdOIFZFUlRJQ0FMIEJBUiBWSVJBTUEuLk1BTEFZQUxBTSBTSUdOIENJUkNVTEFSIFZJUkFNQVxyXG5cdFx0MHgwRDNFID09IGNvZGUgfHwgLy8gTWMgICAgICAgTUFMQVlBTEFNIFZPV0VMIFNJR04gQUFcclxuXHRcdCgweDBENDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEQ0NCkgfHwgLy8gTW4gICBbNF0gTUFMQVlBTEFNIFZPV0VMIFNJR04gVS4uTUFMQVlBTEFNIFZPV0VMIFNJR04gVk9DQUxJQyBSUlxyXG5cdFx0MHgwRDREID09IGNvZGUgfHwgLy8gTW4gICAgICAgTUFMQVlBTEFNIFNJR04gVklSQU1BXHJcblx0XHQweDBENTcgPT0gY29kZSB8fCAvLyBNYyAgICAgICBNQUxBWUFMQU0gQVUgTEVOR1RIIE1BUktcclxuXHRcdCgweDBENjIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEQ2MykgfHwgLy8gTW4gICBbMl0gTUFMQVlBTEFNIFZPV0VMIFNJR04gVk9DQUxJQyBMLi5NQUxBWUFMQU0gVk9XRUwgU0lHTiBWT0NBTElDIExMXHJcblx0XHQweDBEQ0EgPT0gY29kZSB8fCAvLyBNbiAgICAgICBTSU5IQUxBIFNJR04gQUwtTEFLVU5BXHJcblx0XHQweDBEQ0YgPT0gY29kZSB8fCAvLyBNYyAgICAgICBTSU5IQUxBIFZPV0VMIFNJR04gQUVMQS1QSUxMQVxyXG5cdFx0KDB4MEREMiA8PSBjb2RlICYmIGNvZGUgPD0gMHgwREQ0KSB8fCAvLyBNbiAgIFszXSBTSU5IQUxBIFZPV0VMIFNJR04gS0VUVEkgSVMtUElMTEEuLlNJTkhBTEEgVk9XRUwgU0lHTiBLRVRUSSBQQUEtUElMTEFcclxuXHRcdDB4MERENiA9PSBjb2RlIHx8IC8vIE1uICAgICAgIFNJTkhBTEEgVk9XRUwgU0lHTiBESUdBIFBBQS1QSUxMQVxyXG5cdFx0MHgwRERGID09IGNvZGUgfHwgLy8gTWMgICAgICAgU0lOSEFMQSBWT1dFTCBTSUdOIEdBWUFOVUtJVFRBXHJcblx0XHQweDBFMzEgPT0gY29kZSB8fCAvLyBNbiAgICAgICBUSEFJIENIQVJBQ1RFUiBNQUkgSEFOLUFLQVRcclxuXHRcdCgweDBFMzQgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEUzQSkgfHwgLy8gTW4gICBbN10gVEhBSSBDSEFSQUNURVIgU0FSQSBJLi5USEFJIENIQVJBQ1RFUiBQSElOVEhVXHJcblx0XHQoMHgwRTQ3IDw9IGNvZGUgJiYgY29kZSA8PSAweDBFNEUpIHx8IC8vIE1uICAgWzhdIFRIQUkgQ0hBUkFDVEVSIE1BSVRBSUtIVS4uVEhBSSBDSEFSQUNURVIgWUFNQUtLQU5cclxuXHRcdDB4MEVCMSA9PSBjb2RlIHx8IC8vIE1uICAgICAgIExBTyBWT1dFTCBTSUdOIE1BSSBLQU5cclxuXHRcdCgweDBFQjQgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEVCOSkgfHwgLy8gTW4gICBbNl0gTEFPIFZPV0VMIFNJR04gSS4uTEFPIFZPV0VMIFNJR04gVVVcclxuXHRcdCgweDBFQkIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEVCQykgfHwgLy8gTW4gICBbMl0gTEFPIFZPV0VMIFNJR04gTUFJIEtPTi4uTEFPIFNFTUlWT1dFTCBTSUdOIExPXHJcblx0XHQoMHgwRUM4IDw9IGNvZGUgJiYgY29kZSA8PSAweDBFQ0QpIHx8IC8vIE1uICAgWzZdIExBTyBUT05FIE1BSSBFSy4uTEFPIE5JR0dBSElUQVxyXG5cdFx0KDB4MEYxOCA8PSBjb2RlICYmIGNvZGUgPD0gMHgwRjE5KSB8fCAvLyBNbiAgIFsyXSBUSUJFVEFOIEFTVFJPTE9HSUNBTCBTSUdOIC1LSFlVRCBQQS4uVElCRVRBTiBBU1RST0xPR0lDQUwgU0lHTiBTRE9ORyBUU0hVR1NcclxuXHRcdDB4MEYzNSA9PSBjb2RlIHx8IC8vIE1uICAgICAgIFRJQkVUQU4gTUFSSyBOR0FTIEJaVU5HIE5ZSSBaTEFcclxuXHRcdDB4MEYzNyA9PSBjb2RlIHx8IC8vIE1uICAgICAgIFRJQkVUQU4gTUFSSyBOR0FTIEJaVU5HIFNHT1IgUlRBR1NcclxuXHRcdDB4MEYzOSA9PSBjb2RlIHx8IC8vIE1uICAgICAgIFRJQkVUQU4gTUFSSyBUU0EgLVBIUlVcclxuXHRcdCgweDBGNzEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEY3RSkgfHwgLy8gTW4gIFsxNF0gVElCRVRBTiBWT1dFTCBTSUdOIEFBLi5USUJFVEFOIFNJR04gUkpFUyBTVSBOR0EgUk9cclxuXHRcdCgweDBGODAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEY4NCkgfHwgLy8gTW4gICBbNV0gVElCRVRBTiBWT1dFTCBTSUdOIFJFVkVSU0VEIEkuLlRJQkVUQU4gTUFSSyBIQUxBTlRBXHJcblx0XHQoMHgwRjg2IDw9IGNvZGUgJiYgY29kZSA8PSAweDBGODcpIHx8IC8vIE1uICAgWzJdIFRJQkVUQU4gU0lHTiBMQ0kgUlRBR1MuLlRJQkVUQU4gU0lHTiBZQU5HIFJUQUdTXHJcblx0XHQoMHgwRjhEIDw9IGNvZGUgJiYgY29kZSA8PSAweDBGOTcpIHx8IC8vIE1uICBbMTFdIFRJQkVUQU4gU1VCSk9JTkVEIFNJR04gTENFIFRTQSBDQU4uLlRJQkVUQU4gU1VCSk9JTkVEIExFVFRFUiBKQVxyXG5cdFx0KDB4MEY5OSA8PSBjb2RlICYmIGNvZGUgPD0gMHgwRkJDKSB8fCAvLyBNbiAgWzM2XSBUSUJFVEFOIFNVQkpPSU5FRCBMRVRURVIgTllBLi5USUJFVEFOIFNVQkpPSU5FRCBMRVRURVIgRklYRUQtRk9STSBSQVxyXG5cdFx0MHgwRkM2ID09IGNvZGUgfHwgLy8gTW4gICAgICAgVElCRVRBTiBTWU1CT0wgUEFETUEgR0RBTlxyXG5cdFx0KDB4MTAyRCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMDMwKSB8fCAvLyBNbiAgIFs0XSBNWUFOTUFSIFZPV0VMIFNJR04gSS4uTVlBTk1BUiBWT1dFTCBTSUdOIFVVXHJcblx0XHQoMHgxMDMyIDw9IGNvZGUgJiYgY29kZSA8PSAweDEwMzcpIHx8IC8vIE1uICAgWzZdIE1ZQU5NQVIgVk9XRUwgU0lHTiBBSS4uTVlBTk1BUiBTSUdOIERPVCBCRUxPV1xyXG5cdFx0KDB4MTAzOSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMDNBKSB8fCAvLyBNbiAgIFsyXSBNWUFOTUFSIFNJR04gVklSQU1BLi5NWUFOTUFSIFNJR04gQVNBVFxyXG5cdFx0KDB4MTAzRCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMDNFKSB8fCAvLyBNbiAgIFsyXSBNWUFOTUFSIENPTlNPTkFOVCBTSUdOIE1FRElBTCBXQS4uTVlBTk1BUiBDT05TT05BTlQgU0lHTiBNRURJQUwgSEFcclxuXHRcdCgweDEwNTggPD0gY29kZSAmJiBjb2RlIDw9IDB4MTA1OSkgfHwgLy8gTW4gICBbMl0gTVlBTk1BUiBWT1dFTCBTSUdOIFZPQ0FMSUMgTC4uTVlBTk1BUiBWT1dFTCBTSUdOIFZPQ0FMSUMgTExcclxuXHRcdCgweDEwNUUgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTA2MCkgfHwgLy8gTW4gICBbM10gTVlBTk1BUiBDT05TT05BTlQgU0lHTiBNT04gTUVESUFMIE5BLi5NWUFOTUFSIENPTlNPTkFOVCBTSUdOIE1PTiBNRURJQUwgTEFcclxuXHRcdCgweDEwNzEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTA3NCkgfHwgLy8gTW4gICBbNF0gTVlBTk1BUiBWT1dFTCBTSUdOIEdFQkEgS0FSRU4gSS4uTVlBTk1BUiBWT1dFTCBTSUdOIEtBWUFIIEVFXHJcblx0XHQweDEwODIgPT0gY29kZSB8fCAvLyBNbiAgICAgICBNWUFOTUFSIENPTlNPTkFOVCBTSUdOIFNIQU4gTUVESUFMIFdBXHJcblx0XHQoMHgxMDg1IDw9IGNvZGUgJiYgY29kZSA8PSAweDEwODYpIHx8IC8vIE1uICAgWzJdIE1ZQU5NQVIgVk9XRUwgU0lHTiBTSEFOIEUgQUJPVkUuLk1ZQU5NQVIgVk9XRUwgU0lHTiBTSEFOIEZJTkFMIFlcclxuXHRcdDB4MTA4RCA9PSBjb2RlIHx8IC8vIE1uICAgICAgIE1ZQU5NQVIgU0lHTiBTSEFOIENPVU5DSUwgRU1QSEFUSUMgVE9ORVxyXG5cdFx0MHgxMDlEID09IGNvZGUgfHwgLy8gTW4gICAgICAgTVlBTk1BUiBWT1dFTCBTSUdOIEFJVE9OIEFJXHJcblx0XHQoMHgxMzVEIDw9IGNvZGUgJiYgY29kZSA8PSAweDEzNUYpIHx8IC8vIE1uICAgWzNdIEVUSElPUElDIENPTUJJTklORyBHRU1JTkFUSU9OIEFORCBWT1dFTCBMRU5HVEggTUFSSy4uRVRISU9QSUMgQ09NQklOSU5HIEdFTUlOQVRJT04gTUFSS1xyXG5cdFx0KDB4MTcxMiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxNzE0KSB8fCAvLyBNbiAgIFszXSBUQUdBTE9HIFZPV0VMIFNJR04gSS4uVEFHQUxPRyBTSUdOIFZJUkFNQVxyXG5cdFx0KDB4MTczMiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxNzM0KSB8fCAvLyBNbiAgIFszXSBIQU5VTk9PIFZPV0VMIFNJR04gSS4uSEFOVU5PTyBTSUdOIFBBTVVEUE9EXHJcblx0XHQoMHgxNzUyIDw9IGNvZGUgJiYgY29kZSA8PSAweDE3NTMpIHx8IC8vIE1uICAgWzJdIEJVSElEIFZPV0VMIFNJR04gSS4uQlVISUQgVk9XRUwgU0lHTiBVXHJcblx0XHQoMHgxNzcyIDw9IGNvZGUgJiYgY29kZSA8PSAweDE3NzMpIHx8IC8vIE1uICAgWzJdIFRBR0JBTldBIFZPV0VMIFNJR04gSS4uVEFHQkFOV0EgVk9XRUwgU0lHTiBVXHJcblx0XHQoMHgxN0I0IDw9IGNvZGUgJiYgY29kZSA8PSAweDE3QjUpIHx8IC8vIE1uICAgWzJdIEtITUVSIFZPV0VMIElOSEVSRU5UIEFRLi5LSE1FUiBWT1dFTCBJTkhFUkVOVCBBQVxyXG5cdFx0KDB4MTdCNyA8PSBjb2RlICYmIGNvZGUgPD0gMHgxN0JEKSB8fCAvLyBNbiAgIFs3XSBLSE1FUiBWT1dFTCBTSUdOIEkuLktITUVSIFZPV0VMIFNJR04gVUFcclxuXHRcdDB4MTdDNiA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEtITUVSIFNJR04gTklLQUhJVFxyXG5cdFx0KDB4MTdDOSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxN0QzKSB8fCAvLyBNbiAgWzExXSBLSE1FUiBTSUdOIE1VVVNJS0FUT0FOLi5LSE1FUiBTSUdOIEJBVEhBTUFTQVRcclxuXHRcdDB4MTdERCA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEtITUVSIFNJR04gQVRUSEFDQU5cclxuXHRcdCgweDE4MEIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTgwRCkgfHwgLy8gTW4gICBbM10gTU9OR09MSUFOIEZSRUUgVkFSSUFUSU9OIFNFTEVDVE9SIE9ORS4uTU9OR09MSUFOIEZSRUUgVkFSSUFUSU9OIFNFTEVDVE9SIFRIUkVFXHJcblx0XHQoMHgxODg1IDw9IGNvZGUgJiYgY29kZSA8PSAweDE4ODYpIHx8IC8vIE1uICAgWzJdIE1PTkdPTElBTiBMRVRURVIgQUxJIEdBTEkgQkFMVURBLi5NT05HT0xJQU4gTEVUVEVSIEFMSSBHQUxJIFRIUkVFIEJBTFVEQVxyXG5cdFx0MHgxOEE5ID09IGNvZGUgfHwgLy8gTW4gICAgICAgTU9OR09MSUFOIExFVFRFUiBBTEkgR0FMSSBEQUdBTEdBXHJcblx0XHQoMHgxOTIwIDw9IGNvZGUgJiYgY29kZSA8PSAweDE5MjIpIHx8IC8vIE1uICAgWzNdIExJTUJVIFZPV0VMIFNJR04gQS4uTElNQlUgVk9XRUwgU0lHTiBVXHJcblx0XHQoMHgxOTI3IDw9IGNvZGUgJiYgY29kZSA8PSAweDE5MjgpIHx8IC8vIE1uICAgWzJdIExJTUJVIFZPV0VMIFNJR04gRS4uTElNQlUgVk9XRUwgU0lHTiBPXHJcblx0XHQweDE5MzIgPT0gY29kZSB8fCAvLyBNbiAgICAgICBMSU1CVSBTTUFMTCBMRVRURVIgQU5VU1ZBUkFcclxuXHRcdCgweDE5MzkgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTkzQikgfHwgLy8gTW4gICBbM10gTElNQlUgU0lHTiBNVUtQSFJFTkcuLkxJTUJVIFNJR04gU0EtSVxyXG5cdFx0KDB4MUExNyA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQTE4KSB8fCAvLyBNbiAgIFsyXSBCVUdJTkVTRSBWT1dFTCBTSUdOIEkuLkJVR0lORVNFIFZPV0VMIFNJR04gVVxyXG5cdFx0MHgxQTFCID09IGNvZGUgfHwgLy8gTW4gICAgICAgQlVHSU5FU0UgVk9XRUwgU0lHTiBBRVxyXG5cdFx0MHgxQTU2ID09IGNvZGUgfHwgLy8gTW4gICAgICAgVEFJIFRIQU0gQ09OU09OQU5UIFNJR04gTUVESUFMIExBXHJcblx0XHQoMHgxQTU4IDw9IGNvZGUgJiYgY29kZSA8PSAweDFBNUUpIHx8IC8vIE1uICAgWzddIFRBSSBUSEFNIFNJR04gTUFJIEtBTkcgTEFJLi5UQUkgVEhBTSBDT05TT05BTlQgU0lHTiBTQVxyXG5cdFx0MHgxQTYwID09IGNvZGUgfHwgLy8gTW4gICAgICAgVEFJIFRIQU0gU0lHTiBTQUtPVFxyXG5cdFx0MHgxQTYyID09IGNvZGUgfHwgLy8gTW4gICAgICAgVEFJIFRIQU0gVk9XRUwgU0lHTiBNQUkgU0FUXHJcblx0XHQoMHgxQTY1IDw9IGNvZGUgJiYgY29kZSA8PSAweDFBNkMpIHx8IC8vIE1uICAgWzhdIFRBSSBUSEFNIFZPV0VMIFNJR04gSS4uVEFJIFRIQU0gVk9XRUwgU0lHTiBPQSBCRUxPV1xyXG5cdFx0KDB4MUE3MyA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQTdDKSB8fCAvLyBNbiAgWzEwXSBUQUkgVEhBTSBWT1dFTCBTSUdOIE9BIEFCT1ZFLi5UQUkgVEhBTSBTSUdOIEtIVUVOLUxVRSBLQVJBTlxyXG5cdFx0MHgxQTdGID09IGNvZGUgfHwgLy8gTW4gICAgICAgVEFJIFRIQU0gQ09NQklOSU5HIENSWVBUT0dSQU1NSUMgRE9UXHJcblx0XHQoMHgxQUIwIDw9IGNvZGUgJiYgY29kZSA8PSAweDFBQkQpIHx8IC8vIE1uICBbMTRdIENPTUJJTklORyBET1VCTEVEIENJUkNVTUZMRVggQUNDRU5ULi5DT01CSU5JTkcgUEFSRU5USEVTRVMgQkVMT1dcclxuXHRcdDB4MUFCRSA9PSBjb2RlIHx8IC8vIE1lICAgICAgIENPTUJJTklORyBQQVJFTlRIRVNFUyBPVkVSTEFZXHJcblx0XHQoMHgxQjAwIDw9IGNvZGUgJiYgY29kZSA8PSAweDFCMDMpIHx8IC8vIE1uICAgWzRdIEJBTElORVNFIFNJR04gVUxVIFJJQ0VNLi5CQUxJTkVTRSBTSUdOIFNVUkFOR1xyXG5cdFx0MHgxQjM0ID09IGNvZGUgfHwgLy8gTW4gICAgICAgQkFMSU5FU0UgU0lHTiBSRVJFS0FOXHJcblx0XHQoMHgxQjM2IDw9IGNvZGUgJiYgY29kZSA8PSAweDFCM0EpIHx8IC8vIE1uICAgWzVdIEJBTElORVNFIFZPV0VMIFNJR04gVUxVLi5CQUxJTkVTRSBWT1dFTCBTSUdOIFJBIFJFUEFcclxuXHRcdDB4MUIzQyA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEJBTElORVNFIFZPV0VMIFNJR04gTEEgTEVOR0FcclxuXHRcdDB4MUI0MiA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEJBTElORVNFIFZPV0VMIFNJR04gUEVQRVRcclxuXHRcdCgweDFCNkIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUI3MykgfHwgLy8gTW4gICBbOV0gQkFMSU5FU0UgTVVTSUNBTCBTWU1CT0wgQ09NQklOSU5HIFRFR0VILi5CQUxJTkVTRSBNVVNJQ0FMIFNZTUJPTCBDT01CSU5JTkcgR09OR1xyXG5cdFx0KDB4MUI4MCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQjgxKSB8fCAvLyBNbiAgIFsyXSBTVU5EQU5FU0UgU0lHTiBQQU5ZRUNFSy4uU1VOREFORVNFIFNJR04gUEFOR0xBWUFSXHJcblx0XHQoMHgxQkEyIDw9IGNvZGUgJiYgY29kZSA8PSAweDFCQTUpIHx8IC8vIE1uICAgWzRdIFNVTkRBTkVTRSBDT05TT05BTlQgU0lHTiBQQU5ZQUtSQS4uU1VOREFORVNFIFZPV0VMIFNJR04gUEFOWVVLVVxyXG5cdFx0KDB4MUJBOCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQkE5KSB8fCAvLyBNbiAgIFsyXSBTVU5EQU5FU0UgVk9XRUwgU0lHTiBQQU1FUEVULi5TVU5EQU5FU0UgVk9XRUwgU0lHTiBQQU5FVUxFVU5HXHJcblx0XHQoMHgxQkFCIDw9IGNvZGUgJiYgY29kZSA8PSAweDFCQUQpIHx8IC8vIE1uICAgWzNdIFNVTkRBTkVTRSBTSUdOIFZJUkFNQS4uU1VOREFORVNFIENPTlNPTkFOVCBTSUdOIFBBU0FOR0FOIFdBXHJcblx0XHQweDFCRTYgPT0gY29kZSB8fCAvLyBNbiAgICAgICBCQVRBSyBTSUdOIFRPTVBJXHJcblx0XHQoMHgxQkU4IDw9IGNvZGUgJiYgY29kZSA8PSAweDFCRTkpIHx8IC8vIE1uICAgWzJdIEJBVEFLIFZPV0VMIFNJR04gUEFLUEFLIEUuLkJBVEFLIFZPV0VMIFNJR04gRUVcclxuXHRcdDB4MUJFRCA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEJBVEFLIFZPV0VMIFNJR04gS0FSTyBPXHJcblx0XHQoMHgxQkVGIDw9IGNvZGUgJiYgY29kZSA8PSAweDFCRjEpIHx8IC8vIE1uICAgWzNdIEJBVEFLIFZPV0VMIFNJR04gVSBGT1IgU0lNQUxVTkdVTiBTQS4uQkFUQUsgQ09OU09OQU5UIFNJR04gSFxyXG5cdFx0KDB4MUMyQyA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQzMzKSB8fCAvLyBNbiAgIFs4XSBMRVBDSEEgVk9XRUwgU0lHTiBFLi5MRVBDSEEgQ09OU09OQU5UIFNJR04gVFxyXG5cdFx0KDB4MUMzNiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQzM3KSB8fCAvLyBNbiAgIFsyXSBMRVBDSEEgU0lHTiBSQU4uLkxFUENIQSBTSUdOIE5VS1RBXHJcblx0XHQoMHgxQ0QwIDw9IGNvZGUgJiYgY29kZSA8PSAweDFDRDIpIHx8IC8vIE1uICAgWzNdIFZFRElDIFRPTkUgS0FSU0hBTkEuLlZFRElDIFRPTkUgUFJFTktIQVxyXG5cdFx0KDB4MUNENCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQ0UwKSB8fCAvLyBNbiAgWzEzXSBWRURJQyBTSUdOIFlBSlVSVkVESUMgTUlETElORSBTVkFSSVRBLi5WRURJQyBUT05FIFJJR1ZFRElDIEtBU0hNSVJJIElOREVQRU5ERU5UIFNWQVJJVEFcclxuXHRcdCgweDFDRTIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUNFOCkgfHwgLy8gTW4gICBbN10gVkVESUMgU0lHTiBWSVNBUkdBIFNWQVJJVEEuLlZFRElDIFNJR04gVklTQVJHQSBBTlVEQVRUQSBXSVRIIFRBSUxcclxuXHRcdDB4MUNFRCA9PSBjb2RlIHx8IC8vIE1uICAgICAgIFZFRElDIFNJR04gVElSWUFLXHJcblx0XHQweDFDRjQgPT0gY29kZSB8fCAvLyBNbiAgICAgICBWRURJQyBUT05FIENBTkRSQSBBQk9WRVxyXG5cdFx0KDB4MUNGOCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQ0Y5KSB8fCAvLyBNbiAgIFsyXSBWRURJQyBUT05FIFJJTkcgQUJPVkUuLlZFRElDIFRPTkUgRE9VQkxFIFJJTkcgQUJPVkVcclxuXHRcdCgweDFEQzAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MURGOSkgfHwgLy8gTW4gIFs1OF0gQ09NQklOSU5HIERPVFRFRCBHUkFWRSBBQ0NFTlQuLkNPTUJJTklORyBXSURFIElOVkVSVEVEIEJSSURHRSBCRUxPV1xyXG5cdFx0KDB4MURGQiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxREZGKSB8fCAvLyBNbiAgIFs1XSBDT01CSU5JTkcgREVMRVRJT04gTUFSSy4uQ09NQklOSU5HIFJJR0hUIEFSUk9XSEVBRCBBTkQgRE9XTiBBUlJPV0hFQUQgQkVMT1dcclxuXHRcdDB4MjAwQyA9PSBjb2RlIHx8IC8vIENmICAgICAgIFpFUk8gV0lEVEggTk9OLUpPSU5FUlxyXG5cdFx0KDB4MjBEMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgyMERDKSB8fCAvLyBNbiAgWzEzXSBDT01CSU5JTkcgTEVGVCBIQVJQT09OIEFCT1ZFLi5DT01CSU5JTkcgRk9VUiBET1RTIEFCT1ZFXHJcblx0XHQoMHgyMEREIDw9IGNvZGUgJiYgY29kZSA8PSAweDIwRTApIHx8IC8vIE1lICAgWzRdIENPTUJJTklORyBFTkNMT1NJTkcgQ0lSQ0xFLi5DT01CSU5JTkcgRU5DTE9TSU5HIENJUkNMRSBCQUNLU0xBU0hcclxuXHRcdDB4MjBFMSA9PSBjb2RlIHx8IC8vIE1uICAgICAgIENPTUJJTklORyBMRUZUIFJJR0hUIEFSUk9XIEFCT1ZFXHJcblx0XHQoMHgyMEUyIDw9IGNvZGUgJiYgY29kZSA8PSAweDIwRTQpIHx8IC8vIE1lICAgWzNdIENPTUJJTklORyBFTkNMT1NJTkcgU0NSRUVOLi5DT01CSU5JTkcgRU5DTE9TSU5HIFVQV0FSRCBQT0lOVElORyBUUklBTkdMRVxyXG5cdFx0KDB4MjBFNSA8PSBjb2RlICYmIGNvZGUgPD0gMHgyMEYwKSB8fCAvLyBNbiAgWzEyXSBDT01CSU5JTkcgUkVWRVJTRSBTT0xJRFVTIE9WRVJMQVkuLkNPTUJJTklORyBBU1RFUklTSyBBQk9WRVxyXG5cdFx0KDB4MkNFRiA8PSBjb2RlICYmIGNvZGUgPD0gMHgyQ0YxKSB8fCAvLyBNbiAgIFszXSBDT1BUSUMgQ09NQklOSU5HIE5JIEFCT1ZFLi5DT1BUSUMgQ09NQklOSU5HIFNQSVJJVFVTIExFTklTXHJcblx0XHQweDJEN0YgPT0gY29kZSB8fCAvLyBNbiAgICAgICBUSUZJTkFHSCBDT05TT05BTlQgSk9JTkVSXHJcblx0XHQoMHgyREUwIDw9IGNvZGUgJiYgY29kZSA8PSAweDJERkYpIHx8IC8vIE1uICBbMzJdIENPTUJJTklORyBDWVJJTExJQyBMRVRURVIgQkUuLkNPTUJJTklORyBDWVJJTExJQyBMRVRURVIgSU9USUZJRUQgQklHIFlVU1xyXG5cdFx0KDB4MzAyQSA8PSBjb2RlICYmIGNvZGUgPD0gMHgzMDJEKSB8fCAvLyBNbiAgIFs0XSBJREVPR1JBUEhJQyBMRVZFTCBUT05FIE1BUksuLklERU9HUkFQSElDIEVOVEVSSU5HIFRPTkUgTUFSS1xyXG5cdFx0KDB4MzAyRSA8PSBjb2RlICYmIGNvZGUgPD0gMHgzMDJGKSB8fCAvLyBNYyAgIFsyXSBIQU5HVUwgU0lOR0xFIERPVCBUT05FIE1BUksuLkhBTkdVTCBET1VCTEUgRE9UIFRPTkUgTUFSS1xyXG5cdFx0KDB4MzA5OSA8PSBjb2RlICYmIGNvZGUgPD0gMHgzMDlBKSB8fCAvLyBNbiAgIFsyXSBDT01CSU5JTkcgS0FUQUtBTkEtSElSQUdBTkEgVk9JQ0VEIFNPVU5EIE1BUksuLkNPTUJJTklORyBLQVRBS0FOQS1ISVJBR0FOQSBTRU1JLVZPSUNFRCBTT1VORCBNQVJLXHJcblx0XHQweEE2NkYgPT0gY29kZSB8fCAvLyBNbiAgICAgICBDT01CSU5JTkcgQ1lSSUxMSUMgVlpNRVRcclxuXHRcdCgweEE2NzAgPD0gY29kZSAmJiBjb2RlIDw9IDB4QTY3MikgfHwgLy8gTWUgICBbM10gQ09NQklOSU5HIENZUklMTElDIFRFTiBNSUxMSU9OUyBTSUdOLi5DT01CSU5JTkcgQ1lSSUxMSUMgVEhPVVNBTkQgTUlMTElPTlMgU0lHTlxyXG5cdFx0KDB4QTY3NCA8PSBjb2RlICYmIGNvZGUgPD0gMHhBNjdEKSB8fCAvLyBNbiAgWzEwXSBDT01CSU5JTkcgQ1lSSUxMSUMgTEVUVEVSIFVLUkFJTklBTiBJRS4uQ09NQklOSU5HIENZUklMTElDIFBBWUVST0tcclxuXHRcdCgweEE2OUUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QTY5RikgfHwgLy8gTW4gICBbMl0gQ09NQklOSU5HIENZUklMTElDIExFVFRFUiBFRi4uQ09NQklOSU5HIENZUklMTElDIExFVFRFUiBJT1RJRklFRCBFXHJcblx0XHQoMHhBNkYwIDw9IGNvZGUgJiYgY29kZSA8PSAweEE2RjEpIHx8IC8vIE1uICAgWzJdIEJBTVVNIENPTUJJTklORyBNQVJLIEtPUU5ET04uLkJBTVVNIENPTUJJTklORyBNQVJLIFRVS1dFTlRJU1xyXG5cdFx0MHhBODAyID09IGNvZGUgfHwgLy8gTW4gICAgICAgU1lMT1RJIE5BR1JJIFNJR04gRFZJU1ZBUkFcclxuXHRcdDB4QTgwNiA9PSBjb2RlIHx8IC8vIE1uICAgICAgIFNZTE9USSBOQUdSSSBTSUdOIEhBU0FOVEFcclxuXHRcdDB4QTgwQiA9PSBjb2RlIHx8IC8vIE1uICAgICAgIFNZTE9USSBOQUdSSSBTSUdOIEFOVVNWQVJBXHJcblx0XHQoMHhBODI1IDw9IGNvZGUgJiYgY29kZSA8PSAweEE4MjYpIHx8IC8vIE1uICAgWzJdIFNZTE9USSBOQUdSSSBWT1dFTCBTSUdOIFUuLlNZTE9USSBOQUdSSSBWT1dFTCBTSUdOIEVcclxuXHRcdCgweEE4QzQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QThDNSkgfHwgLy8gTW4gICBbMl0gU0FVUkFTSFRSQSBTSUdOIFZJUkFNQS4uU0FVUkFTSFRSQSBTSUdOIENBTkRSQUJJTkRVXHJcblx0XHQoMHhBOEUwIDw9IGNvZGUgJiYgY29kZSA8PSAweEE4RjEpIHx8IC8vIE1uICBbMThdIENPTUJJTklORyBERVZBTkFHQVJJIERJR0lUIFpFUk8uLkNPTUJJTklORyBERVZBTkFHQVJJIFNJR04gQVZBR1JBSEFcclxuXHRcdCgweEE5MjYgPD0gY29kZSAmJiBjb2RlIDw9IDB4QTkyRCkgfHwgLy8gTW4gICBbOF0gS0FZQUggTEkgVk9XRUwgVUUuLktBWUFIIExJIFRPTkUgQ0FMWUEgUExPUEhVXHJcblx0XHQoMHhBOTQ3IDw9IGNvZGUgJiYgY29kZSA8PSAweEE5NTEpIHx8IC8vIE1uICBbMTFdIFJFSkFORyBWT1dFTCBTSUdOIEkuLlJFSkFORyBDT05TT05BTlQgU0lHTiBSXHJcblx0XHQoMHhBOTgwIDw9IGNvZGUgJiYgY29kZSA8PSAweEE5ODIpIHx8IC8vIE1uICAgWzNdIEpBVkFORVNFIFNJR04gUEFOWUFOR0dBLi5KQVZBTkVTRSBTSUdOIExBWUFSXHJcblx0XHQweEE5QjMgPT0gY29kZSB8fCAvLyBNbiAgICAgICBKQVZBTkVTRSBTSUdOIENFQ0FLIFRFTFVcclxuXHRcdCgweEE5QjYgPD0gY29kZSAmJiBjb2RlIDw9IDB4QTlCOSkgfHwgLy8gTW4gICBbNF0gSkFWQU5FU0UgVk9XRUwgU0lHTiBXVUxVLi5KQVZBTkVTRSBWT1dFTCBTSUdOIFNVS1UgTUVORFVUXHJcblx0XHQweEE5QkMgPT0gY29kZSB8fCAvLyBNbiAgICAgICBKQVZBTkVTRSBWT1dFTCBTSUdOIFBFUEVUXHJcblx0XHQweEE5RTUgPT0gY29kZSB8fCAvLyBNbiAgICAgICBNWUFOTUFSIFNJR04gU0hBTiBTQVdcclxuXHRcdCgweEFBMjkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUEyRSkgfHwgLy8gTW4gICBbNl0gQ0hBTSBWT1dFTCBTSUdOIEFBLi5DSEFNIFZPV0VMIFNJR04gT0VcclxuXHRcdCgweEFBMzEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUEzMikgfHwgLy8gTW4gICBbMl0gQ0hBTSBWT1dFTCBTSUdOIEFVLi5DSEFNIFZPV0VMIFNJR04gVUVcclxuXHRcdCgweEFBMzUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUEzNikgfHwgLy8gTW4gICBbMl0gQ0hBTSBDT05TT05BTlQgU0lHTiBMQS4uQ0hBTSBDT05TT05BTlQgU0lHTiBXQVxyXG5cdFx0MHhBQTQzID09IGNvZGUgfHwgLy8gTW4gICAgICAgQ0hBTSBDT05TT05BTlQgU0lHTiBGSU5BTCBOR1xyXG5cdFx0MHhBQTRDID09IGNvZGUgfHwgLy8gTW4gICAgICAgQ0hBTSBDT05TT05BTlQgU0lHTiBGSU5BTCBNXHJcblx0XHQweEFBN0MgPT0gY29kZSB8fCAvLyBNbiAgICAgICBNWUFOTUFSIFNJR04gVEFJIExBSU5HIFRPTkUtMlxyXG5cdFx0MHhBQUIwID09IGNvZGUgfHwgLy8gTW4gICAgICAgVEFJIFZJRVQgTUFJIEtBTkdcclxuXHRcdCgweEFBQjIgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUFCNCkgfHwgLy8gTW4gICBbM10gVEFJIFZJRVQgVk9XRUwgSS4uVEFJIFZJRVQgVk9XRUwgVVxyXG5cdFx0KDB4QUFCNyA8PSBjb2RlICYmIGNvZGUgPD0gMHhBQUI4KSB8fCAvLyBNbiAgIFsyXSBUQUkgVklFVCBNQUkgS0hJVC4uVEFJIFZJRVQgVk9XRUwgSUFcclxuXHRcdCgweEFBQkUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUFCRikgfHwgLy8gTW4gICBbMl0gVEFJIFZJRVQgVk9XRUwgQU0uLlRBSSBWSUVUIFRPTkUgTUFJIEVLXHJcblx0XHQweEFBQzEgPT0gY29kZSB8fCAvLyBNbiAgICAgICBUQUkgVklFVCBUT05FIE1BSSBUSE9cclxuXHRcdCgweEFBRUMgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUFFRCkgfHwgLy8gTW4gICBbMl0gTUVFVEVJIE1BWUVLIFZPV0VMIFNJR04gVVUuLk1FRVRFSSBNQVlFSyBWT1dFTCBTSUdOIEFBSVxyXG5cdFx0MHhBQUY2ID09IGNvZGUgfHwgLy8gTW4gICAgICAgTUVFVEVJIE1BWUVLIFZJUkFNQVxyXG5cdFx0MHhBQkU1ID09IGNvZGUgfHwgLy8gTW4gICAgICAgTUVFVEVJIE1BWUVLIFZPV0VMIFNJR04gQU5BUFxyXG5cdFx0MHhBQkU4ID09IGNvZGUgfHwgLy8gTW4gICAgICAgTUVFVEVJIE1BWUVLIFZPV0VMIFNJR04gVU5BUFxyXG5cdFx0MHhBQkVEID09IGNvZGUgfHwgLy8gTW4gICAgICAgTUVFVEVJIE1BWUVLIEFQVU4gSVlFS1xyXG5cdFx0MHhGQjFFID09IGNvZGUgfHwgLy8gTW4gICAgICAgSEVCUkVXIFBPSU5UIEpVREVPLVNQQU5JU0ggVkFSSUtBXHJcblx0XHQoMHhGRTAwIDw9IGNvZGUgJiYgY29kZSA8PSAweEZFMEYpIHx8IC8vIE1uICBbMTZdIFZBUklBVElPTiBTRUxFQ1RPUi0xLi5WQVJJQVRJT04gU0VMRUNUT1ItMTZcclxuXHRcdCgweEZFMjAgPD0gY29kZSAmJiBjb2RlIDw9IDB4RkUyRikgfHwgLy8gTW4gIFsxNl0gQ09NQklOSU5HIExJR0FUVVJFIExFRlQgSEFMRi4uQ09NQklOSU5HIENZUklMTElDIFRJVExPIFJJR0hUIEhBTEZcclxuXHRcdCgweEZGOUUgPD0gY29kZSAmJiBjb2RlIDw9IDB4RkY5RikgfHwgLy8gTG0gICBbMl0gSEFMRldJRFRIIEtBVEFLQU5BIFZPSUNFRCBTT1VORCBNQVJLLi5IQUxGV0lEVEggS0FUQUtBTkEgU0VNSS1WT0lDRUQgU09VTkQgTUFSS1xyXG5cdFx0MHgxMDFGRCA9PSBjb2RlIHx8IC8vIE1uICAgICAgIFBIQUlTVE9TIERJU0MgU0lHTiBDT01CSU5JTkcgT0JMSVFVRSBTVFJPS0VcclxuXHRcdDB4MTAyRTAgPT0gY29kZSB8fCAvLyBNbiAgICAgICBDT1BUSUMgRVBBQ1QgVEhPVVNBTkRTIE1BUktcclxuXHRcdCgweDEwMzc2IDw9IGNvZGUgJiYgY29kZSA8PSAweDEwMzdBKSB8fCAvLyBNbiAgIFs1XSBDT01CSU5JTkcgT0xEIFBFUk1JQyBMRVRURVIgQU4uLkNPTUJJTklORyBPTEQgUEVSTUlDIExFVFRFUiBTSUlcclxuXHRcdCgweDEwQTAxIDw9IGNvZGUgJiYgY29kZSA8PSAweDEwQTAzKSB8fCAvLyBNbiAgIFszXSBLSEFST1NIVEhJIFZPV0VMIFNJR04gSS4uS0hBUk9TSFRISSBWT1dFTCBTSUdOIFZPQ0FMSUMgUlxyXG5cdFx0KDB4MTBBMDUgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTBBMDYpIHx8IC8vIE1uICAgWzJdIEtIQVJPU0hUSEkgVk9XRUwgU0lHTiBFLi5LSEFST1NIVEhJIFZPV0VMIFNJR04gT1xyXG5cdFx0KDB4MTBBMEMgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTBBMEYpIHx8IC8vIE1uICAgWzRdIEtIQVJPU0hUSEkgVk9XRUwgTEVOR1RIIE1BUksuLktIQVJPU0hUSEkgU0lHTiBWSVNBUkdBXHJcblx0XHQoMHgxMEEzOCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMEEzQSkgfHwgLy8gTW4gICBbM10gS0hBUk9TSFRISSBTSUdOIEJBUiBBQk9WRS4uS0hBUk9TSFRISSBTSUdOIERPVCBCRUxPV1xyXG5cdFx0MHgxMEEzRiA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEtIQVJPU0hUSEkgVklSQU1BXHJcblx0XHQoMHgxMEFFNSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMEFFNikgfHwgLy8gTW4gICBbMl0gTUFOSUNIQUVBTiBBQkJSRVZJQVRJT04gTUFSSyBBQk9WRS4uTUFOSUNIQUVBTiBBQkJSRVZJQVRJT04gTUFSSyBCRUxPV1xyXG5cdFx0MHgxMTAwMSA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEJSQUhNSSBTSUdOIEFOVVNWQVJBXHJcblx0XHQoMHgxMTAzOCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTA0NikgfHwgLy8gTW4gIFsxNV0gQlJBSE1JIFZPV0VMIFNJR04gQUEuLkJSQUhNSSBWSVJBTUFcclxuXHRcdCgweDExMDdGIDw9IGNvZGUgJiYgY29kZSA8PSAweDExMDgxKSB8fCAvLyBNbiAgIFszXSBCUkFITUkgTlVNQkVSIEpPSU5FUi4uS0FJVEhJIFNJR04gQU5VU1ZBUkFcclxuXHRcdCgweDExMEIzIDw9IGNvZGUgJiYgY29kZSA8PSAweDExMEI2KSB8fCAvLyBNbiAgIFs0XSBLQUlUSEkgVk9XRUwgU0lHTiBVLi5LQUlUSEkgVk9XRUwgU0lHTiBBSVxyXG5cdFx0KDB4MTEwQjkgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTEwQkEpIHx8IC8vIE1uICAgWzJdIEtBSVRISSBTSUdOIFZJUkFNQS4uS0FJVEhJIFNJR04gTlVLVEFcclxuXHRcdCgweDExMTAwIDw9IGNvZGUgJiYgY29kZSA8PSAweDExMTAyKSB8fCAvLyBNbiAgIFszXSBDSEFLTUEgU0lHTiBDQU5EUkFCSU5EVS4uQ0hBS01BIFNJR04gVklTQVJHQVxyXG5cdFx0KDB4MTExMjcgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTExMkIpIHx8IC8vIE1uICAgWzVdIENIQUtNQSBWT1dFTCBTSUdOIEEuLkNIQUtNQSBWT1dFTCBTSUdOIFVVXHJcblx0XHQoMHgxMTEyRCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTEzNCkgfHwgLy8gTW4gICBbOF0gQ0hBS01BIFZPV0VMIFNJR04gQUkuLkNIQUtNQSBNQUFZWUFBXHJcblx0XHQweDExMTczID09IGNvZGUgfHwgLy8gTW4gICAgICAgTUFIQUpBTkkgU0lHTiBOVUtUQVxyXG5cdFx0KDB4MTExODAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTExODEpIHx8IC8vIE1uICAgWzJdIFNIQVJBREEgU0lHTiBDQU5EUkFCSU5EVS4uU0hBUkFEQSBTSUdOIEFOVVNWQVJBXHJcblx0XHQoMHgxMTFCNiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTFCRSkgfHwgLy8gTW4gICBbOV0gU0hBUkFEQSBWT1dFTCBTSUdOIFUuLlNIQVJBREEgVk9XRUwgU0lHTiBPXHJcblx0XHQoMHgxMTFDQSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTFDQykgfHwgLy8gTW4gICBbM10gU0hBUkFEQSBTSUdOIE5VS1RBLi5TSEFSQURBIEVYVFJBIFNIT1JUIFZPV0VMIE1BUktcclxuXHRcdCgweDExMjJGIDw9IGNvZGUgJiYgY29kZSA8PSAweDExMjMxKSB8fCAvLyBNbiAgIFszXSBLSE9KS0kgVk9XRUwgU0lHTiBVLi5LSE9KS0kgVk9XRUwgU0lHTiBBSVxyXG5cdFx0MHgxMTIzNCA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEtIT0pLSSBTSUdOIEFOVVNWQVJBXHJcblx0XHQoMHgxMTIzNiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTIzNykgfHwgLy8gTW4gICBbMl0gS0hPSktJIFNJR04gTlVLVEEuLktIT0pLSSBTSUdOIFNIQUREQVxyXG5cdFx0MHgxMTIzRSA9PSBjb2RlIHx8IC8vIE1uICAgICAgIEtIT0pLSSBTSUdOIFNVS1VOXHJcblx0XHQweDExMkRGID09IGNvZGUgfHwgLy8gTW4gICAgICAgS0hVREFXQURJIFNJR04gQU5VU1ZBUkFcclxuXHRcdCgweDExMkUzIDw9IGNvZGUgJiYgY29kZSA8PSAweDExMkVBKSB8fCAvLyBNbiAgIFs4XSBLSFVEQVdBREkgVk9XRUwgU0lHTiBVLi5LSFVEQVdBREkgU0lHTiBWSVJBTUFcclxuXHRcdCgweDExMzAwIDw9IGNvZGUgJiYgY29kZSA8PSAweDExMzAxKSB8fCAvLyBNbiAgIFsyXSBHUkFOVEhBIFNJR04gQ09NQklOSU5HIEFOVVNWQVJBIEFCT1ZFLi5HUkFOVEhBIFNJR04gQ0FORFJBQklORFVcclxuXHRcdDB4MTEzM0MgPT0gY29kZSB8fCAvLyBNbiAgICAgICBHUkFOVEhBIFNJR04gTlVLVEFcclxuXHRcdDB4MTEzM0UgPT0gY29kZSB8fCAvLyBNYyAgICAgICBHUkFOVEhBIFZPV0VMIFNJR04gQUFcclxuXHRcdDB4MTEzNDAgPT0gY29kZSB8fCAvLyBNbiAgICAgICBHUkFOVEhBIFZPV0VMIFNJR04gSUlcclxuXHRcdDB4MTEzNTcgPT0gY29kZSB8fCAvLyBNYyAgICAgICBHUkFOVEhBIEFVIExFTkdUSCBNQVJLXHJcblx0XHQoMHgxMTM2NiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTM2QykgfHwgLy8gTW4gICBbN10gQ09NQklOSU5HIEdSQU5USEEgRElHSVQgWkVSTy4uQ09NQklOSU5HIEdSQU5USEEgRElHSVQgU0lYXHJcblx0XHQoMHgxMTM3MCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTM3NCkgfHwgLy8gTW4gICBbNV0gQ09NQklOSU5HIEdSQU5USEEgTEVUVEVSIEEuLkNPTUJJTklORyBHUkFOVEhBIExFVFRFUiBQQVxyXG5cdFx0KDB4MTE0MzggPD0gY29kZSAmJiBjb2RlIDw9IDB4MTE0M0YpIHx8IC8vIE1uICAgWzhdIE5FV0EgVk9XRUwgU0lHTiBVLi5ORVdBIFZPV0VMIFNJR04gQUlcclxuXHRcdCgweDExNDQyIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNDQ0KSB8fCAvLyBNbiAgIFszXSBORVdBIFNJR04gVklSQU1BLi5ORVdBIFNJR04gQU5VU1ZBUkFcclxuXHRcdDB4MTE0NDYgPT0gY29kZSB8fCAvLyBNbiAgICAgICBORVdBIFNJR04gTlVLVEFcclxuXHRcdDB4MTE0QjAgPT0gY29kZSB8fCAvLyBNYyAgICAgICBUSVJIVVRBIFZPV0VMIFNJR04gQUFcclxuXHRcdCgweDExNEIzIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNEI4KSB8fCAvLyBNbiAgIFs2XSBUSVJIVVRBIFZPV0VMIFNJR04gVS4uVElSSFVUQSBWT1dFTCBTSUdOIFZPQ0FMSUMgTExcclxuXHRcdDB4MTE0QkEgPT0gY29kZSB8fCAvLyBNbiAgICAgICBUSVJIVVRBIFZPV0VMIFNJR04gU0hPUlQgRVxyXG5cdFx0MHgxMTRCRCA9PSBjb2RlIHx8IC8vIE1jICAgICAgIFRJUkhVVEEgVk9XRUwgU0lHTiBTSE9SVCBPXHJcblx0XHQoMHgxMTRCRiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTRDMCkgfHwgLy8gTW4gICBbMl0gVElSSFVUQSBTSUdOIENBTkRSQUJJTkRVLi5USVJIVVRBIFNJR04gQU5VU1ZBUkFcclxuXHRcdCgweDExNEMyIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNEMzKSB8fCAvLyBNbiAgIFsyXSBUSVJIVVRBIFNJR04gVklSQU1BLi5USVJIVVRBIFNJR04gTlVLVEFcclxuXHRcdDB4MTE1QUYgPT0gY29kZSB8fCAvLyBNYyAgICAgICBTSURESEFNIFZPV0VMIFNJR04gQUFcclxuXHRcdCgweDExNUIyIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNUI1KSB8fCAvLyBNbiAgIFs0XSBTSURESEFNIFZPV0VMIFNJR04gVS4uU0lEREhBTSBWT1dFTCBTSUdOIFZPQ0FMSUMgUlJcclxuXHRcdCgweDExNUJDIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNUJEKSB8fCAvLyBNbiAgIFsyXSBTSURESEFNIFNJR04gQ0FORFJBQklORFUuLlNJRERIQU0gU0lHTiBBTlVTVkFSQVxyXG5cdFx0KDB4MTE1QkYgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTE1QzApIHx8IC8vIE1uICAgWzJdIFNJRERIQU0gU0lHTiBWSVJBTUEuLlNJRERIQU0gU0lHTiBOVUtUQVxyXG5cdFx0KDB4MTE1REMgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTE1REQpIHx8IC8vIE1uICAgWzJdIFNJRERIQU0gVk9XRUwgU0lHTiBBTFRFUk5BVEUgVS4uU0lEREhBTSBWT1dFTCBTSUdOIEFMVEVSTkFURSBVVVxyXG5cdFx0KDB4MTE2MzMgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTE2M0EpIHx8IC8vIE1uICAgWzhdIE1PREkgVk9XRUwgU0lHTiBVLi5NT0RJIFZPV0VMIFNJR04gQUlcclxuXHRcdDB4MTE2M0QgPT0gY29kZSB8fCAvLyBNbiAgICAgICBNT0RJIFNJR04gQU5VU1ZBUkFcclxuXHRcdCgweDExNjNGIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNjQwKSB8fCAvLyBNbiAgIFsyXSBNT0RJIFNJR04gVklSQU1BLi5NT0RJIFNJR04gQVJESEFDQU5EUkFcclxuXHRcdDB4MTE2QUIgPT0gY29kZSB8fCAvLyBNbiAgICAgICBUQUtSSSBTSUdOIEFOVVNWQVJBXHJcblx0XHQweDExNkFEID09IGNvZGUgfHwgLy8gTW4gICAgICAgVEFLUkkgVk9XRUwgU0lHTiBBQVxyXG5cdFx0KDB4MTE2QjAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTE2QjUpIHx8IC8vIE1uICAgWzZdIFRBS1JJIFZPV0VMIFNJR04gVS4uVEFLUkkgVk9XRUwgU0lHTiBBVVxyXG5cdFx0MHgxMTZCNyA9PSBjb2RlIHx8IC8vIE1uICAgICAgIFRBS1JJIFNJR04gTlVLVEFcclxuXHRcdCgweDExNzFEIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNzFGKSB8fCAvLyBNbiAgIFszXSBBSE9NIENPTlNPTkFOVCBTSUdOIE1FRElBTCBMQS4uQUhPTSBDT05TT05BTlQgU0lHTiBNRURJQUwgTElHQVRJTkcgUkFcclxuXHRcdCgweDExNzIyIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNzI1KSB8fCAvLyBNbiAgIFs0XSBBSE9NIFZPV0VMIFNJR04gSS4uQUhPTSBWT1dFTCBTSUdOIFVVXHJcblx0XHQoMHgxMTcyNyA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTcyQikgfHwgLy8gTW4gICBbNV0gQUhPTSBWT1dFTCBTSUdOIEFXLi5BSE9NIFNJR04gS0lMTEVSXHJcblx0XHQoMHgxMUEwMSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMUEwNikgfHwgLy8gTW4gICBbNl0gWkFOQUJBWkFSIFNRVUFSRSBWT1dFTCBTSUdOIEkuLlpBTkFCQVpBUiBTUVVBUkUgVk9XRUwgU0lHTiBPXHJcblx0XHQoMHgxMUEwOSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMUEwQSkgfHwgLy8gTW4gICBbMl0gWkFOQUJBWkFSIFNRVUFSRSBWT1dFTCBTSUdOIFJFVkVSU0VEIEkuLlpBTkFCQVpBUiBTUVVBUkUgVk9XRUwgTEVOR1RIIE1BUktcclxuXHRcdCgweDExQTMzIDw9IGNvZGUgJiYgY29kZSA8PSAweDExQTM4KSB8fCAvLyBNbiAgIFs2XSBaQU5BQkFaQVIgU1FVQVJFIEZJTkFMIENPTlNPTkFOVCBNQVJLLi5aQU5BQkFaQVIgU1FVQVJFIFNJR04gQU5VU1ZBUkFcclxuXHRcdCgweDExQTNCIDw9IGNvZGUgJiYgY29kZSA8PSAweDExQTNFKSB8fCAvLyBNbiAgIFs0XSBaQU5BQkFaQVIgU1FVQVJFIENMVVNURVItRklOQUwgTEVUVEVSIFlBLi5aQU5BQkFaQVIgU1FVQVJFIENMVVNURVItRklOQUwgTEVUVEVSIFZBXHJcblx0XHQweDExQTQ3ID09IGNvZGUgfHwgLy8gTW4gICAgICAgWkFOQUJBWkFSIFNRVUFSRSBTVUJKT0lORVJcclxuXHRcdCgweDExQTUxIDw9IGNvZGUgJiYgY29kZSA8PSAweDExQTU2KSB8fCAvLyBNbiAgIFs2XSBTT1lPTUJPIFZPV0VMIFNJR04gSS4uU09ZT01CTyBWT1dFTCBTSUdOIE9FXHJcblx0XHQoMHgxMUE1OSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMUE1QikgfHwgLy8gTW4gICBbM10gU09ZT01CTyBWT1dFTCBTSUdOIFZPQ0FMSUMgUi4uU09ZT01CTyBWT1dFTCBMRU5HVEggTUFSS1xyXG5cdFx0KDB4MTFBOEEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTFBOTYpIHx8IC8vIE1uICBbMTNdIFNPWU9NQk8gRklOQUwgQ09OU09OQU5UIFNJR04gRy4uU09ZT01CTyBTSUdOIEFOVVNWQVJBXHJcblx0XHQoMHgxMUE5OCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMUE5OSkgfHwgLy8gTW4gICBbMl0gU09ZT01CTyBHRU1JTkFUSU9OIE1BUksuLlNPWU9NQk8gU1VCSk9JTkVSXHJcblx0XHQoMHgxMUMzMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMUMzNikgfHwgLy8gTW4gICBbN10gQkhBSUtTVUtJIFZPV0VMIFNJR04gSS4uQkhBSUtTVUtJIFZPV0VMIFNJR04gVk9DQUxJQyBMXHJcblx0XHQoMHgxMUMzOCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMUMzRCkgfHwgLy8gTW4gICBbNl0gQkhBSUtTVUtJIFZPV0VMIFNJR04gRS4uQkhBSUtTVUtJIFNJR04gQU5VU1ZBUkFcclxuXHRcdDB4MTFDM0YgPT0gY29kZSB8fCAvLyBNbiAgICAgICBCSEFJS1NVS0kgU0lHTiBWSVJBTUFcclxuXHRcdCgweDExQzkyIDw9IGNvZGUgJiYgY29kZSA8PSAweDExQ0E3KSB8fCAvLyBNbiAgWzIyXSBNQVJDSEVOIFNVQkpPSU5FRCBMRVRURVIgS0EuLk1BUkNIRU4gU1VCSk9JTkVEIExFVFRFUiBaQVxyXG5cdFx0KDB4MTFDQUEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTFDQjApIHx8IC8vIE1uICAgWzddIE1BUkNIRU4gU1VCSk9JTkVEIExFVFRFUiBSQS4uTUFSQ0hFTiBWT1dFTCBTSUdOIEFBXHJcblx0XHQoMHgxMUNCMiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMUNCMykgfHwgLy8gTW4gICBbMl0gTUFSQ0hFTiBWT1dFTCBTSUdOIFUuLk1BUkNIRU4gVk9XRUwgU0lHTiBFXHJcblx0XHQoMHgxMUNCNSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMUNCNikgfHwgLy8gTW4gICBbMl0gTUFSQ0hFTiBTSUdOIEFOVVNWQVJBLi5NQVJDSEVOIFNJR04gQ0FORFJBQklORFVcclxuXHRcdCgweDExRDMxIDw9IGNvZGUgJiYgY29kZSA8PSAweDExRDM2KSB8fCAvLyBNbiAgIFs2XSBNQVNBUkFNIEdPTkRJIFZPV0VMIFNJR04gQUEuLk1BU0FSQU0gR09OREkgVk9XRUwgU0lHTiBWT0NBTElDIFJcclxuXHRcdDB4MTFEM0EgPT0gY29kZSB8fCAvLyBNbiAgICAgICBNQVNBUkFNIEdPTkRJIFZPV0VMIFNJR04gRVxyXG5cdFx0KDB4MTFEM0MgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTFEM0QpIHx8IC8vIE1uICAgWzJdIE1BU0FSQU0gR09OREkgVk9XRUwgU0lHTiBBSS4uTUFTQVJBTSBHT05ESSBWT1dFTCBTSUdOIE9cclxuXHRcdCgweDExRDNGIDw9IGNvZGUgJiYgY29kZSA8PSAweDExRDQ1KSB8fCAvLyBNbiAgIFs3XSBNQVNBUkFNIEdPTkRJIFZPV0VMIFNJR04gQVUuLk1BU0FSQU0gR09OREkgVklSQU1BXHJcblx0XHQweDExRDQ3ID09IGNvZGUgfHwgLy8gTW4gICAgICAgTUFTQVJBTSBHT05ESSBSQS1LQVJBXHJcblx0XHQoMHgxNkFGMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxNkFGNCkgfHwgLy8gTW4gICBbNV0gQkFTU0EgVkFIIENPTUJJTklORyBISUdIIFRPTkUuLkJBU1NBIFZBSCBDT01CSU5JTkcgSElHSC1MT1cgVE9ORVxyXG5cdFx0KDB4MTZCMzAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTZCMzYpIHx8IC8vIE1uICAgWzddIFBBSEFXSCBITU9ORyBNQVJLIENJTSBUVUIuLlBBSEFXSCBITU9ORyBNQVJLIENJTSBUQVVNXHJcblx0XHQoMHgxNkY4RiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxNkY5MikgfHwgLy8gTW4gICBbNF0gTUlBTyBUT05FIFJJR0hULi5NSUFPIFRPTkUgQkVMT1dcclxuXHRcdCgweDFCQzlEIDw9IGNvZGUgJiYgY29kZSA8PSAweDFCQzlFKSB8fCAvLyBNbiAgIFsyXSBEVVBMT1lBTiBUSElDSyBMRVRURVIgU0VMRUNUT1IuLkRVUExPWUFOIERPVUJMRSBNQVJLXHJcblx0XHQweDFEMTY1ID09IGNvZGUgfHwgLy8gTWMgICAgICAgTVVTSUNBTCBTWU1CT0wgQ09NQklOSU5HIFNURU1cclxuXHRcdCgweDFEMTY3IDw9IGNvZGUgJiYgY29kZSA8PSAweDFEMTY5KSB8fCAvLyBNbiAgIFszXSBNVVNJQ0FMIFNZTUJPTCBDT01CSU5JTkcgVFJFTU9MTy0xLi5NVVNJQ0FMIFNZTUJPTCBDT01CSU5JTkcgVFJFTU9MTy0zXHJcblx0XHQoMHgxRDE2RSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRDE3MikgfHwgLy8gTWMgICBbNV0gTVVTSUNBTCBTWU1CT0wgQ09NQklOSU5HIEZMQUctMS4uTVVTSUNBTCBTWU1CT0wgQ09NQklOSU5HIEZMQUctNVxyXG5cdFx0KDB4MUQxN0IgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUQxODIpIHx8IC8vIE1uICAgWzhdIE1VU0lDQUwgU1lNQk9MIENPTUJJTklORyBBQ0NFTlQuLk1VU0lDQUwgU1lNQk9MIENPTUJJTklORyBMT1VSRVxyXG5cdFx0KDB4MUQxODUgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUQxOEIpIHx8IC8vIE1uICAgWzddIE1VU0lDQUwgU1lNQk9MIENPTUJJTklORyBET0lULi5NVVNJQ0FMIFNZTUJPTCBDT01CSU5JTkcgVFJJUExFIFRPTkdVRVxyXG5cdFx0KDB4MUQxQUEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUQxQUQpIHx8IC8vIE1uICAgWzRdIE1VU0lDQUwgU1lNQk9MIENPTUJJTklORyBET1dOIEJPVy4uTVVTSUNBTCBTWU1CT0wgQ09NQklOSU5HIFNOQVAgUElaWklDQVRPXHJcblx0XHQoMHgxRDI0MiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRDI0NCkgfHwgLy8gTW4gICBbM10gQ09NQklOSU5HIEdSRUVLIE1VU0lDQUwgVFJJU0VNRS4uQ09NQklOSU5HIEdSRUVLIE1VU0lDQUwgUEVOVEFTRU1FXHJcblx0XHQoMHgxREEwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxREEzNikgfHwgLy8gTW4gIFs1NV0gU0lHTldSSVRJTkcgSEVBRCBSSU0uLlNJR05XUklUSU5HIEFJUiBTVUNLSU5HIElOXHJcblx0XHQoMHgxREEzQiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxREE2QykgfHwgLy8gTW4gIFs1MF0gU0lHTldSSVRJTkcgTU9VVEggQ0xPU0VEIE5FVVRSQUwuLlNJR05XUklUSU5HIEVYQ0lURU1FTlRcclxuXHRcdDB4MURBNzUgPT0gY29kZSB8fCAvLyBNbiAgICAgICBTSUdOV1JJVElORyBVUFBFUiBCT0RZIFRJTFRJTkcgRlJPTSBISVAgSk9JTlRTXHJcblx0XHQweDFEQTg0ID09IGNvZGUgfHwgLy8gTW4gICAgICAgU0lHTldSSVRJTkcgTE9DQVRJT04gSEVBRCBORUNLXHJcblx0XHQoMHgxREE5QiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxREE5RikgfHwgLy8gTW4gICBbNV0gU0lHTldSSVRJTkcgRklMTCBNT0RJRklFUi0yLi5TSUdOV1JJVElORyBGSUxMIE1PRElGSUVSLTZcclxuXHRcdCgweDFEQUExIDw9IGNvZGUgJiYgY29kZSA8PSAweDFEQUFGKSB8fCAvLyBNbiAgWzE1XSBTSUdOV1JJVElORyBST1RBVElPTiBNT0RJRklFUi0yLi5TSUdOV1JJVElORyBST1RBVElPTiBNT0RJRklFUi0xNlxyXG5cdFx0KDB4MUUwMDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUUwMDYpIHx8IC8vIE1uICAgWzddIENPTUJJTklORyBHTEFHT0xJVElDIExFVFRFUiBBWlUuLkNPTUJJTklORyBHTEFHT0xJVElDIExFVFRFUiBaSElWRVRFXHJcblx0XHQoMHgxRTAwOCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRTAxOCkgfHwgLy8gTW4gIFsxN10gQ09NQklOSU5HIEdMQUdPTElUSUMgTEVUVEVSIFpFTUxKQS4uQ09NQklOSU5HIEdMQUdPTElUSUMgTEVUVEVSIEhFUlVcclxuXHRcdCgweDFFMDFCIDw9IGNvZGUgJiYgY29kZSA8PSAweDFFMDIxKSB8fCAvLyBNbiAgIFs3XSBDT01CSU5JTkcgR0xBR09MSVRJQyBMRVRURVIgU0hUQS4uQ09NQklOSU5HIEdMQUdPTElUSUMgTEVUVEVSIFlBVElcclxuXHRcdCgweDFFMDIzIDw9IGNvZGUgJiYgY29kZSA8PSAweDFFMDI0KSB8fCAvLyBNbiAgIFsyXSBDT01CSU5JTkcgR0xBR09MSVRJQyBMRVRURVIgWVUuLkNPTUJJTklORyBHTEFHT0xJVElDIExFVFRFUiBTTUFMTCBZVVNcclxuXHRcdCgweDFFMDI2IDw9IGNvZGUgJiYgY29kZSA8PSAweDFFMDJBKSB8fCAvLyBNbiAgIFs1XSBDT01CSU5JTkcgR0xBR09MSVRJQyBMRVRURVIgWU8uLkNPTUJJTklORyBHTEFHT0xJVElDIExFVFRFUiBGSVRBXHJcblx0XHQoMHgxRThEMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRThENikgfHwgLy8gTW4gICBbN10gTUVOREUgS0lLQUtVSSBDT01CSU5JTkcgTlVNQkVSIFRFRU5TLi5NRU5ERSBLSUtBS1VJIENPTUJJTklORyBOVU1CRVIgTUlMTElPTlNcclxuXHRcdCgweDFFOTQ0IDw9IGNvZGUgJiYgY29kZSA8PSAweDFFOTRBKSB8fCAvLyBNbiAgIFs3XSBBRExBTSBBTElGIExFTkdUSEVORVIuLkFETEFNIE5VS1RBXHJcblx0XHQoMHhFMDAyMCA8PSBjb2RlICYmIGNvZGUgPD0gMHhFMDA3RikgfHwgLy8gQ2YgIFs5Nl0gVEFHIFNQQUNFLi5DQU5DRUwgVEFHXHJcblx0XHQoMHhFMDEwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHhFMDFFRikgLy8gTW4gWzI0MF0gVkFSSUFUSU9OIFNFTEVDVE9SLTE3Li5WQVJJQVRJT04gU0VMRUNUT1ItMjU2XHJcblx0XHQpe1xyXG5cdFx0XHRyZXR1cm4gRXh0ZW5kO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdGlmKFxyXG5cdFx0KDB4MUYxRTYgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUYxRkYpIC8vIFNvICBbMjZdIFJFR0lPTkFMIElORElDQVRPUiBTWU1CT0wgTEVUVEVSIEEuLlJFR0lPTkFMIElORElDQVRPUiBTWU1CT0wgTEVUVEVSIFpcclxuXHRcdCl7XHJcblx0XHRcdHJldHVybiBSZWdpb25hbF9JbmRpY2F0b3I7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdGlmKFxyXG5cdFx0MHgwOTAzID09IGNvZGUgfHwgLy8gTWMgICAgICAgREVWQU5BR0FSSSBTSUdOIFZJU0FSR0FcclxuXHRcdDB4MDkzQiA9PSBjb2RlIHx8IC8vIE1jICAgICAgIERFVkFOQUdBUkkgVk9XRUwgU0lHTiBPT0VcclxuXHRcdCgweDA5M0UgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDk0MCkgfHwgLy8gTWMgICBbM10gREVWQU5BR0FSSSBWT1dFTCBTSUdOIEFBLi5ERVZBTkFHQVJJIFZPV0VMIFNJR04gSUlcclxuXHRcdCgweDA5NDkgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDk0QykgfHwgLy8gTWMgICBbNF0gREVWQU5BR0FSSSBWT1dFTCBTSUdOIENBTkRSQSBPLi5ERVZBTkFHQVJJIFZPV0VMIFNJR04gQVVcclxuXHRcdCgweDA5NEUgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDk0RikgfHwgLy8gTWMgICBbMl0gREVWQU5BR0FSSSBWT1dFTCBTSUdOIFBSSVNIVEhBTUFUUkEgRS4uREVWQU5BR0FSSSBWT1dFTCBTSUdOIEFXXHJcblx0XHQoMHgwOTgyIDw9IGNvZGUgJiYgY29kZSA8PSAweDA5ODMpIHx8IC8vIE1jICAgWzJdIEJFTkdBTEkgU0lHTiBBTlVTVkFSQS4uQkVOR0FMSSBTSUdOIFZJU0FSR0FcclxuXHRcdCgweDA5QkYgPD0gY29kZSAmJiBjb2RlIDw9IDB4MDlDMCkgfHwgLy8gTWMgICBbMl0gQkVOR0FMSSBWT1dFTCBTSUdOIEkuLkJFTkdBTEkgVk9XRUwgU0lHTiBJSVxyXG5cdFx0KDB4MDlDNyA8PSBjb2RlICYmIGNvZGUgPD0gMHgwOUM4KSB8fCAvLyBNYyAgIFsyXSBCRU5HQUxJIFZPV0VMIFNJR04gRS4uQkVOR0FMSSBWT1dFTCBTSUdOIEFJXHJcblx0XHQoMHgwOUNCIDw9IGNvZGUgJiYgY29kZSA8PSAweDA5Q0MpIHx8IC8vIE1jICAgWzJdIEJFTkdBTEkgVk9XRUwgU0lHTiBPLi5CRU5HQUxJIFZPV0VMIFNJR04gQVVcclxuXHRcdDB4MEEwMyA9PSBjb2RlIHx8IC8vIE1jICAgICAgIEdVUk1VS0hJIFNJR04gVklTQVJHQVxyXG5cdFx0KDB4MEEzRSA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQTQwKSB8fCAvLyBNYyAgIFszXSBHVVJNVUtISSBWT1dFTCBTSUdOIEFBLi5HVVJNVUtISSBWT1dFTCBTSUdOIElJXHJcblx0XHQweDBBODMgPT0gY29kZSB8fCAvLyBNYyAgICAgICBHVUpBUkFUSSBTSUdOIFZJU0FSR0FcclxuXHRcdCgweDBBQkUgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEFDMCkgfHwgLy8gTWMgICBbM10gR1VKQVJBVEkgVk9XRUwgU0lHTiBBQS4uR1VKQVJBVEkgVk9XRUwgU0lHTiBJSVxyXG5cdFx0MHgwQUM5ID09IGNvZGUgfHwgLy8gTWMgICAgICAgR1VKQVJBVEkgVk9XRUwgU0lHTiBDQU5EUkEgT1xyXG5cdFx0KDB4MEFDQiA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQUNDKSB8fCAvLyBNYyAgIFsyXSBHVUpBUkFUSSBWT1dFTCBTSUdOIE8uLkdVSkFSQVRJIFZPV0VMIFNJR04gQVVcclxuXHRcdCgweDBCMDIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEIwMykgfHwgLy8gTWMgICBbMl0gT1JJWUEgU0lHTiBBTlVTVkFSQS4uT1JJWUEgU0lHTiBWSVNBUkdBXHJcblx0XHQweDBCNDAgPT0gY29kZSB8fCAvLyBNYyAgICAgICBPUklZQSBWT1dFTCBTSUdOIElJXHJcblx0XHQoMHgwQjQ3IDw9IGNvZGUgJiYgY29kZSA8PSAweDBCNDgpIHx8IC8vIE1jICAgWzJdIE9SSVlBIFZPV0VMIFNJR04gRS4uT1JJWUEgVk9XRUwgU0lHTiBBSVxyXG5cdFx0KDB4MEI0QiA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQjRDKSB8fCAvLyBNYyAgIFsyXSBPUklZQSBWT1dFTCBTSUdOIE8uLk9SSVlBIFZPV0VMIFNJR04gQVVcclxuXHRcdDB4MEJCRiA9PSBjb2RlIHx8IC8vIE1jICAgICAgIFRBTUlMIFZPV0VMIFNJR04gSVxyXG5cdFx0KDB4MEJDMSA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQkMyKSB8fCAvLyBNYyAgIFsyXSBUQU1JTCBWT1dFTCBTSUdOIFUuLlRBTUlMIFZPV0VMIFNJR04gVVVcclxuXHRcdCgweDBCQzYgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEJDOCkgfHwgLy8gTWMgICBbM10gVEFNSUwgVk9XRUwgU0lHTiBFLi5UQU1JTCBWT1dFTCBTSUdOIEFJXHJcblx0XHQoMHgwQkNBIDw9IGNvZGUgJiYgY29kZSA8PSAweDBCQ0MpIHx8IC8vIE1jICAgWzNdIFRBTUlMIFZPV0VMIFNJR04gTy4uVEFNSUwgVk9XRUwgU0lHTiBBVVxyXG5cdFx0KDB4MEMwMSA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQzAzKSB8fCAvLyBNYyAgIFszXSBURUxVR1UgU0lHTiBDQU5EUkFCSU5EVS4uVEVMVUdVIFNJR04gVklTQVJHQVxyXG5cdFx0KDB4MEM0MSA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQzQ0KSB8fCAvLyBNYyAgIFs0XSBURUxVR1UgVk9XRUwgU0lHTiBVLi5URUxVR1UgVk9XRUwgU0lHTiBWT0NBTElDIFJSXHJcblx0XHQoMHgwQzgyIDw9IGNvZGUgJiYgY29kZSA8PSAweDBDODMpIHx8IC8vIE1jICAgWzJdIEtBTk5BREEgU0lHTiBBTlVTVkFSQS4uS0FOTkFEQSBTSUdOIFZJU0FSR0FcclxuXHRcdDB4MENCRSA9PSBjb2RlIHx8IC8vIE1jICAgICAgIEtBTk5BREEgVk9XRUwgU0lHTiBBQVxyXG5cdFx0KDB4MENDMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgwQ0MxKSB8fCAvLyBNYyAgIFsyXSBLQU5OQURBIFZPV0VMIFNJR04gSUkuLktBTk5BREEgVk9XRUwgU0lHTiBVXHJcblx0XHQoMHgwQ0MzIDw9IGNvZGUgJiYgY29kZSA8PSAweDBDQzQpIHx8IC8vIE1jICAgWzJdIEtBTk5BREEgVk9XRUwgU0lHTiBWT0NBTElDIFIuLktBTk5BREEgVk9XRUwgU0lHTiBWT0NBTElDIFJSXHJcblx0XHQoMHgwQ0M3IDw9IGNvZGUgJiYgY29kZSA8PSAweDBDQzgpIHx8IC8vIE1jICAgWzJdIEtBTk5BREEgVk9XRUwgU0lHTiBFRS4uS0FOTkFEQSBWT1dFTCBTSUdOIEFJXHJcblx0XHQoMHgwQ0NBIDw9IGNvZGUgJiYgY29kZSA8PSAweDBDQ0IpIHx8IC8vIE1jICAgWzJdIEtBTk5BREEgVk9XRUwgU0lHTiBPLi5LQU5OQURBIFZPV0VMIFNJR04gT09cclxuXHRcdCgweDBEMDIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEQwMykgfHwgLy8gTWMgICBbMl0gTUFMQVlBTEFNIFNJR04gQU5VU1ZBUkEuLk1BTEFZQUxBTSBTSUdOIFZJU0FSR0FcclxuXHRcdCgweDBEM0YgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEQ0MCkgfHwgLy8gTWMgICBbMl0gTUFMQVlBTEFNIFZPV0VMIFNJR04gSS4uTUFMQVlBTEFNIFZPV0VMIFNJR04gSUlcclxuXHRcdCgweDBENDYgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEQ0OCkgfHwgLy8gTWMgICBbM10gTUFMQVlBTEFNIFZPV0VMIFNJR04gRS4uTUFMQVlBTEFNIFZPV0VMIFNJR04gQUlcclxuXHRcdCgweDBENEEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEQ0QykgfHwgLy8gTWMgICBbM10gTUFMQVlBTEFNIFZPV0VMIFNJR04gTy4uTUFMQVlBTEFNIFZPV0VMIFNJR04gQVVcclxuXHRcdCgweDBEODIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEQ4MykgfHwgLy8gTWMgICBbMl0gU0lOSEFMQSBTSUdOIEFOVVNWQVJBWUEuLlNJTkhBTEEgU0lHTiBWSVNBUkdBWUFcclxuXHRcdCgweDBERDAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MEREMSkgfHwgLy8gTWMgICBbMl0gU0lOSEFMQSBWT1dFTCBTSUdOIEtFVFRJIEFFREEtUElMTEEuLlNJTkhBTEEgVk9XRUwgU0lHTiBESUdBIEFFREEtUElMTEFcclxuXHRcdCgweDBERDggPD0gY29kZSAmJiBjb2RlIDw9IDB4MERERSkgfHwgLy8gTWMgICBbN10gU0lOSEFMQSBWT1dFTCBTSUdOIEdBRVRUQS1QSUxMQS4uU0lOSEFMQSBWT1dFTCBTSUdOIEtPTUJVVkEgSEFBIEdBWUFOVUtJVFRBXHJcblx0XHQoMHgwREYyIDw9IGNvZGUgJiYgY29kZSA8PSAweDBERjMpIHx8IC8vIE1jICAgWzJdIFNJTkhBTEEgVk9XRUwgU0lHTiBESUdBIEdBRVRUQS1QSUxMQS4uU0lOSEFMQSBWT1dFTCBTSUdOIERJR0EgR0FZQU5VS0lUVEFcclxuXHRcdDB4MEUzMyA9PSBjb2RlIHx8IC8vIExvICAgICAgIFRIQUkgQ0hBUkFDVEVSIFNBUkEgQU1cclxuXHRcdDB4MEVCMyA9PSBjb2RlIHx8IC8vIExvICAgICAgIExBTyBWT1dFTCBTSUdOIEFNXHJcblx0XHQoMHgwRjNFIDw9IGNvZGUgJiYgY29kZSA8PSAweDBGM0YpIHx8IC8vIE1jICAgWzJdIFRJQkVUQU4gU0lHTiBZQVIgVFNIRVMuLlRJQkVUQU4gU0lHTiBNQVIgVFNIRVNcclxuXHRcdDB4MEY3RiA9PSBjb2RlIHx8IC8vIE1jICAgICAgIFRJQkVUQU4gU0lHTiBSTkFNIEJDQURcclxuXHRcdDB4MTAzMSA9PSBjb2RlIHx8IC8vIE1jICAgICAgIE1ZQU5NQVIgVk9XRUwgU0lHTiBFXHJcblx0XHQoMHgxMDNCIDw9IGNvZGUgJiYgY29kZSA8PSAweDEwM0MpIHx8IC8vIE1jICAgWzJdIE1ZQU5NQVIgQ09OU09OQU5UIFNJR04gTUVESUFMIFlBLi5NWUFOTUFSIENPTlNPTkFOVCBTSUdOIE1FRElBTCBSQVxyXG5cdFx0KDB4MTA1NiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMDU3KSB8fCAvLyBNYyAgIFsyXSBNWUFOTUFSIFZPV0VMIFNJR04gVk9DQUxJQyBSLi5NWUFOTUFSIFZPV0VMIFNJR04gVk9DQUxJQyBSUlxyXG5cdFx0MHgxMDg0ID09IGNvZGUgfHwgLy8gTWMgICAgICAgTVlBTk1BUiBWT1dFTCBTSUdOIFNIQU4gRVxyXG5cdFx0MHgxN0I2ID09IGNvZGUgfHwgLy8gTWMgICAgICAgS0hNRVIgVk9XRUwgU0lHTiBBQVxyXG5cdFx0KDB4MTdCRSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxN0M1KSB8fCAvLyBNYyAgIFs4XSBLSE1FUiBWT1dFTCBTSUdOIE9FLi5LSE1FUiBWT1dFTCBTSUdOIEFVXHJcblx0XHQoMHgxN0M3IDw9IGNvZGUgJiYgY29kZSA8PSAweDE3QzgpIHx8IC8vIE1jICAgWzJdIEtITUVSIFNJR04gUkVBSE1VSy4uS0hNRVIgU0lHTiBZVVVLQUxFQVBJTlRVXHJcblx0XHQoMHgxOTIzIDw9IGNvZGUgJiYgY29kZSA8PSAweDE5MjYpIHx8IC8vIE1jICAgWzRdIExJTUJVIFZPV0VMIFNJR04gRUUuLkxJTUJVIFZPV0VMIFNJR04gQVVcclxuXHRcdCgweDE5MjkgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTkyQikgfHwgLy8gTWMgICBbM10gTElNQlUgU1VCSk9JTkVEIExFVFRFUiBZQS4uTElNQlUgU1VCSk9JTkVEIExFVFRFUiBXQVxyXG5cdFx0KDB4MTkzMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxOTMxKSB8fCAvLyBNYyAgIFsyXSBMSU1CVSBTTUFMTCBMRVRURVIgS0EuLkxJTUJVIFNNQUxMIExFVFRFUiBOR0FcclxuXHRcdCgweDE5MzMgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTkzOCkgfHwgLy8gTWMgICBbNl0gTElNQlUgU01BTEwgTEVUVEVSIFRBLi5MSU1CVSBTTUFMTCBMRVRURVIgTEFcclxuXHRcdCgweDFBMTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUExQSkgfHwgLy8gTWMgICBbMl0gQlVHSU5FU0UgVk9XRUwgU0lHTiBFLi5CVUdJTkVTRSBWT1dFTCBTSUdOIE9cclxuXHRcdDB4MUE1NSA9PSBjb2RlIHx8IC8vIE1jICAgICAgIFRBSSBUSEFNIENPTlNPTkFOVCBTSUdOIE1FRElBTCBSQVxyXG5cdFx0MHgxQTU3ID09IGNvZGUgfHwgLy8gTWMgICAgICAgVEFJIFRIQU0gQ09OU09OQU5UIFNJR04gTEEgVEFORyBMQUlcclxuXHRcdCgweDFBNkQgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUE3MikgfHwgLy8gTWMgICBbNl0gVEFJIFRIQU0gVk9XRUwgU0lHTiBPWS4uVEFJIFRIQU0gVk9XRUwgU0lHTiBUSEFNIEFJXHJcblx0XHQweDFCMDQgPT0gY29kZSB8fCAvLyBNYyAgICAgICBCQUxJTkVTRSBTSUdOIEJJU0FIXHJcblx0XHQweDFCMzUgPT0gY29kZSB8fCAvLyBNYyAgICAgICBCQUxJTkVTRSBWT1dFTCBTSUdOIFRFRFVOR1xyXG5cdFx0MHgxQjNCID09IGNvZGUgfHwgLy8gTWMgICAgICAgQkFMSU5FU0UgVk9XRUwgU0lHTiBSQSBSRVBBIFRFRFVOR1xyXG5cdFx0KDB4MUIzRCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQjQxKSB8fCAvLyBNYyAgIFs1XSBCQUxJTkVTRSBWT1dFTCBTSUdOIExBIExFTkdBIFRFRFVORy4uQkFMSU5FU0UgVk9XRUwgU0lHTiBUQUxJTkcgUkVQQSBURURVTkdcclxuXHRcdCgweDFCNDMgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUI0NCkgfHwgLy8gTWMgICBbMl0gQkFMSU5FU0UgVk9XRUwgU0lHTiBQRVBFVCBURURVTkcuLkJBTElORVNFIEFERUcgQURFR1xyXG5cdFx0MHgxQjgyID09IGNvZGUgfHwgLy8gTWMgICAgICAgU1VOREFORVNFIFNJR04gUEFOR1dJU0FEXHJcblx0XHQweDFCQTEgPT0gY29kZSB8fCAvLyBNYyAgICAgICBTVU5EQU5FU0UgQ09OU09OQU5UIFNJR04gUEFNSU5HS0FMXHJcblx0XHQoMHgxQkE2IDw9IGNvZGUgJiYgY29kZSA8PSAweDFCQTcpIHx8IC8vIE1jICAgWzJdIFNVTkRBTkVTRSBWT1dFTCBTSUdOIFBBTkFFTEFFTkcuLlNVTkRBTkVTRSBWT1dFTCBTSUdOIFBBTk9MT05HXHJcblx0XHQweDFCQUEgPT0gY29kZSB8fCAvLyBNYyAgICAgICBTVU5EQU5FU0UgU0lHTiBQQU1BQUVIXHJcblx0XHQweDFCRTcgPT0gY29kZSB8fCAvLyBNYyAgICAgICBCQVRBSyBWT1dFTCBTSUdOIEVcclxuXHRcdCgweDFCRUEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUJFQykgfHwgLy8gTWMgICBbM10gQkFUQUsgVk9XRUwgU0lHTiBJLi5CQVRBSyBWT1dFTCBTSUdOIE9cclxuXHRcdDB4MUJFRSA9PSBjb2RlIHx8IC8vIE1jICAgICAgIEJBVEFLIFZPV0VMIFNJR04gVVxyXG5cdFx0KDB4MUJGMiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQkYzKSB8fCAvLyBNYyAgIFsyXSBCQVRBSyBQQU5HT0xBVC4uQkFUQUsgUEFOT05HT05BTlxyXG5cdFx0KDB4MUMyNCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxQzJCKSB8fCAvLyBNYyAgIFs4XSBMRVBDSEEgU1VCSk9JTkVEIExFVFRFUiBZQS4uTEVQQ0hBIFZPV0VMIFNJR04gVVVcclxuXHRcdCgweDFDMzQgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUMzNSkgfHwgLy8gTWMgICBbMl0gTEVQQ0hBIENPTlNPTkFOVCBTSUdOIE5ZSU4tRE8uLkxFUENIQSBDT05TT05BTlQgU0lHTiBLQU5HXHJcblx0XHQweDFDRTEgPT0gY29kZSB8fCAvLyBNYyAgICAgICBWRURJQyBUT05FIEFUSEFSVkFWRURJQyBJTkRFUEVOREVOVCBTVkFSSVRBXHJcblx0XHQoMHgxQ0YyIDw9IGNvZGUgJiYgY29kZSA8PSAweDFDRjMpIHx8IC8vIE1jICAgWzJdIFZFRElDIFNJR04gQVJESEFWSVNBUkdBLi5WRURJQyBTSUdOIFJPVEFURUQgQVJESEFWSVNBUkdBXHJcblx0XHQweDFDRjcgPT0gY29kZSB8fCAvLyBNYyAgICAgICBWRURJQyBTSUdOIEFUSUtSQU1BXHJcblx0XHQoMHhBODIzIDw9IGNvZGUgJiYgY29kZSA8PSAweEE4MjQpIHx8IC8vIE1jICAgWzJdIFNZTE9USSBOQUdSSSBWT1dFTCBTSUdOIEEuLlNZTE9USSBOQUdSSSBWT1dFTCBTSUdOIElcclxuXHRcdDB4QTgyNyA9PSBjb2RlIHx8IC8vIE1jICAgICAgIFNZTE9USSBOQUdSSSBWT1dFTCBTSUdOIE9PXHJcblx0XHQoMHhBODgwIDw9IGNvZGUgJiYgY29kZSA8PSAweEE4ODEpIHx8IC8vIE1jICAgWzJdIFNBVVJBU0hUUkEgU0lHTiBBTlVTVkFSQS4uU0FVUkFTSFRSQSBTSUdOIFZJU0FSR0FcclxuXHRcdCgweEE4QjQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QThDMykgfHwgLy8gTWMgIFsxNl0gU0FVUkFTSFRSQSBDT05TT05BTlQgU0lHTiBIQUFSVS4uU0FVUkFTSFRSQSBWT1dFTCBTSUdOIEFVXHJcblx0XHQoMHhBOTUyIDw9IGNvZGUgJiYgY29kZSA8PSAweEE5NTMpIHx8IC8vIE1jICAgWzJdIFJFSkFORyBDT05TT05BTlQgU0lHTiBILi5SRUpBTkcgVklSQU1BXHJcblx0XHQweEE5ODMgPT0gY29kZSB8fCAvLyBNYyAgICAgICBKQVZBTkVTRSBTSUdOIFdJR05ZQU5cclxuXHRcdCgweEE5QjQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QTlCNSkgfHwgLy8gTWMgICBbMl0gSkFWQU5FU0UgVk9XRUwgU0lHTiBUQVJVTkcuLkpBVkFORVNFIFZPV0VMIFNJR04gVE9MT05HXHJcblx0XHQoMHhBOUJBIDw9IGNvZGUgJiYgY29kZSA8PSAweEE5QkIpIHx8IC8vIE1jICAgWzJdIEpBVkFORVNFIFZPV0VMIFNJR04gVEFMSU5HLi5KQVZBTkVTRSBWT1dFTCBTSUdOIERJUkdBIE1VUkVcclxuXHRcdCgweEE5QkQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QTlDMCkgfHwgLy8gTWMgICBbNF0gSkFWQU5FU0UgQ09OU09OQU5UIFNJR04gS0VSRVQuLkpBVkFORVNFIFBBTkdLT05cclxuXHRcdCgweEFBMkYgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUEzMCkgfHwgLy8gTWMgICBbMl0gQ0hBTSBWT1dFTCBTSUdOIE8uLkNIQU0gVk9XRUwgU0lHTiBBSVxyXG5cdFx0KDB4QUEzMyA8PSBjb2RlICYmIGNvZGUgPD0gMHhBQTM0KSB8fCAvLyBNYyAgIFsyXSBDSEFNIENPTlNPTkFOVCBTSUdOIFlBLi5DSEFNIENPTlNPTkFOVCBTSUdOIFJBXHJcblx0XHQweEFBNEQgPT0gY29kZSB8fCAvLyBNYyAgICAgICBDSEFNIENPTlNPTkFOVCBTSUdOIEZJTkFMIEhcclxuXHRcdDB4QUFFQiA9PSBjb2RlIHx8IC8vIE1jICAgICAgIE1FRVRFSSBNQVlFSyBWT1dFTCBTSUdOIElJXHJcblx0XHQoMHhBQUVFIDw9IGNvZGUgJiYgY29kZSA8PSAweEFBRUYpIHx8IC8vIE1jICAgWzJdIE1FRVRFSSBNQVlFSyBWT1dFTCBTSUdOIEFVLi5NRUVURUkgTUFZRUsgVk9XRUwgU0lHTiBBQVVcclxuXHRcdDB4QUFGNSA9PSBjb2RlIHx8IC8vIE1jICAgICAgIE1FRVRFSSBNQVlFSyBWT1dFTCBTSUdOIFZJU0FSR0FcclxuXHRcdCgweEFCRTMgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUJFNCkgfHwgLy8gTWMgICBbMl0gTUVFVEVJIE1BWUVLIFZPV0VMIFNJR04gT05BUC4uTUVFVEVJIE1BWUVLIFZPV0VMIFNJR04gSU5BUFxyXG5cdFx0KDB4QUJFNiA8PSBjb2RlICYmIGNvZGUgPD0gMHhBQkU3KSB8fCAvLyBNYyAgIFsyXSBNRUVURUkgTUFZRUsgVk9XRUwgU0lHTiBZRU5BUC4uTUVFVEVJIE1BWUVLIFZPV0VMIFNJR04gU09VTkFQXHJcblx0XHQoMHhBQkU5IDw9IGNvZGUgJiYgY29kZSA8PSAweEFCRUEpIHx8IC8vIE1jICAgWzJdIE1FRVRFSSBNQVlFSyBWT1dFTCBTSUdOIENIRUlOQVAuLk1FRVRFSSBNQVlFSyBWT1dFTCBTSUdOIE5VTkdcclxuXHRcdDB4QUJFQyA9PSBjb2RlIHx8IC8vIE1jICAgICAgIE1FRVRFSSBNQVlFSyBMVU0gSVlFS1xyXG5cdFx0MHgxMTAwMCA9PSBjb2RlIHx8IC8vIE1jICAgICAgIEJSQUhNSSBTSUdOIENBTkRSQUJJTkRVXHJcblx0XHQweDExMDAyID09IGNvZGUgfHwgLy8gTWMgICAgICAgQlJBSE1JIFNJR04gVklTQVJHQVxyXG5cdFx0MHgxMTA4MiA9PSBjb2RlIHx8IC8vIE1jICAgICAgIEtBSVRISSBTSUdOIFZJU0FSR0FcclxuXHRcdCgweDExMEIwIDw9IGNvZGUgJiYgY29kZSA8PSAweDExMEIyKSB8fCAvLyBNYyAgIFszXSBLQUlUSEkgVk9XRUwgU0lHTiBBQS4uS0FJVEhJIFZPV0VMIFNJR04gSUlcclxuXHRcdCgweDExMEI3IDw9IGNvZGUgJiYgY29kZSA8PSAweDExMEI4KSB8fCAvLyBNYyAgIFsyXSBLQUlUSEkgVk9XRUwgU0lHTiBPLi5LQUlUSEkgVk9XRUwgU0lHTiBBVVxyXG5cdFx0MHgxMTEyQyA9PSBjb2RlIHx8IC8vIE1jICAgICAgIENIQUtNQSBWT1dFTCBTSUdOIEVcclxuXHRcdDB4MTExODIgPT0gY29kZSB8fCAvLyBNYyAgICAgICBTSEFSQURBIFNJR04gVklTQVJHQVxyXG5cdFx0KDB4MTExQjMgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTExQjUpIHx8IC8vIE1jICAgWzNdIFNIQVJBREEgVk9XRUwgU0lHTiBBQS4uU0hBUkFEQSBWT1dFTCBTSUdOIElJXHJcblx0XHQoMHgxMTFCRiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTFDMCkgfHwgLy8gTWMgICBbMl0gU0hBUkFEQSBWT1dFTCBTSUdOIEFVLi5TSEFSQURBIFNJR04gVklSQU1BXHJcblx0XHQoMHgxMTIyQyA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTIyRSkgfHwgLy8gTWMgICBbM10gS0hPSktJIFZPV0VMIFNJR04gQUEuLktIT0pLSSBWT1dFTCBTSUdOIElJXHJcblx0XHQoMHgxMTIzMiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTIzMykgfHwgLy8gTWMgICBbMl0gS0hPSktJIFZPV0VMIFNJR04gTy4uS0hPSktJIFZPV0VMIFNJR04gQVVcclxuXHRcdDB4MTEyMzUgPT0gY29kZSB8fCAvLyBNYyAgICAgICBLSE9KS0kgU0lHTiBWSVJBTUFcclxuXHRcdCgweDExMkUwIDw9IGNvZGUgJiYgY29kZSA8PSAweDExMkUyKSB8fCAvLyBNYyAgIFszXSBLSFVEQVdBREkgVk9XRUwgU0lHTiBBQS4uS0hVREFXQURJIFZPV0VMIFNJR04gSUlcclxuXHRcdCgweDExMzAyIDw9IGNvZGUgJiYgY29kZSA8PSAweDExMzAzKSB8fCAvLyBNYyAgIFsyXSBHUkFOVEhBIFNJR04gQU5VU1ZBUkEuLkdSQU5USEEgU0lHTiBWSVNBUkdBXHJcblx0XHQweDExMzNGID09IGNvZGUgfHwgLy8gTWMgICAgICAgR1JBTlRIQSBWT1dFTCBTSUdOIElcclxuXHRcdCgweDExMzQxIDw9IGNvZGUgJiYgY29kZSA8PSAweDExMzQ0KSB8fCAvLyBNYyAgIFs0XSBHUkFOVEhBIFZPV0VMIFNJR04gVS4uR1JBTlRIQSBWT1dFTCBTSUdOIFZPQ0FMSUMgUlJcclxuXHRcdCgweDExMzQ3IDw9IGNvZGUgJiYgY29kZSA8PSAweDExMzQ4KSB8fCAvLyBNYyAgIFsyXSBHUkFOVEhBIFZPV0VMIFNJR04gRUUuLkdSQU5USEEgVk9XRUwgU0lHTiBBSVxyXG5cdFx0KDB4MTEzNEIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTEzNEQpIHx8IC8vIE1jICAgWzNdIEdSQU5USEEgVk9XRUwgU0lHTiBPTy4uR1JBTlRIQSBTSUdOIFZJUkFNQVxyXG5cdFx0KDB4MTEzNjIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTEzNjMpIHx8IC8vIE1jICAgWzJdIEdSQU5USEEgVk9XRUwgU0lHTiBWT0NBTElDIEwuLkdSQU5USEEgVk9XRUwgU0lHTiBWT0NBTElDIExMXHJcblx0XHQoMHgxMTQzNSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTQzNykgfHwgLy8gTWMgICBbM10gTkVXQSBWT1dFTCBTSUdOIEFBLi5ORVdBIFZPV0VMIFNJR04gSUlcclxuXHRcdCgweDExNDQwIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNDQxKSB8fCAvLyBNYyAgIFsyXSBORVdBIFZPV0VMIFNJR04gTy4uTkVXQSBWT1dFTCBTSUdOIEFVXHJcblx0XHQweDExNDQ1ID09IGNvZGUgfHwgLy8gTWMgICAgICAgTkVXQSBTSUdOIFZJU0FSR0FcclxuXHRcdCgweDExNEIxIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNEIyKSB8fCAvLyBNYyAgIFsyXSBUSVJIVVRBIFZPV0VMIFNJR04gSS4uVElSSFVUQSBWT1dFTCBTSUdOIElJXHJcblx0XHQweDExNEI5ID09IGNvZGUgfHwgLy8gTWMgICAgICAgVElSSFVUQSBWT1dFTCBTSUdOIEVcclxuXHRcdCgweDExNEJCIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNEJDKSB8fCAvLyBNYyAgIFsyXSBUSVJIVVRBIFZPV0VMIFNJR04gQUkuLlRJUkhVVEEgVk9XRUwgU0lHTiBPXHJcblx0XHQweDExNEJFID09IGNvZGUgfHwgLy8gTWMgICAgICAgVElSSFVUQSBWT1dFTCBTSUdOIEFVXHJcblx0XHQweDExNEMxID09IGNvZGUgfHwgLy8gTWMgICAgICAgVElSSFVUQSBTSUdOIFZJU0FSR0FcclxuXHRcdCgweDExNUIwIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNUIxKSB8fCAvLyBNYyAgIFsyXSBTSURESEFNIFZPV0VMIFNJR04gSS4uU0lEREhBTSBWT1dFTCBTSUdOIElJXHJcblx0XHQoMHgxMTVCOCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTVCQikgfHwgLy8gTWMgICBbNF0gU0lEREhBTSBWT1dFTCBTSUdOIEUuLlNJRERIQU0gVk9XRUwgU0lHTiBBVVxyXG5cdFx0MHgxMTVCRSA9PSBjb2RlIHx8IC8vIE1jICAgICAgIFNJRERIQU0gU0lHTiBWSVNBUkdBXHJcblx0XHQoMHgxMTYzMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTYzMikgfHwgLy8gTWMgICBbM10gTU9ESSBWT1dFTCBTSUdOIEFBLi5NT0RJIFZPV0VMIFNJR04gSUlcclxuXHRcdCgweDExNjNCIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNjNDKSB8fCAvLyBNYyAgIFsyXSBNT0RJIFZPV0VMIFNJR04gTy4uTU9ESSBWT1dFTCBTSUdOIEFVXHJcblx0XHQweDExNjNFID09IGNvZGUgfHwgLy8gTWMgICAgICAgTU9ESSBTSUdOIFZJU0FSR0FcclxuXHRcdDB4MTE2QUMgPT0gY29kZSB8fCAvLyBNYyAgICAgICBUQUtSSSBTSUdOIFZJU0FSR0FcclxuXHRcdCgweDExNkFFIDw9IGNvZGUgJiYgY29kZSA8PSAweDExNkFGKSB8fCAvLyBNYyAgIFsyXSBUQUtSSSBWT1dFTCBTSUdOIEkuLlRBS1JJIFZPV0VMIFNJR04gSUlcclxuXHRcdDB4MTE2QjYgPT0gY29kZSB8fCAvLyBNYyAgICAgICBUQUtSSSBTSUdOIFZJUkFNQVxyXG5cdFx0KDB4MTE3MjAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTE3MjEpIHx8IC8vIE1jICAgWzJdIEFIT00gVk9XRUwgU0lHTiBBLi5BSE9NIFZPV0VMIFNJR04gQUFcclxuXHRcdDB4MTE3MjYgPT0gY29kZSB8fCAvLyBNYyAgICAgICBBSE9NIFZPV0VMIFNJR04gRVxyXG5cdFx0KDB4MTFBMDcgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTFBMDgpIHx8IC8vIE1jICAgWzJdIFpBTkFCQVpBUiBTUVVBUkUgVk9XRUwgU0lHTiBBSS4uWkFOQUJBWkFSIFNRVUFSRSBWT1dFTCBTSUdOIEFVXHJcblx0XHQweDExQTM5ID09IGNvZGUgfHwgLy8gTWMgICAgICAgWkFOQUJBWkFSIFNRVUFSRSBTSUdOIFZJU0FSR0FcclxuXHRcdCgweDExQTU3IDw9IGNvZGUgJiYgY29kZSA8PSAweDExQTU4KSB8fCAvLyBNYyAgIFsyXSBTT1lPTUJPIFZPV0VMIFNJR04gQUkuLlNPWU9NQk8gVk9XRUwgU0lHTiBBVVxyXG5cdFx0MHgxMUE5NyA9PSBjb2RlIHx8IC8vIE1jICAgICAgIFNPWU9NQk8gU0lHTiBWSVNBUkdBXHJcblx0XHQweDExQzJGID09IGNvZGUgfHwgLy8gTWMgICAgICAgQkhBSUtTVUtJIFZPV0VMIFNJR04gQUFcclxuXHRcdDB4MTFDM0UgPT0gY29kZSB8fCAvLyBNYyAgICAgICBCSEFJS1NVS0kgU0lHTiBWSVNBUkdBXHJcblx0XHQweDExQ0E5ID09IGNvZGUgfHwgLy8gTWMgICAgICAgTUFSQ0hFTiBTVUJKT0lORUQgTEVUVEVSIFlBXHJcblx0XHQweDExQ0IxID09IGNvZGUgfHwgLy8gTWMgICAgICAgTUFSQ0hFTiBWT1dFTCBTSUdOIElcclxuXHRcdDB4MTFDQjQgPT0gY29kZSB8fCAvLyBNYyAgICAgICBNQVJDSEVOIFZPV0VMIFNJR04gT1xyXG5cdFx0KDB4MTZGNTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4MTZGN0UpIHx8IC8vIE1jICBbNDZdIE1JQU8gU0lHTiBBU1BJUkFUSU9OLi5NSUFPIFZPV0VMIFNJR04gTkdcclxuXHRcdDB4MUQxNjYgPT0gY29kZSB8fCAvLyBNYyAgICAgICBNVVNJQ0FMIFNZTUJPTCBDT01CSU5JTkcgU1BSRUNIR0VTQU5HIFNURU1cclxuXHRcdDB4MUQxNkQgPT0gY29kZSAvLyBNYyAgICAgICBNVVNJQ0FMIFNZTUJPTCBDT01CSU5JTkcgQVVHTUVOVEFUSU9OIERPVFxyXG5cdFx0KXtcclxuXHRcdFx0cmV0dXJuIFNwYWNpbmdNYXJrO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdGlmKFxyXG5cdFx0KDB4MTEwMCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxMTVGKSB8fCAvLyBMbyAgWzk2XSBIQU5HVUwgQ0hPU0VPTkcgS0lZRU9LLi5IQU5HVUwgQ0hPU0VPTkcgRklMTEVSXHJcblx0XHQoMHhBOTYwIDw9IGNvZGUgJiYgY29kZSA8PSAweEE5N0MpIC8vIExvICBbMjldIEhBTkdVTCBDSE9TRU9ORyBUSUtFVVQtTUlFVU0uLkhBTkdVTCBDSE9TRU9ORyBTU0FOR1lFT1JJTkhJRVVIXHJcblx0XHQpe1xyXG5cdFx0XHRyZXR1cm4gTDtcclxuXHRcdH1cclxuXHRcdFxyXG5cdFx0aWYoXHJcblx0XHQoMHgxMTYwIDw9IGNvZGUgJiYgY29kZSA8PSAweDExQTcpIHx8IC8vIExvICBbNzJdIEhBTkdVTCBKVU5HU0VPTkcgRklMTEVSLi5IQU5HVUwgSlVOR1NFT05HIE8tWUFFXHJcblx0XHQoMHhEN0IwIDw9IGNvZGUgJiYgY29kZSA8PSAweEQ3QzYpIC8vIExvICBbMjNdIEhBTkdVTCBKVU5HU0VPTkcgTy1ZRU8uLkhBTkdVTCBKVU5HU0VPTkcgQVJBRUEtRVxyXG5cdFx0KXtcclxuXHRcdFx0cmV0dXJuIFY7XHJcblx0XHR9XHJcblx0XHRcclxuXHRcdFxyXG5cdFx0aWYoXHJcblx0XHQoMHgxMUE4IDw9IGNvZGUgJiYgY29kZSA8PSAweDExRkYpIHx8IC8vIExvICBbODhdIEhBTkdVTCBKT05HU0VPTkcgS0lZRU9LLi5IQU5HVUwgSk9OR1NFT05HIFNTQU5HTklFVU5cclxuXHRcdCgweEQ3Q0IgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDdGQikgLy8gTG8gIFs0OV0gSEFOR1VMIEpPTkdTRU9ORyBOSUVVTi1SSUVVTC4uSEFOR1VMIEpPTkdTRU9ORyBQSElFVVBILVRISUVVVEhcclxuXHRcdCl7XHJcblx0XHRcdHJldHVybiBUO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZihcclxuXHRcdDB4QUMwMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHQVxyXG5cdFx0MHhBQzFDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdBRVxyXG5cdFx0MHhBQzM4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdZQVxyXG5cdFx0MHhBQzU0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdZQUVcclxuXHRcdDB4QUM3MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHRU9cclxuXHRcdDB4QUM4QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHRVxyXG5cdFx0MHhBQ0E4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdZRU9cclxuXHRcdDB4QUNDNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHWUVcclxuXHRcdDB4QUNFMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHT1xyXG5cdFx0MHhBQ0ZDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdXQVxyXG5cdFx0MHhBRDE4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdXQUVcclxuXHRcdDB4QUQzNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHT0VcclxuXHRcdDB4QUQ1MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHWU9cclxuXHRcdDB4QUQ2QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHVVxyXG5cdFx0MHhBRDg4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdXRU9cclxuXHRcdDB4QURBNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHV0VcclxuXHRcdDB4QURDMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHV0lcclxuXHRcdDB4QUREQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHWVVcclxuXHRcdDB4QURGOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHRVVcclxuXHRcdDB4QUUxNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHWUlcclxuXHRcdDB4QUUzMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHSVxyXG5cdFx0MHhBRTRDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdHQVxyXG5cdFx0MHhBRTY4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdHQUVcclxuXHRcdDB4QUU4NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHR1lBXHJcblx0XHQweEFFQTAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgR0dZQUVcclxuXHRcdDB4QUVCQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHR0VPXHJcblx0XHQweEFFRDggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgR0dFXHJcblx0XHQweEFFRjQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgR0dZRU9cclxuXHRcdDB4QUYxMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHR1lFXHJcblx0XHQweEFGMkMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgR0dPXHJcblx0XHQweEFGNDggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgR0dXQVxyXG5cdFx0MHhBRjY0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdHV0FFXHJcblx0XHQweEFGODAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgR0dPRVxyXG5cdFx0MHhBRjlDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdHWU9cclxuXHRcdDB4QUZCOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHR1VcclxuXHRcdDB4QUZENCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHR1dFT1xyXG5cdFx0MHhBRkYwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdHV0VcclxuXHRcdDB4QjAwQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHR1dJXHJcblx0XHQweEIwMjggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgR0dZVVxyXG5cdFx0MHhCMDQ0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEdHRVVcclxuXHRcdDB4QjA2MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBHR1lJXHJcblx0XHQweEIwN0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgR0dJXHJcblx0XHQweEIwOTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTkFcclxuXHRcdDB4QjBCNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBOQUVcclxuXHRcdDB4QjBEMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBOWUFcclxuXHRcdDB4QjBFQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBOWUFFXHJcblx0XHQweEIxMDggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTkVPXHJcblx0XHQweEIxMjQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTkVcclxuXHRcdDB4QjE0MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBOWUVPXHJcblx0XHQweEIxNUMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTllFXHJcblx0XHQweEIxNzggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTk9cclxuXHRcdDB4QjE5NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBOV0FcclxuXHRcdDB4QjFCMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBOV0FFXHJcblx0XHQweEIxQ0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTk9FXHJcblx0XHQweEIxRTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTllPXHJcblx0XHQweEIyMDQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTlVcclxuXHRcdDB4QjIyMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBOV0VPXHJcblx0XHQweEIyM0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTldFXHJcblx0XHQweEIyNTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTldJXHJcblx0XHQweEIyNzQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTllVXHJcblx0XHQweEIyOTAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTkVVXHJcblx0XHQweEIyQUMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTllJXHJcblx0XHQweEIyQzggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgTklcclxuXHRcdDB4QjJFNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBEQVxyXG5cdFx0MHhCMzAwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIERBRVxyXG5cdFx0MHhCMzFDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIERZQVxyXG5cdFx0MHhCMzM4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIERZQUVcclxuXHRcdDB4QjM1NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBERU9cclxuXHRcdDB4QjM3MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBERVxyXG5cdFx0MHhCMzhDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIERZRU9cclxuXHRcdDB4QjNBOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBEWUVcclxuXHRcdDB4QjNDNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBET1xyXG5cdFx0MHhCM0UwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIERXQVxyXG5cdFx0MHhCM0ZDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIERXQUVcclxuXHRcdDB4QjQxOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBET0VcclxuXHRcdDB4QjQzNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBEWU9cclxuXHRcdDB4QjQ1MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBEVVxyXG5cdFx0MHhCNDZDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIERXRU9cclxuXHRcdDB4QjQ4OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBEV0VcclxuXHRcdDB4QjRBNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBEV0lcclxuXHRcdDB4QjRDMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBEWVVcclxuXHRcdDB4QjREQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBERVVcclxuXHRcdDB4QjRGOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBEWUlcclxuXHRcdDB4QjUxNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBESVxyXG5cdFx0MHhCNTMwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEREQVxyXG5cdFx0MHhCNTRDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEREQUVcclxuXHRcdDB4QjU2OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBERFlBXHJcblx0XHQweEI1ODQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgRERZQUVcclxuXHRcdDB4QjVBMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBEREVPXHJcblx0XHQweEI1QkMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgRERFXHJcblx0XHQweEI1RDggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgRERZRU9cclxuXHRcdDB4QjVGNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBERFlFXHJcblx0XHQweEI2MTAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgRERPXHJcblx0XHQweEI2MkMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgRERXQVxyXG5cdFx0MHhCNjQ4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEREV0FFXHJcblx0XHQweEI2NjQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgRERPRVxyXG5cdFx0MHhCNjgwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEREWU9cclxuXHRcdDB4QjY5QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBERFVcclxuXHRcdDB4QjZCOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBERFdFT1xyXG5cdFx0MHhCNkQ0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEREV0VcclxuXHRcdDB4QjZGMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBERFdJXHJcblx0XHQweEI3MEMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgRERZVVxyXG5cdFx0MHhCNzI4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIERERVVcclxuXHRcdDB4Qjc0NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBERFlJXHJcblx0XHQweEI3NjAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgRERJXHJcblx0XHQweEI3N0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUkFcclxuXHRcdDB4Qjc5OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBSQUVcclxuXHRcdDB4QjdCNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBSWUFcclxuXHRcdDB4QjdEMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBSWUFFXHJcblx0XHQweEI3RUMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUkVPXHJcblx0XHQweEI4MDggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUkVcclxuXHRcdDB4QjgyNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBSWUVPXHJcblx0XHQweEI4NDAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUllFXHJcblx0XHQweEI4NUMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUk9cclxuXHRcdDB4Qjg3OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBSV0FcclxuXHRcdDB4Qjg5NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBSV0FFXHJcblx0XHQweEI4QjAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUk9FXHJcblx0XHQweEI4Q0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUllPXHJcblx0XHQweEI4RTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUlVcclxuXHRcdDB4QjkwNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBSV0VPXHJcblx0XHQweEI5MjAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUldFXHJcblx0XHQweEI5M0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUldJXHJcblx0XHQweEI5NTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUllVXHJcblx0XHQweEI5NzQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUkVVXHJcblx0XHQweEI5OTAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUllJXHJcblx0XHQweEI5QUMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUklcclxuXHRcdDB4QjlDOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNQVxyXG5cdFx0MHhCOUU0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIE1BRVxyXG5cdFx0MHhCQTAwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIE1ZQVxyXG5cdFx0MHhCQTFDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIE1ZQUVcclxuXHRcdDB4QkEzOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNRU9cclxuXHRcdDB4QkE1NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNRVxyXG5cdFx0MHhCQTcwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIE1ZRU9cclxuXHRcdDB4QkE4QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNWUVcclxuXHRcdDB4QkFBOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNT1xyXG5cdFx0MHhCQUM0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIE1XQVxyXG5cdFx0MHhCQUUwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIE1XQUVcclxuXHRcdDB4QkFGQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNT0VcclxuXHRcdDB4QkIxOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNWU9cclxuXHRcdDB4QkIzNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNVVxyXG5cdFx0MHhCQjUwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIE1XRU9cclxuXHRcdDB4QkI2QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNV0VcclxuXHRcdDB4QkI4OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNV0lcclxuXHRcdDB4QkJBNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNWVVcclxuXHRcdDB4QkJDMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNRVVcclxuXHRcdDB4QkJEQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNWUlcclxuXHRcdDB4QkJGOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBNSVxyXG5cdFx0MHhCQzE0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJBXHJcblx0XHQweEJDMzAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQkFFXHJcblx0XHQweEJDNEMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQllBXHJcblx0XHQweEJDNjggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQllBRVxyXG5cdFx0MHhCQzg0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJFT1xyXG5cdFx0MHhCQ0EwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJFXHJcblx0XHQweEJDQkMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQllFT1xyXG5cdFx0MHhCQ0Q4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJZRVxyXG5cdFx0MHhCQ0Y0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJPXHJcblx0XHQweEJEMTAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQldBXHJcblx0XHQweEJEMkMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQldBRVxyXG5cdFx0MHhCRDQ4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJPRVxyXG5cdFx0MHhCRDY0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJZT1xyXG5cdFx0MHhCRDgwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJVXHJcblx0XHQweEJEOUMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQldFT1xyXG5cdFx0MHhCREI4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJXRVxyXG5cdFx0MHhCREQ0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJXSVxyXG5cdFx0MHhCREYwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJZVVxyXG5cdFx0MHhCRTBDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJFVVxyXG5cdFx0MHhCRTI4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJZSVxyXG5cdFx0MHhCRTQ0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJJXHJcblx0XHQweEJFNjAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQkJBXHJcblx0XHQweEJFN0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQkJBRVxyXG5cdFx0MHhCRTk4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJCWUFcclxuXHRcdDB4QkVCNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBCQllBRVxyXG5cdFx0MHhCRUQwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJCRU9cclxuXHRcdDB4QkVFQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBCQkVcclxuXHRcdDB4QkYwOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBCQllFT1xyXG5cdFx0MHhCRjI0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJCWUVcclxuXHRcdDB4QkY0MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBCQk9cclxuXHRcdDB4QkY1QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBCQldBXHJcblx0XHQweEJGNzggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQkJXQUVcclxuXHRcdDB4QkY5NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBCQk9FXHJcblx0XHQweEJGQjAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQkJZT1xyXG5cdFx0MHhCRkNDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJCVVxyXG5cdFx0MHhCRkU4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJCV0VPXHJcblx0XHQweEMwMDQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQkJXRVxyXG5cdFx0MHhDMDIwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJCV0lcclxuXHRcdDB4QzAzQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBCQllVXHJcblx0XHQweEMwNTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQkJFVVxyXG5cdFx0MHhDMDc0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEJCWUlcclxuXHRcdDB4QzA5MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBCQklcclxuXHRcdDB4QzBBQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTQVxyXG5cdFx0MHhDMEM4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNBRVxyXG5cdFx0MHhDMEU0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNZQVxyXG5cdFx0MHhDMTAwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNZQUVcclxuXHRcdDB4QzExQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTRU9cclxuXHRcdDB4QzEzOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTRVxyXG5cdFx0MHhDMTU0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNZRU9cclxuXHRcdDB4QzE3MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTWUVcclxuXHRcdDB4QzE4QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTT1xyXG5cdFx0MHhDMUE4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNXQVxyXG5cdFx0MHhDMUM0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNXQUVcclxuXHRcdDB4QzFFMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTT0VcclxuXHRcdDB4QzFGQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTWU9cclxuXHRcdDB4QzIxOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTVVxyXG5cdFx0MHhDMjM0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNXRU9cclxuXHRcdDB4QzI1MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTV0VcclxuXHRcdDB4QzI2QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTV0lcclxuXHRcdDB4QzI4OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTWVVcclxuXHRcdDB4QzJBNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTRVVcclxuXHRcdDB4QzJDMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTWUlcclxuXHRcdDB4QzJEQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTSVxyXG5cdFx0MHhDMkY4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNTQVxyXG5cdFx0MHhDMzE0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNTQUVcclxuXHRcdDB4QzMzMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTU1lBXHJcblx0XHQweEMzNEMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgU1NZQUVcclxuXHRcdDB4QzM2OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTU0VPXHJcblx0XHQweEMzODQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgU1NFXHJcblx0XHQweEMzQTAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgU1NZRU9cclxuXHRcdDB4QzNCQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTU1lFXHJcblx0XHQweEMzRDggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgU1NPXHJcblx0XHQweEMzRjQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgU1NXQVxyXG5cdFx0MHhDNDEwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNTV0FFXHJcblx0XHQweEM0MkMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgU1NPRVxyXG5cdFx0MHhDNDQ4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNTWU9cclxuXHRcdDB4QzQ2NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTU1VcclxuXHRcdDB4QzQ4MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTU1dFT1xyXG5cdFx0MHhDNDlDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNTV0VcclxuXHRcdDB4QzRCOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTU1dJXHJcblx0XHQweEM0RDQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgU1NZVVxyXG5cdFx0MHhDNEYwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFNTRVVcclxuXHRcdDB4QzUwQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBTU1lJXHJcblx0XHQweEM1MjggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgU1NJXHJcblx0XHQweEM1NDQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQVxyXG5cdFx0MHhDNTYwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEFFXHJcblx0XHQweEM1N0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgWUFcclxuXHRcdDB4QzU5OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBZQUVcclxuXHRcdDB4QzVCNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBFT1xyXG5cdFx0MHhDNUQwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEVcclxuXHRcdDB4QzVFQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBZRU9cclxuXHRcdDB4QzYwOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBZRVxyXG5cdFx0MHhDNjI0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIE9cclxuXHRcdDB4QzY0MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBXQVxyXG5cdFx0MHhDNjVDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFdBRVxyXG5cdFx0MHhDNjc4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIE9FXHJcblx0XHQweEM2OTQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgWU9cclxuXHRcdDB4QzZCMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBVXHJcblx0XHQweEM2Q0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgV0VPXHJcblx0XHQweEM2RTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgV0VcclxuXHRcdDB4QzcwNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBXSVxyXG5cdFx0MHhDNzIwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFlVXHJcblx0XHQweEM3M0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgRVVcclxuXHRcdDB4Qzc1OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBZSVxyXG5cdFx0MHhDNzc0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIElcclxuXHRcdDB4Qzc5MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKQVxyXG5cdFx0MHhDN0FDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpBRVxyXG5cdFx0MHhDN0M4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpZQVxyXG5cdFx0MHhDN0U0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpZQUVcclxuXHRcdDB4QzgwMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKRU9cclxuXHRcdDB4QzgxQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKRVxyXG5cdFx0MHhDODM4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpZRU9cclxuXHRcdDB4Qzg1NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKWUVcclxuXHRcdDB4Qzg3MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKT1xyXG5cdFx0MHhDODhDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpXQVxyXG5cdFx0MHhDOEE4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpXQUVcclxuXHRcdDB4QzhDNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKT0VcclxuXHRcdDB4QzhFMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKWU9cclxuXHRcdDB4QzhGQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKVVxyXG5cdFx0MHhDOTE4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpXRU9cclxuXHRcdDB4QzkzNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKV0VcclxuXHRcdDB4Qzk1MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKV0lcclxuXHRcdDB4Qzk2QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKWVVcclxuXHRcdDB4Qzk4OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKRVVcclxuXHRcdDB4QzlBNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKWUlcclxuXHRcdDB4QzlDMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKSVxyXG5cdFx0MHhDOURDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpKQVxyXG5cdFx0MHhDOUY4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpKQUVcclxuXHRcdDB4Q0ExNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKSllBXHJcblx0XHQweENBMzAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgSkpZQUVcclxuXHRcdDB4Q0E0QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKSkVPXHJcblx0XHQweENBNjggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgSkpFXHJcblx0XHQweENBODQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgSkpZRU9cclxuXHRcdDB4Q0FBMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKSllFXHJcblx0XHQweENBQkMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgSkpPXHJcblx0XHQweENBRDggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgSkpXQVxyXG5cdFx0MHhDQUY0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpKV0FFXHJcblx0XHQweENCMTAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgSkpPRVxyXG5cdFx0MHhDQjJDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpKWU9cclxuXHRcdDB4Q0I0OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKSlVcclxuXHRcdDB4Q0I2NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKSldFT1xyXG5cdFx0MHhDQjgwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpKV0VcclxuXHRcdDB4Q0I5QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKSldJXHJcblx0XHQweENCQjggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgSkpZVVxyXG5cdFx0MHhDQkQ0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEpKRVVcclxuXHRcdDB4Q0JGMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBKSllJXHJcblx0XHQweENDMEMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgSkpJXHJcblx0XHQweENDMjggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ0FcclxuXHRcdDB4Q0M0NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBDQUVcclxuXHRcdDB4Q0M2MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBDWUFcclxuXHRcdDB4Q0M3QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBDWUFFXHJcblx0XHQweENDOTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ0VPXHJcblx0XHQweENDQjQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ0VcclxuXHRcdDB4Q0NEMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBDWUVPXHJcblx0XHQweENDRUMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ1lFXHJcblx0XHQweENEMDggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ09cclxuXHRcdDB4Q0QyNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBDV0FcclxuXHRcdDB4Q0Q0MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBDV0FFXHJcblx0XHQweENENUMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ09FXHJcblx0XHQweENENzggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ1lPXHJcblx0XHQweENEOTQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ1VcclxuXHRcdDB4Q0RCMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBDV0VPXHJcblx0XHQweENEQ0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ1dFXHJcblx0XHQweENERTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ1dJXHJcblx0XHQweENFMDQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ1lVXHJcblx0XHQweENFMjAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ0VVXHJcblx0XHQweENFM0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ1lJXHJcblx0XHQweENFNTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgQ0lcclxuXHRcdDB4Q0U3NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLQVxyXG5cdFx0MHhDRTkwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEtBRVxyXG5cdFx0MHhDRUFDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEtZQVxyXG5cdFx0MHhDRUM4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEtZQUVcclxuXHRcdDB4Q0VFNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLRU9cclxuXHRcdDB4Q0YwMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLRVxyXG5cdFx0MHhDRjFDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEtZRU9cclxuXHRcdDB4Q0YzOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLWUVcclxuXHRcdDB4Q0Y1NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLT1xyXG5cdFx0MHhDRjcwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEtXQVxyXG5cdFx0MHhDRjhDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEtXQUVcclxuXHRcdDB4Q0ZBOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLT0VcclxuXHRcdDB4Q0ZDNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLWU9cclxuXHRcdDB4Q0ZFMCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLVVxyXG5cdFx0MHhDRkZDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEtXRU9cclxuXHRcdDB4RDAxOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLV0VcclxuXHRcdDB4RDAzNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLV0lcclxuXHRcdDB4RDA1MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLWVVcclxuXHRcdDB4RDA2QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLRVVcclxuXHRcdDB4RDA4OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLWUlcclxuXHRcdDB4RDBBNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBLSVxyXG5cdFx0MHhEMEMwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRBXHJcblx0XHQweEQwREMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgVEFFXHJcblx0XHQweEQwRjggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgVFlBXHJcblx0XHQweEQxMTQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgVFlBRVxyXG5cdFx0MHhEMTMwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRFT1xyXG5cdFx0MHhEMTRDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRFXHJcblx0XHQweEQxNjggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgVFlFT1xyXG5cdFx0MHhEMTg0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRZRVxyXG5cdFx0MHhEMUEwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRPXHJcblx0XHQweEQxQkMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgVFdBXHJcblx0XHQweEQxRDggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgVFdBRVxyXG5cdFx0MHhEMUY0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRPRVxyXG5cdFx0MHhEMjEwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRZT1xyXG5cdFx0MHhEMjJDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRVXHJcblx0XHQweEQyNDggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgVFdFT1xyXG5cdFx0MHhEMjY0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRXRVxyXG5cdFx0MHhEMjgwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRXSVxyXG5cdFx0MHhEMjlDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRZVVxyXG5cdFx0MHhEMkI4ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRFVVxyXG5cdFx0MHhEMkQ0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRZSVxyXG5cdFx0MHhEMkYwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIFRJXHJcblx0XHQweEQzMEMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUEFcclxuXHRcdDB4RDMyOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBQQUVcclxuXHRcdDB4RDM0NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBQWUFcclxuXHRcdDB4RDM2MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBQWUFFXHJcblx0XHQweEQzN0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUEVPXHJcblx0XHQweEQzOTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUEVcclxuXHRcdDB4RDNCNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBQWUVPXHJcblx0XHQweEQzRDAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUFlFXHJcblx0XHQweEQzRUMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUE9cclxuXHRcdDB4RDQwOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBQV0FcclxuXHRcdDB4RDQyNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBQV0FFXHJcblx0XHQweEQ0NDAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUE9FXHJcblx0XHQweEQ0NUMgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUFlPXHJcblx0XHQweEQ0NzggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUFVcclxuXHRcdDB4RDQ5NCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBQV0VPXHJcblx0XHQweEQ0QjAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUFdFXHJcblx0XHQweEQ0Q0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUFdJXHJcblx0XHQweEQ0RTggPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUFlVXHJcblx0XHQweEQ1MDQgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUEVVXHJcblx0XHQweEQ1MjAgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUFlJXHJcblx0XHQweEQ1M0MgPT0gY29kZSB8fCAvLyBMbyAgICAgICBIQU5HVUwgU1lMTEFCTEUgUElcclxuXHRcdDB4RDU1OCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIQVxyXG5cdFx0MHhENTc0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEhBRVxyXG5cdFx0MHhENTkwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEhZQVxyXG5cdFx0MHhENUFDID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEhZQUVcclxuXHRcdDB4RDVDOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIRU9cclxuXHRcdDB4RDVFNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIRVxyXG5cdFx0MHhENjAwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEhZRU9cclxuXHRcdDB4RDYxQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIWUVcclxuXHRcdDB4RDYzOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIT1xyXG5cdFx0MHhENjU0ID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEhXQVxyXG5cdFx0MHhENjcwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEhXQUVcclxuXHRcdDB4RDY4QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIT0VcclxuXHRcdDB4RDZBOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIWU9cclxuXHRcdDB4RDZDNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIVVxyXG5cdFx0MHhENkUwID09IGNvZGUgfHwgLy8gTG8gICAgICAgSEFOR1VMIFNZTExBQkxFIEhXRU9cclxuXHRcdDB4RDZGQyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIV0VcclxuXHRcdDB4RDcxOCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIV0lcclxuXHRcdDB4RDczNCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIWVVcclxuXHRcdDB4RDc1MCA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIRVVcclxuXHRcdDB4RDc2QyA9PSBjb2RlIHx8IC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBIWUlcclxuXHRcdDB4RDc4OCA9PSBjb2RlIC8vIExvICAgICAgIEhBTkdVTCBTWUxMQUJMRSBISVxyXG5cdFx0KXtcclxuXHRcdFx0cmV0dXJuIExWO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZihcclxuXHRcdCgweEFDMDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUMxQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEdBRy4uSEFOR1VMIFNZTExBQkxFIEdBSFxyXG5cdFx0KDB4QUMxRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhBQzM3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR0FFRy4uSEFOR1VMIFNZTExBQkxFIEdBRUhcclxuXHRcdCgweEFDMzkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUM1MykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEdZQUcuLkhBTkdVTCBTWUxMQUJMRSBHWUFIXHJcblx0XHQoMHhBQzU1IDw9IGNvZGUgJiYgY29kZSA8PSAweEFDNkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHWUFFRy4uSEFOR1VMIFNZTExBQkxFIEdZQUVIXHJcblx0XHQoMHhBQzcxIDw9IGNvZGUgJiYgY29kZSA8PSAweEFDOEIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHRU9HLi5IQU5HVUwgU1lMTEFCTEUgR0VPSFxyXG5cdFx0KDB4QUM4RCA8PSBjb2RlICYmIGNvZGUgPD0gMHhBQ0E3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR0VHLi5IQU5HVUwgU1lMTEFCTEUgR0VIXHJcblx0XHQoMHhBQ0E5IDw9IGNvZGUgJiYgY29kZSA8PSAweEFDQzMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHWUVPRy4uSEFOR1VMIFNZTExBQkxFIEdZRU9IXHJcblx0XHQoMHhBQ0M1IDw9IGNvZGUgJiYgY29kZSA8PSAweEFDREYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHWUVHLi5IQU5HVUwgU1lMTEFCTEUgR1lFSFxyXG5cdFx0KDB4QUNFMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBQ0ZCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR09HLi5IQU5HVUwgU1lMTEFCTEUgR09IXHJcblx0XHQoMHhBQ0ZEIDw9IGNvZGUgJiYgY29kZSA8PSAweEFEMTcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHV0FHLi5IQU5HVUwgU1lMTEFCTEUgR1dBSFxyXG5cdFx0KDB4QUQxOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBRDMzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR1dBRUcuLkhBTkdVTCBTWUxMQUJMRSBHV0FFSFxyXG5cdFx0KDB4QUQzNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBRDRGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR09FRy4uSEFOR1VMIFNZTExBQkxFIEdPRUhcclxuXHRcdCgweEFENTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUQ2QikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEdZT0cuLkhBTkdVTCBTWUxMQUJMRSBHWU9IXHJcblx0XHQoMHhBRDZEIDw9IGNvZGUgJiYgY29kZSA8PSAweEFEODcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHVUcuLkhBTkdVTCBTWUxMQUJMRSBHVUhcclxuXHRcdCgweEFEODkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QURBMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEdXRU9HLi5IQU5HVUwgU1lMTEFCTEUgR1dFT0hcclxuXHRcdCgweEFEQTUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QURCRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEdXRUcuLkhBTkdVTCBTWUxMQUJMRSBHV0VIXHJcblx0XHQoMHhBREMxIDw9IGNvZGUgJiYgY29kZSA8PSAweEFEREIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHV0lHLi5IQU5HVUwgU1lMTEFCTEUgR1dJSFxyXG5cdFx0KDB4QURERCA8PSBjb2RlICYmIGNvZGUgPD0gMHhBREY3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR1lVRy4uSEFOR1VMIFNZTExBQkxFIEdZVUhcclxuXHRcdCgweEFERjkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QUUxMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEdFVUcuLkhBTkdVTCBTWUxMQUJMRSBHRVVIXHJcblx0XHQoMHhBRTE1IDw9IGNvZGUgJiYgY29kZSA8PSAweEFFMkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHWUlHLi5IQU5HVUwgU1lMTEFCTEUgR1lJSFxyXG5cdFx0KDB4QUUzMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBRTRCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR0lHLi5IQU5HVUwgU1lMTEFCTEUgR0lIXHJcblx0XHQoMHhBRTREIDw9IGNvZGUgJiYgY29kZSA8PSAweEFFNjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR0FHLi5IQU5HVUwgU1lMTEFCTEUgR0dBSFxyXG5cdFx0KDB4QUU2OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBRTgzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR0dBRUcuLkhBTkdVTCBTWUxMQUJMRSBHR0FFSFxyXG5cdFx0KDB4QUU4NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBRTlGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR0dZQUcuLkhBTkdVTCBTWUxMQUJMRSBHR1lBSFxyXG5cdFx0KDB4QUVBMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBRUJCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR0dZQUVHLi5IQU5HVUwgU1lMTEFCTEUgR0dZQUVIXHJcblx0XHQoMHhBRUJEIDw9IGNvZGUgJiYgY29kZSA8PSAweEFFRDcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR0VPRy4uSEFOR1VMIFNZTExBQkxFIEdHRU9IXHJcblx0XHQoMHhBRUQ5IDw9IGNvZGUgJiYgY29kZSA8PSAweEFFRjMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR0VHLi5IQU5HVUwgU1lMTEFCTEUgR0dFSFxyXG5cdFx0KDB4QUVGNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBRjBGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR0dZRU9HLi5IQU5HVUwgU1lMTEFCTEUgR0dZRU9IXHJcblx0XHQoMHhBRjExIDw9IGNvZGUgJiYgY29kZSA8PSAweEFGMkIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR1lFRy4uSEFOR1VMIFNZTExBQkxFIEdHWUVIXHJcblx0XHQoMHhBRjJEIDw9IGNvZGUgJiYgY29kZSA8PSAweEFGNDcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR09HLi5IQU5HVUwgU1lMTEFCTEUgR0dPSFxyXG5cdFx0KDB4QUY0OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBRjYzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR0dXQUcuLkhBTkdVTCBTWUxMQUJMRSBHR1dBSFxyXG5cdFx0KDB4QUY2NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBRjdGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR0dXQUVHLi5IQU5HVUwgU1lMTEFCTEUgR0dXQUVIXHJcblx0XHQoMHhBRjgxIDw9IGNvZGUgJiYgY29kZSA8PSAweEFGOUIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR09FRy4uSEFOR1VMIFNZTExBQkxFIEdHT0VIXHJcblx0XHQoMHhBRjlEIDw9IGNvZGUgJiYgY29kZSA8PSAweEFGQjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR1lPRy4uSEFOR1VMIFNZTExBQkxFIEdHWU9IXHJcblx0XHQoMHhBRkI5IDw9IGNvZGUgJiYgY29kZSA8PSAweEFGRDMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR1VHLi5IQU5HVUwgU1lMTEFCTEUgR0dVSFxyXG5cdFx0KDB4QUZENSA8PSBjb2RlICYmIGNvZGUgPD0gMHhBRkVGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgR0dXRU9HLi5IQU5HVUwgU1lMTEFCTEUgR0dXRU9IXHJcblx0XHQoMHhBRkYxIDw9IGNvZGUgJiYgY29kZSA8PSAweEIwMEIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR1dFRy4uSEFOR1VMIFNZTExBQkxFIEdHV0VIXHJcblx0XHQoMHhCMDBEIDw9IGNvZGUgJiYgY29kZSA8PSAweEIwMjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR1dJRy4uSEFOR1VMIFNZTExBQkxFIEdHV0lIXHJcblx0XHQoMHhCMDI5IDw9IGNvZGUgJiYgY29kZSA8PSAweEIwNDMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR1lVRy4uSEFOR1VMIFNZTExBQkxFIEdHWVVIXHJcblx0XHQoMHhCMDQ1IDw9IGNvZGUgJiYgY29kZSA8PSAweEIwNUYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR0VVRy4uSEFOR1VMIFNZTExBQkxFIEdHRVVIXHJcblx0XHQoMHhCMDYxIDw9IGNvZGUgJiYgY29kZSA8PSAweEIwN0IpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR1lJRy4uSEFOR1VMIFNZTExBQkxFIEdHWUlIXHJcblx0XHQoMHhCMDdEIDw9IGNvZGUgJiYgY29kZSA8PSAweEIwOTcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBHR0lHLi5IQU5HVUwgU1lMTEFCTEUgR0dJSFxyXG5cdFx0KDB4QjA5OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCMEIzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTkFHLi5IQU5HVUwgU1lMTEFCTEUgTkFIXHJcblx0XHQoMHhCMEI1IDw9IGNvZGUgJiYgY29kZSA8PSAweEIwQ0YpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBOQUVHLi5IQU5HVUwgU1lMTEFCTEUgTkFFSFxyXG5cdFx0KDB4QjBEMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCMEVCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTllBRy4uSEFOR1VMIFNZTExBQkxFIE5ZQUhcclxuXHRcdCgweEIwRUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjEwNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE5ZQUVHLi5IQU5HVUwgU1lMTEFCTEUgTllBRUhcclxuXHRcdCgweEIxMDkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjEyMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE5FT0cuLkhBTkdVTCBTWUxMQUJMRSBORU9IXHJcblx0XHQoMHhCMTI1IDw9IGNvZGUgJiYgY29kZSA8PSAweEIxM0YpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBORUcuLkhBTkdVTCBTWUxMQUJMRSBORUhcclxuXHRcdCgweEIxNDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjE1QikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE5ZRU9HLi5IQU5HVUwgU1lMTEFCTEUgTllFT0hcclxuXHRcdCgweEIxNUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjE3NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE5ZRUcuLkhBTkdVTCBTWUxMQUJMRSBOWUVIXHJcblx0XHQoMHhCMTc5IDw9IGNvZGUgJiYgY29kZSA8PSAweEIxOTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBOT0cuLkhBTkdVTCBTWUxMQUJMRSBOT0hcclxuXHRcdCgweEIxOTUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjFBRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE5XQUcuLkhBTkdVTCBTWUxMQUJMRSBOV0FIXHJcblx0XHQoMHhCMUIxIDw9IGNvZGUgJiYgY29kZSA8PSAweEIxQ0IpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBOV0FFRy4uSEFOR1VMIFNZTExBQkxFIE5XQUVIXHJcblx0XHQoMHhCMUNEIDw9IGNvZGUgJiYgY29kZSA8PSAweEIxRTcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBOT0VHLi5IQU5HVUwgU1lMTEFCTEUgTk9FSFxyXG5cdFx0KDB4QjFFOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCMjAzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTllPRy4uSEFOR1VMIFNZTExBQkxFIE5ZT0hcclxuXHRcdCgweEIyMDUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjIxRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE5VRy4uSEFOR1VMIFNZTExBQkxFIE5VSFxyXG5cdFx0KDB4QjIyMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCMjNCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTldFT0cuLkhBTkdVTCBTWUxMQUJMRSBOV0VPSFxyXG5cdFx0KDB4QjIzRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhCMjU3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTldFRy4uSEFOR1VMIFNZTExBQkxFIE5XRUhcclxuXHRcdCgweEIyNTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjI3MykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE5XSUcuLkhBTkdVTCBTWUxMQUJMRSBOV0lIXHJcblx0XHQoMHhCMjc1IDw9IGNvZGUgJiYgY29kZSA8PSAweEIyOEYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBOWVVHLi5IQU5HVUwgU1lMTEFCTEUgTllVSFxyXG5cdFx0KDB4QjI5MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCMkFCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTkVVRy4uSEFOR1VMIFNZTExBQkxFIE5FVUhcclxuXHRcdCgweEIyQUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjJDNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE5ZSUcuLkhBTkdVTCBTWUxMQUJMRSBOWUlIXHJcblx0XHQoMHhCMkM5IDw9IGNvZGUgJiYgY29kZSA8PSAweEIyRTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBOSUcuLkhBTkdVTCBTWUxMQUJMRSBOSUhcclxuXHRcdCgweEIyRTUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjJGRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIERBRy4uSEFOR1VMIFNZTExBQkxFIERBSFxyXG5cdFx0KDB4QjMwMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCMzFCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgREFFRy4uSEFOR1VMIFNZTExBQkxFIERBRUhcclxuXHRcdCgweEIzMUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjMzNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIERZQUcuLkhBTkdVTCBTWUxMQUJMRSBEWUFIXHJcblx0XHQoMHhCMzM5IDw9IGNvZGUgJiYgY29kZSA8PSAweEIzNTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEWUFFRy4uSEFOR1VMIFNZTExBQkxFIERZQUVIXHJcblx0XHQoMHhCMzU1IDw9IGNvZGUgJiYgY29kZSA8PSAweEIzNkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERU9HLi5IQU5HVUwgU1lMTEFCTEUgREVPSFxyXG5cdFx0KDB4QjM3MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCMzhCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgREVHLi5IQU5HVUwgU1lMTEFCTEUgREVIXHJcblx0XHQoMHhCMzhEIDw9IGNvZGUgJiYgY29kZSA8PSAweEIzQTcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEWUVPRy4uSEFOR1VMIFNZTExBQkxFIERZRU9IXHJcblx0XHQoMHhCM0E5IDw9IGNvZGUgJiYgY29kZSA8PSAweEIzQzMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEWUVHLi5IQU5HVUwgU1lMTEFCTEUgRFlFSFxyXG5cdFx0KDB4QjNDNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCM0RGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRE9HLi5IQU5HVUwgU1lMTEFCTEUgRE9IXHJcblx0XHQoMHhCM0UxIDw9IGNvZGUgJiYgY29kZSA8PSAweEIzRkIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEV0FHLi5IQU5HVUwgU1lMTEFCTEUgRFdBSFxyXG5cdFx0KDB4QjNGRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNDE3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRFdBRUcuLkhBTkdVTCBTWUxMQUJMRSBEV0FFSFxyXG5cdFx0KDB4QjQxOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNDMzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRE9FRy4uSEFOR1VMIFNZTExBQkxFIERPRUhcclxuXHRcdCgweEI0MzUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjQ0RikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIERZT0cuLkhBTkdVTCBTWUxMQUJMRSBEWU9IXHJcblx0XHQoMHhCNDUxIDw9IGNvZGUgJiYgY29kZSA8PSAweEI0NkIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEVUcuLkhBTkdVTCBTWUxMQUJMRSBEVUhcclxuXHRcdCgweEI0NkQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjQ4NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIERXRU9HLi5IQU5HVUwgU1lMTEFCTEUgRFdFT0hcclxuXHRcdCgweEI0ODkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjRBMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIERXRUcuLkhBTkdVTCBTWUxMQUJMRSBEV0VIXHJcblx0XHQoMHhCNEE1IDw9IGNvZGUgJiYgY29kZSA8PSAweEI0QkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEV0lHLi5IQU5HVUwgU1lMTEFCTEUgRFdJSFxyXG5cdFx0KDB4QjRDMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNERCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRFlVRy4uSEFOR1VMIFNZTExBQkxFIERZVUhcclxuXHRcdCgweEI0REQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjRGNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIERFVUcuLkhBTkdVTCBTWUxMQUJMRSBERVVIXHJcblx0XHQoMHhCNEY5IDw9IGNvZGUgJiYgY29kZSA8PSAweEI1MTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEWUlHLi5IQU5HVUwgU1lMTEFCTEUgRFlJSFxyXG5cdFx0KDB4QjUxNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNTJGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRElHLi5IQU5HVUwgU1lMTEFCTEUgRElIXHJcblx0XHQoMHhCNTMxIDw9IGNvZGUgJiYgY29kZSA8PSAweEI1NEIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEREFHLi5IQU5HVUwgU1lMTEFCTEUgRERBSFxyXG5cdFx0KDB4QjU0RCA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNTY3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRERBRUcuLkhBTkdVTCBTWUxMQUJMRSBEREFFSFxyXG5cdFx0KDB4QjU2OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNTgzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRERZQUcuLkhBTkdVTCBTWUxMQUJMRSBERFlBSFxyXG5cdFx0KDB4QjU4NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNTlGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRERZQUVHLi5IQU5HVUwgU1lMTEFCTEUgRERZQUVIXHJcblx0XHQoMHhCNUExIDw9IGNvZGUgJiYgY29kZSA8PSAweEI1QkIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEREVPRy4uSEFOR1VMIFNZTExBQkxFIERERU9IXHJcblx0XHQoMHhCNUJEIDw9IGNvZGUgJiYgY29kZSA8PSAweEI1RDcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEREVHLi5IQU5HVUwgU1lMTEFCTEUgRERFSFxyXG5cdFx0KDB4QjVEOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNUYzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRERZRU9HLi5IQU5HVUwgU1lMTEFCTEUgRERZRU9IXHJcblx0XHQoMHhCNUY1IDw9IGNvZGUgJiYgY29kZSA8PSAweEI2MEYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERFlFRy4uSEFOR1VMIFNZTExBQkxFIEREWUVIXHJcblx0XHQoMHhCNjExIDw9IGNvZGUgJiYgY29kZSA8PSAweEI2MkIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERE9HLi5IQU5HVUwgU1lMTEFCTEUgRERPSFxyXG5cdFx0KDB4QjYyRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNjQ3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRERXQUcuLkhBTkdVTCBTWUxMQUJMRSBERFdBSFxyXG5cdFx0KDB4QjY0OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNjYzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRERXQUVHLi5IQU5HVUwgU1lMTEFCTEUgRERXQUVIXHJcblx0XHQoMHhCNjY1IDw9IGNvZGUgJiYgY29kZSA8PSAweEI2N0YpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERE9FRy4uSEFOR1VMIFNZTExBQkxFIERET0VIXHJcblx0XHQoMHhCNjgxIDw9IGNvZGUgJiYgY29kZSA8PSAweEI2OUIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERFlPRy4uSEFOR1VMIFNZTExBQkxFIEREWU9IXHJcblx0XHQoMHhCNjlEIDw9IGNvZGUgJiYgY29kZSA8PSAweEI2QjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERFVHLi5IQU5HVUwgU1lMTEFCTEUgRERVSFxyXG5cdFx0KDB4QjZCOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNkQzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRERXRU9HLi5IQU5HVUwgU1lMTEFCTEUgRERXRU9IXHJcblx0XHQoMHhCNkQ1IDw9IGNvZGUgJiYgY29kZSA8PSAweEI2RUYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERFdFRy4uSEFOR1VMIFNZTExBQkxFIEREV0VIXHJcblx0XHQoMHhCNkYxIDw9IGNvZGUgJiYgY29kZSA8PSAweEI3MEIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERFdJRy4uSEFOR1VMIFNZTExBQkxFIEREV0lIXHJcblx0XHQoMHhCNzBEIDw9IGNvZGUgJiYgY29kZSA8PSAweEI3MjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERFlVRy4uSEFOR1VMIFNZTExBQkxFIEREWVVIXHJcblx0XHQoMHhCNzI5IDw9IGNvZGUgJiYgY29kZSA8PSAweEI3NDMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBEREVVRy4uSEFOR1VMIFNZTExBQkxFIERERVVIXHJcblx0XHQoMHhCNzQ1IDw9IGNvZGUgJiYgY29kZSA8PSAweEI3NUYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERFlJRy4uSEFOR1VMIFNZTExBQkxFIEREWUlIXHJcblx0XHQoMHhCNzYxIDw9IGNvZGUgJiYgY29kZSA8PSAweEI3N0IpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBERElHLi5IQU5HVUwgU1lMTEFCTEUgRERJSFxyXG5cdFx0KDB4Qjc3RCA8PSBjb2RlICYmIGNvZGUgPD0gMHhCNzk3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUkFHLi5IQU5HVUwgU1lMTEFCTEUgUkFIXHJcblx0XHQoMHhCNzk5IDw9IGNvZGUgJiYgY29kZSA8PSAweEI3QjMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBSQUVHLi5IQU5HVUwgU1lMTEFCTEUgUkFFSFxyXG5cdFx0KDB4QjdCNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCN0NGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUllBRy4uSEFOR1VMIFNZTExBQkxFIFJZQUhcclxuXHRcdCgweEI3RDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjdFQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFJZQUVHLi5IQU5HVUwgU1lMTEFCTEUgUllBRUhcclxuXHRcdCgweEI3RUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjgwNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFJFT0cuLkhBTkdVTCBTWUxMQUJMRSBSRU9IXHJcblx0XHQoMHhCODA5IDw9IGNvZGUgJiYgY29kZSA8PSAweEI4MjMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBSRUcuLkhBTkdVTCBTWUxMQUJMRSBSRUhcclxuXHRcdCgweEI4MjUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjgzRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFJZRU9HLi5IQU5HVUwgU1lMTEFCTEUgUllFT0hcclxuXHRcdCgweEI4NDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4Qjg1QikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFJZRUcuLkhBTkdVTCBTWUxMQUJMRSBSWUVIXHJcblx0XHQoMHhCODVEIDw9IGNvZGUgJiYgY29kZSA8PSAweEI4NzcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBST0cuLkhBTkdVTCBTWUxMQUJMRSBST0hcclxuXHRcdCgweEI4NzkgPD0gY29kZSAmJiBjb2RlIDw9IDB4Qjg5MykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFJXQUcuLkhBTkdVTCBTWUxMQUJMRSBSV0FIXHJcblx0XHQoMHhCODk1IDw9IGNvZGUgJiYgY29kZSA8PSAweEI4QUYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBSV0FFRy4uSEFOR1VMIFNZTExBQkxFIFJXQUVIXHJcblx0XHQoMHhCOEIxIDw9IGNvZGUgJiYgY29kZSA8PSAweEI4Q0IpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBST0VHLi5IQU5HVUwgU1lMTEFCTEUgUk9FSFxyXG5cdFx0KDB4QjhDRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhCOEU3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUllPRy4uSEFOR1VMIFNZTExBQkxFIFJZT0hcclxuXHRcdCgweEI4RTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjkwMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFJVRy4uSEFOR1VMIFNZTExBQkxFIFJVSFxyXG5cdFx0KDB4QjkwNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCOTFGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUldFT0cuLkhBTkdVTCBTWUxMQUJMRSBSV0VPSFxyXG5cdFx0KDB4QjkyMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCOTNCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUldFRy4uSEFOR1VMIFNZTExBQkxFIFJXRUhcclxuXHRcdCgweEI5M0QgPD0gY29kZSAmJiBjb2RlIDw9IDB4Qjk1NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFJXSUcuLkhBTkdVTCBTWUxMQUJMRSBSV0lIXHJcblx0XHQoMHhCOTU5IDw9IGNvZGUgJiYgY29kZSA8PSAweEI5NzMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBSWVVHLi5IQU5HVUwgU1lMTEFCTEUgUllVSFxyXG5cdFx0KDB4Qjk3NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCOThGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUkVVRy4uSEFOR1VMIFNZTExBQkxFIFJFVUhcclxuXHRcdCgweEI5OTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjlBQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFJZSUcuLkhBTkdVTCBTWUxMQUJMRSBSWUlIXHJcblx0XHQoMHhCOUFEIDw9IGNvZGUgJiYgY29kZSA8PSAweEI5QzcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBSSUcuLkhBTkdVTCBTWUxMQUJMRSBSSUhcclxuXHRcdCgweEI5QzkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QjlFMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE1BRy4uSEFOR1VMIFNZTExBQkxFIE1BSFxyXG5cdFx0KDB4QjlFNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCOUZGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTUFFRy4uSEFOR1VMIFNZTExBQkxFIE1BRUhcclxuXHRcdCgweEJBMDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkExQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE1ZQUcuLkhBTkdVTCBTWUxMQUJMRSBNWUFIXHJcblx0XHQoMHhCQTFEIDw9IGNvZGUgJiYgY29kZSA8PSAweEJBMzcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBNWUFFRy4uSEFOR1VMIFNZTExBQkxFIE1ZQUVIXHJcblx0XHQoMHhCQTM5IDw9IGNvZGUgJiYgY29kZSA8PSAweEJBNTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBNRU9HLi5IQU5HVUwgU1lMTEFCTEUgTUVPSFxyXG5cdFx0KDB4QkE1NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCQTZGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTUVHLi5IQU5HVUwgU1lMTEFCTEUgTUVIXHJcblx0XHQoMHhCQTcxIDw9IGNvZGUgJiYgY29kZSA8PSAweEJBOEIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBNWUVPRy4uSEFOR1VMIFNZTExBQkxFIE1ZRU9IXHJcblx0XHQoMHhCQThEIDw9IGNvZGUgJiYgY29kZSA8PSAweEJBQTcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBNWUVHLi5IQU5HVUwgU1lMTEFCTEUgTVlFSFxyXG5cdFx0KDB4QkFBOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCQUMzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTU9HLi5IQU5HVUwgU1lMTEFCTEUgTU9IXHJcblx0XHQoMHhCQUM1IDw9IGNvZGUgJiYgY29kZSA8PSAweEJBREYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBNV0FHLi5IQU5HVUwgU1lMTEFCTEUgTVdBSFxyXG5cdFx0KDB4QkFFMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCQUZCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTVdBRUcuLkhBTkdVTCBTWUxMQUJMRSBNV0FFSFxyXG5cdFx0KDB4QkFGRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhCQjE3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTU9FRy4uSEFOR1VMIFNZTExBQkxFIE1PRUhcclxuXHRcdCgweEJCMTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkIzMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE1ZT0cuLkhBTkdVTCBTWUxMQUJMRSBNWU9IXHJcblx0XHQoMHhCQjM1IDw9IGNvZGUgJiYgY29kZSA8PSAweEJCNEYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBNVUcuLkhBTkdVTCBTWUxMQUJMRSBNVUhcclxuXHRcdCgweEJCNTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkI2QikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE1XRU9HLi5IQU5HVUwgU1lMTEFCTEUgTVdFT0hcclxuXHRcdCgweEJCNkQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkI4NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE1XRUcuLkhBTkdVTCBTWUxMQUJMRSBNV0VIXHJcblx0XHQoMHhCQjg5IDw9IGNvZGUgJiYgY29kZSA8PSAweEJCQTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBNV0lHLi5IQU5HVUwgU1lMTEFCTEUgTVdJSFxyXG5cdFx0KDB4QkJBNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCQkJGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTVlVRy4uSEFOR1VMIFNZTExBQkxFIE1ZVUhcclxuXHRcdCgweEJCQzEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkJEQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE1FVUcuLkhBTkdVTCBTWUxMQUJMRSBNRVVIXHJcblx0XHQoMHhCQkREIDw9IGNvZGUgJiYgY29kZSA8PSAweEJCRjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBNWUlHLi5IQU5HVUwgU1lMTEFCTEUgTVlJSFxyXG5cdFx0KDB4QkJGOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCQzEzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgTUlHLi5IQU5HVUwgU1lMTEFCTEUgTUlIXHJcblx0XHQoMHhCQzE1IDw9IGNvZGUgJiYgY29kZSA8PSAweEJDMkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBCQUcuLkhBTkdVTCBTWUxMQUJMRSBCQUhcclxuXHRcdCgweEJDMzEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkM0QikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJBRUcuLkhBTkdVTCBTWUxMQUJMRSBCQUVIXHJcblx0XHQoMHhCQzREIDw9IGNvZGUgJiYgY29kZSA8PSAweEJDNjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBCWUFHLi5IQU5HVUwgU1lMTEFCTEUgQllBSFxyXG5cdFx0KDB4QkM2OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCQzgzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQllBRUcuLkhBTkdVTCBTWUxMQUJMRSBCWUFFSFxyXG5cdFx0KDB4QkM4NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCQzlGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkVPRy4uSEFOR1VMIFNZTExBQkxFIEJFT0hcclxuXHRcdCgweEJDQTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkNCQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJFRy4uSEFOR1VMIFNZTExBQkxFIEJFSFxyXG5cdFx0KDB4QkNCRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhCQ0Q3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQllFT0cuLkhBTkdVTCBTWUxMQUJMRSBCWUVPSFxyXG5cdFx0KDB4QkNEOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCQ0YzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQllFRy4uSEFOR1VMIFNZTExBQkxFIEJZRUhcclxuXHRcdCgweEJDRjUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkQwRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJPRy4uSEFOR1VMIFNZTExBQkxFIEJPSFxyXG5cdFx0KDB4QkQxMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRDJCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQldBRy4uSEFOR1VMIFNZTExBQkxFIEJXQUhcclxuXHRcdCgweEJEMkQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkQ0NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJXQUVHLi5IQU5HVUwgU1lMTEFCTEUgQldBRUhcclxuXHRcdCgweEJENDkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkQ2MykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJPRUcuLkhBTkdVTCBTWUxMQUJMRSBCT0VIXHJcblx0XHQoMHhCRDY1IDw9IGNvZGUgJiYgY29kZSA8PSAweEJEN0YpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBCWU9HLi5IQU5HVUwgU1lMTEFCTEUgQllPSFxyXG5cdFx0KDB4QkQ4MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRDlCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQlVHLi5IQU5HVUwgU1lMTEFCTEUgQlVIXHJcblx0XHQoMHhCRDlEIDw9IGNvZGUgJiYgY29kZSA8PSAweEJEQjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBCV0VPRy4uSEFOR1VMIFNZTExBQkxFIEJXRU9IXHJcblx0XHQoMHhCREI5IDw9IGNvZGUgJiYgY29kZSA8PSAweEJERDMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBCV0VHLi5IQU5HVUwgU1lMTEFCTEUgQldFSFxyXG5cdFx0KDB4QkRENSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCREVGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQldJRy4uSEFOR1VMIFNZTExBQkxFIEJXSUhcclxuXHRcdCgweEJERjEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkUwQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJZVUcuLkhBTkdVTCBTWUxMQUJMRSBCWVVIXHJcblx0XHQoMHhCRTBEIDw9IGNvZGUgJiYgY29kZSA8PSAweEJFMjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBCRVVHLi5IQU5HVUwgU1lMTEFCTEUgQkVVSFxyXG5cdFx0KDB4QkUyOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRTQzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQllJRy4uSEFOR1VMIFNZTExBQkxFIEJZSUhcclxuXHRcdCgweEJFNDUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkU1RikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJJRy4uSEFOR1VMIFNZTExBQkxFIEJJSFxyXG5cdFx0KDB4QkU2MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRTdCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJBRy4uSEFOR1VMIFNZTExBQkxFIEJCQUhcclxuXHRcdCgweEJFN0QgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkU5NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJCQUVHLi5IQU5HVUwgU1lMTEFCTEUgQkJBRUhcclxuXHRcdCgweEJFOTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkVCMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJCWUFHLi5IQU5HVUwgU1lMTEFCTEUgQkJZQUhcclxuXHRcdCgweEJFQjUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkVDRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJCWUFFRy4uSEFOR1VMIFNZTExBQkxFIEJCWUFFSFxyXG5cdFx0KDB4QkVEMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRUVCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJFT0cuLkhBTkdVTCBTWUxMQUJMRSBCQkVPSFxyXG5cdFx0KDB4QkVFRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRjA3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJFRy4uSEFOR1VMIFNZTExBQkxFIEJCRUhcclxuXHRcdCgweEJGMDkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkYyMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJCWUVPRy4uSEFOR1VMIFNZTExBQkxFIEJCWUVPSFxyXG5cdFx0KDB4QkYyNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRjNGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJZRUcuLkhBTkdVTCBTWUxMQUJMRSBCQllFSFxyXG5cdFx0KDB4QkY0MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRjVCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJPRy4uSEFOR1VMIFNZTExBQkxFIEJCT0hcclxuXHRcdCgweEJGNUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkY3NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJCV0FHLi5IQU5HVUwgU1lMTEFCTEUgQkJXQUhcclxuXHRcdCgweEJGNzkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QkY5MykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJCV0FFRy4uSEFOR1VMIFNZTExBQkxFIEJCV0FFSFxyXG5cdFx0KDB4QkY5NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRkFGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJPRUcuLkhBTkdVTCBTWUxMQUJMRSBCQk9FSFxyXG5cdFx0KDB4QkZCMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRkNCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJZT0cuLkhBTkdVTCBTWUxMQUJMRSBCQllPSFxyXG5cdFx0KDB4QkZDRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhCRkU3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJVRy4uSEFOR1VMIFNZTExBQkxFIEJCVUhcclxuXHRcdCgweEJGRTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzAwMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEJCV0VPRy4uSEFOR1VMIFNZTExBQkxFIEJCV0VPSFxyXG5cdFx0KDB4QzAwNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMDFGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJXRUcuLkhBTkdVTCBTWUxMQUJMRSBCQldFSFxyXG5cdFx0KDB4QzAyMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMDNCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJXSUcuLkhBTkdVTCBTWUxMQUJMRSBCQldJSFxyXG5cdFx0KDB4QzAzRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMDU3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJZVUcuLkhBTkdVTCBTWUxMQUJMRSBCQllVSFxyXG5cdFx0KDB4QzA1OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMDczKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJFVUcuLkhBTkdVTCBTWUxMQUJMRSBCQkVVSFxyXG5cdFx0KDB4QzA3NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMDhGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJZSUcuLkhBTkdVTCBTWUxMQUJMRSBCQllJSFxyXG5cdFx0KDB4QzA5MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMEFCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQkJJRy4uSEFOR1VMIFNZTExBQkxFIEJCSUhcclxuXHRcdCgweEMwQUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzBDNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFNBRy4uSEFOR1VMIFNZTExBQkxFIFNBSFxyXG5cdFx0KDB4QzBDOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMEUzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU0FFRy4uSEFOR1VMIFNZTExBQkxFIFNBRUhcclxuXHRcdCgweEMwRTUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzBGRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFNZQUcuLkhBTkdVTCBTWUxMQUJMRSBTWUFIXHJcblx0XHQoMHhDMTAxIDw9IGNvZGUgJiYgY29kZSA8PSAweEMxMUIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTWUFFRy4uSEFOR1VMIFNZTExBQkxFIFNZQUVIXHJcblx0XHQoMHhDMTFEIDw9IGNvZGUgJiYgY29kZSA8PSAweEMxMzcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTRU9HLi5IQU5HVUwgU1lMTEFCTEUgU0VPSFxyXG5cdFx0KDB4QzEzOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMTUzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU0VHLi5IQU5HVUwgU1lMTEFCTEUgU0VIXHJcblx0XHQoMHhDMTU1IDw9IGNvZGUgJiYgY29kZSA8PSAweEMxNkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTWUVPRy4uSEFOR1VMIFNZTExBQkxFIFNZRU9IXHJcblx0XHQoMHhDMTcxIDw9IGNvZGUgJiYgY29kZSA8PSAweEMxOEIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTWUVHLi5IQU5HVUwgU1lMTEFCTEUgU1lFSFxyXG5cdFx0KDB4QzE4RCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMUE3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU09HLi5IQU5HVUwgU1lMTEFCTEUgU09IXHJcblx0XHQoMHhDMUE5IDw9IGNvZGUgJiYgY29kZSA8PSAweEMxQzMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTV0FHLi5IQU5HVUwgU1lMTEFCTEUgU1dBSFxyXG5cdFx0KDB4QzFDNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMURGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU1dBRUcuLkhBTkdVTCBTWUxMQUJMRSBTV0FFSFxyXG5cdFx0KDB4QzFFMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMUZCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU09FRy4uSEFOR1VMIFNZTExBQkxFIFNPRUhcclxuXHRcdCgweEMxRkQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzIxNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFNZT0cuLkhBTkdVTCBTWUxMQUJMRSBTWU9IXHJcblx0XHQoMHhDMjE5IDw9IGNvZGUgJiYgY29kZSA8PSAweEMyMzMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTVUcuLkhBTkdVTCBTWUxMQUJMRSBTVUhcclxuXHRcdCgweEMyMzUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzI0RikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFNXRU9HLi5IQU5HVUwgU1lMTEFCTEUgU1dFT0hcclxuXHRcdCgweEMyNTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzI2QikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFNXRUcuLkhBTkdVTCBTWUxMQUJMRSBTV0VIXHJcblx0XHQoMHhDMjZEIDw9IGNvZGUgJiYgY29kZSA8PSAweEMyODcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTV0lHLi5IQU5HVUwgU1lMTEFCTEUgU1dJSFxyXG5cdFx0KDB4QzI4OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMkEzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU1lVRy4uSEFOR1VMIFNZTExBQkxFIFNZVUhcclxuXHRcdCgweEMyQTUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzJCRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFNFVUcuLkhBTkdVTCBTWUxMQUJMRSBTRVVIXHJcblx0XHQoMHhDMkMxIDw9IGNvZGUgJiYgY29kZSA8PSAweEMyREIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTWUlHLi5IQU5HVUwgU1lMTEFCTEUgU1lJSFxyXG5cdFx0KDB4QzJERCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMkY3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU0lHLi5IQU5HVUwgU1lMTEFCTEUgU0lIXHJcblx0XHQoMHhDMkY5IDw9IGNvZGUgJiYgY29kZSA8PSAweEMzMTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU0FHLi5IQU5HVUwgU1lMTEFCTEUgU1NBSFxyXG5cdFx0KDB4QzMxNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMzJGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU1NBRUcuLkhBTkdVTCBTWUxMQUJMRSBTU0FFSFxyXG5cdFx0KDB4QzMzMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMzRCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU1NZQUcuLkhBTkdVTCBTWUxMQUJMRSBTU1lBSFxyXG5cdFx0KDB4QzM0RCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDMzY3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU1NZQUVHLi5IQU5HVUwgU1lMTEFCTEUgU1NZQUVIXHJcblx0XHQoMHhDMzY5IDw9IGNvZGUgJiYgY29kZSA8PSAweEMzODMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU0VPRy4uSEFOR1VMIFNZTExBQkxFIFNTRU9IXHJcblx0XHQoMHhDMzg1IDw9IGNvZGUgJiYgY29kZSA8PSAweEMzOUYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU0VHLi5IQU5HVUwgU1lMTEFCTEUgU1NFSFxyXG5cdFx0KDB4QzNBMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDM0JCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU1NZRU9HLi5IQU5HVUwgU1lMTEFCTEUgU1NZRU9IXHJcblx0XHQoMHhDM0JEIDw9IGNvZGUgJiYgY29kZSA8PSAweEMzRDcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU1lFRy4uSEFOR1VMIFNZTExBQkxFIFNTWUVIXHJcblx0XHQoMHhDM0Q5IDw9IGNvZGUgJiYgY29kZSA8PSAweEMzRjMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU09HLi5IQU5HVUwgU1lMTEFCTEUgU1NPSFxyXG5cdFx0KDB4QzNGNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDNDBGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU1NXQUcuLkhBTkdVTCBTWUxMQUJMRSBTU1dBSFxyXG5cdFx0KDB4QzQxMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDNDJCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU1NXQUVHLi5IQU5HVUwgU1lMTEFCTEUgU1NXQUVIXHJcblx0XHQoMHhDNDJEIDw9IGNvZGUgJiYgY29kZSA8PSAweEM0NDcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU09FRy4uSEFOR1VMIFNZTExBQkxFIFNTT0VIXHJcblx0XHQoMHhDNDQ5IDw9IGNvZGUgJiYgY29kZSA8PSAweEM0NjMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU1lPRy4uSEFOR1VMIFNZTExBQkxFIFNTWU9IXHJcblx0XHQoMHhDNDY1IDw9IGNvZGUgJiYgY29kZSA8PSAweEM0N0YpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU1VHLi5IQU5HVUwgU1lMTEFCTEUgU1NVSFxyXG5cdFx0KDB4QzQ4MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDNDlCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgU1NXRU9HLi5IQU5HVUwgU1lMTEFCTEUgU1NXRU9IXHJcblx0XHQoMHhDNDlEIDw9IGNvZGUgJiYgY29kZSA8PSAweEM0QjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU1dFRy4uSEFOR1VMIFNZTExBQkxFIFNTV0VIXHJcblx0XHQoMHhDNEI5IDw9IGNvZGUgJiYgY29kZSA8PSAweEM0RDMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU1dJRy4uSEFOR1VMIFNZTExBQkxFIFNTV0lIXHJcblx0XHQoMHhDNEQ1IDw9IGNvZGUgJiYgY29kZSA8PSAweEM0RUYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU1lVRy4uSEFOR1VMIFNZTExBQkxFIFNTWVVIXHJcblx0XHQoMHhDNEYxIDw9IGNvZGUgJiYgY29kZSA8PSAweEM1MEIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU0VVRy4uSEFOR1VMIFNZTExBQkxFIFNTRVVIXHJcblx0XHQoMHhDNTBEIDw9IGNvZGUgJiYgY29kZSA8PSAweEM1MjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU1lJRy4uSEFOR1VMIFNZTExBQkxFIFNTWUlIXHJcblx0XHQoMHhDNTI5IDw9IGNvZGUgJiYgY29kZSA8PSAweEM1NDMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBTU0lHLi5IQU5HVUwgU1lMTEFCTEUgU1NJSFxyXG5cdFx0KDB4QzU0NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDNTVGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQUcuLkhBTkdVTCBTWUxMQUJMRSBBSFxyXG5cdFx0KDB4QzU2MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDNTdCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQUVHLi5IQU5HVUwgU1lMTEFCTEUgQUVIXHJcblx0XHQoMHhDNTdEIDw9IGNvZGUgJiYgY29kZSA8PSAweEM1OTcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBZQUcuLkhBTkdVTCBTWUxMQUJMRSBZQUhcclxuXHRcdCgweEM1OTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzVCMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFlBRUcuLkhBTkdVTCBTWUxMQUJMRSBZQUVIXHJcblx0XHQoMHhDNUI1IDw9IGNvZGUgJiYgY29kZSA8PSAweEM1Q0YpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBFT0cuLkhBTkdVTCBTWUxMQUJMRSBFT0hcclxuXHRcdCgweEM1RDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzVFQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEVHLi5IQU5HVUwgU1lMTEFCTEUgRUhcclxuXHRcdCgweEM1RUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzYwNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFlFT0cuLkhBTkdVTCBTWUxMQUJMRSBZRU9IXHJcblx0XHQoMHhDNjA5IDw9IGNvZGUgJiYgY29kZSA8PSAweEM2MjMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBZRUcuLkhBTkdVTCBTWUxMQUJMRSBZRUhcclxuXHRcdCgweEM2MjUgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzYzRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE9HLi5IQU5HVUwgU1lMTEFCTEUgT0hcclxuXHRcdCgweEM2NDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzY1QikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFdBRy4uSEFOR1VMIFNZTExBQkxFIFdBSFxyXG5cdFx0KDB4QzY1RCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDNjc3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgV0FFRy4uSEFOR1VMIFNZTExBQkxFIFdBRUhcclxuXHRcdCgweEM2NzkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzY5MykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIE9FRy4uSEFOR1VMIFNZTExBQkxFIE9FSFxyXG5cdFx0KDB4QzY5NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDNkFGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgWU9HLi5IQU5HVUwgU1lMTEFCTEUgWU9IXHJcblx0XHQoMHhDNkIxIDw9IGNvZGUgJiYgY29kZSA8PSAweEM2Q0IpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBVRy4uSEFOR1VMIFNZTExBQkxFIFVIXHJcblx0XHQoMHhDNkNEIDw9IGNvZGUgJiYgY29kZSA8PSAweEM2RTcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBXRU9HLi5IQU5HVUwgU1lMTEFCTEUgV0VPSFxyXG5cdFx0KDB4QzZFOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDNzAzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgV0VHLi5IQU5HVUwgU1lMTEFCTEUgV0VIXHJcblx0XHQoMHhDNzA1IDw9IGNvZGUgJiYgY29kZSA8PSAweEM3MUYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBXSUcuLkhBTkdVTCBTWUxMQUJMRSBXSUhcclxuXHRcdCgweEM3MjEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzczQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFlVRy4uSEFOR1VMIFNZTExBQkxFIFlVSFxyXG5cdFx0KDB4QzczRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDNzU3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgRVVHLi5IQU5HVUwgU1lMTEFCTEUgRVVIXHJcblx0XHQoMHhDNzU5IDw9IGNvZGUgJiYgY29kZSA8PSAweEM3NzMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBZSUcuLkhBTkdVTCBTWUxMQUJMRSBZSUhcclxuXHRcdCgweEM3NzUgPD0gY29kZSAmJiBjb2RlIDw9IDB4Qzc4RikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIElHLi5IQU5HVUwgU1lMTEFCTEUgSUhcclxuXHRcdCgweEM3OTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzdBQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEpBRy4uSEFOR1VMIFNZTExBQkxFIEpBSFxyXG5cdFx0KDB4QzdBRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDN0M3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSkFFRy4uSEFOR1VMIFNZTExBQkxFIEpBRUhcclxuXHRcdCgweEM3QzkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzdFMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEpZQUcuLkhBTkdVTCBTWUxMQUJMRSBKWUFIXHJcblx0XHQoMHhDN0U1IDw9IGNvZGUgJiYgY29kZSA8PSAweEM3RkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKWUFFRy4uSEFOR1VMIFNZTExBQkxFIEpZQUVIXHJcblx0XHQoMHhDODAxIDw9IGNvZGUgJiYgY29kZSA8PSAweEM4MUIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKRU9HLi5IQU5HVUwgU1lMTEFCTEUgSkVPSFxyXG5cdFx0KDB4QzgxRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDODM3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSkVHLi5IQU5HVUwgU1lMTEFCTEUgSkVIXHJcblx0XHQoMHhDODM5IDw9IGNvZGUgJiYgY29kZSA8PSAweEM4NTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKWUVPRy4uSEFOR1VMIFNZTExBQkxFIEpZRU9IXHJcblx0XHQoMHhDODU1IDw9IGNvZGUgJiYgY29kZSA8PSAweEM4NkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKWUVHLi5IQU5HVUwgU1lMTEFCTEUgSllFSFxyXG5cdFx0KDB4Qzg3MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDODhCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSk9HLi5IQU5HVUwgU1lMTEFCTEUgSk9IXHJcblx0XHQoMHhDODhEIDw9IGNvZGUgJiYgY29kZSA8PSAweEM4QTcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKV0FHLi5IQU5HVUwgU1lMTEFCTEUgSldBSFxyXG5cdFx0KDB4QzhBOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDOEMzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSldBRUcuLkhBTkdVTCBTWUxMQUJMRSBKV0FFSFxyXG5cdFx0KDB4QzhDNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDOERGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSk9FRy4uSEFOR1VMIFNZTExBQkxFIEpPRUhcclxuXHRcdCgweEM4RTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzhGQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEpZT0cuLkhBTkdVTCBTWUxMQUJMRSBKWU9IXHJcblx0XHQoMHhDOEZEIDw9IGNvZGUgJiYgY29kZSA8PSAweEM5MTcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKVUcuLkhBTkdVTCBTWUxMQUJMRSBKVUhcclxuXHRcdCgweEM5MTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzkzMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEpXRU9HLi5IQU5HVUwgU1lMTEFCTEUgSldFT0hcclxuXHRcdCgweEM5MzUgPD0gY29kZSAmJiBjb2RlIDw9IDB4Qzk0RikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEpXRUcuLkhBTkdVTCBTWUxMQUJMRSBKV0VIXHJcblx0XHQoMHhDOTUxIDw9IGNvZGUgJiYgY29kZSA8PSAweEM5NkIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKV0lHLi5IQU5HVUwgU1lMTEFCTEUgSldJSFxyXG5cdFx0KDB4Qzk2RCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDOTg3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSllVRy4uSEFOR1VMIFNZTExBQkxFIEpZVUhcclxuXHRcdCgweEM5ODkgPD0gY29kZSAmJiBjb2RlIDw9IDB4QzlBMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEpFVUcuLkhBTkdVTCBTWUxMQUJMRSBKRVVIXHJcblx0XHQoMHhDOUE1IDw9IGNvZGUgJiYgY29kZSA8PSAweEM5QkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKWUlHLi5IQU5HVUwgU1lMTEFCTEUgSllJSFxyXG5cdFx0KDB4QzlDMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDOURCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSklHLi5IQU5HVUwgU1lMTEFCTEUgSklIXHJcblx0XHQoMHhDOUREIDw9IGNvZGUgJiYgY29kZSA8PSAweEM5RjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSkFHLi5IQU5HVUwgU1lMTEFCTEUgSkpBSFxyXG5cdFx0KDB4QzlGOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDQTEzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSkpBRUcuLkhBTkdVTCBTWUxMQUJMRSBKSkFFSFxyXG5cdFx0KDB4Q0ExNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDQTJGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSkpZQUcuLkhBTkdVTCBTWUxMQUJMRSBKSllBSFxyXG5cdFx0KDB4Q0EzMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDQTRCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSkpZQUVHLi5IQU5HVUwgU1lMTEFCTEUgSkpZQUVIXHJcblx0XHQoMHhDQTREIDw9IGNvZGUgJiYgY29kZSA8PSAweENBNjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSkVPRy4uSEFOR1VMIFNZTExBQkxFIEpKRU9IXHJcblx0XHQoMHhDQTY5IDw9IGNvZGUgJiYgY29kZSA8PSAweENBODMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSkVHLi5IQU5HVUwgU1lMTEFCTEUgSkpFSFxyXG5cdFx0KDB4Q0E4NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDQTlGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSkpZRU9HLi5IQU5HVUwgU1lMTEFCTEUgSkpZRU9IXHJcblx0XHQoMHhDQUExIDw9IGNvZGUgJiYgY29kZSA8PSAweENBQkIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSllFRy4uSEFOR1VMIFNZTExBQkxFIEpKWUVIXHJcblx0XHQoMHhDQUJEIDw9IGNvZGUgJiYgY29kZSA8PSAweENBRDcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSk9HLi5IQU5HVUwgU1lMTEFCTEUgSkpPSFxyXG5cdFx0KDB4Q0FEOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDQUYzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSkpXQUcuLkhBTkdVTCBTWUxMQUJMRSBKSldBSFxyXG5cdFx0KDB4Q0FGNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDQjBGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSkpXQUVHLi5IQU5HVUwgU1lMTEFCTEUgSkpXQUVIXHJcblx0XHQoMHhDQjExIDw9IGNvZGUgJiYgY29kZSA8PSAweENCMkIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSk9FRy4uSEFOR1VMIFNZTExBQkxFIEpKT0VIXHJcblx0XHQoMHhDQjJEIDw9IGNvZGUgJiYgY29kZSA8PSAweENCNDcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSllPRy4uSEFOR1VMIFNZTExBQkxFIEpKWU9IXHJcblx0XHQoMHhDQjQ5IDw9IGNvZGUgJiYgY29kZSA8PSAweENCNjMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSlVHLi5IQU5HVUwgU1lMTEFCTEUgSkpVSFxyXG5cdFx0KDB4Q0I2NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDQjdGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSkpXRU9HLi5IQU5HVUwgU1lMTEFCTEUgSkpXRU9IXHJcblx0XHQoMHhDQjgxIDw9IGNvZGUgJiYgY29kZSA8PSAweENCOUIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSldFRy4uSEFOR1VMIFNZTExBQkxFIEpKV0VIXHJcblx0XHQoMHhDQjlEIDw9IGNvZGUgJiYgY29kZSA8PSAweENCQjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSldJRy4uSEFOR1VMIFNZTExBQkxFIEpKV0lIXHJcblx0XHQoMHhDQkI5IDw9IGNvZGUgJiYgY29kZSA8PSAweENCRDMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSllVRy4uSEFOR1VMIFNZTExBQkxFIEpKWVVIXHJcblx0XHQoMHhDQkQ1IDw9IGNvZGUgJiYgY29kZSA8PSAweENCRUYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSkVVRy4uSEFOR1VMIFNZTExBQkxFIEpKRVVIXHJcblx0XHQoMHhDQkYxIDw9IGNvZGUgJiYgY29kZSA8PSAweENDMEIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSllJRy4uSEFOR1VMIFNZTExBQkxFIEpKWUlIXHJcblx0XHQoMHhDQzBEIDw9IGNvZGUgJiYgY29kZSA8PSAweENDMjcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBKSklHLi5IQU5HVUwgU1lMTEFCTEUgSkpJSFxyXG5cdFx0KDB4Q0MyOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDQzQzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQ0FHLi5IQU5HVUwgU1lMTEFCTEUgQ0FIXHJcblx0XHQoMHhDQzQ1IDw9IGNvZGUgJiYgY29kZSA8PSAweENDNUYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBDQUVHLi5IQU5HVUwgU1lMTEFCTEUgQ0FFSFxyXG5cdFx0KDB4Q0M2MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDQzdCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQ1lBRy4uSEFOR1VMIFNZTExBQkxFIENZQUhcclxuXHRcdCgweENDN0QgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0M5NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIENZQUVHLi5IQU5HVUwgU1lMTEFCTEUgQ1lBRUhcclxuXHRcdCgweENDOTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0NCMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIENFT0cuLkhBTkdVTCBTWUxMQUJMRSBDRU9IXHJcblx0XHQoMHhDQ0I1IDw9IGNvZGUgJiYgY29kZSA8PSAweENDQ0YpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBDRUcuLkhBTkdVTCBTWUxMQUJMRSBDRUhcclxuXHRcdCgweENDRDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0NFQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIENZRU9HLi5IQU5HVUwgU1lMTEFCTEUgQ1lFT0hcclxuXHRcdCgweENDRUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0QwNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIENZRUcuLkhBTkdVTCBTWUxMQUJMRSBDWUVIXHJcblx0XHQoMHhDRDA5IDw9IGNvZGUgJiYgY29kZSA8PSAweENEMjMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBDT0cuLkhBTkdVTCBTWUxMQUJMRSBDT0hcclxuXHRcdCgweENEMjUgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0QzRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIENXQUcuLkhBTkdVTCBTWUxMQUJMRSBDV0FIXHJcblx0XHQoMHhDRDQxIDw9IGNvZGUgJiYgY29kZSA8PSAweENENUIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBDV0FFRy4uSEFOR1VMIFNZTExBQkxFIENXQUVIXHJcblx0XHQoMHhDRDVEIDw9IGNvZGUgJiYgY29kZSA8PSAweENENzcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBDT0VHLi5IQU5HVUwgU1lMTEFCTEUgQ09FSFxyXG5cdFx0KDB4Q0Q3OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDRDkzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQ1lPRy4uSEFOR1VMIFNZTExBQkxFIENZT0hcclxuXHRcdCgweENEOTUgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0RBRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIENVRy4uSEFOR1VMIFNZTExBQkxFIENVSFxyXG5cdFx0KDB4Q0RCMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDRENCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQ1dFT0cuLkhBTkdVTCBTWUxMQUJMRSBDV0VPSFxyXG5cdFx0KDB4Q0RDRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDREU3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQ1dFRy4uSEFOR1VMIFNZTExBQkxFIENXRUhcclxuXHRcdCgweENERTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0UwMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIENXSUcuLkhBTkdVTCBTWUxMQUJMRSBDV0lIXHJcblx0XHQoMHhDRTA1IDw9IGNvZGUgJiYgY29kZSA8PSAweENFMUYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBDWVVHLi5IQU5HVUwgU1lMTEFCTEUgQ1lVSFxyXG5cdFx0KDB4Q0UyMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDRTNCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgQ0VVRy4uSEFOR1VMIFNZTExBQkxFIENFVUhcclxuXHRcdCgweENFM0QgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0U1NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIENZSUcuLkhBTkdVTCBTWUxMQUJMRSBDWUlIXHJcblx0XHQoMHhDRTU5IDw9IGNvZGUgJiYgY29kZSA8PSAweENFNzMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBDSUcuLkhBTkdVTCBTWUxMQUJMRSBDSUhcclxuXHRcdCgweENFNzUgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0U4RikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEtBRy4uSEFOR1VMIFNZTExBQkxFIEtBSFxyXG5cdFx0KDB4Q0U5MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDRUFCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgS0FFRy4uSEFOR1VMIFNZTExBQkxFIEtBRUhcclxuXHRcdCgweENFQUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0VDNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEtZQUcuLkhBTkdVTCBTWUxMQUJMRSBLWUFIXHJcblx0XHQoMHhDRUM5IDw9IGNvZGUgJiYgY29kZSA8PSAweENFRTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBLWUFFRy4uSEFOR1VMIFNZTExBQkxFIEtZQUVIXHJcblx0XHQoMHhDRUU1IDw9IGNvZGUgJiYgY29kZSA8PSAweENFRkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBLRU9HLi5IQU5HVUwgU1lMTEFCTEUgS0VPSFxyXG5cdFx0KDB4Q0YwMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDRjFCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgS0VHLi5IQU5HVUwgU1lMTEFCTEUgS0VIXHJcblx0XHQoMHhDRjFEIDw9IGNvZGUgJiYgY29kZSA8PSAweENGMzcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBLWUVPRy4uSEFOR1VMIFNZTExBQkxFIEtZRU9IXHJcblx0XHQoMHhDRjM5IDw9IGNvZGUgJiYgY29kZSA8PSAweENGNTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBLWUVHLi5IQU5HVUwgU1lMTEFCTEUgS1lFSFxyXG5cdFx0KDB4Q0Y1NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDRjZGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgS09HLi5IQU5HVUwgU1lMTEFCTEUgS09IXHJcblx0XHQoMHhDRjcxIDw9IGNvZGUgJiYgY29kZSA8PSAweENGOEIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBLV0FHLi5IQU5HVUwgU1lMTEFCTEUgS1dBSFxyXG5cdFx0KDB4Q0Y4RCA8PSBjb2RlICYmIGNvZGUgPD0gMHhDRkE3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgS1dBRUcuLkhBTkdVTCBTWUxMQUJMRSBLV0FFSFxyXG5cdFx0KDB4Q0ZBOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhDRkMzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgS09FRy4uSEFOR1VMIFNZTExBQkxFIEtPRUhcclxuXHRcdCgweENGQzUgPD0gY29kZSAmJiBjb2RlIDw9IDB4Q0ZERikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEtZT0cuLkhBTkdVTCBTWUxMQUJMRSBLWU9IXHJcblx0XHQoMHhDRkUxIDw9IGNvZGUgJiYgY29kZSA8PSAweENGRkIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBLVUcuLkhBTkdVTCBTWUxMQUJMRSBLVUhcclxuXHRcdCgweENGRkQgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDAxNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEtXRU9HLi5IQU5HVUwgU1lMTEFCTEUgS1dFT0hcclxuXHRcdCgweEQwMTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDAzMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEtXRUcuLkhBTkdVTCBTWUxMQUJMRSBLV0VIXHJcblx0XHQoMHhEMDM1IDw9IGNvZGUgJiYgY29kZSA8PSAweEQwNEYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBLV0lHLi5IQU5HVUwgU1lMTEFCTEUgS1dJSFxyXG5cdFx0KDB4RDA1MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMDZCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgS1lVRy4uSEFOR1VMIFNZTExBQkxFIEtZVUhcclxuXHRcdCgweEQwNkQgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDA4NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEtFVUcuLkhBTkdVTCBTWUxMQUJMRSBLRVVIXHJcblx0XHQoMHhEMDg5IDw9IGNvZGUgJiYgY29kZSA8PSAweEQwQTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBLWUlHLi5IQU5HVUwgU1lMTEFCTEUgS1lJSFxyXG5cdFx0KDB4RDBBNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMEJGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgS0lHLi5IQU5HVUwgU1lMTEFCTEUgS0lIXHJcblx0XHQoMHhEMEMxIDw9IGNvZGUgJiYgY29kZSA8PSAweEQwREIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBUQUcuLkhBTkdVTCBTWUxMQUJMRSBUQUhcclxuXHRcdCgweEQwREQgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDBGNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFRBRUcuLkhBTkdVTCBTWUxMQUJMRSBUQUVIXHJcblx0XHQoMHhEMEY5IDw9IGNvZGUgJiYgY29kZSA8PSAweEQxMTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBUWUFHLi5IQU5HVUwgU1lMTEFCTEUgVFlBSFxyXG5cdFx0KDB4RDExNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMTJGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgVFlBRUcuLkhBTkdVTCBTWUxMQUJMRSBUWUFFSFxyXG5cdFx0KDB4RDEzMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMTRCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgVEVPRy4uSEFOR1VMIFNZTExBQkxFIFRFT0hcclxuXHRcdCgweEQxNEQgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDE2NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFRFRy4uSEFOR1VMIFNZTExBQkxFIFRFSFxyXG5cdFx0KDB4RDE2OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMTgzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgVFlFT0cuLkhBTkdVTCBTWUxMQUJMRSBUWUVPSFxyXG5cdFx0KDB4RDE4NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMTlGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgVFlFRy4uSEFOR1VMIFNZTExBQkxFIFRZRUhcclxuXHRcdCgweEQxQTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDFCQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFRPRy4uSEFOR1VMIFNZTExBQkxFIFRPSFxyXG5cdFx0KDB4RDFCRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMUQ3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgVFdBRy4uSEFOR1VMIFNZTExBQkxFIFRXQUhcclxuXHRcdCgweEQxRDkgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDFGMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFRXQUVHLi5IQU5HVUwgU1lMTEFCTEUgVFdBRUhcclxuXHRcdCgweEQxRjUgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDIwRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFRPRUcuLkhBTkdVTCBTWUxMQUJMRSBUT0VIXHJcblx0XHQoMHhEMjExIDw9IGNvZGUgJiYgY29kZSA8PSAweEQyMkIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBUWU9HLi5IQU5HVUwgU1lMTEFCTEUgVFlPSFxyXG5cdFx0KDB4RDIyRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMjQ3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgVFVHLi5IQU5HVUwgU1lMTEFCTEUgVFVIXHJcblx0XHQoMHhEMjQ5IDw9IGNvZGUgJiYgY29kZSA8PSAweEQyNjMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBUV0VPRy4uSEFOR1VMIFNZTExBQkxFIFRXRU9IXHJcblx0XHQoMHhEMjY1IDw9IGNvZGUgJiYgY29kZSA8PSAweEQyN0YpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBUV0VHLi5IQU5HVUwgU1lMTEFCTEUgVFdFSFxyXG5cdFx0KDB4RDI4MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMjlCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgVFdJRy4uSEFOR1VMIFNZTExBQkxFIFRXSUhcclxuXHRcdCgweEQyOUQgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDJCNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFRZVUcuLkhBTkdVTCBTWUxMQUJMRSBUWVVIXHJcblx0XHQoMHhEMkI5IDw9IGNvZGUgJiYgY29kZSA8PSAweEQyRDMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBURVVHLi5IQU5HVUwgU1lMTEFCTEUgVEVVSFxyXG5cdFx0KDB4RDJENSA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMkVGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgVFlJRy4uSEFOR1VMIFNZTExBQkxFIFRZSUhcclxuXHRcdCgweEQyRjEgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDMwQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFRJRy4uSEFOR1VMIFNZTExBQkxFIFRJSFxyXG5cdFx0KDB4RDMwRCA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMzI3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUEFHLi5IQU5HVUwgU1lMTEFCTEUgUEFIXHJcblx0XHQoMHhEMzI5IDw9IGNvZGUgJiYgY29kZSA8PSAweEQzNDMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBQQUVHLi5IQU5HVUwgU1lMTEFCTEUgUEFFSFxyXG5cdFx0KDB4RDM0NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhEMzVGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUFlBRy4uSEFOR1VMIFNZTExBQkxFIFBZQUhcclxuXHRcdCgweEQzNjEgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDM3QikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFBZQUVHLi5IQU5HVUwgU1lMTEFCTEUgUFlBRUhcclxuXHRcdCgweEQzN0QgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDM5NykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFBFT0cuLkhBTkdVTCBTWUxMQUJMRSBQRU9IXHJcblx0XHQoMHhEMzk5IDw9IGNvZGUgJiYgY29kZSA8PSAweEQzQjMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBQRUcuLkhBTkdVTCBTWUxMQUJMRSBQRUhcclxuXHRcdCgweEQzQjUgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDNDRikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFBZRU9HLi5IQU5HVUwgU1lMTEFCTEUgUFlFT0hcclxuXHRcdCgweEQzRDEgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDNFQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFBZRUcuLkhBTkdVTCBTWUxMQUJMRSBQWUVIXHJcblx0XHQoMHhEM0VEIDw9IGNvZGUgJiYgY29kZSA8PSAweEQ0MDcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBQT0cuLkhBTkdVTCBTWUxMQUJMRSBQT0hcclxuXHRcdCgweEQ0MDkgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDQyMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFBXQUcuLkhBTkdVTCBTWUxMQUJMRSBQV0FIXHJcblx0XHQoMHhENDI1IDw9IGNvZGUgJiYgY29kZSA8PSAweEQ0M0YpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBQV0FFRy4uSEFOR1VMIFNZTExBQkxFIFBXQUVIXHJcblx0XHQoMHhENDQxIDw9IGNvZGUgJiYgY29kZSA8PSAweEQ0NUIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBQT0VHLi5IQU5HVUwgU1lMTEFCTEUgUE9FSFxyXG5cdFx0KDB4RDQ1RCA8PSBjb2RlICYmIGNvZGUgPD0gMHhENDc3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUFlPRy4uSEFOR1VMIFNZTExBQkxFIFBZT0hcclxuXHRcdCgweEQ0NzkgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDQ5MykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFBVRy4uSEFOR1VMIFNZTExBQkxFIFBVSFxyXG5cdFx0KDB4RDQ5NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhENEFGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUFdFT0cuLkhBTkdVTCBTWUxMQUJMRSBQV0VPSFxyXG5cdFx0KDB4RDRCMSA8PSBjb2RlICYmIGNvZGUgPD0gMHhENENCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUFdFRy4uSEFOR1VMIFNZTExBQkxFIFBXRUhcclxuXHRcdCgweEQ0Q0QgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDRFNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFBXSUcuLkhBTkdVTCBTWUxMQUJMRSBQV0lIXHJcblx0XHQoMHhENEU5IDw9IGNvZGUgJiYgY29kZSA8PSAweEQ1MDMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBQWVVHLi5IQU5HVUwgU1lMTEFCTEUgUFlVSFxyXG5cdFx0KDB4RDUwNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhENTFGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgUEVVRy4uSEFOR1VMIFNZTExBQkxFIFBFVUhcclxuXHRcdCgweEQ1MjEgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDUzQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIFBZSUcuLkhBTkdVTCBTWUxMQUJMRSBQWUlIXHJcblx0XHQoMHhENTNEIDw9IGNvZGUgJiYgY29kZSA8PSAweEQ1NTcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBQSUcuLkhBTkdVTCBTWUxMQUJMRSBQSUhcclxuXHRcdCgweEQ1NTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDU3MykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEhBRy4uSEFOR1VMIFNZTExBQkxFIEhBSFxyXG5cdFx0KDB4RDU3NSA8PSBjb2RlICYmIGNvZGUgPD0gMHhENThGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSEFFRy4uSEFOR1VMIFNZTExBQkxFIEhBRUhcclxuXHRcdCgweEQ1OTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDVBQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEhZQUcuLkhBTkdVTCBTWUxMQUJMRSBIWUFIXHJcblx0XHQoMHhENUFEIDw9IGNvZGUgJiYgY29kZSA8PSAweEQ1QzcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBIWUFFRy4uSEFOR1VMIFNZTExBQkxFIEhZQUVIXHJcblx0XHQoMHhENUM5IDw9IGNvZGUgJiYgY29kZSA8PSAweEQ1RTMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBIRU9HLi5IQU5HVUwgU1lMTEFCTEUgSEVPSFxyXG5cdFx0KDB4RDVFNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhENUZGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSEVHLi5IQU5HVUwgU1lMTEFCTEUgSEVIXHJcblx0XHQoMHhENjAxIDw9IGNvZGUgJiYgY29kZSA8PSAweEQ2MUIpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBIWUVPRy4uSEFOR1VMIFNZTExBQkxFIEhZRU9IXHJcblx0XHQoMHhENjFEIDw9IGNvZGUgJiYgY29kZSA8PSAweEQ2MzcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBIWUVHLi5IQU5HVUwgU1lMTEFCTEUgSFlFSFxyXG5cdFx0KDB4RDYzOSA8PSBjb2RlICYmIGNvZGUgPD0gMHhENjUzKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSE9HLi5IQU5HVUwgU1lMTEFCTEUgSE9IXHJcblx0XHQoMHhENjU1IDw9IGNvZGUgJiYgY29kZSA8PSAweEQ2NkYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBIV0FHLi5IQU5HVUwgU1lMTEFCTEUgSFdBSFxyXG5cdFx0KDB4RDY3MSA8PSBjb2RlICYmIGNvZGUgPD0gMHhENjhCKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSFdBRUcuLkhBTkdVTCBTWUxMQUJMRSBIV0FFSFxyXG5cdFx0KDB4RDY4RCA8PSBjb2RlICYmIGNvZGUgPD0gMHhENkE3KSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSE9FRy4uSEFOR1VMIFNZTExBQkxFIEhPRUhcclxuXHRcdCgweEQ2QTkgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDZDMykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEhZT0cuLkhBTkdVTCBTWUxMQUJMRSBIWU9IXHJcblx0XHQoMHhENkM1IDw9IGNvZGUgJiYgY29kZSA8PSAweEQ2REYpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBIVUcuLkhBTkdVTCBTWUxMQUJMRSBIVUhcclxuXHRcdCgweEQ2RTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDZGQikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEhXRU9HLi5IQU5HVUwgU1lMTEFCTEUgSFdFT0hcclxuXHRcdCgweEQ2RkQgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDcxNykgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEhXRUcuLkhBTkdVTCBTWUxMQUJMRSBIV0VIXHJcblx0XHQoMHhENzE5IDw9IGNvZGUgJiYgY29kZSA8PSAweEQ3MzMpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBIV0lHLi5IQU5HVUwgU1lMTEFCTEUgSFdJSFxyXG5cdFx0KDB4RDczNSA8PSBjb2RlICYmIGNvZGUgPD0gMHhENzRGKSB8fCAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSFlVRy4uSEFOR1VMIFNZTExBQkxFIEhZVUhcclxuXHRcdCgweEQ3NTEgPD0gY29kZSAmJiBjb2RlIDw9IDB4RDc2QikgfHwgLy8gTG8gIFsyN10gSEFOR1VMIFNZTExBQkxFIEhFVUcuLkhBTkdVTCBTWUxMQUJMRSBIRVVIXHJcblx0XHQoMHhENzZEIDw9IGNvZGUgJiYgY29kZSA8PSAweEQ3ODcpIHx8IC8vIExvICBbMjddIEhBTkdVTCBTWUxMQUJMRSBIWUlHLi5IQU5HVUwgU1lMTEFCTEUgSFlJSFxyXG5cdFx0KDB4RDc4OSA8PSBjb2RlICYmIGNvZGUgPD0gMHhEN0EzKSAvLyBMbyAgWzI3XSBIQU5HVUwgU1lMTEFCTEUgSElHLi5IQU5HVUwgU1lMTEFCTEUgSElIXHJcblx0XHQpe1xyXG5cdFx0XHRyZXR1cm4gTFZUO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRpZihcclxuXHRcdDB4MjYxRCA9PSBjb2RlIHx8IC8vIFNvICAgICAgIFdISVRFIFVQIFBPSU5USU5HIElOREVYXHJcblx0XHQweDI2RjkgPT0gY29kZSB8fCAvLyBTbyAgICAgICBQRVJTT04gV0lUSCBCQUxMXHJcblx0XHQoMHgyNzBBIDw9IGNvZGUgJiYgY29kZSA8PSAweDI3MEQpIHx8IC8vIFNvICAgWzRdIFJBSVNFRCBGSVNULi5XUklUSU5HIEhBTkRcclxuXHRcdDB4MUYzODUgPT0gY29kZSB8fCAvLyBTbyAgICAgICBGQVRIRVIgQ0hSSVNUTUFTXHJcblx0XHQoMHgxRjNDMiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRjNDNCkgfHwgLy8gU28gICBbM10gU05PV0JPQVJERVIuLlNVUkZFUlxyXG5cdFx0MHgxRjNDNyA9PSBjb2RlIHx8IC8vIFNvICAgICAgIEhPUlNFIFJBQ0lOR1xyXG5cdFx0KDB4MUYzQ0EgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUYzQ0MpIHx8IC8vIFNvICAgWzNdIFNXSU1NRVIuLkdPTEZFUlxyXG5cdFx0KDB4MUY0NDIgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUY0NDMpIHx8IC8vIFNvICAgWzJdIEVBUi4uTk9TRVxyXG5cdFx0KDB4MUY0NDYgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUY0NTApIHx8IC8vIFNvICBbMTFdIFdISVRFIFVQIFBPSU5USU5HIEJBQ0tIQU5EIElOREVYLi5PUEVOIEhBTkRTIFNJR05cclxuXHRcdDB4MUY0NkUgPT0gY29kZSB8fCAvLyBTbyAgICAgICBQT0xJQ0UgT0ZGSUNFUlxyXG5cdFx0KDB4MUY0NzAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUY0NzgpIHx8IC8vIFNvICAgWzldIEJSSURFIFdJVEggVkVJTC4uUFJJTkNFU1NcclxuXHRcdDB4MUY0N0MgPT0gY29kZSB8fCAvLyBTbyAgICAgICBCQUJZIEFOR0VMXHJcblx0XHQoMHgxRjQ4MSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRjQ4MykgfHwgLy8gU28gICBbM10gSU5GT1JNQVRJT04gREVTSyBQRVJTT04uLkRBTkNFUlxyXG5cdFx0KDB4MUY0ODUgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUY0ODcpIHx8IC8vIFNvICAgWzNdIE5BSUwgUE9MSVNILi5IQUlSQ1VUXHJcblx0XHQweDFGNEFBID09IGNvZGUgfHwgLy8gU28gICAgICAgRkxFWEVEIEJJQ0VQU1xyXG5cdFx0KDB4MUY1NzQgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUY1NzUpIHx8IC8vIFNvICAgWzJdIE1BTiBJTiBCVVNJTkVTUyBTVUlUIExFVklUQVRJTkcuLlNMRVVUSCBPUiBTUFlcclxuXHRcdDB4MUY1N0EgPT0gY29kZSB8fCAvLyBTbyAgICAgICBNQU4gREFOQ0lOR1xyXG5cdFx0MHgxRjU5MCA9PSBjb2RlIHx8IC8vIFNvICAgICAgIFJBSVNFRCBIQU5EIFdJVEggRklOR0VSUyBTUExBWUVEXHJcblx0XHQoMHgxRjU5NSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRjU5NikgfHwgLy8gU28gICBbMl0gUkVWRVJTRUQgSEFORCBXSVRIIE1JRERMRSBGSU5HRVIgRVhURU5ERUQuLlJBSVNFRCBIQU5EIFdJVEggUEFSVCBCRVRXRUVOIE1JRERMRSBBTkQgUklORyBGSU5HRVJTXHJcblx0XHQoMHgxRjY0NSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRjY0NykgfHwgLy8gU28gICBbM10gRkFDRSBXSVRIIE5PIEdPT0QgR0VTVFVSRS4uUEVSU09OIEJPV0lORyBERUVQTFlcclxuXHRcdCgweDFGNjRCIDw9IGNvZGUgJiYgY29kZSA8PSAweDFGNjRGKSB8fCAvLyBTbyAgIFs1XSBIQVBQWSBQRVJTT04gUkFJU0lORyBPTkUgSEFORC4uUEVSU09OIFdJVEggRk9MREVEIEhBTkRTXHJcblx0XHQweDFGNkEzID09IGNvZGUgfHwgLy8gU28gICAgICAgUk9XQk9BVFxyXG5cdFx0KDB4MUY2QjQgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUY2QjYpIHx8IC8vIFNvICAgWzNdIEJJQ1lDTElTVC4uUEVERVNUUklBTlxyXG5cdFx0MHgxRjZDMCA9PSBjb2RlIHx8IC8vIFNvICAgICAgIEJBVEhcclxuXHRcdDB4MUY2Q0MgPT0gY29kZSB8fCAvLyBTbyAgICAgICBTTEVFUElORyBBQ0NPTU1PREFUSU9OXHJcblx0XHQoMHgxRjkxOCA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRjkxQykgfHwgLy8gU28gICBbNV0gU0lHTiBPRiBUSEUgSE9STlMuLlJJR0hULUZBQ0lORyBGSVNUXHJcblx0XHQoMHgxRjkxRSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRjkxRikgfHwgLy8gU28gICBbMl0gSEFORCBXSVRIIElOREVYIEFORCBNSURETEUgRklOR0VSUyBDUk9TU0VELi5JIExPVkUgWU9VIEhBTkQgU0lHTlxyXG5cdFx0MHgxRjkyNiA9PSBjb2RlIHx8IC8vIFNvICAgICAgIEZBQ0UgUEFMTVxyXG5cdFx0KDB4MUY5MzAgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUY5MzkpIHx8IC8vIFNvICBbMTBdIFBSRUdOQU5UIFdPTUFOLi5KVUdHTElOR1xyXG5cdFx0KDB4MUY5M0QgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUY5M0UpIHx8IC8vIFNvICAgWzJdIFdBVEVSIFBPTE8uLkhBTkRCQUxMXHJcblx0XHQoMHgxRjlEMSA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRjlERCkgLy8gU28gIFsxM10gQURVTFQuLkVMRlxyXG5cdFx0KXtcclxuXHRcdFx0cmV0dXJuIEVfQmFzZTtcclxuXHRcdH1cclxuXHJcblx0XHRpZihcclxuXHRcdCgweDFGM0ZCIDw9IGNvZGUgJiYgY29kZSA8PSAweDFGM0ZGKSAvLyBTayAgIFs1XSBFTU9KSSBNT0RJRklFUiBGSVRaUEFUUklDSyBUWVBFLTEtMi4uRU1PSkkgTU9ESUZJRVIgRklUWlBBVFJJQ0sgVFlQRS02XHJcblx0XHQpe1xyXG5cdFx0XHRyZXR1cm4gRV9Nb2RpZmllcjtcclxuXHRcdH1cclxuXHJcblx0XHRpZihcclxuXHRcdDB4MjAwRCA9PSBjb2RlIC8vIENmICAgICAgIFpFUk8gV0lEVEggSk9JTkVSXHJcblx0XHQpe1xyXG5cdFx0XHRyZXR1cm4gWldKO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmKFxyXG5cdFx0MHgyNjQwID09IGNvZGUgfHwgLy8gU28gICAgICAgRkVNQUxFIFNJR05cclxuXHRcdDB4MjY0MiA9PSBjb2RlIHx8IC8vIFNvICAgICAgIE1BTEUgU0lHTlxyXG5cdFx0KDB4MjY5NSA8PSBjb2RlICYmIGNvZGUgPD0gMHgyNjk2KSB8fCAvLyBTbyAgIFsyXSBTVEFGRiBPRiBBRVNDVUxBUElVUy4uU0NBTEVTXHJcblx0XHQweDI3MDggPT0gY29kZSB8fCAvLyBTbyAgICAgICBBSVJQTEFORVxyXG5cdFx0MHgyNzY0ID09IGNvZGUgfHwgLy8gU28gICAgICAgSEVBVlkgQkxBQ0sgSEVBUlRcclxuXHRcdDB4MUYzMDggPT0gY29kZSB8fCAvLyBTbyAgICAgICBSQUlOQk9XXHJcblx0XHQweDFGMzNFID09IGNvZGUgfHwgLy8gU28gICAgICAgRUFSIE9GIFJJQ0VcclxuXHRcdDB4MUYzNzMgPT0gY29kZSB8fCAvLyBTbyAgICAgICBDT09LSU5HXHJcblx0XHQweDFGMzkzID09IGNvZGUgfHwgLy8gU28gICAgICAgR1JBRFVBVElPTiBDQVBcclxuXHRcdDB4MUYzQTQgPT0gY29kZSB8fCAvLyBTbyAgICAgICBNSUNST1BIT05FXHJcblx0XHQweDFGM0E4ID09IGNvZGUgfHwgLy8gU28gICAgICAgQVJUSVNUIFBBTEVUVEVcclxuXHRcdDB4MUYzRUIgPT0gY29kZSB8fCAvLyBTbyAgICAgICBTQ0hPT0xcclxuXHRcdDB4MUYzRUQgPT0gY29kZSB8fCAvLyBTbyAgICAgICBGQUNUT1JZXHJcblx0XHQweDFGNDhCID09IGNvZGUgfHwgLy8gU28gICAgICAgS0lTUyBNQVJLXHJcblx0XHQoMHgxRjRCQiA8PSBjb2RlICYmIGNvZGUgPD0gMHgxRjRCQykgfHwgLy8gU28gICBbMl0gUEVSU09OQUwgQ09NUFVURVIuLkJSSUVGQ0FTRVxyXG5cdFx0MHgxRjUyNyA9PSBjb2RlIHx8IC8vIFNvICAgICAgIFdSRU5DSFxyXG5cdFx0MHgxRjUyQyA9PSBjb2RlIHx8IC8vIFNvICAgICAgIE1JQ1JPU0NPUEVcclxuXHRcdDB4MUY1RTggPT0gY29kZSB8fCAvLyBTbyAgICAgICBMRUZUIFNQRUVDSCBCVUJCTEVcclxuXHRcdDB4MUY2ODAgPT0gY29kZSB8fCAvLyBTbyAgICAgICBST0NLRVRcclxuXHRcdDB4MUY2OTIgPT0gY29kZSAvLyBTbyAgICAgICBGSVJFIEVOR0lORVxyXG5cdFx0KXtcclxuXHRcdFx0cmV0dXJuIEdsdWVfQWZ0ZXJfWndqO1xyXG5cdFx0fVxyXG5cclxuXHRcdGlmKFxyXG5cdFx0KDB4MUY0NjYgPD0gY29kZSAmJiBjb2RlIDw9IDB4MUY0NjkpIC8vIFNvICAgWzRdIEJPWS4uV09NQU5cclxuXHRcdCl7XHJcblx0XHRcdHJldHVybiBFX0Jhc2VfR0FaO1xyXG5cdFx0fVxyXG5cdFx0XHJcblx0XHRcclxuXHRcdC8vYWxsIHVubGlzdGVkIGNoYXJhY3RlcnMgaGF2ZSBhIGdyYXBoZW1lIGJyZWFrIHByb3BlcnR5IG9mIFwiT3RoZXJcIlxyXG5cdFx0cmV0dXJuIE90aGVyO1xyXG5cdH1cclxuXHRyZXR1cm4gdGhpcztcclxufVxyXG5cclxuaWYgKHR5cGVvZiBtb2R1bGUgIT0gJ3VuZGVmaW5lZCcgJiYgbW9kdWxlLmV4cG9ydHMpIHtcclxuICAgIG1vZHVsZS5leHBvcnRzID0gR3JhcGhlbWVTcGxpdHRlcjtcclxufVxyXG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gUGJmO1xuXG52YXIgaWVlZTc1NCA9IHJlcXVpcmUoJ2llZWU3NTQnKTtcblxuZnVuY3Rpb24gUGJmKGJ1Zikge1xuICAgIHRoaXMuYnVmID0gQXJyYXlCdWZmZXIuaXNWaWV3ICYmIEFycmF5QnVmZmVyLmlzVmlldyhidWYpID8gYnVmIDogbmV3IFVpbnQ4QXJyYXkoYnVmIHx8IDApO1xuICAgIHRoaXMucG9zID0gMDtcbiAgICB0aGlzLnR5cGUgPSAwO1xuICAgIHRoaXMubGVuZ3RoID0gdGhpcy5idWYubGVuZ3RoO1xufVxuXG5QYmYuVmFyaW50ICA9IDA7IC8vIHZhcmludDogaW50MzIsIGludDY0LCB1aW50MzIsIHVpbnQ2NCwgc2ludDMyLCBzaW50NjQsIGJvb2wsIGVudW1cblBiZi5GaXhlZDY0ID0gMTsgLy8gNjQtYml0OiBkb3VibGUsIGZpeGVkNjQsIHNmaXhlZDY0XG5QYmYuQnl0ZXMgICA9IDI7IC8vIGxlbmd0aC1kZWxpbWl0ZWQ6IHN0cmluZywgYnl0ZXMsIGVtYmVkZGVkIG1lc3NhZ2VzLCBwYWNrZWQgcmVwZWF0ZWQgZmllbGRzXG5QYmYuRml4ZWQzMiA9IDU7IC8vIDMyLWJpdDogZmxvYXQsIGZpeGVkMzIsIHNmaXhlZDMyXG5cbnZhciBTSElGVF9MRUZUXzMyID0gKDEgPDwgMTYpICogKDEgPDwgMTYpLFxuICAgIFNISUZUX1JJR0hUXzMyID0gMSAvIFNISUZUX0xFRlRfMzI7XG5cbi8vIFRocmVzaG9sZCBjaG9zZW4gYmFzZWQgb24gYm90aCBiZW5jaG1hcmtpbmcgYW5kIGtub3dsZWRnZSBhYm91dCBicm93c2VyIHN0cmluZ1xuLy8gZGF0YSBzdHJ1Y3R1cmVzICh3aGljaCBjdXJyZW50bHkgc3dpdGNoIHN0cnVjdHVyZSB0eXBlcyBhdCAxMiBieXRlcyBvciBtb3JlKVxudmFyIFRFWFRfREVDT0RFUl9NSU5fTEVOR1RIID0gMTI7XG52YXIgdXRmOFRleHREZWNvZGVyID0gdHlwZW9mIFRleHREZWNvZGVyID09PSAndW5kZWZpbmVkJyA/IG51bGwgOiBuZXcgVGV4dERlY29kZXIoJ3V0ZjgnKTtcblxuUGJmLnByb3RvdHlwZSA9IHtcblxuICAgIGRlc3Ryb3k6IGZ1bmN0aW9uKCkge1xuICAgICAgICB0aGlzLmJ1ZiA9IG51bGw7XG4gICAgfSxcblxuICAgIC8vID09PSBSRUFESU5HID09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09XG5cbiAgICByZWFkRmllbGRzOiBmdW5jdGlvbihyZWFkRmllbGQsIHJlc3VsdCwgZW5kKSB7XG4gICAgICAgIGVuZCA9IGVuZCB8fCB0aGlzLmxlbmd0aDtcblxuICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIHtcbiAgICAgICAgICAgIHZhciB2YWwgPSB0aGlzLnJlYWRWYXJpbnQoKSxcbiAgICAgICAgICAgICAgICB0YWcgPSB2YWwgPj4gMyxcbiAgICAgICAgICAgICAgICBzdGFydFBvcyA9IHRoaXMucG9zO1xuXG4gICAgICAgICAgICB0aGlzLnR5cGUgPSB2YWwgJiAweDc7XG4gICAgICAgICAgICByZWFkRmllbGQodGFnLCByZXN1bHQsIHRoaXMpO1xuXG4gICAgICAgICAgICBpZiAodGhpcy5wb3MgPT09IHN0YXJ0UG9zKSB0aGlzLnNraXAodmFsKTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH0sXG5cbiAgICByZWFkTWVzc2FnZTogZnVuY3Rpb24ocmVhZEZpZWxkLCByZXN1bHQpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMucmVhZEZpZWxkcyhyZWFkRmllbGQsIHJlc3VsdCwgdGhpcy5yZWFkVmFyaW50KCkgKyB0aGlzLnBvcyk7XG4gICAgfSxcblxuICAgIHJlYWRGaXhlZDMyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbCA9IHJlYWRVSW50MzIodGhpcy5idWYsIHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9LFxuXG4gICAgcmVhZFNGaXhlZDMyOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbCA9IHJlYWRJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MpO1xuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG5cbiAgICAvLyA2NC1iaXQgaW50IGhhbmRsaW5nIGlzIGJhc2VkIG9uIGdpdGh1Yi5jb20vZHB3L25vZGUtYnVmZmVyLW1vcmUtaW50cyAoTUlULWxpY2Vuc2VkKVxuXG4gICAgcmVhZEZpeGVkNjQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsID0gcmVhZFVJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MpICsgcmVhZFVJbnQzMih0aGlzLmJ1ZiwgdGhpcy5wb3MgKyA0KSAqIFNISUZUX0xFRlRfMzI7XG4gICAgICAgIHRoaXMucG9zICs9IDg7XG4gICAgICAgIHJldHVybiB2YWw7XG4gICAgfSxcblxuICAgIHJlYWRTRml4ZWQ2NDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciB2YWwgPSByZWFkVUludDMyKHRoaXMuYnVmLCB0aGlzLnBvcykgKyByZWFkSW50MzIodGhpcy5idWYsIHRoaXMucG9zICsgNCkgKiBTSElGVF9MRUZUXzMyO1xuICAgICAgICB0aGlzLnBvcyArPSA4O1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG5cbiAgICByZWFkRmxvYXQ6IGZ1bmN0aW9uKCkge1xuICAgICAgICB2YXIgdmFsID0gaWVlZTc1NC5yZWFkKHRoaXMuYnVmLCB0aGlzLnBvcywgdHJ1ZSwgMjMsIDQpO1xuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgICAgICByZXR1cm4gdmFsO1xuICAgIH0sXG5cbiAgICByZWFkRG91YmxlOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIHZhbCA9IGllZWU3NTQucmVhZCh0aGlzLmJ1ZiwgdGhpcy5wb3MsIHRydWUsIDUyLCA4KTtcbiAgICAgICAgdGhpcy5wb3MgKz0gODtcbiAgICAgICAgcmV0dXJuIHZhbDtcbiAgICB9LFxuXG4gICAgcmVhZFZhcmludDogZnVuY3Rpb24oaXNTaWduZWQpIHtcbiAgICAgICAgdmFyIGJ1ZiA9IHRoaXMuYnVmLFxuICAgICAgICAgICAgdmFsLCBiO1xuXG4gICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCAgPSAgYiAmIDB4N2Y7ICAgICAgICBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG4gICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCB8PSAoYiAmIDB4N2YpIDw8IDc7ICBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG4gICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCB8PSAoYiAmIDB4N2YpIDw8IDE0OyBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG4gICAgICAgIGIgPSBidWZbdGhpcy5wb3MrK107IHZhbCB8PSAoYiAmIDB4N2YpIDw8IDIxOyBpZiAoYiA8IDB4ODApIHJldHVybiB2YWw7XG4gICAgICAgIGIgPSBidWZbdGhpcy5wb3NdOyAgIHZhbCB8PSAoYiAmIDB4MGYpIDw8IDI4O1xuXG4gICAgICAgIHJldHVybiByZWFkVmFyaW50UmVtYWluZGVyKHZhbCwgaXNTaWduZWQsIHRoaXMpO1xuICAgIH0sXG5cbiAgICByZWFkVmFyaW50NjQ6IGZ1bmN0aW9uKCkgeyAvLyBmb3IgY29tcGF0aWJpbGl0eSB3aXRoIHYyLjAuMVxuICAgICAgICByZXR1cm4gdGhpcy5yZWFkVmFyaW50KHRydWUpO1xuICAgIH0sXG5cbiAgICByZWFkU1ZhcmludDogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBudW0gPSB0aGlzLnJlYWRWYXJpbnQoKTtcbiAgICAgICAgcmV0dXJuIG51bSAlIDIgPT09IDEgPyAobnVtICsgMSkgLyAtMiA6IG51bSAvIDI7IC8vIHppZ3phZyBlbmNvZGluZ1xuICAgIH0sXG5cbiAgICByZWFkQm9vbGVhbjogZnVuY3Rpb24oKSB7XG4gICAgICAgIHJldHVybiBCb29sZWFuKHRoaXMucmVhZFZhcmludCgpKTtcbiAgICB9LFxuXG4gICAgcmVhZFN0cmluZzogZnVuY3Rpb24oKSB7XG4gICAgICAgIHZhciBlbmQgPSB0aGlzLnJlYWRWYXJpbnQoKSArIHRoaXMucG9zO1xuICAgICAgICB2YXIgcG9zID0gdGhpcy5wb3M7XG4gICAgICAgIHRoaXMucG9zID0gZW5kO1xuXG4gICAgICAgIGlmIChlbmQgLSBwb3MgPj0gVEVYVF9ERUNPREVSX01JTl9MRU5HVEggJiYgdXRmOFRleHREZWNvZGVyKSB7XG4gICAgICAgICAgICAvLyBsb25nZXIgc3RyaW5ncyBhcmUgZmFzdCB3aXRoIHRoZSBidWlsdC1pbiBicm93c2VyIFRleHREZWNvZGVyIEFQSVxuICAgICAgICAgICAgcmV0dXJuIHJlYWRVdGY4VGV4dERlY29kZXIodGhpcy5idWYsIHBvcywgZW5kKTtcbiAgICAgICAgfVxuICAgICAgICAvLyBzaG9ydCBzdHJpbmdzIGFyZSBmYXN0IHdpdGggb3VyIGN1c3RvbSBpbXBsZW1lbnRhdGlvblxuICAgICAgICByZXR1cm4gcmVhZFV0ZjgodGhpcy5idWYsIHBvcywgZW5kKTtcbiAgICB9LFxuXG4gICAgcmVhZEJ5dGVzOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdmFyIGVuZCA9IHRoaXMucmVhZFZhcmludCgpICsgdGhpcy5wb3MsXG4gICAgICAgICAgICBidWZmZXIgPSB0aGlzLmJ1Zi5zdWJhcnJheSh0aGlzLnBvcywgZW5kKTtcbiAgICAgICAgdGhpcy5wb3MgPSBlbmQ7XG4gICAgICAgIHJldHVybiBidWZmZXI7XG4gICAgfSxcblxuICAgIC8vIHZlcmJvc2UgZm9yIHBlcmZvcm1hbmNlIHJlYXNvbnM7IGRvZXNuJ3QgYWZmZWN0IGd6aXBwZWQgc2l6ZVxuXG4gICAgcmVhZFBhY2tlZFZhcmludDogZnVuY3Rpb24oYXJyLCBpc1NpZ25lZCkge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRWYXJpbnQoaXNTaWduZWQpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRWYXJpbnQoaXNTaWduZWQpKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LFxuICAgIHJlYWRQYWNrZWRTVmFyaW50OiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkU1ZhcmludCgpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRTVmFyaW50KCkpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sXG4gICAgcmVhZFBhY2tlZEJvb2xlYW46IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRCb29sZWFuKCkpO1xuICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcbiAgICAgICAgYXJyID0gYXJyIHx8IFtdO1xuICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZEJvb2xlYW4oKSk7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfSxcbiAgICByZWFkUGFja2VkRmxvYXQ6IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRGbG9hdCgpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRGbG9hdCgpKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LFxuICAgIHJlYWRQYWNrZWREb3VibGU6IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWREb3VibGUoKSk7XG4gICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuICAgICAgICBhcnIgPSBhcnIgfHwgW107XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkRG91YmxlKCkpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sXG4gICAgcmVhZFBhY2tlZEZpeGVkMzI6IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRGaXhlZDMyKCkpO1xuICAgICAgICB2YXIgZW5kID0gcmVhZFBhY2tlZEVuZCh0aGlzKTtcbiAgICAgICAgYXJyID0gYXJyIHx8IFtdO1xuICAgICAgICB3aGlsZSAodGhpcy5wb3MgPCBlbmQpIGFyci5wdXNoKHRoaXMucmVhZEZpeGVkMzIoKSk7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfSxcbiAgICByZWFkUGFja2VkU0ZpeGVkMzI6IGZ1bmN0aW9uKGFycikge1xuICAgICAgICBpZiAodGhpcy50eXBlICE9PSBQYmYuQnl0ZXMpIHJldHVybiBhcnIucHVzaCh0aGlzLnJlYWRTRml4ZWQzMigpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRTRml4ZWQzMigpKTtcbiAgICAgICAgcmV0dXJuIGFycjtcbiAgICB9LFxuICAgIHJlYWRQYWNrZWRGaXhlZDY0OiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkRml4ZWQ2NCgpKTtcbiAgICAgICAgdmFyIGVuZCA9IHJlYWRQYWNrZWRFbmQodGhpcyk7XG4gICAgICAgIGFyciA9IGFyciB8fCBbXTtcbiAgICAgICAgd2hpbGUgKHRoaXMucG9zIDwgZW5kKSBhcnIucHVzaCh0aGlzLnJlYWRGaXhlZDY0KCkpO1xuICAgICAgICByZXR1cm4gYXJyO1xuICAgIH0sXG4gICAgcmVhZFBhY2tlZFNGaXhlZDY0OiBmdW5jdGlvbihhcnIpIHtcbiAgICAgICAgaWYgKHRoaXMudHlwZSAhPT0gUGJmLkJ5dGVzKSByZXR1cm4gYXJyLnB1c2godGhpcy5yZWFkU0ZpeGVkNjQoKSk7XG4gICAgICAgIHZhciBlbmQgPSByZWFkUGFja2VkRW5kKHRoaXMpO1xuICAgICAgICBhcnIgPSBhcnIgfHwgW107XG4gICAgICAgIHdoaWxlICh0aGlzLnBvcyA8IGVuZCkgYXJyLnB1c2godGhpcy5yZWFkU0ZpeGVkNjQoKSk7XG4gICAgICAgIHJldHVybiBhcnI7XG4gICAgfSxcblxuICAgIHNraXA6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB2YXIgdHlwZSA9IHZhbCAmIDB4NztcbiAgICAgICAgaWYgKHR5cGUgPT09IFBiZi5WYXJpbnQpIHdoaWxlICh0aGlzLmJ1Zlt0aGlzLnBvcysrXSA+IDB4N2YpIHt9XG4gICAgICAgIGVsc2UgaWYgKHR5cGUgPT09IFBiZi5CeXRlcykgdGhpcy5wb3MgPSB0aGlzLnJlYWRWYXJpbnQoKSArIHRoaXMucG9zO1xuICAgICAgICBlbHNlIGlmICh0eXBlID09PSBQYmYuRml4ZWQzMikgdGhpcy5wb3MgKz0gNDtcbiAgICAgICAgZWxzZSBpZiAodHlwZSA9PT0gUGJmLkZpeGVkNjQpIHRoaXMucG9zICs9IDg7XG4gICAgICAgIGVsc2UgdGhyb3cgbmV3IEVycm9yKCdVbmltcGxlbWVudGVkIHR5cGU6ICcgKyB0eXBlKTtcbiAgICB9LFxuXG4gICAgLy8gPT09IFdSSVRJTkcgPT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT09PT1cblxuICAgIHdyaXRlVGFnOiBmdW5jdGlvbih0YWcsIHR5cGUpIHtcbiAgICAgICAgdGhpcy53cml0ZVZhcmludCgodGFnIDw8IDMpIHwgdHlwZSk7XG4gICAgfSxcblxuICAgIHJlYWxsb2M6IGZ1bmN0aW9uKG1pbikge1xuICAgICAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfHwgMTY7XG5cbiAgICAgICAgd2hpbGUgKGxlbmd0aCA8IHRoaXMucG9zICsgbWluKSBsZW5ndGggKj0gMjtcblxuICAgICAgICBpZiAobGVuZ3RoICE9PSB0aGlzLmxlbmd0aCkge1xuICAgICAgICAgICAgdmFyIGJ1ZiA9IG5ldyBVaW50OEFycmF5KGxlbmd0aCk7XG4gICAgICAgICAgICBidWYuc2V0KHRoaXMuYnVmKTtcbiAgICAgICAgICAgIHRoaXMuYnVmID0gYnVmO1xuICAgICAgICAgICAgdGhpcy5sZW5ndGggPSBsZW5ndGg7XG4gICAgICAgIH1cbiAgICB9LFxuXG4gICAgZmluaXNoOiBmdW5jdGlvbigpIHtcbiAgICAgICAgdGhpcy5sZW5ndGggPSB0aGlzLnBvcztcbiAgICAgICAgdGhpcy5wb3MgPSAwO1xuICAgICAgICByZXR1cm4gdGhpcy5idWYuc3ViYXJyYXkoMCwgdGhpcy5sZW5ndGgpO1xuICAgIH0sXG5cbiAgICB3cml0ZUZpeGVkMzI6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB0aGlzLnJlYWxsb2MoNCk7XG4gICAgICAgIHdyaXRlSW50MzIodGhpcy5idWYsIHZhbCwgdGhpcy5wb3MpO1xuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgIH0sXG5cbiAgICB3cml0ZVNGaXhlZDMyOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdGhpcy5yZWFsbG9jKDQpO1xuICAgICAgICB3cml0ZUludDMyKHRoaXMuYnVmLCB2YWwsIHRoaXMucG9zKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gNDtcbiAgICB9LFxuXG4gICAgd3JpdGVGaXhlZDY0OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdGhpcy5yZWFsbG9jKDgpO1xuICAgICAgICB3cml0ZUludDMyKHRoaXMuYnVmLCB2YWwgJiAtMSwgdGhpcy5wb3MpO1xuICAgICAgICB3cml0ZUludDMyKHRoaXMuYnVmLCBNYXRoLmZsb29yKHZhbCAqIFNISUZUX1JJR0hUXzMyKSwgdGhpcy5wb3MgKyA0KTtcbiAgICAgICAgdGhpcy5wb3MgKz0gODtcbiAgICB9LFxuXG4gICAgd3JpdGVTRml4ZWQ2NDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHRoaXMucmVhbGxvYyg4KTtcbiAgICAgICAgd3JpdGVJbnQzMih0aGlzLmJ1ZiwgdmFsICYgLTEsIHRoaXMucG9zKTtcbiAgICAgICAgd3JpdGVJbnQzMih0aGlzLmJ1ZiwgTWF0aC5mbG9vcih2YWwgKiBTSElGVF9SSUdIVF8zMiksIHRoaXMucG9zICsgNCk7XG4gICAgICAgIHRoaXMucG9zICs9IDg7XG4gICAgfSxcblxuICAgIHdyaXRlVmFyaW50OiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdmFsID0gK3ZhbCB8fCAwO1xuXG4gICAgICAgIGlmICh2YWwgPiAweGZmZmZmZmYgfHwgdmFsIDwgMCkge1xuICAgICAgICAgICAgd3JpdGVCaWdWYXJpbnQodmFsLCB0aGlzKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMucmVhbGxvYyg0KTtcblxuICAgICAgICB0aGlzLmJ1Zlt0aGlzLnBvcysrXSA9ICAgICAgICAgICB2YWwgJiAweDdmICB8ICh2YWwgPiAweDdmID8gMHg4MCA6IDApOyBpZiAodmFsIDw9IDB4N2YpIHJldHVybjtcbiAgICAgICAgdGhpcy5idWZbdGhpcy5wb3MrK10gPSAoKHZhbCA+Pj49IDcpICYgMHg3ZikgfCAodmFsID4gMHg3ZiA/IDB4ODAgOiAwKTsgaWYgKHZhbCA8PSAweDdmKSByZXR1cm47XG4gICAgICAgIHRoaXMuYnVmW3RoaXMucG9zKytdID0gKCh2YWwgPj4+PSA3KSAmIDB4N2YpIHwgKHZhbCA+IDB4N2YgPyAweDgwIDogMCk7IGlmICh2YWwgPD0gMHg3ZikgcmV0dXJuO1xuICAgICAgICB0aGlzLmJ1Zlt0aGlzLnBvcysrXSA9ICAgKHZhbCA+Pj4gNykgJiAweDdmO1xuICAgIH0sXG5cbiAgICB3cml0ZVNWYXJpbnQ6IGZ1bmN0aW9uKHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVmFyaW50KHZhbCA8IDAgPyAtdmFsICogMiAtIDEgOiB2YWwgKiAyKTtcbiAgICB9LFxuXG4gICAgd3JpdGVCb29sZWFuOiBmdW5jdGlvbih2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVZhcmludChCb29sZWFuKHZhbCkpO1xuICAgIH0sXG5cbiAgICB3cml0ZVN0cmluZzogZnVuY3Rpb24oc3RyKSB7XG4gICAgICAgIHN0ciA9IFN0cmluZyhzdHIpO1xuICAgICAgICB0aGlzLnJlYWxsb2Moc3RyLmxlbmd0aCAqIDQpO1xuXG4gICAgICAgIHRoaXMucG9zKys7IC8vIHJlc2VydmUgMSBieXRlIGZvciBzaG9ydCBzdHJpbmcgbGVuZ3RoXG5cbiAgICAgICAgdmFyIHN0YXJ0UG9zID0gdGhpcy5wb3M7XG4gICAgICAgIC8vIHdyaXRlIHRoZSBzdHJpbmcgZGlyZWN0bHkgdG8gdGhlIGJ1ZmZlciBhbmQgc2VlIGhvdyBtdWNoIHdhcyB3cml0dGVuXG4gICAgICAgIHRoaXMucG9zID0gd3JpdGVVdGY4KHRoaXMuYnVmLCBzdHIsIHRoaXMucG9zKTtcbiAgICAgICAgdmFyIGxlbiA9IHRoaXMucG9zIC0gc3RhcnRQb3M7XG5cbiAgICAgICAgaWYgKGxlbiA+PSAweDgwKSBtYWtlUm9vbUZvckV4dHJhTGVuZ3RoKHN0YXJ0UG9zLCBsZW4sIHRoaXMpO1xuXG4gICAgICAgIC8vIGZpbmFsbHksIHdyaXRlIHRoZSBtZXNzYWdlIGxlbmd0aCBpbiB0aGUgcmVzZXJ2ZWQgcGxhY2UgYW5kIHJlc3RvcmUgdGhlIHBvc2l0aW9uXG4gICAgICAgIHRoaXMucG9zID0gc3RhcnRQb3MgLSAxO1xuICAgICAgICB0aGlzLndyaXRlVmFyaW50KGxlbik7XG4gICAgICAgIHRoaXMucG9zICs9IGxlbjtcbiAgICB9LFxuXG4gICAgd3JpdGVGbG9hdDogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHRoaXMucmVhbGxvYyg0KTtcbiAgICAgICAgaWVlZTc1NC53cml0ZSh0aGlzLmJ1ZiwgdmFsLCB0aGlzLnBvcywgdHJ1ZSwgMjMsIDQpO1xuICAgICAgICB0aGlzLnBvcyArPSA0O1xuICAgIH0sXG5cbiAgICB3cml0ZURvdWJsZTogZnVuY3Rpb24odmFsKSB7XG4gICAgICAgIHRoaXMucmVhbGxvYyg4KTtcbiAgICAgICAgaWVlZTc1NC53cml0ZSh0aGlzLmJ1ZiwgdmFsLCB0aGlzLnBvcywgdHJ1ZSwgNTIsIDgpO1xuICAgICAgICB0aGlzLnBvcyArPSA4O1xuICAgIH0sXG5cbiAgICB3cml0ZUJ5dGVzOiBmdW5jdGlvbihidWZmZXIpIHtcbiAgICAgICAgdmFyIGxlbiA9IGJ1ZmZlci5sZW5ndGg7XG4gICAgICAgIHRoaXMud3JpdGVWYXJpbnQobGVuKTtcbiAgICAgICAgdGhpcy5yZWFsbG9jKGxlbik7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpKyspIHRoaXMuYnVmW3RoaXMucG9zKytdID0gYnVmZmVyW2ldO1xuICAgIH0sXG5cbiAgICB3cml0ZVJhd01lc3NhZ2U6IGZ1bmN0aW9uKGZuLCBvYmopIHtcbiAgICAgICAgdGhpcy5wb3MrKzsgLy8gcmVzZXJ2ZSAxIGJ5dGUgZm9yIHNob3J0IG1lc3NhZ2UgbGVuZ3RoXG5cbiAgICAgICAgLy8gd3JpdGUgdGhlIG1lc3NhZ2UgZGlyZWN0bHkgdG8gdGhlIGJ1ZmZlciBhbmQgc2VlIGhvdyBtdWNoIHdhcyB3cml0dGVuXG4gICAgICAgIHZhciBzdGFydFBvcyA9IHRoaXMucG9zO1xuICAgICAgICBmbihvYmosIHRoaXMpO1xuICAgICAgICB2YXIgbGVuID0gdGhpcy5wb3MgLSBzdGFydFBvcztcblxuICAgICAgICBpZiAobGVuID49IDB4ODApIG1ha2VSb29tRm9yRXh0cmFMZW5ndGgoc3RhcnRQb3MsIGxlbiwgdGhpcyk7XG5cbiAgICAgICAgLy8gZmluYWxseSwgd3JpdGUgdGhlIG1lc3NhZ2UgbGVuZ3RoIGluIHRoZSByZXNlcnZlZCBwbGFjZSBhbmQgcmVzdG9yZSB0aGUgcG9zaXRpb25cbiAgICAgICAgdGhpcy5wb3MgPSBzdGFydFBvcyAtIDE7XG4gICAgICAgIHRoaXMud3JpdGVWYXJpbnQobGVuKTtcbiAgICAgICAgdGhpcy5wb3MgKz0gbGVuO1xuICAgIH0sXG5cbiAgICB3cml0ZU1lc3NhZ2U6IGZ1bmN0aW9uKHRhZywgZm4sIG9iaikge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkJ5dGVzKTtcbiAgICAgICAgdGhpcy53cml0ZVJhd01lc3NhZ2UoZm4sIG9iaik7XG4gICAgfSxcblxuICAgIHdyaXRlUGFja2VkVmFyaW50OiAgIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkVmFyaW50LCBhcnIpOyAgIH0sXG4gICAgd3JpdGVQYWNrZWRTVmFyaW50OiAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRTVmFyaW50LCBhcnIpOyAgfSxcbiAgICB3cml0ZVBhY2tlZEJvb2xlYW46ICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZEJvb2xlYW4sIGFycik7ICB9LFxuICAgIHdyaXRlUGFja2VkRmxvYXQ6ICAgIGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkRmxvYXQsIGFycik7ICAgIH0sXG4gICAgd3JpdGVQYWNrZWREb3VibGU6ICAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWREb3VibGUsIGFycik7ICAgfSxcbiAgICB3cml0ZVBhY2tlZEZpeGVkMzI6ICBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZEZpeGVkMzIsIGFycik7ICB9LFxuICAgIHdyaXRlUGFja2VkU0ZpeGVkMzI6IGZ1bmN0aW9uKHRhZywgYXJyKSB7IGlmIChhcnIubGVuZ3RoKSB0aGlzLndyaXRlTWVzc2FnZSh0YWcsIHdyaXRlUGFja2VkU0ZpeGVkMzIsIGFycik7IH0sXG4gICAgd3JpdGVQYWNrZWRGaXhlZDY0OiAgZnVuY3Rpb24odGFnLCBhcnIpIHsgaWYgKGFyci5sZW5ndGgpIHRoaXMud3JpdGVNZXNzYWdlKHRhZywgd3JpdGVQYWNrZWRGaXhlZDY0LCBhcnIpOyAgfSxcbiAgICB3cml0ZVBhY2tlZFNGaXhlZDY0OiBmdW5jdGlvbih0YWcsIGFycikgeyBpZiAoYXJyLmxlbmd0aCkgdGhpcy53cml0ZU1lc3NhZ2UodGFnLCB3cml0ZVBhY2tlZFNGaXhlZDY0LCBhcnIpOyB9LFxuXG4gICAgd3JpdGVCeXRlc0ZpZWxkOiBmdW5jdGlvbih0YWcsIGJ1ZmZlcikge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkJ5dGVzKTtcbiAgICAgICAgdGhpcy53cml0ZUJ5dGVzKGJ1ZmZlcik7XG4gICAgfSxcbiAgICB3cml0ZUZpeGVkMzJGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDMyKTtcbiAgICAgICAgdGhpcy53cml0ZUZpeGVkMzIodmFsKTtcbiAgICB9LFxuICAgIHdyaXRlU0ZpeGVkMzJGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDMyKTtcbiAgICAgICAgdGhpcy53cml0ZVNGaXhlZDMyKHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZUZpeGVkNjRGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDY0KTtcbiAgICAgICAgdGhpcy53cml0ZUZpeGVkNjQodmFsKTtcbiAgICB9LFxuICAgIHdyaXRlU0ZpeGVkNjRGaWVsZDogZnVuY3Rpb24odGFnLCB2YWwpIHtcbiAgICAgICAgdGhpcy53cml0ZVRhZyh0YWcsIFBiZi5GaXhlZDY0KTtcbiAgICAgICAgdGhpcy53cml0ZVNGaXhlZDY0KHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZVZhcmludEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLlZhcmludCk7XG4gICAgICAgIHRoaXMud3JpdGVWYXJpbnQodmFsKTtcbiAgICB9LFxuICAgIHdyaXRlU1ZhcmludEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLlZhcmludCk7XG4gICAgICAgIHRoaXMud3JpdGVTVmFyaW50KHZhbCk7XG4gICAgfSxcbiAgICB3cml0ZVN0cmluZ0ZpZWxkOiBmdW5jdGlvbih0YWcsIHN0cikge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkJ5dGVzKTtcbiAgICAgICAgdGhpcy53cml0ZVN0cmluZyhzdHIpO1xuICAgIH0sXG4gICAgd3JpdGVGbG9hdEZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVGFnKHRhZywgUGJmLkZpeGVkMzIpO1xuICAgICAgICB0aGlzLndyaXRlRmxvYXQodmFsKTtcbiAgICB9LFxuICAgIHdyaXRlRG91YmxlRmllbGQ6IGZ1bmN0aW9uKHRhZywgdmFsKSB7XG4gICAgICAgIHRoaXMud3JpdGVUYWcodGFnLCBQYmYuRml4ZWQ2NCk7XG4gICAgICAgIHRoaXMud3JpdGVEb3VibGUodmFsKTtcbiAgICB9LFxuICAgIHdyaXRlQm9vbGVhbkZpZWxkOiBmdW5jdGlvbih0YWcsIHZhbCkge1xuICAgICAgICB0aGlzLndyaXRlVmFyaW50RmllbGQodGFnLCBCb29sZWFuKHZhbCkpO1xuICAgIH1cbn07XG5cbmZ1bmN0aW9uIHJlYWRWYXJpbnRSZW1haW5kZXIobCwgcywgcCkge1xuICAgIHZhciBidWYgPSBwLmJ1ZixcbiAgICAgICAgaCwgYjtcblxuICAgIGIgPSBidWZbcC5wb3MrK107IGggID0gKGIgJiAweDcwKSA+PiA0OyAgaWYgKGIgPCAweDgwKSByZXR1cm4gdG9OdW0obCwgaCwgcyk7XG4gICAgYiA9IGJ1ZltwLnBvcysrXTsgaCB8PSAoYiAmIDB4N2YpIDw8IDM7ICBpZiAoYiA8IDB4ODApIHJldHVybiB0b051bShsLCBoLCBzKTtcbiAgICBiID0gYnVmW3AucG9zKytdOyBoIHw9IChiICYgMHg3ZikgPDwgMTA7IGlmIChiIDwgMHg4MCkgcmV0dXJuIHRvTnVtKGwsIGgsIHMpO1xuICAgIGIgPSBidWZbcC5wb3MrK107IGggfD0gKGIgJiAweDdmKSA8PCAxNzsgaWYgKGIgPCAweDgwKSByZXR1cm4gdG9OdW0obCwgaCwgcyk7XG4gICAgYiA9IGJ1ZltwLnBvcysrXTsgaCB8PSAoYiAmIDB4N2YpIDw8IDI0OyBpZiAoYiA8IDB4ODApIHJldHVybiB0b051bShsLCBoLCBzKTtcbiAgICBiID0gYnVmW3AucG9zKytdOyBoIHw9IChiICYgMHgwMSkgPDwgMzE7IGlmIChiIDwgMHg4MCkgcmV0dXJuIHRvTnVtKGwsIGgsIHMpO1xuXG4gICAgdGhyb3cgbmV3IEVycm9yKCdFeHBlY3RlZCB2YXJpbnQgbm90IG1vcmUgdGhhbiAxMCBieXRlcycpO1xufVxuXG5mdW5jdGlvbiByZWFkUGFja2VkRW5kKHBiZikge1xuICAgIHJldHVybiBwYmYudHlwZSA9PT0gUGJmLkJ5dGVzID9cbiAgICAgICAgcGJmLnJlYWRWYXJpbnQoKSArIHBiZi5wb3MgOiBwYmYucG9zICsgMTtcbn1cblxuZnVuY3Rpb24gdG9OdW0obG93LCBoaWdoLCBpc1NpZ25lZCkge1xuICAgIGlmIChpc1NpZ25lZCkge1xuICAgICAgICByZXR1cm4gaGlnaCAqIDB4MTAwMDAwMDAwICsgKGxvdyA+Pj4gMCk7XG4gICAgfVxuXG4gICAgcmV0dXJuICgoaGlnaCA+Pj4gMCkgKiAweDEwMDAwMDAwMCkgKyAobG93ID4+PiAwKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVCaWdWYXJpbnQodmFsLCBwYmYpIHtcbiAgICB2YXIgbG93LCBoaWdoO1xuXG4gICAgaWYgKHZhbCA+PSAwKSB7XG4gICAgICAgIGxvdyAgPSAodmFsICUgMHgxMDAwMDAwMDApIHwgMDtcbiAgICAgICAgaGlnaCA9ICh2YWwgLyAweDEwMDAwMDAwMCkgfCAwO1xuICAgIH0gZWxzZSB7XG4gICAgICAgIGxvdyAgPSB+KC12YWwgJSAweDEwMDAwMDAwMCk7XG4gICAgICAgIGhpZ2ggPSB+KC12YWwgLyAweDEwMDAwMDAwMCk7XG5cbiAgICAgICAgaWYgKGxvdyBeIDB4ZmZmZmZmZmYpIHtcbiAgICAgICAgICAgIGxvdyA9IChsb3cgKyAxKSB8IDA7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsb3cgPSAwO1xuICAgICAgICAgICAgaGlnaCA9IChoaWdoICsgMSkgfCAwO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgaWYgKHZhbCA+PSAweDEwMDAwMDAwMDAwMDAwMDAwIHx8IHZhbCA8IC0weDEwMDAwMDAwMDAwMDAwMDAwKSB7XG4gICAgICAgIHRocm93IG5ldyBFcnJvcignR2l2ZW4gdmFyaW50IGRvZXNuXFwndCBmaXQgaW50byAxMCBieXRlcycpO1xuICAgIH1cblxuICAgIHBiZi5yZWFsbG9jKDEwKTtcblxuICAgIHdyaXRlQmlnVmFyaW50TG93KGxvdywgaGlnaCwgcGJmKTtcbiAgICB3cml0ZUJpZ1ZhcmludEhpZ2goaGlnaCwgcGJmKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVCaWdWYXJpbnRMb3cobG93LCBoaWdoLCBwYmYpIHtcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gPSBsb3cgJiAweDdmIHwgMHg4MDsgbG93ID4+Pj0gNztcbiAgICBwYmYuYnVmW3BiZi5wb3NdICAgPSBsb3cgJiAweDdmO1xufVxuXG5mdW5jdGlvbiB3cml0ZUJpZ1ZhcmludEhpZ2goaGlnaCwgcGJmKSB7XG4gICAgdmFyIGxzYiA9IChoaWdoICYgMHgwNykgPDwgNDtcblxuICAgIHBiZi5idWZbcGJmLnBvcysrXSB8PSBsc2IgICAgICAgICB8ICgoaGlnaCA+Pj49IDMpID8gMHg4MCA6IDApOyBpZiAoIWhpZ2gpIHJldHVybjtcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gID0gaGlnaCAmIDB4N2YgfCAoKGhpZ2ggPj4+PSA3KSA/IDB4ODAgOiAwKTsgaWYgKCFoaWdoKSByZXR1cm47XG4gICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmIHwgKChoaWdoID4+Pj0gNykgPyAweDgwIDogMCk7IGlmICghaGlnaCkgcmV0dXJuO1xuICAgIHBiZi5idWZbcGJmLnBvcysrXSAgPSBoaWdoICYgMHg3ZiB8ICgoaGlnaCA+Pj49IDcpID8gMHg4MCA6IDApOyBpZiAoIWhpZ2gpIHJldHVybjtcbiAgICBwYmYuYnVmW3BiZi5wb3MrK10gID0gaGlnaCAmIDB4N2YgfCAoKGhpZ2ggPj4+PSA3KSA/IDB4ODAgOiAwKTsgaWYgKCFoaWdoKSByZXR1cm47XG4gICAgcGJmLmJ1ZltwYmYucG9zKytdICA9IGhpZ2ggJiAweDdmO1xufVxuXG5mdW5jdGlvbiBtYWtlUm9vbUZvckV4dHJhTGVuZ3RoKHN0YXJ0UG9zLCBsZW4sIHBiZikge1xuICAgIHZhciBleHRyYUxlbiA9XG4gICAgICAgIGxlbiA8PSAweDNmZmYgPyAxIDpcbiAgICAgICAgbGVuIDw9IDB4MWZmZmZmID8gMiA6XG4gICAgICAgIGxlbiA8PSAweGZmZmZmZmYgPyAzIDogTWF0aC5mbG9vcihNYXRoLmxvZyhsZW4pIC8gKE1hdGguTE4yICogNykpO1xuXG4gICAgLy8gaWYgMSBieXRlIGlzbid0IGVub3VnaCBmb3IgZW5jb2RpbmcgbWVzc2FnZSBsZW5ndGgsIHNoaWZ0IHRoZSBkYXRhIHRvIHRoZSByaWdodFxuICAgIHBiZi5yZWFsbG9jKGV4dHJhTGVuKTtcbiAgICBmb3IgKHZhciBpID0gcGJmLnBvcyAtIDE7IGkgPj0gc3RhcnRQb3M7IGktLSkgcGJmLmJ1ZltpICsgZXh0cmFMZW5dID0gcGJmLmJ1ZltpXTtcbn1cblxuZnVuY3Rpb24gd3JpdGVQYWNrZWRWYXJpbnQoYXJyLCBwYmYpICAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlVmFyaW50KGFycltpXSk7ICAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRTVmFyaW50KGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlU1ZhcmludChhcnJbaV0pOyAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRGbG9hdChhcnIsIHBiZikgICAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRmxvYXQoYXJyW2ldKTsgICAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWREb3VibGUoYXJyLCBwYmYpICAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRG91YmxlKGFycltpXSk7ICAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRCb29sZWFuKGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlQm9vbGVhbihhcnJbaV0pOyAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRGaXhlZDMyKGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRml4ZWQzMihhcnJbaV0pOyAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRTRml4ZWQzMihhcnIsIHBiZikgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlU0ZpeGVkMzIoYXJyW2ldKTsgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRGaXhlZDY0KGFyciwgcGJmKSAgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlRml4ZWQ2NChhcnJbaV0pOyAgfVxuZnVuY3Rpb24gd3JpdGVQYWNrZWRTRml4ZWQ2NChhcnIsIHBiZikgeyBmb3IgKHZhciBpID0gMDsgaSA8IGFyci5sZW5ndGg7IGkrKykgcGJmLndyaXRlU0ZpeGVkNjQoYXJyW2ldKTsgfVxuXG4vLyBCdWZmZXIgY29kZSBiZWxvdyBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS9mZXJvc3MvYnVmZmVyLCBNSVQtbGljZW5zZWRcblxuZnVuY3Rpb24gcmVhZFVJbnQzMihidWYsIHBvcykge1xuICAgIHJldHVybiAoKGJ1Zltwb3NdKSB8XG4gICAgICAgIChidWZbcG9zICsgMV0gPDwgOCkgfFxuICAgICAgICAoYnVmW3BvcyArIDJdIDw8IDE2KSkgK1xuICAgICAgICAoYnVmW3BvcyArIDNdICogMHgxMDAwMDAwKTtcbn1cblxuZnVuY3Rpb24gd3JpdGVJbnQzMihidWYsIHZhbCwgcG9zKSB7XG4gICAgYnVmW3Bvc10gPSB2YWw7XG4gICAgYnVmW3BvcyArIDFdID0gKHZhbCA+Pj4gOCk7XG4gICAgYnVmW3BvcyArIDJdID0gKHZhbCA+Pj4gMTYpO1xuICAgIGJ1Zltwb3MgKyAzXSA9ICh2YWwgPj4+IDI0KTtcbn1cblxuZnVuY3Rpb24gcmVhZEludDMyKGJ1ZiwgcG9zKSB7XG4gICAgcmV0dXJuICgoYnVmW3Bvc10pIHxcbiAgICAgICAgKGJ1Zltwb3MgKyAxXSA8PCA4KSB8XG4gICAgICAgIChidWZbcG9zICsgMl0gPDwgMTYpKSArXG4gICAgICAgIChidWZbcG9zICsgM10gPDwgMjQpO1xufVxuXG5mdW5jdGlvbiByZWFkVXRmOChidWYsIHBvcywgZW5kKSB7XG4gICAgdmFyIHN0ciA9ICcnO1xuICAgIHZhciBpID0gcG9zO1xuXG4gICAgd2hpbGUgKGkgPCBlbmQpIHtcbiAgICAgICAgdmFyIGIwID0gYnVmW2ldO1xuICAgICAgICB2YXIgYyA9IG51bGw7IC8vIGNvZGVwb2ludFxuICAgICAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9XG4gICAgICAgICAgICBiMCA+IDB4RUYgPyA0IDpcbiAgICAgICAgICAgIGIwID4gMHhERiA/IDMgOlxuICAgICAgICAgICAgYjAgPiAweEJGID8gMiA6IDE7XG5cbiAgICAgICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlID4gZW5kKSBicmVhaztcblxuICAgICAgICB2YXIgYjEsIGIyLCBiMztcblxuICAgICAgICBpZiAoYnl0ZXNQZXJTZXF1ZW5jZSA9PT0gMSkge1xuICAgICAgICAgICAgaWYgKGIwIDwgMHg4MCkge1xuICAgICAgICAgICAgICAgIGMgPSBiMDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChieXRlc1BlclNlcXVlbmNlID09PSAyKSB7XG4gICAgICAgICAgICBiMSA9IGJ1ZltpICsgMV07XG4gICAgICAgICAgICBpZiAoKGIxICYgMHhDMCkgPT09IDB4ODApIHtcbiAgICAgICAgICAgICAgICBjID0gKGIwICYgMHgxRikgPDwgMHg2IHwgKGIxICYgMHgzRik7XG4gICAgICAgICAgICAgICAgaWYgKGMgPD0gMHg3Rikge1xuICAgICAgICAgICAgICAgICAgICBjID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYnl0ZXNQZXJTZXF1ZW5jZSA9PT0gMykge1xuICAgICAgICAgICAgYjEgPSBidWZbaSArIDFdO1xuICAgICAgICAgICAgYjIgPSBidWZbaSArIDJdO1xuICAgICAgICAgICAgaWYgKChiMSAmIDB4QzApID09PSAweDgwICYmIChiMiAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICAgICAgYyA9IChiMCAmIDB4RikgPDwgMHhDIHwgKGIxICYgMHgzRikgPDwgMHg2IHwgKGIyICYgMHgzRik7XG4gICAgICAgICAgICAgICAgaWYgKGMgPD0gMHg3RkYgfHwgKGMgPj0gMHhEODAwICYmIGMgPD0gMHhERkZGKSkge1xuICAgICAgICAgICAgICAgICAgICBjID0gbnVsbDtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSBpZiAoYnl0ZXNQZXJTZXF1ZW5jZSA9PT0gNCkge1xuICAgICAgICAgICAgYjEgPSBidWZbaSArIDFdO1xuICAgICAgICAgICAgYjIgPSBidWZbaSArIDJdO1xuICAgICAgICAgICAgYjMgPSBidWZbaSArIDNdO1xuICAgICAgICAgICAgaWYgKChiMSAmIDB4QzApID09PSAweDgwICYmIChiMiAmIDB4QzApID09PSAweDgwICYmIChiMyAmIDB4QzApID09PSAweDgwKSB7XG4gICAgICAgICAgICAgICAgYyA9IChiMCAmIDB4RikgPDwgMHgxMiB8IChiMSAmIDB4M0YpIDw8IDB4QyB8IChiMiAmIDB4M0YpIDw8IDB4NiB8IChiMyAmIDB4M0YpO1xuICAgICAgICAgICAgICAgIGlmIChjIDw9IDB4RkZGRiB8fCBjID49IDB4MTEwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjID09PSBudWxsKSB7XG4gICAgICAgICAgICBjID0gMHhGRkZEO1xuICAgICAgICAgICAgYnl0ZXNQZXJTZXF1ZW5jZSA9IDE7XG5cbiAgICAgICAgfSBlbHNlIGlmIChjID4gMHhGRkZGKSB7XG4gICAgICAgICAgICBjIC09IDB4MTAwMDA7XG4gICAgICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjID4+PiAxMCAmIDB4M0ZGIHwgMHhEODAwKTtcbiAgICAgICAgICAgIGMgPSAweERDMDAgfCBjICYgMHgzRkY7XG4gICAgICAgIH1cblxuICAgICAgICBzdHIgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjKTtcbiAgICAgICAgaSArPSBieXRlc1BlclNlcXVlbmNlO1xuICAgIH1cblxuICAgIHJldHVybiBzdHI7XG59XG5cbmZ1bmN0aW9uIHJlYWRVdGY4VGV4dERlY29kZXIoYnVmLCBwb3MsIGVuZCkge1xuICAgIHJldHVybiB1dGY4VGV4dERlY29kZXIuZGVjb2RlKGJ1Zi5zdWJhcnJheShwb3MsIGVuZCkpO1xufVxuXG5mdW5jdGlvbiB3cml0ZVV0ZjgoYnVmLCBzdHIsIHBvcykge1xuICAgIGZvciAodmFyIGkgPSAwLCBjLCBsZWFkOyBpIDwgc3RyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGMgPSBzdHIuY2hhckNvZGVBdChpKTsgLy8gY29kZSBwb2ludFxuXG4gICAgICAgIGlmIChjID4gMHhEN0ZGICYmIGMgPCAweEUwMDApIHtcbiAgICAgICAgICAgIGlmIChsZWFkKSB7XG4gICAgICAgICAgICAgICAgaWYgKGMgPCAweERDMDApIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4RUY7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEJGO1xuICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhCRDtcbiAgICAgICAgICAgICAgICAgICAgbGVhZCA9IGM7XG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGMgPSBsZWFkIC0gMHhEODAwIDw8IDEwIHwgYyAtIDB4REMwMCB8IDB4MTAwMDA7XG4gICAgICAgICAgICAgICAgICAgIGxlYWQgPSBudWxsO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGMgPiAweERCRkYgfHwgKGkgKyAxID09PSBzdHIubGVuZ3RoKSkge1xuICAgICAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gMHhFRjtcbiAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkY7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEJEO1xuICAgICAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgICAgIGxlYWQgPSBjO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBjb250aW51ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfSBlbHNlIGlmIChsZWFkKSB7XG4gICAgICAgICAgICBidWZbcG9zKytdID0gMHhFRjtcbiAgICAgICAgICAgIGJ1Zltwb3MrK10gPSAweEJGO1xuICAgICAgICAgICAgYnVmW3BvcysrXSA9IDB4QkQ7XG4gICAgICAgICAgICBsZWFkID0gbnVsbDtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmIChjIDwgMHg4MCkge1xuICAgICAgICAgICAgYnVmW3BvcysrXSA9IGM7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBpZiAoYyA8IDB4ODAwKSB7XG4gICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHg2IHwgMHhDMDtcbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgaWYgKGMgPCAweDEwMDAwKSB7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSBjID4+IDB4QyB8IDB4RTA7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgYnVmW3BvcysrXSA9IGMgPj4gMHgxMiB8IDB4RjA7XG4gICAgICAgICAgICAgICAgICAgIGJ1Zltwb3MrK10gPSBjID4+IDB4QyAmIDB4M0YgfCAweDgwO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICBidWZbcG9zKytdID0gYyA+PiAweDYgJiAweDNGIHwgMHg4MDtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGJ1Zltwb3MrK10gPSBjICYgMHgzRiB8IDB4ODA7XG4gICAgICAgIH1cbiAgICB9XG4gICAgcmV0dXJuIHBvcztcbn1cbiIsImNvbnN0IEF0dHJpYnV0ZUNvbXByZXNzaW9uID0gQ2VzaXVtLkF0dHJpYnV0ZUNvbXByZXNzaW9uO1xyXG5jb25zdCBCb3VuZGluZ1NwaGVyZSA9IENlc2l1bS5Cb3VuZGluZ1NwaGVyZTtcclxuY29uc3QgQ2FydGVzaWFuMiA9IENlc2l1bS5DYXJ0ZXNpYW4yO1xyXG5jb25zdCBDYXJ0ZXNpYW4zID0gQ2VzaXVtLkNhcnRlc2lhbjM7XHJcbmNvbnN0IENvbG9yID0gQ2VzaXVtLkNvbG9yO1xyXG5jb25zdCBDb21wb25lbnREYXRhdHlwZSA9IENlc2l1bS5Db21wb25lbnREYXRhdHlwZTtcclxuY29uc3QgZGVmYXVsdFZhbHVlID0gQ2VzaXVtLmRlZmF1bHRWYWx1ZTtcclxuY29uc3QgZGVmaW5lZCA9IENlc2l1bS5kZWZpbmVkO1xyXG5jb25zdCBkZXN0cm95T2JqZWN0ID0gQ2VzaXVtLmRlc3Ryb3lPYmplY3Q7XHJcbmNvbnN0IERldmVsb3BlckVycm9yID0gQ2VzaXVtLkRldmVsb3BlckVycm9yO1xyXG5jb25zdCBFbmNvZGVkQ2FydGVzaWFuMyA9IENlc2l1bS5FbmNvZGVkQ2FydGVzaWFuMztcclxuY29uc3QgSW5kZXhEYXRhdHlwZSA9IENlc2l1bS5JbmRleERhdGF0eXBlO1xyXG5jb25zdCBDZXNpdW1NYXRoID0gQ2VzaXVtLk1hdGg7XHJcbmNvbnN0IE1hdHJpeDQgPSBDZXNpdW0uTWF0cml4NDtcclxuY29uc3QgV2ViR0xDb25zdGFudHMgPSBDZXNpdW0uV2ViR0xDb25zdGFudHM7XHJcbmNvbnN0IEJ1ZmZlciA9IENlc2l1bS5CdWZmZXI7XHJcbmNvbnN0IEJ1ZmZlclVzYWdlID0gQ2VzaXVtLkJ1ZmZlclVzYWdlO1xyXG5jb25zdCBDb250ZXh0TGltaXRzID0gQ2VzaXVtLkNvbnRleHRMaW1pdHM7XHJcbmNvbnN0IERyYXdDb21tYW5kID0gQ2VzaXVtLkRyYXdDb21tYW5kO1xyXG5jb25zdCBQYXNzID0gQ2VzaXVtLlBhc3M7XHJcbmNvbnN0IFJlbmRlclN0YXRlID0gQ2VzaXVtLlJlbmRlclN0YXRlO1xyXG5jb25zdCBTaGFkZXJQcm9ncmFtID0gQ2VzaXVtLlNoYWRlclByb2dyYW07XHJcbmNvbnN0IFNoYWRlclNvdXJjZSA9IENlc2l1bS5TaGFkZXJTb3VyY2U7XHJcbmNvbnN0IFZlcnRleEFycmF5RmFjYWRlID0gQ2VzaXVtLlZlcnRleEFycmF5RmFjYWRlO1xyXG5jb25zdCBCaWxsYm9hcmRDb2xsZWN0aW9uRlMgPSBDZXNpdW0uX3NoYWRlcnNCaWxsYm9hcmRDb2xsZWN0aW9uRlM7XHJcbmNvbnN0IEJpbGxib2FyZENvbGxlY3Rpb25WUyA9IENlc2l1bS5fc2hhZGVyc0JpbGxib2FyZENvbGxlY3Rpb25WUztcclxuY29uc3QgQmlsbGJvYXJkID0gQ2VzaXVtLkJpbGxib2FyZDtcclxuY29uc3QgQmxlbmRpbmdTdGF0ZSA9IENlc2l1bS5CbGVuZGluZ1N0YXRlO1xyXG5jb25zdCBCbGVuZE9wdGlvbiA9IENlc2l1bS5CbGVuZE9wdGlvbjtcclxuY29uc3QgSGVpZ2h0UmVmZXJlbmNlID0gQ2VzaXVtLkhlaWdodFJlZmVyZW5jZTtcclxuY29uc3QgSG9yaXpvbnRhbE9yaWdpbiA9IENlc2l1bS5Ib3Jpem9udGFsT3JpZ2luO1xyXG5jb25zdCBTY2VuZU1vZGUgPSBDZXNpdW0uU2NlbmVNb2RlO1xyXG5jb25zdCBTREZTZXR0aW5ncyA9IENlc2l1bS5TREZTZXR0aW5ncztcclxuY29uc3QgVGV4dHVyZUF0bGFzID0gQ2VzaXVtLlRleHR1cmVBdGxhcztcclxuY29uc3QgVmVydGljYWxPcmlnaW4gPSBDZXNpdW0uVmVydGljYWxPcmlnaW47XHJcblxyXG5jb25zdCBTSE9XX0lOREVYID0gQmlsbGJvYXJkLlNIT1dfSU5ERVg7XHJcbmNvbnN0IFBPU0lUSU9OX0lOREVYID0gQmlsbGJvYXJkLlBPU0lUSU9OX0lOREVYO1xyXG5jb25zdCBQSVhFTF9PRkZTRVRfSU5ERVggPSBCaWxsYm9hcmQuUElYRUxfT0ZGU0VUX0lOREVYO1xyXG5jb25zdCBFWUVfT0ZGU0VUX0lOREVYID0gQmlsbGJvYXJkLkVZRV9PRkZTRVRfSU5ERVg7XHJcbmNvbnN0IEhPUklaT05UQUxfT1JJR0lOX0lOREVYID0gQmlsbGJvYXJkLkhPUklaT05UQUxfT1JJR0lOX0lOREVYO1xyXG5jb25zdCBWRVJUSUNBTF9PUklHSU5fSU5ERVggPSBCaWxsYm9hcmQuVkVSVElDQUxfT1JJR0lOX0lOREVYO1xyXG5jb25zdCBTQ0FMRV9JTkRFWCA9IEJpbGxib2FyZC5TQ0FMRV9JTkRFWDtcclxuY29uc3QgSU1BR0VfSU5ERVhfSU5ERVggPSBCaWxsYm9hcmQuSU1BR0VfSU5ERVhfSU5ERVg7XHJcbmNvbnN0IENPTE9SX0lOREVYID0gQmlsbGJvYXJkLkNPTE9SX0lOREVYO1xyXG5jb25zdCBST1RBVElPTl9JTkRFWCA9IEJpbGxib2FyZC5ST1RBVElPTl9JTkRFWDtcclxuY29uc3QgQUxJR05FRF9BWElTX0lOREVYID0gQmlsbGJvYXJkLkFMSUdORURfQVhJU19JTkRFWDtcclxuY29uc3QgU0NBTEVfQllfRElTVEFOQ0VfSU5ERVggPSBCaWxsYm9hcmQuU0NBTEVfQllfRElTVEFOQ0VfSU5ERVg7XHJcbmNvbnN0IFRSQU5TTFVDRU5DWV9CWV9ESVNUQU5DRV9JTkRFWCA9IEJpbGxib2FyZC5UUkFOU0xVQ0VOQ1lfQllfRElTVEFOQ0VfSU5ERVg7XHJcbmNvbnN0IFBJWEVMX09GRlNFVF9TQ0FMRV9CWV9ESVNUQU5DRV9JTkRFWCA9XHJcbiAgICBCaWxsYm9hcmQuUElYRUxfT0ZGU0VUX1NDQUxFX0JZX0RJU1RBTkNFX0lOREVYO1xyXG5jb25zdCBESVNUQU5DRV9ESVNQTEFZX0NPTkRJVElPTl9JTkRFWCA9IEJpbGxib2FyZC5ESVNUQU5DRV9ESVNQTEFZX0NPTkRJVElPTjtcclxuY29uc3QgRElTQUJMRV9ERVBUSF9ESVNUQU5DRSA9IEJpbGxib2FyZC5ESVNBQkxFX0RFUFRIX0RJU1RBTkNFO1xyXG5jb25zdCBURVhUVVJFX0NPT1JESU5BVEVfQk9VTkRTID0gQmlsbGJvYXJkLlRFWFRVUkVfQ09PUkRJTkFURV9CT1VORFM7XHJcbmNvbnN0IFNERl9JTkRFWCA9IEJpbGxib2FyZC5TREZfSU5ERVg7XHJcbmNvbnN0IE5VTUJFUl9PRl9QUk9QRVJUSUVTID0gQmlsbGJvYXJkLk5VTUJFUl9PRl9QUk9QRVJUSUVTO1xyXG5cclxubGV0IGF0dHJpYnV0ZUxvY2F0aW9ucztcclxuXHJcbmNvbnN0IGF0dHJpYnV0ZUxvY2F0aW9uc0JhdGNoZWQgPSB7XHJcbiAgICBwb3NpdGlvbkhpZ2hBbmRTY2FsZTogMCxcclxuICAgIHBvc2l0aW9uTG93QW5kUm90YXRpb246IDEsXHJcbiAgICBjb21wcmVzc2VkQXR0cmlidXRlMDogMiwgLy8gcGl4ZWwgb2Zmc2V0LCB0cmFuc2xhdGUsIGhvcml6b250YWwgb3JpZ2luLCB2ZXJ0aWNhbCBvcmlnaW4sIHNob3csIGRpcmVjdGlvbiwgdGV4dHVyZSBjb29yZGluYXRlc1xyXG4gICAgY29tcHJlc3NlZEF0dHJpYnV0ZTE6IDMsIC8vIGFsaWduZWQgYXhpcywgdHJhbnNsdWNlbmN5IGJ5IGRpc3RhbmNlLCBpbWFnZSB3aWR0aFxyXG4gICAgY29tcHJlc3NlZEF0dHJpYnV0ZTI6IDQsIC8vIGltYWdlIGhlaWdodCwgY29sb3IsIHBpY2sgY29sb3IsIHNpemUgaW4gbWV0ZXJzLCB2YWxpZCBhbGlnbmVkIGF4aXMsIDEzIGJpdHMgZnJlZVxyXG4gICAgZXllT2Zmc2V0OiA1LCAvLyA0IGJ5dGVzIGZyZWVcclxuICAgIHNjYWxlQnlEaXN0YW5jZTogNixcclxuICAgIHBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlOiA3LFxyXG4gICAgY29tcHJlc3NlZEF0dHJpYnV0ZTM6IDgsXHJcbiAgICB0ZXh0dXJlQ29vcmRpbmF0ZUJvdW5kc09yTGFiZWxUcmFuc2xhdGU6IDksXHJcbiAgICBhX2JhdGNoSWQ6IDEwLFxyXG4gICAgc2RmOiAxMSxcclxufTtcclxuXHJcbmNvbnN0IGF0dHJpYnV0ZUxvY2F0aW9uc0luc3RhbmNlZCA9IHtcclxuICAgIGRpcmVjdGlvbjogMCxcclxuICAgIHBvc2l0aW9uSGlnaEFuZFNjYWxlOiAxLFxyXG4gICAgcG9zaXRpb25Mb3dBbmRSb3RhdGlvbjogMiwgLy8gdGV4dHVyZSBvZmZzZXQgaW4gd1xyXG4gICAgY29tcHJlc3NlZEF0dHJpYnV0ZTA6IDMsXHJcbiAgICBjb21wcmVzc2VkQXR0cmlidXRlMTogNCxcclxuICAgIGNvbXByZXNzZWRBdHRyaWJ1dGUyOiA1LFxyXG4gICAgZXllT2Zmc2V0OiA2LCAvLyB0ZXh0dXJlIHJhbmdlIGluIHdcclxuICAgIHNjYWxlQnlEaXN0YW5jZTogNyxcclxuICAgIHBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlOiA4LFxyXG4gICAgY29tcHJlc3NlZEF0dHJpYnV0ZTM6IDksXHJcbiAgICB0ZXh0dXJlQ29vcmRpbmF0ZUJvdW5kc09yTGFiZWxUcmFuc2xhdGU6IDEwLFxyXG4gICAgYV9iYXRjaElkOiAxMSxcclxuICAgIHNkZjogMTIsXHJcbn07XHJcblxyXG4vKipcclxuICogQSByZW5kZXJhYmxlIGNvbGxlY3Rpb24gb2YgYmlsbGJvYXJkcy4gIEJpbGxib2FyZHMgYXJlIHZpZXdwb3J0LWFsaWduZWRcclxuICogaW1hZ2VzIHBvc2l0aW9uZWQgaW4gdGhlIDNEIHNjZW5lLlxyXG4gKiA8YnIgLz48YnIgLz5cclxuICogPGRpdiBhbGlnbj0nY2VudGVyJz5cclxuICogPGltZyBzcmM9J0ltYWdlcy9CaWxsYm9hcmQucG5nJyB3aWR0aD0nNDAwJyBoZWlnaHQ9JzMwMCcgLz48YnIgLz5cclxuICogRXhhbXBsZSBiaWxsYm9hcmRzXHJcbiAqIDwvZGl2PlxyXG4gKiA8YnIgLz48YnIgLz5cclxuICogQmlsbGJvYXJkcyBhcmUgYWRkZWQgYW5kIHJlbW92ZWQgZnJvbSB0aGUgY29sbGVjdGlvbiB1c2luZyB7QGxpbmsgQmlsbGJvYXJkQ29sbGVjdGlvbiNhZGR9XHJcbiAqIGFuZCB7QGxpbmsgQmlsbGJvYXJkQ29sbGVjdGlvbiNyZW1vdmV9LiAgQmlsbGJvYXJkcyBpbiBhIGNvbGxlY3Rpb24gYXV0b21hdGljYWxseSBzaGFyZSB0ZXh0dXJlc1xyXG4gKiBmb3IgaW1hZ2VzIHdpdGggdGhlIHNhbWUgaWRlbnRpZmllci5cclxuICpcclxuICogQGFsaWFzIEJpbGxib2FyZENvbGxlY3Rpb25cclxuICogQGNvbnN0cnVjdG9yXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gT2JqZWN0IHdpdGggdGhlIGZvbGxvd2luZyBwcm9wZXJ0aWVzOlxyXG4gKiBAcGFyYW0ge01hdHJpeDR9IFtvcHRpb25zLm1vZGVsTWF0cml4PU1hdHJpeDQuSURFTlRJVFldIFRoZSA0eDQgdHJhbnNmb3JtYXRpb24gbWF0cml4IHRoYXQgdHJhbnNmb3JtcyBlYWNoIGJpbGxib2FyZCBmcm9tIG1vZGVsIHRvIHdvcmxkIGNvb3JkaW5hdGVzLlxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lPWZhbHNlXSBGb3IgZGVidWdnaW5nIG9ubHkuIERldGVybWluZXMgaWYgdGhpcyBwcmltaXRpdmUncyBjb21tYW5kcycgYm91bmRpbmcgc3BoZXJlcyBhcmUgc2hvd24uXHJcbiAqIEBwYXJhbSB7U2NlbmV9IFtvcHRpb25zLnNjZW5lXSBNdXN0IGJlIHBhc3NlZCBpbiBmb3IgYmlsbGJvYXJkcyB0aGF0IHVzZSB0aGUgaGVpZ2h0IHJlZmVyZW5jZSBwcm9wZXJ0eSBvciB3aWxsIGJlIGRlcHRoIHRlc3RlZCBhZ2FpbnN0IHRoZSBnbG9iZS5cclxuICogQHBhcmFtIHtCbGVuZE9wdGlvbn0gW29wdGlvbnMuYmxlbmRPcHRpb249QmxlbmRPcHRpb24uT1BBUVVFX0FORF9UUkFOU0xVQ0VOVF0gVGhlIGJpbGxib2FyZCBibGVuZGluZyBvcHRpb24uIFRoZSBkZWZhdWx0XHJcbiAqIGlzIHVzZWQgZm9yIHJlbmRlcmluZyBib3RoIG9wYXF1ZSBhbmQgdHJhbnNsdWNlbnQgYmlsbGJvYXJkcy4gSG93ZXZlciwgaWYgZWl0aGVyIGFsbCBvZiB0aGUgYmlsbGJvYXJkcyBhcmUgY29tcGxldGVseSBvcGFxdWUgb3IgYWxsIGFyZSBjb21wbGV0ZWx5IHRyYW5zbHVjZW50LFxyXG4gKiBzZXR0aW5nIHRoZSB0ZWNobmlxdWUgdG8gQmxlbmRPcHRpb24uT1BBUVVFIG9yIEJsZW5kT3B0aW9uLlRSQU5TTFVDRU5UIGNhbiBpbXByb3ZlIHBlcmZvcm1hbmNlIGJ5IHVwIHRvIDJ4LlxyXG4gKiBAcGFyYW0ge0Jvb2xlYW59IFtvcHRpb25zLnNob3c9dHJ1ZV0gRGV0ZXJtaW5lcyBpZiB0aGUgYmlsbGJvYXJkcyBpbiB0aGUgY29sbGVjdGlvbiB3aWxsIGJlIHNob3duLlxyXG4gKlxyXG4gKiBAcGVyZm9ybWFuY2UgRm9yIGJlc3QgcGVyZm9ybWFuY2UsIHByZWZlciBhIGZldyBjb2xsZWN0aW9ucywgZWFjaCB3aXRoIG1hbnkgYmlsbGJvYXJkcywgdG9cclxuICogbWFueSBjb2xsZWN0aW9ucyB3aXRoIG9ubHkgYSBmZXcgYmlsbGJvYXJkcyBlYWNoLiAgT3JnYW5pemUgY29sbGVjdGlvbnMgc28gdGhhdCBiaWxsYm9hcmRzXHJcbiAqIHdpdGggdGhlIHNhbWUgdXBkYXRlIGZyZXF1ZW5jeSBhcmUgaW4gdGhlIHNhbWUgY29sbGVjdGlvbiwgaS5lLiwgYmlsbGJvYXJkcyB0aGF0IGRvIG5vdFxyXG4gKiBjaGFuZ2Ugc2hvdWxkIGJlIGluIG9uZSBjb2xsZWN0aW9uOyBiaWxsYm9hcmRzIHRoYXQgY2hhbmdlIGV2ZXJ5IGZyYW1lIHNob3VsZCBiZSBpbiBhbm90aGVyXHJcbiAqIGNvbGxlY3Rpb247IGFuZCBzbyBvbi5cclxuICpcclxuICogQHNlZSBCaWxsYm9hcmRDb2xsZWN0aW9uI2FkZFxyXG4gKiBAc2VlIEJpbGxib2FyZENvbGxlY3Rpb24jcmVtb3ZlXHJcbiAqIEBzZWUgQmlsbGJvYXJkXHJcbiAqIEBzZWUgTGFiZWxDb2xsZWN0aW9uXHJcbiAqXHJcbiAqIEBkZW1vIHtAbGluayBodHRwczovL3NhbmRjYXN0bGUuY2VzaXVtLmNvbS9pbmRleC5odG1sP3NyYz1CaWxsYm9hcmRzLmh0bWx8Q2VzaXVtIFNhbmRjYXN0bGUgQmlsbGJvYXJkIERlbW99XHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIC8vIENyZWF0ZSBhIGJpbGxib2FyZCBjb2xsZWN0aW9uIHdpdGggdHdvIGJpbGxib2FyZHNcclxuICogY29uc3QgYmlsbGJvYXJkcyA9IHNjZW5lLnByaW1pdGl2ZXMuYWRkKG5ldyBDZXNpdW0uQmlsbGJvYXJkQ29sbGVjdGlvbigpKTtcclxuICogYmlsbGJvYXJkcy5hZGQoe1xyXG4gKiAgIHBvc2l0aW9uIDogbmV3IENlc2l1bS5DYXJ0ZXNpYW4zKDEuMCwgMi4wLCAzLjApLFxyXG4gKiAgIGltYWdlIDogJ3VybC90by9pbWFnZSdcclxuICogfSk7XHJcbiAqIGJpbGxib2FyZHMuYWRkKHtcclxuICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMyg0LjAsIDUuMCwgNi4wKSxcclxuICogICBpbWFnZSA6ICd1cmwvdG8vYW5vdGhlci9pbWFnZSdcclxuICogfSk7XHJcbiAqL1xyXG5mdW5jdGlvbiBCaWxsYm9hcmRDb2xsZWN0aW9uKG9wdGlvbnMpIHtcclxuICAgIG9wdGlvbnMgPSBkZWZhdWx0VmFsdWUob3B0aW9ucywgZGVmYXVsdFZhbHVlLkVNUFRZX09CSkVDVCk7XHJcblxyXG4gICAgdGhpcy5fc2NlbmUgPSBvcHRpb25zLnNjZW5lO1xyXG4gICAgdGhpcy5fYmF0Y2hUYWJsZSA9IG9wdGlvbnMuYmF0Y2hUYWJsZTtcclxuXHJcbiAgICB0aGlzLl90ZXh0dXJlQXRsYXMgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLl90ZXh0dXJlQXRsYXNHVUlEID0gdW5kZWZpbmVkO1xyXG4gICAgdGhpcy5fZGVzdHJveVRleHR1cmVBdGxhcyA9IHRydWU7XHJcbiAgICB0aGlzLl9zcCA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuX3NwVHJhbnNsdWNlbnQgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLl9yc09wYXF1ZSA9IHVuZGVmaW5lZDtcclxuICAgIHRoaXMuX3JzVHJhbnNsdWNlbnQgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLl92YWYgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgdGhpcy5fYmlsbGJvYXJkcyA9IFtdO1xyXG4gICAgdGhpcy5fYmlsbGJvYXJkc1RvVXBkYXRlID0gW107XHJcbiAgICB0aGlzLl9iaWxsYm9hcmRzVG9VcGRhdGVJbmRleCA9IDA7XHJcbiAgICB0aGlzLl9iaWxsYm9hcmRzUmVtb3ZlZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5fY3JlYXRlVmVydGV4QXJyYXkgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLl9zaGFkZXJSb3RhdGlvbiA9IGZhbHNlO1xyXG4gICAgdGhpcy5fY29tcGlsZWRTaGFkZXJSb3RhdGlvbiA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuX3NoYWRlckFsaWduZWRBeGlzID0gZmFsc2U7XHJcbiAgICB0aGlzLl9jb21waWxlZFNoYWRlckFsaWduZWRBeGlzID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5fc2hhZGVyU2NhbGVCeURpc3RhbmNlID0gZmFsc2U7XHJcbiAgICB0aGlzLl9jb21waWxlZFNoYWRlclNjYWxlQnlEaXN0YW5jZSA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuX3NoYWRlclRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSBmYWxzZTtcclxuICAgIHRoaXMuX2NvbXBpbGVkU2hhZGVyVHJhbnNsdWNlbmN5QnlEaXN0YW5jZSA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuX3NoYWRlclBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlID0gZmFsc2U7XHJcbiAgICB0aGlzLl9jb21waWxlZFNoYWRlclBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5fc2hhZGVyRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gZmFsc2U7XHJcbiAgICB0aGlzLl9jb21waWxlZFNoYWRlckRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuX3NoYWRlckRpc2FibGVEZXB0aERpc3RhbmNlID0gZmFsc2U7XHJcbiAgICB0aGlzLl9jb21waWxlZFNoYWRlckRpc2FibGVEZXB0aERpc3RhbmNlID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5fc2hhZGVyQ2xhbXBUb0dyb3VuZCA9IGZhbHNlO1xyXG4gICAgdGhpcy5fY29tcGlsZWRTaGFkZXJDbGFtcFRvR3JvdW5kID0gZmFsc2U7XHJcblxyXG4gICAgdGhpcy5fcHJvcGVydGllc0NoYW5nZWQgPSBuZXcgVWludDMyQXJyYXkoTlVNQkVSX09GX1BST1BFUlRJRVMpO1xyXG5cclxuICAgIHRoaXMuX21heFNpemUgPSAwLjA7XHJcbiAgICB0aGlzLl9tYXhFeWVPZmZzZXQgPSAwLjA7XHJcbiAgICB0aGlzLl9tYXhTY2FsZSA9IDEuMDtcclxuICAgIHRoaXMuX21heFBpeGVsT2Zmc2V0ID0gMC4wO1xyXG4gICAgdGhpcy5fYWxsSG9yaXpvbnRhbENlbnRlciA9IHRydWU7XHJcbiAgICB0aGlzLl9hbGxWZXJ0aWNhbENlbnRlciA9IHRydWU7XHJcbiAgICB0aGlzLl9hbGxTaXplZEluTWV0ZXJzID0gdHJ1ZTtcclxuXHJcbiAgICB0aGlzLl9iYXNlVm9sdW1lID0gbmV3IEJvdW5kaW5nU3BoZXJlKCk7XHJcbiAgICB0aGlzLl9iYXNlVm9sdW1lV0MgPSBuZXcgQm91bmRpbmdTcGhlcmUoKTtcclxuICAgIHRoaXMuX2Jhc2VWb2x1bWUyRCA9IG5ldyBCb3VuZGluZ1NwaGVyZSgpO1xyXG4gICAgdGhpcy5fYm91bmRpbmdWb2x1bWUgPSBuZXcgQm91bmRpbmdTcGhlcmUoKTtcclxuICAgIHRoaXMuX2JvdW5kaW5nVm9sdW1lRGlydHkgPSBmYWxzZTtcclxuXHJcbiAgICB0aGlzLl9jb2xvckNvbW1hbmRzID0gW107XHJcblxyXG4gICAgdGhpcy5fRU5VRU5BQkxFRCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLmVudUVuYWJsZWQsZmFsc2UpO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogRGV0ZXJtaW5lcyBpZiBiaWxsYm9hcmRzIGluIHRoaXMgY29sbGVjdGlvbiB3aWxsIGJlIHNob3duLlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICogQGRlZmF1bHQgdHJ1ZVxyXG4gICAgICovXHJcbiAgICB0aGlzLnNob3cgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5zaG93LCB0cnVlKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSA0eDQgdHJhbnNmb3JtYXRpb24gbWF0cml4IHRoYXQgdHJhbnNmb3JtcyBlYWNoIGJpbGxib2FyZCBpbiB0aGlzIGNvbGxlY3Rpb24gZnJvbSBtb2RlbCB0byB3b3JsZCBjb29yZGluYXRlcy5cclxuICAgICAqIFdoZW4gdGhpcyBpcyB0aGUgaWRlbnRpdHkgbWF0cml4LCB0aGUgYmlsbGJvYXJkcyBhcmUgZHJhd24gaW4gd29ybGQgY29vcmRpbmF0ZXMsIGkuZS4sIEVhcnRoJ3MgV0dTODQgY29vcmRpbmF0ZXMuXHJcbiAgICAgKiBMb2NhbCByZWZlcmVuY2UgZnJhbWVzIGNhbiBiZSB1c2VkIGJ5IHByb3ZpZGluZyBhIGRpZmZlcmVudCB0cmFuc2Zvcm1hdGlvbiBtYXRyaXgsIGxpa2UgdGhhdCByZXR1cm5lZFxyXG4gICAgICogYnkge0BsaW5rIFRyYW5zZm9ybXMuZWFzdE5vcnRoVXBUb0ZpeGVkRnJhbWV9LlxyXG4gICAgICpcclxuICAgICAqIEB0eXBlIHtNYXRyaXg0fVxyXG4gICAgICogQGRlZmF1bHQge0BsaW5rIE1hdHJpeDQuSURFTlRJVFl9XHJcbiAgICAgKlxyXG4gICAgICpcclxuICAgICAqIEBleGFtcGxlXHJcbiAgICAgKiBjb25zdCBjZW50ZXIgPSBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcygtNzUuNTk3NzcsIDQwLjAzODgzKTtcclxuICAgICAqIGJpbGxib2FyZHMubW9kZWxNYXRyaXggPSBDZXNpdW0uVHJhbnNmb3Jtcy5lYXN0Tm9ydGhVcFRvRml4ZWRGcmFtZShjZW50ZXIpO1xyXG4gICAgICogYmlsbGJvYXJkcy5hZGQoe1xyXG4gICAgICogICBpbWFnZSA6ICd1cmwvdG8vaW1hZ2UnLFxyXG4gICAgICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygwLjAsIDAuMCwgMC4wKSAvLyBjZW50ZXJcclxuICAgICAqIH0pO1xyXG4gICAgICogYmlsbGJvYXJkcy5hZGQoe1xyXG4gICAgICogICBpbWFnZSA6ICd1cmwvdG8vaW1hZ2UnLFxyXG4gICAgICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygxMDAwMDAwLjAsIDAuMCwgMC4wKSAvLyBlYXN0XHJcbiAgICAgKiB9KTtcclxuICAgICAqIGJpbGxib2FyZHMuYWRkKHtcclxuICAgICAqICAgaW1hZ2UgOiAndXJsL3RvL2ltYWdlJyxcclxuICAgICAqICAgcG9zaXRpb24gOiBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMoMC4wLCAxMDAwMDAwLjAsIDAuMCkgLy8gbm9ydGhcclxuICAgICAqIH0pO1xyXG4gICAgICogYmlsbGJvYXJkcy5hZGQoe1xyXG4gICAgICogICBpbWFnZSA6ICd1cmwvdG8vaW1hZ2UnLFxyXG4gICAgICogICBwb3NpdGlvbiA6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMygwLjAsIDAuMCwgMTAwMDAwMC4wKSAvLyB1cFxyXG4gICAgICogfSk7XHJcbiAgICAgKlxyXG4gICAgICogQHNlZSBUcmFuc2Zvcm1zLmVhc3ROb3J0aFVwVG9GaXhlZEZyYW1lXHJcbiAgICAgKi9cclxuICAgIHRoaXMubW9kZWxNYXRyaXggPSBNYXRyaXg0LmNsb25lKFxyXG4gICAgICAgIGRlZmF1bHRWYWx1ZShvcHRpb25zLm1vZGVsTWF0cml4LCBNYXRyaXg0LklERU5USVRZKVxyXG4gICAgKTtcclxuICAgIHRoaXMuX21vZGVsTWF0cml4ID0gTWF0cml4NC5jbG9uZShNYXRyaXg0LklERU5USVRZKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoaXMgcHJvcGVydHkgaXMgZm9yIGRlYnVnZ2luZyBvbmx5OyBpdCBpcyBub3QgZm9yIHByb2R1Y3Rpb24gdXNlIG5vciBpcyBpdCBvcHRpbWl6ZWQuXHJcbiAgICAgKiA8cD5cclxuICAgICAqIERyYXdzIHRoZSBib3VuZGluZyBzcGhlcmUgZm9yIGVhY2ggZHJhdyBjb21tYW5kIGluIHRoZSBwcmltaXRpdmUuXHJcbiAgICAgKiA8L3A+XHJcbiAgICAgKlxyXG4gICAgICogQHR5cGUge0Jvb2xlYW59XHJcbiAgICAgKlxyXG4gICAgICogQGRlZmF1bHQgZmFsc2VcclxuICAgICAqL1xyXG4gICAgdGhpcy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSA9IGRlZmF1bHRWYWx1ZShcclxuICAgICAgICBvcHRpb25zLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lLFxyXG4gICAgICAgIGZhbHNlXHJcbiAgICApO1xyXG5cclxuICAgIC8qKlxyXG4gICAgICogVGhpcyBwcm9wZXJ0eSBpcyBmb3IgZGVidWdnaW5nIG9ubHk7IGl0IGlzIG5vdCBmb3IgcHJvZHVjdGlvbiB1c2Ugbm9yIGlzIGl0IG9wdGltaXplZC5cclxuICAgICAqIDxwPlxyXG4gICAgICogRHJhd3MgdGhlIHRleHR1cmUgYXRsYXMgZm9yIHRoaXMgQmlsbGJvYXJkQ29sbGVjdGlvbiBhcyBhIGZ1bGxzY3JlZW4gcXVhZC5cclxuICAgICAqIDwvcD5cclxuICAgICAqXHJcbiAgICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgICAqXHJcbiAgICAgKiBAZGVmYXVsdCBmYWxzZVxyXG4gICAgICovXHJcbiAgICB0aGlzLmRlYnVnU2hvd1RleHR1cmVBdGxhcyA9IGRlZmF1bHRWYWx1ZShcclxuICAgICAgICBvcHRpb25zLmRlYnVnU2hvd1RleHR1cmVBdGxhcyxcclxuICAgICAgICBmYWxzZVxyXG4gICAgKTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIFRoZSBiaWxsYm9hcmQgYmxlbmRpbmcgb3B0aW9uLiBUaGUgZGVmYXVsdCBpcyB1c2VkIGZvciByZW5kZXJpbmcgYm90aCBvcGFxdWUgYW5kIHRyYW5zbHVjZW50IGJpbGxib2FyZHMuXHJcbiAgICAgKiBIb3dldmVyLCBpZiBlaXRoZXIgYWxsIG9mIHRoZSBiaWxsYm9hcmRzIGFyZSBjb21wbGV0ZWx5IG9wYXF1ZSBvciBhbGwgYXJlIGNvbXBsZXRlbHkgdHJhbnNsdWNlbnQsXHJcbiAgICAgKiBzZXR0aW5nIHRoZSB0ZWNobmlxdWUgdG8gQmxlbmRPcHRpb24uT1BBUVVFIG9yIEJsZW5kT3B0aW9uLlRSQU5TTFVDRU5UIGNhbiBpbXByb3ZlXHJcbiAgICAgKiBwZXJmb3JtYW5jZSBieSB1cCB0byAyeC5cclxuICAgICAqIEB0eXBlIHtCbGVuZE9wdGlvbn1cclxuICAgICAqIEBkZWZhdWx0IEJsZW5kT3B0aW9uLk9QQVFVRV9BTkRfVFJBTlNMVUNFTlRcclxuICAgICAqL1xyXG4gICAgdGhpcy5ibGVuZE9wdGlvbiA9IGRlZmF1bHRWYWx1ZShcclxuICAgICAgICBvcHRpb25zLmJsZW5kT3B0aW9uLFxyXG4gICAgICAgIEJsZW5kT3B0aW9uLk9QQVFVRV9BTkRfVFJBTlNMVUNFTlRcclxuICAgICk7XHJcbiAgICB0aGlzLl9ibGVuZE9wdGlvbiA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICB0aGlzLl9tb2RlID0gU2NlbmVNb2RlLlNDRU5FM0Q7XHJcblxyXG4gICAgLy8gVGhlIGJ1ZmZlciB1c2FnZSBmb3IgZWFjaCBhdHRyaWJ1dGUgaXMgZGV0ZXJtaW5lZCBiYXNlZCBvbiB0aGUgdXNhZ2Ugb2YgdGhlIGF0dHJpYnV0ZSBvdmVyIHRpbWUuXHJcbiAgICB0aGlzLl9idWZmZXJzVXNhZ2UgPSBbXHJcbiAgICAgICAgQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsIC8vIFNIT1dfSU5ERVhcclxuICAgICAgICBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVywgLy8gUE9TSVRJT05fSU5ERVhcclxuICAgICAgICBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVywgLy8gUElYRUxfT0ZGU0VUX0lOREVYXHJcbiAgICAgICAgQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsIC8vIEVZRV9PRkZTRVRfSU5ERVhcclxuICAgICAgICBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVywgLy8gSE9SSVpPTlRBTF9PUklHSU5fSU5ERVhcclxuICAgICAgICBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVywgLy8gVkVSVElDQUxfT1JJR0lOX0lOREVYXHJcbiAgICAgICAgQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsIC8vIFNDQUxFX0lOREVYXHJcbiAgICAgICAgQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsIC8vIElNQUdFX0lOREVYX0lOREVYXHJcbiAgICAgICAgQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsIC8vIENPTE9SX0lOREVYXHJcbiAgICAgICAgQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsIC8vIFJPVEFUSU9OX0lOREVYXHJcbiAgICAgICAgQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsIC8vIEFMSUdORURfQVhJU19JTkRFWFxyXG4gICAgICAgIEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLCAvLyBTQ0FMRV9CWV9ESVNUQU5DRV9JTkRFWFxyXG4gICAgICAgIEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLCAvLyBUUkFOU0xVQ0VOQ1lfQllfRElTVEFOQ0VfSU5ERVhcclxuICAgICAgICBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVywgLy8gUElYRUxfT0ZGU0VUX1NDQUxFX0JZX0RJU1RBTkNFX0lOREVYXHJcbiAgICAgICAgQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsIC8vIERJU1RBTkNFX0RJU1BMQVlfQ09ORElUSU9OX0lOREVYXHJcbiAgICAgICAgQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsIC8vIFRFWFRVUkVfQ09PUkRJTkFURV9CT1VORFNcclxuICAgIF07XHJcblxyXG4gICAgdGhpcy5faGlnaGxpZ2h0Q29sb3IgPSBDb2xvci5jbG9uZShDb2xvci5XSElURSk7IC8vIE9ubHkgdXNlZCBieSBWZWN0b3IzRFRpbGVQb2ludHNcclxuXHJcbiAgICBjb25zdCB0aGF0ID0gdGhpcztcclxuICAgIHRoaXMuX3VuaWZvcm1zID0ge1xyXG4gICAgICAgIHVfYXRsYXM6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoYXQuX3RleHR1cmVBdGxhcy50ZXh0dXJlO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgdV9oaWdobGlnaHRDb2xvcjogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhhdC5faGlnaGxpZ2h0Q29sb3I7XHJcbiAgICAgICAgfSxcclxuICAgIH07XHJcblxyXG4gICAgY29uc3Qgc2NlbmUgPSB0aGlzLl9zY2VuZTtcclxuICAgIGlmIChkZWZpbmVkKHNjZW5lKSAmJiBkZWZpbmVkKHNjZW5lLnRlcnJhaW5Qcm92aWRlckNoYW5nZWQpKSB7XHJcbiAgICAgICAgdGhpcy5fcmVtb3ZlQ2FsbGJhY2tGdW5jID0gc2NlbmUudGVycmFpblByb3ZpZGVyQ2hhbmdlZC5hZGRFdmVudExpc3RlbmVyKFxyXG4gICAgICAgICAgICBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaWxsYm9hcmRzID0gdGhpcy5fYmlsbGJvYXJkcztcclxuICAgICAgICAgICAgICAgIGNvbnN0IGxlbmd0aCA9IGJpbGxib2FyZHMubGVuZ3RoO1xyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWZpbmVkKGJpbGxib2FyZHNbaV0pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJpbGxib2FyZHNbaV0uX3VwZGF0ZUNsYW1waW5nKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICB0aGlzXHJcbiAgICAgICAgKTtcclxuICAgIH1cclxufVxyXG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoQmlsbGJvYXJkQ29sbGVjdGlvbi5wcm90b3R5cGUsIHtcclxuICAgIC8qKlxyXG4gICAgICogUmV0dXJucyB0aGUgbnVtYmVyIG9mIGJpbGxib2FyZHMgaW4gdGhpcyBjb2xsZWN0aW9uLiAgVGhpcyBpcyBjb21tb25seSB1c2VkIHdpdGhcclxuICAgICAqIHtAbGluayBCaWxsYm9hcmRDb2xsZWN0aW9uI2dldH0gdG8gaXRlcmF0ZSBvdmVyIGFsbCB0aGUgYmlsbGJvYXJkc1xyXG4gICAgICogaW4gdGhlIGNvbGxlY3Rpb24uXHJcbiAgICAgKiBAbWVtYmVyb2YgQmlsbGJvYXJkQ29sbGVjdGlvbi5wcm90b3R5cGVcclxuICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIGxlbmd0aDoge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZW1vdmVCaWxsYm9hcmRzKHRoaXMpO1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fYmlsbGJvYXJkcy5sZW5ndGg7XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIG9yIHNldHMgdGhlIHRleHR1cmVBdGxhcy5cclxuICAgICAqIEBtZW1iZXJvZiBCaWxsYm9hcmRDb2xsZWN0aW9uLnByb3RvdHlwZVxyXG4gICAgICogQHR5cGUge1RleHR1cmVBdGxhc31cclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIHRleHR1cmVBdGxhczoge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fdGV4dHVyZUF0bGFzO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgc2V0OiBmdW5jdGlvbiAodmFsdWUpIHtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3RleHR1cmVBdGxhcyAhPT0gdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuX3RleHR1cmVBdGxhcyA9XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fZGVzdHJveVRleHR1cmVBdGxhcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RleHR1cmVBdGxhcyAmJlxyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3RleHR1cmVBdGxhcy5kZXN0cm95KCk7XHJcbiAgICAgICAgICAgICAgICB0aGlzLl90ZXh0dXJlQXRsYXMgPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHRoaXMuX2NyZWF0ZVZlcnRleEFycmF5ID0gdHJ1ZTsgLy8gTmV3IHBlci1iaWxsYm9hcmQgdGV4dHVyZSBjb29yZGluYXRlc1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSxcclxuICAgIH0sXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBHZXRzIG9yIHNldHMgYSB2YWx1ZSB3aGljaCBkZXRlcm1pbmVzIGlmIHRoZSB0ZXh0dXJlIGF0bGFzIGlzXHJcbiAgICAgKiBkZXN0cm95ZWQgd2hlbiB0aGUgY29sbGVjdGlvbiBpcyBkZXN0cm95ZWQuXHJcbiAgICAgKlxyXG4gICAgICogSWYgdGhlIHRleHR1cmUgYXRsYXMgaXMgdXNlZCBieSBtb3JlIHRoYW4gb25lIGNvbGxlY3Rpb24sIHNldCB0aGlzIHRvIDxjb2RlPmZhbHNlPC9jb2RlPixcclxuICAgICAqIGFuZCBleHBsaWNpdGx5IGRlc3Ryb3kgdGhlIGF0bGFzIHRvIGF2b2lkIGF0dGVtcHRpbmcgdG8gZGVzdHJveSBpdCBtdWx0aXBsZSB0aW1lcy5cclxuICAgICAqXHJcbiAgICAgKiBAbWVtYmVyb2YgQmlsbGJvYXJkQ29sbGVjdGlvbi5wcm90b3R5cGVcclxuICAgICAqIEB0eXBlIHtCb29sZWFufVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqXHJcbiAgICAgKiBAZXhhbXBsZVxyXG4gICAgICogLy8gU2V0IGRlc3Ryb3lUZXh0dXJlQXRsYXNcclxuICAgICAqIC8vIERlc3Ryb3kgYSBiaWxsYm9hcmQgY29sbGVjdGlvbiBidXQgbm90IGl0cyB0ZXh0dXJlIGF0bGFzLlxyXG4gICAgICpcclxuICAgICAqIGNvbnN0IGF0bGFzID0gbmV3IFRleHR1cmVBdGxhcyh7XHJcbiAgICAgKiAgIHNjZW5lIDogc2NlbmUsXHJcbiAgICAgKiAgIGltYWdlcyA6IGltYWdlc1xyXG4gICAgICogfSk7XHJcbiAgICAgKiBiaWxsYm9hcmRzLnRleHR1cmVBdGxhcyA9IGF0bGFzO1xyXG4gICAgICogYmlsbGJvYXJkcy5kZXN0cm95VGV4dHVyZUF0bGFzID0gZmFsc2U7XHJcbiAgICAgKiBiaWxsYm9hcmRzID0gYmlsbGJvYXJkcy5kZXN0cm95KCk7XHJcbiAgICAgKiBjb25zb2xlLmxvZyhhdGxhcy5pc0Rlc3Ryb3llZCgpKTsgLy8gRmFsc2VcclxuICAgICAqL1xyXG4gICAgZGVzdHJveVRleHR1cmVBdGxhczoge1xyXG4gICAgICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5fZGVzdHJveVRleHR1cmVBdGxhcztcclxuICAgICAgICB9LFxyXG4gICAgICAgIHNldDogZnVuY3Rpb24gKHZhbHVlKSB7XHJcbiAgICAgICAgICAgIHRoaXMuX2Rlc3Ryb3lUZXh0dXJlQXRsYXMgPSB2YWx1ZTtcclxuICAgICAgICB9LFxyXG4gICAgfSxcclxufSk7XHJcblxyXG5mdW5jdGlvbiBkZXN0cm95QmlsbGJvYXJkcyhiaWxsYm9hcmRzKSB7XHJcbiAgICBjb25zdCBsZW5ndGggPSBiaWxsYm9hcmRzLmxlbmd0aDtcclxuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcclxuICAgICAgICBpZiAoYmlsbGJvYXJkc1tpXSkge1xyXG4gICAgICAgICAgICBiaWxsYm9hcmRzW2ldLl9kZXN0cm95KCk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhbmQgYWRkcyBhIGJpbGxib2FyZCB3aXRoIHRoZSBzcGVjaWZpZWQgaW5pdGlhbCBwcm9wZXJ0aWVzIHRvIHRoZSBjb2xsZWN0aW9uLlxyXG4gKiBUaGUgYWRkZWQgYmlsbGJvYXJkIGlzIHJldHVybmVkIHNvIGl0IGNhbiBiZSBtb2RpZmllZCBvciByZW1vdmVkIGZyb20gdGhlIGNvbGxlY3Rpb24gbGF0ZXIuXHJcbiAqXHJcbiAqIEBwYXJhbSB7T2JqZWN0fVtvcHRpb25zXSBBIHRlbXBsYXRlIGRlc2NyaWJpbmcgdGhlIGJpbGxib2FyZCdzIHByb3BlcnRpZXMgYXMgc2hvd24gaW4gRXhhbXBsZSAxLlxyXG4gKiBAcmV0dXJucyB7QmlsbGJvYXJkfSBUaGUgYmlsbGJvYXJkIHRoYXQgd2FzIGFkZGVkIHRvIHRoZSBjb2xsZWN0aW9uLlxyXG4gKlxyXG4gKiBAcGVyZm9ybWFuY2UgQ2FsbGluZyA8Y29kZT5hZGQ8L2NvZGU+IGlzIGV4cGVjdGVkIGNvbnN0YW50IHRpbWUuICBIb3dldmVyLCB0aGUgY29sbGVjdGlvbidzIHZlcnRleCBidWZmZXJcclxuICogaXMgcmV3cml0dGVuIC0gYW4gPGNvZGU+TyhuKTwvY29kZT4gb3BlcmF0aW9uIHRoYXQgYWxzbyBpbmN1cnMgQ1BVIHRvIEdQVSBvdmVyaGVhZC4gIEZvclxyXG4gKiBiZXN0IHBlcmZvcm1hbmNlLCBhZGQgYXMgbWFueSBiaWxsYm9hcmRzIGFzIHBvc3NpYmxlIGJlZm9yZSBjYWxsaW5nIDxjb2RlPnVwZGF0ZTwvY29kZT4uXHJcbiAqXHJcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cclxuICpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogLy8gRXhhbXBsZSAxOiAgQWRkIGEgYmlsbGJvYXJkLCBzcGVjaWZ5aW5nIGFsbCB0aGUgZGVmYXVsdCB2YWx1ZXMuXHJcbiAqIGNvbnN0IGIgPSBiaWxsYm9hcmRzLmFkZCh7XHJcbiAqICAgc2hvdyA6IHRydWUsXHJcbiAqICAgcG9zaXRpb24gOiBDZXNpdW0uQ2FydGVzaWFuMy5aRVJPLFxyXG4gKiAgIHBpeGVsT2Zmc2V0IDogQ2VzaXVtLkNhcnRlc2lhbjIuWkVSTyxcclxuICogICBleWVPZmZzZXQgOiBDZXNpdW0uQ2FydGVzaWFuMy5aRVJPLFxyXG4gKiAgIGhlaWdodFJlZmVyZW5jZSA6IENlc2l1bS5IZWlnaHRSZWZlcmVuY2UuTk9ORSxcclxuICogICBob3Jpem9udGFsT3JpZ2luIDogQ2VzaXVtLkhvcml6b250YWxPcmlnaW4uQ0VOVEVSLFxyXG4gKiAgIHZlcnRpY2FsT3JpZ2luIDogQ2VzaXVtLlZlcnRpY2FsT3JpZ2luLkNFTlRFUixcclxuICogICBzY2FsZSA6IDEuMCxcclxuICogICBpbWFnZSA6ICd1cmwvdG8vaW1hZ2UnLFxyXG4gKiAgIGltYWdlU3ViUmVnaW9uIDogdW5kZWZpbmVkLFxyXG4gKiAgIGNvbG9yIDogQ2VzaXVtLkNvbG9yLldISVRFLFxyXG4gKiAgIGlkIDogdW5kZWZpbmVkLFxyXG4gKiAgIHJvdGF0aW9uIDogMC4wLFxyXG4gKiAgIGFsaWduZWRBeGlzIDogQ2VzaXVtLkNhcnRlc2lhbjMuWkVSTyxcclxuICogICB3aWR0aCA6IHVuZGVmaW5lZCxcclxuICogICBoZWlnaHQgOiB1bmRlZmluZWQsXHJcbiAqICAgc2NhbGVCeURpc3RhbmNlIDogdW5kZWZpbmVkLFxyXG4gKiAgIHRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgOiB1bmRlZmluZWQsXHJcbiAqICAgcGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2UgOiB1bmRlZmluZWQsXHJcbiAqICAgc2l6ZUluTWV0ZXJzIDogZmFsc2UsXHJcbiAqICAgZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uIDogdW5kZWZpbmVkXHJcbiAqIH0pO1xyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiAvLyBFeGFtcGxlIDI6ICBTcGVjaWZ5IG9ubHkgdGhlIGJpbGxib2FyZCdzIGNhcnRvZ3JhcGhpYyBwb3NpdGlvbi5cclxuICogY29uc3QgYiA9IGJpbGxib2FyZHMuYWRkKHtcclxuICogICBwb3NpdGlvbiA6IENlc2l1bS5DYXJ0ZXNpYW4zLmZyb21EZWdyZWVzKGxvbmdpdHVkZSwgbGF0aXR1ZGUsIGhlaWdodClcclxuICogfSk7XHJcbiAqXHJcbiAqIEBzZWUgQmlsbGJvYXJkQ29sbGVjdGlvbiNyZW1vdmVcclxuICogQHNlZSBCaWxsYm9hcmRDb2xsZWN0aW9uI3JlbW92ZUFsbFxyXG4gKi9cclxuQmlsbGJvYXJkQ29sbGVjdGlvbi5wcm90b3R5cGUuYWRkID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcclxuICAgIGNvbnN0IGJpbGxib2FyZCA9IG5ldyBCaWxsYm9hcmQob3B0aW9ucywgdGhpcyk7XHJcbiAgICBiaWxsYm9hcmQuX2luZGV4ID0gdGhpcy5fYmlsbGJvYXJkcy5sZW5ndGg7XHJcblxyXG4gICAgdGhpcy5fYmlsbGJvYXJkcy5wdXNoKGJpbGxib2FyZCk7XHJcbiAgICB0aGlzLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IHRydWU7XHJcblxyXG4gICAgcmV0dXJuIGJpbGxib2FyZDtcclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZW1vdmVzIGEgYmlsbGJvYXJkIGZyb20gdGhlIGNvbGxlY3Rpb24uXHJcbiAqXHJcbiAqIEBwYXJhbSB7QmlsbGJvYXJkfSBiaWxsYm9hcmQgVGhlIGJpbGxib2FyZCB0byByZW1vdmUuXHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSA8Y29kZT50cnVlPC9jb2RlPiBpZiB0aGUgYmlsbGJvYXJkIHdhcyByZW1vdmVkOyA8Y29kZT5mYWxzZTwvY29kZT4gaWYgdGhlIGJpbGxib2FyZCB3YXMgbm90IGZvdW5kIGluIHRoZSBjb2xsZWN0aW9uLlxyXG4gKlxyXG4gKiBAcGVyZm9ybWFuY2UgQ2FsbGluZyA8Y29kZT5yZW1vdmU8L2NvZGU+IGlzIGV4cGVjdGVkIGNvbnN0YW50IHRpbWUuICBIb3dldmVyLCB0aGUgY29sbGVjdGlvbidzIHZlcnRleCBidWZmZXJcclxuICogaXMgcmV3cml0dGVuIC0gYW4gPGNvZGU+TyhuKTwvY29kZT4gb3BlcmF0aW9uIHRoYXQgYWxzbyBpbmN1cnMgQ1BVIHRvIEdQVSBvdmVyaGVhZC4gIEZvclxyXG4gKiBiZXN0IHBlcmZvcm1hbmNlLCByZW1vdmUgYXMgbWFueSBiaWxsYm9hcmRzIGFzIHBvc3NpYmxlIGJlZm9yZSBjYWxsaW5nIDxjb2RlPnVwZGF0ZTwvY29kZT4uXHJcbiAqIElmIHlvdSBpbnRlbmQgdG8gdGVtcG9yYXJpbHkgaGlkZSBhIGJpbGxib2FyZCwgaXQgaXMgdXN1YWxseSBtb3JlIGVmZmljaWVudCB0byBjYWxsXHJcbiAqIHtAbGluayBCaWxsYm9hcmQjc2hvd30gaW5zdGVhZCBvZiByZW1vdmluZyBhbmQgcmUtYWRkaW5nIHRoZSBiaWxsYm9hcmQuXHJcbiAqXHJcbiAqIEBleGNlcHRpb24ge0RldmVsb3BlckVycm9yfSBUaGlzIG9iamVjdCB3YXMgZGVzdHJveWVkLCBpLmUuLCBkZXN0cm95KCkgd2FzIGNhbGxlZC5cclxuICpcclxuICpcclxuICogQGV4YW1wbGVcclxuICogY29uc3QgYiA9IGJpbGxib2FyZHMuYWRkKC4uLik7XHJcbiAqIGJpbGxib2FyZHMucmVtb3ZlKGIpOyAgLy8gUmV0dXJucyB0cnVlXHJcbiAqXHJcbiAqIEBzZWUgQmlsbGJvYXJkQ29sbGVjdGlvbiNhZGRcclxuICogQHNlZSBCaWxsYm9hcmRDb2xsZWN0aW9uI3JlbW92ZUFsbFxyXG4gKiBAc2VlIEJpbGxib2FyZCNzaG93XHJcbiAqL1xyXG5CaWxsYm9hcmRDb2xsZWN0aW9uLnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbiAoYmlsbGJvYXJkKSB7XHJcbiAgICBpZiAodGhpcy5jb250YWlucyhiaWxsYm9hcmQpKSB7XHJcbiAgICAgICAgdGhpcy5fYmlsbGJvYXJkc1tiaWxsYm9hcmQuX2luZGV4XSA9IHVuZGVmaW5lZDsgLy8gUmVtb3ZlZCBsYXRlclxyXG4gICAgICAgIHRoaXMuX2JpbGxib2FyZHNSZW1vdmVkID0gdHJ1ZTtcclxuICAgICAgICB0aGlzLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IHRydWU7XHJcbiAgICAgICAgYmlsbGJvYXJkLl9kZXN0cm95KCk7XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGZhbHNlO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlbW92ZXMgYWxsIGJpbGxib2FyZHMgZnJvbSB0aGUgY29sbGVjdGlvbi5cclxuICpcclxuICogQHBlcmZvcm1hbmNlIDxjb2RlPk8obik8L2NvZGU+LiAgSXQgaXMgbW9yZSBlZmZpY2llbnQgdG8gcmVtb3ZlIGFsbCB0aGUgYmlsbGJvYXJkc1xyXG4gKiBmcm9tIGEgY29sbGVjdGlvbiBhbmQgdGhlbiBhZGQgbmV3IG9uZXMgdGhhbiB0byBjcmVhdGUgYSBuZXcgY29sbGVjdGlvbiBlbnRpcmVseS5cclxuICpcclxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBiaWxsYm9hcmRzLmFkZCguLi4pO1xyXG4gKiBiaWxsYm9hcmRzLmFkZCguLi4pO1xyXG4gKiBiaWxsYm9hcmRzLnJlbW92ZUFsbCgpO1xyXG4gKlxyXG4gKiBAc2VlIEJpbGxib2FyZENvbGxlY3Rpb24jYWRkXHJcbiAqIEBzZWUgQmlsbGJvYXJkQ29sbGVjdGlvbiNyZW1vdmVcclxuICovXHJcbkJpbGxib2FyZENvbGxlY3Rpb24ucHJvdG90eXBlLnJlbW92ZUFsbCA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGRlc3Ryb3lCaWxsYm9hcmRzKHRoaXMuX2JpbGxib2FyZHMpO1xyXG4gICAgdGhpcy5fYmlsbGJvYXJkcyA9IFtdO1xyXG4gICAgdGhpcy5fYmlsbGJvYXJkc1RvVXBkYXRlID0gW107XHJcbiAgICB0aGlzLl9iaWxsYm9hcmRzVG9VcGRhdGVJbmRleCA9IDA7XHJcbiAgICB0aGlzLl9iaWxsYm9hcmRzUmVtb3ZlZCA9IGZhbHNlO1xyXG5cclxuICAgIHRoaXMuX2NyZWF0ZVZlcnRleEFycmF5ID0gdHJ1ZTtcclxufTtcclxuXHJcbmZ1bmN0aW9uIHJlbW92ZUJpbGxib2FyZHMoYmlsbGJvYXJkQ29sbGVjdGlvbikge1xyXG4gICAgaWYgKGJpbGxib2FyZENvbGxlY3Rpb24uX2JpbGxib2FyZHNSZW1vdmVkKSB7XHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fYmlsbGJvYXJkc1JlbW92ZWQgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgY29uc3QgbmV3QmlsbGJvYXJkcyA9IFtdO1xyXG4gICAgICAgIGNvbnN0IGJpbGxib2FyZHMgPSBiaWxsYm9hcmRDb2xsZWN0aW9uLl9iaWxsYm9hcmRzO1xyXG4gICAgICAgIGNvbnN0IGxlbmd0aCA9IGJpbGxib2FyZHMubGVuZ3RoO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwLCBqID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGJpbGxib2FyZCA9IGJpbGxib2FyZHNbaV07XHJcbiAgICAgICAgICAgIGlmIChkZWZpbmVkKGJpbGxib2FyZCkpIHtcclxuICAgICAgICAgICAgICAgIGJpbGxib2FyZC5faW5kZXggPSBqKys7XHJcbiAgICAgICAgICAgICAgICBuZXdCaWxsYm9hcmRzLnB1c2goYmlsbGJvYXJkKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fYmlsbGJvYXJkcyA9IG5ld0JpbGxib2FyZHM7XHJcbiAgICB9XHJcbn1cclxuXHJcbkJpbGxib2FyZENvbGxlY3Rpb24ucHJvdG90eXBlLl91cGRhdGVCaWxsYm9hcmQgPSBmdW5jdGlvbiAoXHJcbiAgICBiaWxsYm9hcmQsXHJcbiAgICBwcm9wZXJ0eUNoYW5nZWRcclxuKSB7XHJcbiAgICBpZiAoIWJpbGxib2FyZC5fZGlydHkpIHtcclxuICAgICAgICB0aGlzLl9iaWxsYm9hcmRzVG9VcGRhdGVbdGhpcy5fYmlsbGJvYXJkc1RvVXBkYXRlSW5kZXgrK10gPSBiaWxsYm9hcmQ7XHJcbiAgICB9XHJcblxyXG4gICAgKyt0aGlzLl9wcm9wZXJ0aWVzQ2hhbmdlZFtwcm9wZXJ0eUNoYW5nZWRdO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIENoZWNrIHdoZXRoZXIgdGhpcyBjb2xsZWN0aW9uIGNvbnRhaW5zIGEgZ2l2ZW4gYmlsbGJvYXJkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge0JpbGxib2FyZH0gW2JpbGxib2FyZF0gVGhlIGJpbGxib2FyZCB0byBjaGVjayBmb3IuXHJcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0cnVlIGlmIHRoaXMgY29sbGVjdGlvbiBjb250YWlucyB0aGUgYmlsbGJvYXJkLCBmYWxzZSBvdGhlcndpc2UuXHJcbiAqXHJcbiAqIEBzZWUgQmlsbGJvYXJkQ29sbGVjdGlvbiNnZXRcclxuICovXHJcbkJpbGxib2FyZENvbGxlY3Rpb24ucHJvdG90eXBlLmNvbnRhaW5zID0gZnVuY3Rpb24gKGJpbGxib2FyZCkge1xyXG4gICAgcmV0dXJuIGRlZmluZWQoYmlsbGJvYXJkKSAmJiBiaWxsYm9hcmQuX2JpbGxib2FyZENvbGxlY3Rpb24gPT09IHRoaXM7XHJcbn07XHJcblxyXG4vKipcclxuICogUmV0dXJucyB0aGUgYmlsbGJvYXJkIGluIHRoZSBjb2xsZWN0aW9uIGF0IHRoZSBzcGVjaWZpZWQgaW5kZXguICBJbmRpY2VzIGFyZSB6ZXJvLWJhc2VkXHJcbiAqIGFuZCBpbmNyZWFzZSBhcyBiaWxsYm9hcmRzIGFyZSBhZGRlZC4gIFJlbW92aW5nIGEgYmlsbGJvYXJkIHNoaWZ0cyBhbGwgYmlsbGJvYXJkcyBhZnRlclxyXG4gKiBpdCB0byB0aGUgbGVmdCwgY2hhbmdpbmcgdGhlaXIgaW5kaWNlcy4gIFRoaXMgZnVuY3Rpb24gaXMgY29tbW9ubHkgdXNlZCB3aXRoXHJcbiAqIHtAbGluayBCaWxsYm9hcmRDb2xsZWN0aW9uI2xlbmd0aH0gdG8gaXRlcmF0ZSBvdmVyIGFsbCB0aGUgYmlsbGJvYXJkc1xyXG4gKiBpbiB0aGUgY29sbGVjdGlvbi5cclxuICpcclxuICogQHBhcmFtIHtOdW1iZXJ9IGluZGV4IFRoZSB6ZXJvLWJhc2VkIGluZGV4IG9mIHRoZSBiaWxsYm9hcmQuXHJcbiAqIEByZXR1cm5zIHtCaWxsYm9hcmR9IFRoZSBiaWxsYm9hcmQgYXQgdGhlIHNwZWNpZmllZCBpbmRleC5cclxuICpcclxuICogQHBlcmZvcm1hbmNlIEV4cGVjdGVkIGNvbnN0YW50IHRpbWUuICBJZiBiaWxsYm9hcmRzIHdlcmUgcmVtb3ZlZCBmcm9tIHRoZSBjb2xsZWN0aW9uIGFuZFxyXG4gKiB7QGxpbmsgQmlsbGJvYXJkQ29sbGVjdGlvbiN1cGRhdGV9IHdhcyBub3QgY2FsbGVkLCBhbiBpbXBsaWNpdCA8Y29kZT5PKG4pPC9jb2RlPlxyXG4gKiBvcGVyYXRpb24gaXMgcGVyZm9ybWVkLlxyXG4gKlxyXG4gKiBAZXhjZXB0aW9uIHtEZXZlbG9wZXJFcnJvcn0gVGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZCwgaS5lLiwgZGVzdHJveSgpIHdhcyBjYWxsZWQuXHJcbiAqXHJcbiAqXHJcbiAqIEBleGFtcGxlXHJcbiAqIC8vIFRvZ2dsZSB0aGUgc2hvdyBwcm9wZXJ0eSBvZiBldmVyeSBiaWxsYm9hcmQgaW4gdGhlIGNvbGxlY3Rpb25cclxuICogY29uc3QgbGVuID0gYmlsbGJvYXJkcy5sZW5ndGg7XHJcbiAqIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyArK2kpIHtcclxuICogICBjb25zdCBiID0gYmlsbGJvYXJkcy5nZXQoaSk7XHJcbiAqICAgYi5zaG93ID0gIWIuc2hvdztcclxuICogfVxyXG4gKlxyXG4gKiBAc2VlIEJpbGxib2FyZENvbGxlY3Rpb24jbGVuZ3RoXHJcbiAqL1xyXG5CaWxsYm9hcmRDb2xsZWN0aW9uLnByb3RvdHlwZS5nZXQgPSBmdW5jdGlvbiAoaW5kZXgpIHtcclxuICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XHJcbiAgICBDaGVjay50eXBlT2YubnVtYmVyKFwiaW5kZXhcIiwgaW5kZXgpO1xyXG4gICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XHJcblxyXG4gICAgcmVtb3ZlQmlsbGJvYXJkcyh0aGlzKTtcclxuICAgIHJldHVybiB0aGlzLl9iaWxsYm9hcmRzW2luZGV4XTtcclxufTtcclxuXHJcbmxldCBnZXRJbmRleEJ1ZmZlcjtcclxuXHJcbmZ1bmN0aW9uIGdldEluZGV4QnVmZmVyQmF0Y2hlZChjb250ZXh0KSB7XHJcbiAgICBjb25zdCBzaXh0ZWVuSyA9IDE2ICogMTAyNDtcclxuXHJcbiAgICBsZXQgaW5kZXhCdWZmZXIgPSBjb250ZXh0LmNhY2hlLmJpbGxib2FyZENvbGxlY3Rpb25faW5kZXhCdWZmZXJCYXRjaGVkO1xyXG4gICAgaWYgKGRlZmluZWQoaW5kZXhCdWZmZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIGluZGV4QnVmZmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFN1YnRyYWN0IDYgYmVjYXVzZSB0aGUgbGFzdCBpbmRleCBpcyByZXNlcnZlcmQgZm9yIHByaW1pdGl2ZSByZXN0YXJ0LlxyXG4gICAgLy8gaHR0cHM6Ly93d3cua2hyb25vcy5vcmcvcmVnaXN0cnkvd2ViZ2wvc3BlY3MvbGF0ZXN0LzIuMC8jNS4xOFxyXG4gICAgY29uc3QgbGVuZ3RoID0gc2l4dGVlbksgKiA2IC0gNjtcclxuICAgIGNvbnN0IGluZGljZXMgPSBuZXcgVWludDE2QXJyYXkobGVuZ3RoKTtcclxuICAgIGZvciAobGV0IGkgPSAwLCBqID0gMDsgaSA8IGxlbmd0aDsgaSArPSA2LCBqICs9IDQpIHtcclxuICAgICAgICBpbmRpY2VzW2ldID0gajtcclxuICAgICAgICBpbmRpY2VzW2kgKyAxXSA9IGogKyAxO1xyXG4gICAgICAgIGluZGljZXNbaSArIDJdID0gaiArIDI7XHJcblxyXG4gICAgICAgIGluZGljZXNbaSArIDNdID0gaiArIDA7XHJcbiAgICAgICAgaW5kaWNlc1tpICsgNF0gPSBqICsgMjtcclxuICAgICAgICBpbmRpY2VzW2kgKyA1XSA9IGogKyAzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIFBFUkZPUk1BTkNFX0lERUE6ICBTaG91bGQgd2UgcmVmZXJlbmNlIGNvdW50IGJpbGxib2FyZCBjb2xsZWN0aW9ucywgYW5kIGV2ZW50dWFsbHkgZGVsZXRlIHRoaXM/XHJcbiAgICAvLyBJcyB0aGlzIHRvbyBtdWNoIG1lbW9yeSB0byBhbGxvY2F0ZSB1cCBmcm9udD8gIFNob3VsZCB3ZSBkeW5hbWljYWxseSBncm93IGl0P1xyXG4gICAgaW5kZXhCdWZmZXIgPSBCdWZmZXIuY3JlYXRlSW5kZXhCdWZmZXIoe1xyXG4gICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXHJcbiAgICAgICAgdHlwZWRBcnJheTogaW5kaWNlcyxcclxuICAgICAgICB1c2FnZTogQnVmZmVyVXNhZ2UuU1RBVElDX0RSQVcsXHJcbiAgICAgICAgaW5kZXhEYXRhdHlwZTogSW5kZXhEYXRhdHlwZS5VTlNJR05FRF9TSE9SVCxcclxuICAgIH0pO1xyXG4gICAgaW5kZXhCdWZmZXIudmVydGV4QXJyYXlEZXN0cm95YWJsZSA9IGZhbHNlO1xyXG4gICAgY29udGV4dC5jYWNoZS5iaWxsYm9hcmRDb2xsZWN0aW9uX2luZGV4QnVmZmVyQmF0Y2hlZCA9IGluZGV4QnVmZmVyO1xyXG4gICAgcmV0dXJuIGluZGV4QnVmZmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBnZXRJbmRleEJ1ZmZlckluc3RhbmNlZChjb250ZXh0KSB7XHJcbiAgICBsZXQgaW5kZXhCdWZmZXIgPSBjb250ZXh0LmNhY2hlLmJpbGxib2FyZENvbGxlY3Rpb25faW5kZXhCdWZmZXJJbnN0YW5jZWQ7XHJcbiAgICBpZiAoZGVmaW5lZChpbmRleEJ1ZmZlcikpIHtcclxuICAgICAgICByZXR1cm4gaW5kZXhCdWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgaW5kZXhCdWZmZXIgPSBCdWZmZXIuY3JlYXRlSW5kZXhCdWZmZXIoe1xyXG4gICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXHJcbiAgICAgICAgdHlwZWRBcnJheTogbmV3IFVpbnQxNkFycmF5KFswLCAxLCAyLCAwLCAyLCAzXSksXHJcbiAgICAgICAgdXNhZ2U6IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLFxyXG4gICAgICAgIGluZGV4RGF0YXR5cGU6IEluZGV4RGF0YXR5cGUuVU5TSUdORURfU0hPUlQsXHJcbiAgICB9KTtcclxuXHJcbiAgICBpbmRleEJ1ZmZlci52ZXJ0ZXhBcnJheURlc3Ryb3lhYmxlID0gZmFsc2U7XHJcbiAgICBjb250ZXh0LmNhY2hlLmJpbGxib2FyZENvbGxlY3Rpb25faW5kZXhCdWZmZXJJbnN0YW5jZWQgPSBpbmRleEJ1ZmZlcjtcclxuICAgIHJldHVybiBpbmRleEJ1ZmZlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gZ2V0VmVydGV4QnVmZmVySW5zdGFuY2VkKGNvbnRleHQpIHtcclxuICAgIGxldCB2ZXJ0ZXhCdWZmZXIgPSBjb250ZXh0LmNhY2hlLmJpbGxib2FyZENvbGxlY3Rpb25fdmVydGV4QnVmZmVySW5zdGFuY2VkO1xyXG4gICAgaWYgKGRlZmluZWQodmVydGV4QnVmZmVyKSkge1xyXG4gICAgICAgIHJldHVybiB2ZXJ0ZXhCdWZmZXI7XHJcbiAgICB9XHJcblxyXG4gICAgdmVydGV4QnVmZmVyID0gQnVmZmVyLmNyZWF0ZVZlcnRleEJ1ZmZlcih7XHJcbiAgICAgICAgY29udGV4dDogY29udGV4dCxcclxuICAgICAgICB0eXBlZEFycmF5OiBuZXcgRmxvYXQzMkFycmF5KFswLjAsIDAuMCwgMS4wLCAwLjAsIDEuMCwgMS4wLCAwLjAsIDEuMF0pLFxyXG4gICAgICAgIHVzYWdlOiBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVyxcclxuICAgIH0pO1xyXG5cclxuICAgIHZlcnRleEJ1ZmZlci52ZXJ0ZXhBcnJheURlc3Ryb3lhYmxlID0gZmFsc2U7XHJcbiAgICBjb250ZXh0LmNhY2hlLmJpbGxib2FyZENvbGxlY3Rpb25fdmVydGV4QnVmZmVySW5zdGFuY2VkID0gdmVydGV4QnVmZmVyO1xyXG4gICAgcmV0dXJuIHZlcnRleEJ1ZmZlcjtcclxufVxyXG5cclxuQmlsbGJvYXJkQ29sbGVjdGlvbi5wcm90b3R5cGUuY29tcHV0ZU5ld0J1ZmZlcnNVc2FnZSA9IGZ1bmN0aW9uICgpIHtcclxuICAgIGNvbnN0IGJ1ZmZlcnNVc2FnZSA9IHRoaXMuX2J1ZmZlcnNVc2FnZTtcclxuICAgIGxldCB1c2FnZUNoYW5nZWQgPSBmYWxzZTtcclxuXHJcbiAgICBjb25zdCBwcm9wZXJ0aWVzID0gdGhpcy5fcHJvcGVydGllc0NoYW5nZWQ7XHJcbiAgICBmb3IgKGxldCBrID0gMDsgayA8IE5VTUJFUl9PRl9QUk9QRVJUSUVTOyArK2spIHtcclxuICAgICAgICBjb25zdCBuZXdVc2FnZSA9XHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNba10gPT09IDAgPyBCdWZmZXJVc2FnZS5TVEFUSUNfRFJBVyA6IEJ1ZmZlclVzYWdlLlNUUkVBTV9EUkFXO1xyXG4gICAgICAgIHVzYWdlQ2hhbmdlZCA9IHVzYWdlQ2hhbmdlZCB8fCBidWZmZXJzVXNhZ2Vba10gIT09IG5ld1VzYWdlO1xyXG4gICAgICAgIGJ1ZmZlcnNVc2FnZVtrXSA9IG5ld1VzYWdlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB1c2FnZUNoYW5nZWQ7XHJcbn07XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVWQUYoXHJcbiAgICBjb250ZXh0LFxyXG4gICAgbnVtYmVyT2ZCaWxsYm9hcmRzLFxyXG4gICAgYnVmZmVyc1VzYWdlLFxyXG4gICAgaW5zdGFuY2VkLFxyXG4gICAgYmF0Y2hUYWJsZSxcclxuICAgIHNkZlxyXG4pIHtcclxuICAgIGNvbnN0IGF0dHJpYnV0ZXMgPSBbXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLnBvc2l0aW9uSGlnaEFuZFNjYWxlLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiA0LFxyXG4gICAgICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXHJcbiAgICAgICAgICAgIHVzYWdlOiBidWZmZXJzVXNhZ2VbUE9TSVRJT05fSU5ERVhdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLnBvc2l0aW9uTG93QW5kUm90YXRpb24sXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDQsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcclxuICAgICAgICAgICAgdXNhZ2U6IGJ1ZmZlcnNVc2FnZVtQT1NJVElPTl9JTkRFWF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMuY29tcHJlc3NlZEF0dHJpYnV0ZTAsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDQsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcclxuICAgICAgICAgICAgdXNhZ2U6IGJ1ZmZlcnNVc2FnZVtQSVhFTF9PRkZTRVRfSU5ERVhdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLmNvbXByZXNzZWRBdHRyaWJ1dGUxLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiA0LFxyXG4gICAgICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXHJcbiAgICAgICAgICAgIHVzYWdlOiBidWZmZXJzVXNhZ2VbVFJBTlNMVUNFTkNZX0JZX0RJU1RBTkNFX0lOREVYXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy5jb21wcmVzc2VkQXR0cmlidXRlMixcclxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogNCxcclxuICAgICAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxyXG4gICAgICAgICAgICB1c2FnZTogYnVmZmVyc1VzYWdlW0NPTE9SX0lOREVYXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy5leWVPZmZzZXQsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDQsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcclxuICAgICAgICAgICAgdXNhZ2U6IGJ1ZmZlcnNVc2FnZVtFWUVfT0ZGU0VUX0lOREVYXSxcclxuICAgICAgICB9LFxyXG4gICAgICAgIHtcclxuICAgICAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy5zY2FsZUJ5RGlzdGFuY2UsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDQsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcclxuICAgICAgICAgICAgdXNhZ2U6IGJ1ZmZlcnNVc2FnZVtTQ0FMRV9CWV9ESVNUQU5DRV9JTkRFWF0sXHJcbiAgICAgICAgfSxcclxuICAgICAgICB7XHJcbiAgICAgICAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMucGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2UsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDQsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcclxuICAgICAgICAgICAgdXNhZ2U6IGJ1ZmZlcnNVc2FnZVtQSVhFTF9PRkZTRVRfU0NBTEVfQllfRElTVEFOQ0VfSU5ERVhdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLmNvbXByZXNzZWRBdHRyaWJ1dGUzLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiA0LFxyXG4gICAgICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXHJcbiAgICAgICAgICAgIHVzYWdlOiBidWZmZXJzVXNhZ2VbRElTVEFOQ0VfRElTUExBWV9DT05ESVRJT05fSU5ERVhdLFxyXG4gICAgICAgIH0sXHJcbiAgICAgICAge1xyXG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLnRleHR1cmVDb29yZGluYXRlQm91bmRzT3JMYWJlbFRyYW5zbGF0ZSxcclxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogNCxcclxuICAgICAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxyXG4gICAgICAgICAgICB1c2FnZTogYnVmZmVyc1VzYWdlW1RFWFRVUkVfQ09PUkRJTkFURV9CT1VORFNdLFxyXG4gICAgICAgIH0sXHJcbiAgICBdO1xyXG5cclxuICAgIC8vIEluc3RhbmNpbmcgcmVxdWlyZXMgb25lIG5vbi1pbnN0YW5jZWQgYXR0cmlidXRlLlxyXG4gICAgaWYgKGluc3RhbmNlZCkge1xyXG4gICAgICAgIGF0dHJpYnV0ZXMucHVzaCh7XHJcbiAgICAgICAgICAgIGluZGV4OiBhdHRyaWJ1dGVMb2NhdGlvbnMuZGlyZWN0aW9uLFxyXG4gICAgICAgICAgICBjb21wb25lbnRzUGVyQXR0cmlidXRlOiAyLFxyXG4gICAgICAgICAgICBjb21wb25lbnREYXRhdHlwZTogQ29tcG9uZW50RGF0YXR5cGUuRkxPQVQsXHJcbiAgICAgICAgICAgIHZlcnRleEJ1ZmZlcjogZ2V0VmVydGV4QnVmZmVySW5zdGFuY2VkKGNvbnRleHQpLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChkZWZpbmVkKGJhdGNoVGFibGUpKSB7XHJcbiAgICAgICAgYXR0cmlidXRlcy5wdXNoKHtcclxuICAgICAgICAgICAgaW5kZXg6IGF0dHJpYnV0ZUxvY2F0aW9ucy5hX2JhdGNoSWQsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudHNQZXJBdHRyaWJ1dGU6IDEsXHJcbiAgICAgICAgICAgIGNvbXBvbmVudERhdGF0eXBlOiBDb21wb25lbnREYXRhdHlwZS5GTE9BVCxcclxuICAgICAgICAgICAgYnVmZmVyVXNhZ2U6IEJ1ZmZlclVzYWdlLlNUQVRJQ19EUkFXLFxyXG4gICAgICAgIH0pO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChzZGYpIHtcclxuICAgICAgICBhdHRyaWJ1dGVzLnB1c2goe1xyXG4gICAgICAgICAgICBpbmRleDogYXR0cmlidXRlTG9jYXRpb25zLnNkZixcclxuICAgICAgICAgICAgY29tcG9uZW50c1BlckF0dHJpYnV0ZTogMixcclxuICAgICAgICAgICAgY29tcG9uZW50RGF0YXR5cGU6IENvbXBvbmVudERhdGF0eXBlLkZMT0FULFxyXG4gICAgICAgICAgICB1c2FnZTogYnVmZmVyc1VzYWdlW1NERl9JTkRFWF0sXHJcbiAgICAgICAgfSk7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gV2hlbiBpbnN0YW5jaW5nIGlzIGVuYWJsZWQsIG9ubHkgb25lIHZlcnRleCBpcyBuZWVkZWQgZm9yIGVhY2ggYmlsbGJvYXJkLlxyXG4gICAgY29uc3Qgc2l6ZUluVmVydGljZXMgPSBpbnN0YW5jZWRcclxuICAgICAgICA/IG51bWJlck9mQmlsbGJvYXJkc1xyXG4gICAgICAgIDogNCAqIG51bWJlck9mQmlsbGJvYXJkcztcclxuICAgIHJldHVybiBuZXcgVmVydGV4QXJyYXlGYWNhZGUoY29udGV4dCwgYXR0cmlidXRlcywgc2l6ZUluVmVydGljZXMsIGluc3RhbmNlZCk7XHJcbn1cclxuXHJcbi8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vLy8vL1xyXG5cclxuLy8gRm91ciB2ZXJ0aWNlcyBwZXIgYmlsbGJvYXJkLiAgRWFjaCBoYXMgdGhlIHNhbWUgcG9zaXRpb24sIGV0Yy4sIGJ1dCBhIGRpZmZlcmVudCBzY3JlZW4tc3BhY2UgZGlyZWN0aW9uIHZlY3Rvci5cclxuXHJcbi8vIFBFUkZPUk1BTkNFX0lERUE6ICBTYXZlIG1lbW9yeSBpZiBhIHByb3BlcnR5IGlzIHRoZSBzYW1lIGZvciBhbGwgYmlsbGJvYXJkcywgdXNlIGEgbGF0Y2hlZCBhdHRyaWJ1dGUgc3RhdGUsXHJcbi8vIGluc3RlYWQgb2Ygc3RvcmluZyBpdCBpbiBhIHZlcnRleCBidWZmZXIuXHJcblxyXG5jb25zdCB3cml0ZVBvc2l0aW9uU2NyYXRjaCA9IG5ldyBFbmNvZGVkQ2FydGVzaWFuMygpO1xyXG5cclxuZnVuY3Rpb24gd3JpdGVQb3NpdGlvblNjYWxlQW5kUm90YXRpb24oXHJcbiAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLFxyXG4gICAgZnJhbWVTdGF0ZSxcclxuICAgIHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLFxyXG4gICAgdmFmV3JpdGVycyxcclxuICAgIGJpbGxib2FyZFxyXG4pIHtcclxuICAgIGxldCBpO1xyXG4gICAgY29uc3QgcG9zaXRpb25IaWdoV3JpdGVyID1cclxuICAgICAgICB2YWZXcml0ZXJzW2F0dHJpYnV0ZUxvY2F0aW9ucy5wb3NpdGlvbkhpZ2hBbmRTY2FsZV07XHJcbiAgICBjb25zdCBwb3NpdGlvbkxvd1dyaXRlciA9XHJcbiAgICAgICAgdmFmV3JpdGVyc1thdHRyaWJ1dGVMb2NhdGlvbnMucG9zaXRpb25Mb3dBbmRSb3RhdGlvbl07XHJcbiAgICBjb25zdCBwb3NpdGlvbiA9IGJpbGxib2FyZC5fZ2V0QWN0dWFsUG9zaXRpb24oKTtcclxuXHJcbiAgICBpZiAoYmlsbGJvYXJkQ29sbGVjdGlvbi5fbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0QpIHtcclxuICAgICAgICBCb3VuZGluZ1NwaGVyZS5leHBhbmQoXHJcbiAgICAgICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24uX2Jhc2VWb2x1bWUsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uLFxyXG4gICAgICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9iYXNlVm9sdW1lXHJcbiAgICAgICAgKTtcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9ib3VuZGluZ1ZvbHVtZURpcnR5ID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBFbmNvZGVkQ2FydGVzaWFuMy5mcm9tQ2FydGVzaWFuKHBvc2l0aW9uLCB3cml0ZVBvc2l0aW9uU2NyYXRjaCk7XHJcbiAgICBjb25zdCBzY2FsZSA9IGJpbGxib2FyZC5zY2FsZTtcclxuICAgIGNvbnN0IHJvdGF0aW9uID0gYmlsbGJvYXJkLnJvdGF0aW9uO1xyXG5cclxuICAgIGlmIChyb3RhdGlvbiAhPT0gMC4wKSB7XHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fc2hhZGVyUm90YXRpb24gPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIGJpbGxib2FyZENvbGxlY3Rpb24uX21heFNjYWxlID0gTWF0aC5tYXgoXHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fbWF4U2NhbGUsXHJcbiAgICAgICAgc2NhbGVcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgaGlnaCA9IHdyaXRlUG9zaXRpb25TY3JhdGNoLmhpZ2g7XHJcbiAgICBjb25zdCBsb3cgPSB3cml0ZVBvc2l0aW9uU2NyYXRjaC5sb3c7XHJcblxyXG4gICAgaWYgKGJpbGxib2FyZENvbGxlY3Rpb24uX2luc3RhbmNlZCkge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4O1xyXG4gICAgICAgIHBvc2l0aW9uSGlnaFdyaXRlcihpLCBoaWdoLngsIGhpZ2gueSwgaGlnaC56LCBzY2FsZSk7XHJcbiAgICAgICAgcG9zaXRpb25Mb3dXcml0ZXIoaSwgbG93LngsIGxvdy55LCBsb3cueiwgcm90YXRpb24pO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpID0gYmlsbGJvYXJkLl9pbmRleCAqIDQ7XHJcbiAgICAgICAgcG9zaXRpb25IaWdoV3JpdGVyKGkgKyAwLCBoaWdoLngsIGhpZ2gueSwgaGlnaC56LCBzY2FsZSk7XHJcbiAgICAgICAgcG9zaXRpb25IaWdoV3JpdGVyKGkgKyAxLCBoaWdoLngsIGhpZ2gueSwgaGlnaC56LCBzY2FsZSk7XHJcbiAgICAgICAgcG9zaXRpb25IaWdoV3JpdGVyKGkgKyAyLCBoaWdoLngsIGhpZ2gueSwgaGlnaC56LCBzY2FsZSk7XHJcbiAgICAgICAgcG9zaXRpb25IaWdoV3JpdGVyKGkgKyAzLCBoaWdoLngsIGhpZ2gueSwgaGlnaC56LCBzY2FsZSk7XHJcblxyXG4gICAgICAgIHBvc2l0aW9uTG93V3JpdGVyKGkgKyAwLCBsb3cueCwgbG93LnksIGxvdy56LCByb3RhdGlvbik7XHJcbiAgICAgICAgcG9zaXRpb25Mb3dXcml0ZXIoaSArIDEsIGxvdy54LCBsb3cueSwgbG93LnosIHJvdGF0aW9uKTtcclxuICAgICAgICBwb3NpdGlvbkxvd1dyaXRlcihpICsgMiwgbG93LngsIGxvdy55LCBsb3cueiwgcm90YXRpb24pO1xyXG4gICAgICAgIHBvc2l0aW9uTG93V3JpdGVyKGkgKyAzLCBsb3cueCwgbG93LnksIGxvdy56LCByb3RhdGlvbik7XHJcbiAgICB9XHJcbn1cclxuXHJcbmNvbnN0IHNjcmF0Y2hDYXJ0ZXNpYW4yID0gbmV3IENhcnRlc2lhbjIoKTtcclxuXHJcbmNvbnN0IFVQUEVSX0JPVU5EID0gMzI3NjguMDsgLy8gMl4xNVxyXG5cclxuY29uc3QgTEVGVF9TSElGVDE2ID0gNjU1MzYuMDsgLy8gMl4xNlxyXG5jb25zdCBMRUZUX1NISUZUMTIgPSA0MDk2LjA7IC8vIDJeMTJcclxuY29uc3QgTEVGVF9TSElGVDggPSAyNTYuMDsgLy8gMl44XHJcbmNvbnN0IExFRlRfU0hJRlQ3ID0gMTI4LjA7XHJcbmNvbnN0IExFRlRfU0hJRlQ1ID0gMzIuMDtcclxuY29uc3QgTEVGVF9TSElGVDMgPSA4LjA7XHJcbmNvbnN0IExFRlRfU0hJRlQyID0gNC4wO1xyXG5cclxuY29uc3QgUklHSFRfU0hJRlQ4ID0gMS4wIC8gMjU2LjA7XHJcblxyXG5jb25zdCBMT1dFUl9MRUZUID0gMC4wO1xyXG5jb25zdCBMT1dFUl9SSUdIVCA9IDIuMDtcclxuY29uc3QgVVBQRVJfUklHSFQgPSAzLjA7XHJcbmNvbnN0IFVQUEVSX0xFRlQgPSAxLjA7XHJcblxyXG5mdW5jdGlvbiB3cml0ZUNvbXByZXNzZWRBdHRyaWIwKFxyXG4gICAgYmlsbGJvYXJkQ29sbGVjdGlvbixcclxuICAgIGZyYW1lU3RhdGUsXHJcbiAgICB0ZXh0dXJlQXRsYXNDb29yZGluYXRlcyxcclxuICAgIHZhZldyaXRlcnMsXHJcbiAgICBiaWxsYm9hcmRcclxuKSB7XHJcbiAgICBsZXQgaTtcclxuICAgIGNvbnN0IHdyaXRlciA9IHZhZldyaXRlcnNbYXR0cmlidXRlTG9jYXRpb25zLmNvbXByZXNzZWRBdHRyaWJ1dGUwXTtcclxuICAgIGNvbnN0IHBpeGVsT2Zmc2V0ID0gYmlsbGJvYXJkLnBpeGVsT2Zmc2V0O1xyXG4gICAgY29uc3QgcGl4ZWxPZmZzZXRYID0gcGl4ZWxPZmZzZXQueDtcclxuICAgIGNvbnN0IHBpeGVsT2Zmc2V0WSA9IHBpeGVsT2Zmc2V0Lnk7XHJcblxyXG4gICAgY29uc3QgdHJhbnNsYXRlID0gYmlsbGJvYXJkLl90cmFuc2xhdGU7XHJcbiAgICBjb25zdCB0cmFuc2xhdGVYID0gdHJhbnNsYXRlLng7XHJcbiAgICBjb25zdCB0cmFuc2xhdGVZID0gdHJhbnNsYXRlLnk7XHJcblxyXG4gICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fbWF4UGl4ZWxPZmZzZXQgPSBNYXRoLm1heChcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9tYXhQaXhlbE9mZnNldCxcclxuICAgICAgICBNYXRoLmFicyhwaXhlbE9mZnNldFggKyB0cmFuc2xhdGVYKSxcclxuICAgICAgICBNYXRoLmFicygtcGl4ZWxPZmZzZXRZICsgdHJhbnNsYXRlWSlcclxuICAgICk7XHJcblxyXG4gICAgY29uc3QgaG9yaXpvbnRhbE9yaWdpbiA9IGJpbGxib2FyZC5ob3Jpem9udGFsT3JpZ2luO1xyXG4gICAgbGV0IHZlcnRpY2FsT3JpZ2luID0gYmlsbGJvYXJkLl92ZXJ0aWNhbE9yaWdpbjtcclxuICAgIGxldCBzaG93ID0gYmlsbGJvYXJkLnNob3cgJiYgYmlsbGJvYXJkLmNsdXN0ZXJTaG93O1xyXG5cclxuICAgIC8vIElmIHRoZSBjb2xvciBhbHBoYSBpcyB6ZXJvLCBkbyBub3Qgc2hvdyB0aGlzIGJpbGxib2FyZC4gIFRoaXMgbGV0cyB1cyBhdm9pZCBwcm92aWRpbmdcclxuICAgIC8vIGNvbG9yIGR1cmluZyB0aGUgcGljayBwYXNzIGFuZCBhbHNvIGVsaW1pbmF0ZXMgYSBkaXNjYXJkIGluIHRoZSBmcmFnbWVudCBzaGFkZXIuXHJcbiAgICBpZiAoYmlsbGJvYXJkLmNvbG9yLmFscGhhID09PSAwLjApIHtcclxuICAgICAgICBzaG93ID0gZmFsc2U7XHJcbiAgICB9XHJcblxyXG4gICAgLy8gUmF3IGJpbGxib2FyZHMgZG9uJ3QgZGlzdGluZ3Vpc2ggYmV0d2VlbiBCQVNFTElORSBhbmQgQk9UVE9NLCBvbmx5IExhYmVsQ29sbGVjdGlvbiBkb2VzIHRoYXQuXHJcbiAgICBpZiAodmVydGljYWxPcmlnaW4gPT09IFZlcnRpY2FsT3JpZ2luLkJBU0VMSU5FKSB7XHJcbiAgICAgICAgdmVydGljYWxPcmlnaW4gPSBWZXJ0aWNhbE9yaWdpbi5CT1RUT007XHJcbiAgICB9XHJcblxyXG4gICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fYWxsSG9yaXpvbnRhbENlbnRlciA9XHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fYWxsSG9yaXpvbnRhbENlbnRlciAmJlxyXG4gICAgICAgIGhvcml6b250YWxPcmlnaW4gPT09IEhvcml6b250YWxPcmlnaW4uQ0VOVEVSO1xyXG4gICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fYWxsVmVydGljYWxDZW50ZXIgPVxyXG4gICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24uX2FsbFZlcnRpY2FsQ2VudGVyICYmXHJcbiAgICAgICAgdmVydGljYWxPcmlnaW4gPT09IFZlcnRpY2FsT3JpZ2luLkNFTlRFUjtcclxuXHJcbiAgICBsZXQgYm90dG9tTGVmdFggPSAwO1xyXG4gICAgbGV0IGJvdHRvbUxlZnRZID0gMDtcclxuICAgIGxldCB3aWR0aCA9IDA7XHJcbiAgICBsZXQgaGVpZ2h0ID0gMDtcclxuICAgIGNvbnN0IGluZGV4ID0gYmlsbGJvYXJkLl9pbWFnZUluZGV4O1xyXG4gICAgaWYgKGluZGV4ICE9PSAtMSkge1xyXG4gICAgICAgIGNvbnN0IGltYWdlUmVjdGFuZ2xlID0gdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXNbaW5kZXhdO1xyXG5cclxuICAgICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xyXG4gICAgICAgIGlmICghZGVmaW5lZChpbWFnZVJlY3RhbmdsZSkpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKGBJbnZhbGlkIGJpbGxib2FyZCBpbWFnZSBpbmRleDogJHtpbmRleH1gKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XHJcblxyXG4gICAgICAgIGJvdHRvbUxlZnRYID0gaW1hZ2VSZWN0YW5nbGUueDtcclxuICAgICAgICBib3R0b21MZWZ0WSA9IGltYWdlUmVjdGFuZ2xlLnk7XHJcbiAgICAgICAgd2lkdGggPSBpbWFnZVJlY3RhbmdsZS53aWR0aDtcclxuICAgICAgICBoZWlnaHQgPSBpbWFnZVJlY3RhbmdsZS5oZWlnaHQ7XHJcbiAgICB9XHJcbiAgICBjb25zdCB0b3BSaWdodFggPSBib3R0b21MZWZ0WCArIHdpZHRoO1xyXG4gICAgY29uc3QgdG9wUmlnaHRZID0gYm90dG9tTGVmdFkgKyBoZWlnaHQ7XHJcblxyXG4gICAgbGV0IGNvbXByZXNzZWQwID1cclxuICAgICAgICBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgICBDZXNpdW1NYXRoLmNsYW1wKHBpeGVsT2Zmc2V0WCwgLVVQUEVSX0JPVU5ELCBVUFBFUl9CT1VORCkgKyBVUFBFUl9CT1VORFxyXG4gICAgICAgICkgKiBMRUZUX1NISUZUNztcclxuICAgIGNvbXByZXNzZWQwICs9IChob3Jpem9udGFsT3JpZ2luICsgMS4wKSAqIExFRlRfU0hJRlQ1O1xyXG4gICAgY29tcHJlc3NlZDAgKz0gKHZlcnRpY2FsT3JpZ2luICsgMS4wKSAqIExFRlRfU0hJRlQzO1xyXG4gICAgY29tcHJlc3NlZDAgKz0gKHNob3cgPyAxLjAgOiAwLjApICogTEVGVF9TSElGVDI7XHJcblxyXG4gICAgbGV0IGNvbXByZXNzZWQxID1cclxuICAgICAgICBNYXRoLmZsb29yKFxyXG4gICAgICAgICAgICBDZXNpdW1NYXRoLmNsYW1wKHBpeGVsT2Zmc2V0WSwgLVVQUEVSX0JPVU5ELCBVUFBFUl9CT1VORCkgKyBVUFBFUl9CT1VORFxyXG4gICAgICAgICkgKiBMRUZUX1NISUZUODtcclxuICAgIGxldCBjb21wcmVzc2VkMiA9XHJcbiAgICAgICAgTWF0aC5mbG9vcihcclxuICAgICAgICAgICAgQ2VzaXVtTWF0aC5jbGFtcCh0cmFuc2xhdGVYLCAtVVBQRVJfQk9VTkQsIFVQUEVSX0JPVU5EKSArIFVQUEVSX0JPVU5EXHJcbiAgICAgICAgKSAqIExFRlRfU0hJRlQ4O1xyXG5cclxuICAgIGNvbnN0IHRlbXBUYW5zbGF0ZVkgPVxyXG4gICAgICAgIChDZXNpdW1NYXRoLmNsYW1wKHRyYW5zbGF0ZVksIC1VUFBFUl9CT1VORCwgVVBQRVJfQk9VTkQpICsgVVBQRVJfQk9VTkQpICpcclxuICAgICAgICBSSUdIVF9TSElGVDg7XHJcbiAgICBjb25zdCB1cHBlclRyYW5zbGF0ZVkgPSBNYXRoLmZsb29yKHRlbXBUYW5zbGF0ZVkpO1xyXG4gICAgY29uc3QgbG93ZXJUcmFuc2xhdGVZID0gTWF0aC5mbG9vcihcclxuICAgICAgICAodGVtcFRhbnNsYXRlWSAtIHVwcGVyVHJhbnNsYXRlWSkgKiBMRUZUX1NISUZUOFxyXG4gICAgKTtcclxuXHJcbiAgICBjb21wcmVzc2VkMSArPSB1cHBlclRyYW5zbGF0ZVk7XHJcbiAgICBjb21wcmVzc2VkMiArPSBsb3dlclRyYW5zbGF0ZVk7XHJcblxyXG4gICAgc2NyYXRjaENhcnRlc2lhbjIueCA9IGJvdHRvbUxlZnRYO1xyXG4gICAgc2NyYXRjaENhcnRlc2lhbjIueSA9IGJvdHRvbUxlZnRZO1xyXG4gICAgY29uc3QgY29tcHJlc3NlZFRleENvb3Jkc0xMID0gQXR0cmlidXRlQ29tcHJlc3Npb24uY29tcHJlc3NUZXh0dXJlQ29vcmRpbmF0ZXMoXHJcbiAgICAgICAgc2NyYXRjaENhcnRlc2lhbjJcclxuICAgICk7XHJcbiAgICBzY3JhdGNoQ2FydGVzaWFuMi54ID0gdG9wUmlnaHRYO1xyXG4gICAgY29uc3QgY29tcHJlc3NlZFRleENvb3Jkc0xSID0gQXR0cmlidXRlQ29tcHJlc3Npb24uY29tcHJlc3NUZXh0dXJlQ29vcmRpbmF0ZXMoXHJcbiAgICAgICAgc2NyYXRjaENhcnRlc2lhbjJcclxuICAgICk7XHJcbiAgICBzY3JhdGNoQ2FydGVzaWFuMi55ID0gdG9wUmlnaHRZO1xyXG4gICAgY29uc3QgY29tcHJlc3NlZFRleENvb3Jkc1VSID0gQXR0cmlidXRlQ29tcHJlc3Npb24uY29tcHJlc3NUZXh0dXJlQ29vcmRpbmF0ZXMoXHJcbiAgICAgICAgc2NyYXRjaENhcnRlc2lhbjJcclxuICAgICk7XHJcbiAgICBzY3JhdGNoQ2FydGVzaWFuMi54ID0gYm90dG9tTGVmdFg7XHJcbiAgICBjb25zdCBjb21wcmVzc2VkVGV4Q29vcmRzVUwgPSBBdHRyaWJ1dGVDb21wcmVzc2lvbi5jb21wcmVzc1RleHR1cmVDb29yZGluYXRlcyhcclxuICAgICAgICBzY3JhdGNoQ2FydGVzaWFuMlxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoYmlsbGJvYXJkQ29sbGVjdGlvbi5faW5zdGFuY2VkKSB7XHJcbiAgICAgICAgaSA9IGJpbGxib2FyZC5faW5kZXg7XHJcbiAgICAgICAgd3JpdGVyKGksIGNvbXByZXNzZWQwLCBjb21wcmVzc2VkMSwgY29tcHJlc3NlZDIsIGNvbXByZXNzZWRUZXhDb29yZHNMTCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4ICogNDtcclxuICAgICAgICB3cml0ZXIoXHJcbiAgICAgICAgICAgIGkgKyAwLFxyXG4gICAgICAgICAgICBjb21wcmVzc2VkMCArIExPV0VSX0xFRlQsXHJcbiAgICAgICAgICAgIGNvbXByZXNzZWQxLFxyXG4gICAgICAgICAgICBjb21wcmVzc2VkMixcclxuICAgICAgICAgICAgY29tcHJlc3NlZFRleENvb3Jkc0xMXHJcbiAgICAgICAgKTtcclxuICAgICAgICB3cml0ZXIoXHJcbiAgICAgICAgICAgIGkgKyAxLFxyXG4gICAgICAgICAgICBjb21wcmVzc2VkMCArIExPV0VSX1JJR0hULFxyXG4gICAgICAgICAgICBjb21wcmVzc2VkMSxcclxuICAgICAgICAgICAgY29tcHJlc3NlZDIsXHJcbiAgICAgICAgICAgIGNvbXByZXNzZWRUZXhDb29yZHNMUlxyXG4gICAgICAgICk7XHJcbiAgICAgICAgd3JpdGVyKFxyXG4gICAgICAgICAgICBpICsgMixcclxuICAgICAgICAgICAgY29tcHJlc3NlZDAgKyBVUFBFUl9SSUdIVCxcclxuICAgICAgICAgICAgY29tcHJlc3NlZDEsXHJcbiAgICAgICAgICAgIGNvbXByZXNzZWQyLFxyXG4gICAgICAgICAgICBjb21wcmVzc2VkVGV4Q29vcmRzVVJcclxuICAgICAgICApO1xyXG4gICAgICAgIHdyaXRlcihcclxuICAgICAgICAgICAgaSArIDMsXHJcbiAgICAgICAgICAgIGNvbXByZXNzZWQwICsgVVBQRVJfTEVGVCxcclxuICAgICAgICAgICAgY29tcHJlc3NlZDEsXHJcbiAgICAgICAgICAgIGNvbXByZXNzZWQyLFxyXG4gICAgICAgICAgICBjb21wcmVzc2VkVGV4Q29vcmRzVUxcclxuICAgICAgICApO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB3cml0ZUNvbXByZXNzZWRBdHRyaWIxKFxyXG4gICAgYmlsbGJvYXJkQ29sbGVjdGlvbixcclxuICAgIGZyYW1lU3RhdGUsXHJcbiAgICB0ZXh0dXJlQXRsYXNDb29yZGluYXRlcyxcclxuICAgIHZhZldyaXRlcnMsXHJcbiAgICBiaWxsYm9hcmRcclxuKSB7XHJcbiAgICBsZXQgaTtcclxuICAgIGNvbnN0IHdyaXRlciA9IHZhZldyaXRlcnNbYXR0cmlidXRlTG9jYXRpb25zLmNvbXByZXNzZWRBdHRyaWJ1dGUxXTtcclxuICAgIGNvbnN0IGFsaWduZWRBeGlzID0gYmlsbGJvYXJkLmFsaWduZWRBeGlzO1xyXG4gICAgaWYgKCFDYXJ0ZXNpYW4zLmVxdWFscyhhbGlnbmVkQXhpcywgQ2FydGVzaWFuMy5aRVJPKSkge1xyXG4gICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24uX3NoYWRlckFsaWduZWRBeGlzID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgbmVhciA9IDAuMDtcclxuICAgIGxldCBuZWFyVmFsdWUgPSAxLjA7XHJcbiAgICBsZXQgZmFyID0gMS4wO1xyXG4gICAgbGV0IGZhclZhbHVlID0gMS4wO1xyXG5cclxuICAgIGNvbnN0IHRyYW5zbHVjZW5jeSA9IGJpbGxib2FyZC50cmFuc2x1Y2VuY3lCeURpc3RhbmNlO1xyXG4gICAgaWYgKGRlZmluZWQodHJhbnNsdWNlbmN5KSkge1xyXG4gICAgICAgIG5lYXIgPSB0cmFuc2x1Y2VuY3kubmVhcjtcclxuICAgICAgICBuZWFyVmFsdWUgPSB0cmFuc2x1Y2VuY3kubmVhclZhbHVlO1xyXG4gICAgICAgIGZhciA9IHRyYW5zbHVjZW5jeS5mYXI7XHJcbiAgICAgICAgZmFyVmFsdWUgPSB0cmFuc2x1Y2VuY3kuZmFyVmFsdWU7XHJcblxyXG4gICAgICAgIGlmIChuZWFyVmFsdWUgIT09IDEuMCB8fCBmYXJWYWx1ZSAhPT0gMS4wKSB7XHJcbiAgICAgICAgICAgIC8vIHRyYW5zbHVjZW5jeSBieSBkaXN0YW5jZSBjYWxjdWxhdGlvbiBpbiBzaGFkZXIgbmVlZCBub3QgYmUgZW5hYmxlZFxyXG4gICAgICAgICAgICAvLyB1bnRpbCBhIGJpbGxib2FyZCB3aXRoIG5lYXIgYW5kIGZhciAhPT0gMS4wIGlzIGZvdW5kXHJcbiAgICAgICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24uX3NoYWRlclRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBsZXQgd2lkdGggPSAwO1xyXG4gICAgY29uc3QgaW5kZXggPSBiaWxsYm9hcmQuX2ltYWdlSW5kZXg7XHJcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VSZWN0YW5nbGUgPSB0ZXh0dXJlQXRsYXNDb29yZGluYXRlc1tpbmRleF07XHJcblxyXG4gICAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XHJcbiAgICAgICAgaWYgKCFkZWZpbmVkKGltYWdlUmVjdGFuZ2xlKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoYEludmFsaWQgYmlsbGJvYXJkIGltYWdlIGluZGV4OiAke2luZGV4fWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcclxuXHJcbiAgICAgICAgd2lkdGggPSBpbWFnZVJlY3RhbmdsZS53aWR0aDtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCB0ZXh0dXJlV2lkdGggPSBiaWxsYm9hcmRDb2xsZWN0aW9uLl90ZXh0dXJlQXRsYXMudGV4dHVyZS53aWR0aDtcclxuICAgIGNvbnN0IGltYWdlV2lkdGggPSBNYXRoLnJvdW5kKFxyXG4gICAgICAgIGRlZmF1bHRWYWx1ZShiaWxsYm9hcmQud2lkdGgsIHRleHR1cmVXaWR0aCAqIHdpZHRoKVxyXG4gICAgKTtcclxuICAgIGJpbGxib2FyZENvbGxlY3Rpb24uX21heFNpemUgPSBNYXRoLm1heChcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9tYXhTaXplLFxyXG4gICAgICAgIGltYWdlV2lkdGhcclxuICAgICk7XHJcblxyXG4gICAgbGV0IGNvbXByZXNzZWQwID0gQ2VzaXVtTWF0aC5jbGFtcChpbWFnZVdpZHRoLCAwLjAsIExFRlRfU0hJRlQxNik7XHJcbiAgICBsZXQgY29tcHJlc3NlZDEgPSAwLjA7XHJcblxyXG4gICAgaWYgKFxyXG4gICAgICAgIE1hdGguYWJzKENhcnRlc2lhbjMubWFnbml0dWRlU3F1YXJlZChhbGlnbmVkQXhpcykgLSAxLjApIDxcclxuICAgICAgICBDZXNpdW1NYXRoLkVQU0lMT042XHJcbiAgICApIHtcclxuICAgICAgICBjb21wcmVzc2VkMSA9IEF0dHJpYnV0ZUNvbXByZXNzaW9uLm9jdEVuY29kZUZsb2F0KGFsaWduZWRBeGlzKTtcclxuICAgIH1cclxuXHJcbiAgICBuZWFyVmFsdWUgPSBDZXNpdW1NYXRoLmNsYW1wKG5lYXJWYWx1ZSwgMC4wLCAxLjApO1xyXG4gICAgbmVhclZhbHVlID0gbmVhclZhbHVlID09PSAxLjAgPyAyNTUuMCA6IChuZWFyVmFsdWUgKiAyNTUuMCkgfCAwO1xyXG4gICAgY29tcHJlc3NlZDAgPSBjb21wcmVzc2VkMCAqIExFRlRfU0hJRlQ4ICsgbmVhclZhbHVlO1xyXG5cclxuICAgIGZhclZhbHVlID0gQ2VzaXVtTWF0aC5jbGFtcChmYXJWYWx1ZSwgMC4wLCAxLjApO1xyXG4gICAgZmFyVmFsdWUgPSBmYXJWYWx1ZSA9PT0gMS4wID8gMjU1LjAgOiAoZmFyVmFsdWUgKiAyNTUuMCkgfCAwO1xyXG4gICAgY29tcHJlc3NlZDEgPSBjb21wcmVzc2VkMSAqIExFRlRfU0hJRlQ4ICsgZmFyVmFsdWU7XHJcblxyXG4gICAgaWYgKGJpbGxib2FyZENvbGxlY3Rpb24uX2luc3RhbmNlZCkge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4O1xyXG4gICAgICAgIHdyaXRlcihpLCBjb21wcmVzc2VkMCwgY29tcHJlc3NlZDEsIG5lYXIsIGZhcik7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4ICogNDtcclxuICAgICAgICB3cml0ZXIoaSArIDAsIGNvbXByZXNzZWQwLCBjb21wcmVzc2VkMSwgbmVhciwgZmFyKTtcclxuICAgICAgICB3cml0ZXIoaSArIDEsIGNvbXByZXNzZWQwLCBjb21wcmVzc2VkMSwgbmVhciwgZmFyKTtcclxuICAgICAgICB3cml0ZXIoaSArIDIsIGNvbXByZXNzZWQwLCBjb21wcmVzc2VkMSwgbmVhciwgZmFyKTtcclxuICAgICAgICB3cml0ZXIoaSArIDMsIGNvbXByZXNzZWQwLCBjb21wcmVzc2VkMSwgbmVhciwgZmFyKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVDb21wcmVzc2VkQXR0cmliMihcclxuICAgIGJpbGxib2FyZENvbGxlY3Rpb24sXHJcbiAgICBmcmFtZVN0YXRlLFxyXG4gICAgdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXMsXHJcbiAgICB2YWZXcml0ZXJzLFxyXG4gICAgYmlsbGJvYXJkXHJcbikge1xyXG4gICAgbGV0IGk7XHJcbiAgICBjb25zdCB3cml0ZXIgPSB2YWZXcml0ZXJzW2F0dHJpYnV0ZUxvY2F0aW9ucy5jb21wcmVzc2VkQXR0cmlidXRlMl07XHJcbiAgICBjb25zdCBjb2xvciA9IGJpbGxib2FyZC5jb2xvcjtcclxuICAgIGNvbnN0IHBpY2tDb2xvciA9ICFkZWZpbmVkKGJpbGxib2FyZENvbGxlY3Rpb24uX2JhdGNoVGFibGUpXHJcbiAgICAgICAgPyBiaWxsYm9hcmQuZ2V0UGlja0lkKGZyYW1lU3RhdGUuY29udGV4dCkuY29sb3JcclxuICAgICAgICA6IENvbG9yLldISVRFO1xyXG4gICAgY29uc3Qgc2l6ZUluTWV0ZXJzID0gYmlsbGJvYXJkLnNpemVJbk1ldGVycyA/IDEuMCA6IDAuMDtcclxuICAgIGNvbnN0IHZhbGlkQWxpZ25lZEF4aXMgPVxyXG4gICAgICAgIE1hdGguYWJzKENhcnRlc2lhbjMubWFnbml0dWRlU3F1YXJlZChiaWxsYm9hcmQuYWxpZ25lZEF4aXMpIC0gMS4wKSA8XHJcbiAgICAgICAgQ2VzaXVtTWF0aC5FUFNJTE9ONlxyXG4gICAgICAgICAgICA/IDEuMFxyXG4gICAgICAgICAgICA6IDAuMDtcclxuXHJcbiAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9hbGxTaXplZEluTWV0ZXJzID1cclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9hbGxTaXplZEluTWV0ZXJzICYmIHNpemVJbk1ldGVycyA9PT0gMS4wO1xyXG5cclxuICAgIGxldCBoZWlnaHQgPSAwO1xyXG4gICAgY29uc3QgaW5kZXggPSBiaWxsYm9hcmQuX2ltYWdlSW5kZXg7XHJcbiAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgY29uc3QgaW1hZ2VSZWN0YW5nbGUgPSB0ZXh0dXJlQXRsYXNDb29yZGluYXRlc1tpbmRleF07XHJcblxyXG4gICAgICAgIC8vPj5pbmNsdWRlU3RhcnQoJ2RlYnVnJywgcHJhZ21hcy5kZWJ1Zyk7XHJcbiAgICAgICAgaWYgKCFkZWZpbmVkKGltYWdlUmVjdGFuZ2xlKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoYEludmFsaWQgYmlsbGJvYXJkIGltYWdlIGluZGV4OiAke2luZGV4fWApO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcclxuXHJcbiAgICAgICAgaGVpZ2h0ID0gaW1hZ2VSZWN0YW5nbGUuaGVpZ2h0O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGRpbWVuc2lvbnMgPSBiaWxsYm9hcmRDb2xsZWN0aW9uLl90ZXh0dXJlQXRsYXMudGV4dHVyZS5kaW1lbnNpb25zO1xyXG4gICAgY29uc3QgaW1hZ2VIZWlnaHQgPSBNYXRoLnJvdW5kKFxyXG4gICAgICAgIGRlZmF1bHRWYWx1ZShiaWxsYm9hcmQuaGVpZ2h0LCBkaW1lbnNpb25zLnkgKiBoZWlnaHQpXHJcbiAgICApO1xyXG4gICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fbWF4U2l6ZSA9IE1hdGgubWF4KFxyXG4gICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24uX21heFNpemUsXHJcbiAgICAgICAgaW1hZ2VIZWlnaHRcclxuICAgICk7XHJcbiAgICBsZXQgbGFiZWxIb3Jpem9udGFsT3JpZ2luID0gZGVmYXVsdFZhbHVlKFxyXG4gICAgICAgIGJpbGxib2FyZC5fbGFiZWxIb3Jpem9udGFsT3JpZ2luLFxyXG4gICAgICAgIC0yXHJcbiAgICApO1xyXG4gICAgbGFiZWxIb3Jpem9udGFsT3JpZ2luICs9IDI7XHJcbiAgICBjb25zdCBjb21wcmVzc2VkMyA9IGltYWdlSGVpZ2h0ICogTEVGVF9TSElGVDIgKyBsYWJlbEhvcml6b250YWxPcmlnaW47XHJcblxyXG4gICAgbGV0IHJlZCA9IENvbG9yLmZsb2F0VG9CeXRlKGNvbG9yLnJlZCk7XHJcbiAgICBsZXQgZ3JlZW4gPSBDb2xvci5mbG9hdFRvQnl0ZShjb2xvci5ncmVlbik7XHJcbiAgICBsZXQgYmx1ZSA9IENvbG9yLmZsb2F0VG9CeXRlKGNvbG9yLmJsdWUpO1xyXG4gICAgY29uc3QgY29tcHJlc3NlZDAgPSByZWQgKiBMRUZUX1NISUZUMTYgKyBncmVlbiAqIExFRlRfU0hJRlQ4ICsgYmx1ZTtcclxuXHJcbiAgICByZWQgPSBDb2xvci5mbG9hdFRvQnl0ZShwaWNrQ29sb3IucmVkKTtcclxuICAgIGdyZWVuID0gQ29sb3IuZmxvYXRUb0J5dGUocGlja0NvbG9yLmdyZWVuKTtcclxuICAgIGJsdWUgPSBDb2xvci5mbG9hdFRvQnl0ZShwaWNrQ29sb3IuYmx1ZSk7XHJcbiAgICBjb25zdCBjb21wcmVzc2VkMSA9IHJlZCAqIExFRlRfU0hJRlQxNiArIGdyZWVuICogTEVGVF9TSElGVDggKyBibHVlO1xyXG5cclxuICAgIGxldCBjb21wcmVzc2VkMiA9XHJcbiAgICAgICAgQ29sb3IuZmxvYXRUb0J5dGUoY29sb3IuYWxwaGEpICogTEVGVF9TSElGVDE2ICtcclxuICAgICAgICBDb2xvci5mbG9hdFRvQnl0ZShwaWNrQ29sb3IuYWxwaGEpICogTEVGVF9TSElGVDg7XHJcbiAgICBjb21wcmVzc2VkMiArPSBzaXplSW5NZXRlcnMgKiAyLjAgKyB2YWxpZEFsaWduZWRBeGlzO1xyXG5cclxuICAgIGlmIChiaWxsYm9hcmRDb2xsZWN0aW9uLl9pbnN0YW5jZWQpIHtcclxuICAgICAgICBpID0gYmlsbGJvYXJkLl9pbmRleDtcclxuICAgICAgICB3cml0ZXIoaSwgY29tcHJlc3NlZDAsIGNvbXByZXNzZWQxLCBjb21wcmVzc2VkMiwgY29tcHJlc3NlZDMpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpID0gYmlsbGJvYXJkLl9pbmRleCAqIDQ7XHJcbiAgICAgICAgd3JpdGVyKGkgKyAwLCBjb21wcmVzc2VkMCwgY29tcHJlc3NlZDEsIGNvbXByZXNzZWQyLCBjb21wcmVzc2VkMyk7XHJcbiAgICAgICAgd3JpdGVyKGkgKyAxLCBjb21wcmVzc2VkMCwgY29tcHJlc3NlZDEsIGNvbXByZXNzZWQyLCBjb21wcmVzc2VkMyk7XHJcbiAgICAgICAgd3JpdGVyKGkgKyAyLCBjb21wcmVzc2VkMCwgY29tcHJlc3NlZDEsIGNvbXByZXNzZWQyLCBjb21wcmVzc2VkMyk7XHJcbiAgICAgICAgd3JpdGVyKGkgKyAzLCBjb21wcmVzc2VkMCwgY29tcHJlc3NlZDEsIGNvbXByZXNzZWQyLCBjb21wcmVzc2VkMyk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlRXllT2Zmc2V0KFxyXG4gICAgYmlsbGJvYXJkQ29sbGVjdGlvbixcclxuICAgIGZyYW1lU3RhdGUsXHJcbiAgICB0ZXh0dXJlQXRsYXNDb29yZGluYXRlcyxcclxuICAgIHZhZldyaXRlcnMsXHJcbiAgICBiaWxsYm9hcmRcclxuKSB7XHJcbiAgICBsZXQgaTtcclxuICAgIGNvbnN0IHdyaXRlciA9IHZhZldyaXRlcnNbYXR0cmlidXRlTG9jYXRpb25zLmV5ZU9mZnNldF07XHJcbiAgICBjb25zdCBleWVPZmZzZXQgPSBiaWxsYm9hcmQuZXllT2Zmc2V0O1xyXG5cclxuICAgIC8vIEZvciBiaWxsYm9hcmRzIHRoYXQgYXJlIGNsYW1wZWQgdG8gZ3JvdW5kLCBtb3ZlIGl0IHNsaWdodGx5IGNsb3NlciB0byB0aGUgY2FtZXJhXHJcbiAgICBsZXQgZXllT2Zmc2V0WiA9IGV5ZU9mZnNldC56O1xyXG4gICAgaWYgKGJpbGxib2FyZC5faGVpZ2h0UmVmZXJlbmNlICE9PSBIZWlnaHRSZWZlcmVuY2UuTk9ORSkge1xyXG4gICAgICAgIGV5ZU9mZnNldFogKj0gMS4wMDU7XHJcbiAgICB9XHJcbiAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9tYXhFeWVPZmZzZXQgPSBNYXRoLm1heChcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9tYXhFeWVPZmZzZXQsXHJcbiAgICAgICAgTWF0aC5hYnMoZXllT2Zmc2V0LngpLFxyXG4gICAgICAgIE1hdGguYWJzKGV5ZU9mZnNldC55KSxcclxuICAgICAgICBNYXRoLmFicyhleWVPZmZzZXRaKVxyXG4gICAgKTtcclxuXHJcbiAgICBpZiAoYmlsbGJvYXJkQ29sbGVjdGlvbi5faW5zdGFuY2VkKSB7XHJcbiAgICAgICAgbGV0IHdpZHRoID0gMDtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gMDtcclxuICAgICAgICBjb25zdCBpbmRleCA9IGJpbGxib2FyZC5faW1hZ2VJbmRleDtcclxuICAgICAgICBpZiAoaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGltYWdlUmVjdGFuZ2xlID0gdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXNbaW5kZXhdO1xyXG5cclxuICAgICAgICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcclxuICAgICAgICAgICAgaWYgKCFkZWZpbmVkKGltYWdlUmVjdGFuZ2xlKSkge1xyXG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKGBJbnZhbGlkIGJpbGxib2FyZCBpbWFnZSBpbmRleDogJHtpbmRleH1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLz4+aW5jbHVkZUVuZCgnZGVidWcnKTtcclxuXHJcbiAgICAgICAgICAgIHdpZHRoID0gaW1hZ2VSZWN0YW5nbGUud2lkdGg7XHJcbiAgICAgICAgICAgIGhlaWdodCA9IGltYWdlUmVjdGFuZ2xlLmhlaWdodDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHNjcmF0Y2hDYXJ0ZXNpYW4yLnggPSB3aWR0aDtcclxuICAgICAgICBzY3JhdGNoQ2FydGVzaWFuMi55ID0gaGVpZ2h0O1xyXG4gICAgICAgIGNvbnN0IGNvbXByZXNzZWRUZXhDb29yZHNSYW5nZSA9IEF0dHJpYnV0ZUNvbXByZXNzaW9uLmNvbXByZXNzVGV4dHVyZUNvb3JkaW5hdGVzKFxyXG4gICAgICAgICAgICBzY3JhdGNoQ2FydGVzaWFuMlxyXG4gICAgICAgICk7XHJcblxyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4O1xyXG4gICAgICAgIHdyaXRlcihpLCBleWVPZmZzZXQueCwgZXllT2Zmc2V0LnksIGV5ZU9mZnNldFosIGNvbXByZXNzZWRUZXhDb29yZHNSYW5nZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4ICogNDtcclxuICAgICAgICB3cml0ZXIoaSArIDAsIGV5ZU9mZnNldC54LCBleWVPZmZzZXQueSwgZXllT2Zmc2V0WiwgMC4wKTtcclxuICAgICAgICB3cml0ZXIoaSArIDEsIGV5ZU9mZnNldC54LCBleWVPZmZzZXQueSwgZXllT2Zmc2V0WiwgMC4wKTtcclxuICAgICAgICB3cml0ZXIoaSArIDIsIGV5ZU9mZnNldC54LCBleWVPZmZzZXQueSwgZXllT2Zmc2V0WiwgMC4wKTtcclxuICAgICAgICB3cml0ZXIoaSArIDMsIGV5ZU9mZnNldC54LCBleWVPZmZzZXQueSwgZXllT2Zmc2V0WiwgMC4wKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVTY2FsZUJ5RGlzdGFuY2UoXHJcbiAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLFxyXG4gICAgZnJhbWVTdGF0ZSxcclxuICAgIHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLFxyXG4gICAgdmFmV3JpdGVycyxcclxuICAgIGJpbGxib2FyZFxyXG4pIHtcclxuICAgIGxldCBpO1xyXG4gICAgY29uc3Qgd3JpdGVyID0gdmFmV3JpdGVyc1thdHRyaWJ1dGVMb2NhdGlvbnMuc2NhbGVCeURpc3RhbmNlXTtcclxuICAgIGxldCBuZWFyID0gMC4wO1xyXG4gICAgbGV0IG5lYXJWYWx1ZSA9IDEuMDtcclxuICAgIGxldCBmYXIgPSAxLjA7XHJcbiAgICBsZXQgZmFyVmFsdWUgPSAxLjA7XHJcblxyXG4gICAgY29uc3Qgc2NhbGUgPSBiaWxsYm9hcmQuc2NhbGVCeURpc3RhbmNlO1xyXG4gICAgaWYgKGRlZmluZWQoc2NhbGUpKSB7XHJcbiAgICAgICAgbmVhciA9IHNjYWxlLm5lYXI7XHJcbiAgICAgICAgbmVhclZhbHVlID0gc2NhbGUubmVhclZhbHVlO1xyXG4gICAgICAgIGZhciA9IHNjYWxlLmZhcjtcclxuICAgICAgICBmYXJWYWx1ZSA9IHNjYWxlLmZhclZhbHVlO1xyXG5cclxuICAgICAgICBpZiAobmVhclZhbHVlICE9PSAxLjAgfHwgZmFyVmFsdWUgIT09IDEuMCkge1xyXG4gICAgICAgICAgICAvLyBzY2FsZSBieSBkaXN0YW5jZSBjYWxjdWxhdGlvbiBpbiBzaGFkZXIgbmVlZCBub3QgYmUgZW5hYmxlZFxyXG4gICAgICAgICAgICAvLyB1bnRpbCBhIGJpbGxib2FyZCB3aXRoIG5lYXIgYW5kIGZhciAhPT0gMS4wIGlzIGZvdW5kXHJcbiAgICAgICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24uX3NoYWRlclNjYWxlQnlEaXN0YW5jZSA9IHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChiaWxsYm9hcmRDb2xsZWN0aW9uLl9pbnN0YW5jZWQpIHtcclxuICAgICAgICBpID0gYmlsbGJvYXJkLl9pbmRleDtcclxuICAgICAgICB3cml0ZXIoaSwgbmVhciwgbmVhclZhbHVlLCBmYXIsIGZhclZhbHVlKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaSA9IGJpbGxib2FyZC5faW5kZXggKiA0O1xyXG4gICAgICAgIHdyaXRlcihpICsgMCwgbmVhciwgbmVhclZhbHVlLCBmYXIsIGZhclZhbHVlKTtcclxuICAgICAgICB3cml0ZXIoaSArIDEsIG5lYXIsIG5lYXJWYWx1ZSwgZmFyLCBmYXJWYWx1ZSk7XHJcbiAgICAgICAgd3JpdGVyKGkgKyAyLCBuZWFyLCBuZWFyVmFsdWUsIGZhciwgZmFyVmFsdWUpO1xyXG4gICAgICAgIHdyaXRlcihpICsgMywgbmVhciwgbmVhclZhbHVlLCBmYXIsIGZhclZhbHVlKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVQaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZShcclxuICAgIGJpbGxib2FyZENvbGxlY3Rpb24sXHJcbiAgICBmcmFtZVN0YXRlLFxyXG4gICAgdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXMsXHJcbiAgICB2YWZXcml0ZXJzLFxyXG4gICAgYmlsbGJvYXJkXHJcbikge1xyXG4gICAgbGV0IGk7XHJcbiAgICBjb25zdCB3cml0ZXIgPSB2YWZXcml0ZXJzW2F0dHJpYnV0ZUxvY2F0aW9ucy5waXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZV07XHJcbiAgICBsZXQgbmVhciA9IDAuMDtcclxuICAgIGxldCBuZWFyVmFsdWUgPSAxLjA7XHJcbiAgICBsZXQgZmFyID0gMS4wO1xyXG4gICAgbGV0IGZhclZhbHVlID0gMS4wO1xyXG5cclxuICAgIGNvbnN0IHBpeGVsT2Zmc2V0U2NhbGUgPSBiaWxsYm9hcmQucGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2U7XHJcbiAgICBpZiAoZGVmaW5lZChwaXhlbE9mZnNldFNjYWxlKSkge1xyXG4gICAgICAgIG5lYXIgPSBwaXhlbE9mZnNldFNjYWxlLm5lYXI7XHJcbiAgICAgICAgbmVhclZhbHVlID0gcGl4ZWxPZmZzZXRTY2FsZS5uZWFyVmFsdWU7XHJcbiAgICAgICAgZmFyID0gcGl4ZWxPZmZzZXRTY2FsZS5mYXI7XHJcbiAgICAgICAgZmFyVmFsdWUgPSBwaXhlbE9mZnNldFNjYWxlLmZhclZhbHVlO1xyXG5cclxuICAgICAgICBpZiAobmVhclZhbHVlICE9PSAxLjAgfHwgZmFyVmFsdWUgIT09IDEuMCkge1xyXG4gICAgICAgICAgICAvLyBwaXhlbE9mZnNldFNjYWxlIGJ5IGRpc3RhbmNlIGNhbGN1bGF0aW9uIGluIHNoYWRlciBuZWVkIG5vdCBiZSBlbmFibGVkXHJcbiAgICAgICAgICAgIC8vIHVudGlsIGEgYmlsbGJvYXJkIHdpdGggbmVhciBhbmQgZmFyICE9PSAxLjAgaXMgZm91bmRcclxuICAgICAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fc2hhZGVyUGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2UgPSB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoYmlsbGJvYXJkQ29sbGVjdGlvbi5faW5zdGFuY2VkKSB7XHJcbiAgICAgICAgaSA9IGJpbGxib2FyZC5faW5kZXg7XHJcbiAgICAgICAgd3JpdGVyKGksIG5lYXIsIG5lYXJWYWx1ZSwgZmFyLCBmYXJWYWx1ZSk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4ICogNDtcclxuICAgICAgICB3cml0ZXIoaSArIDAsIG5lYXIsIG5lYXJWYWx1ZSwgZmFyLCBmYXJWYWx1ZSk7XHJcbiAgICAgICAgd3JpdGVyKGkgKyAxLCBuZWFyLCBuZWFyVmFsdWUsIGZhciwgZmFyVmFsdWUpO1xyXG4gICAgICAgIHdyaXRlcihpICsgMiwgbmVhciwgbmVhclZhbHVlLCBmYXIsIGZhclZhbHVlKTtcclxuICAgICAgICB3cml0ZXIoaSArIDMsIG5lYXIsIG5lYXJWYWx1ZSwgZmFyLCBmYXJWYWx1ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlQ29tcHJlc3NlZEF0dHJpYnV0ZTMoXHJcbiAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLFxyXG4gICAgZnJhbWVTdGF0ZSxcclxuICAgIHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLFxyXG4gICAgdmFmV3JpdGVycyxcclxuICAgIGJpbGxib2FyZFxyXG4pIHtcclxuICAgIGxldCBpO1xyXG4gICAgY29uc3Qgd3JpdGVyID0gdmFmV3JpdGVyc1thdHRyaWJ1dGVMb2NhdGlvbnMuY29tcHJlc3NlZEF0dHJpYnV0ZTNdO1xyXG4gICAgbGV0IG5lYXIgPSAwLjA7XHJcbiAgICBsZXQgZmFyID0gTnVtYmVyLk1BWF9WQUxVRTtcclxuXHJcbiAgICBjb25zdCBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBiaWxsYm9hcmQuZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uO1xyXG4gICAgaWYgKGRlZmluZWQoZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKSkge1xyXG4gICAgICAgIG5lYXIgPSBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24ubmVhcjtcclxuICAgICAgICBmYXIgPSBkaXN0YW5jZURpc3BsYXlDb25kaXRpb24uZmFyO1xyXG5cclxuICAgICAgICBuZWFyICo9IG5lYXI7XHJcbiAgICAgICAgZmFyICo9IGZhcjtcclxuXHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fc2hhZGVyRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gdHJ1ZTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlID0gYmlsbGJvYXJkLmRpc2FibGVEZXB0aFRlc3REaXN0YW5jZTtcclxuICAgIGNvbnN0IGNsYW1wVG9Hcm91bmQgPVxyXG4gICAgICAgIGJpbGxib2FyZC5oZWlnaHRSZWZlcmVuY2UgPT09IEhlaWdodFJlZmVyZW5jZS5DTEFNUF9UT19HUk9VTkQgJiZcclxuICAgICAgICBmcmFtZVN0YXRlLmNvbnRleHQuZGVwdGhUZXh0dXJlO1xyXG4gICAgaWYgKCFkZWZpbmVkKGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZSkpIHtcclxuICAgICAgICBkaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgPSBjbGFtcFRvR3JvdW5kID8gNTAwMC4wIDogMC4wO1xyXG4gICAgfVxyXG5cclxuICAgIGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZSAqPSBkaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2U7XHJcbiAgICBpZiAoY2xhbXBUb0dyb3VuZCB8fCBkaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgPiAwLjApIHtcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9zaGFkZXJEaXNhYmxlRGVwdGhEaXN0YW5jZSA9IHRydWU7XHJcbiAgICAgICAgaWYgKGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZSA9PT0gTnVtYmVyLlBPU0lUSVZFX0lORklOSVRZKSB7XHJcbiAgICAgICAgICAgIGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZSA9IC0xLjA7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGxldCBpbWFnZUhlaWdodDtcclxuICAgIGxldCBpbWFnZVdpZHRoO1xyXG5cclxuICAgIGlmICghZGVmaW5lZChiaWxsYm9hcmQuX2xhYmVsRGltZW5zaW9ucykpIHtcclxuICAgICAgICBsZXQgaGVpZ2h0ID0gMDtcclxuICAgICAgICBsZXQgd2lkdGggPSAwO1xyXG4gICAgICAgIGNvbnN0IGluZGV4ID0gYmlsbGJvYXJkLl9pbWFnZUluZGV4O1xyXG4gICAgICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICAgICAgY29uc3QgaW1hZ2VSZWN0YW5nbGUgPSB0ZXh0dXJlQXRsYXNDb29yZGluYXRlc1tpbmRleF07XHJcblxyXG4gICAgICAgICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xyXG4gICAgICAgICAgICBpZiAoIWRlZmluZWQoaW1hZ2VSZWN0YW5nbGUpKSB7XHJcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoYEludmFsaWQgYmlsbGJvYXJkIGltYWdlIGluZGV4OiAke2luZGV4fWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xyXG5cclxuICAgICAgICAgICAgaGVpZ2h0ID0gaW1hZ2VSZWN0YW5nbGUuaGVpZ2h0O1xyXG4gICAgICAgICAgICB3aWR0aCA9IGltYWdlUmVjdGFuZ2xlLndpZHRoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaW1hZ2VIZWlnaHQgPSBNYXRoLnJvdW5kKFxyXG4gICAgICAgICAgICBkZWZhdWx0VmFsdWUoXHJcbiAgICAgICAgICAgICAgICBiaWxsYm9hcmQuaGVpZ2h0LFxyXG4gICAgICAgICAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fdGV4dHVyZUF0bGFzLnRleHR1cmUuZGltZW5zaW9ucy55ICogaGVpZ2h0XHJcbiAgICAgICAgICAgIClcclxuICAgICAgICApO1xyXG5cclxuICAgICAgICBjb25zdCB0ZXh0dXJlV2lkdGggPSBiaWxsYm9hcmRDb2xsZWN0aW9uLl90ZXh0dXJlQXRsYXMudGV4dHVyZS53aWR0aDtcclxuICAgICAgICBpbWFnZVdpZHRoID0gTWF0aC5yb3VuZChcclxuICAgICAgICAgICAgZGVmYXVsdFZhbHVlKGJpbGxib2FyZC53aWR0aCwgdGV4dHVyZVdpZHRoICogd2lkdGgpXHJcbiAgICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaW1hZ2VXaWR0aCA9IGJpbGxib2FyZC5fbGFiZWxEaW1lbnNpb25zLng7XHJcbiAgICAgICAgaW1hZ2VIZWlnaHQgPSBiaWxsYm9hcmQuX2xhYmVsRGltZW5zaW9ucy55O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IHcgPSBNYXRoLmZsb29yKENlc2l1bU1hdGguY2xhbXAoaW1hZ2VXaWR0aCwgMC4wLCBMRUZUX1NISUZUMTIpKTtcclxuICAgIGNvbnN0IGggPSBNYXRoLmZsb29yKENlc2l1bU1hdGguY2xhbXAoaW1hZ2VIZWlnaHQsIDAuMCwgTEVGVF9TSElGVDEyKSk7XHJcbiAgICBjb25zdCBkaW1lbnNpb25zID0gdyAqIExFRlRfU0hJRlQxMiArIGg7XHJcblxyXG4gICAgaWYgKGJpbGxib2FyZENvbGxlY3Rpb24uX2luc3RhbmNlZCkge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4O1xyXG4gICAgICAgIHdyaXRlcihpLCBuZWFyLCBmYXIsIGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZSwgZGltZW5zaW9ucyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4ICogNDtcclxuICAgICAgICB3cml0ZXIoaSArIDAsIG5lYXIsIGZhciwgZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlLCBkaW1lbnNpb25zKTtcclxuICAgICAgICB3cml0ZXIoaSArIDEsIG5lYXIsIGZhciwgZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlLCBkaW1lbnNpb25zKTtcclxuICAgICAgICB3cml0ZXIoaSArIDIsIG5lYXIsIGZhciwgZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlLCBkaW1lbnNpb25zKTtcclxuICAgICAgICB3cml0ZXIoaSArIDMsIG5lYXIsIGZhciwgZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlLCBkaW1lbnNpb25zKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVUZXh0dXJlQ29vcmRpbmF0ZUJvdW5kc09yTGFiZWxUcmFuc2xhdGUoXHJcbiAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLFxyXG4gICAgZnJhbWVTdGF0ZSxcclxuICAgIHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLFxyXG4gICAgdmFmV3JpdGVycyxcclxuICAgIGJpbGxib2FyZFxyXG4pIHtcclxuICAgIGlmIChiaWxsYm9hcmQuaGVpZ2h0UmVmZXJlbmNlID09PSBIZWlnaHRSZWZlcmVuY2UuQ0xBTVBfVE9fR1JPVU5EKSB7XHJcbiAgICAgICAgY29uc3Qgc2NlbmUgPSBiaWxsYm9hcmRDb2xsZWN0aW9uLl9zY2VuZTtcclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xyXG4gICAgICAgIGNvbnN0IGdsb2JlVHJhbnNsdWNlbnQgPSBmcmFtZVN0YXRlLmdsb2JlVHJhbnNsdWNlbmN5U3RhdGUudHJhbnNsdWNlbnQ7XHJcbiAgICAgICAgY29uc3QgZGVwdGhUZXN0QWdhaW5zdFRlcnJhaW4gPVxyXG4gICAgICAgICAgICBkZWZpbmVkKHNjZW5lLmdsb2JlKSAmJiBzY2VuZS5nbG9iZS5kZXB0aFRlc3RBZ2FpbnN0VGVycmFpbjtcclxuXHJcbiAgICAgICAgLy8gT25seSBkbyBtYW51YWwgZGVwdGggdGVzdCBpZiB0aGUgZ2xvYmUgaXMgb3BhcXVlIGFuZCB3cml0ZXMgZGVwdGhcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9zaGFkZXJDbGFtcFRvR3JvdW5kID1cclxuICAgICAgICAgICAgY29udGV4dC5kZXB0aFRleHR1cmUgJiYgIWdsb2JlVHJhbnNsdWNlbnQgJiYgZGVwdGhUZXN0QWdhaW5zdFRlcnJhaW47XHJcbiAgICB9XHJcbiAgICBsZXQgaTtcclxuICAgIGNvbnN0IHdyaXRlciA9XHJcbiAgICAgICAgdmFmV3JpdGVyc1thdHRyaWJ1dGVMb2NhdGlvbnMudGV4dHVyZUNvb3JkaW5hdGVCb3VuZHNPckxhYmVsVHJhbnNsYXRlXTtcclxuXHJcbiAgICBpZiAoQ29udGV4dExpbWl0cy5tYXhpbXVtVmVydGV4VGV4dHVyZUltYWdlVW5pdHMgPiAwKSB7XHJcbiAgICAgICAgLy93cml0ZSBfbGFiZWxUcmFuc2xhdGUsIHVzZWQgYnkgZGVwdGggdGVzdGluZyBpbiB0aGUgdmVydGV4IHNoYWRlclxyXG4gICAgICAgIGxldCB0cmFuc2xhdGVYID0gMDtcclxuICAgICAgICBsZXQgdHJhbnNsYXRlWSA9IDA7XHJcbiAgICAgICAgaWYgKGRlZmluZWQoYmlsbGJvYXJkLl9sYWJlbFRyYW5zbGF0ZSkpIHtcclxuICAgICAgICAgICAgdHJhbnNsYXRlWCA9IGJpbGxib2FyZC5fbGFiZWxUcmFuc2xhdGUueDtcclxuICAgICAgICAgICAgdHJhbnNsYXRlWSA9IGJpbGxib2FyZC5fbGFiZWxUcmFuc2xhdGUueTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKGJpbGxib2FyZENvbGxlY3Rpb24uX2luc3RhbmNlZCkge1xyXG4gICAgICAgICAgICBpID0gYmlsbGJvYXJkLl9pbmRleDtcclxuICAgICAgICAgICAgd3JpdGVyKGksIHRyYW5zbGF0ZVgsIHRyYW5zbGF0ZVksIDAuMCwgMC4wKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICBpID0gYmlsbGJvYXJkLl9pbmRleCAqIDQ7XHJcbiAgICAgICAgICAgIHdyaXRlcihpICsgMCwgdHJhbnNsYXRlWCwgdHJhbnNsYXRlWSwgMC4wLCAwLjApO1xyXG4gICAgICAgICAgICB3cml0ZXIoaSArIDEsIHRyYW5zbGF0ZVgsIHRyYW5zbGF0ZVksIDAuMCwgMC4wKTtcclxuICAgICAgICAgICAgd3JpdGVyKGkgKyAyLCB0cmFuc2xhdGVYLCB0cmFuc2xhdGVZLCAwLjAsIDAuMCk7XHJcbiAgICAgICAgICAgIHdyaXRlcihpICsgMywgdHJhbnNsYXRlWCwgdHJhbnNsYXRlWSwgMC4wLCAwLjApO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgLy93cml0ZSB0ZXh0dXJlIGNvb3JkaW5hdGUgYm91bmRzLCB1c2VkIGJ5IGRlcHRoIHRlc3RpbmcgaW4gZnJhZ21lbnQgc2hhZGVyXHJcbiAgICBsZXQgbWluWCA9IDA7XHJcbiAgICBsZXQgbWluWSA9IDA7XHJcbiAgICBsZXQgd2lkdGggPSAwO1xyXG4gICAgbGV0IGhlaWdodCA9IDA7XHJcbiAgICBjb25zdCBpbmRleCA9IGJpbGxib2FyZC5faW1hZ2VJbmRleDtcclxuICAgIGlmIChpbmRleCAhPT0gLTEpIHtcclxuICAgICAgICBjb25zdCBpbWFnZVJlY3RhbmdsZSA9IHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzW2luZGV4XTtcclxuXHJcbiAgICAgICAgLy8+PmluY2x1ZGVTdGFydCgnZGVidWcnLCBwcmFnbWFzLmRlYnVnKTtcclxuICAgICAgICBpZiAoIWRlZmluZWQoaW1hZ2VSZWN0YW5nbGUpKSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBEZXZlbG9wZXJFcnJvcihgSW52YWxpZCBiaWxsYm9hcmQgaW1hZ2UgaW5kZXg6ICR7aW5kZXh9YCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xyXG5cclxuICAgICAgICBtaW5YID0gaW1hZ2VSZWN0YW5nbGUueDtcclxuICAgICAgICBtaW5ZID0gaW1hZ2VSZWN0YW5nbGUueTtcclxuICAgICAgICB3aWR0aCA9IGltYWdlUmVjdGFuZ2xlLndpZHRoO1xyXG4gICAgICAgIGhlaWdodCA9IGltYWdlUmVjdGFuZ2xlLmhlaWdodDtcclxuICAgIH1cclxuICAgIGNvbnN0IG1heFggPSBtaW5YICsgd2lkdGg7XHJcbiAgICBjb25zdCBtYXhZID0gbWluWSArIGhlaWdodDtcclxuXHJcbiAgICBpZiAoYmlsbGJvYXJkQ29sbGVjdGlvbi5faW5zdGFuY2VkKSB7XHJcbiAgICAgICAgaSA9IGJpbGxib2FyZC5faW5kZXg7XHJcbiAgICAgICAgd3JpdGVyKGksIG1pblgsIG1pblksIG1heFgsIG1heFkpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpID0gYmlsbGJvYXJkLl9pbmRleCAqIDQ7XHJcbiAgICAgICAgd3JpdGVyKGkgKyAwLCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZKTtcclxuICAgICAgICB3cml0ZXIoaSArIDEsIG1pblgsIG1pblksIG1heFgsIG1heFkpO1xyXG4gICAgICAgIHdyaXRlcihpICsgMiwgbWluWCwgbWluWSwgbWF4WCwgbWF4WSk7XHJcbiAgICAgICAgd3JpdGVyKGkgKyAzLCBtaW5YLCBtaW5ZLCBtYXhYLCBtYXhZKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVCYXRjaElkKFxyXG4gICAgYmlsbGJvYXJkQ29sbGVjdGlvbixcclxuICAgIGZyYW1lU3RhdGUsXHJcbiAgICB0ZXh0dXJlQXRsYXNDb29yZGluYXRlcyxcclxuICAgIHZhZldyaXRlcnMsXHJcbiAgICBiaWxsYm9hcmRcclxuKSB7XHJcbiAgICBpZiAoIWRlZmluZWQoYmlsbGJvYXJkQ29sbGVjdGlvbi5fYmF0Y2hUYWJsZSkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3Qgd3JpdGVyID0gdmFmV3JpdGVyc1thdHRyaWJ1dGVMb2NhdGlvbnMuYV9iYXRjaElkXTtcclxuICAgIGNvbnN0IGlkID0gYmlsbGJvYXJkLl9iYXRjaEluZGV4O1xyXG5cclxuICAgIGxldCBpO1xyXG4gICAgaWYgKGJpbGxib2FyZENvbGxlY3Rpb24uX2luc3RhbmNlZCkge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4O1xyXG4gICAgICAgIHdyaXRlcihpLCBpZCk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4ICogNDtcclxuICAgICAgICB3cml0ZXIoaSArIDAsIGlkKTtcclxuICAgICAgICB3cml0ZXIoaSArIDEsIGlkKTtcclxuICAgICAgICB3cml0ZXIoaSArIDIsIGlkKTtcclxuICAgICAgICB3cml0ZXIoaSArIDMsIGlkKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVTREYoXHJcbiAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLFxyXG4gICAgZnJhbWVTdGF0ZSxcclxuICAgIHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLFxyXG4gICAgdmFmV3JpdGVycyxcclxuICAgIGJpbGxib2FyZFxyXG4pIHtcclxuICAgIGlmICghYmlsbGJvYXJkQ29sbGVjdGlvbi5fc2RmKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBpO1xyXG4gICAgY29uc3Qgd3JpdGVyID0gdmFmV3JpdGVyc1thdHRyaWJ1dGVMb2NhdGlvbnMuc2RmXTtcclxuXHJcbiAgICBjb25zdCBvdXRsaW5lQ29sb3IgPSBiaWxsYm9hcmQub3V0bGluZUNvbG9yO1xyXG4gICAgY29uc3Qgb3V0bGluZVdpZHRoID0gYmlsbGJvYXJkLm91dGxpbmVXaWR0aDtcclxuXHJcbiAgICBjb25zdCByZWQgPSBDb2xvci5mbG9hdFRvQnl0ZShvdXRsaW5lQ29sb3IucmVkKTtcclxuICAgIGNvbnN0IGdyZWVuID0gQ29sb3IuZmxvYXRUb0J5dGUob3V0bGluZUNvbG9yLmdyZWVuKTtcclxuICAgIGNvbnN0IGJsdWUgPSBDb2xvci5mbG9hdFRvQnl0ZShvdXRsaW5lQ29sb3IuYmx1ZSk7XHJcbiAgICBjb25zdCBjb21wcmVzc2VkMCA9IHJlZCAqIExFRlRfU0hJRlQxNiArIGdyZWVuICogTEVGVF9TSElGVDggKyBibHVlO1xyXG5cclxuICAgIC8vIENvbXB1dGUgdGhlIHJlbGF0aXZlIG91dGxpbmUgZGlzdGFuY2VcclxuICAgIGNvbnN0IG91dGxpbmVEaXN0YW5jZSA9IG91dGxpbmVXaWR0aCAvIFNERlNldHRpbmdzLlJBRElVUztcclxuICAgIGNvbnN0IGNvbXByZXNzZWQxID1cclxuICAgICAgICBDb2xvci5mbG9hdFRvQnl0ZShvdXRsaW5lQ29sb3IuYWxwaGEpICogTEVGVF9TSElGVDE2ICtcclxuICAgICAgICBDb2xvci5mbG9hdFRvQnl0ZShvdXRsaW5lRGlzdGFuY2UpICogTEVGVF9TSElGVDg7XHJcblxyXG4gICAgaWYgKGJpbGxib2FyZENvbGxlY3Rpb24uX2luc3RhbmNlZCkge1xyXG4gICAgICAgIGkgPSBiaWxsYm9hcmQuX2luZGV4O1xyXG4gICAgICAgIHdyaXRlcihpLCBjb21wcmVzc2VkMCwgY29tcHJlc3NlZDEpO1xyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpID0gYmlsbGJvYXJkLl9pbmRleCAqIDQ7XHJcbiAgICAgICAgd3JpdGVyKGkgKyAwLCBjb21wcmVzc2VkMCArIExPV0VSX0xFRlQsIGNvbXByZXNzZWQxKTtcclxuICAgICAgICB3cml0ZXIoaSArIDEsIGNvbXByZXNzZWQwICsgTE9XRVJfUklHSFQsIGNvbXByZXNzZWQxKTtcclxuICAgICAgICB3cml0ZXIoaSArIDIsIGNvbXByZXNzZWQwICsgVVBQRVJfUklHSFQsIGNvbXByZXNzZWQxKTtcclxuICAgICAgICB3cml0ZXIoaSArIDMsIGNvbXByZXNzZWQwICsgVVBQRVJfTEVGVCwgY29tcHJlc3NlZDEpO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiB3cml0ZUJpbGxib2FyZChcclxuICAgIGJpbGxib2FyZENvbGxlY3Rpb24sXHJcbiAgICBmcmFtZVN0YXRlLFxyXG4gICAgdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXMsXHJcbiAgICB2YWZXcml0ZXJzLFxyXG4gICAgYmlsbGJvYXJkXHJcbikge1xyXG4gICAgd3JpdGVQb3NpdGlvblNjYWxlQW5kUm90YXRpb24oXHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbixcclxuICAgICAgICBmcmFtZVN0YXRlLFxyXG4gICAgICAgIHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLFxyXG4gICAgICAgIHZhZldyaXRlcnMsXHJcbiAgICAgICAgYmlsbGJvYXJkXHJcbiAgICApO1xyXG4gICAgd3JpdGVDb21wcmVzc2VkQXR0cmliMChcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLFxyXG4gICAgICAgIGZyYW1lU3RhdGUsXHJcbiAgICAgICAgdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXMsXHJcbiAgICAgICAgdmFmV3JpdGVycyxcclxuICAgICAgICBiaWxsYm9hcmRcclxuICAgICk7XHJcbiAgICB3cml0ZUNvbXByZXNzZWRBdHRyaWIxKFxyXG4gICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24sXHJcbiAgICAgICAgZnJhbWVTdGF0ZSxcclxuICAgICAgICB0ZXh0dXJlQXRsYXNDb29yZGluYXRlcyxcclxuICAgICAgICB2YWZXcml0ZXJzLFxyXG4gICAgICAgIGJpbGxib2FyZFxyXG4gICAgKTtcclxuICAgIHdyaXRlQ29tcHJlc3NlZEF0dHJpYjIoXHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbixcclxuICAgICAgICBmcmFtZVN0YXRlLFxyXG4gICAgICAgIHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLFxyXG4gICAgICAgIHZhZldyaXRlcnMsXHJcbiAgICAgICAgYmlsbGJvYXJkXHJcbiAgICApO1xyXG4gICAgd3JpdGVFeWVPZmZzZXQoXHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbixcclxuICAgICAgICBmcmFtZVN0YXRlLFxyXG4gICAgICAgIHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLFxyXG4gICAgICAgIHZhZldyaXRlcnMsXHJcbiAgICAgICAgYmlsbGJvYXJkXHJcbiAgICApO1xyXG4gICAgd3JpdGVTY2FsZUJ5RGlzdGFuY2UoXHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbixcclxuICAgICAgICBmcmFtZVN0YXRlLFxyXG4gICAgICAgIHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLFxyXG4gICAgICAgIHZhZldyaXRlcnMsXHJcbiAgICAgICAgYmlsbGJvYXJkXHJcbiAgICApO1xyXG4gICAgd3JpdGVQaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZShcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLFxyXG4gICAgICAgIGZyYW1lU3RhdGUsXHJcbiAgICAgICAgdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXMsXHJcbiAgICAgICAgdmFmV3JpdGVycyxcclxuICAgICAgICBiaWxsYm9hcmRcclxuICAgICk7XHJcbiAgICB3cml0ZUNvbXByZXNzZWRBdHRyaWJ1dGUzKFxyXG4gICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24sXHJcbiAgICAgICAgZnJhbWVTdGF0ZSxcclxuICAgICAgICB0ZXh0dXJlQXRsYXNDb29yZGluYXRlcyxcclxuICAgICAgICB2YWZXcml0ZXJzLFxyXG4gICAgICAgIGJpbGxib2FyZFxyXG4gICAgKTtcclxuICAgIHdyaXRlVGV4dHVyZUNvb3JkaW5hdGVCb3VuZHNPckxhYmVsVHJhbnNsYXRlKFxyXG4gICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24sXHJcbiAgICAgICAgZnJhbWVTdGF0ZSxcclxuICAgICAgICB0ZXh0dXJlQXRsYXNDb29yZGluYXRlcyxcclxuICAgICAgICB2YWZXcml0ZXJzLFxyXG4gICAgICAgIGJpbGxib2FyZFxyXG4gICAgKTtcclxuICAgIHdyaXRlQmF0Y2hJZChcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLFxyXG4gICAgICAgIGZyYW1lU3RhdGUsXHJcbiAgICAgICAgdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXMsXHJcbiAgICAgICAgdmFmV3JpdGVycyxcclxuICAgICAgICBiaWxsYm9hcmRcclxuICAgICk7XHJcbiAgICB3cml0ZVNERihcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLFxyXG4gICAgICAgIGZyYW1lU3RhdGUsXHJcbiAgICAgICAgdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXMsXHJcbiAgICAgICAgdmFmV3JpdGVycyxcclxuICAgICAgICBiaWxsYm9hcmRcclxuICAgICk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHJlY29tcHV0ZUFjdHVhbFBvc2l0aW9ucyhcclxuICAgIGJpbGxib2FyZENvbGxlY3Rpb24sXHJcbiAgICBiaWxsYm9hcmRzLFxyXG4gICAgbGVuZ3RoLFxyXG4gICAgZnJhbWVTdGF0ZSxcclxuICAgIG1vZGVsTWF0cml4LFxyXG4gICAgcmVjb21wdXRlQm91bmRpbmdWb2x1bWVcclxuKSB7XHJcbiAgICBsZXQgYm91bmRpbmdWb2x1bWU7XHJcbiAgICBpZiAoZnJhbWVTdGF0ZS5tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUzRCkge1xyXG4gICAgICAgIGJvdW5kaW5nVm9sdW1lID0gYmlsbGJvYXJkQ29sbGVjdGlvbi5fYmFzZVZvbHVtZTtcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9ib3VuZGluZ1ZvbHVtZURpcnR5ID0gdHJ1ZTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYm91bmRpbmdWb2x1bWUgPSBiaWxsYm9hcmRDb2xsZWN0aW9uLl9iYXNlVm9sdW1lMkQ7XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgcG9zaXRpb25zID0gW107XHJcbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgY29uc3QgYmlsbGJvYXJkID0gYmlsbGJvYXJkc1tpXTtcclxuICAgICAgICBjb25zdCBwb3NpdGlvbiA9IGJpbGxib2FyZC5wb3NpdGlvbjtcclxuICAgICAgICBjb25zdCBhY3R1YWxQb3NpdGlvbiA9IEJpbGxib2FyZC5fY29tcHV0ZUFjdHVhbFBvc2l0aW9uKFxyXG4gICAgICAgICAgICBiaWxsYm9hcmQsXHJcbiAgICAgICAgICAgIHBvc2l0aW9uLFxyXG4gICAgICAgICAgICBmcmFtZVN0YXRlLFxyXG4gICAgICAgICAgICBtb2RlbE1hdHJpeFxyXG4gICAgICAgICk7XHJcbiAgICAgICAgaWYgKGRlZmluZWQoYWN0dWFsUG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgIGJpbGxib2FyZC5fc2V0QWN0dWFsUG9zaXRpb24oYWN0dWFsUG9zaXRpb24pO1xyXG5cclxuICAgICAgICAgICAgaWYgKHJlY29tcHV0ZUJvdW5kaW5nVm9sdW1lKSB7XHJcbiAgICAgICAgICAgICAgICBwb3NpdGlvbnMucHVzaChhY3R1YWxQb3NpdGlvbik7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBCb3VuZGluZ1NwaGVyZS5leHBhbmQoYm91bmRpbmdWb2x1bWUsIGFjdHVhbFBvc2l0aW9uLCBib3VuZGluZ1ZvbHVtZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHJlY29tcHV0ZUJvdW5kaW5nVm9sdW1lKSB7XHJcbiAgICAgICAgQm91bmRpbmdTcGhlcmUuZnJvbVBvaW50cyhwb3NpdGlvbnMsIGJvdW5kaW5nVm9sdW1lKTtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gdXBkYXRlTW9kZShiaWxsYm9hcmRDb2xsZWN0aW9uLCBmcmFtZVN0YXRlKSB7XHJcbiAgICBjb25zdCBtb2RlID0gZnJhbWVTdGF0ZS5tb2RlO1xyXG5cclxuICAgIGNvbnN0IGJpbGxib2FyZHMgPSBiaWxsYm9hcmRDb2xsZWN0aW9uLl9iaWxsYm9hcmRzO1xyXG4gICAgY29uc3QgYmlsbGJvYXJkc1RvVXBkYXRlID0gYmlsbGJvYXJkQ29sbGVjdGlvbi5fYmlsbGJvYXJkc1RvVXBkYXRlO1xyXG4gICAgY29uc3QgbW9kZWxNYXRyaXggPSBiaWxsYm9hcmRDb2xsZWN0aW9uLl9tb2RlbE1hdHJpeDtcclxuXHJcbiAgICBpZiAoXHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fY3JlYXRlVmVydGV4QXJyYXkgfHxcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9tb2RlICE9PSBtb2RlIHx8XHJcbiAgICAgICAgKG1vZGUgIT09IFNjZW5lTW9kZS5TQ0VORTNEICYmXHJcbiAgICAgICAgICAgICFNYXRyaXg0LmVxdWFscyhtb2RlbE1hdHJpeCwgYmlsbGJvYXJkQ29sbGVjdGlvbi5tb2RlbE1hdHJpeCkpXHJcbiAgICApIHtcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9tb2RlID0gbW9kZTtcclxuICAgICAgICBNYXRyaXg0LmNsb25lKGJpbGxib2FyZENvbGxlY3Rpb24ubW9kZWxNYXRyaXgsIG1vZGVsTWF0cml4KTtcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IHRydWU7XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FM0QgfHxcclxuICAgICAgICAgICAgbW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQgfHxcclxuICAgICAgICAgICAgbW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVdcclxuICAgICAgICApIHtcclxuICAgICAgICAgICAgcmVjb21wdXRlQWN0dWFsUG9zaXRpb25zKFxyXG4gICAgICAgICAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbixcclxuICAgICAgICAgICAgICAgIGJpbGxib2FyZHMsXHJcbiAgICAgICAgICAgICAgICBiaWxsYm9hcmRzLmxlbmd0aCxcclxuICAgICAgICAgICAgICAgIGZyYW1lU3RhdGUsXHJcbiAgICAgICAgICAgICAgICBtb2RlbE1hdHJpeCxcclxuICAgICAgICAgICAgICAgIHRydWVcclxuICAgICAgICAgICAgKTtcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2UgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5NT1JQSElORykge1xyXG4gICAgICAgIHJlY29tcHV0ZUFjdHVhbFBvc2l0aW9ucyhcclxuICAgICAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbixcclxuICAgICAgICAgICAgYmlsbGJvYXJkcyxcclxuICAgICAgICAgICAgYmlsbGJvYXJkcy5sZW5ndGgsXHJcbiAgICAgICAgICAgIGZyYW1lU3RhdGUsXHJcbiAgICAgICAgICAgIG1vZGVsTWF0cml4LFxyXG4gICAgICAgICAgICB0cnVlXHJcbiAgICAgICAgKTtcclxuICAgIH0gZWxzZSBpZiAobW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQgfHwgbW9kZSA9PT0gU2NlbmVNb2RlLkNPTFVNQlVTX1ZJRVcpIHtcclxuICAgICAgICByZWNvbXB1dGVBY3R1YWxQb3NpdGlvbnMoXHJcbiAgICAgICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24sXHJcbiAgICAgICAgICAgIGJpbGxib2FyZHNUb1VwZGF0ZSxcclxuICAgICAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5fYmlsbGJvYXJkc1RvVXBkYXRlSW5kZXgsXHJcbiAgICAgICAgICAgIGZyYW1lU3RhdGUsXHJcbiAgICAgICAgICAgIG1vZGVsTWF0cml4LFxyXG4gICAgICAgICAgICBmYWxzZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHVwZGF0ZUJvdW5kaW5nVm9sdW1lKGNvbGxlY3Rpb24sIGZyYW1lU3RhdGUsIGJvdW5kaW5nVm9sdW1lKSB7XHJcbiAgICBsZXQgcGl4ZWxTY2FsZSA9IDEuMDtcclxuICAgIGlmICghY29sbGVjdGlvbi5fYWxsU2l6ZWRJbk1ldGVycyB8fCBjb2xsZWN0aW9uLl9tYXhQaXhlbE9mZnNldCAhPT0gMC4wKSB7XHJcbiAgICAgICAgcGl4ZWxTY2FsZSA9IGZyYW1lU3RhdGUuY2FtZXJhLmdldFBpeGVsU2l6ZShcclxuICAgICAgICAgICAgYm91bmRpbmdWb2x1bWUsXHJcbiAgICAgICAgICAgIGZyYW1lU3RhdGUuY29udGV4dC5kcmF3aW5nQnVmZmVyV2lkdGgsXHJcbiAgICAgICAgICAgIGZyYW1lU3RhdGUuY29udGV4dC5kcmF3aW5nQnVmZmVySGVpZ2h0XHJcbiAgICAgICAgKTtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgc2l6ZSA9IHBpeGVsU2NhbGUgKiBjb2xsZWN0aW9uLl9tYXhTY2FsZSAqIGNvbGxlY3Rpb24uX21heFNpemUgKiAyLjA7XHJcbiAgICBpZiAoY29sbGVjdGlvbi5fYWxsSG9yaXpvbnRhbENlbnRlciAmJiBjb2xsZWN0aW9uLl9hbGxWZXJ0aWNhbENlbnRlcikge1xyXG4gICAgICAgIHNpemUgKj0gMC41O1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IG9mZnNldCA9XHJcbiAgICAgICAgcGl4ZWxTY2FsZSAqIGNvbGxlY3Rpb24uX21heFBpeGVsT2Zmc2V0ICsgY29sbGVjdGlvbi5fbWF4RXllT2Zmc2V0O1xyXG4gICAgYm91bmRpbmdWb2x1bWUucmFkaXVzICs9IHNpemUgKyBvZmZzZXQ7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNyZWF0ZURlYnVnQ29tbWFuZChiaWxsYm9hcmRDb2xsZWN0aW9uLCBjb250ZXh0KSB7XHJcbiAgICBjb25zdCBmcyA9XHJcbiAgICAgICAgXCJ1bmlmb3JtIHNhbXBsZXIyRCBiaWxsYm9hcmRfdGV4dHVyZTsgXFxuXCIgK1xyXG4gICAgICAgIFwidmFyeWluZyB2ZWMyIHZfdGV4dHVyZUNvb3JkaW5hdGVzOyBcXG5cIiArXHJcbiAgICAgICAgXCJ2b2lkIG1haW4oKSBcXG5cIiArXHJcbiAgICAgICAgXCJ7IFxcblwiICtcclxuICAgICAgICBcIiAgICBnbF9GcmFnQ29sb3IgPSB0ZXh0dXJlMkQoYmlsbGJvYXJkX3RleHR1cmUsIHZfdGV4dHVyZUNvb3JkaW5hdGVzKTsgXFxuXCIgK1xyXG4gICAgICAgIFwifSBcXG5cIjtcclxuXHJcbiAgICBjb25zdCBkcmF3Q29tbWFuZCA9IGNvbnRleHQuY3JlYXRlVmlld3BvcnRRdWFkQ29tbWFuZChmcywge1xyXG4gICAgICAgIHVuaWZvcm1NYXA6IHtcclxuICAgICAgICAgICAgYmlsbGJvYXJkX3RleHR1cmU6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBiaWxsYm9hcmRDb2xsZWN0aW9uLl90ZXh0dXJlQXRsYXMudGV4dHVyZTtcclxuICAgICAgICAgICAgfSxcclxuICAgICAgICB9LFxyXG4gICAgfSk7XHJcbiAgICBkcmF3Q29tbWFuZC5wYXNzID0gUGFzcy5PVkVSTEFZO1xyXG4gICAgcmV0dXJuIGRyYXdDb21tYW5kO1xyXG59XHJcblxyXG5jb25zdCBzY3JhdGNoV3JpdGVyQXJyYXkgPSBbXTtcclxuXHJcbi8qKlxyXG4gKiBDYWxsZWQgd2hlbiB7QGxpbmsgVmlld2VyfSBvciB7QGxpbmsgQ2VzaXVtV2lkZ2V0fSByZW5kZXIgdGhlIHNjZW5lIHRvXHJcbiAqIGdldCB0aGUgZHJhdyBjb21tYW5kcyBuZWVkZWQgdG8gcmVuZGVyIHRoaXMgcHJpbWl0aXZlLlxyXG4gKiA8cD5cclxuICogRG8gbm90IGNhbGwgdGhpcyBmdW5jdGlvbiBkaXJlY3RseS4gIFRoaXMgaXMgZG9jdW1lbnRlZCBqdXN0IHRvXHJcbiAqIGxpc3QgdGhlIGV4Y2VwdGlvbnMgdGhhdCBtYXkgYmUgcHJvcGFnYXRlZCB3aGVuIHRoZSBzY2VuZSBpcyByZW5kZXJlZDpcclxuICogPC9wPlxyXG4gKlxyXG4gKiBAZXhjZXB0aW9uIHtSdW50aW1lRXJyb3J9IGltYWdlIHdpdGggaWQgbXVzdCBiZSBpbiB0aGUgYXRsYXMuXHJcbiAqL1xyXG5CaWxsYm9hcmRDb2xsZWN0aW9uLnByb3RvdHlwZS51cGRhdGUgPSBmdW5jdGlvbiAoZnJhbWVTdGF0ZSkge1xyXG4gICAgcmVtb3ZlQmlsbGJvYXJkcyh0aGlzKTtcclxuXHJcbiAgICBpZiAoIXRoaXMuc2hvdykge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICBsZXQgYmlsbGJvYXJkcyA9IHRoaXMuX2JpbGxib2FyZHM7XHJcbiAgICBsZXQgYmlsbGJvYXJkc0xlbmd0aCA9IGJpbGxib2FyZHMubGVuZ3RoO1xyXG5cclxuICAgIGNvbnN0IGNvbnRleHQgPSBmcmFtZVN0YXRlLmNvbnRleHQ7XHJcbiAgICB0aGlzLl9pbnN0YW5jZWQgPSBjb250ZXh0Lmluc3RhbmNlZEFycmF5cztcclxuICAgIGF0dHJpYnV0ZUxvY2F0aW9ucyA9IHRoaXMuX2luc3RhbmNlZFxyXG4gICAgICAgID8gYXR0cmlidXRlTG9jYXRpb25zSW5zdGFuY2VkXHJcbiAgICAgICAgOiBhdHRyaWJ1dGVMb2NhdGlvbnNCYXRjaGVkO1xyXG4gICAgZ2V0SW5kZXhCdWZmZXIgPSB0aGlzLl9pbnN0YW5jZWRcclxuICAgICAgICA/IGdldEluZGV4QnVmZmVySW5zdGFuY2VkXHJcbiAgICAgICAgOiBnZXRJbmRleEJ1ZmZlckJhdGNoZWQ7XHJcblxyXG4gICAgbGV0IHRleHR1cmVBdGxhcyA9IHRoaXMuX3RleHR1cmVBdGxhcztcclxuICAgIGlmICghZGVmaW5lZCh0ZXh0dXJlQXRsYXMpKSB7XHJcbiAgICAgICAgdGV4dHVyZUF0bGFzID0gdGhpcy5fdGV4dHVyZUF0bGFzID0gbmV3IFRleHR1cmVBdGxhcyh7XHJcbiAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXHJcbiAgICAgICAgfSk7XHJcblxyXG4gICAgICAgIGZvciAobGV0IGlpID0gMDsgaWkgPCBiaWxsYm9hcmRzTGVuZ3RoOyArK2lpKSB7XHJcbiAgICAgICAgICAgIGJpbGxib2FyZHNbaWldLl9sb2FkSW1hZ2UoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgY29uc3QgdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXMgPSB0ZXh0dXJlQXRsYXMudGV4dHVyZUNvb3JkaW5hdGVzO1xyXG4gICAgaWYgKHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIC8vIENhbid0IHdyaXRlIGJpbGxib2FyZCB2ZXJ0aWNlcyB1bnRpbCB3ZSBoYXZlIHRleHR1cmUgY29vcmRpbmF0ZXNcclxuICAgICAgICAvLyBwcm92aWRlZCBieSBhIHRleHR1cmUgYXRsYXNcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgdXBkYXRlTW9kZSh0aGlzLCBmcmFtZVN0YXRlKTtcclxuXHJcbiAgICBiaWxsYm9hcmRzID0gdGhpcy5fYmlsbGJvYXJkcztcclxuICAgIGJpbGxib2FyZHNMZW5ndGggPSBiaWxsYm9hcmRzLmxlbmd0aDtcclxuICAgIGNvbnN0IGJpbGxib2FyZHNUb1VwZGF0ZSA9IHRoaXMuX2JpbGxib2FyZHNUb1VwZGF0ZTtcclxuICAgIGNvbnN0IGJpbGxib2FyZHNUb1VwZGF0ZUxlbmd0aCA9IHRoaXMuX2JpbGxib2FyZHNUb1VwZGF0ZUluZGV4O1xyXG5cclxuICAgIGNvbnN0IHByb3BlcnRpZXMgPSB0aGlzLl9wcm9wZXJ0aWVzQ2hhbmdlZDtcclxuXHJcbiAgICBjb25zdCB0ZXh0dXJlQXRsYXNHVUlEID0gdGV4dHVyZUF0bGFzLmd1aWQ7XHJcbiAgICBjb25zdCBjcmVhdGVWZXJ0ZXhBcnJheSA9XHJcbiAgICAgICAgdGhpcy5fY3JlYXRlVmVydGV4QXJyYXkgfHwgdGhpcy5fdGV4dHVyZUF0bGFzR1VJRCAhPT0gdGV4dHVyZUF0bGFzR1VJRDtcclxuICAgIHRoaXMuX3RleHR1cmVBdGxhc0dVSUQgPSB0ZXh0dXJlQXRsYXNHVUlEO1xyXG5cclxuICAgIGxldCB2YWZXcml0ZXJzO1xyXG4gICAgY29uc3QgcGFzcyA9IGZyYW1lU3RhdGUucGFzc2VzO1xyXG4gICAgY29uc3QgcGlja2luZyA9IHBhc3MucGljaztcclxuXHJcbiAgICAvLyBQRVJGT1JNQU5DRV9JREVBOiBSb3VuZCByb2JpbiBtdWx0aXBsZSBidWZmZXJzLlxyXG4gICAgaWYgKGNyZWF0ZVZlcnRleEFycmF5IHx8ICghcGlja2luZyAmJiB0aGlzLmNvbXB1dGVOZXdCdWZmZXJzVXNhZ2UoKSkpIHtcclxuICAgICAgICB0aGlzLl9jcmVhdGVWZXJ0ZXhBcnJheSA9IGZhbHNlO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBrID0gMDsgayA8IE5VTUJFUl9PRl9QUk9QRVJUSUVTOyArK2spIHtcclxuICAgICAgICAgICAgcHJvcGVydGllc1trXSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl92YWYgPSB0aGlzLl92YWYgJiYgdGhpcy5fdmFmLmRlc3Ryb3koKTtcclxuXHJcbiAgICAgICAgaWYgKGJpbGxib2FyZHNMZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgIC8vIFBFUkZPUk1BTkNFX0lERUE6ICBJbnN0ZWFkIG9mIGNyZWF0aW5nIGEgbmV3IG9uZSwgcmVzaXplIGxpa2Ugc3RkOjp2ZWN0b3IuXHJcbiAgICAgICAgICAgIHRoaXMuX3ZhZiA9IGNyZWF0ZVZBRihcclxuICAgICAgICAgICAgICAgIGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBiaWxsYm9hcmRzTGVuZ3RoLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fYnVmZmVyc1VzYWdlLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5faW5zdGFuY2VkLFxyXG4gICAgICAgICAgICAgICAgdGhpcy5fYmF0Y2hUYWJsZSxcclxuICAgICAgICAgICAgICAgIHRoaXMuX3NkZlxyXG4gICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB2YWZXcml0ZXJzID0gdGhpcy5fdmFmLndyaXRlcnM7XHJcblxyXG4gICAgICAgICAgICAvLyBSZXdyaXRlIGVudGlyZSBidWZmZXIgaWYgYmlsbGJvYXJkcyB3ZXJlIGFkZGVkIG9yIHJlbW92ZWQuXHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYmlsbGJvYXJkc0xlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiaWxsYm9hcmQgPSB0aGlzLl9iaWxsYm9hcmRzW2ldO1xyXG4gICAgICAgICAgICAgICAgYmlsbGJvYXJkLl9kaXJ0eSA9IGZhbHNlOyAvLyBJbiBjYXNlIGl0IG5lZWRlZCBhbiB1cGRhdGUuXHJcbiAgICAgICAgICAgICAgICB3cml0ZUJpbGxib2FyZChcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLFxyXG4gICAgICAgICAgICAgICAgICAgIGZyYW1lU3RhdGUsXHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXMsXHJcbiAgICAgICAgICAgICAgICAgICAgdmFmV3JpdGVycyxcclxuICAgICAgICAgICAgICAgICAgICBiaWxsYm9hcmRcclxuICAgICAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIERpZmZlcmVudCBiaWxsYm9hcmQgY29sbGVjdGlvbnMgc2hhcmUgdGhlIHNhbWUgaW5kZXggYnVmZmVyLlxyXG4gICAgICAgICAgICB0aGlzLl92YWYuY29tbWl0KGdldEluZGV4QnVmZmVyKGNvbnRleHQpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHRoaXMuX2JpbGxib2FyZHNUb1VwZGF0ZUluZGV4ID0gMDtcclxuICAgIH0gZWxzZSBpZiAoYmlsbGJvYXJkc1RvVXBkYXRlTGVuZ3RoID4gMCkge1xyXG4gICAgICAgIC8vIEJpbGxib2FyZHMgd2VyZSBtb2RpZmllZCwgYnV0IG5vbmUgd2VyZSBhZGRlZCBvciByZW1vdmVkLlxyXG4gICAgICAgIGNvbnN0IHdyaXRlcnMgPSBzY3JhdGNoV3JpdGVyQXJyYXk7XHJcbiAgICAgICAgd3JpdGVycy5sZW5ndGggPSAwO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNbUE9TSVRJT05fSU5ERVhdIHx8XHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNbUk9UQVRJT05fSU5ERVhdIHx8XHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNbU0NBTEVfSU5ERVhdXHJcbiAgICAgICAgKSB7XHJcbiAgICAgICAgICAgIHdyaXRlcnMucHVzaCh3cml0ZVBvc2l0aW9uU2NhbGVBbmRSb3RhdGlvbik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNbSU1BR0VfSU5ERVhfSU5ERVhdIHx8XHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNbUElYRUxfT0ZGU0VUX0lOREVYXSB8fFxyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzW0hPUklaT05UQUxfT1JJR0lOX0lOREVYXSB8fFxyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzW1ZFUlRJQ0FMX09SSUdJTl9JTkRFWF0gfHxcclxuICAgICAgICAgICAgcHJvcGVydGllc1tTSE9XX0lOREVYXVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB3cml0ZXJzLnB1c2god3JpdGVDb21wcmVzc2VkQXR0cmliMCk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9pbnN0YW5jZWQpIHtcclxuICAgICAgICAgICAgICAgIHdyaXRlcnMucHVzaCh3cml0ZUV5ZU9mZnNldCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcHJvcGVydGllc1tJTUFHRV9JTkRFWF9JTkRFWF0gfHxcclxuICAgICAgICAgICAgcHJvcGVydGllc1tBTElHTkVEX0FYSVNfSU5ERVhdIHx8XHJcbiAgICAgICAgICAgIHByb3BlcnRpZXNbVFJBTlNMVUNFTkNZX0JZX0RJU1RBTkNFX0lOREVYXVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB3cml0ZXJzLnB1c2god3JpdGVDb21wcmVzc2VkQXR0cmliMSk7XHJcbiAgICAgICAgICAgIHdyaXRlcnMucHVzaCh3cml0ZUNvbXByZXNzZWRBdHRyaWIyKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwcm9wZXJ0aWVzW0lNQUdFX0lOREVYX0lOREVYXSB8fCBwcm9wZXJ0aWVzW0NPTE9SX0lOREVYXSkge1xyXG4gICAgICAgICAgICB3cml0ZXJzLnB1c2god3JpdGVDb21wcmVzc2VkQXR0cmliMik7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocHJvcGVydGllc1tFWUVfT0ZGU0VUX0lOREVYXSkge1xyXG4gICAgICAgICAgICB3cml0ZXJzLnB1c2god3JpdGVFeWVPZmZzZXQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHByb3BlcnRpZXNbU0NBTEVfQllfRElTVEFOQ0VfSU5ERVhdKSB7XHJcbiAgICAgICAgICAgIHdyaXRlcnMucHVzaCh3cml0ZVNjYWxlQnlEaXN0YW5jZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocHJvcGVydGllc1tQSVhFTF9PRkZTRVRfU0NBTEVfQllfRElTVEFOQ0VfSU5ERVhdKSB7XHJcbiAgICAgICAgICAgIHdyaXRlcnMucHVzaCh3cml0ZVBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgcHJvcGVydGllc1tESVNUQU5DRV9ESVNQTEFZX0NPTkRJVElPTl9JTkRFWF0gfHxcclxuICAgICAgICAgICAgcHJvcGVydGllc1tESVNBQkxFX0RFUFRIX0RJU1RBTkNFXSB8fFxyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzW0lNQUdFX0lOREVYX0lOREVYXSB8fFxyXG4gICAgICAgICAgICBwcm9wZXJ0aWVzW1BPU0lUSU9OX0lOREVYXVxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB3cml0ZXJzLnB1c2god3JpdGVDb21wcmVzc2VkQXR0cmlidXRlMyk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAocHJvcGVydGllc1tJTUFHRV9JTkRFWF9JTkRFWF0gfHwgcHJvcGVydGllc1tQT1NJVElPTl9JTkRFWF0pIHtcclxuICAgICAgICAgICAgd3JpdGVycy5wdXNoKHdyaXRlVGV4dHVyZUNvb3JkaW5hdGVCb3VuZHNPckxhYmVsVHJhbnNsYXRlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChwcm9wZXJ0aWVzW1NERl9JTkRFWF0pIHtcclxuICAgICAgICAgICAgd3JpdGVycy5wdXNoKHdyaXRlU0RGKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IG51bVdyaXRlcnMgPSB3cml0ZXJzLmxlbmd0aDtcclxuICAgICAgICB2YWZXcml0ZXJzID0gdGhpcy5fdmFmLndyaXRlcnM7XHJcblxyXG4gICAgICAgIGlmIChiaWxsYm9hcmRzVG9VcGRhdGVMZW5ndGggLyBiaWxsYm9hcmRzTGVuZ3RoID4gMC4xKSB7XHJcbiAgICAgICAgICAgIC8vIElmIG1vcmUgdGhhbiAxMCUgb2YgYmlsbGJvYXJkIGNoYW5nZSwgcmV3cml0ZSB0aGUgZW50aXJlIGJ1ZmZlci5cclxuXHJcbiAgICAgICAgICAgIC8vIFBFUkZPUk1BTkNFX0lERUE6ICBJIHRvdGFsbHkgbWFkZSB1cCAxMCUgOikuXHJcblxyXG4gICAgICAgICAgICBmb3IgKGxldCBtID0gMDsgbSA8IGJpbGxib2FyZHNUb1VwZGF0ZUxlbmd0aDsgKyttKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBiID0gYmlsbGJvYXJkc1RvVXBkYXRlW21dO1xyXG4gICAgICAgICAgICAgICAgYi5fZGlydHkgPSBmYWxzZTtcclxuXHJcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBuID0gMDsgbiA8IG51bVdyaXRlcnM7ICsrbikge1xyXG4gICAgICAgICAgICAgICAgICAgIHdyaXRlcnNbbl0odGhpcywgZnJhbWVTdGF0ZSwgdGV4dHVyZUF0bGFzQ29vcmRpbmF0ZXMsIHZhZldyaXRlcnMsIGIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3ZhZi5jb21taXQoZ2V0SW5kZXhCdWZmZXIoY29udGV4dCkpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGggPSAwOyBoIDwgYmlsbGJvYXJkc1RvVXBkYXRlTGVuZ3RoOyArK2gpIHtcclxuICAgICAgICAgICAgICAgIGNvbnN0IGJiID0gYmlsbGJvYXJkc1RvVXBkYXRlW2hdO1xyXG4gICAgICAgICAgICAgICAgYmIuX2RpcnR5ID0gZmFsc2U7XHJcblxyXG4gICAgICAgICAgICAgICAgZm9yIChsZXQgbyA9IDA7IG8gPCBudW1Xcml0ZXJzOyArK28pIHtcclxuICAgICAgICAgICAgICAgICAgICB3cml0ZXJzW29dKHRoaXMsIGZyYW1lU3RhdGUsIHRleHR1cmVBdGxhc0Nvb3JkaW5hdGVzLCB2YWZXcml0ZXJzLCBiYik7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlZCkge1xyXG4gICAgICAgICAgICAgICAgICAgIHRoaXMuX3ZhZi5zdWJDb21taXQoYmIuX2luZGV4LCAxKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5fdmFmLnN1YkNvbW1pdChiYi5faW5kZXggKiA0LCA0KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl92YWYuZW5kU3ViQ29tbWl0cygpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdGhpcy5fYmlsbGJvYXJkc1RvVXBkYXRlSW5kZXggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIElmIHRoZSBudW1iZXIgb2YgdG90YWwgYmlsbGJvYXJkcyBldmVyIHNocmlua3MgY29uc2lkZXJhYmx5XHJcbiAgICAvLyBUcnVuY2F0ZSBiaWxsYm9hcmRzVG9VcGRhdGUgc28gdGhhdCB3ZSBmcmVlIG1lbW9yeSB0aGF0IHdlJ3JlXHJcbiAgICAvLyBub3QgZ29pbmcgdG8gYmUgdXNpbmcuXHJcbiAgICBpZiAoYmlsbGJvYXJkc1RvVXBkYXRlTGVuZ3RoID4gYmlsbGJvYXJkc0xlbmd0aCAqIDEuNSkge1xyXG4gICAgICAgIGJpbGxib2FyZHNUb1VwZGF0ZS5sZW5ndGggPSBiaWxsYm9hcmRzTGVuZ3RoO1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghZGVmaW5lZCh0aGlzLl92YWYpIHx8ICFkZWZpbmVkKHRoaXMuX3ZhZi52YSkpIHtcclxuICAgICAgICByZXR1cm47XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRoaXMuX2JvdW5kaW5nVm9sdW1lRGlydHkpIHtcclxuICAgICAgICB0aGlzLl9ib3VuZGluZ1ZvbHVtZURpcnR5ID0gZmFsc2U7XHJcbiAgICAgICAgQm91bmRpbmdTcGhlcmUudHJhbnNmb3JtKFxyXG4gICAgICAgICAgICB0aGlzLl9iYXNlVm9sdW1lLFxyXG4gICAgICAgICAgICB0aGlzLm1vZGVsTWF0cml4LFxyXG4gICAgICAgICAgICB0aGlzLl9iYXNlVm9sdW1lV0NcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIGxldCBib3VuZGluZ1ZvbHVtZTtcclxuICAgIGxldCBtb2RlbE1hdHJpeCA9IE1hdHJpeDQuSURFTlRJVFk7XHJcbiAgICBpZiAoZnJhbWVTdGF0ZS5tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUzRCkge1xyXG4gICAgICAgIG1vZGVsTWF0cml4ID0gdGhpcy5tb2RlbE1hdHJpeDtcclxuICAgICAgICBib3VuZGluZ1ZvbHVtZSA9IEJvdW5kaW5nU3BoZXJlLmNsb25lKFxyXG4gICAgICAgICAgICB0aGlzLl9iYXNlVm9sdW1lV0MsXHJcbiAgICAgICAgICAgIHRoaXMuX2JvdW5kaW5nVm9sdW1lXHJcbiAgICAgICAgKTtcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYm91bmRpbmdWb2x1bWUgPSBCb3VuZGluZ1NwaGVyZS5jbG9uZShcclxuICAgICAgICAgICAgdGhpcy5fYmFzZVZvbHVtZTJELFxyXG4gICAgICAgICAgICB0aGlzLl9ib3VuZGluZ1ZvbHVtZVxyXG4gICAgICAgICk7XHJcbiAgICB9XHJcbiAgICB1cGRhdGVCb3VuZGluZ1ZvbHVtZSh0aGlzLCBmcmFtZVN0YXRlLCBib3VuZGluZ1ZvbHVtZSk7XHJcblxyXG4gICAgY29uc3QgYmxlbmRPcHRpb25DaGFuZ2VkID0gdGhpcy5fYmxlbmRPcHRpb24gIT09IHRoaXMuYmxlbmRPcHRpb247XHJcbiAgICB0aGlzLl9ibGVuZE9wdGlvbiA9IHRoaXMuYmxlbmRPcHRpb247XHJcblxyXG4gICAgaWYgKGJsZW5kT3B0aW9uQ2hhbmdlZCkge1xyXG4gICAgICAgIGlmIChcclxuICAgICAgICAgICAgdGhpcy5fYmxlbmRPcHRpb24gPT09IEJsZW5kT3B0aW9uLk9QQVFVRSB8fFxyXG4gICAgICAgICAgICB0aGlzLl9ibGVuZE9wdGlvbiA9PT0gQmxlbmRPcHRpb24uT1BBUVVFX0FORF9UUkFOU0xVQ0VOVFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLl9yc09wYXF1ZSA9IFJlbmRlclN0YXRlLmZyb21DYWNoZSh7XHJcbiAgICAgICAgICAgICAgICBkZXB0aFRlc3Q6IHtcclxuICAgICAgICAgICAgICAgICAgICBlbmFibGVkOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgICAgIGZ1bmM6IFdlYkdMQ29uc3RhbnRzLkxFU1MsXHJcbiAgICAgICAgICAgICAgICB9LFxyXG4gICAgICAgICAgICAgICAgZGVwdGhNYXNrOiB0cnVlLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB0aGlzLl9yc09wYXF1ZSA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIElmIE9QQVFVRV9BTkRfVFJBTlNMVUNFTlQgaXMgaW4gdXNlLCBvbmx5IHRoZSBvcGFxdWUgcGFzcyBnZXRzIHRoZSBiZW5lZml0IG9mIHRoZSBkZXB0aCBidWZmZXIsXHJcbiAgICAgICAgLy8gbm90IHRoZSB0cmFuc2x1Y2VudCBwYXNzLiAgT3RoZXJ3aXNlLCBpZiB0aGUgVFJBTlNMVUNFTlQgcGFzcyBpcyBvbiBpdHMgb3duLCBpdCB0dXJucyBvblxyXG4gICAgICAgIC8vIGEgZGVwdGhNYXNrIGluIGxpZXUgb2YgZnVsbCBkZXB0aCBzb3J0aW5nIChiZWNhdXNlIGl0IGhhcyBvcGFxdWUtaXNoIGZyYWdtZW50cyB0aGF0IGxvb2sgYmFkIGluIE9JVCkuXHJcbiAgICAgICAgLy8gV2hlbiB0aGUgVFJBTlNMVUNFTlQgZGVwdGggbWFzayBpcyBpbiB1c2UsIGxhYmVsIGJhY2tncm91bmRzIHJlcXVpcmUgdGhlIGRlcHRoIGZ1bmMgdG8gYmUgTEVRVUFMLlxyXG4gICAgICAgIGNvbnN0IHVzZVRyYW5zbHVjZW50RGVwdGhNYXNrID1cclxuICAgICAgICAgICAgdGhpcy5fYmxlbmRPcHRpb24gPT09IEJsZW5kT3B0aW9uLlRSQU5TTFVDRU5UO1xyXG5cclxuICAgICAgICBpZiAoXHJcbiAgICAgICAgICAgIHRoaXMuX2JsZW5kT3B0aW9uID09PSBCbGVuZE9wdGlvbi5UUkFOU0xVQ0VOVCB8fFxyXG4gICAgICAgICAgICB0aGlzLl9ibGVuZE9wdGlvbiA9PT0gQmxlbmRPcHRpb24uT1BBUVVFX0FORF9UUkFOU0xVQ0VOVFxyXG4gICAgICAgICkge1xyXG4gICAgICAgICAgICB0aGlzLl9yc1RyYW5zbHVjZW50ID0gUmVuZGVyU3RhdGUuZnJvbUNhY2hlKHtcclxuICAgICAgICAgICAgICAgIGRlcHRoVGVzdDoge1xyXG4gICAgICAgICAgICAgICAgICAgIGVuYWJsZWQ6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgZnVuYzogdXNlVHJhbnNsdWNlbnREZXB0aE1hc2tcclxuICAgICAgICAgICAgICAgICAgICAgICAgPyBXZWJHTENvbnN0YW50cy5MRVFVQUxcclxuICAgICAgICAgICAgICAgICAgICAgICAgOiBXZWJHTENvbnN0YW50cy5MRVNTLFxyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIGRlcHRoTWFzazogdXNlVHJhbnNsdWNlbnREZXB0aE1hc2ssXHJcbiAgICAgICAgICAgICAgICBibGVuZGluZzogQmxlbmRpbmdTdGF0ZS5BTFBIQV9CTEVORCxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdGhpcy5fcnNUcmFuc2x1Y2VudCA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgdGhpcy5fc2hhZGVyRGlzYWJsZURlcHRoRGlzdGFuY2UgPVxyXG4gICAgICAgIHRoaXMuX3NoYWRlckRpc2FibGVEZXB0aERpc3RhbmNlIHx8XHJcbiAgICAgICAgZnJhbWVTdGF0ZS5taW5pbXVtRGlzYWJsZURlcHRoVGVzdERpc3RhbmNlICE9PSAwLjA7XHJcblxyXG4gICAgbGV0IHZzU291cmNlO1xyXG4gICAgbGV0IGZzU291cmNlO1xyXG4gICAgbGV0IHZzO1xyXG4gICAgbGV0IGZzO1xyXG4gICAgbGV0IHZlcnREZWZpbmVzO1xyXG5cclxuICAgIGNvbnN0IHN1cHBvcnRWU1RleHR1cmVSZWFkcyA9XHJcbiAgICAgICAgQ29udGV4dExpbWl0cy5tYXhpbXVtVmVydGV4VGV4dHVyZUltYWdlVW5pdHMgPiAwO1xyXG5cclxuICAgIGlmIChcclxuICAgICAgICBibGVuZE9wdGlvbkNoYW5nZWQgfHxcclxuICAgICAgICB0aGlzLl9zaGFkZXJSb3RhdGlvbiAhPT0gdGhpcy5fY29tcGlsZWRTaGFkZXJSb3RhdGlvbiB8fFxyXG4gICAgICAgIHRoaXMuX3NoYWRlckFsaWduZWRBeGlzICE9PSB0aGlzLl9jb21waWxlZFNoYWRlckFsaWduZWRBeGlzIHx8XHJcbiAgICAgICAgdGhpcy5fc2hhZGVyU2NhbGVCeURpc3RhbmNlICE9PSB0aGlzLl9jb21waWxlZFNoYWRlclNjYWxlQnlEaXN0YW5jZSB8fFxyXG4gICAgICAgIHRoaXMuX3NoYWRlclRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgIT09XHJcbiAgICAgICAgdGhpcy5fY29tcGlsZWRTaGFkZXJUcmFuc2x1Y2VuY3lCeURpc3RhbmNlIHx8XHJcbiAgICAgICAgdGhpcy5fc2hhZGVyUGl4ZWxPZmZzZXRTY2FsZUJ5RGlzdGFuY2UgIT09XHJcbiAgICAgICAgdGhpcy5fY29tcGlsZWRTaGFkZXJQaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZSB8fFxyXG4gICAgICAgIHRoaXMuX3NoYWRlckRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiAhPT1cclxuICAgICAgICB0aGlzLl9jb21waWxlZFNoYWRlckRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiB8fFxyXG4gICAgICAgIHRoaXMuX3NoYWRlckRpc2FibGVEZXB0aERpc3RhbmNlICE9PVxyXG4gICAgICAgIHRoaXMuX2NvbXBpbGVkU2hhZGVyRGlzYWJsZURlcHRoRGlzdGFuY2UgfHxcclxuICAgICAgICB0aGlzLl9zaGFkZXJDbGFtcFRvR3JvdW5kICE9PSB0aGlzLl9jb21waWxlZFNoYWRlckNsYW1wVG9Hcm91bmQgfHxcclxuICAgICAgICB0aGlzLl9zZGYgIT09IHRoaXMuX2NvbXBpbGVkU0RGXHJcbiAgICApIHtcclxuICAgICAgICB2c1NvdXJjZSA9IEJpbGxib2FyZENvbGxlY3Rpb25WUztcclxuICAgICAgICBmc1NvdXJjZSA9IEJpbGxib2FyZENvbGxlY3Rpb25GUztcclxuXHJcbiAgICAgICAgdmVydERlZmluZXMgPSBbXTtcclxuICAgICAgICBpZiAoZGVmaW5lZCh0aGlzLl9iYXRjaFRhYmxlKSkge1xyXG4gICAgICAgICAgICB2ZXJ0RGVmaW5lcy5wdXNoKFwiVkVDVE9SX1RJTEVcIik7XHJcbiAgICAgICAgICAgIHZzU291cmNlID0gdGhpcy5fYmF0Y2hUYWJsZS5nZXRWZXJ0ZXhTaGFkZXJDYWxsYmFjayhcclxuICAgICAgICAgICAgICAgIGZhbHNlLFxyXG4gICAgICAgICAgICAgICAgXCJhX2JhdGNoSWRcIixcclxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICApKHZzU291cmNlKTtcclxuICAgICAgICAgICAgZnNTb3VyY2UgPSB0aGlzLl9iYXRjaFRhYmxlLmdldEZyYWdtZW50U2hhZGVyQ2FsbGJhY2soXHJcbiAgICAgICAgICAgICAgICBmYWxzZSxcclxuICAgICAgICAgICAgICAgIHVuZGVmaW5lZFxyXG4gICAgICAgICAgICApKGZzU291cmNlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHZzID0gbmV3IFNoYWRlclNvdXJjZSh7XHJcbiAgICAgICAgICAgIGRlZmluZXM6IHZlcnREZWZpbmVzLFxyXG4gICAgICAgICAgICBzb3VyY2VzOiBbdnNTb3VyY2VdLFxyXG4gICAgICAgIH0pO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fRU5VRU5BQkxFRCkge1xyXG4gICAgICAgICAgICB2cy5kZWZpbmVzLnB1c2goXCJFTlVfRU5BQkxFRFwiKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9pbnN0YW5jZWQpIHtcclxuICAgICAgICAgICAgdnMuZGVmaW5lcy5wdXNoKFwiSU5TVEFOQ0VEXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fc2hhZGVyUm90YXRpb24pIHtcclxuICAgICAgICAgICAgdnMuZGVmaW5lcy5wdXNoKFwiUk9UQVRJT05cIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9zaGFkZXJBbGlnbmVkQXhpcykge1xyXG4gICAgICAgICAgICB2cy5kZWZpbmVzLnB1c2goXCJBTElHTkVEX0FYSVNcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9zaGFkZXJTY2FsZUJ5RGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgdnMuZGVmaW5lcy5wdXNoKFwiRVlFX0RJU1RBTkNFX1NDQUxJTkdcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9zaGFkZXJUcmFuc2x1Y2VuY3lCeURpc3RhbmNlKSB7XHJcbiAgICAgICAgICAgIHZzLmRlZmluZXMucHVzaChcIkVZRV9ESVNUQU5DRV9UUkFOU0xVQ0VOQ1lcIik7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0aGlzLl9zaGFkZXJQaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZSkge1xyXG4gICAgICAgICAgICB2cy5kZWZpbmVzLnB1c2goXCJFWUVfRElTVEFOQ0VfUElYRUxfT0ZGU0VUXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fc2hhZGVyRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uKSB7XHJcbiAgICAgICAgICAgIHZzLmRlZmluZXMucHVzaChcIkRJU1RBTkNFX0RJU1BMQVlfQ09ORElUSU9OXCIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAodGhpcy5fc2hhZGVyRGlzYWJsZURlcHRoRGlzdGFuY2UpIHtcclxuICAgICAgICAgICAgdnMuZGVmaW5lcy5wdXNoKFwiRElTQUJMRV9ERVBUSF9ESVNUQU5DRVwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHRoaXMuX3NoYWRlckNsYW1wVG9Hcm91bmQpIHtcclxuICAgICAgICAgICAgaWYgKHN1cHBvcnRWU1RleHR1cmVSZWFkcykge1xyXG4gICAgICAgICAgICAgICAgdnMuZGVmaW5lcy5wdXNoKFwiVkVSVEVYX0RFUFRIX0NIRUNLXCIpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdnMuZGVmaW5lcy5wdXNoKFwiRlJBR01FTlRfREVQVEhfQ0hFQ0tcIik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IHNkZkVkZ2UgPSAxLjAgLSBTREZTZXR0aW5ncy5DVVRPRkY7XHJcblxyXG4gICAgICAgIGlmICh0aGlzLl9zZGYpIHtcclxuICAgICAgICAgICAgdnMuZGVmaW5lcy5wdXNoKFwiU0RGXCIpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgdmVjdG9yRnJhZ0RlZmluZSA9IGRlZmluZWQodGhpcy5fYmF0Y2hUYWJsZSkgPyBcIlZFQ1RPUl9USUxFXCIgOiBcIlwiO1xyXG5cclxuICAgICAgICBpZiAodGhpcy5fYmxlbmRPcHRpb24gPT09IEJsZW5kT3B0aW9uLk9QQVFVRV9BTkRfVFJBTlNMVUNFTlQpIHtcclxuICAgICAgICAgICAgZnMgPSBuZXcgU2hhZGVyU291cmNlKHtcclxuICAgICAgICAgICAgICAgIGRlZmluZXM6IFtcIk9QQVFVRVwiLCB2ZWN0b3JGcmFnRGVmaW5lXSxcclxuICAgICAgICAgICAgICAgIHNvdXJjZXM6IFtmc1NvdXJjZV0sXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2hhZGVyQ2xhbXBUb0dyb3VuZCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHN1cHBvcnRWU1RleHR1cmVSZWFkcykge1xyXG4gICAgICAgICAgICAgICAgICAgIGZzLmRlZmluZXMucHVzaChcIlZFUlRFWF9ERVBUSF9DSEVDS1wiKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnMuZGVmaW5lcy5wdXNoKFwiRlJBR01FTlRfREVQVEhfQ0hFQ0tcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZGYpIHtcclxuICAgICAgICAgICAgICAgIGZzLmRlZmluZXMucHVzaChcIlNERlwiKTtcclxuICAgICAgICAgICAgICAgIGZzLmRlZmluZXMucHVzaChgU0RGX0VER0UgJHtzZGZFZGdlfWApO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB0aGlzLl9zcCA9IFNoYWRlclByb2dyYW0ucmVwbGFjZUNhY2hlKHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBzaGFkZXJQcm9ncmFtOiB0aGlzLl9zcCxcclxuICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnMsXHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZTogZnMsXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcclxuICAgICAgICAgICAgfSk7XHJcblxyXG4gICAgICAgICAgICBmcyA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xyXG4gICAgICAgICAgICAgICAgZGVmaW5lczogW1wiVFJBTlNMVUNFTlRcIiwgdmVjdG9yRnJhZ0RlZmluZV0sXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VzOiBbZnNTb3VyY2VdLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NoYWRlckNsYW1wVG9Hcm91bmQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0VlNUZXh0dXJlUmVhZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmcy5kZWZpbmVzLnB1c2goXCJWRVJURVhfREVQVEhfQ0hFQ0tcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZzLmRlZmluZXMucHVzaChcIkZSQUdNRU5UX0RFUFRIX0NIRUNLXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZGYpIHtcclxuICAgICAgICAgICAgICAgIGZzLmRlZmluZXMucHVzaChcIlNERlwiKTtcclxuICAgICAgICAgICAgICAgIGZzLmRlZmluZXMucHVzaChgU0RGX0VER0UgJHtzZGZFZGdlfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3NwVHJhbnNsdWNlbnQgPSBTaGFkZXJQcm9ncmFtLnJlcGxhY2VDYWNoZSh7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgc2hhZGVyUHJvZ3JhbTogdGhpcy5fc3BUcmFuc2x1Y2VudCxcclxuICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnMsXHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZTogZnMsXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fYmxlbmRPcHRpb24gPT09IEJsZW5kT3B0aW9uLk9QQVFVRSkge1xyXG4gICAgICAgICAgICBmcyA9IG5ldyBTaGFkZXJTb3VyY2Uoe1xyXG4gICAgICAgICAgICAgICAgZGVmaW5lczogW3ZlY3RvckZyYWdEZWZpbmVdLFxyXG4gICAgICAgICAgICAgICAgc291cmNlczogW2ZzU291cmNlXSxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zaGFkZXJDbGFtcFRvR3JvdW5kKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoc3VwcG9ydFZTVGV4dHVyZVJlYWRzKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZnMuZGVmaW5lcy5wdXNoKFwiVkVSVEVYX0RFUFRIX0NIRUNLXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBmcy5kZWZpbmVzLnB1c2goXCJGUkFHTUVOVF9ERVBUSF9DSEVDS1wiKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAodGhpcy5fc2RmKSB7XHJcbiAgICAgICAgICAgICAgICBmcy5kZWZpbmVzLnB1c2goXCJTREZcIik7XHJcbiAgICAgICAgICAgICAgICBmcy5kZWZpbmVzLnB1c2goYFNERl9FREdFICR7c2RmRWRnZX1gKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB0aGlzLl9zcCA9IFNoYWRlclByb2dyYW0ucmVwbGFjZUNhY2hlKHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXHJcbiAgICAgICAgICAgICAgICBzaGFkZXJQcm9ncmFtOiB0aGlzLl9zcCxcclxuICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnMsXHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZTogZnMsXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAodGhpcy5fYmxlbmRPcHRpb24gPT09IEJsZW5kT3B0aW9uLlRSQU5TTFVDRU5UKSB7XHJcbiAgICAgICAgICAgIGZzID0gbmV3IFNoYWRlclNvdXJjZSh7XHJcbiAgICAgICAgICAgICAgICBkZWZpbmVzOiBbdmVjdG9yRnJhZ0RlZmluZV0sXHJcbiAgICAgICAgICAgICAgICBzb3VyY2VzOiBbZnNTb3VyY2VdLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuX3NoYWRlckNsYW1wVG9Hcm91bmQpIHtcclxuICAgICAgICAgICAgICAgIGlmIChzdXBwb3J0VlNUZXh0dXJlUmVhZHMpIHtcclxuICAgICAgICAgICAgICAgICAgICBmcy5kZWZpbmVzLnB1c2goXCJWRVJURVhfREVQVEhfQ0hFQ0tcIik7XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIGZzLmRlZmluZXMucHVzaChcIkZSQUdNRU5UX0RFUFRIX0NIRUNLXCIpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmICh0aGlzLl9zZGYpIHtcclxuICAgICAgICAgICAgICAgIGZzLmRlZmluZXMucHVzaChcIlNERlwiKTtcclxuICAgICAgICAgICAgICAgIGZzLmRlZmluZXMucHVzaChgU0RGX0VER0UgJHtzZGZFZGdlfWApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuX3NwVHJhbnNsdWNlbnQgPSBTaGFkZXJQcm9ncmFtLnJlcGxhY2VDYWNoZSh7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgc2hhZGVyUHJvZ3JhbTogdGhpcy5fc3BUcmFuc2x1Y2VudCxcclxuICAgICAgICAgICAgICAgIHZlcnRleFNoYWRlclNvdXJjZTogdnMsXHJcbiAgICAgICAgICAgICAgICBmcmFnbWVudFNoYWRlclNvdXJjZTogZnMsXHJcbiAgICAgICAgICAgICAgICBhdHRyaWJ1dGVMb2NhdGlvbnM6IGF0dHJpYnV0ZUxvY2F0aW9ucyxcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aGlzLl9jb21waWxlZFNoYWRlclJvdGF0aW9uID0gdGhpcy5fc2hhZGVyUm90YXRpb247XHJcbiAgICAgICAgdGhpcy5fY29tcGlsZWRTaGFkZXJBbGlnbmVkQXhpcyA9IHRoaXMuX3NoYWRlckFsaWduZWRBeGlzO1xyXG4gICAgICAgIHRoaXMuX2NvbXBpbGVkU2hhZGVyU2NhbGVCeURpc3RhbmNlID0gdGhpcy5fc2hhZGVyU2NhbGVCeURpc3RhbmNlO1xyXG4gICAgICAgIHRoaXMuX2NvbXBpbGVkU2hhZGVyVHJhbnNsdWNlbmN5QnlEaXN0YW5jZSA9IHRoaXMuX3NoYWRlclRyYW5zbHVjZW5jeUJ5RGlzdGFuY2U7XHJcbiAgICAgICAgdGhpcy5fY29tcGlsZWRTaGFkZXJQaXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZSA9IHRoaXMuX3NoYWRlclBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlO1xyXG4gICAgICAgIHRoaXMuX2NvbXBpbGVkU2hhZGVyRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uID0gdGhpcy5fc2hhZGVyRGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uO1xyXG4gICAgICAgIHRoaXMuX2NvbXBpbGVkU2hhZGVyRGlzYWJsZURlcHRoRGlzdGFuY2UgPSB0aGlzLl9zaGFkZXJEaXNhYmxlRGVwdGhEaXN0YW5jZTtcclxuICAgICAgICB0aGlzLl9jb21waWxlZFNoYWRlckNsYW1wVG9Hcm91bmQgPSB0aGlzLl9zaGFkZXJDbGFtcFRvR3JvdW5kO1xyXG4gICAgICAgIHRoaXMuX2NvbXBpbGVkU0RGID0gdGhpcy5fc2RmO1xyXG4gICAgfVxyXG5cclxuICAgIGNvbnN0IGNvbW1hbmRMaXN0ID0gZnJhbWVTdGF0ZS5jb21tYW5kTGlzdDtcclxuXHJcbiAgICBpZiAocGFzcy5yZW5kZXIgfHwgcGFzcy5waWNrKSB7XHJcbiAgICAgICAgY29uc3QgY29sb3JMaXN0ID0gdGhpcy5fY29sb3JDb21tYW5kcztcclxuXHJcbiAgICAgICAgY29uc3Qgb3BhcXVlID0gdGhpcy5fYmxlbmRPcHRpb24gPT09IEJsZW5kT3B0aW9uLk9QQVFVRTtcclxuICAgICAgICBjb25zdCBvcGFxdWVBbmRUcmFuc2x1Y2VudCA9XHJcbiAgICAgICAgICAgIHRoaXMuX2JsZW5kT3B0aW9uID09PSBCbGVuZE9wdGlvbi5PUEFRVUVfQU5EX1RSQU5TTFVDRU5UO1xyXG5cclxuICAgICAgICBjb25zdCB2YSA9IHRoaXMuX3ZhZi52YTtcclxuICAgICAgICBjb25zdCB2YUxlbmd0aCA9IHZhLmxlbmd0aDtcclxuXHJcbiAgICAgICAgbGV0IHVuaWZvcm1zID0gdGhpcy5fdW5pZm9ybXM7XHJcbiAgICAgICAgbGV0IHBpY2tJZDtcclxuICAgICAgICBpZiAoZGVmaW5lZCh0aGlzLl9iYXRjaFRhYmxlKSkge1xyXG4gICAgICAgICAgICB1bmlmb3JtcyA9IHRoaXMuX2JhdGNoVGFibGUuZ2V0VW5pZm9ybU1hcENhbGxiYWNrKCkodW5pZm9ybXMpO1xyXG4gICAgICAgICAgICBwaWNrSWQgPSB0aGlzLl9iYXRjaFRhYmxlLmdldFBpY2tJZCgpO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBpY2tJZCA9IFwidl9waWNrQ29sb3JcIjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbG9yTGlzdC5sZW5ndGggPSB2YUxlbmd0aDtcclxuICAgICAgICBjb25zdCB0b3RhbExlbmd0aCA9IG9wYXF1ZUFuZFRyYW5zbHVjZW50ID8gdmFMZW5ndGggKiAyIDogdmFMZW5ndGg7XHJcbiAgICAgICAgZm9yIChsZXQgaiA9IDA7IGogPCB0b3RhbExlbmd0aDsgKytqKSB7XHJcbiAgICAgICAgICAgIGxldCBjb21tYW5kID0gY29sb3JMaXN0W2pdO1xyXG4gICAgICAgICAgICBpZiAoIWRlZmluZWQoY29tbWFuZCkpIHtcclxuICAgICAgICAgICAgICAgIGNvbW1hbmQgPSBjb2xvckxpc3Rbal0gPSBuZXcgRHJhd0NvbW1hbmQoKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3Qgb3BhcXVlQ29tbWFuZCA9IG9wYXF1ZSB8fCAob3BhcXVlQW5kVHJhbnNsdWNlbnQgJiYgaiAlIDIgPT09IDApO1xyXG5cclxuICAgICAgICAgICAgY29tbWFuZC5wYXNzID1cclxuICAgICAgICAgICAgICAgIG9wYXF1ZUNvbW1hbmQgfHwgIW9wYXF1ZUFuZFRyYW5zbHVjZW50ID8gUGFzcy5PUEFRVUUgOiBQYXNzLlRSQU5TTFVDRU5UO1xyXG4gICAgICAgICAgICBjb21tYW5kLm93bmVyID0gdGhpcztcclxuXHJcbiAgICAgICAgICAgIGNvbnN0IGluZGV4ID0gb3BhcXVlQW5kVHJhbnNsdWNlbnQgPyBNYXRoLmZsb29yKGogLyAyLjApIDogajtcclxuICAgICAgICAgICAgY29tbWFuZC5ib3VuZGluZ1ZvbHVtZSA9IGJvdW5kaW5nVm9sdW1lO1xyXG4gICAgICAgICAgICBjb21tYW5kLm1vZGVsTWF0cml4ID0gbW9kZWxNYXRyaXg7XHJcbiAgICAgICAgICAgIGNvbW1hbmQuY291bnQgPSB2YVtpbmRleF0uaW5kaWNlc0NvdW50O1xyXG4gICAgICAgICAgICBjb21tYW5kLnNoYWRlclByb2dyYW0gPSBvcGFxdWVDb21tYW5kID8gdGhpcy5fc3AgOiB0aGlzLl9zcFRyYW5zbHVjZW50O1xyXG4gICAgICAgICAgICBjb21tYW5kLnVuaWZvcm1NYXAgPSB1bmlmb3JtcztcclxuICAgICAgICAgICAgY29tbWFuZC52ZXJ0ZXhBcnJheSA9IHZhW2luZGV4XS52YTtcclxuICAgICAgICAgICAgY29tbWFuZC5yZW5kZXJTdGF0ZSA9IG9wYXF1ZUNvbW1hbmRcclxuICAgICAgICAgICAgICAgID8gdGhpcy5fcnNPcGFxdWVcclxuICAgICAgICAgICAgICAgIDogdGhpcy5fcnNUcmFuc2x1Y2VudDtcclxuICAgICAgICAgICAgY29tbWFuZC5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZSA9IHRoaXMuZGVidWdTaG93Qm91bmRpbmdWb2x1bWU7XHJcbiAgICAgICAgICAgIGNvbW1hbmQucGlja0lkID0gcGlja0lkO1xyXG5cclxuICAgICAgICAgICAgaWYgKHRoaXMuX2luc3RhbmNlZCkge1xyXG4gICAgICAgICAgICAgICAgY29tbWFuZC5jb3VudCA9IDY7XHJcbiAgICAgICAgICAgICAgICBjb21tYW5kLmluc3RhbmNlQ291bnQgPSBiaWxsYm9hcmRzTGVuZ3RoO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb21tYW5kTGlzdC5wdXNoKGNvbW1hbmQpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYgKHRoaXMuZGVidWdTaG93VGV4dHVyZUF0bGFzKSB7XHJcbiAgICAgICAgICAgIGlmICghZGVmaW5lZCh0aGlzLmRlYnVnQ29tbWFuZCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZGVidWdDb21tYW5kID0gY3JlYXRlRGVidWdDb21tYW5kKHRoaXMsIGZyYW1lU3RhdGUuY29udGV4dCk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvbW1hbmRMaXN0LnB1c2godGhpcy5kZWJ1Z0NvbW1hbmQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxufTtcclxuXHJcbi8qKlxyXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhpcyBvYmplY3Qgd2FzIGRlc3Ryb3llZDsgb3RoZXJ3aXNlLCBmYWxzZS5cclxuICogPGJyIC8+PGJyIC8+XHJcbiAqIElmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxyXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi5cclxuICpcclxuICogQHJldHVybnMge0Jvb2xlYW59IDxjb2RlPnRydWU8L2NvZGU+IGlmIHRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQ7IG90aGVyd2lzZSwgPGNvZGU+ZmFsc2U8L2NvZGU+LlxyXG4gKlxyXG4gKiBAc2VlIEJpbGxib2FyZENvbGxlY3Rpb24jZGVzdHJveVxyXG4gKi9cclxuQmlsbGJvYXJkQ29sbGVjdGlvbi5wcm90b3R5cGUuaXNEZXN0cm95ZWQgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICByZXR1cm4gZmFsc2U7XHJcbn07XHJcblxyXG4vKipcclxuICogRGVzdHJveXMgdGhlIFdlYkdMIHJlc291cmNlcyBoZWxkIGJ5IHRoaXMgb2JqZWN0LiAgRGVzdHJveWluZyBhbiBvYmplY3QgYWxsb3dzIGZvciBkZXRlcm1pbmlzdGljXHJcbiAqIHJlbGVhc2Ugb2YgV2ViR0wgcmVzb3VyY2VzLCBpbnN0ZWFkIG9mIHJlbHlpbmcgb24gdGhlIGdhcmJhZ2UgY29sbGVjdG9yIHRvIGRlc3Ryb3kgdGhpcyBvYmplY3QuXHJcbiAqIDxiciAvPjxiciAvPlxyXG4gKiBPbmNlIGFuIG9iamVjdCBpcyBkZXN0cm95ZWQsIGl0IHNob3VsZCBub3QgYmUgdXNlZDsgY2FsbGluZyBhbnkgZnVuY3Rpb24gb3RoZXIgdGhhblxyXG4gKiA8Y29kZT5pc0Rlc3Ryb3llZDwvY29kZT4gd2lsbCByZXN1bHQgaW4gYSB7QGxpbmsgRGV2ZWxvcGVyRXJyb3J9IGV4Y2VwdGlvbi4gIFRoZXJlZm9yZSxcclxuICogYXNzaWduIHRoZSByZXR1cm4gdmFsdWUgKDxjb2RlPnVuZGVmaW5lZDwvY29kZT4pIHRvIHRoZSBvYmplY3QgYXMgZG9uZSBpbiB0aGUgZXhhbXBsZS5cclxuICpcclxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IFRoaXMgb2JqZWN0IHdhcyBkZXN0cm95ZWQsIGkuZS4sIGRlc3Ryb3koKSB3YXMgY2FsbGVkLlxyXG4gKlxyXG4gKlxyXG4gKiBAZXhhbXBsZVxyXG4gKiBiaWxsYm9hcmRzID0gYmlsbGJvYXJkcyAmJiBiaWxsYm9hcmRzLmRlc3Ryb3koKTtcclxuICpcclxuICogQHNlZSBCaWxsYm9hcmRDb2xsZWN0aW9uI2lzRGVzdHJveWVkXHJcbiAqL1xyXG5CaWxsYm9hcmRDb2xsZWN0aW9uLnByb3RvdHlwZS5kZXN0cm95ID0gZnVuY3Rpb24gKCkge1xyXG4gICAgaWYgKGRlZmluZWQodGhpcy5fcmVtb3ZlQ2FsbGJhY2tGdW5jKSkge1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUNhbGxiYWNrRnVuYygpO1xyXG4gICAgICAgIHRoaXMuX3JlbW92ZUNhbGxiYWNrRnVuYyA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxuXHJcbiAgICB0aGlzLl90ZXh0dXJlQXRsYXMgPVxyXG4gICAgICAgIHRoaXMuX2Rlc3Ryb3lUZXh0dXJlQXRsYXMgJiZcclxuICAgICAgICB0aGlzLl90ZXh0dXJlQXRsYXMgJiZcclxuICAgICAgICB0aGlzLl90ZXh0dXJlQXRsYXMuZGVzdHJveSgpO1xyXG4gICAgdGhpcy5fc3AgPSB0aGlzLl9zcCAmJiB0aGlzLl9zcC5kZXN0cm95KCk7XHJcbiAgICB0aGlzLl9zcFRyYW5zbHVjZW50ID0gdGhpcy5fc3BUcmFuc2x1Y2VudCAmJiB0aGlzLl9zcFRyYW5zbHVjZW50LmRlc3Ryb3koKTtcclxuICAgIHRoaXMuX3ZhZiA9IHRoaXMuX3ZhZiAmJiB0aGlzLl92YWYuZGVzdHJveSgpO1xyXG4gICAgZGVzdHJveUJpbGxib2FyZHModGhpcy5fYmlsbGJvYXJkcyk7XHJcblxyXG4gICAgcmV0dXJuIGRlc3Ryb3lPYmplY3QodGhpcyk7XHJcbn07XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEJpbGxib2FyZENvbGxlY3Rpb247XHJcbiIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gMjAyMC8zLzcuXHJcbiAqL1xyXG4vL+agueaNrumrmOW6puiOt+WPluWcsOWbvuWxgue6p1xyXG5mdW5jdGlvbiBhbHRpdHVkZVRvWm9vbShhbHRpdHVkZSkge1xyXG4gICAgdmFyIEEgPSA0MDQ4Ny41NztcclxuICAgIHZhciBCID0gMC4wMDAwNzA5Njc1ODtcclxuICAgIHZhciBDID0gOTE2MTAuNzQ7XHJcbiAgICB2YXIgRCA9IC00MDQ2Ny43NDtcclxuXHJcbiAgICByZXR1cm4gTWF0aC5yb3VuZChEKyhBLUQpLygxK01hdGgucG93KGFsdGl0dWRlL0MsIEIpKSk7XHJcbn1cclxuY2xhc3MgQ2FtZXJhRXh0e1xyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgQ2VzaXVtLkNhbWVyYS5wcm90b3R5cGUuZ2V0TGV2ZWwgPSBmdW5jdGlvbiAoKSB7XHJcbiAgICAgICAgICAgIGxldCBoZWlnaHQgPSB0aGlzLl9wb3NpdGlvbkNhcnRvZ3JhcGhpYy5oZWlnaHQ7XHJcbiAgICAgICAgICAgIGlmKGhlaWdodCA9PSB0aGlzLnByZXZDYW1lcmFIZWlnaHQpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMubGV2ZWw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5sZXZlbCA9IGFsdGl0dWRlVG9ab29tKGhlaWdodCk7XHJcbiAgICAgICAgICAgIHRoaXMucHJldkNhbWVyYUhlaWdodCA9IGhlaWdodDtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMubGV2ZWw7XHJcbiAgICAgICAgfTtcclxuICAgIH1cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IENhbWVyYUV4dDtcclxubmV3IENhbWVyYUV4dCgpOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gMjAyMC8zLzYuXHJcbiAqL1xyXG5cclxuY29uc3QgQm91bmRpbmdSZWN0YW5nbGUgPSBDZXNpdW0uQm91bmRpbmdSZWN0YW5nbGU7XHJcbmNvbnN0IENhcnRlc2lhbjIgPSBDZXNpdW0uQ2FydGVzaWFuMjtcclxuY29uc3QgQ29sb3IgPSBDZXNpdW0uQ29sb3I7XHJcbmNvbnN0IGRlZmluZWQgPSBDZXNpdW0uZGVmaW5lZDtcclxuY29uc3QgZGVzdHJveU9iamVjdCA9IENlc2l1bS5kZXN0cm95T2JqZWN0O1xyXG5jb25zdCBCbGVuZE9wdGlvbiA9IENlc2l1bS5CbGVuZE9wdGlvbjtcclxuY29uc3QgSGVpZ2h0UmVmZXJlbmNlID0gQ2VzaXVtLkhlaWdodFJlZmVyZW5jZTtcclxuY29uc3QgSG9yaXpvbnRhbE9yaWdpbiA9IENlc2l1bS5Ib3Jpem9udGFsT3JpZ2luO1xyXG5jb25zdCBMYWJlbFN0eWxlID0gQ2VzaXVtLkxhYmVsU3R5bGU7XHJcbmNvbnN0IFNERlNldHRpbmdzID0gQ2VzaXVtLlNERlNldHRpbmdzO1xyXG5jb25zdCBUZXh0dXJlQXRsYXMgPSBDZXNpdW0uVGV4dHVyZUF0bGFzO1xyXG5jb25zdCBWZXJ0aWNhbE9yaWdpbiA9IENlc2l1bS5WZXJ0aWNhbE9yaWdpbjtcclxuXHJcblxyXG5jb25zdCBMYWJlbENvbGxlY3Rpb24gPSBDZXNpdW0uTGFiZWxDb2xsZWN0aW9uO1xyXG5jb25zdCBCaWxsYm9hcmRDb2xsZWN0aW9uID0gcmVxdWlyZSgnLi4vZXh0L0JpbGxib2FyZENvbGxlY3Rpb24uanMnKTtcclxuY29uc3QgR3JhcGhlbWVTcGxpdHRlciA9IHJlcXVpcmUoJ2dyYXBoZW1lLXNwbGl0dGVyJyk7XHJcblxyXG5cclxuLy8gdmFyIFNERlNldHRpbmdzID0ge1xyXG4vLyAgICAgLyoqXHJcbi8vICAgICAgKiBUaGUgZm9udCBzaXplIGluIHBpeGVsc1xyXG4vLyAgICAgICpcclxuLy8gICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbi8vICAgICAgKiBAY29uc3RhbnRcclxuLy8gICAgICAqL1xyXG4vLyAgICAgRk9OVF9TSVpFOiAyNC4wLFxyXG4vL1xyXG4vLyAgICAgLyoqXHJcbi8vICAgICAgKiBXaGl0ZXNwYWNlIHBhZGRpbmcgYXJvdW5kIGdseXBocy5cclxuLy8gICAgICAqXHJcbi8vICAgICAgKiBAdHlwZSB7TnVtYmVyfVxyXG4vLyAgICAgICogQGNvbnN0YW50XHJcbi8vICAgICAgKi9cclxuLy8gICAgIFBBRERJTkc6IDAuMCxcclxuLy9cclxuLy8gICAgIC8qKlxyXG4vLyAgICAgICogSG93IG1hbnkgcGl4ZWxzIGFyb3VuZCB0aGUgZ2x5cGggc2hhcGUgdG8gdXNlIGZvciBlbmNvZGluZyBkaXN0YW5jZVxyXG4vLyAgICAgICpcclxuLy8gICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbi8vICAgICAgKiBAY29uc3RhbnRcclxuLy8gICAgICAqL1xyXG4vLyAgICAgUkFESVVTOiA4LjAsXHJcbi8vXHJcbi8vICAgICAvKipcclxuLy8gICAgICAqIEhvdyBtdWNoIG9mIHRoZSByYWRpdXMgKHJlbGF0aXZlKSBpcyB1c2VkIGZvciB0aGUgaW5zaWRlIHBhcnQgdGhlIGdseXBoLlxyXG4vLyAgICAgICpcclxuLy8gICAgICAqIEB0eXBlIHtOdW1iZXJ9XHJcbi8vICAgICAgKiBAY29uc3RhbnRcclxuLy8gICAgICAqL1xyXG4vLyAgICAgQ1VUT0ZGOiAwLjI1XHJcbi8vIH07XHJcblxyXG5mdW5jdGlvbiBHbHlwaCgpIHtcclxuICAgIHRoaXMudGV4dHVyZUluZm8gPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmRpbWVuc2lvbnMgPSB1bmRlZmluZWQ7XHJcbiAgICB0aGlzLmJpbGxib2FyZCA9IHVuZGVmaW5lZDtcclxufVxyXG5cclxuLy8gR2x5cGhUZXh0dXJlSW5mbyByZXByZXNlbnRzIGEgc2luZ2xlIGNoYXJhY3RlciwgZHJhd24gaW4gYSBwYXJ0aWN1bGFyIHN0eWxlLFxyXG4vLyBzaGFyZWQgYW5kIHJlZmVyZW5jZSBjb3VudGVkIGFjcm9zcyBhbGwgbGFiZWxzLiAgSXQgbWF5IG9yIG1heSBub3QgaGF2ZSBhblxyXG4vLyBpbmRleCBpbnRvIHRoZSBsYWJlbCBjb2xsZWN0aW9uJ3MgdGV4dHVyZSBhdGxhcywgZGVwZW5kaW5nIG9uIHdoZXRoZXIgdGhlIGNoYXJhY3RlclxyXG4vLyBoYXMgYm90aCB3aWR0aCBhbmQgaGVpZ2h0LCBidXQgaXQgYWx3YXlzIGhhcyBhIHZhbGlkIGRpbWVuc2lvbnMgb2JqZWN0LlxyXG5mdW5jdGlvbiBHbHlwaFRleHR1cmVJbmZvKGxhYmVsQ29sbGVjdGlvbiwgaW5kZXgsIGRpbWVuc2lvbnMpIHtcclxuICAgIHRoaXMubGFiZWxDb2xsZWN0aW9uID0gbGFiZWxDb2xsZWN0aW9uO1xyXG4gICAgdGhpcy5pbmRleCA9IGluZGV4O1xyXG4gICAgdGhpcy5kaW1lbnNpb25zID0gZGltZW5zaW9ucztcclxufVxyXG5cclxuXHJcbi8vIFRyYWRpdGlvbmFsbHksIGxlYWRpbmcgaXMgJTIwIG9mIHRoZSBmb250IHNpemUuXHJcbmNvbnN0IGRlZmF1bHRMaW5lU3BhY2luZ1BlcmNlbnQgPSAxLjI7XHJcbmNvbnN0IHdoaXRlUGl4ZWxDYW52YXNJZCA9IFwiSURfV0hJVEVfUElYRUxcIjtcclxuY29uc3Qgd2hpdGVQaXhlbFNpemUgPSBuZXcgQ2FydGVzaWFuMig0LCA0KTtcclxuY29uc3Qgd2hpdGVQaXhlbEJvdW5kaW5nUmVnaW9uID0gbmV3IEJvdW5kaW5nUmVjdGFuZ2xlKDEsIDEsIDEsIDEpO1xyXG5cclxuXHJcbmZ1bmN0aW9uIGFkZFdoaXRlUGl4ZWxDYW52YXModGV4dHVyZUF0bGFzKSB7XHJcbiAgICBjb25zdCBjYW52YXMgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiY2FudmFzXCIpO1xyXG4gICAgY2FudmFzLndpZHRoID0gd2hpdGVQaXhlbFNpemUueDtcclxuICAgIGNhbnZhcy5oZWlnaHQgPSB3aGl0ZVBpeGVsU2l6ZS55O1xyXG5cclxuICAgIGNvbnN0IGNvbnRleHQyRCA9IGNhbnZhcy5nZXRDb250ZXh0KFwiMmRcIik7XHJcbiAgICBjb250ZXh0MkQuZmlsbFN0eWxlID0gXCIjZmZmXCI7XHJcbiAgICBjb250ZXh0MkQuZmlsbFJlY3QoMCwgMCwgY2FudmFzLndpZHRoLCBjYW52YXMuaGVpZ2h0KTtcclxuXHJcbiAgICAvLyBDYW52YXMgb3BlcmF0aW9ucyB0YWtlIGEgZnJhbWUgdG8gZHJhdy4gVXNlIHRoZSBhc3luY2hyb25vdXMgYWRkIGZ1bmN0aW9uIHdoaWNoIHJlc29sdmVzIGEgcHJvbWlzZSBhbmQgYWxsb3dzIHRoZSBkcmF3IHRvIGNvbXBsZXRlLFxyXG4gICAgLy8gYnV0IHRoZXJlJ3Mgbm8gbmVlZCB0byB3YWl0IG9uIHRoZSBwcm9taXNlIGJlZm9yZSBvcGVyYXRpb24gY2FuIGNvbnRpbnVlXHJcbiAgICB0ZXh0dXJlQXRsYXMuYWRkSW1hZ2Uod2hpdGVQaXhlbENhbnZhc0lkLCBjYW52YXMpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBkcmF3Um91bmRSZWN0KGN0eCwgeCwgeSwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKXtcclxuICAgIGN0eC5iZWdpblBhdGgoKTtcclxuICAgIC8vIHkgPSB5IC0xO1xyXG4gICAgY3R4LmFyYygoeCArIHJhZGl1cyksICh5ICsgcmFkaXVzKSwgcmFkaXVzLCBNYXRoLlBJLCBNYXRoLlBJICogMyAvIDIpO1xyXG4gICAgY3R4LmxpbmVUbygod2lkdGggLSByYWRpdXMgKyB4KSwgeSk7XHJcbiAgICBjdHguYXJjKCh3aWR0aCAtIHJhZGl1cyArIHgpLCAocmFkaXVzICsgeSksIHJhZGl1cywgTWF0aC5QSSAqIDMgLyAyLCBNYXRoLlBJICogMik7XHJcbiAgICBjdHgubGluZVRvKCh3aWR0aCArIHgpLCAoaGVpZ2h0ICsgeSAtIHJhZGl1cykpO1xyXG4gICAgY3R4LmFyYygod2lkdGggLSByYWRpdXMgKyB4KSwgKGhlaWdodCAtIHJhZGl1cyArIHkpLCByYWRpdXMsIDAsIE1hdGguUEkgKiAxIC8gMik7XHJcbiAgICBjdHgubGluZVRvKChyYWRpdXMgKyB4KSwgKGhlaWdodCAreSkpO1xyXG4gICAgY3R4LmFyYygocmFkaXVzICsgeCksIChoZWlnaHQgLSByYWRpdXMgKyB5KSwgcmFkaXVzLCBNYXRoLlBJICogMSAvIDIsIE1hdGguUEkpO1xyXG4gICAgY3R4LmNsb3NlUGF0aCgpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB1bmJpbmRHbHlwaChsYWJlbENvbGxlY3Rpb24sIGdseXBoKSB7XHJcbiAgICBnbHlwaC50ZXh0dXJlSW5mbyA9IHVuZGVmaW5lZDtcclxuICAgIGdseXBoLmRpbWVuc2lvbnMgPSB1bmRlZmluZWQ7XHJcblxyXG4gICAgY29uc3QgYmlsbGJvYXJkID0gZ2x5cGguYmlsbGJvYXJkO1xyXG4gICAgaWYgKGRlZmluZWQoYmlsbGJvYXJkKSkge1xyXG4gICAgICAgIGJpbGxib2FyZC5zaG93ID0gZmFsc2U7XHJcbiAgICAgICAgYmlsbGJvYXJkLmltYWdlID0gdW5kZWZpbmVkO1xyXG4gICAgICAgIGlmIChkZWZpbmVkKGJpbGxib2FyZC5fcmVtb3ZlQ2FsbGJhY2tGdW5jKSkge1xyXG4gICAgICAgICAgICBiaWxsYm9hcmQuX3JlbW92ZUNhbGxiYWNrRnVuYygpO1xyXG4gICAgICAgICAgICBiaWxsYm9hcmQuX3JlbW92ZUNhbGxiYWNrRnVuYyA9IHVuZGVmaW5lZDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGFiZWxDb2xsZWN0aW9uLl9zcGFyZUJpbGxib2FyZHMucHVzaChiaWxsYm9hcmQpO1xyXG4gICAgICAgIGdseXBoLmJpbGxib2FyZCA9IHVuZGVmaW5lZDtcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYWRkR2x5cGhUb1RleHR1cmVBdGxhcyh0ZXh0dXJlQXRsYXMsIGlkLCBjYW52YXMsIGdseXBoVGV4dHVyZUluZm8pIHtcclxuICAgIGdseXBoVGV4dHVyZUluZm8uaW5kZXggPSB0ZXh0dXJlQXRsYXMuYWRkSW1hZ2VTeW5jKGlkLCBjYW52YXMpO1xyXG59XHJcblxyXG5jb25zdCBzcGxpdHRlciA9IG5ldyBHcmFwaGVtZVNwbGl0dGVyKCk7XHJcblxyXG5mdW5jdGlvbiByZWJpbmRBbGxHbHlwaHMobGFiZWxDb2xsZWN0aW9uLCBsYWJlbCxtYXBib3hHbHlwaHMpIHtcclxuICAgIGNvbnN0IHRleHQgPSBsYWJlbC5fcmVuZGVyZWRUZXh0O1xyXG4gICAgaWYodGV4dC5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG4gICAgY29uc3QgZ3JhcGhlbWVzID0gc3BsaXR0ZXIuc3BsaXRHcmFwaGVtZXModGV4dCk7XHJcbiAgICBjb25zdCB0ZXh0TGVuZ3RoID0gZ3JhcGhlbWVzLmxlbmd0aDtcclxuICAgIGNvbnN0IGdseXBocyA9IGxhYmVsLl9nbHlwaHM7XHJcbiAgICBjb25zdCBnbHlwaHNMZW5ndGggPSBnbHlwaHMubGVuZ3RoO1xyXG5cclxuICAgIGxldCBnbHlwaDtcclxuICAgIGxldCBnbHlwaEluZGV4O1xyXG4gICAgbGV0IHRleHRJbmRleDtcclxuXHJcbiAgICAvLyBDb21wdXRlIGEgZm9udCBzaXplIHNjYWxlIHJlbGF0aXZlIHRvIHRoZSBzZGYgZm9udCBnZW5lcmF0ZWQgc2l6ZS5cclxuICAgIC8vIGxhYmVsLl9yZWxhdGl2ZVNpemUgPSBsYWJlbC5fZm9udFNpemUgLyBTREZTZXR0aW5ncy5GT05UX1NJWkU7XHJcbiAgICBsYWJlbC5fcmVsYXRpdmVTaXplID0gbGFiZWwuX2ZvbnRTaXplIC8gMjQ7XHJcblxyXG4gICAgLy8gaWYgd2UgaGF2ZSBtb3JlIGdseXBocyB0aGFuIG5lZWRlZCwgdW5iaW5kIHRoZSBleHRyYXMuXHJcbiAgICBpZiAodGV4dExlbmd0aCA8IGdseXBoc0xlbmd0aCkge1xyXG4gICAgICAgIGZvciAoZ2x5cGhJbmRleCA9IHRleHRMZW5ndGg7IGdseXBoSW5kZXggPCBnbHlwaHNMZW5ndGg7ICsrZ2x5cGhJbmRleCkge1xyXG4gICAgICAgICAgICB1bmJpbmRHbHlwaChsYWJlbENvbGxlY3Rpb24sIGdseXBoc1tnbHlwaEluZGV4XSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8vIHByZXNpemUgZ2x5cGhzIHRvIG1hdGNoIHRoZSBuZXcgdGV4dCBsZW5ndGhcclxuICAgIGdseXBocy5sZW5ndGggPSB0ZXh0TGVuZ3RoO1xyXG5cclxuICAgIGNvbnN0IHNob3dCYWNrZ3JvdW5kID1cclxuICAgICAgICBsYWJlbC5fc2hvd0JhY2tncm91bmQgJiYgdGV4dC5zcGxpdChcIlxcblwiKS5qb2luKFwiXCIpLmxlbmd0aCA+IDA7XHJcbiAgICBsZXQgYmFja2dyb3VuZEJpbGxib2FyZCA9IGxhYmVsLl9iYWNrZ3JvdW5kQmlsbGJvYXJkO1xyXG4gICAgY29uc3QgYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24gPVxyXG4gICAgICAgIGxhYmVsQ29sbGVjdGlvbi5fYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb247XHJcbiAgICBpZiAoIXNob3dCYWNrZ3JvdW5kKSB7XHJcbiAgICAgICAgaWYgKGRlZmluZWQoYmFja2dyb3VuZEJpbGxib2FyZCkpIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24ucmVtb3ZlKGJhY2tncm91bmRCaWxsYm9hcmQpO1xyXG4gICAgICAgICAgICBsYWJlbC5fYmFja2dyb3VuZEJpbGxib2FyZCA9IGJhY2tncm91bmRCaWxsYm9hcmQgPSB1bmRlZmluZWQ7XHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBpZiAoIWRlZmluZWQoYmFja2dyb3VuZEJpbGxib2FyZCkpIHtcclxuICAgICAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZCA9IGJhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uLmFkZCh7XHJcbiAgICAgICAgICAgICAgICBjb2xsZWN0aW9uOiBsYWJlbENvbGxlY3Rpb24sXHJcbiAgICAgICAgICAgICAgICBpbWFnZTogd2hpdGVQaXhlbENhbnZhc0lkLFxyXG4gICAgICAgICAgICAgICAgaW1hZ2VTdWJSZWdpb246IHdoaXRlUGl4ZWxCb3VuZGluZ1JlZ2lvbixcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIGxhYmVsLl9iYWNrZ3JvdW5kQmlsbGJvYXJkID0gYmFja2dyb3VuZEJpbGxib2FyZDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQuY29sb3IgPSBsYWJlbC5fYmFja2dyb3VuZENvbG9yO1xyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQuc2hvdyA9IGxhYmVsLl9zaG93O1xyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQucG9zaXRpb24gPSBsYWJlbC5fcG9zaXRpb247XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5leWVPZmZzZXQgPSBsYWJlbC5fZXllT2Zmc2V0O1xyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQucGl4ZWxPZmZzZXQgPSBsYWJlbC5fcGl4ZWxPZmZzZXQ7XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5ob3Jpem9udGFsT3JpZ2luID0gSG9yaXpvbnRhbE9yaWdpbi5MRUZUO1xyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQudmVydGljYWxPcmlnaW4gPSBsYWJlbC5fdmVydGljYWxPcmlnaW47XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5oZWlnaHRSZWZlcmVuY2UgPSBsYWJlbC5faGVpZ2h0UmVmZXJlbmNlO1xyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQuc2NhbGUgPSBsYWJlbC50b3RhbFNjYWxlO1xyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQucGlja1ByaW1pdGl2ZSA9IGxhYmVsO1xyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQuaWQgPSBsYWJlbC5faWQ7XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC50cmFuc2x1Y2VuY3lCeURpc3RhbmNlID0gbGFiZWwuX3RyYW5zbHVjZW5jeUJ5RGlzdGFuY2U7XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5waXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZSA9IGxhYmVsLl9waXhlbE9mZnNldFNjYWxlQnlEaXN0YW5jZTtcclxuICAgICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLnNjYWxlQnlEaXN0YW5jZSA9IGxhYmVsLl9zY2FsZUJ5RGlzdGFuY2U7XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5kaXN0YW5jZURpc3BsYXlDb25kaXRpb24gPSBsYWJlbC5fZGlzdGFuY2VEaXNwbGF5Q29uZGl0aW9uO1xyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQuZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlID0gbGFiZWwuX2Rpc2FibGVEZXB0aFRlc3REaXN0YW5jZTtcclxuICAgIH1cclxuXHJcbiAgICBjb25zdCBnbHlwaFRleHR1cmVDYWNoZSA9IGxhYmVsQ29sbGVjdGlvbi5fZ2x5cGhUZXh0dXJlQ2FjaGU7XHJcblxyXG4gICAgLy8gd2FsayB0aGUgdGV4dCBsb29raW5nIGZvciBuZXcgY2hhcmFjdGVycyAoY3JlYXRpbmcgbmV3IGdseXBocyBmb3IgZWFjaClcclxuICAgIC8vIG9yIGNoYW5nZWQgY2hhcmFjdGVycyAocmViaW5kaW5nIGV4aXN0aW5nIGdseXBocylcclxuICAgIGZvciAodGV4dEluZGV4ID0gMDsgdGV4dEluZGV4IDwgdGV4dExlbmd0aDsgKyt0ZXh0SW5kZXgpIHtcclxuICAgICAgICBjb25zdCBjaGFyYWN0ZXIgPSBncmFwaGVtZXNbdGV4dEluZGV4XTtcclxuICAgICAgICBjb25zdCB2ZXJ0aWNhbE9yaWdpbiA9IGxhYmVsLl92ZXJ0aWNhbE9yaWdpbjtcclxuXHJcbiAgICAgICAgY29uc3QgaWQgPSBKU09OLnN0cmluZ2lmeShbXHJcbiAgICAgICAgICAgIGNoYXJhY3RlcixcclxuICAgICAgICAgICAgbGFiZWwuX2ZvbnRGYW1pbHksXHJcbiAgICAgICAgICAgIGxhYmVsLl9mb250U3R5bGUsXHJcbiAgICAgICAgICAgIGxhYmVsLl9mb250V2VpZ2h0LFxyXG4gICAgICAgICAgICArdmVydGljYWxPcmlnaW5cclxuICAgICAgICBdKTtcclxuXHJcbiAgICAgICAgbGV0IGdseXBoVGV4dHVyZUluZm8gPSBnbHlwaFRleHR1cmVDYWNoZVtpZF07XHJcbiAgICAgICAgaWYgKCFkZWZpbmVkKGdseXBoVGV4dHVyZUluZm8pKSB7XHJcbiAgICAgICAgICAgIHZhciBjaGFydENvZGUgPSBjaGFyYWN0ZXIuY2hhckNvZGVBdCgwKTtcclxuICAgICAgICAgICAgdmFyIGZvbnROYW1lID0gJ+W+rui9r+mbhem7kSc7XHJcbiAgICAgICAgICAgIHZhciBtYXBib3hHbHlwaCA9IG1hcGJveEdseXBoc1tmb250TmFtZV1bY2hhcnRDb2RlXTtcclxuXHJcbiAgICAgICAgICAgIGlmKCFtYXBib3hHbHlwaCl7XHJcbiAgICAgICAgICAgICAgICAvL+ayoeaJvuWIsOeahOeUn+WDu+Wtl+eUqO+8n+WPt+S7o+abv1xyXG4gICAgICAgICAgICAgICAgbWFwYm94R2x5cGggPSBtYXBib3hHbHlwaHNbZm9udE5hbWVdWzYzXTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoIW1hcGJveEdseXBoLmhhc093blByb3BlcnR5KCdkaW1lbnNpb25zJykpe1xyXG4gICAgICAgICAgICAgICAgbWFwYm94R2x5cGguZGltZW5zaW9ucyA9IHt3aWR0aDptYXBib3hHbHlwaC53aWR0aCAtMyxoZWlnaHQ6MjQsXHJcbiAgICAgICAgICAgICAgICAgICAgZGVzY2VudDowLG1pbng6MCxtaW55OjAsbWF4eDowLG1heHk6MFxyXG4gICAgICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgICAgIGdseXBoVGV4dHVyZUluZm8gPSBuZXcgR2x5cGhUZXh0dXJlSW5mbyhsYWJlbENvbGxlY3Rpb24sIC0xLCBtYXBib3hHbHlwaC5kaW1lbnNpb25zKTtcclxuICAgICAgICAgICAgZ2x5cGhUZXh0dXJlQ2FjaGVbaWRdID0gZ2x5cGhUZXh0dXJlSW5mbztcclxuXHJcbiAgICAgICAgICAgIGlmIChtYXBib3hHbHlwaC53aWR0aCA+IDAgJiYgbWFwYm94R2x5cGguaGVpZ2h0ID4gMCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGNoYXJhY3RlciAhPT0gJyAnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYWRkR2x5cGhUb1RleHR1cmVBdGxhcyhsYWJlbENvbGxlY3Rpb24uX3RleHR1cmVBdGxhcywgaWQsIG1hcGJveEdseXBoLCBnbHlwaFRleHR1cmVJbmZvKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2x5cGggPSBnbHlwaHNbdGV4dEluZGV4XTtcclxuXHJcbiAgICAgICAgaWYgKGRlZmluZWQoZ2x5cGgpKSB7XHJcbiAgICAgICAgICAgIC8vIGNsZWFuIHVwIGxlZnRvdmVyIGluZm9ybWF0aW9uIGZyb20gdGhlIHByZXZpb3VzIGdseXBoXHJcbiAgICAgICAgICAgIGlmIChnbHlwaFRleHR1cmVJbmZvLmluZGV4ID09PSAtMSkge1xyXG4gICAgICAgICAgICAgICAgLy8gbm8gdGV4dHVyZSwgYW5kIHRoZXJlZm9yZSBubyBiaWxsYm9hcmQsIGZvciB0aGlzIGdseXBoLlxyXG4gICAgICAgICAgICAgICAgLy8gc28sIGNvbXBsZXRlbHkgdW5iaW5kIGdseXBoLlxyXG4gICAgICAgICAgICAgICAgdW5iaW5kR2x5cGgobGFiZWxDb2xsZWN0aW9uLCBnbHlwaCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZGVmaW5lZChnbHlwaC50ZXh0dXJlSW5mbykpIHtcclxuICAgICAgICAgICAgICAgIC8vIHdlIGhhdmUgYSB0ZXh0dXJlIGFuZCBiaWxsYm9hcmQuICBJZiB3ZSBoYWQgb25lIGJlZm9yZSwgcmVsZWFzZVxyXG4gICAgICAgICAgICAgICAgLy8gb3VyIHJlZmVyZW5jZSB0byB0aGF0IHRleHR1cmUgaW5mbywgYnV0IHJldXNlIHRoZSBiaWxsYm9hcmQuXHJcbiAgICAgICAgICAgICAgICBnbHlwaC50ZXh0dXJlSW5mbyA9IHVuZGVmaW5lZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIGNyZWF0ZSBhIGdseXBoIG9iamVjdFxyXG4gICAgICAgICAgICBnbHlwaCA9IG5ldyBHbHlwaCgpO1xyXG4gICAgICAgICAgICBnbHlwaHNbdGV4dEluZGV4XSA9IGdseXBoO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZ2x5cGgudGV4dHVyZUluZm8gPSBnbHlwaFRleHR1cmVJbmZvO1xyXG4gICAgICAgIGdseXBoLmRpbWVuc2lvbnMgPSBnbHlwaFRleHR1cmVJbmZvLmRpbWVuc2lvbnM7XHJcbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCdqc29uaWQnKTtcclxuICAgICAgICAvLyBjb25zb2xlLnRpbWUoJ290aGVyJyk7XHJcbiAgICAgICAgLy8gaWYgd2UgaGF2ZSBhIHRleHR1cmUsIGNvbmZpZ3VyZSB0aGUgZXhpc3RpbmcgYmlsbGJvYXJkLCBvciBvYnRhaW4gb25lXHJcbiAgICAgICAgaWYgKGdseXBoVGV4dHVyZUluZm8uaW5kZXggIT09IC0xKSB7XHJcbiAgICAgICAgICAgIGxldCBiaWxsYm9hcmQgPSBnbHlwaC5iaWxsYm9hcmQ7XHJcbiAgICAgICAgICAgIGNvbnN0IHNwYXJlQmlsbGJvYXJkcyA9IGxhYmVsQ29sbGVjdGlvbi5fc3BhcmVCaWxsYm9hcmRzO1xyXG4gICAgICAgICAgICBpZiAoIWRlZmluZWQoYmlsbGJvYXJkKSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKHNwYXJlQmlsbGJvYXJkcy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYmlsbGJvYXJkID0gc3BhcmVCaWxsYm9hcmRzLnBvcCgpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBiaWxsYm9hcmQgPSBsYWJlbENvbGxlY3Rpb24uX2JpbGxib2FyZENvbGxlY3Rpb24uYWRkKHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgY29sbGVjdGlvbiA6IGxhYmVsQ29sbGVjdGlvblxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGJpbGxib2FyZC5fbGFiZWxEaW1lbnNpb25zID0gbmV3IENhcnRlc2lhbjIoKTtcclxuICAgICAgICAgICAgICAgICAgICBiaWxsYm9hcmQuX2xhYmVsVHJhbnNsYXRlID0gbmV3IENhcnRlc2lhbjIoKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGdseXBoLmJpbGxib2FyZCA9IGJpbGxib2FyZDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgYmlsbGJvYXJkLnNob3cgPSBsYWJlbC5fc2hvdztcclxuICAgICAgICAgICAgYmlsbGJvYXJkLnBvc2l0aW9uID0gbGFiZWwuX3Bvc2l0aW9uO1xyXG4gICAgICAgICAgICBiaWxsYm9hcmQuZXllT2Zmc2V0ID0gbGFiZWwuX2V5ZU9mZnNldDtcclxuICAgICAgICAgICAgYmlsbGJvYXJkLnBpeGVsT2Zmc2V0ID0gbGFiZWwuX3BpeGVsT2Zmc2V0O1xyXG4gICAgICAgICAgICBiaWxsYm9hcmQuaG9yaXpvbnRhbE9yaWdpbiA9IEhvcml6b250YWxPcmlnaW4uTEVGVDtcclxuICAgICAgICAgICAgYmlsbGJvYXJkLnZlcnRpY2FsT3JpZ2luID0gbGFiZWwuX3ZlcnRpY2FsT3JpZ2luO1xyXG4gICAgICAgICAgICBiaWxsYm9hcmQuaGVpZ2h0UmVmZXJlbmNlID0gbGFiZWwuX2hlaWdodFJlZmVyZW5jZTtcclxuICAgICAgICAgICAgYmlsbGJvYXJkLnNjYWxlID0gbGFiZWwudG90YWxTY2FsZTtcclxuICAgICAgICAgICAgYmlsbGJvYXJkLnBpY2tQcmltaXRpdmUgPSBsYWJlbDtcclxuICAgICAgICAgICAgYmlsbGJvYXJkLmlkID0gbGFiZWwuX2lkO1xyXG4gICAgICAgICAgICBiaWxsYm9hcmQuaW1hZ2UgPSBpZDtcclxuICAgICAgICAgICAgYmlsbGJvYXJkLnRyYW5zbHVjZW5jeUJ5RGlzdGFuY2UgPSBsYWJlbC5fdHJhbnNsdWNlbmN5QnlEaXN0YW5jZTtcclxuICAgICAgICAgICAgYmlsbGJvYXJkLnBpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlID0gbGFiZWwuX3BpeGVsT2Zmc2V0U2NhbGVCeURpc3RhbmNlO1xyXG4gICAgICAgICAgICBiaWxsYm9hcmQuc2NhbGVCeURpc3RhbmNlID0gbGFiZWwuX3NjYWxlQnlEaXN0YW5jZTtcclxuICAgICAgICAgICAgYmlsbGJvYXJkLmRpc3RhbmNlRGlzcGxheUNvbmRpdGlvbiA9IGxhYmVsLl9kaXN0YW5jZURpc3BsYXlDb25kaXRpb247XHJcbiAgICAgICAgICAgIGJpbGxib2FyZC5kaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2UgPSBsYWJlbC5fZGlzYWJsZURlcHRoVGVzdERpc3RhbmNlO1xyXG4gICAgICAgICAgICBiaWxsYm9hcmQuX2JhdGNoSW5kZXggPSBsYWJlbC5fYmF0Y2hJbmRleDtcclxuICAgICAgICAgICAgYmlsbGJvYXJkLm91dGxpbmVDb2xvciA9IGxhYmVsLm91dGxpbmVDb2xvcjtcclxuICAgICAgICAgICAgaWYgKGxhYmVsLnN0eWxlID09PSBMYWJlbFN0eWxlLkZJTExfQU5EX09VVExJTkUpIHtcclxuICAgICAgICAgICAgICAgIGJpbGxib2FyZC5jb2xvciA9IGxhYmVsLl9maWxsQ29sb3I7XHJcbiAgICAgICAgICAgICAgICBiaWxsYm9hcmQub3V0bGluZVdpZHRoID0gbGFiZWwub3V0bGluZVdpZHRoO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxhYmVsLnN0eWxlID09PSBMYWJlbFN0eWxlLkZJTEwpIHtcclxuICAgICAgICAgICAgICAgIGJpbGxib2FyZC5jb2xvciA9IGxhYmVsLl9maWxsQ29sb3I7XHJcbiAgICAgICAgICAgICAgICBiaWxsYm9hcmQub3V0bGluZVdpZHRoID0gMC4wO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGxhYmVsLnN0eWxlID09PSBMYWJlbFN0eWxlLk9VVExJTkUpIHtcclxuICAgICAgICAgICAgICAgIGJpbGxib2FyZC5jb2xvciA9IENvbG9yLlRSQU5TUEFSRU5UO1xyXG4gICAgICAgICAgICAgICAgYmlsbGJvYXJkLm91dGxpbmVXaWR0aCA9IGxhYmVsLm91dGxpbmVXaWR0aDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLyoqKioqKioqKioqKirmlrDlop7lvIDlp4sqKioqKioqKioqKioqKi9cclxuICAgICAgICAgICAgLy8gYmlsbGJvYXJkLnJvdGF0aW9uICA9IGxhYmVsLl9yb3RhdGlvbjtcclxuICAgICAgICAgICAgLyoqKioqKioqKioqKirmlrDlop7nu5PmnZ8qKioqKioqKioqKioqKi9cclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICAvLyBjaGFuZ2luZyBnbHlwaHMgd2lsbCBjYXVzZSB0aGUgcG9zaXRpb24gb2YgdGhlXHJcbiAgICAvLyBnbHlwaHMgdG8gY2hhbmdlLCBzaW5jZSBkaWZmZXJlbnQgY2hhcmFjdGVycyBoYXZlIGRpZmZlcmVudCB3aWR0aHNcclxuICAgIGxhYmVsLl9yZXBvc2l0aW9uQWxsR2x5cGhzID0gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24gY2FsY3VsYXRlV2lkdGhPZmZzZXQobGluZVdpZHRoLCBob3Jpem9udGFsT3JpZ2luLCBiYWNrZ3JvdW5kUGFkZGluZykge1xyXG4gICAgaWYgKGhvcml6b250YWxPcmlnaW4gPT09IEhvcml6b250YWxPcmlnaW4uQ0VOVEVSKSB7XHJcbiAgICAgICAgcmV0dXJuIC1saW5lV2lkdGggLyAyO1xyXG4gICAgfSBlbHNlIGlmIChob3Jpem9udGFsT3JpZ2luID09PSBIb3Jpem9udGFsT3JpZ2luLlJJR0hUKSB7XHJcbiAgICAgICAgcmV0dXJuIC0obGluZVdpZHRoICsgYmFja2dyb3VuZFBhZGRpbmcueCk7XHJcbiAgICB9XHJcbiAgICByZXR1cm4gYmFja2dyb3VuZFBhZGRpbmcueDtcclxufVxyXG5cclxuLy8gcmV1c2FibGUgQ2FydGVzaWFuMiBpbnN0YW5jZXNcclxuY29uc3QgZ2x5cGhQaXhlbE9mZnNldCA9IG5ldyBDYXJ0ZXNpYW4yKCk7XHJcbmNvbnN0IHNjcmF0Y2hCYWNrZ3JvdW5kUGFkZGluZyA9IG5ldyBDYXJ0ZXNpYW4yKCk7XHJcblxyXG5mdW5jdGlvbiByZXBvc2l0aW9uQWxsR2x5cGhzKGxhYmVsKSB7XHJcbiAgICBjb25zdCBnbHlwaHMgPSBsYWJlbC5fZ2x5cGhzO1xyXG4gICAgY29uc3QgdGV4dCA9IGxhYmVsLl9yZW5kZXJlZFRleHQ7XHJcbiAgICBsZXQgZ2x5cGg7XHJcbiAgICBsZXQgZGltZW5zaW9ucztcclxuICAgIGxldCBsYXN0TGluZVdpZHRoID0gMDtcclxuICAgIGxldCBtYXhMaW5lV2lkdGggPSAwO1xyXG4gICAgY29uc3QgbGluZVdpZHRocyA9IFtdO1xyXG4gICAgbGV0IG1heEdseXBoRGVzY2VudCA9IE51bWJlci5ORUdBVElWRV9JTkZJTklUWTtcclxuICAgIGxldCBtYXhHbHlwaFkgPSAwO1xyXG4gICAgbGV0IG51bWJlck9mTGluZXMgPSAxO1xyXG4gICAgbGV0IGdseXBoSW5kZXg7XHJcbiAgICBjb25zdCBnbHlwaExlbmd0aCA9IGdseXBocy5sZW5ndGg7XHJcblxyXG4gICAgY29uc3QgYmFja2dyb3VuZEJpbGxib2FyZCA9IGxhYmVsLl9iYWNrZ3JvdW5kQmlsbGJvYXJkO1xyXG4gICAgY29uc3QgYmFja2dyb3VuZFBhZGRpbmcgPSBDYXJ0ZXNpYW4yLmNsb25lKFxyXG4gICAgICAgIGRlZmluZWQoYmFja2dyb3VuZEJpbGxib2FyZCkgPyBsYWJlbC5fYmFja2dyb3VuZFBhZGRpbmcgOiBDYXJ0ZXNpYW4yLlpFUk8sXHJcbiAgICAgICAgc2NyYXRjaEJhY2tncm91bmRQYWRkaW5nXHJcbiAgICApO1xyXG5cclxuICAgIC8vIFdlIG5lZWQgdG8gc2NhbGUgdGhlIGJhY2tncm91bmQgcGFkZGluZywgd2hpY2ggaXMgc3BlY2lmaWVkIGluIHBpeGVscyBieSB0aGUgaW52ZXJzZSBvZiB0aGUgcmVsYXRpdmUgc2l6ZSBzbyBpdCBpcyBzY2FsZWQgcHJvcGVybHkuXHJcbiAgICBiYWNrZ3JvdW5kUGFkZGluZy54IC89IGxhYmVsLl9yZWxhdGl2ZVNpemU7XHJcbiAgICBiYWNrZ3JvdW5kUGFkZGluZy55IC89IGxhYmVsLl9yZWxhdGl2ZVNpemU7XHJcblxyXG4gICAgZm9yIChnbHlwaEluZGV4ID0gMDsgZ2x5cGhJbmRleCA8IGdseXBoTGVuZ3RoOyArK2dseXBoSW5kZXgpIHtcclxuICAgICAgICBpZiAodGV4dC5jaGFyQXQoZ2x5cGhJbmRleCkgPT09IFwiXFxuXCIpIHtcclxuICAgICAgICAgICAgbGluZVdpZHRocy5wdXNoKGxhc3RMaW5lV2lkdGgpO1xyXG4gICAgICAgICAgICArK251bWJlck9mTGluZXM7XHJcbiAgICAgICAgICAgIGxhc3RMaW5lV2lkdGggPSAwO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGdseXBoID0gZ2x5cGhzW2dseXBoSW5kZXhdO1xyXG4gICAgICAgICAgICBkaW1lbnNpb25zID0gZ2x5cGguZGltZW5zaW9ucztcclxuICAgICAgICAgICAgbWF4R2x5cGhZID0gTWF0aC5tYXgobWF4R2x5cGhZLCBkaW1lbnNpb25zLmhlaWdodCAtIGRpbWVuc2lvbnMuZGVzY2VudCk7XHJcbiAgICAgICAgICAgIG1heEdseXBoRGVzY2VudCA9IE1hdGgubWF4KG1heEdseXBoRGVzY2VudCwgZGltZW5zaW9ucy5kZXNjZW50KTtcclxuXHJcbiAgICAgICAgICAgIC8vQ29tcHV0aW5nIHRoZSBsaW5lIHdpZHRoIG11c3QgYWxzbyBhY2NvdW50IGZvciB0aGUga2VybmluZyB0aGF0IG9jY3VycyBiZXR3ZWVuIGxldHRlcnMuXHJcbiAgICAgICAgICAgIGxhc3RMaW5lV2lkdGggKz0gZGltZW5zaW9ucy53aWR0aCAtIGRpbWVuc2lvbnMubWlueDtcclxuICAgICAgICAgICAgaWYgKGdseXBoSW5kZXggPCBnbHlwaExlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGxhc3RMaW5lV2lkdGggKz0gZ2x5cGhzW2dseXBoSW5kZXggKyAxXS5kaW1lbnNpb25zLm1pbng7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbWF4TGluZVdpZHRoID0gTWF0aC5tYXgobWF4TGluZVdpZHRoLCBsYXN0TGluZVdpZHRoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBsaW5lV2lkdGhzLnB1c2gobGFzdExpbmVXaWR0aCk7XHJcbiAgICBjb25zdCBtYXhMaW5lSGVpZ2h0ID0gbWF4R2x5cGhZICsgbWF4R2x5cGhEZXNjZW50O1xyXG5cclxuICAgIGNvbnN0IHNjYWxlID0gbGFiZWwudG90YWxTY2FsZTtcclxuICAgIGNvbnN0IGhvcml6b250YWxPcmlnaW4gPSBsYWJlbC5faG9yaXpvbnRhbE9yaWdpbjtcclxuICAgIGNvbnN0IHZlcnRpY2FsT3JpZ2luID0gbGFiZWwuX3ZlcnRpY2FsT3JpZ2luO1xyXG4gICAgbGV0IGxpbmVJbmRleCA9IDA7XHJcbiAgICBsZXQgbGluZVdpZHRoID0gbGluZVdpZHRoc1tsaW5lSW5kZXhdO1xyXG4gICAgbGV0IHdpZHRoT2Zmc2V0ID0gY2FsY3VsYXRlV2lkdGhPZmZzZXQoXHJcbiAgICAgICAgbGluZVdpZHRoLFxyXG4gICAgICAgIGhvcml6b250YWxPcmlnaW4sXHJcbiAgICAgICAgYmFja2dyb3VuZFBhZGRpbmdcclxuICAgICk7XHJcbiAgICBjb25zdCBsaW5lU3BhY2luZyA9XHJcbiAgICAgICAgKGRlZmluZWQobGFiZWwuX2xpbmVIZWlnaHQpXHJcbiAgICAgICAgICAgID8gbGFiZWwuX2xpbmVIZWlnaHRcclxuICAgICAgICAgICAgOiBkZWZhdWx0TGluZVNwYWNpbmdQZXJjZW50ICogbGFiZWwuX2ZvbnRTaXplKSAvIGxhYmVsLl9yZWxhdGl2ZVNpemU7XHJcbiAgICBjb25zdCBvdGhlckxpbmVzSGVpZ2h0ID0gbGluZVNwYWNpbmcgKiAobnVtYmVyT2ZMaW5lcyAtIDEpO1xyXG4gICAgbGV0IHRvdGFsTGluZVdpZHRoID0gbWF4TGluZVdpZHRoO1xyXG4gICAgbGV0IHRvdGFsTGluZUhlaWdodCA9IG1heExpbmVIZWlnaHQgKyBvdGhlckxpbmVzSGVpZ2h0O1xyXG5cclxuICAgIGdseXBoUGl4ZWxPZmZzZXQueCA9IHdpZHRoT2Zmc2V0ICogc2NhbGU7XHJcbiAgICBnbHlwaFBpeGVsT2Zmc2V0LnkgPSAwO1xyXG5cclxuICAgIGxldCBmaXJzdENoYXJPZkxpbmUgPSB0cnVlO1xyXG5cclxuICAgIGxldCBsaW5lT2Zmc2V0WSA9IDA7XHJcbiAgICBmb3IgKGdseXBoSW5kZXggPSAwOyBnbHlwaEluZGV4IDwgZ2x5cGhMZW5ndGg7ICsrZ2x5cGhJbmRleCkge1xyXG4gICAgICAgIGlmICh0ZXh0LmNoYXJBdChnbHlwaEluZGV4KSA9PT0gJyAnKSB7XHJcbiAgICAgICAgICAgICsrbGluZUluZGV4O1xyXG4gICAgICAgICAgICBsaW5lT2Zmc2V0WSArPSBsaW5lU3BhY2luZztcclxuICAgICAgICAgICAgbGluZVdpZHRoID0gbGluZVdpZHRoc1tsaW5lSW5kZXhdO1xyXG4gICAgICAgICAgICB3aWR0aE9mZnNldCA9IGNhbGN1bGF0ZVdpZHRoT2Zmc2V0KFxyXG4gICAgICAgICAgICAgICAgbGluZVdpZHRoLFxyXG4gICAgICAgICAgICAgICAgaG9yaXpvbnRhbE9yaWdpbixcclxuICAgICAgICAgICAgICAgIGJhY2tncm91bmRQYWRkaW5nXHJcbiAgICAgICAgICAgICk7XHJcbiAgICAgICAgICAgIGdseXBoUGl4ZWxPZmZzZXQueCA9IHdpZHRoT2Zmc2V0ICogc2NhbGU7XHJcbiAgICAgICAgICAgIGZpcnN0Q2hhck9mTGluZSA9IHRydWU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZ2x5cGggPSBnbHlwaHNbZ2x5cGhJbmRleF07XHJcbiAgICAgICAgICAgIGRpbWVuc2lvbnMgPSBnbHlwaC5kaW1lbnNpb25zO1xyXG4gICAgICAgICAgICBpZiAodmVydGljYWxPcmlnaW4gPT09IFZlcnRpY2FsT3JpZ2luLlRPUCkge1xyXG4gICAgICAgICAgICAgICAgZ2x5cGhQaXhlbE9mZnNldC55ID0gZGltZW5zaW9ucy5oZWlnaHQgLSBtYXhHbHlwaFkgLSBiYWNrZ3JvdW5kUGFkZGluZy55O1xyXG4gICAgICAgICAgICAgICAgZ2x5cGhQaXhlbE9mZnNldC55ICs9IFNERlNldHRpbmdzLlBBRERJTkc7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodmVydGljYWxPcmlnaW4gPT09IFZlcnRpY2FsT3JpZ2luLkNFTlRFUikge1xyXG4gICAgICAgICAgICAgICAgZ2x5cGhQaXhlbE9mZnNldC55ID0gKG90aGVyTGluZXNIZWlnaHQgKyBkaW1lbnNpb25zLmhlaWdodCAtIG1heEdseXBoWSkgLyAyO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKHZlcnRpY2FsT3JpZ2luID09PSBWZXJ0aWNhbE9yaWdpbi5CQVNFTElORSkge1xyXG4gICAgICAgICAgICAgICAgZ2x5cGhQaXhlbE9mZnNldC55ID0gb3RoZXJMaW5lc0hlaWdodDtcclxuICAgICAgICAgICAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSAtPSBTREZTZXR0aW5ncy5QQURESU5HO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gVmVydGljYWxPcmlnaW4uQk9UVE9NXHJcbiAgICAgICAgICAgICAgICBnbHlwaFBpeGVsT2Zmc2V0LnkgPSBvdGhlckxpbmVzSGVpZ2h0ICsgbWF4R2x5cGhEZXNjZW50ICsgYmFja2dyb3VuZFBhZGRpbmcueTtcclxuICAgICAgICAgICAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSAtPSBTREZTZXR0aW5ncy5QQURESU5HO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSA9IChnbHlwaFBpeGVsT2Zmc2V0LnkgLSBkaW1lbnNpb25zLmRlc2NlbnQgLSBsaW5lT2Zmc2V0WSkgKiBzY2FsZTtcclxuXHJcbiAgICAgICAgICAgIC8vIEhhbmRsZSBhbnkgb2Zmc2V0cyBmb3IgdGhlIGZpcnN0IGNoYXJhY3RlciBvZiB0aGUgbGluZSBzaW5jZSB0aGUgYm91bmRzIG1pZ2h0IG5vdCBiZSByaWdodCBvbiB0aGUgYm90dG9tIGxlZnQgcGl4ZWwuXHJcbiAgICAgICAgICAgIGlmIChmaXJzdENoYXJPZkxpbmUpXHJcbiAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgIGdseXBoUGl4ZWxPZmZzZXQueCAtPSBTREZTZXR0aW5ncy5QQURESU5HICogc2NhbGU7XHJcbiAgICAgICAgICAgICAgICBmaXJzdENoYXJPZkxpbmUgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKGRlZmluZWQoZ2x5cGguYmlsbGJvYXJkKSkge1xyXG4gICAgICAgICAgICAgICAgZ2x5cGguYmlsbGJvYXJkLl9zZXRUcmFuc2xhdGUoZ2x5cGhQaXhlbE9mZnNldCk7XHJcbiAgICAgICAgICAgICAgICBnbHlwaC5iaWxsYm9hcmQuX2xhYmVsRGltZW5zaW9ucy54ID0gdG90YWxMaW5lV2lkdGg7XHJcbiAgICAgICAgICAgICAgICBnbHlwaC5iaWxsYm9hcmQuX2xhYmVsRGltZW5zaW9ucy55ID0gdG90YWxMaW5lSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgZ2x5cGguYmlsbGJvYXJkLl9sYWJlbEhvcml6b250YWxPcmlnaW4gPSBob3Jpem9udGFsT3JpZ2luO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL0NvbXB1dGUgdGhlIG5leHQgeCBvZmZzZXQgdGFraW5nIGludG8gYWNjb3VudCB0aGUga2VybmluZyBwZXJmb3JtZWRcclxuICAgICAgICAgICAgLy9vbiBib3RoIHRoZSBjdXJyZW50IGxldHRlciBhcyB3ZWxsIGFzIHRoZSBuZXh0IGxldHRlciB0byBiZSBkcmF3blxyXG4gICAgICAgICAgICAvL2FzIHdlbGwgYXMgYW55IGFwcGxpZWQgc2NhbGUuXHJcbiAgICAgICAgICAgIGlmIChnbHlwaEluZGV4IDwgZ2x5cGhMZW5ndGggLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBjb25zdCBuZXh0R2x5cGggPSBnbHlwaHNbZ2x5cGhJbmRleCArIDFdO1xyXG4gICAgICAgICAgICAgICAgZ2x5cGhQaXhlbE9mZnNldC54ICs9XHJcbiAgICAgICAgICAgICAgICAgICAgKGRpbWVuc2lvbnMud2lkdGggLSBkaW1lbnNpb25zLm1pbnggKyBuZXh0R2x5cGguZGltZW5zaW9ucy5taW54KSAqXHJcbiAgICAgICAgICAgICAgICAgICAgc2NhbGU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGRlZmluZWQoYmFja2dyb3VuZEJpbGxib2FyZCkgJiYgKHRleHQuc3BsaXQoJyAnKS5qb2luKCcnKS5sZW5ndGggPiAwKSkge1xyXG4gICAgICAgIGlmIChob3Jpem9udGFsT3JpZ2luID09PSBIb3Jpem9udGFsT3JpZ2luLkNFTlRFUikge1xyXG4gICAgICAgICAgICB3aWR0aE9mZnNldCA9IC1tYXhMaW5lV2lkdGggLyAyIC0gYmFja2dyb3VuZFBhZGRpbmcueDtcclxuICAgICAgICB9IGVsc2UgaWYgKGhvcml6b250YWxPcmlnaW4gPT09IEhvcml6b250YWxPcmlnaW4uUklHSFQpIHtcclxuICAgICAgICAgICAgd2lkdGhPZmZzZXQgPSAtKG1heExpbmVXaWR0aCArIGJhY2tncm91bmRQYWRkaW5nLnggKiAyKTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICB3aWR0aE9mZnNldCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdseXBoUGl4ZWxPZmZzZXQueCA9IHdpZHRoT2Zmc2V0ICogc2NhbGU7XHJcblxyXG4gICAgICAgIGlmICh2ZXJ0aWNhbE9yaWdpbiA9PT0gVmVydGljYWxPcmlnaW4uVE9QKSB7XHJcbiAgICAgICAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSA9IG1heExpbmVIZWlnaHQgLSBtYXhHbHlwaFkgLSBtYXhHbHlwaERlc2NlbnQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2ZXJ0aWNhbE9yaWdpbiA9PT0gVmVydGljYWxPcmlnaW4uQ0VOVEVSKSB7XHJcbiAgICAgICAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSA9IChtYXhMaW5lSGVpZ2h0IC0gbWF4R2x5cGhZKSAvIDIgLSBtYXhHbHlwaERlc2NlbnQ7XHJcbiAgICAgICAgfSBlbHNlIGlmICh2ZXJ0aWNhbE9yaWdpbiA9PT0gVmVydGljYWxPcmlnaW4uQkFTRUxJTkUpIHtcclxuICAgICAgICAgICAgZ2x5cGhQaXhlbE9mZnNldC55ID0gLWJhY2tncm91bmRQYWRkaW5nLnkgLSBtYXhHbHlwaERlc2NlbnQ7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gVmVydGljYWxPcmlnaW4uQk9UVE9NXHJcbiAgICAgICAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGdseXBoUGl4ZWxPZmZzZXQueSA9IGdseXBoUGl4ZWxPZmZzZXQueSAqIHNjYWxlO1xyXG5cclxuICAgICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkLndpZHRoID0gdG90YWxMaW5lV2lkdGg7XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5oZWlnaHQgPSB0b3RhbExpbmVIZWlnaHQ7XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5fc2V0VHJhbnNsYXRlKGdseXBoUGl4ZWxPZmZzZXQpO1xyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmQuX2xhYmVsVHJhbnNsYXRlID0gQ2FydGVzaWFuMi5jbG9uZShcclxuICAgICAgICAgICAgZ2x5cGhQaXhlbE9mZnNldCxcclxuICAgICAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZC5fbGFiZWxUcmFuc2xhdGVcclxuICAgICAgICApO1xyXG4gICAgfVxyXG5cclxuICAgIC8v5a2Y6LW35p2l55So5LqO6K6h566X6YG/6K6pYm94XHJcbiAgICBsYWJlbC50b3RhbFdpZHRoID0gdG90YWxMaW5lV2lkdGgqc2NhbGU7XHJcbiAgICBsYWJlbC50b3RhbEhlaWdodCA9IHRvdGFsTGluZUhlaWdodCpzY2FsZTtcclxuXHJcbiAgICBpZiAobGFiZWwuaGVpZ2h0UmVmZXJlbmNlID09PSBIZWlnaHRSZWZlcmVuY2UuQ0xBTVBfVE9fR1JPVU5EKSB7XHJcbiAgICAgICAgZm9yIChnbHlwaEluZGV4ID0gMDsgZ2x5cGhJbmRleCA8IGdseXBoTGVuZ3RoOyArK2dseXBoSW5kZXgpIHtcclxuICAgICAgICAgICAgZ2x5cGggPSBnbHlwaHNbZ2x5cGhJbmRleF07XHJcbiAgICAgICAgICAgIGNvbnN0IGJpbGxib2FyZCA9IGdseXBoLmJpbGxib2FyZDtcclxuICAgICAgICAgICAgaWYgKGRlZmluZWQoYmlsbGJvYXJkKSkge1xyXG4gICAgICAgICAgICAgICAgYmlsbGJvYXJkLl9sYWJlbFRyYW5zbGF0ZSA9IENhcnRlc2lhbjIuY2xvbmUoXHJcbiAgICAgICAgICAgICAgICAgICAgZ2x5cGhQaXhlbE9mZnNldCxcclxuICAgICAgICAgICAgICAgICAgICBiaWxsYm9hcmQuX2xhYmVsVHJhbnNsYXRlXHJcbiAgICAgICAgICAgICAgICApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBkZXN0cm95TGFiZWwobGFiZWxDb2xsZWN0aW9uLCBsYWJlbCkge1xyXG4gICAgY29uc3QgZ2x5cGhzID0gbGFiZWwuX2dseXBocztcclxuICAgIGZvciAobGV0IGkgPSAwLCBsZW4gPSBnbHlwaHMubGVuZ3RoOyBpIDwgbGVuOyArK2kpIHtcclxuICAgICAgICB1bmJpbmRHbHlwaChsYWJlbENvbGxlY3Rpb24sIGdseXBoc1tpXSk7XHJcbiAgICB9XHJcbiAgICBpZiAoZGVmaW5lZChsYWJlbC5fYmFja2dyb3VuZEJpbGxib2FyZCkpIHtcclxuICAgICAgICBsYWJlbENvbGxlY3Rpb24uX2JhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uLnJlbW92ZShcclxuICAgICAgICAgICAgbGFiZWwuX2JhY2tncm91bmRCaWxsYm9hcmRcclxuICAgICAgICApO1xyXG4gICAgICAgIGxhYmVsLl9iYWNrZ3JvdW5kQmlsbGJvYXJkID0gdW5kZWZpbmVkO1xyXG4gICAgfVxyXG4gICAgbGFiZWwuX2xhYmVsQ29sbGVjdGlvbiA9IHVuZGVmaW5lZDtcclxuXHJcbiAgICBpZiAoZGVmaW5lZChsYWJlbC5fcmVtb3ZlQ2FsbGJhY2tGdW5jKSkge1xyXG4gICAgICAgIGxhYmVsLl9yZW1vdmVDYWxsYmFja0Z1bmMoKTtcclxuICAgIH1cclxuXHJcbiAgICBkZXN0cm95T2JqZWN0KGxhYmVsKTtcclxufVxyXG5cclxuXHJcbmNsYXNzIExhYmVsQ29sbGVjdGlvbkV4dCBleHRlbmRzIExhYmVsQ29sbGVjdGlvbntcclxuICAgIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcclxuICAgICAgICBzdXBlcihvcHRpb25zKTtcclxuXHJcbiAgICAgICAgdGhpcy5fYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24gPSBuZXcgQmlsbGJvYXJkQ29sbGVjdGlvbih7XHJcbiAgICAgICAgICAgIHNjZW5lIDogdGhpcy5fc2NlbmVcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9iYWNrZ3JvdW5kQmlsbGJvYXJkQ29sbGVjdGlvbi5kZXN0cm95VGV4dHVyZUF0bGFzID0gZmFsc2U7XHJcblxyXG4gICAgICAgIHRoaXMuX2JpbGxib2FyZENvbGxlY3Rpb24gPSBuZXcgQmlsbGJvYXJkQ29sbGVjdGlvbih7XHJcbiAgICAgICAgICAgIHNjZW5lIDogdGhpcy5fc2NlbmUsXHJcbiAgICAgICAgICAgIGJhdGNoVGFibGUgOiB0aGlzLl9iYXRjaFRhYmxlLFxyXG4gICAgICAgICAgICBlbnVFbmFibGVkIDpvcHRpb25zLmVudUVuYWJsZWRcclxuICAgICAgICB9KTtcclxuICAgICAgICB0aGlzLl9iaWxsYm9hcmRDb2xsZWN0aW9uLmRlc3Ryb3lUZXh0dXJlQXRsYXMgPSBmYWxzZTtcclxuICAgICAgICB0aGlzLl9iaWxsYm9hcmRDb2xsZWN0aW9uLl9zZGYgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHNldEdseXBocyhtYXBib3hHbHlwaHMpe1xyXG4gICAgICAgIHRoaXMubWFwYm94R2x5cGhzID0gbWFwYm94R2x5cGhzO1xyXG4gICAgfVxyXG5cclxuICAgIHVwZGF0ZShmcmFtZVN0YXRlKXtcclxuICAgICAgICBpZighdGhpcy5tYXBib3hHbHlwaHMpe1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAoIXRoaXMuc2hvdykge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjb25zdCBiaWxsYm9hcmRDb2xsZWN0aW9uID0gdGhpcy5fYmlsbGJvYXJkQ29sbGVjdGlvbjtcclxuICAgICAgICBjb25zdCBiYWNrZ3JvdW5kQmlsbGJvYXJkQ29sbGVjdGlvbiA9IHRoaXMuX2JhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uO1xyXG5cclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLm1vZGVsTWF0cml4ID0gdGhpcy5tb2RlbE1hdHJpeDtcclxuICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lID0gdGhpcy5kZWJ1Z1Nob3dCb3VuZGluZ1ZvbHVtZTtcclxuICAgICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkQ29sbGVjdGlvbi5tb2RlbE1hdHJpeCA9IHRoaXMubW9kZWxNYXRyaXg7XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24uZGVidWdTaG93Qm91bmRpbmdWb2x1bWUgPSB0aGlzLmRlYnVnU2hvd0JvdW5kaW5nVm9sdW1lO1xyXG5cclxuICAgICAgICBjb25zdCBjb250ZXh0ID0gZnJhbWVTdGF0ZS5jb250ZXh0O1xyXG5cclxuICAgICAgICBpZiAoIWRlZmluZWQodGhpcy5fdGV4dHVyZUF0bGFzKSkge1xyXG4gICAgICAgICAgICB0aGlzLl90ZXh0dXJlQXRsYXMgPSBuZXcgVGV4dHVyZUF0bGFzKHtcclxuICAgICAgICAgICAgICAgIGNvbnRleHQ6IGNvbnRleHQsXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICBiaWxsYm9hcmRDb2xsZWN0aW9uLnRleHR1cmVBdGxhcyA9IHRoaXMuX3RleHR1cmVBdGxhcztcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICghZGVmaW5lZCh0aGlzLl9iYWNrZ3JvdW5kVGV4dHVyZUF0bGFzKSkge1xyXG4gICAgICAgICAgICB0aGlzLl9iYWNrZ3JvdW5kVGV4dHVyZUF0bGFzID0gbmV3IFRleHR1cmVBdGxhcyh7XHJcbiAgICAgICAgICAgICAgICBjb250ZXh0OiBjb250ZXh0LFxyXG4gICAgICAgICAgICAgICAgaW5pdGlhbFNpemU6IHdoaXRlUGl4ZWxTaXplLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24udGV4dHVyZUF0bGFzID0gdGhpcy5fYmFja2dyb3VuZFRleHR1cmVBdGxhcztcclxuICAgICAgICAgICAgYWRkV2hpdGVQaXhlbENhbnZhcyh0aGlzLl9iYWNrZ3JvdW5kVGV4dHVyZUF0bGFzKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGNvbnN0IGxlbiA9IHRoaXMuX2xhYmVsc1RvVXBkYXRlLmxlbmd0aDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgICAgICAgIGNvbnN0IGxhYmVsID0gdGhpcy5fbGFiZWxzVG9VcGRhdGVbaV07XHJcbiAgICAgICAgICAgIGlmIChsYWJlbC5pc0Rlc3Ryb3llZCgpKSB7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgY29uc3QgcHJlVXBkYXRlR2x5cGhDb3VudCA9IGxhYmVsLl9nbHlwaHMubGVuZ3RoO1xyXG5cclxuICAgICAgICAgICAgaWYgKGxhYmVsLl9yZWJpbmRBbGxHbHlwaHMpIHtcclxuICAgICAgICAgICAgICAgIHJlYmluZEFsbEdseXBocyh0aGlzLCBsYWJlbCx0aGlzLm1hcGJveEdseXBocyk7XHJcbiAgICAgICAgICAgICAgICBsYWJlbC5fcmViaW5kQWxsR2x5cGhzID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChsYWJlbC5fcmVwb3NpdGlvbkFsbEdseXBocykge1xyXG4gICAgICAgICAgICAgICAgcmVwb3NpdGlvbkFsbEdseXBocyhsYWJlbCk7XHJcbiAgICAgICAgICAgICAgICBsYWJlbC5fcmVwb3NpdGlvbkFsbEdseXBocyA9IGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBjb25zdCBnbHlwaENvdW50RGlmZmVyZW5jZSA9IGxhYmVsLl9nbHlwaHMubGVuZ3RoIC0gcHJlVXBkYXRlR2x5cGhDb3VudDtcclxuICAgICAgICAgICAgdGhpcy5fdG90YWxHbHlwaENvdW50ICs9IGdseXBoQ291bnREaWZmZXJlbmNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgY29uc3QgYmxlbmRPcHRpb24gPVxyXG4gICAgICAgICAgICBiYWNrZ3JvdW5kQmlsbGJvYXJkQ29sbGVjdGlvbi5sZW5ndGggPiAwXHJcbiAgICAgICAgICAgICAgICA/IEJsZW5kT3B0aW9uLlRSQU5TTFVDRU5UXHJcbiAgICAgICAgICAgICAgICA6IHRoaXMuYmxlbmRPcHRpb247XHJcbiAgICAgICAgYmlsbGJvYXJkQ29sbGVjdGlvbi5ibGVuZE9wdGlvbiA9IGJsZW5kT3B0aW9uO1xyXG4gICAgICAgIGJhY2tncm91bmRCaWxsYm9hcmRDb2xsZWN0aW9uLmJsZW5kT3B0aW9uID0gYmxlbmRPcHRpb247XHJcblxyXG4gICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24uX2hpZ2hsaWdodENvbG9yID0gdGhpcy5faGlnaGxpZ2h0Q29sb3I7XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24uX2hpZ2hsaWdodENvbG9yID0gdGhpcy5faGlnaGxpZ2h0Q29sb3I7XHJcblxyXG4gICAgICAgIHRoaXMuX2xhYmVsc1RvVXBkYXRlLmxlbmd0aCA9IDA7XHJcbiAgICAgICAgYmFja2dyb3VuZEJpbGxib2FyZENvbGxlY3Rpb24udXBkYXRlKGZyYW1lU3RhdGUpO1xyXG4gICAgICAgIGJpbGxib2FyZENvbGxlY3Rpb24udXBkYXRlKGZyYW1lU3RhdGUpO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IExhYmVsQ29sbGVjdGlvbkV4dDsiLCIvKipcclxuICogIOS9v+eUqOWQjOS4gOe6p+eTpueJh+i0tOWbvlxyXG4gKiBDcmVhdGVkIGJ5IHVzZXIgb24gMjAyMC8zLzcuXHJcbiAqL1xyXG5cclxuY29uc3QgQ2FydGVzaWFuMyA9Q2VzaXVtLkNhcnRlc2lhbjM7XHJcbmNvbnN0IENhcnRvZ3JhcGhpYyA9Q2VzaXVtLkNhcnRvZ3JhcGhpYztcclxuY29uc3QgZGVmYXVsdFZhbHVlID1DZXNpdW0uZGVmYXVsdFZhbHVlO1xyXG5jb25zdCBkZWZpbmVkID1DZXNpdW0uZGVmaW5lZDtcclxuY29uc3QgZGVmaW5lUHJvcGVydGllcyA9Q2VzaXVtLmRlZmluZVByb3BlcnRpZXM7XHJcbmNvbnN0IERldmVsb3BlckVycm9yID1DZXNpdW0uRGV2ZWxvcGVyRXJyb3I7XHJcbmNvbnN0IEV2ZW50ID1DZXNpdW0uRXZlbnQ7XHJcbmNvbnN0IGdldFRpbWVzdGFtcCA9Q2VzaXVtLmdldFRpbWVzdGFtcDtcclxuY29uc3QgQ2VzaXVtTWF0aCA9Q2VzaXVtLk1hdGg7XHJcbmNvbnN0IE1hdHJpeDQgPUNlc2l1bS5NYXRyaXg0O1xyXG5jb25zdCBPcnRob2dyYXBoaWNGcnVzdHVtID1DZXNpdW0uT3J0aG9ncmFwaGljRnJ1c3R1bTtcclxuY29uc3QgT3J0aG9ncmFwaGljT2ZmQ2VudGVyRnJ1c3R1bSA9Q2VzaXVtLk9ydGhvZ3JhcGhpY09mZkNlbnRlckZydXN0dW07XHJcbmNvbnN0IFJheSA9Q2VzaXVtLlJheTtcclxuY29uc3QgUmVjdGFuZ2xlID1DZXNpdW0uUmVjdGFuZ2xlO1xyXG5jb25zdCBWaXNpYmlsaXR5ID1DZXNpdW0uVmlzaWJpbGl0eTtcclxuY29uc3QgUXVhZHRyZWVPY2NsdWRlcnMgPUNlc2l1bS5RdWFkdHJlZU9jY2x1ZGVycztcclxuY29uc3QgUXVhZHRyZWVUaWxlID1DZXNpdW0uUXVhZHRyZWVUaWxlO1xyXG5jb25zdCBRdWFkdHJlZVRpbGVMb2FkU3RhdGUgPUNlc2l1bS5RdWFkdHJlZVRpbGVMb2FkU3RhdGU7XHJcbmNvbnN0IFNjZW5lTW9kZSA9Q2VzaXVtLlNjZW5lTW9kZTtcclxuY29uc3QgVGlsZVJlcGxhY2VtZW50UXVldWUgPUNlc2l1bS5UaWxlUmVwbGFjZW1lbnRRdWV1ZTtcclxuY29uc3QgVGlsZVNlbGVjdGlvblJlc3VsdCA9Q2VzaXVtLlRpbGVTZWxlY3Rpb25SZXN1bHQ7XHJcbmNvbnN0IFF1YWR0cmVlUHJpbWl0aXZlID0gQ2VzaXVtLlF1YWR0cmVlUHJpbWl0aXZlO1xyXG5cclxudmFyIGNvbXBhcmlzb25Qb2ludDtcclxudmFyIGNlbnRlclNjcmF0Y2ggPSBuZXcgQ2FydG9ncmFwaGljKCk7XHJcbmZ1bmN0aW9uIGNvbXBhcmVEaXN0YW5jZVRvUG9pbnQoYSwgYikge1xyXG4gICAgdmFyIGNlbnRlciA9IFJlY3RhbmdsZS5jZW50ZXIoYS5yZWN0YW5nbGUsIGNlbnRlclNjcmF0Y2gpO1xyXG4gICAgdmFyIGFsb24gPSBjZW50ZXIubG9uZ2l0dWRlIC0gY29tcGFyaXNvblBvaW50LmxvbmdpdHVkZTtcclxuICAgIHZhciBhbGF0ID0gY2VudGVyLmxhdGl0dWRlIC0gY29tcGFyaXNvblBvaW50LmxhdGl0dWRlO1xyXG5cclxuICAgIGNlbnRlciA9IFJlY3RhbmdsZS5jZW50ZXIoYi5yZWN0YW5nbGUsIGNlbnRlclNjcmF0Y2gpO1xyXG4gICAgdmFyIGJsb24gPSBjZW50ZXIubG9uZ2l0dWRlIC0gY29tcGFyaXNvblBvaW50LmxvbmdpdHVkZTtcclxuICAgIHZhciBibGF0ID0gY2VudGVyLmxhdGl0dWRlIC0gY29tcGFyaXNvblBvaW50LmxhdGl0dWRlO1xyXG5cclxuICAgIHJldHVybiAoYWxvbiAqIGFsb24gKyBhbGF0ICogYWxhdCkgLSAoYmxvbiAqIGJsb24gKyBibGF0ICogYmxhdCk7XHJcbn1cclxuXHJcbnZhciBjYW1lcmFPcmlnaW5TY3JhdGNoID0gbmV3IENhcnRlc2lhbjMoKTtcclxudmFyIHJvb3RUcmF2ZXJzYWxEZXRhaWxzID0gW107XHJcblxyXG5mdW5jdGlvbiBzZWxlY3RUaWxlc0ZvclJlbmRlcmluZyhwcmltaXRpdmUsIGZyYW1lU3RhdGUpIHtcclxuICAgIHZhciBkZWJ1ZyA9IHByaW1pdGl2ZS5fZGVidWc7XHJcbiAgICBpZiAoZGVidWcuc3VzcGVuZExvZFVwZGF0ZSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBDbGVhciB0aGUgcmVuZGVyIGxpc3QuXHJcbiAgICB2YXIgdGlsZXNUb1JlbmRlciA9IHByaW1pdGl2ZS5fdGlsZXNUb1JlbmRlcjtcclxuICAgIHRpbGVzVG9SZW5kZXIubGVuZ3RoID0gMDtcclxuXHJcbiAgICAvLyBXZSBjYW4ndCByZW5kZXIgYW55dGhpbmcgYmVmb3JlIHRoZSBsZXZlbCB6ZXJvIHRpbGVzIGV4aXN0LlxyXG4gICAgdmFyIGk7XHJcbiAgICB2YXIgdGlsZVByb3ZpZGVyID0gcHJpbWl0aXZlLl90aWxlUHJvdmlkZXI7XHJcbiAgICBpZiAoIWRlZmluZWQocHJpbWl0aXZlLl9sZXZlbFplcm9UaWxlcykpIHtcclxuICAgICAgICBpZiAodGlsZVByb3ZpZGVyLnJlYWR5KSB7XHJcbiAgICAgICAgICAgIHZhciB0aWxpbmdTY2hlbWUgPSB0aWxlUHJvdmlkZXIudGlsaW5nU2NoZW1lO1xyXG4gICAgICAgICAgICBwcmltaXRpdmUuX2xldmVsWmVyb1RpbGVzID0gUXVhZHRyZWVUaWxlLmNyZWF0ZUxldmVsWmVyb1RpbGVzKHRpbGluZ1NjaGVtZSk7XHJcbiAgICAgICAgICAgIHZhciBudW1iZXJPZlJvb3RUaWxlcyA9IHByaW1pdGl2ZS5fbGV2ZWxaZXJvVGlsZXMubGVuZ3RoO1xyXG4gICAgICAgICAgICBpZiAocm9vdFRyYXZlcnNhbERldGFpbHMubGVuZ3RoIDwgbnVtYmVyT2ZSb290VGlsZXMpIHtcclxuICAgICAgICAgICAgICAgIHJvb3RUcmF2ZXJzYWxEZXRhaWxzID0gbmV3IEFycmF5KG51bWJlck9mUm9vdFRpbGVzKTtcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IDA7IGkgPCBudW1iZXJPZlJvb3RUaWxlczsgKytpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHJvb3RUcmF2ZXJzYWxEZXRhaWxzW2ldID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcm9vdFRyYXZlcnNhbERldGFpbHNbaV0gPSBuZXcgVHJhdmVyc2FsRGV0YWlscygpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIC8vIE5vdGhpbmcgdG8gZG8gdW50aWwgdGhlIHByb3ZpZGVyIGlzIHJlYWR5LlxyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHByaW1pdGl2ZS5fb2NjbHVkZXJzLmVsbGlwc29pZC5jYW1lcmFQb3NpdGlvbiA9IGZyYW1lU3RhdGUuY2FtZXJhLnBvc2l0aW9uV0M7XHJcblxyXG4gICAgdmFyIHRpbGU7XHJcbiAgICB2YXIgbGV2ZWxaZXJvVGlsZXMgPSBwcmltaXRpdmUuX2xldmVsWmVyb1RpbGVzO1xyXG4gICAgdmFyIG9jY2x1ZGVycyA9IGxldmVsWmVyb1RpbGVzLmxlbmd0aCA+IDEgPyBwcmltaXRpdmUuX29jY2x1ZGVycyA6IHVuZGVmaW5lZDtcclxuXHJcbiAgICAvLyBTb3J0IHRoZSBsZXZlbCB6ZXJvIHRpbGVzIGJ5IHRoZSBkaXN0YW5jZSBmcm9tIHRoZSBjZW50ZXIgdG8gdGhlIGNhbWVyYS5cclxuICAgIC8vIFRoZSBsZXZlbCB6ZXJvIHRpbGVzIGFyZW4ndCBuZWNlc3NhcmlseSBhIG5pY2UgbmVhdCBxdWFkLCBzbyB3ZSBjYW4ndCB1c2UgdGhlXHJcbiAgICAvLyBxdWFkdHJlZSBvcmRlcmluZyB3ZSB1c2UgZWxzZXdoZXJlIGluIHRoZSB0cmVlXHJcbiAgICBjb21wYXJpc29uUG9pbnQgPSBmcmFtZVN0YXRlLmNhbWVyYS5wb3NpdGlvbkNhcnRvZ3JhcGhpYztcclxuICAgIGxldmVsWmVyb1RpbGVzLnNvcnQoY29tcGFyZURpc3RhbmNlVG9Qb2ludCk7XHJcblxyXG4gICAgdmFyIGN1c3RvbURhdGFBZGRlZCA9IHByaW1pdGl2ZS5fYWRkSGVpZ2h0Q2FsbGJhY2tzO1xyXG4gICAgdmFyIGN1c3RvbURhdGFSZW1vdmVkID0gcHJpbWl0aXZlLl9yZW1vdmVIZWlnaHRDYWxsYmFja3M7XHJcbiAgICB2YXIgZnJhbWVOdW1iZXIgPSBmcmFtZVN0YXRlLmZyYW1lTnVtYmVyO1xyXG5cclxuICAgIHZhciBsZW47XHJcbiAgICBpZiAoY3VzdG9tRGF0YUFkZGVkLmxlbmd0aCA+IDAgfHwgY3VzdG9tRGF0YVJlbW92ZWQubGVuZ3RoID4gMCkge1xyXG4gICAgICAgIGZvciAoaSA9IDAsIGxlbiA9IGxldmVsWmVyb1RpbGVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgICAgICAgIHRpbGUgPSBsZXZlbFplcm9UaWxlc1tpXTtcclxuICAgICAgICAgICAgdGlsZS5fdXBkYXRlQ3VzdG9tRGF0YShmcmFtZU51bWJlciwgY3VzdG9tRGF0YUFkZGVkLCBjdXN0b21EYXRhUmVtb3ZlZCk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBjdXN0b21EYXRhQWRkZWQubGVuZ3RoID0gMDtcclxuICAgICAgICBjdXN0b21EYXRhUmVtb3ZlZC5sZW5ndGggPSAwO1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBjYW1lcmEgPSBmcmFtZVN0YXRlLmNhbWVyYTtcclxuXHJcbiAgICBwcmltaXRpdmUuX2NhbWVyYVBvc2l0aW9uQ2FydG9ncmFwaGljID0gY2FtZXJhLnBvc2l0aW9uQ2FydG9ncmFwaGljO1xyXG4gICAgdmFyIGNhbWVyYUZyYW1lT3JpZ2luID0gTWF0cml4NC5nZXRUcmFuc2xhdGlvbihjYW1lcmEudHJhbnNmb3JtLCBjYW1lcmFPcmlnaW5TY3JhdGNoKTtcclxuICAgIHByaW1pdGl2ZS5fY2FtZXJhUmVmZXJlbmNlRnJhbWVPcmlnaW5DYXJ0b2dyYXBoaWMgPSBwcmltaXRpdmUudGlsZVByb3ZpZGVyLnRpbGluZ1NjaGVtZS5lbGxpcHNvaWQuY2FydGVzaWFuVG9DYXJ0b2dyYXBoaWMoY2FtZXJhRnJhbWVPcmlnaW4sIHByaW1pdGl2ZS5fY2FtZXJhUmVmZXJlbmNlRnJhbWVPcmlnaW5DYXJ0b2dyYXBoaWMpO1xyXG5cclxuICAgIC8vIFRyYXZlcnNlIGluIGRlcHRoLWZpcnN0LCBuZWFyLXRvLWZhciBvcmRlci5cclxuICAgIGZvciAoaSA9IDAsIGxlbiA9IGxldmVsWmVyb1RpbGVzLmxlbmd0aDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgICAgdGlsZSA9IGxldmVsWmVyb1RpbGVzW2ldO1xyXG4gICAgICAgIHByaW1pdGl2ZS5fdGlsZVJlcGxhY2VtZW50UXVldWUubWFya1RpbGVSZW5kZXJlZCh0aWxlKTtcclxuICAgICAgICBpZiAoIXRpbGUucmVuZGVyYWJsZSkge1xyXG4gICAgICAgICAgICBxdWV1ZVRpbGVMb2FkKHByaW1pdGl2ZSwgcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlSGlnaCwgdGlsZSwgZnJhbWVTdGF0ZSk7XHJcbiAgICAgICAgICAgICsrZGVidWcudGlsZXNXYWl0aW5nRm9yQ2hpbGRyZW47XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgdmlzaXRJZlZpc2libGUocHJpbWl0aXZlLCB0aWxlLCB0aWxlUHJvdmlkZXIsIGZyYW1lU3RhdGUsIG9jY2x1ZGVycywgZmFsc2UsIHJvb3RUcmF2ZXJzYWxEZXRhaWxzW2ldKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcHJpbWl0aXZlLl9sYXN0U2VsZWN0aW9uRnJhbWVOdW1iZXIgPSBmcmFtZU51bWJlcjtcclxufVxyXG5cclxuZnVuY3Rpb24gcXVldWVUaWxlTG9hZChwcmltaXRpdmUsIHF1ZXVlLCB0aWxlLCBmcmFtZVN0YXRlKSB7XHJcbiAgICBpZiAoIXRpbGUubmVlZHNMb2FkaW5nKSB7XHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIGlmIChwcmltaXRpdmUudGlsZVByb3ZpZGVyLmNvbXB1dGVUaWxlTG9hZFByaW9yaXR5ICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICB0aWxlLl9sb2FkUHJpb3JpdHkgPSBwcmltaXRpdmUudGlsZVByb3ZpZGVyLmNvbXB1dGVUaWxlTG9hZFByaW9yaXR5KHRpbGUsIGZyYW1lU3RhdGUpO1xyXG4gICAgfVxyXG4gICAgcXVldWUucHVzaCh0aWxlKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFRyYWNrcyBkZXRhaWxzIG9mIHRyYXZlcnNpbmcgYSB0aWxlIHdoaWxlIHNlbGVjdGluZyB0aWxlcyBmb3IgcmVuZGVyaW5nLlxyXG4gKiBAYWxpYXMgVHJhdmVyc2FsRGV0YWlsc1xyXG4gKiBAY29uc3RydWN0b3JcclxuICogQHByaXZhdGVcclxuICovXHJcbmZ1bmN0aW9uIFRyYXZlcnNhbERldGFpbHMoKSB7XHJcbiAgICAvKipcclxuICAgICAqIFRydWUgaWYgYWxsIHNlbGVjdGVkIChpLmUuIG5vdCBjdWxsZWQgb3IgcmVmaW5lZCkgdGlsZXMgaW4gdGhpcyB0aWxlJ3Mgc3VidHJlZVxyXG4gICAgICogYXJlIHJlbmRlcmFibGUuIElmIHRoZSBzdWJ0cmVlIGlzIHJlbmRlcmFibGUsIHdlJ2xsIHJlbmRlciBpdDsgbm8gZHJhbWEuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuYWxsQXJlUmVuZGVyYWJsZSA9IHRydWU7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBUcnVlIGlmIGFueSB0aWxlcyBpbiB0aGlzIHRpbGUncyBzdWJ0cmVlIHdlcmUgcmVuZGVyZWQgbGFzdCBmcmFtZS4gSWYgYW55XHJcbiAgICAgKiB3ZXJlLCB3ZSBtdXN0IHJlbmRlciB0aGUgc3VidHJlZSByYXRoZXIgdGhhbiB0aGlzIHRpbGUsIGJlY2F1c2UgcmVuZGVyaW5nXHJcbiAgICAgKiB0aGlzIHRpbGUgd291bGQgY2F1c2UgZGV0YWlsIHRvIHZhbmlzaCB0aGF0IHdhcyB2aXNpYmxlIGxhc3QgZnJhbWUsIGFuZFxyXG4gICAgICogdGhhdCdzIG5vIGdvb2QuXHJcbiAgICAgKi9cclxuICAgIHRoaXMuYW55V2VyZVJlbmRlcmVkTGFzdEZyYW1lID0gZmFsc2U7XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiBDb3VudHMgdGhlIG51bWJlciBvZiBzZWxlY3RlZCB0aWxlcyBpbiB0aGlzIHRpbGUncyBzdWJ0cmVlIHRoYXQgYXJlXHJcbiAgICAgKiBub3QgeWV0IHJlYWR5IHRvIGJlIHJlbmRlcmVkIGJlY2F1c2UgdGhleSBuZWVkIG1vcmUgbG9hZGluZy4gTm90ZSB0aGF0XHJcbiAgICAgKiB0aGlzIHZhbHVlIHdpbGwgX25vdF8gbmVjZXNzYXJpbHkgYmUgemVybyB3aGVuXHJcbiAgICAgKiB7QGxpbmsgVHJhdmVyc2FsRGV0YWlscyNhbGxBcmVSZW5kZXJhYmxlfSBpcyB0cnVlLCBmb3Igc3VidGxlIHJlYXNvbnMuXHJcbiAgICAgKiBXaGVuIHtAbGluayBUcmF2ZXJzYWxEZXRhaWxzI2FsbEFyZVJlbmRlcmFibGV9IGFuZFxyXG4gICAgICoge0BsaW5rIFRyYXZlcnNhbERldGFpbHMjYW55V2VyZVJlbmRlcmVkTGFzdEZyYW1lfSBhcmUgYm90aCBmYWxzZSwgd2VcclxuICAgICAqIHdpbGwgcmVuZGVyIHRoaXMgdGlsZSBpbnN0ZWFkIG9mIGFueSB0aWxlcyBpbiBpdHMgc3VidHJlZSBhbmRcclxuICAgICAqIHRoZSBgYWxsQXJlUmVuZGVyYWJsZWAgdmFsdWUgZm9yIHRoaXMgdGlsZSB3aWxsIHJlZmxlY3Qgb25seSB3aGV0aGVyIF90aGlzX1xyXG4gICAgICogdGlsZSBpcyByZW5kZXJhYmxlLiBUaGUgYG5vdFlldFJlbmRlcmFibGVDb3VudGAgdmFsdWUsIGhvd2V2ZXIsIHdpbGwgc3RpbGxcclxuICAgICAqIHJlZmxlY3QgdGhlIHRvdGFsIG51bWJlciBvZiB0aWxlcyB0aGF0IHdlIGFyZSB3YWl0aW5nIG9uLCBpbmNsdWRpbmcgdGhlXHJcbiAgICAgKiBvbmVzIHRoYXQgd2UncmUgbm90IHJlbmRlcmluZy4gYG5vdFlldFJlbmRlcmFibGVDb3VudGAgaXMgb25seSByZXNldFxyXG4gICAgICogd2hlbiBhIHN1YnRyZWUgaXMgcmVtb3ZlZCBmcm9tIHRoZSByZW5kZXIgcXVldWUgYmVjYXVzZSB0aGVcclxuICAgICAqIGBub3RZZXRSZW5kZXJhYmxlQ291bnRgIGV4Y2VlZHMgdGhlXHJcbiAgICAgKiB7QGxpbmsgUXVhZHRyZWVQcmltaXRpdmUjbG9hZGluZ0Rlc2NlbmRhbnRMaW1pdH0uXHJcbiAgICAgKi9cclxuICAgIHRoaXMubm90WWV0UmVuZGVyYWJsZUNvdW50ID0gMDtcclxufVxyXG5cclxuZnVuY3Rpb24gVHJhdmVyc2FsUXVhZERldGFpbHMoKSB7XHJcbiAgICB0aGlzLnNvdXRod2VzdCA9IG5ldyBUcmF2ZXJzYWxEZXRhaWxzKCk7XHJcbiAgICB0aGlzLnNvdXRoZWFzdCA9IG5ldyBUcmF2ZXJzYWxEZXRhaWxzKCk7XHJcbiAgICB0aGlzLm5vcnRod2VzdCA9IG5ldyBUcmF2ZXJzYWxEZXRhaWxzKCk7XHJcbiAgICB0aGlzLm5vcnRoZWFzdCA9IG5ldyBUcmF2ZXJzYWxEZXRhaWxzKCk7XHJcbn1cclxuXHJcblRyYXZlcnNhbFF1YWREZXRhaWxzLnByb3RvdHlwZS5jb21iaW5lID0gZnVuY3Rpb24ocmVzdWx0KSB7XHJcbiAgICB2YXIgc291dGh3ZXN0ID0gdGhpcy5zb3V0aHdlc3Q7XHJcbiAgICB2YXIgc291dGhlYXN0ID0gdGhpcy5zb3V0aGVhc3Q7XHJcbiAgICB2YXIgbm9ydGh3ZXN0ID0gdGhpcy5ub3J0aHdlc3Q7XHJcbiAgICB2YXIgbm9ydGhlYXN0ID0gdGhpcy5ub3J0aGVhc3Q7XHJcblxyXG4gICAgcmVzdWx0LmFsbEFyZVJlbmRlcmFibGUgPSBzb3V0aHdlc3QuYWxsQXJlUmVuZGVyYWJsZSAmJiBzb3V0aGVhc3QuYWxsQXJlUmVuZGVyYWJsZSAmJiBub3J0aHdlc3QuYWxsQXJlUmVuZGVyYWJsZSAmJiBub3J0aGVhc3QuYWxsQXJlUmVuZGVyYWJsZTtcclxuICAgIHJlc3VsdC5hbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUgPSBzb3V0aHdlc3QuYW55V2VyZVJlbmRlcmVkTGFzdEZyYW1lIHx8IHNvdXRoZWFzdC5hbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUgfHwgbm9ydGh3ZXN0LmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSB8fCBub3J0aGVhc3QuYW55V2VyZVJlbmRlcmVkTGFzdEZyYW1lO1xyXG4gICAgcmVzdWx0Lm5vdFlldFJlbmRlcmFibGVDb3VudCA9IHNvdXRod2VzdC5ub3RZZXRSZW5kZXJhYmxlQ291bnQgKyBzb3V0aGVhc3Qubm90WWV0UmVuZGVyYWJsZUNvdW50ICsgbm9ydGh3ZXN0Lm5vdFlldFJlbmRlcmFibGVDb3VudCArIG5vcnRoZWFzdC5ub3RZZXRSZW5kZXJhYmxlQ291bnQ7XHJcbn07XHJcblxyXG52YXIgdHJhdmVyc2FsUXVhZHNCeUxldmVsID0gbmV3IEFycmF5KDMxKTsgLy8gbGV2ZWwgMzAgdGlsZXMgYXJlIH4yY20gd2lkZSBhdCB0aGUgZXF1YXRvciwgc2hvdWxkIGJlIGdvb2QgZW5vdWdoLlxyXG5mb3IgKHZhciBpID0gMDsgaSA8IHRyYXZlcnNhbFF1YWRzQnlMZXZlbC5sZW5ndGg7ICsraSkge1xyXG4gICAgdHJhdmVyc2FsUXVhZHNCeUxldmVsW2ldID0gbmV3IFRyYXZlcnNhbFF1YWREZXRhaWxzKCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFsdGl0dWRlVG9ab29tKGFsdGl0dWRlKSB7XHJcbiAgICB2YXIgQSA9IDQwNDg3LjU3O1xyXG4gICAgdmFyIEIgPSAwLjAwMDA3MDk2NzU4O1xyXG4gICAgdmFyIEMgPSA5MTYxMC43NDtcclxuICAgIHZhciBEID0gLTQwNDY3Ljc0O1xyXG5cclxuICAgIHJldHVybiBNYXRoLnJvdW5kKEQrKEEtRCkvKDErTWF0aC5wb3coYWx0aXR1ZGUvQywgQikpKTtcclxufVxyXG5cclxuLyoqXHJcbiAqIFZpc2l0cyBhIHRpbGUgZm9yIHBvc3NpYmxlIHJlbmRlcmluZy4gV2hlbiB3ZSBjYWxsIHRoaXMgZnVuY3Rpb24gd2l0aCBhIHRpbGU6XHJcbiAqXHJcbiAqICAgICogdGhlIHRpbGUgaGFzIGJlZW4gZGV0ZXJtaW5lZCB0byBiZSB2aXNpYmxlIChwb3NzaWJseSBiYXNlZCBvbiBhIGJvdW5kaW5nIHZvbHVtZSB0aGF0IGlzIG5vdCB2ZXJ5IHRpZ2h0LWZpdHRpbmcpXHJcbiAqICAgICogaXRzIHBhcmVudCB0aWxlIGRvZXMgX25vdF8gbWVldCB0aGUgU1NFICh1bmxlc3MgYW5jZXN0b3JNZWV0c1NzZT10cnVlLCBzZWUgY29tbWVudHMgYmVsb3cpXHJcbiAqICAgICogdGhlIHRpbGUgbWF5IG9yIG1heSBub3QgYmUgcmVuZGVyYWJsZVxyXG4gKlxyXG4gKiBAcHJpdmF0ZVxyXG4gKlxyXG4gKiBAcGFyYW0ge1ByaW1pdGl2ZX0gcHJpbWl0aXZlIFRoZSBRdWFkdHJlZVByaW1pdGl2ZS5cclxuICogQHBhcmFtIHtGcmFtZVN0YXRlfSBmcmFtZVN0YXRlIFRoZSBmcmFtZSBzdGF0ZS5cclxuICogQHBhcmFtIHtRdWFkdHJlZVRpbGV9IHRpbGUgVGhlIHRpbGUgdG8gdmlzaXRcclxuICogQHBhcmFtIHtCb29sZWFufSBhbmNlc3Rvck1lZXRzU3NlIFRydWUgaWYgYSB0aWxlIGhpZ2hlciBpbiB0aGUgdGlsZSB0cmVlIGFscmVhZHkgbWV0IHRoZSBTU0UgYW5kIHdlJ3JlIHJlZmluaW5nIGZ1cnRoZXIgb25seVxyXG4gKiAgICAgICAgICAgICAgICAgIHRvIG1haW50YWluIGRldGFpbCB3aGlsZSB0aGF0IGhpZ2hlciB0aWxlIGxvYWRzLlxyXG4gKiBAcGFyYW0ge1RyYXZlcnNhbERldGFpbHN9IHRyYXZlcmFsRGV0YWlscyBPbiByZXR1cm4sIHBvcHVsYXRlZCB3aXRoIGRldGFpbHMgb2YgaG93IHRoZSB0cmF2ZXJzYWwgb2YgdGhpcyB0aWxlIHdlbnQuXHJcbiAqL1xyXG5mdW5jdGlvbiB2aXNpdFRpbGUocHJpbWl0aXZlLCBmcmFtZVN0YXRlLCB0aWxlLCBhbmNlc3Rvck1lZXRzU3NlLCB0cmF2ZXJzYWxEZXRhaWxzKSB7XHJcbiAgICB2YXIgZGVidWcgPSBwcmltaXRpdmUuX2RlYnVnO1xyXG5cclxuICAgICsrZGVidWcudGlsZXNWaXNpdGVkO1xyXG5cclxuICAgIHByaW1pdGl2ZS5fdGlsZVJlcGxhY2VtZW50UXVldWUubWFya1RpbGVSZW5kZXJlZCh0aWxlKTtcclxuICAgIHRpbGUuX3VwZGF0ZUN1c3RvbURhdGEoZnJhbWVTdGF0ZS5mcmFtZU51bWJlcik7XHJcblxyXG4gICAgaWYgKHRpbGUubGV2ZWwgPiBkZWJ1Zy5tYXhEZXB0aFZpc2l0ZWQpIHtcclxuICAgICAgICBkZWJ1Zy5tYXhEZXB0aFZpc2l0ZWQgPSB0aWxlLmxldmVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIHZhciBtZWV0c1NzZSA9IHNjcmVlblNwYWNlRXJyb3IocHJpbWl0aXZlLCBmcmFtZVN0YXRlLCB0aWxlKSA8IHByaW1pdGl2ZS5tYXhpbXVtU2NyZWVuU3BhY2VFcnJvcjtcclxuXHJcbiAgICBpZiAoZnJhbWVTdGF0ZS5tb2RlID09PSBTY2VuZU1vZGUuU0NFTkUyRCB8fCBmcmFtZVN0YXRlLmNhbWVyYS5mcnVzdHVtIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljRnJ1c3R1bSB8fCBmcmFtZVN0YXRlLmNhbWVyYS5mcnVzdHVtIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljT2ZmQ2VudGVyRnJ1c3R1bSkge1xyXG4gICAgICAgIHJldHVybiBzY3JlZW5TcGFjZUVycm9yMkQocHJpbWl0aXZlLCBmcmFtZVN0YXRlLCB0aWxlKTtcclxuICAgIH1cclxuICAgIHZhciBtZWV0c1NzZSA9IHNjcmVlblNwYWNlRXJyb3IocHJpbWl0aXZlLCBmcmFtZVN0YXRlLCB0aWxlKSA8IHByaW1pdGl2ZS5tYXhpbXVtU2NyZWVuU3BhY2VFcnJvciA7XHJcbiAgICAvLyB2YXIgbWVldHNTc2UgPSB0aWxlLmxldmVsID09ICBhbHRpdHVkZVRvWm9vbShmcmFtZVN0YXRlLmNhbWVyYS5wb3NpdGlvbkNhcnRvZ3JhcGhpYy5oZWlnaHQpO1xyXG4gICAgdmFyIHNvdXRod2VzdENoaWxkID0gdGlsZS5zb3V0aHdlc3RDaGlsZDtcclxuICAgIHZhciBzb3V0aGVhc3RDaGlsZCA9IHRpbGUuc291dGhlYXN0Q2hpbGQ7XHJcbiAgICB2YXIgbm9ydGh3ZXN0Q2hpbGQgPSB0aWxlLm5vcnRod2VzdENoaWxkO1xyXG4gICAgdmFyIG5vcnRoZWFzdENoaWxkID0gdGlsZS5ub3J0aGVhc3RDaGlsZDtcclxuXHJcbiAgICB2YXIgbGFzdEZyYW1lID0gcHJpbWl0aXZlLl9sYXN0U2VsZWN0aW9uRnJhbWVOdW1iZXI7XHJcbiAgICB2YXIgbGFzdEZyYW1lU2VsZWN0aW9uUmVzdWx0ID0gdGlsZS5fbGFzdFNlbGVjdGlvblJlc3VsdEZyYW1lID09PSBsYXN0RnJhbWUgPyB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0IDogVGlsZVNlbGVjdGlvblJlc3VsdC5OT05FO1xyXG5cclxuICAgIHZhciB0aWxlUHJvdmlkZXIgPSBwcmltaXRpdmUudGlsZVByb3ZpZGVyO1xyXG5cclxuICAgIGlmIChtZWV0c1NzZSB8fCBhbmNlc3Rvck1lZXRzU3NlKSB7XHJcbiAgICAgICAgLy8gVGhpcyB0aWxlIChvciBhbiBhbmNlc3RvcikgaXMgdGhlIG9uZSB3ZSB3YW50IHRvIHJlbmRlciB0aGlzIGZyYW1lLCBidXQgd2UnbGwgZG8gZGlmZmVyZW50IHRoaW5ncyBkZXBlbmRpbmdcclxuICAgICAgICAvLyBvbiB0aGUgc3RhdGUgb2YgdGhpcyB0aWxlIGFuZCBvbiB3aGF0IHdlIGRpZCBfbGFzdF8gZnJhbWUuXHJcblxyXG4gICAgICAgIC8vIFdlIGNhbiByZW5kZXIgaXQgaWYgX2FueV8gb2YgdGhlIGZvbGxvd2luZyBhcmUgdHJ1ZTpcclxuICAgICAgICAvLyAxLiBXZSByZW5kZXJlZCBpdCAob3Iga2lja2VkIGl0KSBsYXN0IGZyYW1lLlxyXG4gICAgICAgIC8vIDIuIFRoaXMgdGlsZSB3YXMgY3VsbGVkIGxhc3QgZnJhbWUsIG9yIGl0IHdhc24ndCBldmVuIHZpc2l0ZWQgYmVjYXVzZSBhbiBhbmNlc3RvciB3YXMgY3VsbGVkLlxyXG4gICAgICAgIC8vIDMuIFRoZSB0aWxlIGlzIGNvbXBsZXRlbHkgZG9uZSBsb2FkaW5nLlxyXG4gICAgICAgIC8vIDQuIGEpIFRlcnJhaW4gaXMgcmVhZHksIGFuZFxyXG4gICAgICAgIC8vICAgIGIpIEFsbCBuZWNlc3NhcnkgaW1hZ2VyeSBpcyByZWFkeS4gTmVjZXNzYXJ5IGltYWdlcnkgaXMgaW1hZ2VyeSB0aGF0IHdhcyByZW5kZXJlZCB3aXRoIHRoaXMgdGlsZVxyXG4gICAgICAgIC8vICAgICAgIG9yIGFueSBkZXNjZW5kYW50cyBsYXN0IGZyYW1lLiBTdWNoIGltYWdlcnkgaXMgcmVxdWlyZWQgYmVjYXVzZSByZW5kZXJpbmcgdGhpcyB0aWxlIHdpdGhvdXRcclxuICAgICAgICAvLyAgICAgICBpdCB3b3VsZCBjYXVzZSBkZXRhaWwgdG8gZGlzYXBwZWFyLlxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gRGV0ZXJtaW5pbmcgY29uZGl0aW9uIDQgaXMgbW9yZSBleHBlbnNpdmUsIHNvIHdlIGNoZWNrIHRoZSBvdGhlcnMgZmlyc3QuXHJcbiAgICAgICAgLy9cclxuICAgICAgICAvLyBOb3RlIHRoYXQgZXZlbiBpZiB3ZSBkZWNpZGUgdG8gcmVuZGVyIGEgdGlsZSBoZXJlLCBpdCBtYXkgbGF0ZXIgZ2V0IFwia2lja2VkXCIgaW4gZmF2b3Igb2YgYW4gYW5jZXN0b3IuXHJcblxyXG4gICAgICAgIHZhciBvbmVSZW5kZXJlZExhc3RGcmFtZSA9IFRpbGVTZWxlY3Rpb25SZXN1bHQub3JpZ2luYWxSZXN1bHQobGFzdEZyYW1lU2VsZWN0aW9uUmVzdWx0KSA9PT0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcclxuICAgICAgICB2YXIgdHdvQ3VsbGVkT3JOb3RWaXNpdGVkID0gVGlsZVNlbGVjdGlvblJlc3VsdC5vcmlnaW5hbFJlc3VsdChsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQpID09PSBUaWxlU2VsZWN0aW9uUmVzdWx0LkNVTExFRCB8fCBsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQgPT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuTk9ORTtcclxuICAgICAgICB2YXIgdGhyZWVDb21wbGV0ZWx5TG9hZGVkID0gdGlsZS5zdGF0ZSA9PT0gUXVhZHRyZWVUaWxlTG9hZFN0YXRlLkRPTkU7XHJcblxyXG4gICAgICAgIHZhciByZW5kZXJhYmxlID0gb25lUmVuZGVyZWRMYXN0RnJhbWUgfHwgdHdvQ3VsbGVkT3JOb3RWaXNpdGVkIHx8IHRocmVlQ29tcGxldGVseUxvYWRlZDtcclxuXHJcbiAgICAgICAgaWYgKCFyZW5kZXJhYmxlKSB7XHJcbiAgICAgICAgICAgIC8vIENoZWNrIHRoZSBtb3JlIGV4cGVuc2l2ZSBjb25kaXRpb24gNCBhYm92ZS4gVGhpcyByZXF1aXJlcyBkZXRhaWxzIG9mIHRoZSB0aGluZ1xyXG4gICAgICAgICAgICAvLyB3ZSdyZSByZW5kZXJpbmcgKGUuZy4gdGhlIGdsb2JlIHN1cmZhY2UpLCBzbyBkZWxlZ2F0ZSBpdCB0byB0aGUgdGlsZSBwcm92aWRlci5cclxuICAgICAgICAgICAgaWYgKGRlZmluZWQodGlsZVByb3ZpZGVyLmNhblJlbmRlcldpdGhvdXRMb3NpbmdEZXRhaWwpKSB7XHJcbiAgICAgICAgICAgICAgICByZW5kZXJhYmxlID0gdGlsZVByb3ZpZGVyLmNhblJlbmRlcldpdGhvdXRMb3NpbmdEZXRhaWwodGlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChyZW5kZXJhYmxlKSB7XHJcbiAgICAgICAgICAgIC8vIE9ubHkgbG9hZCB0aGlzIHRpbGUgaWYgaXQgKG5vdCBqdXN0IGFuIGFuY2VzdG9yKSBtZWV0cyB0aGUgU1NFLlxyXG4gICAgICAgICAgICBpZiAobWVldHNTc2UpIHtcclxuICAgICAgICAgICAgICAgIHF1ZXVlVGlsZUxvYWQocHJpbWl0aXZlLCBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVNZWRpdW0sIHRpbGUsIGZyYW1lU3RhdGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGFkZFRpbGVUb1JlbmRlckxpc3QocHJpbWl0aXZlLCB0aWxlKTtcclxuXHJcbiAgICAgICAgICAgIHRyYXZlcnNhbERldGFpbHMuYWxsQXJlUmVuZGVyYWJsZSA9IHRpbGUucmVuZGVyYWJsZTtcclxuICAgICAgICAgICAgdHJhdmVyc2FsRGV0YWlscy5hbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUgPSBsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQgPT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuUkVOREVSRUQ7XHJcbiAgICAgICAgICAgIHRyYXZlcnNhbERldGFpbHMubm90WWV0UmVuZGVyYWJsZUNvdW50ID0gdGlsZS5yZW5kZXJhYmxlID8gMCA6IDE7XHJcblxyXG4gICAgICAgICAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0RnJhbWUgPSBmcmFtZVN0YXRlLmZyYW1lTnVtYmVyO1xyXG4gICAgICAgICAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ID0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcclxuXHJcbiAgICAgICAgICAgIGlmICghdHJhdmVyc2FsRGV0YWlscy5hbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFRpbGUgaXMgbmV3bHktcmVuZGVyZWQgdGhpcyBmcmFtZSwgc28gdXBkYXRlIGl0cyBoZWlnaHRzLlxyXG4gICAgICAgICAgICAgICAgcHJpbWl0aXZlLl90aWxlVG9VcGRhdGVIZWlnaHRzLnB1c2godGlsZSk7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8vIE90aGVyd2lzZSwgd2UgY2FuJ3QgcmVuZGVyIHRoaXMgdGlsZSAob3IgaXRzIGZpbGwpIGJlY2F1c2UgZG9pbmcgc28gd291bGQgY2F1c2UgZGV0YWlsIHRvIGRpc2FwcGVhclxyXG4gICAgICAgIC8vIHRoYXQgd2FzIHZpc2libGUgbGFzdCBmcmFtZS4gSW5zdGVhZCwga2VlcCByZW5kZXJpbmcgYW55IHN0aWxsLXZpc2libGUgZGVzY2VuZGFudHMgdGhhdCB3ZXJlIHJlbmRlcmVkXHJcbiAgICAgICAgLy8gbGFzdCBmcmFtZSBhbmQgcmVuZGVyIGZpbGxzIGZvciBuZXdseS12aXNpYmxlIGRlc2NlbmRhbnRzLiBFLmcuIGlmIHdlIHdlcmUgcmVuZGVyaW5nIGxldmVsIDE1IGxhc3RcclxuICAgICAgICAvLyBmcmFtZSBidXQgdGhpcyBmcmFtZSB3ZSB3YW50IGxldmVsIDE0IGFuZCB0aGUgY2xvc2VzdCByZW5kZXJhYmxlIGxldmVsIDw9IDE0IGlzIDAsIHJlbmRlcmluZyBsZXZlbFxyXG4gICAgICAgIC8vIHplcm8gd291bGQgYmUgcHJldHR5IGphcnJpbmcgc28gaW5zdGVhZCB3ZSBrZWVwIHJlbmRlcmluZyBsZXZlbCAxNSBldmVuIHRob3VnaCBpdHMgU1NFIGlzIGJldHRlclxyXG4gICAgICAgIC8vIHRoYW4gcmVxdWlyZWQuIFNvIGZhbGwgdGhyb3VnaCB0byBjb250aW51ZSB0cmF2ZXJzYWwuLi5cclxuICAgICAgICBhbmNlc3Rvck1lZXRzU3NlID0gdHJ1ZTtcclxuXHJcbiAgICAgICAgLy8gTG9hZCB0aGlzIGJsb2NrZXIgdGlsZSB3aXRoIGhpZ2ggcHJpb3JpdHksIGJ1dCBvbmx5IGlmIHRoaXMgdGlsZSAobm90IGp1c3QgYW4gYW5jZXN0b3IpIG1lZXRzIHRoZSBTU0UuXHJcbiAgICAgICAgaWYgKG1lZXRzU3NlKSB7XHJcbiAgICAgICAgICAgIHF1ZXVlVGlsZUxvYWQocHJpbWl0aXZlLCBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVIaWdoLCB0aWxlLCBmcmFtZVN0YXRlKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHRpbGVQcm92aWRlci5jYW5SZWZpbmUodGlsZSkpIHtcclxuICAgICAgICB2YXIgYWxsQXJlVXBzYW1wbGVkID0gc291dGh3ZXN0Q2hpbGQudXBzYW1wbGVkRnJvbVBhcmVudCAmJiBzb3V0aGVhc3RDaGlsZC51cHNhbXBsZWRGcm9tUGFyZW50ICYmXHJcbiAgICAgICAgICAgIG5vcnRod2VzdENoaWxkLnVwc2FtcGxlZEZyb21QYXJlbnQgJiYgbm9ydGhlYXN0Q2hpbGQudXBzYW1wbGVkRnJvbVBhcmVudDtcclxuXHJcbiAgICAgICAgaWYgKGFsbEFyZVVwc2FtcGxlZCkge1xyXG4gICAgICAgICAgICAvLyBObyBwb2ludCBpbiByZW5kZXJpbmcgdGhlIGNoaWxkcmVuIGJlY2F1c2UgdGhleSdyZSBhbGwgdXBzYW1wbGVkLiAgUmVuZGVyIHRoaXMgdGlsZSBpbnN0ZWFkLlxyXG4gICAgICAgICAgICBhZGRUaWxlVG9SZW5kZXJMaXN0KHByaW1pdGl2ZSwgdGlsZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBSZW5kZXJlZCB0aWxlIHRoYXQncyBub3Qgd2FpdGluZyBvbiBjaGlsZHJlbiBsb2FkcyB3aXRoIG1lZGl1bSBwcmlvcml0eS5cclxuICAgICAgICAgICAgcXVldWVUaWxlTG9hZChwcmltaXRpdmUsIHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZU1lZGl1bSwgdGlsZSwgZnJhbWVTdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICAvLyBNYWtlIHN1cmUgd2UgZG9uJ3QgdW5sb2FkIHRoZSBjaGlsZHJlbiBhbmQgZm9yZ2V0IHRoZXkncmUgdXBzYW1wbGVkLlxyXG4gICAgICAgICAgICBwcmltaXRpdmUuX3RpbGVSZXBsYWNlbWVudFF1ZXVlLm1hcmtUaWxlUmVuZGVyZWQoc291dGh3ZXN0Q2hpbGQpO1xyXG4gICAgICAgICAgICBwcmltaXRpdmUuX3RpbGVSZXBsYWNlbWVudFF1ZXVlLm1hcmtUaWxlUmVuZGVyZWQoc291dGhlYXN0Q2hpbGQpO1xyXG4gICAgICAgICAgICBwcmltaXRpdmUuX3RpbGVSZXBsYWNlbWVudFF1ZXVlLm1hcmtUaWxlUmVuZGVyZWQobm9ydGh3ZXN0Q2hpbGQpO1xyXG4gICAgICAgICAgICBwcmltaXRpdmUuX3RpbGVSZXBsYWNlbWVudFF1ZXVlLm1hcmtUaWxlUmVuZGVyZWQobm9ydGhlYXN0Q2hpbGQpO1xyXG5cclxuICAgICAgICAgICAgdHJhdmVyc2FsRGV0YWlscy5hbGxBcmVSZW5kZXJhYmxlID0gdGlsZS5yZW5kZXJhYmxlO1xyXG4gICAgICAgICAgICB0cmF2ZXJzYWxEZXRhaWxzLmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSA9IGxhc3RGcmFtZVNlbGVjdGlvblJlc3VsdCA9PT0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcclxuICAgICAgICAgICAgdHJhdmVyc2FsRGV0YWlscy5ub3RZZXRSZW5kZXJhYmxlQ291bnQgPSB0aWxlLnJlbmRlcmFibGUgPyAwIDogMTtcclxuXHJcbiAgICAgICAgICAgIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHRGcmFtZSA9IGZyYW1lU3RhdGUuZnJhbWVOdW1iZXI7XHJcbiAgICAgICAgICAgIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHQgPSBUaWxlU2VsZWN0aW9uUmVzdWx0LlJFTkRFUkVEO1xyXG5cclxuICAgICAgICAgICAgaWYgKCF0cmF2ZXJzYWxEZXRhaWxzLmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSkge1xyXG4gICAgICAgICAgICAgICAgLy8gVGlsZSBpcyBuZXdseS1yZW5kZXJlZCB0aGlzIGZyYW1lLCBzbyB1cGRhdGUgaXRzIGhlaWdodHMuXHJcbiAgICAgICAgICAgICAgICBwcmltaXRpdmUuX3RpbGVUb1VwZGF0ZUhlaWdodHMucHVzaCh0aWxlKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy8gU1NFIGlzIG5vdCBnb29kIGVub3VnaCwgc28gcmVmaW5lLlxyXG4gICAgICAgIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHRGcmFtZSA9IGZyYW1lU3RhdGUuZnJhbWVOdW1iZXI7XHJcbiAgICAgICAgdGlsZS5fbGFzdFNlbGVjdGlvblJlc3VsdCA9IFRpbGVTZWxlY3Rpb25SZXN1bHQuUkVGSU5FRDtcclxuXHJcbiAgICAgICAgdmFyIGZpcnN0UmVuZGVyZWREZXNjZW5kYW50SW5kZXggPSBwcmltaXRpdmUuX3RpbGVzVG9SZW5kZXIubGVuZ3RoO1xyXG4gICAgICAgIHZhciBsb2FkSW5kZXhMb3cgPSBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVMb3cubGVuZ3RoO1xyXG4gICAgICAgIHZhciBsb2FkSW5kZXhNZWRpdW0gPSBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVNZWRpdW0ubGVuZ3RoO1xyXG4gICAgICAgIHZhciBsb2FkSW5kZXhIaWdoID0gcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlSGlnaC5sZW5ndGg7XHJcbiAgICAgICAgdmFyIHRpbGVzVG9VcGRhdGVIZWlnaHRzSW5kZXggPSBwcmltaXRpdmUuX3RpbGVUb1VwZGF0ZUhlaWdodHMubGVuZ3RoO1xyXG5cclxuICAgICAgICAvLyBObyBuZWVkIHRvIGFkZCB0aGUgY2hpbGRyZW4gdG8gdGhlIGxvYWQgcXVldWUgYmVjYXVzZSB0aGV5J2xsIGJlIGFkZGVkIChpZiBuZWNlc3NhcnkpIHdoZW4gdGhleSdyZSB2aXNpdGVkLlxyXG4gICAgICAgIHZpc2l0VmlzaWJsZUNoaWxkcmVuTmVhclRvRmFyKHByaW1pdGl2ZSwgc291dGh3ZXN0Q2hpbGQsIHNvdXRoZWFzdENoaWxkLCBub3J0aHdlc3RDaGlsZCwgbm9ydGhlYXN0Q2hpbGQsIGZyYW1lU3RhdGUsIGFuY2VzdG9yTWVldHNTc2UsIHRyYXZlcnNhbERldGFpbHMpO1xyXG5cclxuICAgICAgICAvLyBJZiBubyBkZXNjZW5kYW50IHRpbGVzIHdlcmUgYWRkZWQgdG8gdGhlIHJlbmRlciBsaXN0IGJ5IHRoZSBmdW5jdGlvbiBhYm92ZSwgaXQgbWVhbnMgdGhleSB3ZXJlIGFsbFxyXG4gICAgICAgIC8vIGN1bGxlZCBldmVuIHRob3VnaCB0aGlzIHRpbGUgd2FzIGRlZW1lZCB2aXNpYmxlLiBUaGF0J3MgcHJldHR5IGNvbW1vbi5cclxuXHJcbiAgICAgICAgaWYgKGZpcnN0UmVuZGVyZWREZXNjZW5kYW50SW5kZXggIT09IHByaW1pdGl2ZS5fdGlsZXNUb1JlbmRlci5sZW5ndGgpIHtcclxuICAgICAgICAgICAgLy8gQXQgbGVhc3Qgb25lIGRlc2NlbmRhbnQgdGlsZSB3YXMgYWRkZWQgdG8gdGhlIHJlbmRlciBsaXN0LlxyXG4gICAgICAgICAgICAvLyBUaGUgdHJhdmVyc2FsRGV0YWlscyB0ZWxsIHVzIHdoYXQgaGFwcGVuZWQgd2hpbGUgdmlzaXRpbmcgdGhlIGNoaWxkcmVuLlxyXG5cclxuICAgICAgICAgICAgdmFyIGFsbEFyZVJlbmRlcmFibGUgPSB0cmF2ZXJzYWxEZXRhaWxzLmFsbEFyZVJlbmRlcmFibGU7XHJcbiAgICAgICAgICAgIHZhciBhbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUgPSB0cmF2ZXJzYWxEZXRhaWxzLmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZTtcclxuICAgICAgICAgICAgdmFyIG5vdFlldFJlbmRlcmFibGVDb3VudCA9IHRyYXZlcnNhbERldGFpbHMubm90WWV0UmVuZGVyYWJsZUNvdW50O1xyXG4gICAgICAgICAgICB2YXIgcXVldWVkRm9yTG9hZCA9IGZhbHNlO1xyXG5cclxuICAgICAgICAgICAgaWYgKCFhbGxBcmVSZW5kZXJhYmxlICYmICFhbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUpIHtcclxuICAgICAgICAgICAgICAgIC8vIFNvbWUgb2Ygb3VyIGRlc2NlbmRhbnRzIGFyZW4ndCByZWFkeSB0byByZW5kZXIgeWV0LCBhbmQgbm9uZSB3ZXJlIHJlbmRlcmVkIGxhc3QgZnJhbWUsXHJcbiAgICAgICAgICAgICAgICAvLyBzbyBraWNrIHRoZW0gYWxsIG91dCBvZiB0aGUgcmVuZGVyIGxpc3QgYW5kIHJlbmRlciB0aGlzIHRpbGUgaW5zdGVhZC4gQ29udGludWUgdG8gbG9hZCB0aGVtIHRob3VnaCFcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBNYXJrIHRoZSByZW5kZXJlZCBkZXNjZW5kYW50cyBhbmQgdGhlaXIgYW5jZXN0b3JzIC0gdXAgdG8gdGhpcyB0aWxlIC0gYXMga2lja2VkLlxyXG4gICAgICAgICAgICAgICAgdmFyIHJlbmRlckxpc3QgPSBwcmltaXRpdmUuX3RpbGVzVG9SZW5kZXI7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBpID0gZmlyc3RSZW5kZXJlZERlc2NlbmRhbnRJbmRleDsgaSA8IHJlbmRlckxpc3QubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgd29ya1RpbGUgPSByZW5kZXJMaXN0W2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIHdoaWxlICh3b3JrVGlsZSAhPT0gdW5kZWZpbmVkICYmIHdvcmtUaWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ICE9PSBUaWxlU2VsZWN0aW9uUmVzdWx0LktJQ0tFRCAmJiB3b3JrVGlsZSAhPT0gdGlsZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB3b3JrVGlsZS5fbGFzdFNlbGVjdGlvblJlc3VsdCA9IFRpbGVTZWxlY3Rpb25SZXN1bHQua2ljayh3b3JrVGlsZS5fbGFzdFNlbGVjdGlvblJlc3VsdCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHdvcmtUaWxlID0gd29ya1RpbGUucGFyZW50O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyBSZW1vdmUgYWxsIGRlc2NlbmRhbnRzIGZyb20gdGhlIHJlbmRlciBsaXN0IGFuZCBhZGQgdGhpcyB0aWxlLlxyXG4gICAgICAgICAgICAgICAgcHJpbWl0aXZlLl90aWxlc1RvUmVuZGVyLmxlbmd0aCA9IGZpcnN0UmVuZGVyZWREZXNjZW5kYW50SW5kZXg7XHJcbiAgICAgICAgICAgICAgICBwcmltaXRpdmUuX3RpbGVUb1VwZGF0ZUhlaWdodHMubGVuZ3RoID0gdGlsZXNUb1VwZGF0ZUhlaWdodHNJbmRleDtcclxuICAgICAgICAgICAgICAgIGFkZFRpbGVUb1JlbmRlckxpc3QocHJpbWl0aXZlLCB0aWxlKTtcclxuXHJcbiAgICAgICAgICAgICAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ID0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcclxuXHJcbiAgICAgICAgICAgICAgICAvLyBJZiB3ZSdyZSB3YWl0aW5nIG9uIGhlYXBzIG9mIGRlc2NlbmRhbnRzLCB0aGUgYWJvdmUgd2lsbCB0YWtlIHRvbyBsb25nLiBTbyBpbiB0aGF0IGNhc2UsXHJcbiAgICAgICAgICAgICAgICAvLyBsb2FkIHRoaXMgdGlsZSBJTlNURUFEIG9mIGxvYWRpbmcgYW55IG9mIHRoZSBkZXNjZW5kYW50cywgYW5kIHRlbGwgdGhlIHVwLWxldmVsIHdlJ3JlIG9ubHkgd2FpdGluZ1xyXG4gICAgICAgICAgICAgICAgLy8gb24gdGhpcyB0aWxlLiBLZWVwIGRvaW5nIHRoaXMgdW50aWwgd2UgYWN0dWFsbHkgbWFuYWdlIHRvIHJlbmRlciB0aGlzIHRpbGUuXHJcbiAgICAgICAgICAgICAgICB2YXIgd2FzUmVuZGVyZWRMYXN0RnJhbWUgPSBsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQgPT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuUkVOREVSRUQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoIXdhc1JlbmRlcmVkTGFzdEZyYW1lICYmIG5vdFlldFJlbmRlcmFibGVDb3VudCA+IHByaW1pdGl2ZS5sb2FkaW5nRGVzY2VuZGFudExpbWl0KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gUmVtb3ZlIGFsbCBkZXNjZW5kYW50cyBmcm9tIHRoZSBsb2FkIHF1ZXVlcy5cclxuICAgICAgICAgICAgICAgICAgICBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVMb3cubGVuZ3RoID0gbG9hZEluZGV4TG93O1xyXG4gICAgICAgICAgICAgICAgICAgIHByaW1pdGl2ZS5fdGlsZUxvYWRRdWV1ZU1lZGl1bS5sZW5ndGggPSBsb2FkSW5kZXhNZWRpdW07XHJcbiAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlSGlnaC5sZW5ndGggPSBsb2FkSW5kZXhIaWdoO1xyXG4gICAgICAgICAgICAgICAgICAgIHF1ZXVlVGlsZUxvYWQocHJpbWl0aXZlLCBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVNZWRpdW0sIHRpbGUsIGZyYW1lU3RhdGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHRyYXZlcnNhbERldGFpbHMubm90WWV0UmVuZGVyYWJsZUNvdW50ID0gdGlsZS5yZW5kZXJhYmxlID8gMCA6IDE7XHJcbiAgICAgICAgICAgICAgICAgICAgcXVldWVkRm9yTG9hZCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdHJhdmVyc2FsRGV0YWlscy5hbGxBcmVSZW5kZXJhYmxlID0gdGlsZS5yZW5kZXJhYmxlO1xyXG4gICAgICAgICAgICAgICAgdHJhdmVyc2FsRGV0YWlscy5hbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUgPSB3YXNSZW5kZXJlZExhc3RGcmFtZTtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoIXdhc1JlbmRlcmVkTGFzdEZyYW1lKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGlsZSBpcyBuZXdseS1yZW5kZXJlZCB0aGlzIGZyYW1lLCBzbyB1cGRhdGUgaXRzIGhlaWdodHMuXHJcbiAgICAgICAgICAgICAgICAgICAgcHJpbWl0aXZlLl90aWxlVG9VcGRhdGVIZWlnaHRzLnB1c2godGlsZSk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgKytkZWJ1Zy50aWxlc1dhaXRpbmdGb3JDaGlsZHJlbjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYgKHByaW1pdGl2ZS5wcmVsb2FkQW5jZXN0b3JzICYmICFxdWV1ZWRGb3JMb2FkKSB7XHJcbiAgICAgICAgICAgICAgICBxdWV1ZVRpbGVMb2FkKHByaW1pdGl2ZSwgcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlTG93LCB0aWxlLCBmcmFtZVN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuO1xyXG4gICAgfVxyXG5cclxuICAgIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHRGcmFtZSA9IGZyYW1lU3RhdGUuZnJhbWVOdW1iZXI7XHJcbiAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ID0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRDtcclxuXHJcbiAgICAvLyBXZSdkIGxpa2UgdG8gcmVmaW5lIGJ1dCBjYW4ndCBiZWNhdXNlIHdlIGhhdmUgbm8gYXZhaWxhYmlsaXR5IGRhdGEgZm9yIHRoaXMgdGlsZSdzIGNoaWxkcmVuLFxyXG4gICAgLy8gc28gd2UgaGF2ZSBubyBpZGVhIGlmIHJlZmluaW5pbmcgd291bGQgaW52b2x2ZSBhIGxvYWQgb3IgYW4gdXBzYW1wbGUuIFdlJ2xsIGhhdmUgdG8gZmluaXNoXHJcbiAgICAvLyBsb2FkaW5nIHRoaXMgdGlsZSBmaXJzdCBpbiBvcmRlciB0byBmaW5kIHRoYXQgb3V0LCBzbyBsb2FkIHRoaXMgcmVmaW5lbWVudCBibG9ja2VyIHdpdGhcclxuICAgIC8vIGhpZ2ggcHJpb3JpdHkuXHJcbiAgICBhZGRUaWxlVG9SZW5kZXJMaXN0KHByaW1pdGl2ZSwgdGlsZSk7XHJcbiAgICBxdWV1ZVRpbGVMb2FkKHByaW1pdGl2ZSwgcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlSGlnaCwgdGlsZSwgZnJhbWVTdGF0ZSk7XHJcblxyXG4gICAgdHJhdmVyc2FsRGV0YWlscy5hbGxBcmVSZW5kZXJhYmxlID0gdGlsZS5yZW5kZXJhYmxlO1xyXG4gICAgdHJhdmVyc2FsRGV0YWlscy5hbnlXZXJlUmVuZGVyZWRMYXN0RnJhbWUgPSBsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQgPT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuUkVOREVSRUQ7XHJcbiAgICB0cmF2ZXJzYWxEZXRhaWxzLm5vdFlldFJlbmRlcmFibGVDb3VudCA9IHRpbGUucmVuZGVyYWJsZSA/IDAgOiAxO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2aXNpdFZpc2libGVDaGlsZHJlbk5lYXJUb0ZhcihwcmltaXRpdmUsIHNvdXRod2VzdCwgc291dGhlYXN0LCBub3J0aHdlc3QsIG5vcnRoZWFzdCwgZnJhbWVTdGF0ZSwgYW5jZXN0b3JNZWV0c1NzZSwgdHJhdmVyc2FsRGV0YWlscykge1xyXG4gICAgdmFyIGNhbWVyYVBvc2l0aW9uID0gZnJhbWVTdGF0ZS5jYW1lcmEucG9zaXRpb25DYXJ0b2dyYXBoaWM7XHJcbiAgICB2YXIgdGlsZVByb3ZpZGVyID0gcHJpbWl0aXZlLl90aWxlUHJvdmlkZXI7XHJcbiAgICB2YXIgb2NjbHVkZXJzID0gcHJpbWl0aXZlLl9vY2NsdWRlcnM7XHJcblxyXG4gICAgdmFyIHF1YWREZXRhaWxzID0gdHJhdmVyc2FsUXVhZHNCeUxldmVsW3NvdXRod2VzdC5sZXZlbF07XHJcbiAgICB2YXIgc291dGh3ZXN0RGV0YWlscyA9IHF1YWREZXRhaWxzLnNvdXRod2VzdDtcclxuICAgIHZhciBzb3V0aGVhc3REZXRhaWxzID0gcXVhZERldGFpbHMuc291dGhlYXN0O1xyXG4gICAgdmFyIG5vcnRod2VzdERldGFpbHMgPSBxdWFkRGV0YWlscy5ub3J0aHdlc3Q7XHJcbiAgICB2YXIgbm9ydGhlYXN0RGV0YWlscyA9IHF1YWREZXRhaWxzLm5vcnRoZWFzdDtcclxuXHJcbiAgICBpZiAoY2FtZXJhUG9zaXRpb24ubG9uZ2l0dWRlIDwgc291dGh3ZXN0LnJlY3RhbmdsZS5lYXN0KSB7XHJcbiAgICAgICAgaWYgKGNhbWVyYVBvc2l0aW9uLmxhdGl0dWRlIDwgc291dGh3ZXN0LnJlY3RhbmdsZS5ub3J0aCkge1xyXG4gICAgICAgICAgICAvLyBDYW1lcmEgaW4gc291dGh3ZXN0IHF1YWRyYW50XHJcbiAgICAgICAgICAgIHZpc2l0SWZWaXNpYmxlKHByaW1pdGl2ZSwgc291dGh3ZXN0LCB0aWxlUHJvdmlkZXIsIGZyYW1lU3RhdGUsIG9jY2x1ZGVycywgYW5jZXN0b3JNZWV0c1NzZSwgc291dGh3ZXN0RGV0YWlscyk7XHJcbiAgICAgICAgICAgIHZpc2l0SWZWaXNpYmxlKHByaW1pdGl2ZSwgc291dGhlYXN0LCB0aWxlUHJvdmlkZXIsIGZyYW1lU3RhdGUsIG9jY2x1ZGVycywgYW5jZXN0b3JNZWV0c1NzZSwgc291dGhlYXN0RGV0YWlscyk7XHJcbiAgICAgICAgICAgIHZpc2l0SWZWaXNpYmxlKHByaW1pdGl2ZSwgbm9ydGh3ZXN0LCB0aWxlUHJvdmlkZXIsIGZyYW1lU3RhdGUsIG9jY2x1ZGVycywgYW5jZXN0b3JNZWV0c1NzZSwgbm9ydGh3ZXN0RGV0YWlscyk7XHJcbiAgICAgICAgICAgIHZpc2l0SWZWaXNpYmxlKHByaW1pdGl2ZSwgbm9ydGhlYXN0LCB0aWxlUHJvdmlkZXIsIGZyYW1lU3RhdGUsIG9jY2x1ZGVycywgYW5jZXN0b3JNZWV0c1NzZSwgbm9ydGhlYXN0RGV0YWlscyk7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgLy8gQ2FtZXJhIGluIG5vcnRod2VzdCBxdWFkcmFudFxyXG4gICAgICAgICAgICB2aXNpdElmVmlzaWJsZShwcmltaXRpdmUsIG5vcnRod2VzdCwgdGlsZVByb3ZpZGVyLCBmcmFtZVN0YXRlLCBvY2NsdWRlcnMsIGFuY2VzdG9yTWVldHNTc2UsIG5vcnRod2VzdERldGFpbHMpO1xyXG4gICAgICAgICAgICB2aXNpdElmVmlzaWJsZShwcmltaXRpdmUsIHNvdXRod2VzdCwgdGlsZVByb3ZpZGVyLCBmcmFtZVN0YXRlLCBvY2NsdWRlcnMsIGFuY2VzdG9yTWVldHNTc2UsIHNvdXRod2VzdERldGFpbHMpO1xyXG4gICAgICAgICAgICB2aXNpdElmVmlzaWJsZShwcmltaXRpdmUsIG5vcnRoZWFzdCwgdGlsZVByb3ZpZGVyLCBmcmFtZVN0YXRlLCBvY2NsdWRlcnMsIGFuY2VzdG9yTWVldHNTc2UsIG5vcnRoZWFzdERldGFpbHMpO1xyXG4gICAgICAgICAgICB2aXNpdElmVmlzaWJsZShwcmltaXRpdmUsIHNvdXRoZWFzdCwgdGlsZVByb3ZpZGVyLCBmcmFtZVN0YXRlLCBvY2NsdWRlcnMsIGFuY2VzdG9yTWVldHNTc2UsIHNvdXRoZWFzdERldGFpbHMpO1xyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAoY2FtZXJhUG9zaXRpb24ubGF0aXR1ZGUgPCBzb3V0aHdlc3QucmVjdGFuZ2xlLm5vcnRoKSB7XHJcbiAgICAgICAgLy8gQ2FtZXJhIHNvdXRoZWFzdCBxdWFkcmFudFxyXG4gICAgICAgIHZpc2l0SWZWaXNpYmxlKHByaW1pdGl2ZSwgc291dGhlYXN0LCB0aWxlUHJvdmlkZXIsIGZyYW1lU3RhdGUsIG9jY2x1ZGVycywgYW5jZXN0b3JNZWV0c1NzZSwgc291dGhlYXN0RGV0YWlscyk7XHJcbiAgICAgICAgdmlzaXRJZlZpc2libGUocHJpbWl0aXZlLCBzb3V0aHdlc3QsIHRpbGVQcm92aWRlciwgZnJhbWVTdGF0ZSwgb2NjbHVkZXJzLCBhbmNlc3Rvck1lZXRzU3NlLCBzb3V0aHdlc3REZXRhaWxzKTtcclxuICAgICAgICB2aXNpdElmVmlzaWJsZShwcmltaXRpdmUsIG5vcnRoZWFzdCwgdGlsZVByb3ZpZGVyLCBmcmFtZVN0YXRlLCBvY2NsdWRlcnMsIGFuY2VzdG9yTWVldHNTc2UsIG5vcnRoZWFzdERldGFpbHMpO1xyXG4gICAgICAgIHZpc2l0SWZWaXNpYmxlKHByaW1pdGl2ZSwgbm9ydGh3ZXN0LCB0aWxlUHJvdmlkZXIsIGZyYW1lU3RhdGUsIG9jY2x1ZGVycywgYW5jZXN0b3JNZWV0c1NzZSwgbm9ydGh3ZXN0RGV0YWlscyk7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIC8vIENhbWVyYSBpbiBub3J0aGVhc3QgcXVhZHJhbnRcclxuICAgICAgICB2aXNpdElmVmlzaWJsZShwcmltaXRpdmUsIG5vcnRoZWFzdCwgdGlsZVByb3ZpZGVyLCBmcmFtZVN0YXRlLCBvY2NsdWRlcnMsIGFuY2VzdG9yTWVldHNTc2UsIG5vcnRoZWFzdERldGFpbHMpO1xyXG4gICAgICAgIHZpc2l0SWZWaXNpYmxlKHByaW1pdGl2ZSwgbm9ydGh3ZXN0LCB0aWxlUHJvdmlkZXIsIGZyYW1lU3RhdGUsIG9jY2x1ZGVycywgYW5jZXN0b3JNZWV0c1NzZSwgbm9ydGh3ZXN0RGV0YWlscyk7XHJcbiAgICAgICAgdmlzaXRJZlZpc2libGUocHJpbWl0aXZlLCBzb3V0aGVhc3QsIHRpbGVQcm92aWRlciwgZnJhbWVTdGF0ZSwgb2NjbHVkZXJzLCBhbmNlc3Rvck1lZXRzU3NlLCBzb3V0aGVhc3REZXRhaWxzKTtcclxuICAgICAgICB2aXNpdElmVmlzaWJsZShwcmltaXRpdmUsIHNvdXRod2VzdCwgdGlsZVByb3ZpZGVyLCBmcmFtZVN0YXRlLCBvY2NsdWRlcnMsIGFuY2VzdG9yTWVldHNTc2UsIHNvdXRod2VzdERldGFpbHMpO1xyXG4gICAgfVxyXG5cclxuICAgIHF1YWREZXRhaWxzLmNvbWJpbmUodHJhdmVyc2FsRGV0YWlscyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNvbnRhaW5zTmVlZGVkUG9zaXRpb24ocHJpbWl0aXZlLCB0aWxlKSB7XHJcbiAgICB2YXIgcmVjdGFuZ2xlID0gdGlsZS5yZWN0YW5nbGU7XHJcbiAgICByZXR1cm4gKGRlZmluZWQocHJpbWl0aXZlLl9jYW1lcmFQb3NpdGlvbkNhcnRvZ3JhcGhpYykgJiYgUmVjdGFuZ2xlLmNvbnRhaW5zKHJlY3RhbmdsZSwgcHJpbWl0aXZlLl9jYW1lcmFQb3NpdGlvbkNhcnRvZ3JhcGhpYykpIHx8XHJcbiAgICAgICAgKGRlZmluZWQocHJpbWl0aXZlLl9jYW1lcmFSZWZlcmVuY2VGcmFtZU9yaWdpbkNhcnRvZ3JhcGhpYykgJiYgUmVjdGFuZ2xlLmNvbnRhaW5zKHJlY3RhbmdsZSwgcHJpbWl0aXZlLl9jYW1lcmFSZWZlcmVuY2VGcmFtZU9yaWdpbkNhcnRvZ3JhcGhpYykpO1xyXG59XHJcblxyXG5mdW5jdGlvbiB2aXNpdElmVmlzaWJsZShwcmltaXRpdmUsIHRpbGUsIHRpbGVQcm92aWRlciwgZnJhbWVTdGF0ZSwgb2NjbHVkZXJzLCBhbmNlc3Rvck1lZXRzU3NlLCB0cmF2ZXJzYWxEZXRhaWxzKSB7XHJcbiAgICBpZiAodGlsZVByb3ZpZGVyLmNvbXB1dGVUaWxlVmlzaWJpbGl0eSh0aWxlLCBmcmFtZVN0YXRlLCBvY2NsdWRlcnMpICE9PSBWaXNpYmlsaXR5Lk5PTkUpIHtcclxuICAgICAgICByZXR1cm4gdmlzaXRUaWxlKHByaW1pdGl2ZSwgZnJhbWVTdGF0ZSwgdGlsZSwgYW5jZXN0b3JNZWV0c1NzZSwgdHJhdmVyc2FsRGV0YWlscyk7XHJcbiAgICB9XHJcblxyXG4gICAgKytwcmltaXRpdmUuX2RlYnVnLnRpbGVzQ3VsbGVkO1xyXG4gICAgcHJpbWl0aXZlLl90aWxlUmVwbGFjZW1lbnRRdWV1ZS5tYXJrVGlsZVJlbmRlcmVkKHRpbGUpO1xyXG5cclxuICAgIHRyYXZlcnNhbERldGFpbHMuYWxsQXJlUmVuZGVyYWJsZSA9IHRydWU7XHJcbiAgICB0cmF2ZXJzYWxEZXRhaWxzLmFueVdlcmVSZW5kZXJlZExhc3RGcmFtZSA9IGZhbHNlO1xyXG4gICAgdHJhdmVyc2FsRGV0YWlscy5ub3RZZXRSZW5kZXJhYmxlQ291bnQgPSAwO1xyXG5cclxuICAgIGlmIChjb250YWluc05lZWRlZFBvc2l0aW9uKHByaW1pdGl2ZSwgdGlsZSkpIHtcclxuICAgICAgICAvLyBMb2FkIHRoZSB0aWxlKHMpIHRoYXQgY29udGFpbnMgdGhlIGNhbWVyYSdzIHBvc2l0aW9uIGFuZFxyXG4gICAgICAgIC8vIHRoZSBvcmlnaW4gb2YgaXRzIHJlZmVyZW5jZSBmcmFtZSB3aXRoIG1lZGl1bSBwcmlvcml0eS5cclxuICAgICAgICAvLyBCdXQgd2Ugb25seSBuZWVkIHRvIGxvYWQgdW50aWwgdGhlIHRlcnJhaW4gaXMgYXZhaWxhYmxlLCBubyBuZWVkIHRvIGxvYWQgaW1hZ2VyeS5cclxuICAgICAgICBpZiAoIWRlZmluZWQodGlsZS5kYXRhKSB8fCAhZGVmaW5lZCh0aWxlLmRhdGEudmVydGV4QXJyYXkpKSB7XHJcbiAgICAgICAgICAgIHF1ZXVlVGlsZUxvYWQocHJpbWl0aXZlLCBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVNZWRpdW0sIHRpbGUsIGZyYW1lU3RhdGUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgdmFyIGxhc3RGcmFtZSA9IHByaW1pdGl2ZS5fbGFzdFNlbGVjdGlvbkZyYW1lTnVtYmVyO1xyXG4gICAgICAgIHZhciBsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQgPSB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0RnJhbWUgPT09IGxhc3RGcmFtZSA/IHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHQgOiBUaWxlU2VsZWN0aW9uUmVzdWx0Lk5PTkU7XHJcbiAgICAgICAgaWYgKGxhc3RGcmFtZVNlbGVjdGlvblJlc3VsdCAhPT0gVGlsZVNlbGVjdGlvblJlc3VsdC5DVUxMRURfQlVUX05FRURFRCAmJiBsYXN0RnJhbWVTZWxlY3Rpb25SZXN1bHQgIT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuUkVOREVSRUQpIHtcclxuICAgICAgICAgICAgcHJpbWl0aXZlLl90aWxlVG9VcGRhdGVIZWlnaHRzLnB1c2godGlsZSk7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ID0gVGlsZVNlbGVjdGlvblJlc3VsdC5DVUxMRURfQlVUX05FRURFRDtcclxuICAgIH0gZWxzZSBpZiAocHJpbWl0aXZlLnByZWxvYWRTaWJsaW5ncyB8fCB0aWxlLmxldmVsID09PSAwKSB7XHJcbiAgICAgICAgLy8gTG9hZCBjdWxsZWQgbGV2ZWwgemVybyB0aWxlcyB3aXRoIGxvdyBwcmlvcml0eS5cclxuICAgICAgICAvLyBGb3IgYWxsIG90aGVyIGxldmVscywgb25seSBsb2FkIGN1bGxlZCB0aWxlcyBpZiBwcmVsb2FkU2libGluZ3MgaXMgZW5hYmxlZC5cclxuICAgICAgICBxdWV1ZVRpbGVMb2FkKHByaW1pdGl2ZSwgcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlTG93LCB0aWxlLCBmcmFtZVN0YXRlKTtcclxuICAgICAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0ID0gVGlsZVNlbGVjdGlvblJlc3VsdC5DVUxMRUQ7XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHRpbGUuX2xhc3RTZWxlY3Rpb25SZXN1bHQgPSBUaWxlU2VsZWN0aW9uUmVzdWx0LkNVTExFRDtcclxuICAgIH1cclxuXHJcbiAgICB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0RnJhbWUgPSBmcmFtZVN0YXRlLmZyYW1lTnVtYmVyO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzY3JlZW5TcGFjZUVycm9yKHByaW1pdGl2ZSwgZnJhbWVTdGF0ZSwgdGlsZSkge1xyXG4gICAgaWYgKFxyXG4gICAgICAgIGZyYW1lU3RhdGUubW9kZSA9PT0gU2NlbmVNb2RlLlNDRU5FMkQgfHxcclxuICAgICAgICBmcmFtZVN0YXRlLmNhbWVyYS5mcnVzdHVtIGluc3RhbmNlb2YgT3J0aG9ncmFwaGljRnJ1c3R1bSB8fFxyXG4gICAgICAgIGZyYW1lU3RhdGUuY2FtZXJhLmZydXN0dW0gaW5zdGFuY2VvZiBPcnRob2dyYXBoaWNPZmZDZW50ZXJGcnVzdHVtXHJcbiAgICApIHtcclxuICAgICAgICByZXR1cm4gc2NyZWVuU3BhY2VFcnJvcjJEKHByaW1pdGl2ZSwgZnJhbWVTdGF0ZSwgdGlsZSk7XHJcbiAgICB9XHJcblxyXG4gICAgdmFyIG1heEdlb21ldHJpY0Vycm9yID0gcHJpbWl0aXZlLl90aWxlUHJvdmlkZXIuZ2V0TGV2ZWxNYXhpbXVtR2VvbWV0cmljRXJyb3IoXHJcbiAgICAgICAgdGlsZS5sZXZlbFxyXG4gICAgKTtcclxuXHJcbiAgICB2YXIgZGlzdGFuY2UgPSB0aWxlLl9kaXN0YW5jZTtcclxuICAgIHZhciBoZWlnaHQgPSBmcmFtZVN0YXRlLmNvbnRleHQuZHJhd2luZ0J1ZmZlckhlaWdodDtcclxuICAgIHZhciBzc2VEZW5vbWluYXRvciA9IGZyYW1lU3RhdGUuY2FtZXJhLmZydXN0dW0uc3NlRGVub21pbmF0b3I7XHJcblxyXG4gICAgdmFyIGVycm9yID0gKG1heEdlb21ldHJpY0Vycm9yICogaGVpZ2h0KSAvIChkaXN0YW5jZSAqIHNzZURlbm9taW5hdG9yKTtcclxuXHJcbiAgICBpZiAoZnJhbWVTdGF0ZS5mb2cuZW5hYmxlZCkge1xyXG4gICAgICAgIGVycm9yIC09XHJcbiAgICAgICAgICAgIENlc2l1bU1hdGguZm9nKGRpc3RhbmNlLCBmcmFtZVN0YXRlLmZvZy5kZW5zaXR5KSAqIGZyYW1lU3RhdGUuZm9nLnNzZTtcclxuICAgIH1cclxuXHJcbiAgICBlcnJvciAvPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XHJcblxyXG4gICAgcmV0dXJuIGVycm9yO1xyXG59XHJcblxyXG5mdW5jdGlvbiBzY3JlZW5TcGFjZUVycm9yMkQocHJpbWl0aXZlLCBmcmFtZVN0YXRlLCB0aWxlKSB7XHJcbiAgICB2YXIgY2FtZXJhID0gZnJhbWVTdGF0ZS5jYW1lcmE7XHJcbiAgICB2YXIgZnJ1c3R1bSA9IGNhbWVyYS5mcnVzdHVtO1xyXG4gICAgaWYgKGRlZmluZWQoZnJ1c3R1bS5fb2ZmQ2VudGVyRnJ1c3R1bSkpIHtcclxuICAgICAgICBmcnVzdHVtID0gZnJ1c3R1bS5fb2ZmQ2VudGVyRnJ1c3R1bTtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgY29udGV4dCA9IGZyYW1lU3RhdGUuY29udGV4dDtcclxuICAgIHZhciB3aWR0aCA9IGNvbnRleHQuZHJhd2luZ0J1ZmZlcldpZHRoO1xyXG4gICAgdmFyIGhlaWdodCA9IGNvbnRleHQuZHJhd2luZ0J1ZmZlckhlaWdodDtcclxuXHJcbiAgICB2YXIgbWF4R2VvbWV0cmljRXJyb3IgPSBwcmltaXRpdmUuX3RpbGVQcm92aWRlci5nZXRMZXZlbE1heGltdW1HZW9tZXRyaWNFcnJvcih0aWxlLmxldmVsKTtcclxuICAgIHZhciBwaXhlbFNpemUgPSBNYXRoLm1heChmcnVzdHVtLnRvcCAtIGZydXN0dW0uYm90dG9tLCBmcnVzdHVtLnJpZ2h0IC0gZnJ1c3R1bS5sZWZ0KSAvIE1hdGgubWF4KHdpZHRoLCBoZWlnaHQpO1xyXG4gICAgdmFyIGVycm9yID0gbWF4R2VvbWV0cmljRXJyb3IgLyBwaXhlbFNpemU7XHJcblxyXG4gICAgaWYgKGZyYW1lU3RhdGUuZm9nLmVuYWJsZWQgJiYgZnJhbWVTdGF0ZS5tb2RlICE9PSBTY2VuZU1vZGUuU0NFTkUyRCkge1xyXG4gICAgICAgIGVycm9yIC09IENlc2l1bU1hdGguZm9nKHRpbGUuX2Rpc3RhbmNlLCBmcmFtZVN0YXRlLmZvZy5kZW5zaXR5KSAqIGZyYW1lU3RhdGUuZm9nLnNzZTtcclxuICAgIH1cclxuXHJcbiAgICBlcnJvciAvPSBmcmFtZVN0YXRlLnBpeGVsUmF0aW87XHJcblxyXG4gICAgcmV0dXJuIGVycm9yO1xyXG59XHJcblxyXG5mdW5jdGlvbiBhZGRUaWxlVG9SZW5kZXJMaXN0KHByaW1pdGl2ZSwgdGlsZSkge1xyXG4gICAgcHJpbWl0aXZlLl90aWxlc1RvUmVuZGVyLnB1c2godGlsZSk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHByb2Nlc3NUaWxlTG9hZFF1ZXVlKHByaW1pdGl2ZSwgZnJhbWVTdGF0ZSkge1xyXG4gICAgdmFyIHRpbGVMb2FkUXVldWVIaWdoID0gcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlSGlnaDtcclxuICAgIHZhciB0aWxlTG9hZFF1ZXVlTWVkaXVtID0gcHJpbWl0aXZlLl90aWxlTG9hZFF1ZXVlTWVkaXVtO1xyXG4gICAgdmFyIHRpbGVMb2FkUXVldWVMb3cgPSBwcmltaXRpdmUuX3RpbGVMb2FkUXVldWVMb3c7XHJcblxyXG4gICAgaWYgKHRpbGVMb2FkUXVldWVIaWdoLmxlbmd0aCA9PT0gMCAmJiB0aWxlTG9hZFF1ZXVlTWVkaXVtLmxlbmd0aCA9PT0gMCAmJiB0aWxlTG9hZFF1ZXVlTG93Lmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICAvLyBSZW1vdmUgYW55IHRpbGVzIHRoYXQgd2VyZSBub3QgdXNlZCB0aGlzIGZyYW1lIGJleW9uZCB0aGUgbnVtYmVyXHJcbiAgICAvLyB3ZSdyZSBhbGxvd2VkIHRvIGtlZXAuXHJcbiAgICBwcmltaXRpdmUuX3RpbGVSZXBsYWNlbWVudFF1ZXVlLnRyaW1UaWxlcyhwcmltaXRpdmUudGlsZUNhY2hlU2l6ZSk7XHJcblxyXG4gICAgdmFyIGVuZFRpbWUgPSBnZXRUaW1lc3RhbXAoKSArIHByaW1pdGl2ZS5fbG9hZFF1ZXVlVGltZVNsaWNlO1xyXG4gICAgdmFyIHRpbGVQcm92aWRlciA9IHByaW1pdGl2ZS5fdGlsZVByb3ZpZGVyO1xyXG5cclxuICAgIHZhciBkaWRTb21lTG9hZGluZyA9IHByb2Nlc3NTaW5nbGVQcmlvcml0eUxvYWRRdWV1ZShwcmltaXRpdmUsIGZyYW1lU3RhdGUsIHRpbGVQcm92aWRlciwgZW5kVGltZSwgdGlsZUxvYWRRdWV1ZUhpZ2gsIGZhbHNlKTtcclxuICAgIGRpZFNvbWVMb2FkaW5nID0gcHJvY2Vzc1NpbmdsZVByaW9yaXR5TG9hZFF1ZXVlKHByaW1pdGl2ZSwgZnJhbWVTdGF0ZSwgdGlsZVByb3ZpZGVyLCBlbmRUaW1lLCB0aWxlTG9hZFF1ZXVlTWVkaXVtLCBkaWRTb21lTG9hZGluZyk7XHJcbiAgICBwcm9jZXNzU2luZ2xlUHJpb3JpdHlMb2FkUXVldWUocHJpbWl0aXZlLCBmcmFtZVN0YXRlLCB0aWxlUHJvdmlkZXIsIGVuZFRpbWUsIHRpbGVMb2FkUXVldWVMb3csIGRpZFNvbWVMb2FkaW5nKTtcclxufVxyXG5cclxuZnVuY3Rpb24gc29ydEJ5TG9hZFByaW9yaXR5KGEsIGIpIHtcclxuICAgIHJldHVybiBhLl9sb2FkUHJpb3JpdHkgLSBiLl9sb2FkUHJpb3JpdHk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIHByb2Nlc3NTaW5nbGVQcmlvcml0eUxvYWRRdWV1ZShwcmltaXRpdmUsIGZyYW1lU3RhdGUsIHRpbGVQcm92aWRlciwgZW5kVGltZSwgbG9hZFF1ZXVlLCBkaWRTb21lTG9hZGluZykge1xyXG4gICAgaWYgKHRpbGVQcm92aWRlci5jb21wdXRlVGlsZUxvYWRQcmlvcml0eSAhPT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgbG9hZFF1ZXVlLnNvcnQoc29ydEJ5TG9hZFByaW9yaXR5KTtcclxuICAgIH1cclxuXHJcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gbG9hZFF1ZXVlLmxlbmd0aDsgaSA8IGxlbiAmJiAoZ2V0VGltZXN0YW1wKCkgPCBlbmRUaW1lIHx8ICFkaWRTb21lTG9hZGluZyk7ICsraSkge1xyXG4gICAgICAgIHZhciB0aWxlID0gbG9hZFF1ZXVlW2ldO1xyXG4gICAgICAgIHByaW1pdGl2ZS5fdGlsZVJlcGxhY2VtZW50UXVldWUubWFya1RpbGVSZW5kZXJlZCh0aWxlKTtcclxuICAgICAgICB0aWxlUHJvdmlkZXIubG9hZFRpbGUoZnJhbWVTdGF0ZSwgdGlsZSk7XHJcbiAgICAgICAgZGlkU29tZUxvYWRpbmcgPSB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBkaWRTb21lTG9hZGluZztcclxufVxyXG5cclxudmFyIHNjcmF0Y2hSYXkgPSBuZXcgUmF5KCk7XHJcbnZhciBzY3JhdGNoQ2FydG9ncmFwaGljID0gbmV3IENhcnRvZ3JhcGhpYygpO1xyXG52YXIgc2NyYXRjaFBvc2l0aW9uID0gbmV3IENhcnRlc2lhbjMoKTtcclxudmFyIHNjcmF0Y2hBcnJheSA9IFtdO1xyXG5cclxuZnVuY3Rpb24gdXBkYXRlSGVpZ2h0cyhwcmltaXRpdmUsIGZyYW1lU3RhdGUpIHtcclxuICAgIGlmICghcHJpbWl0aXZlLnRpbGVQcm92aWRlci5yZWFkeSkge1xyXG4gICAgICAgIHJldHVybjtcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdHJ5TmV4dEZyYW1lID0gc2NyYXRjaEFycmF5O1xyXG4gICAgdHJ5TmV4dEZyYW1lLmxlbmd0aCA9IDA7XHJcbiAgICB2YXIgdGlsZXNUb1VwZGF0ZUhlaWdodHMgPSBwcmltaXRpdmUuX3RpbGVUb1VwZGF0ZUhlaWdodHM7XHJcbiAgICB2YXIgdGVycmFpblByb3ZpZGVyID0gcHJpbWl0aXZlLl90aWxlUHJvdmlkZXIudGVycmFpblByb3ZpZGVyO1xyXG5cclxuICAgIHZhciBzdGFydFRpbWUgPSBnZXRUaW1lc3RhbXAoKTtcclxuICAgIHZhciB0aW1lU2xpY2UgPSBwcmltaXRpdmUuX3VwZGF0ZUhlaWdodHNUaW1lU2xpY2U7XHJcbiAgICB2YXIgZW5kVGltZSA9IHN0YXJ0VGltZSArIHRpbWVTbGljZTtcclxuXHJcbiAgICB2YXIgbW9kZSA9IGZyYW1lU3RhdGUubW9kZTtcclxuICAgIHZhciBwcm9qZWN0aW9uID0gZnJhbWVTdGF0ZS5tYXBQcm9qZWN0aW9uO1xyXG4gICAgdmFyIGVsbGlwc29pZCA9IHByaW1pdGl2ZS50aWxlUHJvdmlkZXIudGlsaW5nU2NoZW1lLmVsbGlwc29pZDtcclxuICAgIHZhciBpO1xyXG5cclxuICAgIHdoaWxlICh0aWxlc1RvVXBkYXRlSGVpZ2h0cy5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgdmFyIHRpbGUgPSB0aWxlc1RvVXBkYXRlSGVpZ2h0c1swXTtcclxuICAgICAgICBpZiAoIWRlZmluZWQodGlsZS5kYXRhKSB8fCAhZGVmaW5lZCh0aWxlLmRhdGEubWVzaCkpIHtcclxuICAgICAgICAgICAgLy8gVGlsZSBpc24ndCBsb2FkZWQgZW5vdWdoIHlldCwgc28gdHJ5IGFnYWluIG5leHQgZnJhbWUgaWYgdGhpcyB0aWxlIGlzIHN0aWxsXHJcbiAgICAgICAgICAgIC8vIGJlaW5nIHJlbmRlcmVkLlxyXG4gICAgICAgICAgICB2YXIgc2VsZWN0aW9uUmVzdWx0ID0gdGlsZS5fbGFzdFNlbGVjdGlvblJlc3VsdEZyYW1lID09PSBwcmltaXRpdmUuX2xhc3RTZWxlY3Rpb25GcmFtZU51bWJlclxyXG4gICAgICAgICAgICAgICAgPyB0aWxlLl9sYXN0U2VsZWN0aW9uUmVzdWx0XHJcbiAgICAgICAgICAgICAgICA6IFRpbGVTZWxlY3Rpb25SZXN1bHQuTk9ORTtcclxuICAgICAgICAgICAgaWYgKHNlbGVjdGlvblJlc3VsdCA9PT0gVGlsZVNlbGVjdGlvblJlc3VsdC5SRU5ERVJFRCB8fCBzZWxlY3Rpb25SZXN1bHQgPT09IFRpbGVTZWxlY3Rpb25SZXN1bHQuQ1VMTEVEX0JVVF9ORUVERUQpIHtcclxuICAgICAgICAgICAgICAgIHRyeU5leHRGcmFtZS5wdXNoKHRpbGUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRpbGVzVG9VcGRhdGVIZWlnaHRzLnNoaWZ0KCk7XHJcbiAgICAgICAgICAgIHByaW1pdGl2ZS5fbGFzdFRpbGVJbmRleCA9IDA7XHJcbiAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICB2YXIgY3VzdG9tRGF0YSA9IHRpbGUuY3VzdG9tRGF0YTtcclxuICAgICAgICB2YXIgY3VzdG9tRGF0YUxlbmd0aCA9IGN1c3RvbURhdGEubGVuZ3RoO1xyXG5cclxuICAgICAgICB2YXIgdGltZVNsaWNlTWF4ID0gZmFsc2U7XHJcbiAgICAgICAgZm9yIChpID0gcHJpbWl0aXZlLl9sYXN0VGlsZUluZGV4OyBpIDwgY3VzdG9tRGF0YUxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgICAgIHZhciBkYXRhID0gY3VzdG9tRGF0YVtpXTtcclxuXHJcbiAgICAgICAgICAgIGlmICh0aWxlLmxldmVsID4gZGF0YS5sZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFkZWZpbmVkKGRhdGEucG9zaXRpb25PbkVsbGlwc29pZFN1cmZhY2UpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY2FydGVzaWFuIGhhcyB0byBiZSBvbiB0aGUgZWxsaXBzb2lkIHN1cmZhY2UgZm9yIGBlbGxpcHNvaWQuZ2VvZGV0aWNTdXJmYWNlTm9ybWFsYFxyXG4gICAgICAgICAgICAgICAgICAgIGRhdGEucG9zaXRpb25PbkVsbGlwc29pZFN1cmZhY2UgPSBDYXJ0ZXNpYW4zLmZyb21SYWRpYW5zKGRhdGEucG9zaXRpb25DYXJ0b2dyYXBoaWMubG9uZ2l0dWRlLCBkYXRhLnBvc2l0aW9uQ2FydG9ncmFwaGljLmxhdGl0dWRlLCAwLjAsIGVsbGlwc29pZCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKG1vZGUgPT09IFNjZW5lTW9kZS5TQ0VORTNEKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHN1cmZhY2VOb3JtYWwgPSBlbGxpcHNvaWQuZ2VvZGV0aWNTdXJmYWNlTm9ybWFsKGRhdGEucG9zaXRpb25PbkVsbGlwc29pZFN1cmZhY2UsIHNjcmF0Y2hSYXkuZGlyZWN0aW9uKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gY29tcHV0ZSBvcmlnaW4gcG9pbnRcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVHJ5IHRvIGZpbmQgdGhlIGludGVyc2VjdGlvbiBwb2ludCBiZXR3ZWVuIHRoZSBzdXJmYWNlIG5vcm1hbCBhbmQgei1heGlzLlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIG1pbmltdW0gaGVpZ2h0ICgtMTE1MDAuMCkgZm9yIHRoZSB0ZXJyYWluIHNldCwgbmVlZCB0byBnZXQgdGhpcyBpbmZvcm1hdGlvbiBmcm9tIHRoZSB0ZXJyYWluIHByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIHJheU9yaWdpbiA9IGVsbGlwc29pZC5nZXRTdXJmYWNlTm9ybWFsSW50ZXJzZWN0aW9uV2l0aFpBeGlzKGRhdGEucG9zaXRpb25PbkVsbGlwc29pZFN1cmZhY2UsIDExNTAwLjAsIHNjcmF0Y2hSYXkub3JpZ2luKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gVGhlb3JldGljYWxseSwgbm90IHdpdGggRWFydGggZGF0dW1zLCB0aGUgaW50ZXJzZWN0aW9uIHBvaW50IGNhbiBiZSBvdXRzaWRlIHRoZSBlbGxpcHNvaWRcclxuICAgICAgICAgICAgICAgICAgICBpZiAoIWRlZmluZWQocmF5T3JpZ2luKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAvLyBpbnRlcnNlY3Rpb24gcG9pbnQgaXMgb3V0c2lkZSB0aGUgZWxsaXBzb2lkLCB0cnkgb3RoZXIgdmFsdWVcclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbWluaW11bSBoZWlnaHQgKC0xMTUwMC4wKSBmb3IgdGhlIHRlcnJhaW4gc2V0LCBuZWVkIHRvIGdldCB0aGlzIGluZm9ybWF0aW9uIGZyb20gdGhlIHRlcnJhaW4gcHJvdmlkZXJcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIG1pbmltdW1IZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChkZWZpbmVkKHRpbGUuZGF0YS50aWxlQm91bmRpbmdSZWdpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBtaW5pbXVtSGVpZ2h0ID0gdGlsZS5kYXRhLnRpbGVCb3VuZGluZ1JlZ2lvbi5taW5pbXVtSGVpZ2h0O1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBtYWduaXR1ZGUgPSBNYXRoLm1pbihkZWZhdWx0VmFsdWUobWluaW11bUhlaWdodCwgMC4wKSwgLTExNTAwLjApO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgLy8gbXVsdGlwbHkgYnkgdGhlICpwb3NpdGl2ZSogdmFsdWUgb2YgdGhlIG1hZ25pdHVkZVxyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgdmVjdG9yVG9NaW5pbXVtUG9pbnQgPSBDYXJ0ZXNpYW4zLm11bHRpcGx5QnlTY2FsYXIoc3VyZmFjZU5vcm1hbCwgTWF0aC5hYnMobWFnbml0dWRlKSArIDEsIHNjcmF0Y2hQb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIENhcnRlc2lhbjMuc3VidHJhY3QoZGF0YS5wb3NpdGlvbk9uRWxsaXBzb2lkU3VyZmFjZSwgdmVjdG9yVG9NaW5pbXVtUG9pbnQsIHNjcmF0Y2hSYXkub3JpZ2luKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIENhcnRvZ3JhcGhpYy5jbG9uZShkYXRhLnBvc2l0aW9uQ2FydG9ncmFwaGljLCBzY3JhdGNoQ2FydG9ncmFwaGljKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8gbWluaW11bSBoZWlnaHQgZm9yIHRoZSB0ZXJyYWluIHNldCwgbmVlZCB0byBnZXQgdGhpcyBpbmZvcm1hdGlvbiBmcm9tIHRoZSB0ZXJyYWluIHByb3ZpZGVyXHJcbiAgICAgICAgICAgICAgICAgICAgc2NyYXRjaENhcnRvZ3JhcGhpYy5oZWlnaHQgPSAtMTE1MDAuMDtcclxuICAgICAgICAgICAgICAgICAgICBwcm9qZWN0aW9uLnByb2plY3Qoc2NyYXRjaENhcnRvZ3JhcGhpYywgc2NyYXRjaFBvc2l0aW9uKTtcclxuICAgICAgICAgICAgICAgICAgICBDYXJ0ZXNpYW4zLmZyb21FbGVtZW50cyhzY3JhdGNoUG9zaXRpb24ueiwgc2NyYXRjaFBvc2l0aW9uLngsIHNjcmF0Y2hQb3NpdGlvbi55LCBzY3JhdGNoUG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgIENhcnRlc2lhbjMuY2xvbmUoc2NyYXRjaFBvc2l0aW9uLCBzY3JhdGNoUmF5Lm9yaWdpbik7XHJcbiAgICAgICAgICAgICAgICAgICAgQ2FydGVzaWFuMy5jbG9uZShDYXJ0ZXNpYW4zLlVOSVRfWCwgc2NyYXRjaFJheS5kaXJlY3Rpb24pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIHZhciBwb3NpdGlvbiA9IHRpbGUuZGF0YS5waWNrKHNjcmF0Y2hSYXksIG1vZGUsIHByb2plY3Rpb24sIGZhbHNlLCBzY3JhdGNoUG9zaXRpb24pO1xyXG4gICAgICAgICAgICAgICAgaWYgKGRlZmluZWQocG9zaXRpb24pKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5jYWxsYmFjayhwb3NpdGlvbik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5sZXZlbCA9IHRpbGUubGV2ZWw7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAodGlsZS5sZXZlbCA9PT0gZGF0YS5sZXZlbCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGNoaWxkcmVuID0gdGlsZS5jaGlsZHJlbjtcclxuICAgICAgICAgICAgICAgIHZhciBjaGlsZHJlbkxlbmd0aCA9IGNoaWxkcmVuLmxlbmd0aDtcclxuXHJcbiAgICAgICAgICAgICAgICB2YXIgY2hpbGQ7XHJcbiAgICAgICAgICAgICAgICBmb3IgKHZhciBqID0gMDsgaiA8IGNoaWxkcmVuTGVuZ3RoOyArK2opIHtcclxuICAgICAgICAgICAgICAgICAgICBjaGlsZCA9IGNoaWxkcmVuW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChSZWN0YW5nbGUuY29udGFpbnMoY2hpbGQucmVjdGFuZ2xlLCBkYXRhLnBvc2l0aW9uQ2FydG9ncmFwaGljKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdmFyIHRpbGVEYXRhQXZhaWxhYmxlID0gdGVycmFpblByb3ZpZGVyLmdldFRpbGVEYXRhQXZhaWxhYmxlKGNoaWxkLngsIGNoaWxkLnksIGNoaWxkLmxldmVsKTtcclxuICAgICAgICAgICAgICAgIHZhciBwYXJlbnRUaWxlID0gdGlsZS5wYXJlbnQ7XHJcbiAgICAgICAgICAgICAgICBpZiAoKGRlZmluZWQodGlsZURhdGFBdmFpbGFibGUpICYmICF0aWxlRGF0YUF2YWlsYWJsZSkgfHxcclxuICAgICAgICAgICAgICAgICAgICAoZGVmaW5lZChwYXJlbnRUaWxlKSAmJiBkZWZpbmVkKHBhcmVudFRpbGUuZGF0YSkgJiYgZGVmaW5lZChwYXJlbnRUaWxlLmRhdGEudGVycmFpbkRhdGEpICYmXHJcbiAgICAgICAgICAgICAgICAgICAgICAgICFwYXJlbnRUaWxlLmRhdGEudGVycmFpbkRhdGEuaXNDaGlsZEF2YWlsYWJsZShwYXJlbnRUaWxlLngsIHBhcmVudFRpbGUueSwgY2hpbGQueCwgY2hpbGQueSkpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZGF0YS5yZW1vdmVGdW5jKCk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGlmIChnZXRUaW1lc3RhbXAoKSA+PSBlbmRUaW1lKSB7XHJcbiAgICAgICAgICAgICAgICB0aW1lU2xpY2VNYXggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmICh0aW1lU2xpY2VNYXgpIHtcclxuICAgICAgICAgICAgcHJpbWl0aXZlLl9sYXN0VGlsZUluZGV4ID0gaTtcclxuICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgcHJpbWl0aXZlLl9sYXN0VGlsZUluZGV4ID0gMDtcclxuICAgICAgICAgICAgdGlsZXNUb1VwZGF0ZUhlaWdodHMuc2hpZnQoKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBmb3IgKGkgPSAwOyBpIDwgdHJ5TmV4dEZyYW1lLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgdGlsZXNUb1VwZGF0ZUhlaWdodHMucHVzaCh0cnlOZXh0RnJhbWVbaV0pO1xyXG4gICAgfVxyXG59XHJcblxyXG5mdW5jdGlvbiBjcmVhdGVSZW5kZXJDb21tYW5kc0ZvclNlbGVjdGVkVGlsZXMocHJpbWl0aXZlLCBmcmFtZVN0YXRlKSB7XHJcbiAgICB2YXIgdGlsZVByb3ZpZGVyID0gcHJpbWl0aXZlLl90aWxlUHJvdmlkZXI7XHJcbiAgICB2YXIgdGlsZXNUb1JlbmRlciA9IHByaW1pdGl2ZS5fdGlsZXNUb1JlbmRlcjtcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gdGlsZXNUb1JlbmRlci5sZW5ndGg7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgIHZhciB0aWxlID0gdGlsZXNUb1JlbmRlcltpXTtcclxuICAgICAgICB0aWxlUHJvdmlkZXIuc2hvd1RpbGVUaGlzRnJhbWUodGlsZSwgZnJhbWVTdGF0ZSk7XHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5jbGFzcyBRdWFkdHJlZVByaW1pdGl2ZUV4dHtcclxuICAgIGNvbnN0cnVjdG9yKCkge1xyXG4gICAgICAgIFF1YWR0cmVlUHJpbWl0aXZlLnByb3RvdHlwZS5yZW5kZXIgPSBmdW5jdGlvbihmcmFtZVN0YXRlKSB7XHJcbiAgICAgICAgICAgIHZhciBwYXNzZXMgPSBmcmFtZVN0YXRlLnBhc3NlcztcclxuICAgICAgICAgICAgdmFyIHRpbGVQcm92aWRlciA9IHRoaXMuX3RpbGVQcm92aWRlcjtcclxuXHJcbiAgICAgICAgICAgIGlmIChwYXNzZXMucmVuZGVyKSB7XHJcbiAgICAgICAgICAgICAgICB0aWxlUHJvdmlkZXIuYmVnaW5VcGRhdGUoZnJhbWVTdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgc2VsZWN0VGlsZXNGb3JSZW5kZXJpbmcodGhpcywgZnJhbWVTdGF0ZSk7XHJcbiAgICAgICAgICAgICAgICBjcmVhdGVSZW5kZXJDb21tYW5kc0ZvclNlbGVjdGVkVGlsZXModGhpcywgZnJhbWVTdGF0ZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKirmlrDlop7lvIDlp4sqKioqKioqKioqKioqKi9cclxuICAgICAgICAgICAgICAgIHZhciBfaW1hZ2VyeUxheWVycyA9IHRpbGVQcm92aWRlci5faW1hZ2VyeUxheWVycztcclxuICAgICAgICAgICAgICAgIGZvcih2YXIgaSA9IDA7aTxfaW1hZ2VyeUxheWVycy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgX2ltYWdlcnlQcm92aWRlciA9IF9pbWFnZXJ5TGF5ZXJzLl9sYXllcnNbaV0uX2ltYWdlcnlQcm92aWRlcjtcclxuICAgICAgICAgICAgICAgICAgICBpZihfaW1hZ2VyeVByb3ZpZGVyLmRyYXcpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBfaW1hZ2VyeVByb3ZpZGVyLmRyYXcodGhpcy5fdGlsZXNUb1JlbmRlcik7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgLyoqKioqKioqKioqKirmlrDlop7nu5PmnZ8qKioqKioqKioqKioqKi9cclxuXHJcbiAgICAgICAgICAgICAgICB0aWxlUHJvdmlkZXIuZW5kVXBkYXRlKGZyYW1lU3RhdGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBpZiAocGFzc2VzLnBpY2sgJiYgdGhpcy5fdGlsZXNUb1JlbmRlci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICB0aWxlUHJvdmlkZXIudXBkYXRlRm9yUGljayhmcmFtZVN0YXRlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUXVhZHRyZWVQcmltaXRpdmVFeHQ7XHJcbm5ldyBRdWFkdHJlZVByaW1pdGl2ZUV4dCgpOyIsIid1c2Ugc3RyaWN0JztcclxuY29uc3QgQ3VzdG9tTWFwID0gbW9kdWxlLmV4cG9ydHMgPSB7fTtcclxuXHJcblxyXG4vL+aJqeWxlWNlc2l1beexu1xyXG5yZXF1aXJlKCcuL2V4dC9DYW1lcmFFeHQnKTtcclxucmVxdWlyZSgnLi9leHQvUXVhZHRyZWVQcmltaXRpdmVFeHQnKTtcclxuQ3VzdG9tTWFwLkxhYmVsQ29sbGVjdGlvbkV4dCA9IHJlcXVpcmUoJy4vZXh0L0xhYmVsQ29sbGVjdGlvbkV4dCcpO1xyXG5DdXN0b21NYXAuQmlsbGJvYXJkQ29sbGVjdGlvbiA9IHJlcXVpcmUoJy4vZXh0L0JpbGxib2FyZENvbGxlY3Rpb24nKTtcclxuQ3VzdG9tTWFwLkxhYmVsVGlsZVNlcnZpY2VJbWFnZXJ5UHJvdmlkZXIgPSByZXF1aXJlKCcuL2xheWVyL2xhYmVsL0xhYmVsVGlsZVNlcnZpY2VJbWFnZXJ5UHJvdmlkZXInKTtcclxuXHJcbi8vIEN1c3RvbU1hcC5MYWJlbFRpbGVTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyID0gcmVxdWlyZSgnLi9sYXllci9sYWJlbC9MYWJlbFRpbGVTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyJyk7XHJcbi8vIEN1c3RvbU1hcC5Nb2RlbFRpbGVTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyID0gcmVxdWlyZSgnLi9sYXllci9tb2RlbC9Nb2RlbFRpbGVTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVyJyk7XHJcbkN1c3RvbU1hcC5JbWFnZVRpbGVQcm92aWRlciA9IHJlcXVpcmUoJy4vbGF5ZXIvaW1hZ2UvSW1hZ2VUaWxlUHJvdmlkZXInKTtcclxuXHJcblxyXG5cclxuXHJcbiIsImNvbnN0IENvbG9yID0gQ2VzaXVtLkNvbG9yO1xyXG5jb25zdCBkZWZhdWx0VmFsdWUgPSBDZXNpdW0uZGVmYXVsdFZhbHVlO1xyXG5jb25zdCBkZWZpbmVkID0gQ2VzaXVtLmRlZmluZWQ7XHJcbmNvbnN0IEV2ZW50ID0gQ2VzaXVtLkV2ZW50O1xyXG5jb25zdCBHZW9ncmFwaGljVGlsaW5nU2NoZW1lID0gQ2VzaXVtLkdlb2dyYXBoaWNUaWxpbmdTY2hlbWU7XHJcbmNvbnN0IHdoZW4gPSBDZXNpdW0ud2hlbjtcclxuXHJcbi8qKlxyXG4gKiBAdHlwZWRlZiB7T2JqZWN0fSBUaWxlQ29vcmRpbmF0ZXNJbWFnZXJ5UHJvdmlkZXIuQ29uc3RydWN0b3JPcHRpb25zXHJcbiAqXHJcbiAqIEluaXRpYWxpemF0aW9uIG9wdGlvbnMgZm9yIHRoZSBUaWxlQ29vcmRpbmF0ZXNJbWFnZXJ5UHJvdmlkZXIgY29uc3RydWN0b3JcclxuICpcclxuICogQHByb3BlcnR5IHtUaWxpbmdTY2hlbWV9IFt0aWxpbmdTY2hlbWU9bmV3IEdlb2dyYXBoaWNUaWxpbmdTY2hlbWUoKV0gVGhlIHRpbGluZyBzY2hlbWUgZm9yIHdoaWNoIHRvIGRyYXcgdGlsZXMuXHJcbiAqIEBwcm9wZXJ0eSB7RWxsaXBzb2lkfSBbZWxsaXBzb2lkXSBUaGUgZWxsaXBzb2lkLiAgSWYgdGhlIHRpbGluZ1NjaGVtZSBpcyBzcGVjaWZpZWQsXHJcbiAqICAgICAgICAgICAgICAgICAgICB0aGlzIHBhcmFtZXRlciBpcyBpZ25vcmVkIGFuZCB0aGUgdGlsaW5nIHNjaGVtZSdzIGVsbGlwc29pZCBpcyB1c2VkIGluc3RlYWQuIElmIG5laXRoZXJcclxuICogICAgICAgICAgICAgICAgICAgIHBhcmFtZXRlciBpcyBzcGVjaWZpZWQsIHRoZSBXR1M4NCBlbGxpcHNvaWQgaXMgdXNlZC5cclxuICogQHByb3BlcnR5IHtDb2xvcn0gW2NvbG9yPUNvbG9yLllFTExPV10gVGhlIGNvbG9yIHRvIGRyYXcgdGhlIHRpbGUgYm94IGFuZCBsYWJlbC5cclxuICogQHByb3BlcnR5IHtOdW1iZXJ9IFt0aWxlV2lkdGg9MjU2XSBUaGUgd2lkdGggb2YgdGhlIHRpbGUgZm9yIGxldmVsLW9mLWRldGFpbCBzZWxlY3Rpb24gcHVycG9zZXMuXHJcbiAqIEBwcm9wZXJ0eSB7TnVtYmVyfSBbdGlsZUhlaWdodD0yNTZdIFRoZSBoZWlnaHQgb2YgdGhlIHRpbGUgZm9yIGxldmVsLW9mLWRldGFpbCBzZWxlY3Rpb24gcHVycG9zZXMuXHJcbiAqL1xyXG5cclxuLyoqXHJcbiAqIEFuIHtAbGluayBJbWFnZXJ5UHJvdmlkZXJ9IHRoYXQgZHJhd3MgYSBib3ggYXJvdW5kIGV2ZXJ5IHJlbmRlcmVkIHRpbGUgaW4gdGhlIHRpbGluZyBzY2hlbWUsIGFuZCBkcmF3c1xyXG4gKiBhIGxhYmVsIGluc2lkZSBpdCBpbmRpY2F0aW5nIHRoZSBYLCBZLCBMZXZlbCBjb29yZGluYXRlcyBvZiB0aGUgdGlsZS4gIFRoaXMgaXMgbW9zdGx5IHVzZWZ1bCBmb3JcclxuICogZGVidWdnaW5nIHRlcnJhaW4gYW5kIGltYWdlcnkgcmVuZGVyaW5nIHByb2JsZW1zLlxyXG4gKlxyXG4gKiBAYWxpYXMgVGlsZUNvb3JkaW5hdGVzSW1hZ2VyeVByb3ZpZGVyXHJcbiAqIEBjb25zdHJ1Y3RvclxyXG4gKlxyXG4gKiBAcGFyYW0ge1RpbGVDb29yZGluYXRlc0ltYWdlcnlQcm92aWRlci5Db25zdHJ1Y3Rvck9wdGlvbnN9IFtvcHRpb25zXSBPYmplY3QgZGVzY3JpYmluZyBpbml0aWFsaXphdGlvbiBvcHRpb25zXHJcbiAqL1xyXG5mdW5jdGlvbiBJbWFnZVRpbGVQcm92aWRlcihvcHRpb25zKSB7XHJcbiAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcclxuXHJcbiAgdGhpcy5fdGlsaW5nU2NoZW1lID0gZGVmaW5lZChvcHRpb25zLnRpbGluZ1NjaGVtZSlcclxuICAgID8gb3B0aW9ucy50aWxpbmdTY2hlbWVcclxuICAgIDogbmV3IEdlb2dyYXBoaWNUaWxpbmdTY2hlbWUoeyBlbGxpcHNvaWQ6IG9wdGlvbnMuZWxsaXBzb2lkIH0pO1xyXG4gIHRoaXMuX2NvbG9yID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMuY29sb3IsIENvbG9yLllFTExPVyk7XHJcbiAgdGhpcy5fZXJyb3JFdmVudCA9IG5ldyBFdmVudCgpO1xyXG4gIHRoaXMuX3RpbGVXaWR0aCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnRpbGVXaWR0aCwgMjU2KTtcclxuICB0aGlzLl90aWxlSGVpZ2h0ID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMudGlsZUhlaWdodCwgMjU2KTtcclxuICB0aGlzLl9yZWFkeVByb21pc2UgPSB3aGVuLnJlc29sdmUodHJ1ZSk7XHJcbiAgdGhpcy5vcHRpb25zID0gb3B0aW9ucztcclxuICBpZih0aGlzLm9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ3Nob3dMZXZlbHMnKSl7XHJcbiAgICB0aGlzLnNob3dMZXZlbHMgPSB0aGlzLm9wdGlvbnNbJ3Nob3dMZXZlbHMnXTtcclxuICAgIGZvcihsZXQgaSA9MDtpPHRoaXMuc2hvd0xldmVscy5sZW5ndGg7aSsrKXtcclxuICAgICAgdGhpcy5zaG93TGV2ZWxzW2ldID0gcGFyc2VJbnQodGhpcy5zaG93TGV2ZWxzW2ldKTtcclxuICAgIH1cclxuICB9ZWxzZXtcclxuICAgIHRoaXMuc2hvd0xldmVscyA9IFswLDEsIDIsIDMsIDQsIDUsIDYsIDcsIDgsIDksIDEwLCAxMSwgMTIsIDEzLCAxNCwgMTUsIDE2LCAxNywgMTgsIDE5LDIwLDIxLDIyLDIzLDI0LDI1LDI2XTtcclxuICB9XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBkZWZhdWx0IGFscGhhIGJsZW5kaW5nIHZhbHVlIG9mIHRoaXMgcHJvdmlkZXIsIHdpdGggMC4wIHJlcHJlc2VudGluZyBmdWxseSB0cmFuc3BhcmVudCBhbmRcclxuICAgKiAxLjAgcmVwcmVzZW50aW5nIGZ1bGx5IG9wYXF1ZS5cclxuICAgKlxyXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxyXG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxyXG4gICAqL1xyXG4gIHRoaXMuZGVmYXVsdEFscGhhID0gdW5kZWZpbmVkO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgZGVmYXVsdCBhbHBoYSBibGVuZGluZyB2YWx1ZSBvbiB0aGUgbmlnaHQgc2lkZSBvZiB0aGUgZ2xvYmUgb2YgdGhpcyBwcm92aWRlciwgd2l0aCAwLjAgcmVwcmVzZW50aW5nIGZ1bGx5IHRyYW5zcGFyZW50IGFuZFxyXG4gICAqIDEuMCByZXByZXNlbnRpbmcgZnVsbHkgb3BhcXVlLlxyXG4gICAqXHJcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XHJcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXHJcbiAgICovXHJcbiAgdGhpcy5kZWZhdWx0TmlnaHRBbHBoYSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGRlZmF1bHQgYWxwaGEgYmxlbmRpbmcgdmFsdWUgb24gdGhlIGRheSBzaWRlIG9mIHRoZSBnbG9iZSBvZiB0aGlzIHByb3ZpZGVyLCB3aXRoIDAuMCByZXByZXNlbnRpbmcgZnVsbHkgdHJhbnNwYXJlbnQgYW5kXHJcbiAgICogMS4wIHJlcHJlc2VudGluZyBmdWxseSBvcGFxdWUuXHJcbiAgICpcclxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cclxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcclxuICAgKi9cclxuICB0aGlzLmRlZmF1bHREYXlBbHBoYSA9IHVuZGVmaW5lZDtcclxuXHJcbiAgLyoqXHJcbiAgICogVGhlIGRlZmF1bHQgYnJpZ2h0bmVzcyBvZiB0aGlzIHByb3ZpZGVyLiAgMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci4gIExlc3MgdGhhbiAxLjBcclxuICAgKiBtYWtlcyB0aGUgaW1hZ2VyeSBkYXJrZXIgd2hpbGUgZ3JlYXRlciB0aGFuIDEuMCBtYWtlcyBpdCBicmlnaHRlci5cclxuICAgKlxyXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxyXG4gICAqIEBkZWZhdWx0IHVuZGVmaW5lZFxyXG4gICAqL1xyXG4gIHRoaXMuZGVmYXVsdEJyaWdodG5lc3MgPSB1bmRlZmluZWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBkZWZhdWx0IGNvbnRyYXN0IG9mIHRoaXMgcHJvdmlkZXIuICAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLiAgTGVzcyB0aGFuIDEuMCByZWR1Y2VzXHJcbiAgICogdGhlIGNvbnRyYXN0IHdoaWxlIGdyZWF0ZXIgdGhhbiAxLjAgaW5jcmVhc2VzIGl0LlxyXG4gICAqXHJcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XHJcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXHJcbiAgICovXHJcbiAgdGhpcy5kZWZhdWx0Q29udHJhc3QgPSB1bmRlZmluZWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBkZWZhdWx0IGh1ZSBvZiB0aGlzIHByb3ZpZGVyIGluIHJhZGlhbnMuIDAuMCB1c2VzIHRoZSB1bm1vZGlmaWVkIGltYWdlcnkgY29sb3IuXHJcbiAgICpcclxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cclxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcclxuICAgKi9cclxuICB0aGlzLmRlZmF1bHRIdWUgPSB1bmRlZmluZWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBkZWZhdWx0IHNhdHVyYXRpb24gb2YgdGhpcyBwcm92aWRlci4gMS4wIHVzZXMgdGhlIHVubW9kaWZpZWQgaW1hZ2VyeSBjb2xvci4gTGVzcyB0aGFuIDEuMCByZWR1Y2VzIHRoZVxyXG4gICAqIHNhdHVyYXRpb24gd2hpbGUgZ3JlYXRlciB0aGFuIDEuMCBpbmNyZWFzZXMgaXQuXHJcbiAgICpcclxuICAgKiBAdHlwZSB7TnVtYmVyfHVuZGVmaW5lZH1cclxuICAgKiBAZGVmYXVsdCB1bmRlZmluZWRcclxuICAgKi9cclxuICB0aGlzLmRlZmF1bHRTYXR1cmF0aW9uID0gdW5kZWZpbmVkO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgZGVmYXVsdCBnYW1tYSBjb3JyZWN0aW9uIHRvIGFwcGx5IHRvIHRoaXMgcHJvdmlkZXIuICAxLjAgdXNlcyB0aGUgdW5tb2RpZmllZCBpbWFnZXJ5IGNvbG9yLlxyXG4gICAqXHJcbiAgICogQHR5cGUge051bWJlcnx1bmRlZmluZWR9XHJcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXHJcbiAgICovXHJcbiAgdGhpcy5kZWZhdWx0R2FtbWEgPSB1bmRlZmluZWQ7XHJcblxyXG4gIC8qKlxyXG4gICAqIFRoZSBkZWZhdWx0IHRleHR1cmUgbWluaWZpY2F0aW9uIGZpbHRlciB0byBhcHBseSB0byB0aGlzIHByb3ZpZGVyLlxyXG4gICAqXHJcbiAgICogQHR5cGUge1RleHR1cmVNaW5pZmljYXRpb25GaWx0ZXJ9XHJcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXHJcbiAgICovXHJcbiAgdGhpcy5kZWZhdWx0TWluaWZpY2F0aW9uRmlsdGVyID0gdW5kZWZpbmVkO1xyXG5cclxuICAvKipcclxuICAgKiBUaGUgZGVmYXVsdCB0ZXh0dXJlIG1hZ25pZmljYXRpb24gZmlsdGVyIHRvIGFwcGx5IHRvIHRoaXMgcHJvdmlkZXIuXHJcbiAgICpcclxuICAgKiBAdHlwZSB7VGV4dHVyZU1hZ25pZmljYXRpb25GaWx0ZXJ9XHJcbiAgICogQGRlZmF1bHQgdW5kZWZpbmVkXHJcbiAgICovXHJcbiAgdGhpcy5kZWZhdWx0TWFnbmlmaWNhdGlvbkZpbHRlciA9IHVuZGVmaW5lZDtcclxufVxyXG5cclxuT2JqZWN0LmRlZmluZVByb3BlcnRpZXMoSW1hZ2VUaWxlUHJvdmlkZXIucHJvdG90eXBlLCB7XHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgcHJveHkgdXNlZCBieSB0aGlzIHByb3ZpZGVyLlxyXG4gICAqIEBtZW1iZXJvZiBUaWxlQ29vcmRpbmF0ZXNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXHJcbiAgICogQHR5cGUge1Byb3h5fVxyXG4gICAqIEByZWFkb25seVxyXG4gICAqL1xyXG4gIHByb3h5OiB7XHJcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcclxuICAgIH0sXHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0cyB0aGUgd2lkdGggb2YgZWFjaCB0aWxlLCBpbiBwaXhlbHMuIFRoaXMgZnVuY3Rpb24gc2hvdWxkXHJcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIFRpbGVDb29yZGluYXRlc0ltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxyXG4gICAqIEBtZW1iZXJvZiBUaWxlQ29vcmRpbmF0ZXNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXHJcbiAgICogQHR5cGUge051bWJlcn1cclxuICAgKiBAcmVhZG9ubHlcclxuICAgKi9cclxuICB0aWxlV2lkdGg6IHtcclxuICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fdGlsZVdpZHRoO1xyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBoZWlnaHQgb2YgZWFjaCB0aWxlLCBpbiBwaXhlbHMuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxyXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBUaWxlQ29vcmRpbmF0ZXNJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cclxuICAgKiBAbWVtYmVyb2YgVGlsZUNvb3JkaW5hdGVzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxyXG4gICAqIEB0eXBlIHtOdW1iZXJ9XHJcbiAgICogQHJlYWRvbmx5XHJcbiAgICovXHJcbiAgdGlsZUhlaWdodDoge1xyXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJldHVybiB0aGlzLl90aWxlSGVpZ2h0O1xyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBtYXhpbXVtIGxldmVsLW9mLWRldGFpbCB0aGF0IGNhbiBiZSByZXF1ZXN0ZWQuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxyXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBUaWxlQ29vcmRpbmF0ZXNJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cclxuICAgKiBAbWVtYmVyb2YgVGlsZUNvb3JkaW5hdGVzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxyXG4gICAqIEB0eXBlIHtOdW1iZXJ8dW5kZWZpbmVkfVxyXG4gICAqIEByZWFkb25seVxyXG4gICAqL1xyXG4gIG1heGltdW1MZXZlbDoge1xyXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9LFxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgdGhlIG1pbmltdW0gbGV2ZWwtb2YtZGV0YWlsIHRoYXQgY2FuIGJlIHJlcXVlc3RlZC4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXHJcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIFRpbGVDb29yZGluYXRlc0ltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxyXG4gICAqIEBtZW1iZXJvZiBUaWxlQ29vcmRpbmF0ZXNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXHJcbiAgICogQHR5cGUge051bWJlcn1cclxuICAgKiBAcmVhZG9ubHlcclxuICAgKi9cclxuICBtaW5pbXVtTGV2ZWw6IHtcclxuICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSB0aWxpbmcgc2NoZW1lIHVzZWQgYnkgdGhpcyBwcm92aWRlci4gIFRoaXMgZnVuY3Rpb24gc2hvdWxkXHJcbiAgICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIFRpbGVDb29yZGluYXRlc0ltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxyXG4gICAqIEBtZW1iZXJvZiBUaWxlQ29vcmRpbmF0ZXNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXHJcbiAgICogQHR5cGUge1RpbGluZ1NjaGVtZX1cclxuICAgKiBAcmVhZG9ubHlcclxuICAgKi9cclxuICB0aWxpbmdTY2hlbWU6IHtcclxuICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fdGlsaW5nU2NoZW1lO1xyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSByZWN0YW5nbGUsIGluIHJhZGlhbnMsIG9mIHRoZSBpbWFnZXJ5IHByb3ZpZGVkIGJ5IHRoaXMgaW5zdGFuY2UuICBUaGlzIGZ1bmN0aW9uIHNob3VsZFxyXG4gICAqIG5vdCBiZSBjYWxsZWQgYmVmb3JlIHtAbGluayBUaWxlQ29vcmRpbmF0ZXNJbWFnZXJ5UHJvdmlkZXIjcmVhZHl9IHJldHVybnMgdHJ1ZS5cclxuICAgKiBAbWVtYmVyb2YgVGlsZUNvb3JkaW5hdGVzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxyXG4gICAqIEB0eXBlIHtSZWN0YW5nbGV9XHJcbiAgICogQHJlYWRvbmx5XHJcbiAgICovXHJcbiAgcmVjdGFuZ2xlOiB7XHJcbiAgICBnZXQ6IGZ1bmN0aW9uICgpIHtcclxuICAgICAgcmV0dXJuIHRoaXMuX3RpbGluZ1NjaGVtZS5yZWN0YW5nbGU7XHJcbiAgICB9LFxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgdGhlIHRpbGUgZGlzY2FyZCBwb2xpY3kuICBJZiBub3QgdW5kZWZpbmVkLCB0aGUgZGlzY2FyZCBwb2xpY3kgaXMgcmVzcG9uc2libGVcclxuICAgKiBmb3IgZmlsdGVyaW5nIG91dCBcIm1pc3NpbmdcIiB0aWxlcyB2aWEgaXRzIHNob3VsZERpc2NhcmRJbWFnZSBmdW5jdGlvbi4gIElmIHRoaXMgZnVuY3Rpb25cclxuICAgKiByZXR1cm5zIHVuZGVmaW5lZCwgbm8gdGlsZXMgYXJlIGZpbHRlcmVkLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcclxuICAgKiBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgVGlsZUNvb3JkaW5hdGVzSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXHJcbiAgICogQG1lbWJlcm9mIFRpbGVDb29yZGluYXRlc0ltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcclxuICAgKiBAdHlwZSB7VGlsZURpc2NhcmRQb2xpY3l9XHJcbiAgICogQHJlYWRvbmx5XHJcbiAgICovXHJcbiAgdGlsZURpc2NhcmRQb2xpY3k6IHtcclxuICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gdW5kZWZpbmVkO1xyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIGFuIGV2ZW50IHRoYXQgaXMgcmFpc2VkIHdoZW4gdGhlIGltYWdlcnkgcHJvdmlkZXIgZW5jb3VudGVycyBhbiBhc3luY2hyb25vdXMgZXJyb3IuICBCeSBzdWJzY3JpYmluZ1xyXG4gICAqIHRvIHRoZSBldmVudCwgeW91IHdpbGwgYmUgbm90aWZpZWQgb2YgdGhlIGVycm9yIGFuZCBjYW4gcG90ZW50aWFsbHkgcmVjb3ZlciBmcm9tIGl0LiAgRXZlbnQgbGlzdGVuZXJzXHJcbiAgICogYXJlIHBhc3NlZCBhbiBpbnN0YW5jZSBvZiB7QGxpbmsgVGlsZVByb3ZpZGVyRXJyb3J9LlxyXG4gICAqIEBtZW1iZXJvZiBUaWxlQ29vcmRpbmF0ZXNJbWFnZXJ5UHJvdmlkZXIucHJvdG90eXBlXHJcbiAgICogQHR5cGUge0V2ZW50fVxyXG4gICAqIEByZWFkb25seVxyXG4gICAqL1xyXG4gIGVycm9yRXZlbnQ6IHtcclxuICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fZXJyb3JFdmVudDtcclxuICAgIH0sXHJcbiAgfSxcclxuXHJcbiAgLyoqXHJcbiAgICogR2V0cyBhIHZhbHVlIGluZGljYXRpbmcgd2hldGhlciBvciBub3QgdGhlIHByb3ZpZGVyIGlzIHJlYWR5IGZvciB1c2UuXHJcbiAgICogQG1lbWJlcm9mIFRpbGVDb29yZGluYXRlc0ltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcclxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgKiBAcmVhZG9ubHlcclxuICAgKi9cclxuICByZWFkeToge1xyXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIGEgcHJvbWlzZSB0aGF0IHJlc29sdmVzIHRvIHRydWUgd2hlbiB0aGUgcHJvdmlkZXIgaXMgcmVhZHkgZm9yIHVzZS5cclxuICAgKiBAbWVtYmVyb2YgVGlsZUNvb3JkaW5hdGVzSW1hZ2VyeVByb3ZpZGVyLnByb3RvdHlwZVxyXG4gICAqIEB0eXBlIHtQcm9taXNlLjxCb29sZWFuPn1cclxuICAgKiBAcmVhZG9ubHlcclxuICAgKi9cclxuICByZWFkeVByb21pc2U6IHtcclxuICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gdGhpcy5fcmVhZHlQcm9taXNlO1xyXG4gICAgfSxcclxuICB9LFxyXG5cclxuICAvKipcclxuICAgKiBHZXRzIHRoZSBjcmVkaXQgdG8gZGlzcGxheSB3aGVuIHRoaXMgaW1hZ2VyeSBwcm92aWRlciBpcyBhY3RpdmUuICBUeXBpY2FsbHkgdGhpcyBpcyB1c2VkIHRvIGNyZWRpdFxyXG4gICAqIHRoZSBzb3VyY2Ugb2YgdGhlIGltYWdlcnkuICBUaGlzIGZ1bmN0aW9uIHNob3VsZCBub3QgYmUgY2FsbGVkIGJlZm9yZSB7QGxpbmsgVGlsZUNvb3JkaW5hdGVzSW1hZ2VyeVByb3ZpZGVyI3JlYWR5fSByZXR1cm5zIHRydWUuXHJcbiAgICogQG1lbWJlcm9mIFRpbGVDb29yZGluYXRlc0ltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcclxuICAgKiBAdHlwZSB7Q3JlZGl0fVxyXG4gICAqIEByZWFkb25seVxyXG4gICAqL1xyXG4gIGNyZWRpdDoge1xyXG4gICAgZ2V0OiBmdW5jdGlvbiAoKSB7XHJcbiAgICAgIHJldHVybiB1bmRlZmluZWQ7XHJcbiAgICB9LFxyXG4gIH0sXHJcblxyXG4gIC8qKlxyXG4gICAqIEdldHMgYSB2YWx1ZSBpbmRpY2F0aW5nIHdoZXRoZXIgb3Igbm90IHRoZSBpbWFnZXMgcHJvdmlkZWQgYnkgdGhpcyBpbWFnZXJ5IHByb3ZpZGVyXHJcbiAgICogaW5jbHVkZSBhbiBhbHBoYSBjaGFubmVsLiAgSWYgdGhpcyBwcm9wZXJ0eSBpcyBmYWxzZSwgYW4gYWxwaGEgY2hhbm5lbCwgaWYgcHJlc2VudCwgd2lsbFxyXG4gICAqIGJlIGlnbm9yZWQuICBJZiB0aGlzIHByb3BlcnR5IGlzIHRydWUsIGFueSBpbWFnZXMgd2l0aG91dCBhbiBhbHBoYSBjaGFubmVsIHdpbGwgYmUgdHJlYXRlZFxyXG4gICAqIGFzIGlmIHRoZWlyIGFscGhhIGlzIDEuMCBldmVyeXdoZXJlLiAgU2V0dGluZyB0aGlzIHByb3BlcnR5IHRvIGZhbHNlIHJlZHVjZXMgbWVtb3J5IHVzYWdlXHJcbiAgICogYW5kIHRleHR1cmUgdXBsb2FkIHRpbWUuXHJcbiAgICogQG1lbWJlcm9mIFRpbGVDb29yZGluYXRlc0ltYWdlcnlQcm92aWRlci5wcm90b3R5cGVcclxuICAgKiBAdHlwZSB7Qm9vbGVhbn1cclxuICAgKiBAcmVhZG9ubHlcclxuICAgKi9cclxuICBoYXNBbHBoYUNoYW5uZWw6IHtcclxuICAgIGdldDogZnVuY3Rpb24gKCkge1xyXG4gICAgICByZXR1cm4gdHJ1ZTtcclxuICAgIH0sXHJcbiAgfSxcclxufSk7XHJcblxyXG4vKipcclxuICogR2V0cyB0aGUgY3JlZGl0cyB0byBiZSBkaXNwbGF5ZWQgd2hlbiBhIGdpdmVuIHRpbGUgaXMgZGlzcGxheWVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlIFkgY29vcmRpbmF0ZS5cclxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlIGxldmVsO1xyXG4gKiBAcmV0dXJucyB7Q3JlZGl0W119IFRoZSBjcmVkaXRzIHRvIGJlIGRpc3BsYXllZCB3aGVuIHRoZSB0aWxlIGlzIGRpc3BsYXllZC5cclxuICpcclxuICogQGV4Y2VwdGlvbiB7RGV2ZWxvcGVyRXJyb3J9IDxjb2RlPmdldFRpbGVDcmVkaXRzPC9jb2RlPiBtdXN0IG5vdCBiZSBjYWxsZWQgYmVmb3JlIHRoZSBpbWFnZXJ5IHByb3ZpZGVyIGlzIHJlYWR5LlxyXG4gKi9cclxuSW1hZ2VUaWxlUHJvdmlkZXIucHJvdG90eXBlLmdldFRpbGVDcmVkaXRzID0gZnVuY3Rpb24gKFxyXG4gIHgsXHJcbiAgeSxcclxuICBsZXZlbFxyXG4pIHtcclxuICByZXR1cm4gdW5kZWZpbmVkO1xyXG59O1xyXG5cclxuLyoqXHJcbiAqIFJlcXVlc3RzIHRoZSBpbWFnZSBmb3IgYSBnaXZlbiB0aWxlLiAgVGhpcyBmdW5jdGlvbiBzaG91bGRcclxuICogbm90IGJlIGNhbGxlZCBiZWZvcmUge0BsaW5rIFRpbGVDb29yZGluYXRlc0ltYWdlcnlQcm92aWRlciNyZWFkeX0gcmV0dXJucyB0cnVlLlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlIFkgY29vcmRpbmF0ZS5cclxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlIGxldmVsLlxyXG4gKiBAcGFyYW0ge1JlcXVlc3R9IFtyZXF1ZXN0XSBUaGUgcmVxdWVzdCBvYmplY3QuIEludGVuZGVkIGZvciBpbnRlcm5hbCB1c2Ugb25seS5cclxuICogQHJldHVybnMge1Byb21pc2UuPEhUTUxJbWFnZUVsZW1lbnR8SFRNTENhbnZhc0VsZW1lbnQ+fHVuZGVmaW5lZH0gQSBwcm9taXNlIGZvciB0aGUgaW1hZ2UgdGhhdCB3aWxsIHJlc29sdmUgd2hlbiB0aGUgaW1hZ2UgaXMgYXZhaWxhYmxlLCBvclxyXG4gKiAgICAgICAgICB1bmRlZmluZWQgaWYgdGhlcmUgYXJlIHRvbyBtYW55IGFjdGl2ZSByZXF1ZXN0cyB0byB0aGUgc2VydmVyLCBhbmQgdGhlIHJlcXVlc3RcclxuICogICAgICAgICAgc2hvdWxkIGJlIHJldHJpZWQgbGF0ZXIuICBUaGUgcmVzb2x2ZWQgaW1hZ2UgbWF5IGJlIGVpdGhlciBhblxyXG4gKiAgICAgICAgICBJbWFnZSBvciBhIENhbnZhcyBET00gb2JqZWN0LlxyXG4gKi9cclxuSW1hZ2VUaWxlUHJvdmlkZXIucHJvdG90eXBlLnJlcXVlc3RJbWFnZSA9IGZ1bmN0aW9uIChcclxuICB4LFxyXG4gIHksXHJcbiAgbGV2ZWwsXHJcbiAgcmVxdWVzdFxyXG4pIHtcclxuICBpZih0aGlzLnNob3dMZXZlbHMuaW5kZXhPZihsZXZlbCkgPiAtMSl7XHJcbiAgICByZXR1cm4gdGhpcy5vcHRpb25zLmltZztcclxuICB9ZWxzZXtcclxuICAgIHJldHVybiBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdjYW52YXMnKTtcclxuICB9XHJcbn07XHJcblxyXG4vKipcclxuICogUGlja2luZyBmZWF0dXJlcyBpcyBub3QgY3VycmVudGx5IHN1cHBvcnRlZCBieSB0aGlzIGltYWdlcnkgcHJvdmlkZXIsIHNvIHRoaXMgZnVuY3Rpb24gc2ltcGx5IHJldHVybnNcclxuICogdW5kZWZpbmVkLlxyXG4gKlxyXG4gKiBAcGFyYW0ge051bWJlcn0geCBUaGUgdGlsZSBYIGNvb3JkaW5hdGUuXHJcbiAqIEBwYXJhbSB7TnVtYmVyfSB5IFRoZSB0aWxlIFkgY29vcmRpbmF0ZS5cclxuICogQHBhcmFtIHtOdW1iZXJ9IGxldmVsIFRoZSB0aWxlIGxldmVsLlxyXG4gKiBAcGFyYW0ge051bWJlcn0gbG9uZ2l0dWRlIFRoZSBsb25naXR1ZGUgYXQgd2hpY2ggdG8gcGljayBmZWF0dXJlcy5cclxuICogQHBhcmFtIHtOdW1iZXJ9IGxhdGl0dWRlICBUaGUgbGF0aXR1ZGUgYXQgd2hpY2ggdG8gcGljayBmZWF0dXJlcy5cclxuICogQHJldHVybiB7UHJvbWlzZS48SW1hZ2VyeUxheWVyRmVhdHVyZUluZm9bXT58dW5kZWZpbmVkfSBBIHByb21pc2UgZm9yIHRoZSBwaWNrZWQgZmVhdHVyZXMgdGhhdCB3aWxsIHJlc29sdmUgd2hlbiB0aGUgYXN5bmNocm9ub3VzXHJcbiAqICAgICAgICAgICAgICAgICAgIHBpY2tpbmcgY29tcGxldGVzLiAgVGhlIHJlc29sdmVkIHZhbHVlIGlzIGFuIGFycmF5IG9mIHtAbGluayBJbWFnZXJ5TGF5ZXJGZWF0dXJlSW5mb31cclxuICogICAgICAgICAgICAgICAgICAgaW5zdGFuY2VzLiAgVGhlIGFycmF5IG1heSBiZSBlbXB0eSBpZiBubyBmZWF0dXJlcyBhcmUgZm91bmQgYXQgdGhlIGdpdmVuIGxvY2F0aW9uLlxyXG4gKiAgICAgICAgICAgICAgICAgICBJdCBtYXkgYWxzbyBiZSB1bmRlZmluZWQgaWYgcGlja2luZyBpcyBub3Qgc3VwcG9ydGVkLlxyXG4gKi9cclxuSW1hZ2VUaWxlUHJvdmlkZXIucHJvdG90eXBlLnBpY2tGZWF0dXJlcyA9IGZ1bmN0aW9uIChcclxuICB4LFxyXG4gIHksXHJcbiAgbGV2ZWwsXHJcbiAgbG9uZ2l0dWRlLFxyXG4gIGxhdGl0dWRlXHJcbikge1xyXG4gIHJldHVybiB1bmRlZmluZWQ7XHJcbn07XHJcblxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBJbWFnZVRpbGVQcm92aWRlcjtcclxuIiwiXCJ1c2Ugc3RyaWN0XCI7XG5jb25zdCBHQW5ub0F2b2lkID0gcmVxdWlyZShcIi4vYXZvaWQvR0Fubm9Bdm9pZFwiKTtcbmNvbnN0IEdDdXRMaW5lID0gcmVxdWlyZShcIi4vYXZvaWQvR0N1dExpbmVcIik7XG5sZXQgdGlsZXMgPSBbXTtcbmxldCBsYWJlbEF2b2lkID0gbnVsbDtcbmxldCBmaW5pc2hlZCA9IHRydWU7XG5cbmxldCBzdHlsZU1hcDtcbi8v5piv5ZCm6ZyA6KaB6YeN5paw5YiH5Ymy57q/5rOo6K6wXG5sZXQgbmVlZEN1dExpbmUgPSBmYWxzZTtcblxubGV0IHo7XG5sZXQgdmlld2VyO1xuXG5jbGFzcyBBdm9pZFRpbGUge1xuICBzdGF0aWMgaW5pdCh0cywgaGVhZGluZywgc20sIHZyKSB7XG4gICAgZmluaXNoZWQgPSBmYWxzZTtcbiAgICBzdHlsZU1hcCA9IHNtO1xuICAgIHRpbGVzID0gdHM7XG4gICAgdmlld2VyID0gdnI7XG4gICAgbmVlZEN1dExpbmUgPSBmYWxzZTtcbiAgICBsZXQgbCA9IHZpZXdlci5jYW1lcmEuZ2V0TGV2ZWwoKTtcbiAgICBpZiAoIXogfHwgTWF0aC5hYnMobCAtIHopID4gMC4xKSB7XG4gICAgICBuZWVkQ3V0TGluZSA9IHRydWU7XG4gICAgfVxuICAgIHogPSBsO1xuICAgIGxhYmVsQXZvaWQgPSBuZXcgR0Fubm9Bdm9pZChudWxsLCBudWxsLCBoZWFkaW5nKTtcbiAgfVxuXG4gIHN0YXRpYyBzZXRUaWxlcyh0cywgaGVhZGluZykge1xuICAgIGZpbmlzaGVkID0gZmFsc2U7XG4gICAgdGlsZXMgPSB0cztcblxuICAgIGxhYmVsQXZvaWQgPSBuZXcgR0Fubm9Bdm9pZChudWxsLCBudWxsLCBoZWFkaW5nKTtcbiAgfVxuXG4gIHN0YXRpYyBhdm9pZFRpbGUoKSB7XG4gICAgY29uc3Qgc3RhcnRUaW1lID0gbmV3IERhdGUoKS5nZXRUaW1lKCk7XG4gICAgY29uc3Qgc2hvdWxkUGF1c2VQbGFjZW1lbnQgPSAoKSA9PiB7XG4gICAgICBjb25zdCBlbGFwc2VkVGltZSA9IG5ldyBEYXRlKCkuZ2V0VGltZSgpIC0gc3RhcnRUaW1lO1xuICAgICAgcmV0dXJuIGVsYXBzZWRUaW1lID4gMztcbiAgICB9O1xuXG4gICAgbGV0IGxldmVsID0gdmlld2VyLmNhbWVyYS5nZXRMZXZlbCgpO1xuICAgIC8vIGNvbnNvbGUudGltZSgnYXZvaWRUaWxlJyk7XG4gICAgd2hpbGUgKHRpbGVzLmxlbmd0aCA+IDApIHtcbiAgICAgIC8vIGNvbnNvbGUubG9nKCcrKysrKysrKysrKysrKysrKycpO1xuICAgICAgbGV0IHRpbGUgPSB0aWxlcy5zaGlmdCgpO1xuICAgICAgaWYgKHRpbGUuaXNEZXN0cm95KSB7XG4gICAgICAgIGNvbnRpbnVlO1xuICAgICAgfVxuXG4gICAgICAvL+azqOiusOesrOS4gOasoeWPguS4jumBv+iuqe+8jOS4jeeUqOmHjeaWsOWIh+e6v+azqOiusFxuICAgICAgaWYgKG5lZWRDdXRMaW5lKSB7XG4gICAgICAgIC8vIGxldCBzY2FsZSA9IE1hdGgucG93KDIsdGlsZS5sZXZlbCkvTWF0aC5wb3coMixsZXZlbCkqMC41O1xuICAgICAgICAvLyBBdm9pZFRpbGUuY3V0TGluZSh0aWxlLHRpbGUuZmVhdHVyZXMsc2NhbGUpO1xuICAgICAgfVxuXG4gICAgICAvL+i9rOaNouS4uuWxj+W5leWdkOagh1xuICAgICAgdGlsZS51cGRhdGVTY3JlZW5QdCh0aWxlLmZlYXR1cmVzKTtcblxuICAgICAgLy/orqHnrpfpgb/orqlib3hcbiAgICAgIGxhYmVsQXZvaWQuR0xhYmVsQm94LnNldEJveCh0aWxlLmZlYXR1cmVzLCB0aWxlLnN0eWxlTWFwLCB0cnVlKTtcbiAgICAgIC8v5byA5aeL6YG/6K6pXG4gICAgICBsYWJlbEF2b2lkLmRlZmF1bHRBdm9pZCh0aWxlLmZlYXR1cmVzLCB0aWxlLnN0eWxlTWFwLCB0cnVlLCB0cnVlLCBmYWxzZSk7XG5cbiAgICAgIEF2b2lkVGlsZS51cGRhdGVMaW5lTGFibGUodGlsZS5mZWF0dXJlcyk7XG4gICAgICAvL+mBv+iuqVxuICAgICAgaWYgKHNob3VsZFBhdXNlUGxhY2VtZW50KCkpIHtcbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCdhdm9pZFRpbGUnKTtcbiAgICAgICAgcmV0dXJuO1xuICAgICAgfVxuICAgIH1cbiAgICAvLyBjb25zb2xlLnRpbWVFbmQoJ2F2b2lkVGlsZScpO1xuICAgIGZpbmlzaGVkID0gdHJ1ZTtcbiAgfVxuXG4gIHN0YXRpYyBjdXRMaW5lKHRpbGUsIGZlYXR1cmVzLCBzY2FsZSkge1xuICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmVhdHVyZXMubGVuZ3RoOyBpKyspIHtcbiAgICAgIGxldCBmZWF0dXJlID0gZmVhdHVyZXNbaV07XG4gICAgICBpZiAoZmVhdHVyZS5saW5lVHlwZSAhPSBcInRleHRcIikge1xuICAgICAgICBjb250aW51ZTtcbiAgICAgIH1cblxuICAgICAgbGV0IGYgPSBHQ3V0TGluZS5jcmVhdGVMaW5lVGV4dEZlYXRydWUoXG4gICAgICAgIGZlYXR1cmUsXG4gICAgICAgIHN0eWxlTWFwW2ZlYXR1cmUuc3R5bGVJZF0sXG4gICAgICAgIDAsXG4gICAgICAgIHNjYWxlXG4gICAgICApLmZlYXR1cmU7XG5cbiAgICAgIGZlYXR1cmUuYW5nbGVQb3NpdGlvbnMgPSBbXTtcbiAgICAgIGlmIChmKSB7XG4gICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgZi5zb3VyY2VBbmdsZURhdGEubGVuZ3RoOyBqKyspIHtcbiAgICAgICAgICBsZXQgYW5nbGVQb3NpdGlvbiA9IFtdO1xuICAgICAgICAgIGxldCBzb3VyY2VBbmdsZURhdGEgPSBmLnNvdXJjZUFuZ2xlRGF0YVtqXTtcbiAgICAgICAgICBsZXQgcG9zaXRpb24gPSB0aWxlLnRvTG9uTGF0KFtcbiAgICAgICAgICAgIHNvdXJjZUFuZ2xlRGF0YVswXVswXSxcbiAgICAgICAgICAgIHNvdXJjZUFuZ2xlRGF0YVswXVsxXSxcbiAgICAgICAgICBdKTtcbiAgICAgICAgICBhbmdsZVBvc2l0aW9uLnB1c2gocG9zaXRpb24pO1xuICAgICAgICAgIGFuZ2xlUG9zaXRpb24ucHVzaChmZWF0dXJlLnNvdXJjZUFuZ2xlRGF0YVtqXVsxXSk7XG4gICAgICAgICAgZmVhdHVyZS5hbmdsZVBvc2l0aW9ucy5wdXNoKGFuZ2xlUG9zaXRpb24pO1xuXG4gICAgICAgICAgbGV0IGxhYmVsID0gZmVhdHVyZS5sYWJlbHNbal07XG4gICAgICAgICAgaWYgKGZlYXR1cmUuYW5nbGVQb3NpdGlvbnNbal1bMF0pIHtcbiAgICAgICAgICAgIGxhYmVsLnNob3cgPSB0cnVlO1xuICAgICAgICAgICAgbGFiZWwucG9zaXRpb24gPSBmZWF0dXJlLmFuZ2xlUG9zaXRpb25zW2pdWzBdO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYWJlbC5zaG93ID0gZmFsc2U7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIHNjcmVlblRvcG9zaXRpb24oeCwgeSkge1xuICAgIGxldCBjID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKHgsIHkpO1xuICAgIGxldCBwb3NpdGlvbiA9IHZpZXdlci5jYW1lcmEucGlja0VsbGlwc29pZChjLCB2aWV3ZXIuc2NlbmUuZ2xvYmUuZWxsaXBzb2lkKTtcbiAgICByZXR1cm4gcG9zaXRpb247XG4gIH1cblxuICAvL+abtOaWsOe6v+azqOiusOeahOinkuW6puWSjOaYr+WQpuWPjeWQkVxuICBzdGF0aWMgdXBkYXRlTGluZUxhYmxlKGZlYXR1cmVzKSB7XG4gICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmZWF0dXJlcy5sZW5ndGg7IGkrKykge1xuICAgICAgbGV0IGZlYXR1cmUgPSBmZWF0dXJlc1tpXTtcbiAgICAgIGlmICghZmVhdHVyZS5oaWRkZW4gJiYgZmVhdHVyZS5saW5lVHlwZSA9PSBcInRleHRcIiAmJiBmZWF0dXJlLmxhYmVscykge1xuICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGZlYXR1cmUubGFiZWxzLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgbGV0IGxhYmVsID0gZmVhdHVyZS5sYWJlbHNbal07XG4gICAgICAgICAgaWYgKGZlYXR1cmUuY2hhbmdlRGlyZWN0aW9uKSB7XG4gICAgICAgICAgICBsYWJlbC50ZXh0ID0gZmVhdHVyZS5sYWJlbC5jaGFyQXQoZmVhdHVyZS5sYWJlbHMubGVuZ3RoIC0gMSAtIGopO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBsYWJlbC50ZXh0ID0gZmVhdHVyZS5sYWJlbC5jaGFyQXQoaik7XG4gICAgICAgICAgfVxuXG4gICAgICAgICAgbGV0IGFuZ2xlID0gLWZlYXR1cmUudGV4dFBvaW50c1tqXVsyXTtcbiAgICAgICAgICBpZiAoYW5nbGUgIT0gbGFiZWwuYW5nbGUpIHtcbiAgICAgICAgICAgIGxhYmVsLmFuZ2xlID0gYW5nbGU7XG4gICAgICAgICAgICBsYWJlbC5yb3RhdGlvbiA9IENlc2l1bS5NYXRoLnRvUmFkaWFucyhhbmdsZSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgc3RhdGljIGlzRmluaXNoZWQoKSB7XG4gICAgcmV0dXJuIGZpbmlzaGVkO1xuICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gQXZvaWRUaWxlO1xuIiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGtvbmdqaWFuIG9uIDIwMTcvNS8xLlxuICovXG5jb25zdCBMYWJlbERyYXdlciA9IHJlcXVpcmUoJy4vYXZvaWQvTGFiZWxEcmF3ZXInKTtcbmNvbnN0IFBhcnNlTGFiZWxEYXRhID0gcmVxdWlyZSgnLi9hdm9pZC9QYXJzZUxhYmVsRGF0YScpO1xuY29uc3QgR3JpZEZpbHRlckxhYmVsID0gcmVxdWlyZSgnLi9hdm9pZC9HcmlkRmlsdGVyTGFiZWwnKTtcbmNvbnN0IExhYmVsQ29sbGVjdGlvbkV4dCA9IHJlcXVpcmUoJy4uLy4uL2V4dC9MYWJlbENvbGxlY3Rpb25FeHQnKTtcblxuY29uc3QgQkVHSU4gPSAxO1xuY29uc3QgQURERUQgPSAyO1xuY29uc3QgUkVNT1ZFRCA9IDM7XG5jbGFzcyBMYWJlbFRpbGV7XG4gICAgY29uc3RydWN0b3IobmFtZSx4eXosdGlsZVNpemUscmVjdGFuZ2xlLGRhdGEsaW5kZXhEYk5hbWVzLHN0eWxlRnVuLGRhdGFUeXBlLGxldmVsLHN0eWxlTWFwLFxuICAgICAgICAgICAgICAgIHRleHR1cmVzLHNjZW5lKSB7XG4gICAgICAgIHRoaXMubmFtZSA9IG5hbWU7XG4gICAgICAgIHRoaXMueHl6ID0geHl6O1xuICAgICAgICB0aGlzLnRpbGVTaXplID0gdGlsZVNpemU7XG4gICAgICAgIHRoaXMucmVjdGFuZ2xlID0gcmVjdGFuZ2xlO1xuICAgICAgICB0aGlzLnNvdXJjZURhdGEgPSBkYXRhO1xuICAgICAgICB0aGlzLmluZGV4RGJOYW1lcyA9IGluZGV4RGJOYW1lcztcbiAgICAgICAgdGhpcy5zdHlsZUZ1biA9IHN0eWxlRnVuO1xuICAgICAgICB0aGlzLmRhdGFUeXBlID0gZGF0YVR5cGU7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICAgICAgdGhpcy5zdHlsZU1hcCA9IHN0eWxlTWFwO1xuICAgICAgICB0aGlzLnRleHR1cmVzID0gdGV4dHVyZXM7XG4gICAgICAgIHRoaXMuc2NlbmUgPSBzY2VuZTtcblxuICAgICAgICB0aGlzLmxhYmVsQ29sbGVjdGlvbiA9IG5ldyBMYWJlbENvbGxlY3Rpb25FeHQoe2JsZW5kT3B0aW9uOkNlc2l1bS5CbGVuZE9wdGlvbi5PUEFRVUUsZW51RW5hYmxlZDpmYWxzZX0pO1xuICAgICAgICB0aGlzLnJvYWRMYWJlbENvbGxlY3Rpb24gPSBuZXcgTGFiZWxDb2xsZWN0aW9uRXh0KHtibGVuZE9wdGlvbjpDZXNpdW0uQmxlbmRPcHRpb24uT1BBUVVFLGVudUVuYWJsZWQ6dHJ1ZX0pO1xuICAgICAgICB0aGlzLmJpbGxib2FyZENvbGxlY3Rpb24gPSBuZXcgQ2VzaXVtLkJpbGxib2FyZENvbGxlY3Rpb24oe2JsZW5kT3B0aW9uOkNlc2l1bS5CbGVuZE9wdGlvbi5PUEFRVUV9KTtcbiAgICAgICAgLy/lhajlsYDmmK/lkKblvIDlkK/pgb/orqlcbiAgICAgICAgdGhpcy5hYmxlQXZvaWQgPSB0cnVlO1xuICAgICAgICAvL+WFqOWxgOaYr+WQpuW8gOWQr+adg+mHjeaOkuW6j1xuICAgICAgICB0aGlzLmFibGVXZWlnaHQgPSB0cnVlO1xuICAgICAgICAvL+i/h+a7pOagvOe9keWkp+Wwj1xuICAgICAgICB0aGlzLmNlbGxzaXplID0gNDtcbiAgICAgICAgLy/nvZHmoLzlhoXkv53nlZnngrnnmoTkuKrmlbBcbiAgICAgICAgdGhpcy5tYXhQZXJDZWxsID0gMTtcblxuICAgICAgICB0aGlzLnN0YXRlID1CRUdJTjtcbiAgICAgICAgdGhpcy5yZWFkeSA9IGZhbHNlO1xuICAgICAgICB0aGlzLnBhcnNlKCk7XG4gICAgfVxuXG4gICAgcmVzZXQoKXtcbiAgICAgICAgdGhpcy5zdGF0ZSA9QkVHSU47XG4gICAgICAgIHRoaXMucmVhZHkgPSBmYWxzZTtcbiAgICAgICAgdGhpcy5wYXJzZSgpO1xuICAgIH1cblxuICAgIHBhcnNlKCl7XG4gICAgICAgIC8vIGNvbnNvbGUudGltZSgn5omn6KGM5qC35byP5paH5Lu2Jyk7XG4gICAgICAgIGlmKHRoaXMuZGF0YVR5cGUgPT0gJ0JpbmFyeScpe1xuICAgICAgICAgICAgbGV0IGRyYXdlciA9IG5ldyBMYWJlbERyYXdlcih0aGlzLnNvdXJjZURhdGEsdGhpcy5zdHlsZU1hcCx0aGlzLmxldmVsKTtcbiAgICAgICAgICAgIHRoaXMuc3R5bGVGdW4uY2FsbCh7fSwgZHJhd2VyLCB0aGlzLmxldmVsKTtcbiAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICBsZXQgcmVuZGVyID0gbmV3IExhYmVsRHJhd2VyKHRoaXMuc291cmNlRGF0YSx0aGlzLnN0eWxlTWFwLHRoaXMubGV2ZWwpO1xuICAgICAgICAgICAgdGhpcy5zdHlsZUZ1bi5jYWxsKHt9LCByZW5kZXIsIHRoaXMubGV2ZWwpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCfmiafooYzmoLflvI/mlofku7YnKTtcblxuICAgICAgICAvLyBjb25zb2xlLnRpbWUoJ+azqOiusOino+aekCcpO1xuICAgICAgICAvL+i9rOaNoueTpueJh+WdkOagh+S4uuWxj+W5leWdkOaghyzlubbmnoTpgKBsYWJlbOaVsOaNrlxuICAgICAgICBsZXQgZmVhdHVyZXMgPSBQYXJzZUxhYmVsRGF0YS5wYXJzZUxheWVyRGF0YXMoXG4gICAgICAgICAgICB0aGlzLnNvdXJjZURhdGEsdGhpcy5zdHlsZU1hcCx0aGlzLnRleHR1cmVzLHRoaXMueHl6LHRydWUpO1xuICAgICAgICAvLyBjb25zb2xlLnRpbWVFbmQoJ+azqOiusOino+aekCcpO1xuXG4gICAgICAgIC8vIGNvbnNvbGUudGltZSgn5Y676Zmk55Om54mH5aSW55qE5rOo6K6wJyk7XG4gICAgICAgIC8v56e76Zmk55Om54mH5aSW55qE54K55rOo6K6wXG4gICAgICAgIGZlYXR1cmVzLnBvaW50RmVhdHVyZXMgPSBHcmlkRmlsdGVyTGFiZWwucmVtb3ZlVGlsZU91dFBvaW50RmVhdHVyZXMoZmVhdHVyZXMucG9pbnRGZWF0dXJlcyx0aGlzLnRpbGVTaXplKTtcbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCfljrvpmaTnk6bniYflpJbnmoTms6jorrAnKTtcbiAgICAgICAgLy8gY29uc29sZS50aW1lKCfnrKzkuIDmrKHov4fmu6QnKTtcbiAgICAgICAgLy/nrKzkuIDmrKHmoLznvZHov4fmu6RcbiAgICAgICAgbGV0IGxhYmVsRmVhdHVyZXMgPSBHcmlkRmlsdGVyTGFiZWwuZnJpc3RGaWx0ZXIoZmVhdHVyZXMucG9pbnRGZWF0dXJlcyxmZWF0dXJlcy5saW5lRmVhdHVyZXMsXG4gICAgICAgICAgICB0aGlzLnN0eWxlTWFwLHRoaXMuYWJsZVdlaWdodCx0cnVlLCB0aGlzLnRpbGVTaXplLHRoaXMuY2VsbHNpemUsdGhpcy50aWxlU2l6ZSowLjUsdGhpcy5tYXhQZXJDZWxsKTtcbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCfnrKzkuIDmrKHov4fmu6QnKTtcblxuICAgICAgICAvLyBjb25zb2xlLnRpbWUoJ+esrOS6jOasoei/h+a7pCcpO1xuICAgICAgICAvL+esrOS6jOasoeagvOe9kei/h+a7pFxuICAgICAgICB0aGlzLmZlYXR1cmVzID0gR3JpZEZpbHRlckxhYmVsLnNjZW5kRmlsdGVyKGxhYmVsRmVhdHVyZXMucG9pbnRGZWF0dXJlcyxsYWJlbEZlYXR1cmVzLmxpbmVGZWF0dXJlcyx0aGlzLnN0eWxlTWFwLHRoaXMuYWJsZVdlaWdodCx0cnVlLHRoaXMudGlsZVNpemUsIHRoaXMuY2VsbHNpemUsIHRoaXMudGlsZVNpemUqMC41KTtcbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCfnrKzkuozmrKHov4fmu6QnKTtcblxuICAgICAgICAvL+aehOmAoOmcgOimgee7mOWItueahGxhYmVs5ZKMQmlsbGJvYXJk5a+56LGhXG4gICAgICAgIHRoaXMudG9MYWJlbEJpbGxib2FyZHModGhpcy5mZWF0dXJlcyk7XG4gICAgICAgIC8vIGNvbnNvbGUudGltZUVuZCgn6L2s5o2i5Li657uY5Yi25a+56LGh5Y+C5pWwJyk7XG5cbiAgICAgICAgdGhpcy51cGRhdGVEYXRhKCk7XG4gICAgfVxuXG4gICAgdXBkYXRlRGF0YSgpe1xuICAgICAgICAvLyBjb25zb2xlLnRpbWUoJ+i9rOaNouS4uue7j+e6rOW6picpO1xuICAgICAgICAvL+eTpueJh+WdkOagh+i9rOaIkOe7j+e6rOW6puWdkOagh1xuICAgICAgICB0aGlzLnRvQ2FydGVzaWFuMyh0aGlzLmZlYXR1cmVzKTtcbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCfovazmjaLkuLrnu4/nuqzluqYnKTtcbiAgICAgICAgdGhpcy51cGRhdGVMYWJlbFBvc3Rpb24odGhpcy5mZWF0dXJlcyk7XG4gICAgfVxuXG4gICAgdG9DYXJ0ZXNpYW4zKGZlYXR1cmVzKXtcbiAgICAgICAgZm9yKGxldCBpID0wO2k8ZmVhdHVyZXMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBsZXQgZmVhdHVyZSA9IGZlYXR1cmVzW2ldO1xuICAgICAgICAgICAgZmVhdHVyZS5hbmdsZVBvc2l0aW9ucyA9IFtdO1xuXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwO2o8ZmVhdHVyZS5zb3VyY2VBbmdsZURhdGEubGVuZ3RoO2orKyl7XG4gICAgICAgICAgICAgICAgbGV0IGFuZ2xlUG9zaXRpb24gPSBbXTtcbiAgICAgICAgICAgICAgICBsZXQgc291cmNlQW5nbGVEYXRhID0gZmVhdHVyZS5zb3VyY2VBbmdsZURhdGFbal07XG4gICAgICAgICAgICAgICAgbGV0IHBvc2l0aW9uID0gdGhpcy50b0xvbkxhdChbc291cmNlQW5nbGVEYXRhWzBdWzBdLHNvdXJjZUFuZ2xlRGF0YVswXVsxXV0pO1xuICAgICAgICAgICAgICAgIGFuZ2xlUG9zaXRpb24ucHVzaChwb3NpdGlvbik7XG4gICAgICAgICAgICAgICAgYW5nbGVQb3NpdGlvbi5wdXNoKHNvdXJjZUFuZ2xlRGF0YVsxXSk7XG4gICAgICAgICAgICAgICAgZmVhdHVyZS5hbmdsZVBvc2l0aW9ucy5wdXNoKGFuZ2xlUG9zaXRpb24pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgdG9Mb25MYXQocHQpe1xuICAgICAgICBsZXQgeCA9IHB0WzBdO1xuICAgICAgICBsZXQgeSA9IHB0WzFdO1xuICAgICAgICBsZXQgbG9uID0gQ2VzaXVtLk1hdGgudG9EZWdyZWVzKHRoaXMucmVjdGFuZ2xlLndlc3QgKyB0aGlzLnJlY3RhbmdsZS53aWR0aC8gdGhpcy50aWxlU2l6ZSogeCk7XG4gICAgICAgIGxldCBsYXQgPSBDZXNpdW0uTWF0aC50b0RlZ3JlZXModGhpcy5yZWN0YW5nbGUubm9ydGggLSB0aGlzLnJlY3RhbmdsZS5oZWlnaHQvIHRoaXMudGlsZVNpemUqIHkpO1xuICAgICAgICBsZXQgcG9zaXRpb24gPSBDZXNpdW0uQ2FydGVzaWFuMy5mcm9tRGVncmVlcyhsb24sIGxhdCwwKTtcbiAgICAgICAgcmV0dXJuIHBvc2l0aW9uO1xuICAgIH1cblxuXG5cblxuICAgIC8qKlxuICAgICAqIOWwhue7j+S4lueVjOWdkOagh+i9rOaIkOWxj+W5leWdkOagh1xuICAgICAqL1xuICAgIHVwZGF0ZVNjcmVlblB0KGZlYXR1cmVzKXtcbiAgICAgICAgZm9yKGxldCBpID0wO2k8ZmVhdHVyZXMubGVuZ3RoO2krKykge1xuICAgICAgICAgICAgbGV0IGZlYXR1cmUgPSBmZWF0dXJlc1tpXTtcbiAgICAgICAgICAgIGZlYXR1cmUuZGF0YXMgPSBbXTtcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7ajxmZWF0dXJlLmFuZ2xlUG9zaXRpb25zLmxlbmd0aDtqKyspe1xuICAgICAgICAgICAgICAgIGxldCBhbmdsZVBvc3Rpb24gPSBmZWF0dXJlLmFuZ2xlUG9zaXRpb25zW2pdO1xuICAgICAgICAgICAgICAgIGlmKCFhbmdsZVBvc3Rpb25bMF0pe1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmRhdGFzLnB1c2goW1stNTAsLTUwXSxhbmdsZVBvc3Rpb25bMV1dKTtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHZhciBwdCA9IENlc2l1bS5TY2VuZVRyYW5zZm9ybXMud2dzODRUb1dpbmRvd0Nvb3JkaW5hdGVzKHRoaXMuc2NlbmUsIGFuZ2xlUG9zdGlvblswXSk7XG4gICAgICAgICAgICAgICAgaWYocHQpe1xuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmRhdGFzLnB1c2goW1twdC54LHB0LnldLGFuZ2xlUG9zdGlvblsxXV0pO1xuICAgICAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgICAgICAvL+WcqOinhue6v+WkllxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmRhdGFzLnB1c2goW1stNTAsLTUwXSxhbmdsZVBvc3Rpb25bMV1dKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlsIbopoHntKDovazmjaLmiJDog73nu5jliLbnmoRsYWJlbOWSjEJpbGxib2FyZOWvueixoVxuICAgICAqIEBwYXJhbSBmZWF0dXJlc1xuICAgICAqL1xuICAgIHRvTGFiZWxCaWxsYm9hcmRzKGZlYXR1cmVzKXtcbiAgICAgICAgZm9yKGxldCBpID0gMDtpPGZlYXR1cmVzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgbGV0IGZlYXR1cmUgPSBmZWF0dXJlc1tpXTtcbiAgICAgICAgICAgIGlmKGZlYXR1cmUudHlwZSA9PSAxKXtcbiAgICAgICAgICAgICAgICB0aGlzLnRvUG9pbnRMYWJlbE9wdGlvbihmZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIC8vIGlmKGZlYXR1cmUudHlwZSA9PSAyKXtcbiAgICAgICAgICAgIC8vICAgICB0aGlzLnRvTGluZUxhYmVsT3B0aW9uKGZlYXR1cmUpO1xuICAgICAgICAgICAgLy8gfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogIOW9k+mrmOeoi+aVsOaNruabtOaWsOWQju+8jOabtOaWsOazqOiusOeahOmrmOeoi+WAvFxuICAgICAqIEBwYXJhbSBmZWF0dXJlc1xuICAgICAqL1xuICAgIHVwZGF0ZUxhYmVsUG9zdGlvbihmZWF0dXJlcyl7XG4gICAgICAgIGZvcihsZXQgaSA9IDA7aTxmZWF0dXJlcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGxldCBmZWF0dXJlID0gZmVhdHVyZXNbaV07XG5cbiAgICAgICAgICAgIGlmKGZlYXR1cmUubGFiZWxPcHRpb25zKXtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGkgPSAwO2k8ZmVhdHVyZS5sYWJlbE9wdGlvbnMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsYWJlbE9wdGlvbiA9IGZlYXR1cmUubGFiZWxPcHRpb25zW2ldO1xuICAgICAgICAgICAgICAgICAgICBsYWJlbE9wdGlvbi5wb3NpdGlvbiA9IGZlYXR1cmUuYW5nbGVQb3NpdGlvbnNbaV1bMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG5cbiAgICAgICAgICAgIGlmKGZlYXR1cmUuYmlsbGJvYXJkT3B0aW9uKXtcbiAgICAgICAgICAgICAgICBmZWF0dXJlLmJpbGxib2FyZE9wdGlvbi5wb3NpdGlvbiA9IGZlYXR1cmUuYW5nbGVQb3NpdGlvbnNbMF1bMF07XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmKGZlYXR1cmUubGFiZWxzKXtcbiAgICAgICAgICAgICAgICBmb3IobGV0IGogPSAwO2o8ZmVhdHVyZS5sYWJlbHMubGVuZ3RoO2orKyl7XG4gICAgICAgICAgICAgICAgICAgIGxldCBsYWJlbCA9IGZlYXR1cmUubGFiZWxzW2pdO1xuICAgICAgICAgICAgICAgICAgICBsYWJlbC5wb3NpdGlvbiA9IGZlYXR1cmUuYW5nbGVQb3NpdGlvbnNbal1bMF07XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZihmZWF0dXJlLmJpbGxib2FyZCl7XG4gICAgICAgICAgICAgICAgZmVhdHVyZS5iaWxsYm9hcmQucG9zaXRpb24gPSBmZWF0dXJlLmFuZ2xlUG9zaXRpb25zWzBdWzBdO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmZWF0dXJlXG4gICAgICovXG4gICAgdG9Qb2ludExhYmVsT3B0aW9uKGZlYXR1cmUpe1xuICAgICAgICBmZWF0dXJlLmxhYmVsT3B0aW9ucyA9IFtdO1xuICAgICAgICBsZXQgc3R5bGUgPSB0aGlzLnN0eWxlTWFwW2ZlYXR1cmUuc3R5bGVJZF07XG5cbiAgICAgICAgbGV0IGljb25XaWR0aCA9IGZlYXR1cmUuaWNvbkltZz8gZmVhdHVyZS5pY29uSW1nLndpZHRoOjA7XG4gICAgICAgIGxldCBkaXMgPSBzdHlsZS5ncmFwaGljRGlzdGFuY2UgKyBpY29uV2lkdGggKjAuNTtcbiAgICAgICAgbGV0IG9wdGlvbiA9IHtcbiAgICAgICAgICAgIHNob3c6ZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2U6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuICAgICAgICAgICAgdGV4dDpmZWF0dXJlLmxhYmVsKycnLFxuICAgICAgICAgICAgZm9udDpzdHlsZS5wb2ludEZpbGxGb250LFxuICAgICAgICAgICAgc3R5bGU6IENlc2l1bS5MYWJlbFN0eWxlLkZJTEwsXG4gICAgICAgICAgICB2ZXJ0aWNhbE9yaWdpbjpDZXNpdW0uVmVydGljYWxPcmlnaW4uQ0VOVEVSLFxuICAgICAgICAgICAgcGl4ZWxPZmZzZXQ6IG5ldyBDZXNpdW0uQ2FydGVzaWFuMihkaXMsIDApLFxuICAgICAgICAgICAgZmlsbENvbG9yOiBDZXNpdW0uQ29sb3IuZnJvbUNzc0NvbG9yU3RyaW5nKHN0eWxlLnBvaW50RmlsbFN0eWxlKS53aXRoQWxwaGEoc3R5bGUucG9pbnRGaWxsQWxwaGEpXG4gICAgICAgIH07XG5cbiAgICAgICAgLy/mnInog4zmma/moYZcbiAgICAgICAgaWYgKHN0eWxlLnBvaW50SGFzaEJhY2tncm91bmQgPT0gdHJ1ZSl7XG4gICAgICAgICAgICBvcHRpb24uc2hvd0JhY2tncm91bmQgPSB0cnVlO1xuICAgICAgICAgICAgb3B0aW9uLmJhY2tncm91bmRDb2xvciA9Q2VzaXVtLkNvbG9yLmZyb21Dc3NDb2xvclN0cmluZyhzdHlsZS5wb2ludEJhY2tncm91bmRDb2xvcikud2l0aEFscGhhKHN0eWxlLnBvaW50QmFja2dyb3VuZEFscGhhKTtcbiAgICAgICAgICAgIG9wdGlvbi5iYWNrZ3JvdW5kUGFkZGluZyA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMihzdHlsZS5wb2ludEJhY2tncm91bmRHYXAsIHN0eWxlLnBvaW50QmFja2dyb3VuZEdhcCk7XG4gICAgICAgIH1cblxuICAgICAgICAvL+acieaPj+i+uVxuICAgICAgICBpZiAoc3R5bGUucG9pbnRIYXNoT3V0bGluZSA9PSB0cnVlKXtcbiAgICAgICAgICAgIG9wdGlvbi5zdHlsZSA9Q2VzaXVtLkxhYmVsU3R5bGUuRklMTF9BTkRfT1VUTElORTtcbiAgICAgICAgICAgIG9wdGlvbi5vdXRsaW5lQ29sb3IgPSBDZXNpdW0uQ29sb3IuZnJvbUNzc0NvbG9yU3RyaW5nKHN0eWxlLnBvaW50U3Ryb2tlU3R5bGUpLndpdGhBbHBoYShzdHlsZS5wb2ludFN0cm9rZUFscGhhKSxcbiAgICAgICAgICAgICAgICBvcHRpb24ub3V0bGluZVdpZHRoID0gc3R5bGUucG9pbnRMaW5lV2lkdGgrMjtcbiAgICAgICAgfVxuXG4gICAgICAgIGZlYXR1cmUubGFiZWxPcHRpb25zLnB1c2gob3B0aW9uKTtcbiAgICAgICAgLy/mnInlm77moIdcbiAgICAgICAgaWYoZmVhdHVyZS5pY29uSW1nKXtcbiAgICAgICAgICAgIGxldCBvcHRpb24gPSB0aGlzLnRvQmlsbGJvYXJkT3B0aW9uKGZlYXR1cmUuaWNvbkltZyxzdHlsZSk7XG4gICAgICAgICAgICBmZWF0dXJlLmJpbGxib2FyZE9wdGlvbiA9IG9wdGlvbjtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRvTGluZUxhYmVsT3B0aW9uKGZlYXR1cmUpe1xuICAgICAgICBmZWF0dXJlLmxhYmVsT3B0aW9ucyA9IFtdO1xuICAgICAgICBsZXQgc3R5bGUgPSB0aGlzLnN0eWxlTWFwW2ZlYXR1cmUuc3R5bGVJZF07XG4gICAgICAgIGlmKGZlYXR1cmUubGluZVR5cGUgPT0gJ3RleHQnKXtcbiAgICAgICAgICAgIGlmKHN0eWxlLmxpbmVIYXNoQmFja2dyb3VuZCA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICBsZXQgaW5kZXggPSBNYXRoLmZsb29yKGZlYXR1cmUuc291cmNlQW5nbGVEYXRhLmxlbmd0aC8yKTtcblxuICAgICAgICAgICAgICAgIGxldCBvcHRpb24gPSB7XG4gICAgICAgICAgICAgICAgICAgIHNob3c6ZmFsc2UsXG4gICAgICAgICAgICAgICAgICAgIGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgICAgICAgICAgICAgICAgIHRleHQ6ZmVhdHVyZS5sYWJlbCsnJyxcbiAgICAgICAgICAgICAgICAgICAgZm9udDpzdHlsZS5saW5lRmlsbEZvbnQsXG4gICAgICAgICAgICAgICAgICAgIHN0eWxlOiBDZXNpdW0uTGFiZWxTdHlsZS5GSUxMLFxuICAgICAgICAgICAgICAgICAgICB2ZXJ0aWNhbE9yaWdpbjpDZXNpdW0uVmVydGljYWxPcmlnaW4uQ0VOVEVSLFxuICAgICAgICAgICAgICAgICAgICBob3Jpem9udGFsT3JpZ2luOkNlc2l1bS5Ib3Jpem9udGFsT3JpZ2luLkNFTlRFUixcbiAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiBDZXNpdW0uQ29sb3IuZnJvbUNzc0NvbG9yU3RyaW5nKHN0eWxlLmxpbmVGaWxsU3R5bGUpLndpdGhBbHBoYShzdHlsZS5saW5lRmlsbEFscGhhKVxuICAgICAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgICAgICAvL+acieiDjOaZr+ahhlxuICAgICAgICAgICAgICAgIG9wdGlvbi5zaG93QmFja2dyb3VuZCA9IHRydWU7XG4gICAgICAgICAgICAgICAgb3B0aW9uLmJhY2tncm91bmRDb2xvciA9Q2VzaXVtLkNvbG9yLmZyb21Dc3NDb2xvclN0cmluZyhzdHlsZS5iYWNrZ3JvdW5kQ29sb3IpLndpdGhBbHBoYShzdHlsZS5iYWNrZ3JvdW5kQWxwaGEpLFxuICAgICAgICAgICAgICAgICAgICBvcHRpb24uYmFja2dyb3VuZFBhZGRpbmcgPSBzdHlsZS5saW5lQmFja2dyb3VuZEdhcDtcblxuICAgICAgICAgICAgICAgIGZlYXR1cmUubGFiZWxPcHRpb25zLnB1c2gob3B0aW9uKTtcbiAgICAgICAgICAgIH1lbHNlIGlmKGZlYXR1cmUuc291cmNlQW5nbGVEYXRhLmxlbmd0aCA9PSAxKXtcbiAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICBzaG93OmZhbHNlLFxuICAgICAgICAgICAgICAgICAgICBkaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2U6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuICAgICAgICAgICAgICAgICAgICB0ZXh0OmZlYXR1cmUubGFiZWwrJycsXG4gICAgICAgICAgICAgICAgICAgIGZvbnQ6c3R5bGUubGluZUZpbGxGb250LFxuICAgICAgICAgICAgICAgICAgICBzdHlsZTogQ2VzaXVtLkxhYmVsU3R5bGUuRklMTCxcbiAgICAgICAgICAgICAgICAgICAgdmVydGljYWxPcmlnaW46Q2VzaXVtLlZlcnRpY2FsT3JpZ2luLkNFTlRFUixcbiAgICAgICAgICAgICAgICAgICAgaG9yaXpvbnRhbE9yaWdpbjpDZXNpdW0uSG9yaXpvbnRhbE9yaWdpbi5DRU5URVIsXG4gICAgICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogQ2VzaXVtLkNvbG9yLmZyb21Dc3NDb2xvclN0cmluZyhzdHlsZS5saW5lRmlsbFN0eWxlKS53aXRoQWxwaGEoc3R5bGUubGluZUZpbGxBbHBoYSlcbiAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgZmVhdHVyZS5sYWJlbE9wdGlvbnMucHVzaChvcHRpb24pO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDtpPGZlYXR1cmUuc291cmNlQW5nbGVEYXRhLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgICAgICAgICBsZXQgc291cmNlQW5nbGVQb3NpdGlvbiA9IGZlYXR1cmUuc291cmNlQW5nbGVEYXRhW2ldO1xuICAgICAgICAgICAgICAgICAgICBsZXQgb3B0aW9uID0ge1xuICAgICAgICAgICAgICAgICAgICAgICAgc2hvdzpmYWxzZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZXh0OihmZWF0dXJlLmxhYmVsKycnKS5jaGFyQXQoaSksXG4gICAgICAgICAgICAgICAgICAgICAgICBmb250OnN0eWxlLmxpbmVGaWxsRm9udCxcbiAgICAgICAgICAgICAgICAgICAgICAgIHN0eWxlOiBDZXNpdW0uTGFiZWxTdHlsZS5GSUxMLFxuICAgICAgICAgICAgICAgICAgICAgICAgdmVydGljYWxPcmlnaW46Q2VzaXVtLlZlcnRpY2FsT3JpZ2luLkNFTlRFUixcbiAgICAgICAgICAgICAgICAgICAgICAgIGhvcml6b250YWxPcmlnaW46Q2VzaXVtLkhvcml6b250YWxPcmlnaW4uQ0VOVEVSLFxuICAgICAgICAgICAgICAgICAgICAgICAgcm90YXRpb246Q2VzaXVtLk1hdGgudG9SYWRpYW5zKHNvdXJjZUFuZ2xlUG9zaXRpb25bMV0pLFxuICAgICAgICAgICAgICAgICAgICAgICAgZmlsbENvbG9yOiBDZXNpdW0uQ29sb3IuZnJvbUNzc0NvbG9yU3RyaW5nKHN0eWxlLmxpbmVGaWxsU3R5bGUpLndpdGhBbHBoYShzdHlsZS5saW5lRmlsbEFscGhhKVxuICAgICAgICAgICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICAgICAgICAgIC8v5pyJ5o+P6L65XG4gICAgICAgICAgICAgICAgICAgIGlmIChzdHlsZS5saW5lSGFzaE91dGxpbmUgPT0gdHJ1ZSl7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24uc3R5bGUgPUNlc2l1bS5MYWJlbFN0eWxlLkZJTExfQU5EX09VVExJTkU7XG4gICAgICAgICAgICAgICAgICAgICAgICBvcHRpb24ub3V0bGluZUNvbG9yID0gQ2VzaXVtLkNvbG9yLmZyb21Dc3NDb2xvclN0cmluZyhzdHlsZS5saW5lU3Ryb2tlU3R5bGUpLndpdGhBbHBoYShzdHlsZS5saW5lU3Ryb2tlQWxwaGEpLFxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIG9wdGlvbi5vdXRsaW5lV2lkdGggPSBzdHlsZS5saW5lTGluZVdpZHRoO1xuICAgICAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5sYWJlbE9wdGlvbnMucHVzaChvcHRpb24pO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGZlYXR1cmUubGluZVR5cGUgPT0gJ2NvZGUnKXtcbiAgICAgICAgICAgIGxldCBzdHlsZSA9IHRoaXMuc3R5bGVNYXBbZmVhdHVyZS5zdHlsZUlkXTtcblxuICAgICAgICAgICAgbGV0IG9wdGlvbiA9IHtcbiAgICAgICAgICAgICAgICBzaG93OmZhbHNlLFxuICAgICAgICAgICAgICAgIGRpc2FibGVEZXB0aFRlc3REaXN0YW5jZTpOdW1iZXIuUE9TSVRJVkVfSU5GSU5JVFksXG4gICAgICAgICAgICAgICAgdGV4dDpmZWF0dXJlLmxhYmVsKycnLFxuICAgICAgICAgICAgICAgIGZvbnQ6c3R5bGUuY29kZUxpbmVGaWxsRm9udCxcbiAgICAgICAgICAgICAgICBzdHlsZTogQ2VzaXVtLkxhYmVsU3R5bGUuRklMTCxcbiAgICAgICAgICAgICAgICB2ZXJ0aWNhbE9yaWdpbjpDZXNpdW0uVmVydGljYWxPcmlnaW4uQ0VOVEVSLFxuICAgICAgICAgICAgICAgIGhvcml6b250YWxPcmlnaW46Q2VzaXVtLkhvcml6b250YWxPcmlnaW4uQ0VOVEVSLFxuICAgICAgICAgICAgICAgIGZpbGxDb2xvcjogQ2VzaXVtLkNvbG9yLmZyb21Dc3NDb2xvclN0cmluZyhzdHlsZS5jb2RlTGluZUZpbGxTdHlsZSkud2l0aEFscGhhKHN0eWxlLmNvZGVMaW5lRmlsbEFscGhhKVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgLy/og4zmma/moYZcbiAgICAgICAgICAgIG9wdGlvbi5zaG93QmFja2dyb3VuZCA9IHRydWU7XG4gICAgICAgICAgICBvcHRpb24uYmFja2dyb3VuZENvbG9yID1DZXNpdW0uQ29sb3IuZnJvbUNzc0NvbG9yU3RyaW5nKHN0eWxlLmNvZGVCYWNrZ3JvdW5kQ29sb3IpLndpdGhBbHBoYShzdHlsZS5jb2RlQmFja2dyb3VuZEFscGhhKTtcbiAgICAgICAgICAgIG9wdGlvbi5iYWNrZ3JvdW5kUGFkZGluZyA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMihzdHlsZS5jb2RlTGluZUJhY2tncm91bmRHYXAsIHN0eWxlLmNvZGVMaW5lQmFja2dyb3VuZEdhcCk7XG5cbiAgICAgICAgICAgIC8v5pyJ5o+P6L65XG4gICAgICAgICAgICBpZihzdHlsZS5jb2RlTGluZUhhc2hPdXRsaW5lID09IHRydWUpe1xuICAgICAgICAgICAgICAgIG9wdGlvbi5zdHlsZSA9Q2VzaXVtLkxhYmVsU3R5bGUuRklMTF9BTkRfT1VUTElORTtcbiAgICAgICAgICAgICAgICBvcHRpb24ub3V0bGluZUNvbG9yID0gQ2VzaXVtLkNvbG9yLmZyb21Dc3NDb2xvclN0cmluZyhzdHlsZS5jb2RlTGluZVN0cm9rZVN0eWxlKS53aXRoQWxwaGEoc3R5bGUuY29kZUxpbmVTdHJva2VBbHBoYSksXG4gICAgICAgICAgICAgICAgICAgIG9wdGlvbi5vdXRsaW5lV2lkdGggPSBzdHlsZS5jb2RlTGluZUxpbmVXaWR0aCsyO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBmZWF0dXJlLmxhYmVsT3B0aW9ucy5wdXNoKG9wdGlvbik7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKlxuICAgICAqIEBwYXJhbSBmZWF0dXJlXG4gICAgICovXG4gICAgdG9CaWxsYm9hcmRPcHRpb24oaW1hZ2Usc3R5bGUpIHtcbiAgICAgICAgbGV0IHdpZHRoID0gc3R5bGUuZ3JhcGhpY1dpZHRoO1xuICAgICAgICBsZXQgaGVpZ2h0ID0gc3R5bGUuZ3JhcGhpY0hlaWdodDtcblxuICAgICAgICBpZighd2lkdGggfHwgIWhlaWdodCl7XG4gICAgICAgICAgICB3aWR0aCA9IGltYWdlLndpZHRoO1xuICAgICAgICAgICAgaGVpZ2h0ID0gaW1hZ2UuaGVpZ2h0O1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGJpbGxib2FyZE9wdGlvbiA9IHtcbiAgICAgICAgICAgIHNob3c6ZmFsc2UsXG4gICAgICAgICAgICBkaXNhYmxlRGVwdGhUZXN0RGlzdGFuY2U6TnVtYmVyLlBPU0lUSVZFX0lORklOSVRZLFxuICAgICAgICAgICAgaW1hZ2U6aW1hZ2UsXG4gICAgICAgICAgICB3aWR0aDp3aWR0aCxcbiAgICAgICAgICAgIGhlaWdodDpoZWlnaHRcbiAgICAgICAgfTtcbiAgICAgICAgcmV0dXJuIGJpbGxib2FyZE9wdGlvbjtcbiAgICB9XG5cblxuXG4gICAgYWRkVG9NYXAoKXtcbiAgICAgICAgLy8gY29uc29sZS50aW1lKCfmnoTlu7rnu5jliLblr7nosaHlubbmt7vliqDliLDnu5jliLbliJfooajkuK0nKTtcbiAgICAgICAgaWYodGhpcy5zdGF0ZSA9PSBCRUdJTil7XG4gICAgICAgICAgICB0aGlzLnRvRHJhd0xhYmVsKCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZih0aGlzLmxhYmVsQ29sbGVjdGlvbi5fbGFiZWxzLmxlbmd0aCA+MCl7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnByaW1pdGl2ZXMuYWRkKHRoaXMubGFiZWxDb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKHRoaXMucm9hZExhYmVsQ29sbGVjdGlvbi5fbGFiZWxzLmxlbmd0aCA+MCkge1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5wcmltaXRpdmVzLmFkZCh0aGlzLnJvYWRMYWJlbENvbGxlY3Rpb24pO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuYmlsbGJvYXJkQ29sbGVjdGlvbi5fYmlsbGJvYXJkcy5sZW5ndGggPjApIHtcbiAgICAgICAgICAgIHRoaXMuc2NlbmUucHJpbWl0aXZlcy5hZGQodGhpcy5iaWxsYm9hcmRDb2xsZWN0aW9uKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMudXBkYXRlTm93KCk7XG4gICAgICAgIC8vIGNvbnNvbGUudGltZUVuZCgn5p6E5bu657uY5Yi25a+56LGh5bm25re75Yqg5Yiw57uY5Yi25YiX6KGo5LitJyk7XG4gICAgICAgIC8vIGNvbnNvbGUubG9nKCfms6jorrDkuKrmlbDvvJonK3RoaXMuZmVhdHVyZXMubGVuZ3RoKTtcblxuICAgICAgICB0aGlzLnN0YXRlID0gQURERUQ7XG4gICAgfVxuXG4gICAgdG9EcmF3TGFiZWwoKXtcbiAgICAgICAgZm9yKGxldCBpID0wO2k8dGhpcy5mZWF0dXJlcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGxldCBmZWF0dXJlICA9IHRoaXMuZmVhdHVyZXNbaV07XG4gICAgICAgICAgICBmZWF0dXJlLmxhYmVscyA9IFtdO1xuICAgICAgICAgICAgaWYoZmVhdHVyZS50eXBlID09IDEpe1xuICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7ajxmZWF0dXJlLmxhYmVsT3B0aW9ucy5sZW5ndGg7aisrKXtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5sYWJlbHMucHVzaCh0aGlzLmxhYmVsQ29sbGVjdGlvbi5hZGQoZmVhdHVyZS5sYWJlbE9wdGlvbnNbal0pKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYoZmVhdHVyZS5pY29uSW1nKXtcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5iaWxsYm9hcmQgPSB0aGlzLmJpbGxib2FyZENvbGxlY3Rpb24uYWRkKGZlYXR1cmUuYmlsbGJvYXJkT3B0aW9uKTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8vIGlmKGZlYXR1cmUudHlwZSA9PSAyKXtcbiAgICAgICAgICAgIC8vICAgICBpZihmZWF0dXJlLmxpbmVUeXBlID09ICd0ZXh0Jyl7XG4gICAgICAgICAgICAvLyAgICAgICAgIGZvcihsZXQgayA9IDA7azxmZWF0dXJlLmxhYmVsT3B0aW9ucy5sZW5ndGg7aysrKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGZlYXR1cmUubGFiZWxzLnB1c2godGhpcy5yb2FkTGFiZWxDb2xsZWN0aW9uLmFkZChmZWF0dXJlLmxhYmVsT3B0aW9uc1trXSkpO1xuICAgICAgICAgICAgLy8gICAgICAgICB9XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy9cbiAgICAgICAgICAgIC8vICAgICBpZihmZWF0dXJlLmxpbmVUeXBlID09ICdjb2RlJyl7XG4gICAgICAgICAgICAvLyAgICAgICAgIGZvcihsZXQgbSA9IDA7bTxmZWF0dXJlLmxhYmVsT3B0aW9ucy5sZW5ndGg7bSsrKXtcbiAgICAgICAgICAgIC8vICAgICAgICAgICAgIGZlYXR1cmUubGFiZWxzLnB1c2godGhpcy5sYWJlbENvbGxlY3Rpb24uYWRkKGZlYXR1cmUubGFiZWxPcHRpb25zW21dKSk7XG4gICAgICAgICAgICAvLyAgICAgICAgIH1cbiAgICAgICAgICAgIC8vICAgICB9XG4gICAgICAgICAgICAvLyB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICB1cGRhdGVOb3coKXtcbiAgICAgICAgaWYodGhpcy5sYWJlbENvbGxlY3Rpb24uX2xhYmVscy5sZW5ndGggPjApe1xuICAgICAgICAgICAgdGhpcy5sYWJlbENvbGxlY3Rpb24udXBkYXRlKHRoaXMuc2NlbmUuX2ZyYW1lU3RhdGUpO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYodGhpcy5yb2FkTGFiZWxDb2xsZWN0aW9uLl9sYWJlbHMubGVuZ3RoID4wKSB7XG4gICAgICAgICAgICB0aGlzLnJvYWRMYWJlbENvbGxlY3Rpb24udXBkYXRlKHRoaXMuc2NlbmUuX2ZyYW1lU3RhdGUpO1xuICAgICAgICB9XG4gICAgICAgIGlmKHRoaXMuYmlsbGJvYXJkQ29sbGVjdGlvbi5fYmlsbGJvYXJkcy5sZW5ndGggPjApIHtcbiAgICAgICAgICAgIHRoaXMuYmlsbGJvYXJkQ29sbGVjdGlvbi51cGRhdGUodGhpcy5zY2VuZS5fZnJhbWVTdGF0ZSk7XG4gICAgICAgIH1cblxuICAgIH1cblxuICAgIHJlbW92ZSgpe1xuICAgICAgICBpZih0aGlzLnN0YXRlID09QURERUQpe1xuICAgICAgICAgICAgdGhpcy5zY2VuZS5wcmltaXRpdmVzLnJlbW92ZSh0aGlzLmxhYmVsQ29sbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnByaW1pdGl2ZXMucmVtb3ZlKHRoaXMucm9hZExhYmVsQ29sbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnNjZW5lLnByaW1pdGl2ZXMucmVtb3ZlKHRoaXMuYmlsbGJvYXJkQ29sbGVjdGlvbik7XG4gICAgICAgICAgICB0aGlzLnN0YXRlID0gUkVNT1ZFRDtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNob3coKXtcbiAgICAgICAgaWYodGhpcy5zdGF0ZSA9PSBCRUdJTiB8fCB0aGlzLnN0YXRlID09IFJFTU9WRUQpe1xuICAgICAgICAgICAgdGhpcy5hZGRUb01hcCgpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgZGVzdHJveSgpe1xuICAgICAgICB0aGlzLnJlbW92ZSgpO1xuICAgICAgICB0aGlzLmxhYmVsQ29sbGVjdGlvbi5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMucm9hZExhYmVsQ29sbGVjdGlvbi5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuYmlsbGJvYXJkQ29sbGVjdGlvbi5kZXN0cm95KCk7XG4gICAgICAgIHRoaXMuaXNEZXN0cm95ID0gdHJ1ZTtcbiAgICB9XG5cbn1cblxubW9kdWxlLmV4cG9ydHMgPSBMYWJlbFRpbGU7XG5cbiIsImNvbnN0IGNvbWJpbmUgPSBDZXNpdW0uY29tYmluZTtcbmNvbnN0IENyZWRpdCAgPSBDZXNpdW0uQ3JlZGl0O1xuY29uc3QgZGVmYXVsdFZhbHVlID0gQ2VzaXVtLmRlZmF1bHRWYWx1ZTtcbmNvbnN0IGRlZmluZWQgPSBDZXNpdW0uZGVmaW5lZDtcbmNvbnN0IERldmVsb3BlckVycm9yID0gQ2VzaXVtLkRldmVsb3BlckVycm9yO1xuY29uc3QgRXZlbnQgPSBDZXNpdW0uRXZlbnQ7XG5jb25zdCBmcmVlemVPYmplY3QgPSBDZXNpdW0uZnJlZXplT2JqZWN0O1xuY29uc3QgaXNBcnJheSA9IEFycmF5LmlzQXJyYXk7XG5jb25zdCBSZWN0YW5nbGUgPSBDZXNpdW0uUmVjdGFuZ2xlO1xuY29uc3QgUmVzb3VyY2UgPSBDZXNpdW0uUmVzb3VyY2U7XG5jb25zdCBXZWJNZXJjYXRvclRpbGluZ1NjaGVtZSA9IENlc2l1bS5XZWJNZXJjYXRvclRpbGluZ1NjaGVtZTtcbmNvbnN0IGRlZmVyID1DZXNpdW0uZGVmZXI7XG5jb25zdCBUaW1lRHluYW1pY0ltYWdlcnkgPSBDZXNpdW0uVGltZUR5bmFtaWNJbWFnZXJ5O1xuY29uc3QgTGFiZWxUaWxlID0gcmVxdWlyZSgnLi9MYWJlbFRpbGUnKTtcbmNvbnN0IEdseXBoU291cmNlID0gcmVxdWlyZSgnLi9nbHlwaC9HbHlwaFNvdXJjZScpO1xuY29uc3QgQXZvaWRUaWxlID0gcmVxdWlyZSgnLi9Bdm9pZFRpbGUnKTtcbmNvbnN0IEJ1ZmZlciA9IHJlcXVpcmUoJy4uLy4uL3V0aWxzL0J1ZmZlcicpO1xuY29uc3QgVmFyaW50UmVhZGVyID0gcmVxdWlyZSgnLi4vLi4vdXRpbHMvVmFyaW50UmVhZGVyJyk7XG5cbmxldCBkZWZhdWx0UGFyYW1ldGVycyA9IHtcbiAgICBzZXJ2aWNlIDogJ1dNVFMnLFxuICAgIHZlcnNpb24gOiAnMS4wLjAnLFxuICAgIHJlcXVlc3QgOiAnR2V0VGlsZSdcbn07XG5cbi8qKlxuICpcbiAqIEBzZWUgQXJjR2lzTWFwU2VydmVySW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIEJpbmdNYXBzSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIEdvb2dsZUVhcnRoRW50ZXJwcmlzZU1hcHNQcm92aWRlclxuICogQHNlZSBPcGVuU3RyZWV0TWFwSW1hZ2VyeVByb3ZpZGVyXG4gKiBAc2VlIFNpbmdsZVRpbGVJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgVGlsZU1hcFNlcnZpY2VJbWFnZXJ5UHJvdmlkZXJcbiAqIEBzZWUgV2ViTWFwU2VydmljZUltYWdlcnlQcm92aWRlclxuICogQHNlZSBVcmxUZW1wbGF0ZUltYWdlcnlQcm92aWRlclxuICovXG5jbGFzcyBMYWJlbFRpbGVTZXJ2aWNlSW1hZ2VyeVByb3ZpZGVye1xuICAgIGNvbnN0cnVjdG9yKHZpZXdlcixvcHRpb25zKSB7XG4gICAgICAgIHRoaXMudmlld2VyID0gdmlld2VyO1xuICAgICAgICB0aGlzLmluZGV4RGJOYW1lID0gJ2hvdXNlXycrdGhpcy5pbmRleERiTmFtZTtcbiAgICAgICAgb3B0aW9ucyA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLCBkZWZhdWx0VmFsdWUuRU1QVFlfT0JKRUNUKTtcbiAgICAgICAgdGhpcy5pZCA9IE1hdGgucmFuZG9tKCk7XG4gICAgICAgIHRoaXMuc2NlbmUgPSB2aWV3ZXIuc2NlbmU7XG4gICAgICAgIHRoaXMubmVlZERlY29kZSA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLm5lZWREZWNvZGUsIGZhbHNlKTtcblxuICAgICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgICBpZiAoIWRlZmluZWQob3B0aW9ucy51cmwpKSB7XG4gICAgICAgICAgICB0aHJvdyBuZXcgRGV2ZWxvcGVyRXJyb3IoJ29wdGlvbnMudXJsIGlzIHJlcXVpcmVkLicpO1xuICAgICAgICB9XG4gICAgICAgIC8vPj5pbmNsdWRlRW5kKCdkZWJ1ZycpO1xuXG4gICAgICAgIGxldCByZXNvdXJjZSA9IFJlc291cmNlLmNyZWF0ZUlmTmVlZGVkKG9wdGlvbnMudXJsKTtcblxuICAgICAgICBsZXQgc3R5bGUgPSBvcHRpb25zLnN0eWxlO1xuICAgICAgICBsZXQgdGlsZU1hdHJpeFNldElEID0gb3B0aW9ucy50aWxlTWF0cml4U2V0SUQ7XG4gICAgICAgIGxldCB1cmwgPSByZXNvdXJjZS51cmw7XG4gICAgICAgIGlmICh1cmwuaW5kZXhPZigneycpID49IDApIHtcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZVZhbHVlcyA9IHtcbiAgICAgICAgICAgICAgICBzdHlsZTogc3R5bGUsXG4gICAgICAgICAgICAgICAgU3R5bGU6IHN0eWxlLFxuICAgICAgICAgICAgICAgIFRpbGVNYXRyaXhTZXQ6IHRpbGVNYXRyaXhTZXRJRFxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVzb3VyY2Uuc2V0VGVtcGxhdGVWYWx1ZXModGVtcGxhdGVWYWx1ZXMpO1xuICAgICAgICAgICAgdGhpcy5fdXNlS3ZwID0gZmFsc2U7XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICByZXNvdXJjZS5zZXRRdWVyeVBhcmFtZXRlcnMoZGVmYXVsdFBhcmFtZXRlcnMpO1xuICAgICAgICAgICAgdGhpcy5fdXNlS3ZwID0gdHJ1ZTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuX3Jlc291cmNlID0gcmVzb3VyY2U7XG4gICAgICAgIHRoaXMuX2xheWVyID0gb3B0aW9ucy5sYXllcjtcbiAgICAgICAgdGhpcy5fc3R5bGUgPSBzdHlsZTtcbiAgICAgICAgdGhpcy5fdGlsZU1hdHJpeFNldElEID0gdGlsZU1hdHJpeFNldElEO1xuICAgICAgICB0aGlzLl90aWxlTWF0cml4TGFiZWxzID0gb3B0aW9ucy50aWxlTWF0cml4TGFiZWxzO1xuICAgICAgICB0aGlzLl9mb3JtYXQgPSBkZWZhdWx0VmFsdWUob3B0aW9ucy5mb3JtYXQsICdpbWFnZS9qcGVnJyk7XG4gICAgICAgIHRoaXMuX3RpbGVEaXNjYXJkUG9saWN5ID0gb3B0aW9ucy50aWxlRGlzY2FyZFBvbGljeTtcblxuICAgICAgICB0aGlzLl90aWxpbmdTY2hlbWUgPSBkZWZpbmVkKG9wdGlvbnMudGlsaW5nU2NoZW1lKSA/IG9wdGlvbnMudGlsaW5nU2NoZW1lIDogbmV3IFdlYk1lcmNhdG9yVGlsaW5nU2NoZW1lKHtlbGxpcHNvaWQ6IG9wdGlvbnMuZWxsaXBzb2lkfSk7XG4gICAgICAgIHRoaXMuX3RpbGVXaWR0aCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnRpbGVXaWR0aCwgMjU2KTtcbiAgICAgICAgdGhpcy5fdGlsZUhlaWdodCA9IGRlZmF1bHRWYWx1ZShvcHRpb25zLnRpbGVIZWlnaHQsIDI1Nik7XG5cbiAgICAgICAgdGhpcy5fbWluaW11bUxldmVsID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMubWluaW11bUxldmVsLCAwKTtcbiAgICAgICAgdGhpcy5fbWF4aW11bUxldmVsID0gb3B0aW9ucy5tYXhpbXVtTGV2ZWw7XG5cbiAgICAgICAgdGhpcy5fcmVjdGFuZ2xlID0gZGVmYXVsdFZhbHVlKG9wdGlvbnMucmVjdGFuZ2xlLCB0aGlzLl90aWxpbmdTY2hlbWUucmVjdGFuZ2xlKTtcbiAgICAgICAgdGhpcy5fZGltZW5zaW9ucyA9IG9wdGlvbnMuZGltZW5zaW9ucztcblxuICAgICAgICBsZXQgdGhhdCA9IHRoaXM7XG4gICAgICAgIHRoaXMuX3JlbG9hZCA9IHVuZGVmaW5lZDtcbiAgICAgICAgaWYgKGRlZmluZWQob3B0aW9ucy50aW1lcykpIHtcbiAgICAgICAgICAgIHRoaXMuX3RpbWVEeW5hbWljSW1hZ2VyeSA9IG5ldyBUaW1lRHluYW1pY0ltYWdlcnkoe1xuICAgICAgICAgICAgICAgIGNsb2NrOiBvcHRpb25zLmNsb2NrLFxuICAgICAgICAgICAgICAgIHRpbWVzOiBvcHRpb25zLnRpbWVzLFxuICAgICAgICAgICAgICAgIHJlcXVlc3RJbWFnZUZ1bmN0aW9uOiBmdW5jdGlvbiAoeCwgeSwgbGV2ZWwsIHJlcXVlc3QsIGludGVydmFsKSB7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXF1ZXN0SW1hZ2UodGhhdCwgeCwgeSwgbGV2ZWwsIHJlcXVlc3QsIGludGVydmFsKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICAgIHJlbG9hZEZ1bmN0aW9uOiBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChkZWZpbmVkKHRoYXQuX3JlbG9hZCkpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoYXQuX3JlbG9hZCgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfSk7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9yZWFkeVByb21pc2UgPSBkZWZlcigpO1xuXG4gICAgICAgIC8vIENoZWNrIHRoZSBudW1iZXIgb2YgdGlsZXMgYXQgdGhlIG1pbmltdW0gbGV2ZWwuICBJZiBpdCdzIG1vcmUgdGhhbiBmb3VyLFxuICAgICAgICAvLyB0aHJvdyBhbiBleGNlcHRpb24sIGJlY2F1c2Ugc3RhcnRpbmcgYXQgdGhlIGhpZ2hlciBtaW5pbXVtXG4gICAgICAgIC8vIGxldmVsIHdpbGwgY2F1c2UgdG9vIG1hbnkgdGlsZXMgdG8gYmUgZG93bmxvYWRlZCBhbmQgcmVuZGVyZWQuXG4gICAgICAgIGxldCBzd1RpbGUgPSB0aGlzLl90aWxpbmdTY2hlbWUucG9zaXRpb25Ub1RpbGVYWShSZWN0YW5nbGUuc291dGh3ZXN0KHRoaXMuX3JlY3RhbmdsZSksIHRoaXMuX21pbmltdW1MZXZlbCk7XG4gICAgICAgIGxldCBuZVRpbGUgPSB0aGlzLl90aWxpbmdTY2hlbWUucG9zaXRpb25Ub1RpbGVYWShSZWN0YW5nbGUubm9ydGhlYXN0KHRoaXMuX3JlY3RhbmdsZSksIHRoaXMuX21pbmltdW1MZXZlbCk7XG4gICAgICAgIGxldCB0aWxlQ291bnQgPSAoTWF0aC5hYnMobmVUaWxlLnggLSBzd1RpbGUueCkgKyAxKSAqIChNYXRoLmFicyhuZVRpbGUueSAtIHN3VGlsZS55KSArIDEpO1xuICAgICAgICAvLz4+aW5jbHVkZVN0YXJ0KCdkZWJ1ZycsIHByYWdtYXMuZGVidWcpO1xuICAgICAgICBpZiAodGlsZUNvdW50ID4gNCkge1xuICAgICAgICAgICAgdGhyb3cgbmV3IERldmVsb3BlckVycm9yKCdUaGUgaW1hZ2VyeSBwcm92aWRlclxcJ3MgcmVjdGFuZ2xlIGFuZCBtaW5pbXVtTGV2ZWwgaW5kaWNhdGUgdGhhdCB0aGVyZSBhcmUgJyArIHRpbGVDb3VudCArICcgdGlsZXMgYXQgdGhlIG1pbmltdW0gbGV2ZWwuIEltYWdlcnkgcHJvdmlkZXJzIHdpdGggbW9yZSB0aGFuIGZvdXIgdGlsZXMgYXQgdGhlIG1pbmltdW0gbGV2ZWwgYXJlIG5vdCBzdXBwb3J0ZWQuJyk7XG4gICAgICAgIH1cbiAgICAgICAgLy8+PmluY2x1ZGVFbmQoJ2RlYnVnJyk7XG5cbiAgICAgICAgdGhpcy5fZXJyb3JFdmVudCA9IG5ldyBFdmVudCgpO1xuXG4gICAgICAgIGxldCBjcmVkaXQgPSBvcHRpb25zLmNyZWRpdDtcbiAgICAgICAgdGhpcy5fY3JlZGl0ID0gdHlwZW9mIGNyZWRpdCA9PT0gJ3N0cmluZycgPyBuZXcgQ3JlZGl0KGNyZWRpdCkgOiBjcmVkaXQ7XG5cbiAgICAgICAgdGhpcy5fc3ViZG9tYWlucyA9IG9wdGlvbnMuc3ViZG9tYWlucztcbiAgICAgICAgaWYgKGlzQXJyYXkodGhpcy5fc3ViZG9tYWlucykpIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YmRvbWFpbnMgPSB0aGlzLl9zdWJkb21haW5zLnNsaWNlKCk7XG4gICAgICAgIH0gZWxzZSBpZiAoZGVmaW5lZCh0aGlzLl9zdWJkb21haW5zKSAmJiB0aGlzLl9zdWJkb21haW5zLmxlbmd0aCA+IDApIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YmRvbWFpbnMgPSB0aGlzLl9zdWJkb21haW5zLnNwbGl0KCcnKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIHRoaXMuX3N1YmRvbWFpbnMgPSBbJ2EnLCAnYicsICdjJ107XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmRhdGFUeXBlID0gJ2JpbmFyeSc7XG4gICAgICAgIGlmKG9wdGlvbnMuaGFzT3duUHJvcGVydHkoJ2RhdGFUeXBlJykpe1xuICAgICAgICAgICAgdGhpcy5kYXRhVHlwZSA9IG9wdGlvbnNbJ2RhdGFUeXBlJ107XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgdGhpcy5kYXRhVHlwZSA9ICdKc29uJztcbiAgICAgICAgfVxuXG5cbiAgICAgICAgdGhpcy5uZWVkRGVjb2RlID0gb3B0aW9ucy5uZWVkRGVjb2RlO1xuICAgICAgICB0aGlzLnBhcnNlVXJsKG9wdGlvbnMudXJsKTtcblxuICAgICAgICBsZXQgcHJvbWlzZXMgPSB0aGlzLmxvYWRTdHlsZSgpO1xuXG4gICAgICAgIGlmKHRoaXMuZGF0YVR5cGUgPT0gJ2JpbmFyeScpe1xuICAgICAgICAgICAgbGV0IHN0eWxlVXJsID0gdGhpcy5ob3N0ICsgJy9tYXBzZXJ2ZXIvc2VydmVySW5mby8nK3RoaXMuc2VydmVybmFtZSsnLmpzb24/JytNYXRoLnJhbmRvbSgpO1xuICAgICAgICAgICAgbGV0IHJlc291cmNlID0gUmVzb3VyY2UuY3JlYXRlSWZOZWVkZWQoc3R5bGVVcmwpO1xuICAgICAgICAgICAgbGV0IHByb21pc2UyID0gcmVzb3VyY2UuZmV0Y2hKc29uKCk7XG4gICAgICAgICAgICBwcm9taXNlcy5wdXNoKHByb21pc2UyKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuaGFzVGVycmFpbiA9IGZhbHNlO1xuICAgICAgICBpZih2aWV3ZXIudGVycmFpblByb3ZpZGVyLm5hbWUgPT0gJ1JHQldvcmxkVGVycmFpblByb3ZpZGVyJyl7XG4gICAgICAgICAgICB0aGlzLmhhc1RlcnJhaW4gPSB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gdGhpcy5kYk1hcCA9IHt9O1xuICAgICAgICAvLyAvL+iOt+WPluacrOWbvuWxguS4i+mdoueahOWbvuWxgmluZGV4RGJOYW1lc1xuICAgICAgICAvLyB0aGlzLmluZGV4RGJOYW1lcyA9IHRoaXMuZ2V0Qm90dG9tUHJvdmlkZXJJbmRleERiTmFtZXMoKTtcbiAgICAgICAgLy8gbGV0IHByb21pc2UzID0gRWxldmF0aW9uVG9vbC5nZXREQk1hcCh0aGlzLmluZGV4RGJOYW1lcyx0aGlzLmRiTWFwKS5wcm9taXNlO1xuICAgICAgICAvLyBwcm9taXNlcy5wdXNoKHByb21pc2UzKTtcblxuICAgICAgICBQcm9taXNlLmFsbChwcm9taXNlcykudGhlbihmdW5jdGlvbihkYXRhKXtcbiAgICAgICAgICAgIGxldCByZXN1bHRzID0gZGF0YVsyXTtcbiAgICAgICAgICAgIGlmIChyZXN1bHRzICYmIHJlc3VsdHMubGF5ZXJNYXApIHtcbiAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckluZm8gPSB7fTtcbiAgICAgICAgICAgICAgICB0aGlzLmxheWVyRmllbGRNYXAgPSB7fTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBrZXkgaW4gcmVzdWx0cy5sYXllck1hcCkge1xuICAgICAgICAgICAgICAgICAgICB0aGlzLnNlcnZlckluZm9ba2V5XSA9IHtcbiAgICAgICAgICAgICAgICAgICAgICAgIGdlb21ldHJ5VHlwZTogcmVzdWx0cy5sYXllck1hcFtrZXldLmdlb21ldHJ5VHlwZSxcbiAgICAgICAgICAgICAgICAgICAgICAgIGZpZWxkc0NvbmZpZzogcmVzdWx0cy5sYXllck1hcFtrZXldLmZpZWxkc1xuICAgICAgICAgICAgICAgICAgICB9O1xuICAgICAgICAgICAgICAgICAgICBpZiAoIXRoaXMubGF5ZXJGaWVsZE1hcFtrZXldKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmxheWVyRmllbGRNYXBba2V5XSA9IHJlc3VsdHMubGF5ZXJNYXBba2V5XS5maWVsZHMubGVuZ3RoO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgdGhpcy5yZWFkeSA9IHtcbiAgICAgICAgICAgICAgICB2YWx1ZSA6IHRydWVcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMuX3JlYWR5UHJvbWlzZS5yZXNvbHZlKHRydWUpO1xuICAgICAgICB9LmJpbmQodGhpcykpO1xuXG5cbiAgICAgICAgdGhpcy5jYWNoZSA9IHt9O1xuICAgICAgICAvL+e6ueeQhlxuICAgICAgICB0aGlzLnRleHR1cmVzID0ge307XG4gICAgICAgIC8v5qC35byPXG4gICAgICAgIHRoaXMuc3R5bGVNYXAgPSB7fTtcblxuXG4gICAgICAgIGlmKG9wdGlvbnMuZ2x5cGhVcmwgICYmIG9wdGlvbnMuZm9udE5hbWUpe1xuICAgICAgICAgICAgdGhpcy5mb250TmFtZSA9IG9wdGlvbnMuZm9udE5hbWU7XG4gICAgICAgICAgICBpZighdGhpcy52aWV3ZXIuZ2x5cGhTb3VyY2Upe1xuICAgICAgICAgICAgICAgIHRoaXMudmlld2VyLmdseXBoU291cmNlID0gbmV3IEdseXBoU291cmNlKG9wdGlvbnMuZ2x5cGhVcmwpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICAvL+S4iuS4gOasoeeahOWdkOagh+eCuVxuICAgICAgICB0aGlzLnByZXZQb3NpdGlvbiA9IG51bGw7XG4gICAgICAgIC8v5LiK5LiA5qyh5riy5p+T55qE55Om54mH5Liq5pWwXG4gICAgICAgIHRoaXMucHJldlJlbmRlclRpbGVzTGVuZ3RoID0gLTE7XG4gICAgICAgIHRoaXMuaW1hZ2UgID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudCgnY2FudmFzJyk7XG4gICAgfVxuXG5cblxuICAgIHVwZGF0ZVN0bGUodXJsKXtcbiAgICAgICAgbGV0IHJlc291cmNlID0gUmVzb3VyY2UuY3JlYXRlSWZOZWVkZWQodXJsKTtcbiAgICAgICAgbGV0IHN0eWxlID0gdGhpcy5fc3R5bGU7XG4gICAgICAgIGxldCB0aWxlTWF0cml4U2V0SUQgPSB0aGlzLnRpbGVNYXRyaXhTZXRJRDtcbiAgICAgICAgdXJsID0gcmVzb3VyY2UudXJsO1xuICAgICAgICBpZiAodXJsLmluZGV4T2YoJ3snKSA+PSAwKSB7XG4gICAgICAgICAgICBsZXQgdGVtcGxhdGVWYWx1ZXMgPSB7XG4gICAgICAgICAgICAgICAgc3R5bGU6IHN0eWxlLFxuICAgICAgICAgICAgICAgIFN0eWxlOiBzdHlsZSxcbiAgICAgICAgICAgICAgICBUaWxlTWF0cml4U2V0OiB0aWxlTWF0cml4U2V0SURcbiAgICAgICAgICAgIH07XG5cbiAgICAgICAgICAgIHJlc291cmNlLnNldFRlbXBsYXRlVmFsdWVzKHRlbXBsYXRlVmFsdWVzKTtcbiAgICAgICAgICAgIHRoaXMuX3VzZUt2cCA9IGZhbHNlO1xuICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgcmVzb3VyY2Uuc2V0UXVlcnlQYXJhbWV0ZXJzKGRlZmF1bHRQYXJhbWV0ZXJzKTtcbiAgICAgICAgICAgIHRoaXMuX3VzZUt2cCA9IHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLl9yZXNvdXJjZSA9IHJlc291cmNlO1xuICAgICAgICB0aGlzLnBhcnNlVXJsKHVybCk7XG5cbiAgICAgICAgUHJvbWlzZS5hbGwodGhpcy5sb2FkU3R5bGUoKSkudGhlbihmdW5jdGlvbigpe1xuICAgICAgICAgICAgZm9yKGxldCBrZXkgaW4gdGhpcy5jYWNoZSl7XG4gICAgICAgICAgICAgICAgbGV0IGxhYmVsVGlsZSA9IHRoaXMuY2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgICBsYWJlbFRpbGUucmVzZXQoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuICAgICAgICAvL+e6ueeQhlxuICAgICAgICB0aGlzLnRleHR1cmVzID0ge307XG4gICAgICAgIC8v5qC35byPXG4gICAgICAgIHRoaXMuc3R5bGVNYXAgPSB7fTtcbiAgICB9XG5cbiAgICBkcmF3KHRpbGVzVG9SZW5kZXIpe1xuICAgICAgICBsZXQgcmVuZGVyVGlsZU1hcCA9IHRoaXMuZ2V0UmVuZGVyVGlsZU1hcCh0aWxlc1RvUmVuZGVyKTtcblxuICAgICAgICAvL+enu+mZpOS4jeaYr+W9k+WJjeWxj+W5leimgeaYvuekuueahOeTpueJh1xuICAgICAgICBmb3IobGV0IGtleSBpbiB0aGlzLmNhY2hlKXtcbiAgICAgICAgICAgIGlmICghcmVuZGVyVGlsZU1hcFtrZXldKXtcbiAgICAgICAgICAgICAgICBsZXQgdGlsZSA9IHRoaXMuY2FjaGVba2V5XTtcbiAgICAgICAgICAgICAgICB0aWxlLnJlbW92ZSgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cblxuICAgICAgICBsZXQgcmVuZGVyVGlsZXMgPSBbXTtcbiAgICAgICAgLy/lop7liqDmnKzmrKHmnIDmlrDnmoTnk6bniYfljrvnu5jliLZcbiAgICAgICAgZm9yKGxldCBuYW1lIGluIHJlbmRlclRpbGVNYXApe1xuICAgICAgICAgICAgbGV0IGxhYmVsVGlsZSA9IHRoaXMuY2FjaGVbbmFtZV07XG4gICAgICAgICAgICBpZihsYWJlbFRpbGUgJiYgbGFiZWxUaWxlLnJlYWR5KXtcbiAgICAgICAgICAgICAgICByZW5kZXJUaWxlcy5wdXNoKGxhYmVsVGlsZSk7XG4gICAgICAgICAgICAgICAgbGFiZWxUaWxlLnNob3codGhpcy5zdHlsZUZ1bik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICB0aGlzLmF2b2lkKHJlbmRlclRpbGVzKTtcbiAgICB9XG5cbiAgICBhdm9pZChyZW5kZXJUaWxlcyl7XG4gICAgICAgIGxldCBwb3NpdGlvbiA9IHRoaXMuc2NlbmUuY2FtZXJhLnBvc2l0aW9uO1xuICAgICAgICBsZXQgZGlzID0gMTAwO1xuICAgICAgICBpZih0aGlzLnByZXZQb3NpdGlvbil7XG4gICAgICAgICAgICBkaXMgPSBDZXNpdW0uQ2FydGVzaWFuMy5kaXN0YW5jZShwb3NpdGlvbix0aGlzLnByZXZQb3NpdGlvbik7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgaGVhZGluZyA9IENlc2l1bS5NYXRoLnRvRGVncmVlcyh0aGlzLnZpZXdlci5jYW1lcmEuaGVhZGluZykudG9GaXhlZCgyKTtcbiAgICAgICAgaWYoaGVhZGluZyA+IDE4MCl7XG4gICAgICAgICAgICBoZWFkaW5nID0gaGVhZGluZyAtIDM2MDtcbiAgICAgICAgfVxuXG5cbiAgICAgICAgaWYoZGlzID4xMCl7XG4gICAgICAgICAgICBBdm9pZFRpbGUuaW5pdChyZW5kZXJUaWxlcyxoZWFkaW5nLHRoaXMuc3R5bGVNYXAsdGhpcy52aWV3ZXIpO1xuICAgICAgICAgICAgdGhpcy5wcmV2UG9zaXRpb24gPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjMocG9zaXRpb24ueCxwb3NpdGlvbi55LHBvc2l0aW9uLnopO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIGlmKGhlYWRpbmcgIT10aGlzLnByZXZIZWFkaW5nIHx8IHRoaXMucHJldlJlbmRlclRpbGVzTGVuZ3RoICE9cmVuZGVyVGlsZXMubGVuZ3RoICYmIHJlbmRlclRpbGVzLmxlbmd0aCAgPiAwKXtcbiAgICAgICAgICAgICAgICBBdm9pZFRpbGUuc2V0VGlsZXMocmVuZGVyVGlsZXMsaGVhZGluZyk7XG4gICAgICAgICAgICAgICAgdGhpcy5wcmV2UmVuZGVyVGlsZXNMZW5ndGggPSByZW5kZXJUaWxlcy5sZW5ndGg7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLnByZXZIZWFkaW5nID0gaGVhZGluZztcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFBdm9pZFRpbGUuaXNGaW5pc2hlZCgpKXtcbiAgICAgICAgICAgIEF2b2lkVGlsZS5hdm9pZFRpbGUoKTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOiOt+WPluW9k+WJjeimgeaYvuekuueahHRpbGVcbiAgICAgKiBAcmV0dXJucyB7e319XG4gICAgICovXG4gICAgZ2V0UmVuZGVyVGlsZU1hcChyZW5kZXJUaWxlcyl7XG4gICAgICAgIGxldCByZW5kZXJUaWxlTWFwID17fTtcbiAgICAgICAgZm9yKGxldCBpID0gMDtpPHJlbmRlclRpbGVzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgbGV0IHRpbGVJbWFnZXJ5cyA9IHJlbmRlclRpbGVzW2ldLmRhdGEuaW1hZ2VyeTtcbiAgICAgICAgICAgIGZvcihsZXQgaiA9IDA7ajx0aWxlSW1hZ2VyeXMubGVuZ3RoO2orKyl7XG4gICAgICAgICAgICAgICAgbGV0IHRpbGVJbWFnZXJ5ID0gdGlsZUltYWdlcnlzW2pdO1xuICAgICAgICAgICAgICAgIGxldCBpbWFnZXJ5ID0gdGlsZUltYWdlcnkucmVhZHlJbWFnZXJ5O1xuICAgICAgICAgICAgICAgIGlmKGltYWdlcnkgJiYgaW1hZ2VyeS5pbWFnZXJ5TGF5ZXIuX2ltYWdlcnlQcm92aWRlci5pZCA9PSB0aGlzLmlkKXtcbiAgICAgICAgICAgICAgICAgICAgbGV0IGtleSA9IGltYWdlcnkueCsnXycraW1hZ2VyeS55KydfJytpbWFnZXJ5LmxldmVsO1xuICAgICAgICAgICAgICAgICAgICByZW5kZXJUaWxlTWFwW2tleV0gPSB0cnVlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuXG4gICAgICAgIHJldHVybiByZW5kZXJUaWxlTWFwO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOino+aekHVybFxuICAgICAqL1xuICAgIHBhcnNlVXJsKHVybCl7XG4gICAgICAgIGxldCB1cmxQYXJ0cyA9IHVybC5zcGxpdCgnPycpO1xuICAgICAgICBsZXQgdXJsUGFydE9uZSA9IHVybFBhcnRzWzBdLnNwbGl0KCcvbWFwc2VydmVyLycpO1xuXG4gICAgICAgIHRoaXMuaG9zdCA9IHVybFBhcnRPbmVbMF07XG4gICAgICAgIGlmKHRoaXMuX3N1YmRvbWFpbnMubGVuZ3RoID4gMCl7XG4gICAgICAgICAgICB0aGlzLmhvc3QgPSB0aGlzLmhvc3QucmVwbGFjZSgne3N9Jyx0aGlzLl9zdWJkb21haW5zWzBdKTtcbiAgICAgICAgfVxuXG4gICAgICAgIHRoaXMuc2VydmVybmFtZSA9IHVybFBhcnRPbmVbMV0uc3BsaXQoJy8nKVsxXTtcblxuICAgICAgICB0aGlzLnF1ZXJ5UGFyYW0gPSB1cmxQYXJ0c1sxXTtcbiAgICAgICAgbGV0IHBhcmFtcyA9IHRoaXMucXVlcnlQYXJhbS5zcGxpdCgnJicpO1xuICAgICAgICBmb3IobGV0IGkgPSAwO2k8cGFyYW1zLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgbGV0IHBhcmFtID0gcGFyYW1zW2ldO1xuICAgICAgICAgICAgbGV0IGtleVZhbHVlID0gcGFyYW0uc3BsaXQoJz0nKTtcbiAgICAgICAgICAgIGlmKGtleVZhbHVlWzBdID09ICdzdHlsZUlkJyl7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZUlkID0ga2V5VmFsdWVbMV07XG4gICAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfTtcblxuICAgIGxvYWRTdHlsZSgpe1xuICAgICAgICBsZXQgc3R5bGVVcmwgPSB0aGlzLmhvc3QgKyAnL21hcHNlcnZlci9zdHlsZUluZm8vJyt0aGlzLnNlcnZlcm5hbWUrJy8nK3RoaXMuc3R5bGVJZCsnL2xhYmVsL3N0eWxlLmpzPycrTWF0aC5yYW5kb20oKTtcbiAgICAgICAgbGV0IHJlc291cmNlID0gUmVzb3VyY2UuY3JlYXRlSWZOZWVkZWQoc3R5bGVVcmwpO1xuICAgICAgICBsZXQgcHJvbWlzZTEgPSByZXNvdXJjZS5mZXRjaFRleHQoKS50aGVuKGZ1bmN0aW9uKHJlc3VsdCl7XG4gICAgICAgICAgICBpZih0aGlzLmRhdGFUeXBlID09ICdiaW5hcnknKXtcbiAgICAgICAgICAgICAgICB0aGlzLnN0eWxlRnVuID0gbmV3IEZ1bmN0aW9uKFwicmVuZGVyXCIsXCJsZXZlbFwiLCByZXN1bHQpO1xuICAgICAgICAgICAgfWVsc2V7XG4gICAgICAgICAgICAgICAgdGhpcy5zdHlsZUZ1biA9IG5ldyBGdW5jdGlvbihcImRyYXdlclwiLFwibGV2ZWxcIiwgcmVzdWx0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfS5iaW5kKHRoaXMpKTtcblxuXG4gICAgICAgIGxldCBkZWZlcnJlZCA9IGRlZmVyKCk7XG4gICAgICAgIGxldCBpbWFnZVVybCA9IHRoaXMuaG9zdCArICcvbWFwc2VydmVyL3N0eWxlSW5mby8nK3RoaXMuc2VydmVybmFtZSsnLycrdGhpcy5zdHlsZUlkKycvbGFiZWwvdGV4dHVyZS5qcz8nK01hdGgucmFuZG9tKCk7XG4gICAgICAgIGxldCBpbWFnZVJlc291cmNlID0gUmVzb3VyY2UuY3JlYXRlSWZOZWVkZWQoaW1hZ2VVcmwpO1xuICAgICAgICBpbWFnZVJlc291cmNlLmZldGNoVGV4dCgpLnRoZW4oZnVuY3Rpb24oZGVmZXJyZWQscmVzdWx0KXtcbiAgICAgICAgICAgIGxldCB0ZXh0dXJlcyA9IEpTT04ucGFyc2UocmVzdWx0KTtcbiAgICAgICAgICAgIGxldCB0b3RhbENvdW50ID0gMDtcbiAgICAgICAgICAgIGZvcihsZXQgaSBpbiB0ZXh0dXJlcyl7XG4gICAgICAgICAgICAgICAgdG90YWxDb3VudCsrO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBpZih0b3RhbENvdW50ID09IDApe1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUoKTtcbiAgICAgICAgICAgICAgICByZXR1cm47XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGxldCBjb3VudCA9IDA7XG4gICAgICAgICAgICBmb3IobGV0IGtleSBpbiB0ZXh0dXJlcyl7XG4gICAgICAgICAgICAgICAgbGV0IGltZyA9IG5ldyBJbWFnZSgpO1xuICAgICAgICAgICAgICAgIGltZy5uYW1lID0ga2V5O1xuICAgICAgICAgICAgICAgIGltZy5vbmxvYWQgPSBmdW5jdGlvbihkYXRhKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvdW50Kys7XG4gICAgICAgICAgICAgICAgICAgIGxldCBuYW1lID0gZGF0YS50YXJnZXQubmFtZTtcbiAgICAgICAgICAgICAgICAgICAgdGhpcy50ZXh0dXJlc1tuYW1lXSA9ZGF0YS50YXJnZXQ7XG4gICAgICAgICAgICAgICAgICAgIGlmKGNvdW50ID09IHRvdGFsQ291bnQpe1xuICAgICAgICAgICAgICAgICAgICAgICAgZGVmZXJyZWQucmVzb2x2ZSgpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgfS5iaW5kKHRoaXMpO1xuICAgICAgICAgICAgICAgIGltZy5zcmMgPSB0ZXh0dXJlc1trZXldO1xuICAgICAgICAgICAgfVxuICAgICAgICB9LmJpbmQodGhpcyxkZWZlcnJlZCkpO1xuXG4gICAgICAgIHJldHVybiBbcHJvbWlzZTEsZGVmZXJyZWQucHJvbWlzZV07XG4gICAgfTtcblxuICAgIHJlcXVlc3RJbWFnZU5vdyhpbWFnZXJ5UHJvdmlkZXIsIGNvbCwgcm93LCBsZXZlbCwgcmVxdWVzdCwgaW50ZXJ2YWwpIHtcbiAgICAgICAgbGV0IGxhYmVscyA9IGltYWdlcnlQcm92aWRlci5fdGlsZU1hdHJpeExhYmVscztcbiAgICAgICAgbGV0IHRpbGVNYXRyaXggPSBkZWZpbmVkKGxhYmVscykgPyBsYWJlbHNbbGV2ZWxdIDogbGV2ZWwudG9TdHJpbmcoKTtcbiAgICAgICAgbGV0IHN1YmRvbWFpbnMgPSBpbWFnZXJ5UHJvdmlkZXIuX3N1YmRvbWFpbnM7XG4gICAgICAgIGxldCBzdGF0aWNEaW1lbnNpb25zID0gaW1hZ2VyeVByb3ZpZGVyLl9kaW1lbnNpb25zO1xuICAgICAgICBsZXQgZHluYW1pY0ludGVydmFsRGF0YSA9IGRlZmluZWQoaW50ZXJ2YWwpID8gaW50ZXJ2YWwuZGF0YSA6IHVuZGVmaW5lZDtcblxuICAgICAgICBsZXQgcmVzb3VyY2U7XG4gICAgICAgIGlmICghaW1hZ2VyeVByb3ZpZGVyLl91c2VLdnApIHtcbiAgICAgICAgICAgIGxldCB0ZW1wbGF0ZVZhbHVlcyA9IHtcbiAgICAgICAgICAgICAgICB6OiB0aWxlTWF0cml4LFxuICAgICAgICAgICAgICAgIHk6IHJvdy50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHg6IGNvbC50b1N0cmluZygpLFxuICAgICAgICAgICAgICAgIHM6IHN1YmRvbWFpbnNbKGNvbCArIHJvdyArIGxldmVsKSAlIHN1YmRvbWFpbnMubGVuZ3RoXVxuICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgcmVzb3VyY2UgPSBpbWFnZXJ5UHJvdmlkZXIuX3Jlc291cmNlLmdldERlcml2ZWRSZXNvdXJjZSh7XG4gICAgICAgICAgICAgICAgcmVxdWVzdDogcmVxdWVzdFxuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgICByZXNvdXJjZS5zZXRUZW1wbGF0ZVZhbHVlcyh0ZW1wbGF0ZVZhbHVlcyk7XG5cbiAgICAgICAgICAgIGlmIChkZWZpbmVkKHN0YXRpY0RpbWVuc2lvbnMpKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2Uuc2V0VGVtcGxhdGVWYWx1ZXMoc3RhdGljRGltZW5zaW9ucyk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChkZWZpbmVkKGR5bmFtaWNJbnRlcnZhbERhdGEpKSB7XG4gICAgICAgICAgICAgICAgcmVzb3VyY2Uuc2V0VGVtcGxhdGVWYWx1ZXMoZHluYW1pY0ludGVydmFsRGF0YSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAvLyBidWlsZCBLVlAgcmVxdWVzdFxuICAgICAgICAgICAgbGV0IHF1ZXJ5ID0ge307XG4gICAgICAgICAgICBxdWVyeS50aWxlbWF0cml4ID0gdGlsZU1hdHJpeDtcbiAgICAgICAgICAgIHF1ZXJ5LmxheWVyID0gaW1hZ2VyeVByb3ZpZGVyLl9sYXllcjtcbiAgICAgICAgICAgIHF1ZXJ5LnN0eWxlID0gaW1hZ2VyeVByb3ZpZGVyLl9zdHlsZTtcbiAgICAgICAgICAgIHF1ZXJ5LnRpbGVyb3cgPSByb3c7XG4gICAgICAgICAgICBxdWVyeS50aWxlY29sID0gY29sO1xuICAgICAgICAgICAgcXVlcnkudGlsZW1hdHJpeHNldCA9IGltYWdlcnlQcm92aWRlci5fdGlsZU1hdHJpeFNldElEO1xuICAgICAgICAgICAgcXVlcnkuZm9ybWF0ID0gaW1hZ2VyeVByb3ZpZGVyLl9mb3JtYXQ7XG5cbiAgICAgICAgICAgIGlmIChkZWZpbmVkKHN0YXRpY0RpbWVuc2lvbnMpKSB7XG4gICAgICAgICAgICAgICAgcXVlcnkgPSBjb21iaW5lKHF1ZXJ5LCBzdGF0aWNEaW1lbnNpb25zKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgaWYgKGRlZmluZWQoZHluYW1pY0ludGVydmFsRGF0YSkpIHtcbiAgICAgICAgICAgICAgICBxdWVyeSA9IGNvbWJpbmUocXVlcnksIGR5bmFtaWNJbnRlcnZhbERhdGEpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmVzb3VyY2UgPSBpbWFnZXJ5UHJvdmlkZXIuX3Jlc291cmNlLmdldERlcml2ZWRSZXNvdXJjZSh7XG4gICAgICAgICAgICAgICAgcXVlcnlQYXJhbWV0ZXJzOiBxdWVyeSxcbiAgICAgICAgICAgICAgICByZXF1ZXN0OiByZXF1ZXN0XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgfVxuICAgICAgICBsZXQgZGVmZXJyZWQgPSBkZWZlcigpO1xuICAgICAgICBsZXQgeHl6ID0ge3g6Y29sLHk6cm93LHo6bGV2ZWx9O1xuICAgICAgICBsZXQgc3VjY2VzcyA9IHRoaXMucmVxdWVzdEpzb25EYXRhKGRlZmVycmVkLGltYWdlcnlQcm92aWRlciwgcmVzb3VyY2UseHl6KTtcbiAgICAgICAgaWYoIXN1Y2Nlc3Mpe1xuICAgICAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZGVmZXJyZWQucHJvbWlzZTtcbiAgICB9XG5cbiAgICAgICAgcmVxdWVzdEpzb25EYXRhKGRlZmVycmVkLGltYWdlcnlQcm92aWRlciwgdXJsLHh5eil7XG4gICAgICAgIGxldCByZXNvdXJjZSA9IFJlc291cmNlLmNyZWF0ZUlmTmVlZGVkKHVybCk7XG4gICAgICAgIGxldCBwcm9taXNlcyA9W107XG4gICAgICAgIGxldCBqc29uUHJvbWlzZSA9IG51bGw7XG4gICAgICAgIGlmKHRoaXMuZGF0YVR5cGUgPT0gJ2JpbmFyeScpe1xuICAgICAgICAgICAganNvblByb21pc2UgPSByZXNvdXJjZS5mZXRjaEFycmF5QnVmZmVyKCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAganNvblByb21pc2UgPSByZXNvdXJjZS5mZXRjaEpzb24oKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKCFqc29uUHJvbWlzZSl7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgIH1cblxuICAgICAgICBwcm9taXNlcy5wdXNoKGpzb25Qcm9taXNlKTtcblxuICAgICAgICBsZXQgbGV2ZWwgPSB1cmwuX3RlbXBsYXRlVmFsdWVzLno7XG5cbiAgICAgICAgUHJvbWlzZS5hbGwocHJvbWlzZXMpLnRoZW4oZnVuY3Rpb24oZGVmZXJyZWQseHl6LGxldmVsLHJlc3VsdCl7XG4gICAgICAgICAgICBsZXQgZGF0YSA9IHJlc3VsdFswXTtcbiAgICAgICAgICAgIGlmKCFkYXRhKXtcbiAgICAgICAgICAgICAgICBkZWZlcnJlZC5yZXNvbHZlKHRoaXMuaW1hZ2UpOztcbiAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgbGV0IGxhYmVsVGlsZSA9IHRoaXMuanNvblByb21pc2VSZXN1bHQoeHl6LGxldmVsLGRhdGEpO1xuICAgICAgICAgICAgbGV0IHN0YWNrcyA9IHRoaXMuZ2V0U3RhY2tzKGxhYmVsVGlsZS5mZWF0dXJlcyk7XG4gICAgICAgICAgICB0aGlzLmdldEdseXBocyhzdGFja3MsZnVuY3Rpb24oZGVmZXJyZWQsbGFiZWxUaWxlLGdseXBocyl7XG4gICAgICAgICAgICAgICAgbGFiZWxUaWxlLmxhYmVsQ29sbGVjdGlvbi5zZXRHbHlwaHMoZ2x5cGhzKTtcbiAgICAgICAgICAgICAgICBsYWJlbFRpbGUucm9hZExhYmVsQ29sbGVjdGlvbi5zZXRHbHlwaHMoZ2x5cGhzKTtcbiAgICAgICAgICAgICAgICBsYWJlbFRpbGUucmVhZHkgPSB0cnVlO1xuICAgICAgICAgICAgICAgIGRlZmVycmVkLnJlc29sdmUodGhpcy5pbWFnZSk7XG4gICAgICAgICAgICB9LmJpbmQodGhpcyxkZWZlcnJlZCxsYWJlbFRpbGUpKTtcbiAgICAgICAgfS5iaW5kKHRoaXMsZGVmZXJyZWQseHl6LGxldmVsKSk7XG4gICAgICAgIHJldHVybiB0cnVlO1xuICAgIH1cblxuICAgIGpzb25Qcm9taXNlUmVzdWx0KHh5eixsZXZlbCxkYXRhKXtcbiAgICAgICAgaWYodGhpcy5kYXRhVHlwZSA9PSAnYmluYXJ5Jyl7XG4gICAgICAgICAgICBkYXRhID0gdGhpcy50b0J1ZmZlcihkYXRhKTtcbiAgICAgICAgICAgIGRhdGEgPSB0aGlzLnBhcnNlQmluYXJ5RGF0YShkYXRhKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBsYWJlbERhdGEgPSAgZGF0YS5sYWJlbD8gZGF0YS5sYWJlbDpkYXRhO1xuXG4gICAgICAgIGlmKGRhdGEgIT17fSl7XG4gICAgICAgICAgICBsZXQgeCA9IHh5ei54O1xuICAgICAgICAgICAgbGV0IHkgPSB4eXoueTtcbiAgICAgICAgICAgIGxldCB6ID0geHl6Lno7XG5cbiAgICAgICAgICAgIGxldCByZWN0YW5nbGUgPSB0aGlzLl90aWxpbmdTY2hlbWUudGlsZVhZVG9SZWN0YW5nbGUoeCwgeSwgeik7XG4gICAgICAgICAgICBsZXQgbmFtZSA9IHgrJ18nK3krJ18nK3o7XG4gICAgICAgICAgICBsZXQgbGFiZWxUaWxlID0gdGhpcy5jYWNoZVtuYW1lXTtcbiAgICAgICAgICAgIGlmKCFsYWJlbFRpbGUpe1xuICAgICAgICAgICAgICAgIGxhYmVsVGlsZSA9IG5ldyBMYWJlbFRpbGUobmFtZSx4eXosdGhpcy50aWxlV2lkdGgscmVjdGFuZ2xlLGxhYmVsRGF0YSx0aGlzLmluZGV4RGJOYW1lcyx0aGlzLnN0eWxlRnVuLHRoaXMuZGF0YVR5cGUsXG4gICAgICAgICAgICAgICAgICAgIGxldmVsLHRoaXMuc3R5bGVNYXAsdGhpcy50ZXh0dXJlcyx0aGlzLnNjZW5lKTtcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlW2xhYmVsVGlsZS5uYW1lXSA9IGxhYmVsVGlsZTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgcmV0dXJuIGxhYmVsVGlsZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHRvQnVmZmVyKGFiKSB7XG4gICAgICAgIGxldCBidWYgPSBuZXcgQnVmZmVyKGFiLmJ5dGVMZW5ndGgpO1xuICAgICAgICBsZXQgdmlldyA9IG5ldyBVaW50OEFycmF5KGFiKTtcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWYubGVuZ3RoOyArK2kpIHtcbiAgICAgICAgICAgIGJ1ZltpXSA9IHZpZXdbaV07XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIGJ1ZjtcbiAgICB9XG5cbiAgICBwYXJzZUJpbmFyeURhdGEoYnVmKXtcbiAgICAgICAgbGV0IHZhbnQgPSBuZXcgVmFyaW50UmVhZGVyKGJ1ZiwgNCwgdGhpcy5sYXllckZpZWxkTWFwKTtcbiAgICAgICAgbGV0IGxheWVyTmFtZUFyciA9IHZhbnQuZ2V0QWxsTGF5ZXJOYW1lcygpO1xuICAgICAgICBsZXQgbGF5ZXJzID0ge307XG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGF5ZXJOYW1lQXJyLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBsZXQgbGF5ZXJOYW1lID0gbGF5ZXJOYW1lQXJyW2ldO1xuICAgICAgICAgICAgbGF5ZXJzW2xheWVyTmFtZV0gPSB7XG4gICAgICAgICAgICAgICAgZmVhdHVyZXM6IFtdLFxuICAgICAgICAgICAgICAgIGZpZWxkc0NvbmZpZzogdGhpcy5zZXJ2ZXJJbmZvW2xheWVyTmFtZV0gPyB0aGlzLnNlcnZlckluZm9bbGF5ZXJOYW1lXS5maWVsZHNDb25maWcgOiB7fSxcbiAgICAgICAgICAgICAgICB0eXBlOiAxXG4gICAgICAgICAgICB9O1xuXG4gICAgICAgICAgICBsZXQgZ2VvbWV0cnlUeXBlID12YW50LmdldEdlb21ldHJ5VHlwZShsYXllck5hbWUpO1xuICAgICAgICAgICAgbGV0IHByb3BzID0gdmFudC5nZXRMYXllclBybyhsYXllck5hbWUpO1xuICAgICAgICAgICAgaWYgKGdlb21ldHJ5VHlwZS50b0xvd2VyQ2FzZSgpID09IFwicG9pbnRcIikge1xuICAgICAgICAgICAgICAgIGxheWVyc1tsYXllck5hbWVdLnR5cGUgPSAxO1xuICAgICAgICAgICAgfSBlbHNlIGlmIChnZW9tZXRyeVR5cGUudG9Mb3dlckNhc2UoKSA9PSBcImxpbmVcIiB8fFxuICAgICAgICAgICAgICAgIGdlb21ldHJ5VHlwZS50b0xvd2VyQ2FzZSgpID09IFwibGluZXN0cmluZ1wiIHx8IGdlb21ldHJ5VHlwZS50b0xvd2VyQ2FzZSgpID09IFwibXVsdGlsaW5lc3RyaW5nXCIpIHtcbiAgICAgICAgICAgICAgICBsYXllcnNbbGF5ZXJOYW1lXS50eXBlID0gMjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGlmIChwcm9wcyAmJiBwcm9wcy5sZW5ndGggPiAwKSB7XG4gICAgICAgICAgICAgICAgZm9yIChsZXQgayA9IDA7IGsgPCBwcm9wcy5sZW5ndGg7IGsrKykge1xuICAgICAgICAgICAgICAgICAgICBsZXQgdERhdGFBcnIgPSBbXTtcbiAgICAgICAgICAgICAgICAgICAgdERhdGFBcnIucHVzaChnZW9tZXRyeVR5cGUpO1xuICAgICAgICAgICAgICAgICAgICB0RGF0YUFyci5wdXNoKHByb3BzW2tdKTtcbiAgICAgICAgICAgICAgICAgICAgdERhdGFBcnIucHVzaCh2YW50LmdldENvb3JkaW5hdGVzQnlJbmRleChsYXllck5hbWUsIGssIDEwKSk7XG4gICAgICAgICAgICAgICAgICAgIGxheWVyc1tsYXllck5hbWVdLmZlYXR1cmVzLnB1c2godERhdGFBcnIpO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gbGF5ZXJzO1xuICAgIH1cblxuICAgIC8v6I635Y+W5paH5a2X55qEY29kZeeggSzpu5jorqTlj6rmlK/mjIHkuIDnp43lrZfkvZNcbiAgICBnZXRTdGFja3MoZmVhdHVyZXMpe1xuICAgICAgICBsZXQgc3RhY2sgPSBbXTtcbiAgICAgICAgbGV0IHN0YXRja3MgPSB7fTtcbiAgICAgICAgc3RhdGNrc1t0aGlzLmZvbnROYW1lXSA9IHN0YWNrO1xuICAgICAgICBsZXQgaW5kZXggPSAwO1xuICAgICAgICBmb3IobGV0IGkgPSAwO2k8ZmVhdHVyZXMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBsZXQgbGFiZWwgPSBmZWF0dXJlc1tpXS5sYWJlbDtcbiAgICAgICAgICAgIGlmKGxhYmVsKXtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxhYmVsLmxlbmd0aDsgaisrKSB7XG4gICAgICAgICAgICAgICAgICAgIHN0YWNrW2luZGV4XSA9IGxhYmVsLmNoYXJDb2RlQXQoaik7XG4gICAgICAgICAgICAgICAgICAgIGluZGV4Kys7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy/lpJrliqDkuKrvvJ/lj7dcbiAgICAgICAgc3RhY2tbaW5kZXhdID0gJz8nLmNoYXJDb2RlQXQoMCk7XG4gICAgICAgIHJldHVybiBzdGF0Y2tzO1xuICAgIH1cblxuICAgIC8vIOiOt+WPluWtl+S9k1xuICAgIGdldEdseXBocyhzdGFja3MsIGNhbGxiYWNrKSB7XG4gICAgICAgIGxldCByZW1haW5pbmcgPSBPYmplY3Qua2V5cyhzdGFja3MpLmxlbmd0aDtcbiAgICAgICAgY29uc3QgYWxsR2x5cGhzID0ge307XG5cbiAgICAgICAgZm9yIChjb25zdCBmb250TmFtZSBpbiBzdGFja3MpIHtcbiAgICAgICAgICAgIHRoaXMudmlld2VyLmdseXBoU291cmNlLmdldFNpbXBsZUdseXBocyhmb250TmFtZSwgc3RhY2tzW2ZvbnROYW1lXSwgIGRvbmUpO1xuICAgICAgICB9XG5cbiAgICAgICAgZnVuY3Rpb24gZG9uZShlcnIsIGdseXBocywgZm9udE5hbWUpIHtcbiAgICAgICAgICAgIGlmIChlcnIpIGNvbnNvbGUuZXJyb3IoZXJyKTtcblxuICAgICAgICAgICAgYWxsR2x5cGhzW2ZvbnROYW1lXSA9IGdseXBocztcbiAgICAgICAgICAgIHJlbWFpbmluZy0tO1xuXG4gICAgICAgICAgICBpZiAocmVtYWluaW5nID09PSAwKVxuICAgICAgICAgICAgICAgIGNhbGxiYWNrKGFsbEdseXBocyk7XG4gICAgICAgIH1cbiAgICB9XG5cblxuXG4gICAgLy8gdXBkYXRlVGlsZUVsZXZhdGlvbih4eXosdGlsZVNpemUpe1xuICAgIC8vICAgICAvLyB2YXIgbGFiZWxzID0gdGhpcy5fdGlsZU1hdHJpeExhYmVscztcbiAgICAvLyAgICAgLy8gdmFyIHRpbGVNYXRyaXggPSBkZWZpbmVkKGxhYmVscykgPyBsYWJlbHNbeHl6LnpdIDogeHl6Lno7XG4gICAgLy8gICAgIGxldCBuYW1lID0geHl6LngrJ18nK3h5ei55KydfJyt4eXouejtcbiAgICAvLyAgICAgbGV0IHRpbGUgPSB0aGlzLmNhY2hlW25hbWVdO1xuICAgIC8vXG4gICAgLy8gICAgIC8v5aaC5p6cbGFiZWznk6bniYfov5jmsqHvvIzmiJbogIXnk6bniYflt7Lnu4/lrZjlnKjvvIzlubbkuJTlt7Lnu4/mnInpq5jnqIvlgLzkuoZcbiAgICAvLyAgICAgaWYoIXRpbGUpe1xuICAgIC8vICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgIC8vICAgICB9XG4gICAgLy9cbiAgICAvLyAgICAgY29uc29sZS5sb2coJ2xhYmVs5Zu+5bGC6YeN6K6+6auY56iL77yaJytuYW1lKTtcbiAgICAvL1xuICAgIC8vICAgICBsZXQga2V5ID0gIHh5ei54KydfJyt4eXoueSsnXycreHl6Lno7XG4gICAgLy8gICAgIGxldCBwcm9taXNlID0gRWxldmF0aW9uVG9vbC5nZXRFbGV2YXRpb24odGhpcy5kYk1hcCx0aGlzLmluZGV4RGJOYW1lcyxrZXkpO1xuICAgIC8vICAgICBwcm9taXNlLnRoZW4oZnVuY3Rpb24obmFtZSxlbGV2YXRpb25EYXRhTWFwKXtcbiAgICAvLyAgICAgICAgIHRpbGUgPSB0aGlzLmNhY2hlW25hbWVdO1xuICAgIC8vICAgICAgICAgaWYodGlsZSl7XG4gICAgLy8gICAgICAgICAgICAgdGlsZS51cGRhdGVFbGV2YXRpb25EYXRhKGVsZXZhdGlvbkRhdGFNYXApO1xuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICB9LmJpbmQodGhpcyxuYW1lKSk7XG4gICAgLy8gICAgIHJldHVybiB0cnVlO1xuICAgIC8vIH1cblxuICAgIGdldCB1cmwoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9yZXNvdXJjZS51cmw7XG4gICAgfVxuXG4gICAgZ2V0IHByb3h5KCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVzb3VyY2UucHJveHk7XG4gICAgfVxuXG4gICAgZ2V0IHRpbGVXaWR0aCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpbGVXaWR0aDtcbiAgICB9XG5cbiAgICBnZXQgdGlsZUhlaWdodCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3RpbGVIZWlnaHQ7XG4gICAgfVxuXG4gICAgZ2V0IG1heGltdW1MZXZlbCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX21heGltdW1MZXZlbDtcbiAgICB9XG5cbiAgICBnZXQgbWluaW11bUxldmVsKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fbWluaW11bUxldmVsO1xuICAgIH1cblxuICAgIGdldCB0aWxpbmdTY2hlbWUoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aWxpbmdTY2hlbWU7XG4gICAgfVxuXG4gICAgZ2V0IHJlY3RhbmdsZSgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX3JlY3RhbmdsZTtcbiAgICB9XG5cbiAgICBnZXQgdGlsZURpc2NhcmRQb2xpY3koKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aWxlRGlzY2FyZFBvbGljeTtcbiAgICB9XG5cbiAgICBnZXQgZXJyb3JFdmVudCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Vycm9yRXZlbnQ7XG4gICAgfVxuXG4gICAgZ2V0IGZvcm1hdCgpIHtcbiAgICAgICAgcmV0dXJuIHRoaXMuX2Zvcm1hdDtcbiAgICB9XG5cbiAgICBnZXQgcmVhZHlQcm9taXNlKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fcmVhZHlQcm9taXNlO1xuICAgIH1cblxuICAgIGdldCBjcmVkaXQoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl9jcmVkaXQ7XG4gICAgfVxuXG4gICAgZ2V0IGhhc0FscGhhQ2hhbm5lbCgpIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgZ2V0IGNsb2NrKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fdGltZUR5bmFtaWNJbWFnZXJ5LmNsb2NrO1xuICAgIH1cblxuICAgIHNldCBjbG9jayh2YWx1ZSkge1xuICAgICAgICB0aGlzLl90aW1lRHluYW1pY0ltYWdlcnkuY2xvY2sgPSB2YWx1ZTtcbiAgICB9XG5cbiAgICBnZXQgdGltZXMoKSB7XG4gICAgICAgIHJldHVybiB0aGlzLl90aW1lRHluYW1pY0ltYWdlcnkudGltZXM7XG4gICAgfVxuXG4gICAgc2V0IHRpbWVzKHZhbHVlKSB7XG4gICAgICAgIHRoaXMuX3RpbWVEeW5hbWljSW1hZ2VyeS50aW1lcyA9IHZhbHVlO1xuICAgIH1cblxuICAgIGdldCBkaW1lbnNpb25zKCkge1xuICAgICAgICByZXR1cm4gdGhpcy5fZGltZW5zaW9ucztcbiAgICB9XG5cbiAgICBzZXQgZGltZW5zaW9ucyh2YWx1ZSl7XG4gICAgICAgIGlmICh0aGlzLl9kaW1lbnNpb25zICE9PSB2YWx1ZSkge1xuICAgICAgICAgICAgdGhpcy5fZGltZW5zaW9ucyA9IHZhbHVlO1xuICAgICAgICAgICAgaWYgKGRlZmluZWQodGhpcy5fcmVsb2FkKSkge1xuICAgICAgICAgICAgICAgIHRoaXMuX3JlbG9hZCgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZ2V0VGlsZUNyZWRpdHMoeCwgeSwgbGV2ZWwpIHtcbiAgICAgICAgcmV0dXJuIHVuZGVmaW5lZDtcbiAgICB9O1xuXG4gICAgcmVxdWVzdEltYWdlKHgsIHksIGxldmVsLCByZXF1ZXN0KSB7XG4gICAgICAgIGxldCByZXN1bHQ7XG4gICAgICAgIGxldCB0aW1lRHluYW1pY0ltYWdlcnkgPSB0aGlzLl90aW1lRHluYW1pY0ltYWdlcnk7XG4gICAgICAgIGxldCBjdXJyZW50SW50ZXJ2YWw7XG5cbiAgICAgICAgLy8gVHJ5IGFuZCBsb2FkIGZyb20gY2FjaGVcbiAgICAgICAgaWYgKGRlZmluZWQodGltZUR5bmFtaWNJbWFnZXJ5KSkge1xuICAgICAgICAgICAgY3VycmVudEludGVydmFsID0gdGltZUR5bmFtaWNJbWFnZXJ5LmN1cnJlbnRJbnRlcnZhbDtcbiAgICAgICAgICAgIHJlc3VsdCA9IHRpbWVEeW5hbWljSW1hZ2VyeS5nZXRGcm9tQ2FjaGUoeCwgeSwgbGV2ZWwsIHJlcXVlc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gQ291bGRuJ3QgbG9hZCBmcm9tIGNhY2hlXG4gICAgICAgIGlmICghZGVmaW5lZChyZXN1bHQpKSB7XG4gICAgICAgICAgICByZXN1bHQgPSB0aGlzLnJlcXVlc3RJbWFnZU5vdyh0aGlzLCB4LCB5LCBsZXZlbCwgcmVxdWVzdCwgY3VycmVudEludGVydmFsKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHdlIGFyZSBhcHByb2FjaGluZyBhbiBpbnRlcnZhbCwgcHJlbG9hZCB0aGlzIHRpbGUgaW4gdGhlIG5leHQgaW50ZXJ2YWxcbiAgICAgICAgaWYgKGRlZmluZWQocmVzdWx0KSAmJiBkZWZpbmVkKHRpbWVEeW5hbWljSW1hZ2VyeSkpIHtcbiAgICAgICAgICAgIHRpbWVEeW5hbWljSW1hZ2VyeS5jaGVja0FwcHJvYWNoaW5nSW50ZXJ2YWwoeCwgeSwgbGV2ZWwsIHJlcXVlc3QpO1xuICAgICAgICB9XG5cbiAgICAgICAgcmV0dXJuIHJlc3VsdDtcbiAgICB9O1xuXG4gICAgcGlja0ZlYXR1cmVzKHgsIHksIGxldmVsLCBsb25naXR1ZGUsIGxhdGl0dWRlKSB7XG4gICAgICAgIHJldHVybiB1bmRlZmluZWQ7XG4gICAgfTtcblxuICAgIGRlc3Ryb3koKXtcbiAgICAgICAgZm9yKGxldCBrZXkgaW4gdGhpcy5jYWNoZSl7XG4gICAgICAgICAgICBsZXQgdGlsZSA9IHRoaXMuY2FjaGVba2V5XTtcbiAgICAgICAgICAgIHRpbGUuZGVzdHJveSgpO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuY2FjaGUgPSB7fTtcbiAgICB9O1xuXG4gICAgcmVtb3ZlSW1hZ2VyeUZyb21DYWNoZSh4LHkseil7XG4gICAgICAgIGxldCBrZXkgPSB4KydfJyt5KydfJyt6O1xuICAgICAgICBsZXQgdGlsZSA9IHRoaXMuY2FjaGVba2V5XTtcbiAgICAgICAgaWYodGlsZSl7XG4gICAgICAgICAgICB0aWxlLmRlc3Ryb3koKTtcbiAgICAgICAgICAgIGRlbGV0ZSB0aGlzLmNhY2hlW2tleV07XG4gICAgICAgIH1cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9TGFiZWxUaWxlU2VydmljZUltYWdlcnlQcm92aWRlcjtcbiIsImxldCBGb250ID0gbnVsbFxyXG5jb25zdCBfcGF0aCA9ICcuLy4uLy4uLy4uLy4uLyc7XHJcbmNsYXNzIEF2b2lkVXRpbHtcclxuICAgIHN0YXRpYyBnZXRSZWFsTGVuZ3RoKHN0cikge1xyXG4gICAgICAgIHZhciBsZW5ndGggPSBzdHIubGVuZ3RoO1xyXG4gICAgICAgIHZhciByZWFsTGVuZ3RoID0gMFxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbGV0IGNoYXJDb2RlID0gc3RyLmNoYXJDb2RlQXQoaSk7XHJcbiAgICAgICAgICAgIGlmIChjaGFyQ29kZSA+PSAwICYmIGNoYXJDb2RlIDw9IDEyOCkge1xyXG4gICAgICAgICAgICAgICAgcmVhbExlbmd0aCArPSAwLjU7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZWFsTGVuZ3RoICs9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHJlYWxMZW5ndGg7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3mlofmnKzmmK/lkKbkuI3kuLrnqbpcclxuICAgICAqICBQYXJhbWV0ZXJzIDpcclxuICAgICAqICBsYWJlbCAtIOimgeaYvuekuueahOaWh+acrFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGlzTm90TnVsbChsYWJlbCl7XHJcbiAgICAgICAgaWYoIWxhYmVsICYmIGxhYmVsICE9MCl7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v5aaC5p6c5piv5a2X56ym5LiyXHJcbiAgICAgICAgaWYodHlwZW9mKGxhYmVsKSA9PSAnc3RyaW5nJyl7XHJcbiAgICAgICAgICAgIGxhYmVsID0gbGFiZWwudG9Mb3dlckNhc2UoKTtcclxuICAgICAgICAgICAgaWYobGFiZWwgPT0gJyd8fCBsYWJlbCA9PSAndW5kZWZpbmVkJyB8fCBsYWJlbCA9PSAnbnVsbCcpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog57uf5LiA6L2s5Li65b6u6L2v6ZuF6buRXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmb3JtYXRGb250KGZvbnQscmF0aW8saXNDaGFuZ2VGb250KXtcclxuICAgICAgICB2YXIgZm9udEFyciA9IGZvbnQ7XHJcbiAgICAgICAgaWYoaXNDaGFuZ2VGb250KXtcclxuICAgICAgICAgICAgaWYoRm9udCA9PSBudWxsKXtcclxuICAgICAgICAgICAgICAgIEZvbnQgPSByZXF1aXJlKF9wYXRoICsgJ3NyYy91dGlscy9mb250L0ZvbnQnKTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdmFyIGZhcnIgPSBmb250LnNwbGl0KCcgJyk7XHJcbiAgICAgICAgICAgIGlmKGZhcnIubGVuZ3RoIC0gMSAhPSAwKXtcclxuICAgICAgICAgICAgICAgIGlmKCdpdGFsaWMnID09IGZhcnJbMF0udG9Mb3dlckNhc2UoKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZmFyclthcnIubGVuZ3RoIC0xXSAhPSAnc2ltYmVpJyl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZhcnJbZmFyci5sZW5ndGggLTFdID0gRm9udC5nZXREZWZhdWx0Rm9udCgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmYXJyW2ZhcnIubGVuZ3RoIC0xXSA9ICdTaW1IZWknO1xyXG4gICAgICAgICAgICBmb250QXJyID1mYXJyLmpvaW4oJyAnKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBmb250QXJyLnJlcGxhY2UoXHJcbiAgICAgICAgICAgIC8oXFxkK1xcLj9cXGQqKShweHxlbXxyZW18cHQpL2csXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uKHcsIG0sIHUpIHtcclxuICAgICAgICAgICAgICAgIGlmKG0gPCAxMil7XHJcbiAgICAgICAgICAgICAgICAgICAgbSA9IDEyICogcmF0aW87XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBtID0gTWF0aC5yb3VuZChtKSAqIHJhdGlvO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIG0gKyB1O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgKTtcclxuICAgIH07XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlr7nms6jorrDov5vooYzljrvnqbrmoLznrYnlpITnkIZcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZvcm1hdExhYmVsKGxhYmVsKXtcclxuXHJcbiAgICAgICAgaWYobGFiZWwpe1xyXG4gICAgICAgICAgICBsYWJlbCA9IGxhYmVsICsgJyc7XHJcbiAgICAgICAgICAgIC8v5Y675o6J5LiN5Y+v6KeB5a2X56ymXHJcbiAgICAgICAgICAgIGxhYmVsID0gIGxhYmVsLnJlcGxhY2UoIC8oW1xceDAwLVxceDFmXFx4N2ZdKS9nLCcnKTtcclxuICAgICAgICAgICAgbGFiZWwgPSBsYWJlbC5yZXBsYWNlKC8oXFxzKiQpL2csXCJcIik7XHJcbiAgICAgICAgICAgIGxhYmVsID0gbGFiZWwucmVwbGFjZSgvPGJyXFwvPi9nLCBcIlwiKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGxhYmVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8v6I635Y+W5Lik54K56L+e57q/5LiOeei9tOeahOWkueinklxyXG4gICAgc3RhdGljIGdldEFuZ2xlKCBwMSxwMil7XHJcbiAgICAgICAgaWYoIXAyIHx8ICFwMSl7XHJcbiAgICAgICAgICAgIGRlYnVnZ2VyO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihwMlswXS1wMVswXSA9PSAwKXtcclxuICAgICAgICAgICAgaWYocDJbMV0+cDFbMF0pe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIDkwO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHJldHVybiAtOTA7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGsgPSAocDJbMV0tcDFbMV0pLyhwMlswXS1wMVswXSk7XHJcbiAgICAgICAgbGV0IGFuZ2xlID0gMzYwKk1hdGguYXRhbihrKS8oMipNYXRoLlBJKTtcclxuICAgICAgICByZXR1cm4gYW5nbGU7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAg5pu05paw57q/5paH5a2X5rOo6K6w55qE6KeS5bqmXHJcbiAgICAgKiBAcGFyYW0gYW5nbGVcclxuICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0VXBkYXRlQW5nbGUoYW5nbGUsYmVhcmluZyl7XHJcbiAgICAgICAgbGV0IHRvdGFsQW5nbGUgPSBhbmdsZSAtIGJlYXJpbmc7XHJcbiAgICAgICAgaWYodG90YWxBbmdsZSA+IDQ1ICYmIHRvdGFsQW5nbGUgPD0gMTM1KXtcclxuICAgICAgICAgICAgcmV0dXJuICAtOTA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRvdGFsQW5nbGUgPiAxMzUgJiYgdG90YWxBbmdsZSA8PSAyMjUpe1xyXG4gICAgICAgICAgICByZXR1cm4gIC0gMTgwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYodG90YWxBbmdsZSA+PSAtMjI1ICYmIHRvdGFsQW5nbGUgPCAtMTM1KXtcclxuICAgICAgICAgICAgcmV0dXJuICAxODA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKHRvdGFsQW5nbGUgPj0gLTEzNSAmJiB0b3RhbEFuZ2xlIDwgLTQ1KXtcclxuICAgICAgICAgICAgcmV0dXJuICA5MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIDA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAg5pu05paw57q/5paH5a2X5rOo6K6w55qE6KeS5bqmXHJcbiAgICAgKiBAcGFyYW0gYW5nbGVcclxuICAgICAqIEByZXR1cm5zIHsqfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgdXBkYXRlQW5nbGUoYW5nbGUsYmVhcmluZyl7XHJcbiAgICAgICAgbGV0IHRvdGFsQW5nbGUgPSBhbmdsZSAtIGJlYXJpbmc7XHJcbiAgICAgICAgaWYodG90YWxBbmdsZSA+IDQ1ICYmIHRvdGFsQW5nbGUgPD0gMTM1KXtcclxuICAgICAgICAgICAgcmV0dXJuIGFuZ2xlIC05MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodG90YWxBbmdsZSA+IDEzNSAmJiB0b3RhbEFuZ2xlIDw9IDIyNSl7XHJcbiAgICAgICAgICAgIHJldHVybiBhbmdsZSAtIDE4MDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKHRvdGFsQW5nbGUgPj0gLTIyNSAmJiB0b3RhbEFuZ2xlIDwgLTEzNSl7XHJcbiAgICAgICAgICAgIHJldHVybiBhbmdsZSArIDE4MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYodG90YWxBbmdsZSA+PSAtMTM1ICYmIHRvdGFsQW5nbGUgPCAtNDUpe1xyXG4gICAgICAgICAgICByZXR1cm4gYW5nbGUgKyA5MDtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGFuZ2xlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5piv5ZCm6ZyA6KaB5pS55Y+Y57q/55qE5pa55ZCRXHJcbiAgICAgKiAgUGFyYW1ldGVycyA6XHJcbiAgICAgKiAgcDEgLSDnur/mrrXotbfngrlcclxuICAgICAqICBwMiAt57q/5q6155qE6YeN54K5XHJcbiAgICAgKiAgYW5nbGUgLSDkuKTngrnov57nur/kuI546L2055qE5aS56KeSXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBpc0NoYW5nZURpcmVjdGlvbihsYWJlbCxwMSxwMixhbmdsZSl7XHJcbiAgICAgICAgbGV0IHNob3dDaGFuZ2UgPSBmYWxzZTtcclxuICAgICAgICAvL+WIpOaWreaYr+WQpuWMheWQq+axieWtl1xyXG4gICAgICAgIGlmKC8uKltcXHU0ZTAwLVxcdTlmYTVdKy4qJC8udGVzdChsYWJlbCkpIHtcclxuICAgICAgICAgICAgLy/lpoLmnpzmmK/lnoLnm7Tnur9cclxuICAgICAgICAgICAgaWYocDFbMF0gPT0gcDJbMF0pe1xyXG4gICAgICAgICAgICAgICAgaWYocDFbMV0+cDJbMV0pe1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBzaG93Q2hhbmdlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL+WmguaenOaYr+WPjeaWnOe6v++8jOW5tuS4lOWkueinkuS4jnjovbTnmoTlpLnop5LlpKfkuo40NeW6plxyXG4gICAgICAgICAgICBpZihhbmdsZTwtNDUgJiYgYW5nbGU+LTkwICl7XHJcbiAgICAgICAgICAgICAgICBpZihwMVswXTwgcDJbMF0pe1xyXG4gICAgICAgICAgICAgICAgICAgIHNob3dDaGFuZ2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGlmKHAxWzBdPiBwMlswXSl7XHJcbiAgICAgICAgICAgICAgICAgICAgc2hvd0NoYW5nZSA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgaWYocDFbMF0gPiBwMlswXSl7XHJcbiAgICAgICAgICAgICAgICBzaG93Q2hhbmdlID0gdHJ1ZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc2hvd0NoYW5nZTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlpoLmnpzmloflrZfms6jorrDml4vovazop5LluqbmlrnlkJHkuI3kuIDoh7Qo5pyJ55qE5a2X5ZCR5bem77yM5pyJ55qE5a2X5ZCR5Y+z5peL6L2sKe+8jOWImeiwg+aVtOS4uuS4gOiHtFxyXG4gICAgICogQHBhcmFtIHRleHRQb2ludHNcclxuICAgICAqL1xyXG4gICAgLy8gc3RhdGljIHRleHRUb1NhbWVCZWFyaW5nKGFuZ2xlLHRleHRQb2ludHMpe1xyXG4gICAgICAgIC8v5L+d6K+B56uW5pa55ZCR55qE5a2X5piv5q2j55qEXHJcbiAgICAgICAgLy8gaWYoYW5nbGUgPj0gNDUpe1xyXG4gICAgICAgIC8vICAgICBhbmdsZSA9IGFuZ2xlIC0gOTA7XHJcbiAgICAgICAgLy8gfWVsc2V7XHJcbiAgICAgICAgLy8gICAgIGlmKGFuZ2xlIDw9IC0gNDUpe1xyXG4gICAgICAgIC8vICAgICAgICAgYW5nbGUgPSBhbmdsZSArIDkwO1xyXG4gICAgICAgIC8vICAgICB9XHJcbiAgICAgICAgLy8gfVxyXG4gICAgICAgIC8vXHJcbiAgICAgICAgLy8gZm9yKGxldCBpID0gMDtpPHRleHRQb2ludHMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgLy8gICAgIGxldCBwID0gdGV4dFBvaW50c1tpXVsxXTtcclxuICAgICAgICAvLyAgICAgbGV0IG9mZnNldEFuZ2xlID0gYW5nbGUgLSBwO1xyXG4gICAgICAgIC8vICAgICBpZihvZmZzZXRBbmdsZSA+IDQ1KXtcclxuICAgICAgICAvLyAgICAgICAgIHRleHRQb2ludHNbaV1bMV0gPSBwICs5MDtcclxuICAgICAgICAvLyAgICAgfVxyXG4gICAgICAgIC8vICAgICBpZihvZmZzZXRBbmdsZSA8IC00NSl7XHJcbiAgICAgICAgLy8gICAgICAgICB0ZXh0UG9pbnRzW2ldWzFdID0gcCAtOTA7XHJcbiAgICAgICAgLy8gICAgIH1cclxuICAgICAgICAvLyB9XHJcbiAgICAvLyB9XHJcblxyXG4gICAgc3RhdGljIHRleHRUb1NhbWVCZWFyaW5nKHRleHRQb2ludHMpe1xyXG4gICAgICAgIGlmKHRleHRQb2ludHMubGVuZ3RoIDwgMil7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yKGxldCBpID0gMTtpPHRleHRQb2ludHMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGxldCBwcmVBbmdsZSA9IHRleHRQb2ludHNbaS0xXVsxXTtcclxuICAgICAgICAgICAgbGV0IGFuZ2xlMSA9IHRleHRQb2ludHNbaV1bMV07XHJcbiAgICAgICAgICAgIGlmKE1hdGguYWJzKGFuZ2xlMSAtIHByZUFuZ2xlKSA+IDQ1KXtcclxuICAgICAgICAgICAgICAgIGlmKGFuZ2xlMSAtIHByZUFuZ2xlID4gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFBvaW50c1tpXVsxXSA9IGFuZ2xlMSAtOTA7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0ZXh0UG9pbnRzW2ldWzFdID0gYW5nbGUxICs5MDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH1cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBBdm9pZFV0aWw7XHJcblxyXG5cclxuXHJcbiIsIi8qKlxuICogQ2xhc3M6IEdBbm5vQXZvaWRcbiAqIOmBv+iuqeetlueVpeexu1xuICpcbiAqIEluaGVyaXRzOlxuICogIC0gPE9iamVjdD5cbiAqL1xuY29uc3QgR0dyaWRJbmRleCA9IHJlcXVpcmUoJy4vR0dyaWRJbmRleCcpO1xuY29uc3QgR0xhYmVsQm94ID0gcmVxdWlyZSgnLi9HTGFiZWxCb3gnKTtcbmNvbnN0IFVpdGwgPSByZXF1aXJlKCcuL1V0aWwnKTtcbmNsYXNzIEdBbm5vQXZvaWR7XG4gICAgY29uc3RydWN0b3IoY3R4LGZvcm1hdEZvbnQsYmVhcmluZykge1xuICAgICAgICB0aGlzLmN0eCA9IGN0eDtcbiAgICAgICAgdGhpcy5ncmlkPW51bGw7XG4gICAgICAgIGlmKCFjdHgpe1xuICAgICAgICAgICAgdGhpcy5ncmlkID0gbmV3IEdHcmlkSW5kZXgoNDA5NiwgMzIsIDApO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMuR0xhYmVsQm94ID0gbmV3IEdMYWJlbEJveChjdHgsZm9ybWF0Rm9udCxiZWFyaW5nKTtcblxuICAgICAgICB0aGlzLmZlYXR1cmVNYXAgPSB7fTtcbiAgICB9XG5cbiAgICAvL+mBv+iuqVxuICAgIGRlZmF1bHRBdm9pZChmZWF0dXJlcyxzdHlsZU1hcCxpc0NsaWVudCxoYXNJbXBvcnRhbnQsYWJsZVdlaWdodCl7XG4gICAgICAgIGlmKHRoaXMuY3R4KXtcbiAgICAgICAgICAgIGlmKGlzQ2xpZW50KXtcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWQgPSBuZXcgR0dyaWRJbmRleCg0MDk2LCAzMiwgMCk7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICB0aGlzLmdyaWQgPSBuZXcgR0dyaWRJbmRleCg1MTIsIDMyLCAzMik7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZihmZWF0dXJlcz09IG51bGwgfHwgZmVhdHVyZXMubGVuZ3RoPDEpIHJldHVybiBbXTtcbiAgICAgICAgLy8gY29uc29sZS50aW1lKCdtZXJnZUZlYXR1cmVzJyk7XG4gICAgICAgIC8vIGZlYXR1cmVzID0gdGhpcy5tZXJnZUZlYXR1cmVzKGZlYXR1cmVzKTtcbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCdtZXJnZUZlYXR1cmVzJyk7XG4gICAgICAgIC8vIGNvbnNvbGUudGltZSgn5o6S5bqPJyk7XG5cbiAgICAgICAgaWYoYWJsZVdlaWdodCl7XG4gICAgICAgICAgICAvL+adg+WAvOaOkuW6j1xuICAgICAgICAgICAgVWl0bC5zb3J0KGZlYXR1cmVzLHN0eWxlTWFwLGhhc0ltcG9ydGFudCk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCfmjpLluo8nKTtcblxuICAgICAgICAvLyBjb25zb2xlLnRpbWUoJ+mBv+iuqScpO1xuICAgICAgICAvL+WwhuazqOiusOa3u+WKoOWIsOWNleWFg+agvOS4re+8jOi/m+ihjOmBv+iuqVxuICAgICAgICBmb3IobGV0IGkgPTA7aTxmZWF0dXJlcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGxldCBmZWF0dXJlID0gZmVhdHVyZXNbaV07XG4gICAgICAgICAgICBsZXQgc3R5bGUgPSBzdHlsZU1hcFtmZWF0dXJlLnN0eWxlSWRdO1xuICAgICAgICAgICAgdGhpcy5hdm9pZEZlYXR1cmUoZmVhdHVyZSxzdHlsZSk7XG5cbiAgICAgICAgICAgIHRoaXMuc2hvd09ySGlkZUZlYXR1cmUoZmVhdHVyZSk7XG4gICAgICAgIH1cbiAgICAgICAgLy8gY29uc29sZS50aW1lRW5kKCfpgb/orqknKTtcbiAgICAgICAgLy8gZmVhdHVyZXMgPSB0aGlzLkdMYWJlbEJveC5maWx0ZXJGZWF0dXJlKGZlYXR1cmVzKTtcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOe7meimgee0oOiuvue9rumBv+iuqeeahGJveOWSjOazqOiusOeahOe7mOWItuWdkOagh1xuICAgICAqIEBwYXJhbSBmXG4gICAgICovXG4gICAgYXZvaWRGZWF0dXJlKGYsc3R5bGUpe1xuICAgICAgICBpZihzdHlsZS5zaG93ID09IGZhbHNlIHx8IGYuaGlkZGVuID09IHRydWUgfHwgIWYuYm94cyl7XG4gICAgICAgICAgICBmLmhpZGRlbiA9dHJ1ZTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBzaG93ID0gdHJ1ZTtcbiAgICAgICAgaWYoZi5ib3hzKXtcbiAgICAgICAgICAgIGlmKGYudHlwZSA9PSAxKXtcbiAgICAgICAgICAgICAgICAvL+eCueazqOiusOi3n+WFtuWug+azqOiusOmBv+iuqVxuICAgICAgICAgICAgICAgIHNob3cgPXRoaXMuYXZvaWRQb2ludChmLHN0eWxlKTtcbiAgICAgICAgICAgIH1lbHNle1xuICAgICAgICAgICAgICAgIGlmKGYuaXNDb2xsaXNpb24pe1xuICAgICAgICAgICAgICAgICAgICBmLmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAgICAgLy/nur/ms6jorrDot5/lhbblroPms6jorrDov5vooYzpgb/orqlcbiAgICAgICAgICAgICAgICAgICAgc2hvdyA9dGhpcy5hdm9pZExpbmUoZixzdHlsZSk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgICAgIGYuaGlkZGVuID0gIXNob3c7XG4gICAgICAgIC8v5aaC5p6c5rOo6K6w5pi+56S65LiN5LiLXG4gICAgICAgIC8vIGlmKCFzaG93KXtcbiAgICAgICAgLy8gICAgIGxldCBrZXlzID0gdGhpcy5nZXRDb2xsaXNpb25GZWF0dXJlSWRzKGYpO1xuICAgICAgICAvLyAgICAgbGV0IHNob3dGZWF0dXJlID0gdGhpcy5pc1Nob3dDdXJyRmVhdHVyZShzdHlsZSxmLGtleXMpO1xuICAgICAgICAvL1xuICAgICAgICAvLyAgICAgaWYoc2hvd0ZlYXR1cmUpe1xuICAgICAgICAvLyAgICAgICAgIHRoaXMuaGlkZUNvbGxpc2lvbkZlYXR1cmVzKGYsa2V5cyk7XG4gICAgICAgIC8vICAgICAgICAgZi5oaWRkZW4gPSBmYWxzZTtcbiAgICAgICAgLy8gICAgICAgICB0aGlzLmFkZEJveEZlYXR1cmVDZWxscyhmLHN0eWxlKTtcbiAgICAgICAgLy8gICAgIH1lbHNle1xuICAgICAgICAvLyAgICAgICAgIGYuaGlkZGVuID0gdHJ1ZTtcbiAgICAgICAgLy8gICAgIH1cbiAgICAgICAgLy8gfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqIOWwhueCueazqOiusOWKoOWFpeWIsOiuoeeul+WHuueahOWkmuS4quWNleWFg+agvOS4rVxuICAgICAqIEBwYXJhbSBmZWF0dXJlXG4gICAgICovXG4gICAgYXZvaWRQb2ludChmZWF0dXJlLHN0eWxlKXtcbiAgICAgICAgZmVhdHVyZS5ib3hJbmRleCA9IDA7XG5cbiAgICAgICAgLy/lpoLmnpzkuLrph43opoHnmoTvvIzliJnkuI3pgb/orqlcbiAgICAgICAgaWYoc3R5bGUuaXNJbXBvcnRhbnQgPT0gdHJ1ZSl7XG4gICAgICAgICAgICB0aGlzLmFkZEJveEZlYXR1cmVDZWxscyhmZWF0dXJlLHN0eWxlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy/lpoLmnpzliY3pnaLmnInlsI/lm77moIfvvIzlubbkuJTlvIDlkK/kuoblm5vlrqvmoLzpgb/orqlcbiAgICAgICAgaWYoKHN0eWxlLmlzRm91ckRpcmVjdGlvbnMgfHwgc3R5bGUuaXNFaWdodERpcmVjdGlvbnMpICYmIHN0eWxlLnRleHR1cmUpe1xuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkRm91ckNvbGxpc2lvbkZlYXR1cmVUb0NlbGxzKGZlYXR1cmUsc3R5bGUsMCk7XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLy/lpoLmnpzmsqHmnInmjIflrprnmoTmlrnlkJFcbiAgICAgICAgICAgIGlmKGZlYXR1cmUuYm94SW5kZXhzICYmICFmZWF0dXJlLmJveEluZGV4c1swXSl7XG4gICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICBsZXQgaXNDb2xsaXNpb24gPSB0aGlzLmlzQ29sbGlzaW9uKGZlYXR1cmUuYm94KTtcbiAgICAgICAgICAgIGlmKGlzQ29sbGlzaW9uKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICB0aGlzLmFkZEJveEZlYXR1cmVDZWxscyhmZWF0dXJlLHN0eWxlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuXG5cbiAgICAvKipcbiAgICAgKiDlsIbnur/ms6jorrDliqDlhaXliLDorqHnrpflh7rnmoTlpJrkuKrljZXlhYPmoLzkuK1cbiAgICAgKiBAcGFyYW0gZmVhdHVyZVxuICAgICAqL1xuICAgIGF2b2lkTGluZShmZWF0dXJlLHN0eWxlKXtcbiAgICAgICAgLy/lpoLmnpzkuLrph43opoHnmoTvvIzliJnkuI3pgb/orqlcbiAgICAgICAgaWYoc3R5bGUuaXNJbXBvcnRhbnQgPT0gdHJ1ZSl7XG4gICAgICAgICAgICB0aGlzLmFkZEJveEZlYXR1cmVDZWxscyhmZWF0dXJlLHN0eWxlKTtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG5cbiAgICAgICAgLy/nur/ms6jorrDmmK/lkKbkuI7lhbblroPms6jorrDnm7jkuqRcbiAgICAgICAgbGV0IGlzQ29sbGlzaW9uID0gZmFsc2U7XG4gICAgICAgIGZvcihsZXQgaSA9IDAgO2k8ZmVhdHVyZS5ib3hzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgbGV0IGJveCA9IGZlYXR1cmUuYm94c1tpXTtcbiAgICAgICAgICAgIGlmKHRoaXMuaXNDb2xsaXNpb24oYm94KSl7XG4gICAgICAgICAgICAgICAgaXNDb2xsaXNpb24gPSB0cnVlO1xuICAgICAgICAgICAgICAgIGJyZWFrO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgaWYoaXNDb2xsaXNpb24pe1xuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIHRoaXMuYWRkQm94RmVhdHVyZUNlbGxzKGZlYXR1cmUsc3R5bGUpO1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDlsIbngrnms6jorrDmt7vliqDliLDljZXlhYPmoLzkuK1cbiAgICAgKiBAcGFyYW0gZmVhdHVyZSDngrnms6jorrBcbiAgICAgKiBAcGFyYW0gaW5kZXgg54K55rOo6K6w5Zub5a6r5qC855qEaW5kZXhcbiAgICAgKi9cbiAgICBhZGRGb3VyQ29sbGlzaW9uRmVhdHVyZVRvQ2VsbHMoZmVhdHVyZSxzdHlsZSxpbmRleCl7XG4gICAgICAgIGxldCBpc0NvbGxpc2lvbiA9IHRydWU7XG4gICAgICAgIGxldCBib3ggPSBbXTtcbiAgICAgICAgLy/lpoLmnpzmnInmjIflrprnmoTmlrnlkJFcbiAgICAgICAgaWYoIWZlYXR1cmUuYm94SW5kZXhzIHx8IChmZWF0dXJlLmJveEluZGV4cyAmJiBmZWF0dXJlLmJveEluZGV4c1tpbmRleF0pKXtcbiAgICAgICAgICAgIGJveCA9IGZlYXR1cmUuYm94c1tpbmRleF07XG4gICAgICAgICAgICBpc0NvbGxpc2lvbiA9IHRoaXMuaXNDb2xsaXNpb24oYm94KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIOWmguaenOebuOS6pCzov5vooYzlm5vlrqss5YWr5a6r5qC86YG/6K6pXG4gICAgICAgIGlmKGlzQ29sbGlzaW9uKXtcbiAgICAgICAgICAgIGluZGV4ICsrO1xuICAgICAgICAgICAgaWYoaW5kZXggPT0gZmVhdHVyZS5ib3hzLmxlbmd0aCl7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBpbmRleCAtIGZlYXR1cmUuYm94cy5sZW5ndGg7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIC8v5omA5pyJ5pa55ZCR5YWo6YOo6YG/6K6p5a6M5oiQ77yM5LuN54S255u45LqkXG4gICAgICAgICAgICBpZihpbmRleCA9PSAwKXtcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XG4gICAgICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgICAgICAvL+aNouS4queCueazqOiusOaWueWQkeeahGJveO+8jOWGjei/m+ihjOmAkuW9kumBv+iuqeajgOa1i1xuICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuYWRkRm91ckNvbGxpc2lvbkZlYXR1cmVUb0NlbGxzKGZlYXR1cmUsc3R5bGUsaW5kZXgpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9ZWxzZXtcbiAgICAgICAgICAgIC8v5o2i5oiQ5YGP56e754K5XG4gICAgICAgICAgICAvLyBmZWF0dXJlLnRleHRQb2ludCA9ZmVhdHVyZS5mb3VyUG9pbnRzW2luZGV4XTtcbiAgICAgICAgICAgIGZlYXR1cmUuYm94SW5kZXggPSBpbmRleDtcbiAgICAgICAgICAgIGZlYXR1cmUuYm94ID0gYm94O1xuICAgICAgICAgICAgdGhpcy5hZGRCb3hGZWF0dXJlQ2VsbHMoZmVhdHVyZSxzdHlsZSk7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqICDov5Tlm57ms6jorrDnmoRib3jmmK/lkKbkuI7lhbblroPms6jorrDnm7jkuqRcbiAgICAgKiBAcGFyYW0gcm93XG4gICAgICogQHBhcmFtIGNvbFxuICAgICAqIEBwYXJhbSBmZWF0dXJlXG4gICAgICovXG4gICAgaXNDb2xsaXNpb24oYm94KXtcbiAgICAgICAgbGV0IHgxID0gYm94WzBdO1xuICAgICAgICBsZXQgeTEgPSBib3hbMV07XG5cbiAgICAgICAgbGV0IHgyID0gYm94WzJdO1xuICAgICAgICBsZXQgeTIgPSBib3hbM107XG4gICAgICAgIGxldCByZXN1bHQgPSB0aGlzLmdyaWQucXVlcnkoeDEseTEseDIseTIpO1xuICAgICAgICByZXR1cm4gcmVzdWx0Lmxlbmd0aD4wO1xuICAgIH1cblxuICAgIGdldENvbGxpc2lvbklkcyhib3gpe1xuICAgICAgICAvLyBpZighYm94KXtcbiAgICAgICAgLy8gICAgIGRlYnVnZ2VyO1xuICAgICAgICAvLyB9XG4gICAgICAgIGxldCB4MSA9IGJveFswXTtcbiAgICAgICAgbGV0IHkxID0gYm94WzFdO1xuXG4gICAgICAgIGxldCB4MiA9IGJveFsyXTtcbiAgICAgICAgbGV0IHkyID0gYm94WzNdO1xuICAgICAgICByZXR1cm4gdGhpcy5ncmlkLnF1ZXJ5KHgxLHkxLHgyLHkyKTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiDojrflj5booqvljovnm5bnmoTms6jorrDpm4blkIhcbiAgICAgKiBAcGFyYW0gZmVhdHVyZVxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cbiAgICAgKi9cbiAgICBnZXRDb2xsaXNpb25GZWF0dXJlSWRzKGZlYXR1cmUpe1xuICAgICAgICBpZihmZWF0dXJlLnR5cGUgPT0xKXtcbiAgICAgICAgICAgIHJldHVybiB0aGlzLmdldENvbGxpc2lvbklkcyhmZWF0dXJlLmJveHNbZmVhdHVyZS5ib3hJbmRleF0pO1xuICAgICAgICB9XG5cbiAgICAgICAgaWYoZmVhdHVyZS50eXBlID09Mil7XG4gICAgICAgICAgICBsZXQgaWRzID0gW107XG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwO2k8ZmVhdHVyZS5ib3hzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgICAgIGxldCBrZXlzID0gdGhpcy5nZXRDb2xsaXNpb25JZHMoZmVhdHVyZS5ib3hzW2ldKTtcbiAgICAgICAgICAgICAgICBpZHMgPSBpZHMuY29uY2F0KGtleXMpO1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcmV0dXJuIGlkcztcbiAgICAgICAgfVxuICAgIH1cblxuICAgIC8qKlxuICAgICAqICDliKTmlq3lvZPliY3ms6jorrDlnKjlroPpgb/orqnljovnm5bnmoTms6jorrDkuK3vvIzlvZPliY3ms6jorrDmmK/lkKbopoHmmL7npLpcbiAgICAgKiBAcGFyYW0gc3R5bGVcbiAgICAgKiBAcGFyYW0gZmVhdHVyZVxuICAgICAqIEBwYXJhbSBrZXlzXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XG4gICAgICovXG4gICAgaXNTaG93Q3VyckZlYXR1cmUoc3R5bGUsZmVhdHVyZSxrZXlzKXtcbiAgICAgICAgaWYoc3R5bGUuaXNJbXBvcnRhbnQpe1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cblxuICAgICAgICBsZXQgd2VpZ2h0ID0gZmVhdHVyZS53ZWlnaHQ7XG4gICAgICAgIGZvcihsZXQgaSA9MDtpPGtleXMubGVuZ3RoO2krKyl7XG4gICAgICAgICAgICBsZXQgaXRlbSA9dGhpcy5mZWF0dXJlTWFwW2tleXNbaV1dO1xuICAgICAgICAgICAgaWYoaXRlbSl7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1TdHlsZSA9IGl0ZW0uc3R5bGU7XG4gICAgICAgICAgICAgICAgaWYoaXRlbVN0eWxlLmlzSW1wb3J0YW50KXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgICAgIGxldCBpdGVtRmVhdHVyZSA9IGl0ZW0uZmVhdHVyZTtcbiAgICAgICAgICAgICAgICBpZihpdGVtRmVhdHVyZS53ZWlnaHQgPj0gd2VpZ2h0KXtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICB9XG5cbiAgICAvKipcbiAgICAgKiAg6ZqQ6JeP5o6J5Y6L55uW55qE5rOo6K6wXG4gICAgICogQHBhcmFtIGtleXNcbiAgICAgKi9cbiAgICBoaWRlQ29sbGlzaW9uRmVhdHVyZXMoZixrZXlzKXtcbiAgICAgICAgZm9yKGxldCBpID0wO2k8a2V5cy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgIGxldCBpdGVtID10aGlzLmZlYXR1cmVNYXBba2V5c1tpXV07XG4gICAgICAgICAgICBpZihpdGVtKXtcbiAgICAgICAgICAgICAgICBsZXQgaXRlbUZlYXR1cmUgPSBpdGVtLmZlYXR1cmU7XG4gICAgICAgICAgICAgICAgbGV0IGl0ZW1TdHlsZSA9IGl0ZW0uc3R5bGU7XG5cbiAgICAgICAgICAgICAgICAvL+mHjeimgeazqOiusOWSjOS4jeaYr+WQjOS4gOS4quazqOiusOS4jemakOiXj1xuICAgICAgICAgICAgICAgIGlmKGl0ZW1TdHlsZS5pc0ltcG9ydGFudCAmJiBpdGVtRmVhdHVyZS5vYmplY3RJZCAhPSBmLm9iamVjdElkKXtcbiAgICAgICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgICAgLy/pmpDol4/mjonor6Xms6jorrAsIOivpeazqOiusOS4uuiiq+WFtuWug+adg+mHjeabtOmrmOeahOazqOiusOmhtuaOieS6hlxuICAgICAgICAgICAgICAgIGl0ZW1GZWF0dXJlLmhpZGRlbiA9IHRydWU7XG4gICAgICAgICAgICAgICAgdGhpcy5zaG93T3JIaWRlRmVhdHVyZShpdGVtRmVhdHVyZSk7XG5cbiAgICAgICAgICAgICAgICAvL+WOu+aOieazqOiusOWNoOaNrueahOe9keagvFxuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQm94RmVhdHVyZUNlbGxzKGl0ZW1GZWF0dXJlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuXG4gICAgLyoqXG4gICAgICogIOazqOiusGJveOaJgOWNoOeahOWNleWFg+agvOagh+ivhuS4unRydWVcbiAgICAgKi9cbiAgICBhZGRCb3hUb0NlbGxzKGZlYXR1cmUsa2V5LGJveCl7XG4gICAgICAgIGxldCB4MSA9IGJveFswXTtcbiAgICAgICAgbGV0IHkxID0gYm94WzFdO1xuICAgICAgICBsZXQgeDIgPSBib3hbMl07XG4gICAgICAgIGxldCB5MiA9IGJveFszXTtcbiAgICAgICAgdGhpcy5ncmlkLmluc2VydChrZXkseDEseTEseDIseTIpO1xuICAgIH1cblxuXG4gICAgLy8g6I635Y+W6L+H5ruk5ZCO55qE6KaB57SgLlxuICAgIGZpbHRlckZlYXR1cmUoZmVhdHVyZXMpe1xuICAgICAgICBsZXQgcmV0dXJuRmVhdHVyZXMgPSBbXTtcbiAgICAgICAgLy/liZTpmaTpnIDpgb/orqnnmoTopoHntKBcbiAgICAgICAgZm9yKGxldCBpPSAwIDtpPGZlYXR1cmVzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgaWYoIWZlYXR1cmVzW2ldLmhpZGRlbiApIHtcbiAgICAgICAgICAgICAgICBmZWF0dXJlc1tpXS5kcmF3ZWQgPSB0cnVlO1xuICAgICAgICAgICAgICAgIHJldHVybkZlYXR1cmVzLnB1c2goZmVhdHVyZXNbaV0pO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgICAgIHJldHVybiByZXR1cm5GZWF0dXJlcztcbiAgICB9XG5cblxuICAgIGFkZEJveEZlYXR1cmVDZWxscyhmZWF0dXJlLHN0eWxlKXtcbiAgICAgICAgdGhpcy5mZWF0dXJlTWFwW2ZlYXR1cmUucHJpbWFyeUlkXSA9IHtmZWF0dXJlLHN0eWxlfTtcblxuICAgICAgICBpZihmZWF0dXJlLnR5cGUgPT0gMSl7XG4gICAgICAgICAgICB0aGlzLmFkZEJveFRvQ2VsbHMoZmVhdHVyZSxmZWF0dXJlLnByaW1hcnlJZCxmZWF0dXJlLmJveCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihmZWF0dXJlLnR5cGUgPT0gMil7XG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwIDtpPGZlYXR1cmUuYm94cy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgICAgICBsZXQgYm94ID0gZmVhdHVyZS5ib3hzW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMuYWRkQm94VG9DZWxscyhmZWF0dXJlLGZlYXR1cmUucHJpbWFyeUlkLGJveCk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICB9XG5cbiAgICByZW1vdmVCb3hGZWF0dXJlQ2VsbHMoZmVhdHVyZSl7XG4gICAgICAgIGlmKHRoaXMuZmVhdHVyZU1hcFtmZWF0dXJlLnByaW1hcnlJZF0pe1xuICAgICAgICAgICAgZGVsZXRlIHRoaXMuZmVhdHVyZU1hcFtmZWF0dXJlLnByaW1hcnlJZF07XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgLy/ms6jorrDmsqHmnInliqDlhaXliLDnvZHmoLzkuK1cbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGlmKGZlYXR1cmUudHlwZSA9PSAxKXtcbiAgICAgICAgICAgIHRoaXMucmVtb3ZlQm94VG9DZWxscyhmZWF0dXJlLnByaW1hcnlJZCxmZWF0dXJlLmJveCk7XG4gICAgICAgIH1cblxuICAgICAgICBpZihmZWF0dXJlLnR5cGUgPT0gMil7XG4gICAgICAgICAgICBmb3IobGV0IGkgPSAwIDtpPGZlYXR1cmUuYm94cy5sZW5ndGg7aSsrKXtcbiAgICAgICAgICAgICAgICBsZXQgYm94ID0gZmVhdHVyZS5ib3hzW2ldO1xuICAgICAgICAgICAgICAgIHRoaXMucmVtb3ZlQm94VG9DZWxscyhmZWF0dXJlLnByaW1hcnlJZCxib3gpO1xuICAgICAgICAgICAgfVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgLyoqXG4gICAgICogIOazqOiusGJveOaJgOWNoOeahOWNleWFg+agvOagh+ivhuS4unRydWVcbiAgICAgKi9cbiAgICByZW1vdmVCb3hUb0NlbGxzKGtleSxib3gpe1xuICAgICAgICBsZXQgeDEgPSBib3hbMF07XG4gICAgICAgIGxldCB5MSA9IGJveFsxXTtcbiAgICAgICAgbGV0IHgyID0gYm94WzJdO1xuICAgICAgICBsZXQgeTIgPSBib3hbM107XG4gICAgICAgIHRoaXMuZ3JpZC5yZW1vdmUoa2V5LHgxLHkxLHgyLHkyKTtcbiAgICB9XG5cbiAgICBzaG93T3JIaWRlRmVhdHVyZShmZWF0dXJlKXtcbiAgICAgICAgbGV0IHNob3cgPSAhZmVhdHVyZS5oaWRkZW47XG5cbiAgICAgICAgaWYoZmVhdHVyZS5sYWJlbHMpe1xuICAgICAgICAgICAgZm9yKGxldCBpID0gMDtpPGZlYXR1cmUubGFiZWxzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgICAgIGxldCBsYWJlbCA9IGZlYXR1cmUubGFiZWxzW2ldO1xuICAgICAgICAgICAgICAgIGxhYmVsLnNob3cgPSBzaG93O1xuICAgICAgICAgICAgICAgIGlmKGZlYXR1cmUudHlwZSA9PSAxICYmIHNob3cpe1xuICAgICAgICAgICAgICAgICAgICBsYWJlbC5waXhlbE9mZnNldCA9IGZlYXR1cmUub2Zmc2V0UG9zdGlvbltmZWF0dXJlLmJveEluZGV4XTtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZihmZWF0dXJlLmljb25JbWcpe1xuICAgICAgICAgICAgZmVhdHVyZS5iaWxsYm9hcmQuc2hvdyA9IHNob3c7XG4gICAgICAgIH1cbiAgICB9XG59XG5tb2R1bGUuZXhwb3J0cyA9IEdBbm5vQXZvaWQ7IiwiY29uc3QgR0Rpc3RhbmNlID0gcmVxdWlyZSgnLi9HRGlzdGFuY2UnKTtcclxuY29uc3QgR2lzVG9vbHMgPSByZXF1aXJlKCcuLy4uLy4uLy4uL3V0aWxzL2dpc3Rvb2xzL0dpc1Rvb2xzJyk7XHJcbmNvbnN0IEF2b2lkVXRpbCA9IHJlcXVpcmUoJy4vQXZvaWRVdGlsJyk7XHJcbmNsYXNzIEdDdXRMaW5le1xyXG4gICAgc3RhdGljIGN1dExpbmVGZWF0dXJlKGZlYXR1cmUsc3R5bGUsc2NhbGUpe1xyXG4gICAgICAgIGxldCBmcyA9IFtdO1xyXG4gICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgaWYoZmVhdHVyZS5zb3VyY2VEYXRhLmxlbmd0aCA8IDQpe1xyXG4gICAgICAgICAgICByZXR1cm4gZnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbGluZVRleHQgPSB0aGlzLmNyZWF0ZUxpbmVUZXh0RmVhdHJ1ZShmZWF0dXJlLHN0eWxlLGluZGV4LHNjYWxlKTtcclxuICAgICAgICBpbmRleCA9IGxpbmVUZXh0LmluZGV4O1xyXG4gICAgICAgIGlmKGxpbmVUZXh0LmZlYXR1cmUpe1xyXG4gICAgICAgICAgICBmcy5wdXNoKGxpbmVUZXh0LmZlYXR1cmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGxpbmVDb2RlPSB0aGlzLmNyZWF0ZUxpbmVDb2RlRmVhdHJ1ZShmZWF0dXJlLHN0eWxlLGluZGV4KTtcclxuICAgICAgICBpbmRleCA9IGxpbmVDb2RlLmluZGV4O1xyXG4gICAgICAgIGlmKGxpbmVDb2RlLmZlYXR1cmUpe1xyXG4gICAgICAgICAgICBmcy5wdXNoKGxpbmVDb2RlLmZlYXR1cmUpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGxpbmVBcnJvdz0gdGhpcy5jcmVhdGVMaW5lQXJyb3dGZWF0cnVlKGZlYXR1cmUsc3R5bGUsaW5kZXgpO1xyXG4gICAgICAgIGlmKGxpbmVBcnJvdy5mZWF0dXJlKXtcclxuICAgICAgICAgICAgZnMucHVzaChsaW5lQXJyb3cuZmVhdHVyZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWIm+W7uue6v+aWh+Wtl+azqOiusFxyXG4gICAgICogIFBhcmFtZXRlcnMgOlxyXG4gICAgICogIGZlYXR1cmVcclxuICAgICAqICBpbmRleCAtIOWPr+eUqOeahGxpbmXnmoRpbmRleOS9jee9rlxyXG4gICAgICogIHNjYWxlIOWtl+mXtOi3nee8qeaUvuavlOS+i1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgY3JlYXRlTGluZVRleHRGZWF0cnVlKGZlYXR1cmUsc3R5bGUsaW5kZXgsc2NhbGUsZmlsZWROYW1lKXtcclxuICAgICAgICBsZXQgbGluZSA9IGZlYXR1cmUuc291cmNlRGF0YTtcclxuICAgICAgICBpZihmaWxlZE5hbWUpe1xyXG4gICAgICAgICAgICBsaW5lID0gZmVhdHVyZVtmaWxlZE5hbWVdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGQgPSBuZXcgR0Rpc3RhbmNlKCk7XHJcbiAgICAgICAgbGV0IGdhcHMgPSBbXTtcclxuICAgICAgICBsZXQgdGV4dEZlYXR1cmUgPW51bGw7XHJcblxyXG4gICAgICAgIGlmKCFzY2FsZSl7XHJcbiAgICAgICAgICAgIHNjYWxlID0gMTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmKEF2b2lkVXRpbC5pc05vdE51bGwoZmVhdHVyZS5sYWJlbCkpIHtcclxuICAgICAgICAgICAgLy/nur/ms6jorrDnmoTmloflrZflhoXlrrlcclxuICAgICAgICAgICAgZmVhdHVyZS5sYWJlbCA9IGZlYXR1cmUubGFiZWwrICcnO1xyXG4gICAgICAgICAgICBmb3IgKGxldCBjb3VudCA9IDA7IGNvdW50IDwgZmVhdHVyZS5sYWJlbC5sZW5ndGg7IGNvdW50KyspIHtcclxuICAgICAgICAgICAgICAgIGdhcHMucHVzaCgoc3R5bGUubGluZUhlaWdodCoxLjIgKzIrIHN0eWxlLmdhcCkqc2NhbGUpO1xyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICBsZXQgY2xvbmVHYXBzID0gW10uY29uY2F0KGdhcHMpO1xyXG4gICAgICAgICAgICBsZXQgcG9pbnRzID0gZC5nZXROb2RlUGF0aChsaW5lLCBnYXBzKTtcclxuICAgICAgICAgICAgbGV0IHRleHRQb2ludHMgPSBwb2ludHMucG9pbnRMaXN0O1xyXG5cclxuICAgICAgICAgICAgaWYodGV4dFBvaW50cy5sZW5ndGggPiAxKXtcclxuICAgICAgICAgICAgICAgIGluZGV4ID0gcG9pbnRzLmluZGV4O1xyXG4gICAgICAgICAgICAgICAgLy/pnIDopoHlu7bplb/nmoTlrZfkuKrmlbBcclxuICAgICAgICAgICAgICAgIGxldCBkZWxheUxlbmd0aCA9IGZlYXR1cmUubGFiZWwubGVuZ3RoIC0gdGV4dFBvaW50cy5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICBpZihkZWxheUxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gbGluZS5sZW5ndGg7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mkYbkuI3kuIvnmoTlrZfmlbDlsJHkuo4z5Liq5a2X5bu26ZW/XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZGVsYXlMZW5ndGggPHN0eWxlLmV4dGVuZGVkTnVtKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5kZWxheVRleHRQb2ludChsaW5lLHRleHRQb2ludHMsZmVhdHVyZS5sYWJlbCwoc3R5bGUuY2hpbmFMYWJlbFdpZHRoICsgc3R5bGUuZ2FwKSpzY2FsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiB7ZmVhdHVyZTpudWxsLGluZGV4OmluZGV4fTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgIC8v5aaC5p6c5paH5a2X5rOo6K6w5peL6L2s6KeS5bqm5pa55ZCR5LiN5LiA6Ie0KOacieeahOWtl+WQkeW3pu+8jOacieeahOWtl+WQkeWPs+aXi+i9rCnvvIzliJnosIPmlbTkuLrkuIDoh7RcclxuICAgICAgICAgICAgICAgIEF2b2lkVXRpbC50ZXh0VG9TYW1lQmVhcmluZyh0ZXh0UG9pbnRzKTtcclxuICAgICAgICAgICAgICAgIHRleHRGZWF0dXJlID0gIHRoaXMuY2xvbmVGZWF0dXJlKGZlYXR1cmUpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKHN0eWxlLmNoYW5nZURpcmVjdGlvbiAhPSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/mlLnlj5jmlrnlkJFcclxuICAgICAgICAgICAgICAgICAgICAvL+WIpOaWreaYr+WQpuW6lOivpeaNouaWueWQkVxyXG4gICAgICAgICAgICAgICAgICAgIC8vIGxldCBzaG93Q2hhbmdlZCA9IEF2b2lkVXRpbC5pc0NoYW5nZURpcmVjdGlvbihmZWF0dXJlLmxhYmVsLHAxLCBwMixhbmdsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gaWYgKHNob3dDaGFuZ2VkKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gICAgIHRleHRQb2ludHMgPSB0ZXh0UG9pbnRzLnJldmVyc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdGV4dEZlYXR1cmUuYXR0cmlidXRlSWQgPSBmZWF0dXJlLmF0dHJpYnV0ZUlkICsnX3RleHQnO1xyXG4gICAgICAgICAgICAgICAgdGV4dEZlYXR1cmUuc291cmNlQW5nbGVEYXRhID0gdGV4dFBvaW50cztcclxuICAgICAgICAgICAgICAgIHRleHRGZWF0dXJlLmxpbmVUeXBlID0gJ3RleHQnO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIC8vZ2wg5pqC5pe25LiN5pSv5oyB55S75LiA5Liq54K555qE57q/5rOo6K6wXHJcbiAgICAgICAgICAgICAgICAvLyBpZihzdHlsZS5pc1RyYW5zdmVyc2UgJiYgIXN0eWxlLnNob3dSb2FkQ29kZSl7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGV4dEZlYXR1cmUgPSAgdGhpcy5jbG9uZUZlYXR1cmUoZmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAvLyAgICAgdGV4dEZlYXR1cmUuYXR0cmlidXRlSWQgPSBmZWF0dXJlLmxheWVyTmFtZSArJ19fJysgZmVhdHVyZS5vYmplY3RJZCArJ190ZXh0JztcclxuICAgICAgICAgICAgICAgIC8vICAgICB0ZXh0RmVhdHVyZS5zb3VyY2VBbmdsZURhdGEgPSBbW1tsaW5lWzBdLGxpbmVbMV1dLDBdXTtcclxuICAgICAgICAgICAgICAgIC8vICAgICB0ZXh0RmVhdHVyZS5saW5lVHlwZSA9ICd0ZXh0JztcclxuICAgICAgICAgICAgICAgIC8vICAgICBpbmRleCA9MjtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYodGV4dEZlYXR1cmUpe1xyXG4gICAgICAgICAgICAgICAgLy/lubPnp7tcclxuICAgICAgICAgICAgICAgIGlmKHN0eWxlLmxpbmVPZmZzZXQgJiYgdGV4dEZlYXR1cmUuc291cmNlQW5nbGVEYXRhLmxlbmd0aCA+IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHRleHRGZWF0dXJlLnNvdXJjZUFuZ2xlRGF0YSA9IEdpc1Rvb2xzLmxpbmVPZmZzZXQodGV4dEZlYXR1cmUuc291cmNlQW5nbGVEYXRhLHN0eWxlLmxpbmVPZmZzZXQpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgdGV4dEZlYXR1cmUudGV4dFBvaW50cyA9IHRleHRGZWF0dXJlLnNvdXJjZUFuZ2xlRGF0YTtcclxuICAgICAgICAgICAgICAgIHRleHRGZWF0dXJlLnByaW1hcnlJZCA9IHRleHRGZWF0dXJlLmF0dHJpYnV0ZUlkICsgJ19yb3dfJyArIGZlYXR1cmUueHl6LnkgKyAnX2NvbF8nICsgZmVhdHVyZS54eXoueCArICdfbGV2ZWxfJyArIGZlYXR1cmUueHl6LnpcclxuICAgICAgICAgICAgICAgICAgICArICdfeF8nICsgdGV4dEZlYXR1cmUuc291cmNlQW5nbGVEYXRhWzBdWzBdWzBdICsgJ195XycgKyB0ZXh0RmVhdHVyZS5zb3VyY2VBbmdsZURhdGFbMF1bMF1bMV07XHJcbiAgICAgICAgICAgICAgICB0ZXh0RmVhdHVyZS5pZCA9IHRleHRGZWF0dXJlLmF0dHJpYnV0ZUlkICsgJ19yb3dfJyArIGZlYXR1cmUueHl6LnkgKyAnX2NvbF8nICsgZmVhdHVyZS54eXoueCArICdfbGV2ZWxfJyArIGZlYXR1cmUueHl6LnpcclxuICAgICAgICAgICAgICAgICAgICArICdfeF8nICsgbGluZVswXSArICdfeV8nICsgbGluZVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge2ZlYXR1cmU6dGV4dEZlYXR1cmUsaW5kZXg6aW5kZXh9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yib5bu657q/57yW56CB5rOo6K6wXHJcbiAgICAgKiAgUGFyYW1ldGVycyA6XHJcbiAgICAgKiAgZmVhdHVyZVxyXG4gICAgICogIGluZGV4IC0g5Y+v55So55qEbGluZeeahGluZGV45L2N572uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVMaW5lQ29kZUZlYXRydWUoZmVhdHVyZSxzdHlsZSxpbmRleCl7XHJcbiAgICAgICAgbGV0IGxpbmUgPSBmZWF0dXJlLnNvdXJjZURhdGE7XHJcbiAgICAgICAgbGV0IGQgPSBuZXcgR0Rpc3RhbmNlKCk7XHJcbiAgICAgICAgbGV0IGdhcHMgPSBbXTtcclxuICAgICAgICBsZXQgY29kZUZlYXR1cmUgPW51bGw7XHJcblxyXG4gICAgICAgIGxldCByb2FkTGFiZWwgPSBmZWF0dXJlLnJvYWRDb2RlTGFiZWw7XHJcbiAgICAgICAgLy/lpoLmnpzmnInpgZPot6/nvJbnoIFcclxuICAgICAgICBpZihzdHlsZS5zaG93Um9hZENvZGUgJiYgQXZvaWRVdGlsLmlzTm90TnVsbChyb2FkTGFiZWwpICYmIGluZGV4IDwgbGluZS5sZW5ndGgpe1xyXG4gICAgICAgICAgICBsZXQgY29kZUxpbmUgPSBsaW5lLnNsaWNlKGluZGV4LGxpbmUubGVuZ3RoIC0xKTtcclxuICAgICAgICAgICAgLy/pu5jorqTmmK8zMOS4quWDj+e0oFxyXG4gICAgICAgICAgICBnYXBzLnB1c2goMzApO1xyXG4gICAgICAgICAgICBsZXQgY1BvaW50cyA9IGQuZ2V0Tm9kZVBhdGgoY29kZUxpbmUsIGdhcHMpO1xyXG4gICAgICAgICAgICBsZXQgY29kZVBvaW50cyA9IGNQb2ludHMucG9pbnRMaXN0O1xyXG4gICAgICAgICAgICBpZihjb2RlUG9pbnRzLmxlbmd0aCAgPT0gMSl7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IGluZGV4ICsgY1BvaW50cy5pbmRleDtcclxuICAgICAgICAgICAgICAgIGNvZGVGZWF0dXJlID0gIHRoaXMuY2xvbmVGZWF0dXJlKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgY29kZUZlYXR1cmUuYXR0cmlidXRlSWQgPSBmZWF0dXJlLmF0dHJpYnV0ZUlkKydfY29kZSc7XHJcbiAgICAgICAgICAgICAgICBjb2RlRmVhdHVyZS5zb3VyY2VBbmdsZURhdGEgPSBjb2RlUG9pbnRzO1xyXG4gICAgICAgICAgICAgICAgY29kZUZlYXR1cmUubGluZVR5cGUgPSAnY29kZSc7XHJcbiAgICAgICAgICAgICAgICBjb2RlRmVhdHVyZS5sYWJlbCA9IHJvYWRMYWJlbCsnJztcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoY29kZVBvaW50cy5sZW5ndGggPT0wKXtcclxuICAgICAgICAgICAgICAgIGNvZGVGZWF0dXJlID0gIHRoaXMuY2xvbmVGZWF0dXJlKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgY29kZUZlYXR1cmUuYXR0cmlidXRlSWQgPSBmZWF0dXJlLmF0dHJpYnV0ZUlkKydfY29kZSc7XHJcbiAgICAgICAgICAgICAgICBjb2RlRmVhdHVyZS5zb3VyY2VBbmdsZURhdGEgPSBbW1tsaW5lWzBdLGxpbmVbMV1dLDBdXTtcclxuICAgICAgICAgICAgICAgIGNvZGVGZWF0dXJlLmxpbmVUeXBlID0gJ2NvZGUnO1xyXG4gICAgICAgICAgICAgICAgY29kZUZlYXR1cmUubGFiZWwgPSByb2FkTGFiZWwrJyc7XHJcbiAgICAgICAgICAgICAgICBpbmRleCA9IDI7XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIGNvZGVGZWF0dXJlLnRleHRQb2ludHMgPSBbY29kZUZlYXR1cmUuc291cmNlQW5nbGVEYXRhWzBdWzBdXTtcclxuICAgICAgICAgICAgY29kZUZlYXR1cmUucHJpbWFyeUlkID0gY29kZUZlYXR1cmUuYXR0cmlidXRlSWQgKyAnX3Jvd18nICsgZmVhdHVyZS54eXoueSArICdfY29sXycgKyBmZWF0dXJlLnh5ei54ICsgJ19sZXZlbF8nICsgZmVhdHVyZS54eXouelxyXG4gICAgICAgICAgICAgICAgKyAnX3hfJyArIGNvZGVGZWF0dXJlLnNvdXJjZUFuZ2xlRGF0YVswXVswXVswXSArICdfeV8nICsgY29kZUZlYXR1cmUuc291cmNlQW5nbGVEYXRhWzBdWzBdWzFdO1xyXG4gICAgICAgICAgICBjb2RlRmVhdHVyZS5pZCA9IGNvZGVGZWF0dXJlLmF0dHJpYnV0ZUlkICsgJ19yb3dfJyArIGZlYXR1cmUueHl6LnkgKyAnX2NvbF8nICsgZmVhdHVyZS54eXoueCArICdfbGV2ZWxfJyArIGZlYXR1cmUueHl6LnpcclxuICAgICAgICAgICAgICAgICsgJ194XycgKyBsaW5lWzBdICsgJ195XycgKyBsaW5lWzFdO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge2ZlYXR1cmU6Y29kZUZlYXR1cmUsaW5kZXg6aW5kZXh9O1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yib5bu657q/566t5aS05rOo6K6wXHJcbiAgICAgKiAgUGFyYW1ldGVycyA6XHJcbiAgICAgKiAgZmVhdHVyZVxyXG4gICAgICogIGluZGV4IC0g5Y+v55So55qEbGluZeeahGluZGV45L2N572uXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjcmVhdGVMaW5lQXJyb3dGZWF0cnVlKGZlYXR1cmUsc3R5bGUsaW5kZXgpe1xyXG4gICAgICAgIGxldCBsaW5lID0gZmVhdHVyZS5zb3VyY2VEYXRhO1xyXG4gICAgICAgIGxldCBkID0gbmV3IEdEaXN0YW5jZSgpO1xyXG4gICAgICAgIGxldCBnYXBzID0gW107XHJcbiAgICAgICAgbGV0IGFycm93RmVhdHVyZSA9bnVsbDtcclxuXHJcbiAgICAgICAgLy/lpoLmnpzmnInnrq3lpLRcclxuICAgICAgICBpZihzdHlsZS5zaG93QXJyb3cgJiYgaW5kZXggPCBsaW5lLmxlbmd0aCl7XHJcbiAgICAgICAgICAgIGxldCBhcnJvd0xpbmUgPSBsaW5lLnNsaWNlKGluZGV4LGxpbmUubGVuZ3RoIC0xKTtcclxuICAgICAgICAgICAgZ2Fwcy5wdXNoKDE2KTtcclxuICAgICAgICAgICAgZ2Fwcy5wdXNoKDE2KTtcclxuICAgICAgICAgICAgbGV0IGFQb2ludHMgPSBkLmdldE5vZGVQYXRoKGFycm93TGluZSwgZ2Fwcyk7XHJcbiAgICAgICAgICAgIGxldCBhcnJvd1BvaW50cyA9IGFQb2ludHMucG9pbnRMaXN0O1xyXG5cclxuICAgICAgICAgICAgaWYoYXJyb3dQb2ludHMubGVuZ3RoID09IDIpe1xyXG4gICAgICAgICAgICAgICAgYXJyb3dGZWF0dXJlID0gIHRoaXMuY2xvbmVGZWF0dXJlKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgYXJyb3dGZWF0dXJlLmF0dHJpYnV0ZUlkID0gZmVhdHVyZS5hdHRyaWJ1dGVJZCsnX2Fycm93JztcclxuICAgICAgICAgICAgICAgIGFycm93RmVhdHVyZS5zb3VyY2VBbmdsZURhdGEgPSBhcnJvd1BvaW50cztcclxuICAgICAgICAgICAgICAgIGFycm93RmVhdHVyZS50ZXh0UG9pbnRzID0gYXJyb3dQb2ludHM7XHJcbiAgICAgICAgICAgICAgICBhcnJvd0ZlYXR1cmUubGluZVR5cGUgPSAnYXJyb3cnO1xyXG5cclxuICAgICAgICAgICAgICAgIGFycm93RmVhdHVyZS5wcmltYXJ5SWQgPSBhcnJvd0ZlYXR1cmUuYXR0cmlidXRlSWQgKyAnX3Jvd18nICsgZmVhdHVyZS54eXoueSArICdfY29sXycgKyBmZWF0dXJlLnh5ei54ICsgJ19sZXZlbF8nICsgZmVhdHVyZS54eXouelxyXG4gICAgICAgICAgICAgICAgICAgICsgJ194XycgKyBhcnJvd0ZlYXR1cmUuc291cmNlQW5nbGVEYXRhWzBdWzBdWzBdICsgJ195XycgKyBhcnJvd0ZlYXR1cmUuc291cmNlQW5nbGVEYXRhWzBdWzBdWzFdO1xyXG4gICAgICAgICAgICAgICAgYXJyb3dGZWF0dXJlLmlkID0gYXJyb3dGZWF0dXJlLmF0dHJpYnV0ZUlkICsgJ19yb3dfJyArIGZlYXR1cmUueHl6LnkgKyAnX2NvbF8nICsgZmVhdHVyZS54eXoueCArICdfbGV2ZWxfJyArIGZlYXR1cmUueHl6LnpcclxuICAgICAgICAgICAgICAgICAgICArICdfeF8nICsgbGluZVswXSArICdfeV8nICsgbGluZVsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4ge2ZlYXR1cmU6YXJyb3dGZWF0dXJlLGluZGV4OmluZGV4fTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOW9k+e6v+aWh+Wtl+aUvuS4jeS4i+aXtu+8jOiOt+WPluW7tumVv+e6v+S4iueahOeCuVxyXG4gICAgICogIFBhcmFtZXRlcnMgOlxyXG4gICAgICogIGxpbmUgLSDljp/lp4vnur/lnZDmoIdcclxuICAgICAqICB0ZXh0UG9pbnRzIC0g5YiH5Ymy5LmL5ZCO55qE54K55Z2Q5qCHXHJcbiAgICAgKiAgbGFiZWwgLSDnur/ms6jorrBcclxuICAgICAqICBnYXAgLSDmr4/kuKrlrZfkuYvpl7TnmoTpl7TpmpRcclxuICAgICAqICBzaG93Q2hhbmdlZFxyXG4gICAgICpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGRlbGF5VGV4dFBvaW50KGxpbmUsdGV4dFBvaW50cyxsYWJlbCxnYXApe1xyXG4gICAgICAgIGxldCBmcmlzdFBvaW50ID0gbnVsbDtcclxuICAgICAgICBsZXQgc2Vjb25kUG9pbnQgPSBudWxsO1xyXG4gICAgICAgIC8v5aaC5p6c5Y+q6IO95pS+5LiL5LiA5Liq5a2XXHJcbiAgICAgICAgaWYodGV4dFBvaW50cy5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgIGZyaXN0UG9pbnQgPSBbbGluZVswXSxsaW5lWzFdXTtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgZnJpc3RQb2ludCA9IHRleHRQb2ludHNbdGV4dFBvaW50cy5sZW5ndGgtMl1bMF07XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHNlY29uZFBvaW50ID0gdGV4dFBvaW50c1t0ZXh0UG9pbnRzLmxlbmd0aC0xXVswXTtcclxuICAgICAgICBsZXQgYW5nbGUgPSB0ZXh0UG9pbnRzW3RleHRQb2ludHMubGVuZ3RoLTFdWzFdO1xyXG5cclxuICAgICAgICBsZXQgbGVuID0gdGV4dFBvaW50cy5sZW5ndGg7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMTtpPGxhYmVsLmxlbmd0aCAtIGxlbiArMTtpKyspe1xyXG4gICAgICAgICAgICBsZXQgcCA9IHRoaXMuZ2V0UG9pbnQoZnJpc3RQb2ludCxzZWNvbmRQb2ludCxnYXAqaSk7XHJcbiAgICAgICAgICAgIGxldCB0ZXh0UG9pbnQgPSBbcCxhbmdsZV07XHJcbiAgICAgICAgICAgIHRleHRQb2ludHMucHVzaCh0ZXh0UG9pbnQpO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOWFi+mahmZlYXR1cmVcclxuICAgICAqICBQYXJhbWV0ZXJzIDpcclxuICAgICAqICBmZWF0dXJlIC0g5Y2V5Liq57q/5rOo6K6w6KaB57SgXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjbG9uZUZlYXR1cmUoZmVhdHVyZSl7XHJcbiAgICAgICAgcmV0dXJuIHt0eXBlOmZlYXR1cmUudHlwZSxkYXRhczpmZWF0dXJlLmRhdGFzLGNlbnRlclBvaW50OmZlYXR1cmUuY2VudGVyUG9pbnQsc291cmNlRGF0YTpmZWF0dXJlLnNvdXJjZURhdGEsbGFiZWw6ZmVhdHVyZS5sYWJlbCxyb2FkQ29kZUxhYmVsOmZlYXR1cmUucm9hZENvZGVMYWJlbCxcclxuICAgICAgICAgICAgYXR0cmlidXRlczpmZWF0dXJlLmF0dHJpYnV0ZXMsYXR0cmlidXRlSWQ6ZmVhdHVyZS5hdHRyaWJ1dGVJZCxzdHlsZUlkOmZlYXR1cmUuc3R5bGVJZCx0ZXh0dXJlczpmZWF0dXJlLnRleHR1cmVzLHh5ejpmZWF0dXJlLnh5eixcclxuICAgICAgICAgICAgbGluZVR5cGU6ZmVhdHVyZS5saW5lVHlwZSx3ZWlnaHQ6ZmVhdHVyZS53ZWlnaHQsbGF5ZXJOYW1lOmZlYXR1cmUubGF5ZXJOYW1lLG9iamVjdElkOmZlYXR1cmUub2JqZWN0SWR9O1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaxguS4pOeCueS5i+mXtOeahOi3neemu1xyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0RGlzdGFuY2UocDEscDIpe1xyXG4gICAgICAgIGxldCBjYWxYID0gcDJbMF0gLSBwMVswXTtcclxuICAgICAgICBsZXQgY2FsWSA9IHAyWzFdIC0gcDFbMV07XHJcbiAgICAgICAgcmV0dXJuIE1hdGgucG93KChjYWxYICpjYWxYICsgY2FsWSAqIGNhbFkpLCAwLjUpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W57q/55qE6ZW/5bqmXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRMaW5lRGlzdGFuY2UobGluZSl7XHJcbiAgICAgICAgaWYobGluZS5sZW5ndGggPDQpe1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBkaXMgPSAwO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7aTxsaW5lLmxlbmd0aC8yLTE7aSsrKXtcclxuICAgICAgICAgICAgbGV0IHAxID0gW2xpbmVbMippXSxsaW5lWzIqaSsxXV07XHJcbiAgICAgICAgICAgIGxldCBwMiA9IFtsaW5lWzIqKGkrMSldLGxpbmVbMiooaSsxKSsxXV07XHJcbiAgICAgICAgICAgIGRpcyA9IGRpcyArIHRoaXMuZ2V0RGlzdGFuY2UocDEscDIpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZGlzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bey55+l5Lik54K577yM5bu26ZW/6Led56a777yM6I635Y+W5bu26ZW/57q/5LiK55qE54K55Z2Q5qCHXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXRQb2ludChwMSxwMixkKXtcclxuICAgICAgICBsZXQgeGFiID0gcDJbMF0gLSBwMVswXTtcclxuICAgICAgICBsZXQgeWFiID0gcDJbMV0gLSBwMVsxXTtcclxuICAgICAgICBsZXQgeGQgPSBwMlswXTtcclxuICAgICAgICBsZXQgeWQgPSBwMlsxXTtcclxuICAgICAgICBpZih4YWIgPT0gMCl7XHJcbiAgICAgICAgICAgIGlmKHlhYiA+IDApe1xyXG4gICAgICAgICAgICAgICAgeWQgPSBwMlsxXSArIGQ7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgeWQgPSBwMlsxXSAtIGQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgbGV0IHhiZCA9IE1hdGguc3FydCgoZCAqIGQpLygoeWFiL3hhYikgKiAoeWFiL3hhYikgKyAxKSk7XHJcbiAgICAgICAgICAgIGlmICh4YWIgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICB4YmQgPSAteGJkXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHhkID0gcDJbMF0gKyB4YmQ7XHJcbiAgICAgICAgICAgIHlkID0gcDJbMV0gKyB5YWIgLyB4YWIgKiB4YmQ7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBbeGQseWRdO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdDdXRMaW5lOyIsIi8qKlxyXG4gKiBDcmVhdGVkIGJ5IG1hdHQgb24gMjAxNy8zLzUuXHJcbiAqL1xyXG5jbGFzcyBHRGlzdGFuY2V7XHJcbiAgICBnZXRMZW5ndGhQb2ludChmcm9tWCwgZnJvbVksIHRvWCwgdG9ZLCBsZW4saW5kZXgpe1xyXG4gICAgICAgIGxldCBkeCA9IHRvWCAtIGZyb21YO1xyXG4gICAgICAgIGxldCBkeSA9IHRvWSAtIGZyb21ZO1xyXG4gICAgICAgIGxldCB4X25ldztcclxuICAgICAgICBsZXQgeV9uZXc7XHJcbiAgICAgICAgaWYoZHggPT0gMCl7XHJcbiAgICAgICAgICAgIHhfbmV3ID0gdG9YO1xyXG4gICAgICAgICAgICBpZihkeSA+IDApe1xyXG4gICAgICAgICAgICAgICAgeV9uZXcgPSBmcm9tWSArIGxlbjtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB5X25ldyA9IGZyb21ZIC0gbGVuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGluZGV4ID09IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt4X25ldyx5X25ld107XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFt4X25ldyx5X25ldyxpbmRleF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCB0YW4gPSBkeSAvIGR4O1xyXG4gICAgICAgIGxldCBzZWMgPSBNYXRoLnNxcnQoKHRhbiAqIHRhbikgKyAxKTtcclxuICAgICAgICBsZXQgZHhfbmV3ID0gTWF0aC5hYnMobGVuIC8gc2VjKTtcclxuICAgICAgICBsZXQgZHlfbmV3ID0gTWF0aC5hYnMoZHhfbmV3ICogdGFuKTtcclxuICAgICAgICBpZihkeCA+IDApe1xyXG4gICAgICAgICAgICB4X25ldyA9IGZyb21YICsgZHhfbmV3O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB4X25ldyA9IGZyb21YIC0gZHhfbmV3O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihkeSA+IDApe1xyXG4gICAgICAgICAgICB5X25ldyA9IGZyb21ZICsgZHlfbmV3O1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICB5X25ldyA9IGZyb21ZIC0gZHlfbmV3O1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZihpbmRleCA9PSBudWxsKXtcclxuICAgICAgICAgICAgcmV0dXJuIFt4X25ldyx5X25ld107XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiBbeF9uZXcseV9uZXcsaW5kZXhdO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBnZXRBbmdsZShwMSxwMil7XHJcbiAgICAgICAgaWYocDJbMF0tcDFbMF0gPT0gMCl7XHJcbiAgICAgICAgICAgIGlmKHAyWzFdPnAxWzBdKXtcclxuICAgICAgICAgICAgICAgIHJldHVybiA5MDtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTkwO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGxldCBrID0gKHAyWzFdLXAxWzFdKS8ocDJbMF0tcDFbMF0pO1xyXG4gICAgICAgIGxldCBhbmdsZSA9IDM2MCpNYXRoLmF0YW4oaykvKDIqTWF0aC5QSSk7XHJcbiAgICAgICAgcmV0dXJuIGFuZ2xlO1xyXG4gICAgfVxyXG5cclxuICAgIGxlbmd0aCh4MCwgeTAsIHgxLCB5MSl7XHJcbiAgICAgICAgbGV0IGR4ID0geDEgLSB4MDtcclxuICAgICAgICBsZXQgZHkgPSB5MSAtIHkwO1xyXG4gICAgICAgIGxldCBsZW4gPSBNYXRoLnNxcnQoZHggKiBkeCArIGR5ICogZHkpO1xyXG4gICAgICAgIHJldHVybiBsZW47XHJcbiAgICB9XHJcblxyXG4gICAgZ2V0Tm9kZVBhdGgoY29vcmRzLGludGVydmFsKXtcclxuICAgICAgICBsZXQgcHJldmlvdXMgPSBbXTtcclxuICAgICAgICBsZXQgcG9pbnRzID0ge307XHJcbiAgICAgICAgbGV0IHBvaW50TGlzdCA9IFtdO1xyXG4gICAgICAgIGxldCBpbnRlcnZhbExlbmd0aCA9IGludGVydmFsLmxlbmd0aDtcclxuXHJcbiAgICAgICAgLy/liJ3lp4vljJbmoIforrDplb/luqbnrYnkuo7ljZXkvY3plb/luqZcclxuICAgICAgICBsZXQgZnVuX2dldEludGVydmFsID0gZnVuY3Rpb24oaW50ZXJ2YWwpe1xyXG4gICAgICAgICAgICBsZXQgdmFsdWUgPSBpbnRlcnZhbFswXTtcclxuICAgICAgICAgICAgaW50ZXJ2YWwuc3BsaWNlKDAsMSk7XHJcbiAgICAgICAgICAgIHJldHVybiB2YWx1ZTtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IG1hcmtMZW5ndGggPSBmdW5fZ2V0SW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICAgIGxldCBpbmRleCA9IDA7XHJcbiAgICAgICAgd2hpbGUodHJ1ZSl7XHJcbiAgICAgICAgICAgIGlmKHBvaW50TGlzdC5sZW5ndGggPT0gaW50ZXJ2YWxMZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgcG9pbnRzLmluZGV4ID0gaW5kZXg7XHJcblxyXG4gICAgICAgICAgICAgICAgLy8gaWYocG9pbnRMaXN0Lmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGxldCBmcmlzdFB0ID0gW1tjb29yZHNbMF0sY29vcmRzWzFdXSxwb2ludExpc3RbMF1bMV1dO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHBvaW50TGlzdC51bnNoaWZ0KGZyaXN0UHQpO1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIHBvaW50TGlzdC5wb3AoKTtcclxuICAgICAgICAgICAgICAgIC8vIH1cclxuXHJcbiAgICAgICAgICAgICAgICBwb2ludHMucG9pbnRMaXN0ID0gcG9pbnRMaXN0O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHBvaW50cztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihpbmRleCA+PSBjb29yZHMubGVuZ3RoKXtcclxuICAgICAgICAgICAgICAgIHBvaW50cy5pbmRleCA9IGluZGV4O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGlmKHBvaW50TGlzdC5sZW5ndGggPiAwKXtcclxuICAgICAgICAgICAgICAgIC8vICAgICBsZXQgZnJpc3RQdCA9IFtbY29vcmRzWzBdLGNvb3Jkc1sxXV0scG9pbnRMaXN0WzBdWzFdXTtcclxuICAgICAgICAgICAgICAgIC8vICAgICBwb2ludExpc3QudW5zaGlmdChmcmlzdFB0KTtcclxuICAgICAgICAgICAgICAgIC8vICAgICBwb2ludExpc3QucG9wKCk7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICAgICAgcG9pbnRzLnBvaW50TGlzdCA9IHBvaW50TGlzdDtcclxuICAgICAgICAgICAgICAgIHJldHVybiBwb2ludHM7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IHggPSBjb29yZHNbaW5kZXhdO1xyXG4gICAgICAgICAgICBsZXQgeSA9IGNvb3Jkc1tpbmRleCArIDFdO1xyXG4gICAgICAgICAgICAvL+WIpOaWreS4iuS4gOS4quiKgueCueaYr+WQpuS4uuepulxyXG4gICAgICAgICAgICBpZihwcmV2aW91cy5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAvL+WmguaenOS4uuepuuWwseiuvue9ruW9k+WJjeeCueWIsCDkuIrkuIDkuKroioLngrnkuIpcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzWzBdID0geDtcclxuICAgICAgICAgICAgICAgIHByZXZpb3VzWzFdID0geTtcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuXHJcbiAgICAgICAgICAgICAgICAvL+WmguaenOS4jeS4uuepuuWImemcgOimgeaxguS4iuS4gOS4quiKgueCueS4juW9k+WJjee7k+eCueeahOi3neemu1xyXG4gICAgICAgICAgICAgICAgbGV0IGxlbmd0aFBhdGggPSB0aGlzLmxlbmd0aChwcmV2aW91c1swXSwgcHJldmlvdXNbMV0sIHgsIHkpO1xyXG4gICAgICAgICAgICAgICAgLy/mioroioLngrnplb/luqbliqDotbfmnaVcclxuXHJcbiAgICAgICAgICAgICAgICBpZihsZW5ndGhQYXRoID49IG1hcmtMZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5aaC5p6c6ZW/5bqm5aSn5LqO5qCH6K6w6ZW/5bqm77yM5YiZ6ZyA6KaB5LiK5LiA54K55Yiw5qCH6K6w5oiQ6YO955qE54K5XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNhdmVQb2ludCA9IHRoaXMuZ2V0TGVuZ3RoUG9pbnQocHJldmlvdXNbMF0scHJldmlvdXNbMV0sIHgseSwgbWFya0xlbmd0aCxudWxsKTtcclxuICAgICAgICAgICAgICAgICAgICBsZXQgYW5nbGUgPSB0aGlzLmdldEFuZ2xlKHByZXZpb3VzLFt4LHldKTtcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYW5nbGUgPT0gOTApe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFuZ2xlID09IC05MCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gMDtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYW5nbGUgPT0gMCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gMC41O1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy/kv53or4Hnq5bmlrnlkJHnmoTlrZfmmK/mraPnmoRcclxuICAgICAgICAgICAgICAgICAgICBpZihhbmdsZSA+PSA0NSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGFuZ2xlID0gYW5nbGUgLSA5MDtcclxuICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoYW5nbGUgPD0gLSA0NSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBhbmdsZSA9IGFuZ2xlICsgOTA7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgICAgICAgICBsZXQgcG9pbnRBbmdsZSA9IFtzYXZlUG9pbnQsYW5nbGVdO1xyXG4gICAgICAgICAgICAgICAgICAgIHBvaW50TGlzdC5wdXNoKHBvaW50QW5nbGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzWzBdID0gc2F2ZVBvaW50WzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIHByZXZpb3VzWzFdID0gc2F2ZVBvaW50WzFdO1xyXG4gICAgICAgICAgICAgICAgICAgIG1hcmtMZW5ndGggPSBmdW5fZ2V0SW50ZXJ2YWwoaW50ZXJ2YWwpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgbWFya0xlbmd0aCA9IG1hcmtMZW5ndGggLSBsZW5ndGhQYXRoO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICBwcmV2aW91c1swXSA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgcHJldmlvdXNbMV0gPSB5O1xyXG4gICAgICAgICAgICAgICAgICAgIGluZGV4ID0gaW5kZXggKyAyO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBwb2ludHMuaW5kZXggPSBpbmRleDtcclxuXHJcbiAgICAgICAgLy8gaWYocG9pbnRMaXN0Lmxlbmd0aCA+IDApe1xyXG4gICAgICAgIC8vICAgICBsZXQgZnJpc3RQdCA9IFtbY29vcmRzWzBdLGNvb3Jkc1sxXV0scG9pbnRMaXN0WzBdWzFdXTtcclxuICAgICAgICAvLyAgICAgcG9pbnRMaXN0LnVuc2hpZnQoZnJpc3RQdCk7XHJcbiAgICAgICAgLy8gICAgIHBvaW50TGlzdC5wb3AoKTtcclxuICAgICAgICAvLyB9XHJcbiAgICAgICAgcG9pbnRzLnBvaW50TGlzdCA9IHBvaW50TGlzdDtcclxuICAgICAgICByZXR1cm4gcG9pbnRzO1xyXG4gICAgfVxyXG59XHJcblxyXG5tb2R1bGUuZXhwb3J0cyA9IEdEaXN0YW5jZTtcclxuXHJcblxyXG5cclxuXHJcblxyXG4iLCJcbm1vZHVsZS5leHBvcnRzID0gR0dyaWRJbmRleDtcbnZhciBOVU1fUEFSQU1TID0gMztcbmZ1bmN0aW9uIEdHcmlkSW5kZXgoZXh0ZW50LCBuLCBwYWRkaW5nKSB7XG4gICAgdmFyIGNlbGxzID0gdGhpcy5jZWxscyA9IFtdO1xuXG4gICAgaWYgKGV4dGVudCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyKSB7XG4gICAgICAgIHRoaXMuYXJyYXlCdWZmZXIgPSBleHRlbnQ7XG4gICAgICAgIHZhciBhcnJheSA9IG5ldyBJbnQzMkFycmF5KHRoaXMuYXJyYXlCdWZmZXIpO1xuICAgICAgICBleHRlbnQgPSBhcnJheVswXTtcbiAgICAgICAgbiA9IGFycmF5WzFdO1xuICAgICAgICBwYWRkaW5nID0gYXJyYXlbMl07XG5cbiAgICAgICAgdGhpcy5kID0gbiArIDIgKiBwYWRkaW5nO1xuICAgICAgICBmb3IgKHZhciBrID0gMDsgayA8IHRoaXMuZCAqIHRoaXMuZDsgaysrKSB7XG4gICAgICAgICAgICB2YXIgc3RhcnQgPSBhcnJheVtOVU1fUEFSQU1TICsga107XG4gICAgICAgICAgICB2YXIgZW5kID0gYXJyYXlbTlVNX1BBUkFNUyArIGsgKyAxXTtcbiAgICAgICAgICAgIGNlbGxzLnB1c2goc3RhcnQgPT09IGVuZCA/XG4gICAgICAgICAgICAgICAgICAgIG51bGwgOlxuICAgICAgICAgICAgICAgICAgICBhcnJheS5zdWJhcnJheShzdGFydCwgZW5kKSk7XG4gICAgICAgIH1cbiAgICAgICAgdmFyIGtleXNPZmZzZXQgPSBhcnJheVtOVU1fUEFSQU1TICsgY2VsbHMubGVuZ3RoXTtcbiAgICAgICAgdmFyIGJib3hlc09mZnNldCA9IGFycmF5W05VTV9QQVJBTVMgKyBjZWxscy5sZW5ndGggKyAxXTtcbiAgICAgICAgdGhpcy5rZXlzID0gYXJyYXkuc3ViYXJyYXkoa2V5c09mZnNldCwgYmJveGVzT2Zmc2V0KTtcbiAgICAgICAgdGhpcy5iYm94ZXMgPSBhcnJheS5zdWJhcnJheShiYm94ZXNPZmZzZXQpO1xuXG4gICAgICAgIHRoaXMuaW5zZXJ0ID0gdGhpcy5faW5zZXJ0UmVhZG9ubHk7XG5cbiAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmQgPSBuICsgMiAqIHBhZGRpbmc7XG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5kICogdGhpcy5kOyBpKyspIHtcbiAgICAgICAgICAgIGNlbGxzLnB1c2goW10pO1xuICAgICAgICB9XG4gICAgICAgIHRoaXMua2V5cyA9IFtdO1xuICAgICAgICB0aGlzLmJib3hlcyA9IFtdO1xuICAgIH1cblxuICAgIHRoaXMubiA9IG47XG4gICAgdGhpcy5leHRlbnQgPSBleHRlbnQ7XG4gICAgdGhpcy5wYWRkaW5nID0gcGFkZGluZztcbiAgICB0aGlzLnNjYWxlID0gbiAvIGV4dGVudDtcbiAgICB0aGlzLnVpZCA9IDA7XG5cbiAgICB2YXIgcCA9IChwYWRkaW5nIC8gbikgKiBleHRlbnQ7XG4gICAgdGhpcy5taW4gPSAtcDtcbiAgICB0aGlzLm1heCA9IGV4dGVudCArIHA7XG5cbiAgICB0aGlzLmtleVVpZE1hcCA9IHt9O1xufVxuXG5cbkdHcmlkSW5kZXgucHJvdG90eXBlLmluc2VydCA9IGZ1bmN0aW9uKGtleSwgeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB0aGlzLl9mb3JFYWNoQ2VsbCh4MSwgeTEsIHgyLCB5MiwgdGhpcy5faW5zZXJ0Q2VsbCwgdGhpcy51aWQrKyk7XG4gICAgdGhpcy5rZXlVaWRNYXBba2V5XSA9IHRoaXMudWlkO1xuICAgIHRoaXMua2V5cy5wdXNoKGtleSk7XG4gICAgdGhpcy5iYm94ZXMucHVzaCh4MSk7XG4gICAgdGhpcy5iYm94ZXMucHVzaCh5MSk7XG4gICAgdGhpcy5iYm94ZXMucHVzaCh4Mik7XG4gICAgdGhpcy5iYm94ZXMucHVzaCh5Mik7XG59O1xuXG5HR3JpZEluZGV4LnByb3RvdHlwZS5yZW1vdmUgPSBmdW5jdGlvbihrZXkseDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgY3gxID0gdGhpcy5fY29udmVydFRvQ2VsbENvb3JkKHgxKTtcbiAgICB2YXIgY3kxID0gdGhpcy5fY29udmVydFRvQ2VsbENvb3JkKHkxKTtcbiAgICB2YXIgY3gyID0gdGhpcy5fY29udmVydFRvQ2VsbENvb3JkKHgyKTtcbiAgICB2YXIgY3kyID0gdGhpcy5fY29udmVydFRvQ2VsbENvb3JkKHkyKTtcbiAgICBsZXQgdWlkID0gdGhpcy5rZXlVaWRNYXBba2V5XTtcbiAgICBkZWxldGUgdGhpcy5rZXlVaWRNYXBba2V5XTtcblxuICAgIGZvciAodmFyIHggPSBjeDE7IHggPD0gY3gyOyB4KyspIHtcbiAgICAgICAgZm9yICh2YXIgeSA9IGN5MTsgeSA8PSBjeTI7IHkrKykge1xuICAgICAgICAgICAgdmFyIGNlbGxJbmRleCA9IHRoaXMuZCAqIHkgKyB4O1xuICAgICAgICAgICAgdGhpcy5jZWxsc1tjZWxsSW5kZXhdW3VpZF0gPSAtMTtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cblxuR0dyaWRJbmRleC5wcm90b3R5cGUuX2luc2VydFJlYWRvbmx5ID0gZnVuY3Rpb24oKSB7XG4gICAgdGhyb3cgJ0Nhbm5vdCBpbnNlcnQgaW50byBhIEdyaWRJbmRleCBjcmVhdGVkIGZyb20gYW4gQXJyYXlCdWZmZXIuJztcbn07XG5cbkdHcmlkSW5kZXgucHJvdG90eXBlLl9pbnNlcnRDZWxsID0gZnVuY3Rpb24oeDEsIHkxLCB4MiwgeTIsIGNlbGxJbmRleCwgdWlkKSB7XG4gICAgdGhpcy5jZWxsc1tjZWxsSW5kZXhdLnB1c2godWlkKTtcbn07XG5cbkdHcmlkSW5kZXgucHJvdG90eXBlLnF1ZXJ5ID0gZnVuY3Rpb24oeDEsIHkxLCB4MiwgeTIpIHtcbiAgICB2YXIgbWluID0gdGhpcy5taW47XG4gICAgdmFyIG1heCA9IHRoaXMubWF4O1xuICAgIGlmICh4MSA8PSBtaW4gJiYgeTEgPD0gbWluICYmIG1heCA8PSB4MiAmJiBtYXggPD0geTIpIHtcbiAgICAgICAgLy8gV2UgdXNlIGBBcnJheSNzbGljZWAgYmVjYXVzZSBgdGhpcy5rZXlzYCBtYXkgYmUgYSBgSW50MzJBcnJheWAgYW5kXG4gICAgICAgIC8vIHNvbWUgYnJvd3NlcnMgKFNhZmFyaSBhbmQgSUUpIGRvIG5vdCBzdXBwb3J0IGBUeXBlZEFycmF5I3NsaWNlYFxuICAgICAgICAvLyBodHRwczovL2RldmVsb3Blci5tb3ppbGxhLm9yZy9lbi1VUy9kb2NzL1dlYi9KYXZhU2NyaXB0L1JlZmVyZW5jZS9HbG9iYWxfT2JqZWN0cy9UeXBlZEFycmF5L3NsaWNlI0Jyb3dzZXJfY29tcGF0aWJpbGl0eVxuICAgICAgICByZXR1cm4gQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5rZXlzKTtcblxuICAgIH0gZWxzZSB7XG4gICAgICAgIHZhciByZXN1bHQgPSBbXTtcbiAgICAgICAgdmFyIHNlZW5VaWRzID0ge307XG4gICAgICAgIHRoaXMuX2ZvckVhY2hDZWxsKHgxLCB5MSwgeDIsIHkyLCB0aGlzLl9xdWVyeUNlbGwsIHJlc3VsdCwgc2VlblVpZHMpO1xuICAgICAgICByZXR1cm4gcmVzdWx0O1xuICAgIH1cbn07XG5cbkdHcmlkSW5kZXgucHJvdG90eXBlLl9xdWVyeUNlbGwgPSBmdW5jdGlvbih4MSwgeTEsIHgyLCB5MiwgY2VsbEluZGV4LCByZXN1bHQsIHNlZW5VaWRzKSB7XG4gICAgdmFyIGNlbGwgPSB0aGlzLmNlbGxzW2NlbGxJbmRleF07XG4gICAgaWYgKGNlbGwgIT09IG51bGwpIHtcbiAgICAgICAgdmFyIGtleXMgPSB0aGlzLmtleXM7XG4gICAgICAgIHZhciBiYm94ZXMgPSB0aGlzLmJib3hlcztcbiAgICAgICAgZm9yICh2YXIgdSA9IDA7IHUgPCBjZWxsLmxlbmd0aDsgdSsrKSB7XG4gICAgICAgICAgICB2YXIgdWlkID0gY2VsbFt1XTtcbiAgICAgICAgICAgIGlmKHVpZCA9PSAtMSl7XG4gICAgICAgICAgICAgICAgY29udGludWU7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmIChzZWVuVWlkc1t1aWRdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICB2YXIgb2Zmc2V0ID0gdWlkICogNDtcbiAgICAgICAgICAgICAgICBpZiAoKHgxIDw9IGJib3hlc1tvZmZzZXQgKyAyXSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKHkxIDw9IGJib3hlc1tvZmZzZXQgKyAzXSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKHgyID49IGJib3hlc1tvZmZzZXQgKyAwXSkgJiZcbiAgICAgICAgICAgICAgICAgICAgKHkyID49IGJib3hlc1tvZmZzZXQgKyAxXSkpIHtcbiAgICAgICAgICAgICAgICAgICAgc2VlblVpZHNbdWlkXSA9IHRydWU7XG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdC5wdXNoKGtleXNbdWlkXSk7XG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICAgICAgc2VlblVpZHNbdWlkXSA9IGZhbHNlO1xuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cbn07XG5cbkdHcmlkSW5kZXgucHJvdG90eXBlLl9mb3JFYWNoQ2VsbCA9IGZ1bmN0aW9uKHgxLCB5MSwgeDIsIHkyLCBmbiwgYXJnMSwgYXJnMikge1xuICAgIHZhciBjeDEgPSB0aGlzLl9jb252ZXJ0VG9DZWxsQ29vcmQoeDEpO1xuICAgIHZhciBjeTEgPSB0aGlzLl9jb252ZXJ0VG9DZWxsQ29vcmQoeTEpO1xuICAgIHZhciBjeDIgPSB0aGlzLl9jb252ZXJ0VG9DZWxsQ29vcmQoeDIpO1xuICAgIHZhciBjeTIgPSB0aGlzLl9jb252ZXJ0VG9DZWxsQ29vcmQoeTIpO1xuICAgIGZvciAodmFyIHggPSBjeDE7IHggPD0gY3gyOyB4KyspIHtcbiAgICAgICAgZm9yICh2YXIgeSA9IGN5MTsgeSA8PSBjeTI7IHkrKykge1xuICAgICAgICAgICAgdmFyIGNlbGxJbmRleCA9IHRoaXMuZCAqIHkgKyB4O1xuICAgICAgICAgICAgaWYgKGZuLmNhbGwodGhpcywgeDEsIHkxLCB4MiwgeTIsIGNlbGxJbmRleCwgYXJnMSwgYXJnMikpIHJldHVybjtcbiAgICAgICAgfVxuICAgIH1cbn07XG5cbkdHcmlkSW5kZXgucHJvdG90eXBlLl9jb252ZXJ0VG9DZWxsQ29vcmQgPSBmdW5jdGlvbih4KSB7XG4gICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuZCAtIDEsIE1hdGguZmxvb3IoeCAqIHRoaXMuc2NhbGUpICsgdGhpcy5wYWRkaW5nKSk7XG59O1xuXG5HR3JpZEluZGV4LnByb3RvdHlwZS50b0FycmF5QnVmZmVyID0gZnVuY3Rpb24oKSB7XG4gICAgaWYgKHRoaXMuYXJyYXlCdWZmZXIpIHJldHVybiB0aGlzLmFycmF5QnVmZmVyO1xuXG4gICAgdmFyIGNlbGxzID0gdGhpcy5jZWxscztcblxuICAgIHZhciBtZXRhZGF0YUxlbmd0aCA9IE5VTV9QQVJBTVMgKyB0aGlzLmNlbGxzLmxlbmd0aCArIDEgKyAxO1xuICAgIHZhciB0b3RhbENlbGxMZW5ndGggPSAwO1xuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgdGhpcy5jZWxscy5sZW5ndGg7IGkrKykge1xuICAgICAgICB0b3RhbENlbGxMZW5ndGggKz0gdGhpcy5jZWxsc1tpXS5sZW5ndGg7XG4gICAgfVxuXG4gICAgdmFyIGFycmF5ID0gbmV3IEludDMyQXJyYXkobWV0YWRhdGFMZW5ndGggKyB0b3RhbENlbGxMZW5ndGggKyB0aGlzLmtleXMubGVuZ3RoICsgdGhpcy5iYm94ZXMubGVuZ3RoKTtcbiAgICBhcnJheVswXSA9IHRoaXMuZXh0ZW50O1xuICAgIGFycmF5WzFdID0gdGhpcy5uO1xuICAgIGFycmF5WzJdID0gdGhpcy5wYWRkaW5nO1xuXG4gICAgdmFyIG9mZnNldCA9IG1ldGFkYXRhTGVuZ3RoO1xuICAgIGZvciAodmFyIGsgPSAwOyBrIDwgY2VsbHMubGVuZ3RoOyBrKyspIHtcbiAgICAgICAgdmFyIGNlbGwgPSBjZWxsc1trXTtcbiAgICAgICAgYXJyYXlbTlVNX1BBUkFNUyArIGtdID0gb2Zmc2V0O1xuICAgICAgICBhcnJheS5zZXQoY2VsbCwgb2Zmc2V0KTtcbiAgICAgICAgb2Zmc2V0ICs9IGNlbGwubGVuZ3RoO1xuICAgIH1cblxuICAgIGFycmF5W05VTV9QQVJBTVMgKyBjZWxscy5sZW5ndGhdID0gb2Zmc2V0O1xuICAgIGFycmF5LnNldCh0aGlzLmtleXMsIG9mZnNldCk7XG4gICAgb2Zmc2V0ICs9IHRoaXMua2V5cy5sZW5ndGg7XG5cbiAgICBhcnJheVtOVU1fUEFSQU1TICsgY2VsbHMubGVuZ3RoICsgMV0gPSBvZmZzZXQ7XG4gICAgYXJyYXkuc2V0KHRoaXMuYmJveGVzLCBvZmZzZXQpO1xuICAgIG9mZnNldCArPSB0aGlzLmJib3hlcy5sZW5ndGg7XG5cbiAgICByZXR1cm4gYXJyYXkuYnVmZmVyO1xufTtcbiIsIi8qKlxyXG4gKiBDbGFzczogR0xhYmVsQm94XHJcbiAqICDorqHnrpfms6jorrDpgb/orqlib3jnsbtcclxuICpcclxuICogSW5oZXJpdHM6XHJcbiAqICAtIDxPYmplY3Q+XHJcbiAqL1xyXG5jb25zdCBBdm9pZFV0aWwgPSAgcmVxdWlyZSgnLi9Bdm9pZFV0aWwnKTtcclxuY29uc3QgVXRpbCA9ICByZXF1aXJlKCcuL1V0aWwnKTtcclxuY2xhc3MgR0xhYmVsQm94e1xyXG4gICAgY29uc3RydWN0b3IoY3R4LGZvcm1hdEZvbnQsYmVhcmluZykge1xyXG4gICAgICAgIHRoaXMuYm94RGlzdGFuY2UgPSAwO1xyXG4gICAgICAgIHRoaXMuY3R4ID0gIGN0eDtcclxuICAgICAgICB0aGlzLmZvcm1hdEZvbnQgPSBmb3JtYXRGb250O1xyXG4gICAgICAgIHRoaXMuYmVhcmluZyA9IGJlYXJpbmc7XHJcbiAgICB9XHJcblxyXG4gICAgc2V0Qm94KGZlYXR1cmVzLHN0eWxlTWFwLGlzQ2xpZW50KXtcclxuICAgICAgICBmZWF0dXJlcy5mb3JFYWNoKGZ1bmN0aW9uKGYsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGYuaGlkZGVuID0gZmFsc2U7XHJcbiAgICAgICAgICAgIGxldCBzdHlsZSA9IHN0eWxlTWFwW2Yuc3R5bGVJZF07XHJcblxyXG4gICAgICAgICAgICAvL+WmguaenOimgee0oOS4jeaYvuekuizmsqHlrZflsLHkuI3nlLtcclxuICAgICAgICAgICAgaWYoc3R5bGUuc2hvdyA9PSBmYWxzZSl7XHJcbiAgICAgICAgICAgICAgICBmLmhpZGRlbiA9dHJ1ZTtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgaWYoZi50eXBlID09IDEpe1xyXG4gICAgICAgICAgICAgICAgLy/mnoTpgKDngrnnm5LlrZBcclxuICAgICAgICAgICAgICAgIGlmKGlzQ2xpZW50KXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBvaW50Qm94KGYsZi5kYXRhcyx0aGlzLmN0eCxzdHlsZSk7XHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFBvaW50Qm94KGYsZi5zb3VyY2VBbmdsZURhdGEsdGhpcy5jdHgsc3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGYudHlwZSA9PSAyKXtcclxuICAgICAgICAgICAgICAgIC8v5aaC5p6c5piv57q/5paH5pys5rOo6K6wXHJcbiAgICAgICAgICAgICAgICBpZihmLmxpbmVUeXBlID09ICd0ZXh0Jyl7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaXNDbGllbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldFRleHRMaW5lQm94KGYsZi5kYXRhcyx0aGlzLmN0eCxzdHlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2V0VGV4dExpbmVCb3goZixmLnNvdXJjZUFuZ2xlRGF0YSx0aGlzLmN0eCxzdHlsZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8v5aaC5p6c5piv57q/57yW56CB5rOo6K6wXHJcbiAgICAgICAgICAgICAgICBpZihmLmxpbmVUeXBlID09ICdjb2RlJykge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGlzQ2xpZW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdGhpcy5zZXRDb2RlTGluZUJveChmLGYuZGF0YXMsdGhpcy5jdHgsc3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldENvZGVMaW5lQm94KGYsZi5zb3VyY2VBbmdsZURhdGEsdGhpcy5jdHgsc3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvL+WmguaenOaYr+e6v+eureWktOazqOiusFxyXG4gICAgICAgICAgICAgICAgaWYoZi5saW5lVHlwZSA9PSAnYXJyb3cnKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoaXNDbGllbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFycm93TGluZUJveChmLGYuZGF0YXMsc3R5bGUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnNldEFycm93TGluZUJveChmLGYuc291cmNlQW5nbGVEYXRhLHN0eWxlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LmJpbmQodGhpcykpO1xyXG5cclxuICAgICAgICByZXR1cm4gZmVhdHVyZXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8v5p6E6YCg54K55rOo6K6w55qEYm94cyzkuIrkuIvlt6blj7Plm5vkuKrmlrnlkJFcclxuICAgIHNldFBvaW50Qm94KGZlYXR1cmUsZGF0YXMsY3R4LHN0eWxlKXtcclxuICAgICAgICBzdHlsZS5pc0ltcG9ydGFudCA9IGZhbHNlO1xyXG4gICAgICAgIC8v5a+56KaB5pi+56S655qE54K55rOo6K6w5YaF5a655oyJ54Wn55So5oi355qE6L2s5o2i5Ye95pWw6L+b6KGM6L2s5o2iXHJcbiAgICAgICAgaWYoc3R5bGUubGFiZWxGdW5jdGlvbil7XHJcbiAgICAgICAgICAgIGxldCBsYWJlbEZ1bmN0aW9uID0gbmV3IEZ1bmN0aW9uKFwibGFiZWxcIiwgc3R5bGUubGFiZWxGdW5jdGlvbik7XHJcbiAgICAgICAgICAgIHRyeXtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUubGFiZWwgPSBsYWJlbEZ1bmN0aW9uLmNhbGwoe30sIGZlYXR1cmUuYXR0cmlidXRlc1tzdHlsZS5sYWJlbGZpZWxkXSk7XHJcbiAgICAgICAgICAgIH1jYXRjaCAoZSl7XHJcbiAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oZmVhdHVyZS5sYWJlbCArICc6IOiwg+eUqGxhYmVsRnVuY3Rpb27lpLHotKUhJyk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBsYWJlbElzTm90TnVsbCA9IEF2b2lkVXRpbC5pc05vdE51bGwoZmVhdHVyZS5sYWJlbCk7XHJcbiAgICAgICAgLy/lpoLml6LmsqHmnInmloflrZfvvIzlj4jmsqHmnInlm77moIcs5YiZ5LiN5pi+56S6XHJcbiAgICAgICAgaWYoIWxhYmVsSXNOb3ROdWxsICYmICFmZWF0dXJlLmljb25JbWcpe1xyXG4gICAgICAgICAgICBmZWF0dXJlLmhpZGRlbiA9dHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBhcmFtID10aGlzLmdldEZvbnRXaWR0aEhlaWdodChjdHgsZmVhdHVyZSxzdHlsZSxsYWJlbElzTm90TnVsbCk7XHJcbiAgICAgICAgbGV0IGdyYXBoaWNXaWR0aCA9IHBhcmFtLmdyYXBoaWNXaWR0aDtcclxuICAgICAgICBsZXQgZ3JhcGhpY0hlaWdodCA9IHBhcmFtLmdyYXBoaWNIZWlnaHQ7XHJcbiAgICAgICAgbGV0IGZvbnRXaWR0aCA9IHBhcmFtLmZvbnRXaWR0aDtcclxuICAgICAgICBsZXQgZm9udEhlaWdodCA9IHBhcmFtLmZvbnRIZWlnaHQ7XHJcbiAgICAgICAgbGV0IG1heEZvbnRoZWlnaHQgPSBwYXJhbS5tYXhGb250aGVpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgcG9pbnRPZmZzZXRYID0gc3R5bGUucG9pbnRPZmZzZXRYO1xyXG4gICAgICAgIGxldCBwb2ludE9mZnNldFkgPSBzdHlsZS5wb2ludE9mZnNldFk7XHJcbiAgICAgICAgaWYoIXBvaW50T2Zmc2V0WCl7XHJcbiAgICAgICAgICAgIHBvaW50T2Zmc2V0WCA9IDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmKCFwb2ludE9mZnNldFkpe1xyXG4gICAgICAgICAgICBwb2ludE9mZnNldFkgPSAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgcHQgPSBbZGF0YXNbMF1bMF1bMF0sZGF0YXNbMF1bMF1bMV1dO1xyXG4gICAgICAgIHB0WzBdID0gcHRbMF0rcG9pbnRPZmZzZXRYO1xyXG4gICAgICAgIHB0WzFdID0gcHRbMV0rcG9pbnRPZmZzZXRZO1xyXG5cclxuICAgICAgICBpZihwdFswXSA8MCB8fCBwdFsxXSA8MCApe1xyXG4gICAgICAgICAgICBmZWF0dXJlLmhpZGRlbiA9dHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IHBvaW50QmFja2dyb3VuZEdhcCA9IHN0eWxlLnBvaW50QmFja2dyb3VuZEdhcDtcclxuICAgICAgICBpZihzdHlsZS5wb2ludEhhc2hCYWNrZ3JvdW5kICE9IHRydWUpe1xyXG4gICAgICAgICAgICBwb2ludEJhY2tncm91bmRHYXAgPSAwO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGdyYXBoaWNEaXN0YW5jZSA9IHN0eWxlLmdyYXBoaWNEaXN0YW5jZTtcclxuICAgICAgICBpZihncmFwaGljSGVpZ2h0ID09IDAgfHwgZ3JhcGhpY1dpZHRoID09MCl7XHJcbiAgICAgICAgICAgIGdyYXBoaWNEaXN0YW5jZSA9IDA7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZighc3R5bGUuaGFzT3duUHJvcGVydHkoJ2RpcmVjdGlvbicpKXtcclxuICAgICAgICAgICAgc3R5bGUuZGlyZWN0aW9uID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBib3hzID0gW107XHJcblxyXG4gICAgICAgIGxldCBvZmZzZXRQb3N0aW9uID0gW107XHJcbiAgICAgICAgLy/lpoLmnpzmnInlm77moIdcclxuICAgICAgICBpZihzdHlsZS50ZXh0dXJlKXtcclxuICAgICAgICAgICAgLy/lpoLmnpzmnInmloflrZdcclxuICAgICAgICAgICAgaWYoZmVhdHVyZS5sYWJlbCl7XHJcbiAgICAgICAgICAgICAgICAvL+mBv+iuqeeahGJveOavlOWunumZheeahGJveOWkmuWKoDLkuKrlg4/ntKDvvIzpgb/orqnlvojlsJHpg6jliIbnmoTljovnm5ZcclxuICAgICAgICAgICAgICAgIGJveHMgPSB0aGlzLmdldFBvaW50QXZvaWRCb3gocHQsc3R5bGUsZ3JhcGhpY0Rpc3RhbmNlLFxyXG4gICAgICAgICAgICAgICAgICAgIGdyYXBoaWNXaWR0aCxncmFwaGljSGVpZ2h0LGZvbnRXaWR0aCsyLG1heEZvbnRoZWlnaHQrMik7XHJcblxyXG4gICAgICAgICAgICAgICAgb2Zmc2V0UG9zdGlvbiA9IHRoaXMuZ2V0UG9pbnRPZmZzZXRQb3NpdGlvbihzdHlsZSxncmFwaGljRGlzdGFuY2UsXHJcbiAgICAgICAgICAgICAgICAgICAgZ3JhcGhpY1dpZHRoLGdyYXBoaWNIZWlnaHQsZm9udFdpZHRoLGZvbnRIZWlnaHQpO1xyXG4gICAgICAgICAgICB9ZWxzZXsvL+WPquacieWbvuagh++8jOayoeacieaWh+Wtl1xyXG4gICAgICAgICAgICAgICAgbGV0IG1pZGRsZUJveCA9IFsgcHRbMF0gLSBncmFwaGljV2lkdGgqMC41LFxyXG4gICAgICAgICAgICAgICAgICAgIHB0WzFdIC1mb250SGVpZ2h0KjAuNSxcclxuICAgICAgICAgICAgICAgICAgICBwdFswXSArZ3JhcGhpY1dpZHRoKjAuNSxcclxuICAgICAgICAgICAgICAgICAgICBwdFsxXSArZm9udEhlaWdodCowLjVdO1xyXG4gICAgICAgICAgICAgICAgbWlkZGxlQm94ID0gdGhpcy5ib3hTY2FsZShtaWRkbGVCb3gsc3R5bGUucG9pbnRCb3hEaXNhbmNlKTtcclxuICAgICAgICAgICAgICAgIGJveHMgPSBbbWlkZGxlQm94XTtcclxuXHJcbiAgICAgICAgICAgICAgICBvZmZzZXRQb3N0aW9uID0gW25ldyBDZXNpdW0uQ2FydGVzaWFuMigwLDApXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBsZXQgbWlkZGxlQm94ID0gW3B0WzBdIC0gZm9udFdpZHRoKjAuNSxwdFsxXSAtbWF4Rm9udGhlaWdodCowLjUsXHJcbiAgICAgICAgICAgICAgICBwdFswXSArIGZvbnRXaWR0aCowLjUgLHB0WzFdICttYXhGb250aGVpZ2h0KjAuNSAgXTtcclxuICAgICAgICAgICAgbWlkZGxlQm94ID0gdGhpcy5ib3hTY2FsZShtaWRkbGVCb3gsc3R5bGUucG9pbnRCb3hEaXNhbmNlKTtcclxuICAgICAgICAgICAgYm94cyA9IFttaWRkbGVCb3hdO1xyXG4gICAgICAgICAgICBvZmZzZXRQb3N0aW9uID0gW25ldyBDZXNpdW0uQ2FydGVzaWFuMigtZm9udFdpZHRoKjAuNSwwKV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBmZWF0dXJlLmJveHMgPSBib3hzO1xyXG4gICAgICAgIGZlYXR1cmUub2Zmc2V0UG9zdGlvbiA9b2Zmc2V0UG9zdGlvbjtcclxuICAgICAgICBmZWF0dXJlLmJveCA9IGJveHNbMF07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAg6I635Y+W54K55rOo6K6w55qE5Zu+5qCH5a696auY77yM5ZKM5rOo6K6w55qE5a696auY5ZKM5rOo6K6w55qE5pyA5aSn6auY5bqmXHJcbiAgICAgKiBAcGFyYW0gY3R4XHJcbiAgICAgKiBAcGFyYW0gZmVhdHVyZVxyXG4gICAgICogQHBhcmFtIHN0eWxlXHJcbiAgICAgKiBAcGFyYW0gbGFiZWxJc05vdE51bGxcclxuICAgICAqIEByZXR1cm5zIHt7fX1cclxuICAgICAqL1xyXG4gICAgZ2V0Rm9udFdpZHRoSGVpZ2h0KGN0eCxmZWF0dXJlLHN0eWxlLGxhYmVsSXNOb3ROdWxsKXtcclxuICAgICAgICBsZXQgY3VyclBhcmEgPSB7fTtcclxuICAgICAgICBsZXQgZ3JhcGhpY1dpZHRoID0gc3R5bGUuZ3JhcGhpY1dpZHRoO1xyXG4gICAgICAgIGxldCBncmFwaGljSGVpZ2h0ID0gc3R5bGUuZ3JhcGhpY0hlaWdodDtcclxuXHJcbiAgICAgICAgbGV0IGltZyA9IGZlYXR1cmUuaWNvbkltZztcclxuICAgICAgICBpZihpbWcpe1xyXG4gICAgICAgICAgICAvL+WmguaenOayoeaciVxyXG4gICAgICAgICAgICBpZighZ3JhcGhpY1dpZHRoIHx8ICFncmFwaGljSGVpZ2h0KSB7XHJcbiAgICAgICAgICAgICAgICBncmFwaGljV2lkdGggPSBpbWcud2lkdGg7XHJcbiAgICAgICAgICAgICAgICBncmFwaGljSGVpZ2h0ID0gaW1nLmhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICBncmFwaGljV2lkdGggPSAwO1xyXG4gICAgICAgICAgICBncmFwaGljSGVpZ2h0ID0gMDtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGN1cnJQYXJhLmdyYXBoaWNXaWR0aCA9IGdyYXBoaWNXaWR0aDtcclxuICAgICAgICBjdXJyUGFyYS5ncmFwaGljSGVpZ2h0ID0gZ3JhcGhpY0hlaWdodDtcclxuICAgICAgICBjdXJyUGFyYS5mb250V2lkdGggPSBncmFwaGljV2lkdGg7XHJcbiAgICAgICAgY3VyclBhcmEuZm9udEhlaWdodCA9IGdyYXBoaWNIZWlnaHQ7XHJcblxyXG4gICAgICAgIGlmKGxhYmVsSXNOb3ROdWxsKXtcclxuXHJcbiAgICAgICAgICAgIGxldCBsYWJsZU9iamVjdCA9IGZlYXR1cmUubGFiZWxzWzBdO1xyXG5cclxuICAgICAgICAgICAgLy/lkITooYznmoTmnIDlrr3lrr3luqZcclxuICAgICAgICAgICAgY3VyclBhcmEuZm9udFdpZHRoID0gIGxhYmxlT2JqZWN0LnRvdGFsV2lkdGg7XHJcbiAgICAgICAgICAgIC8v5paH5a2X55qE6auY5bqmICog5paH5a2X55qE6KGM5pWwKyAg6KGM6Ze06LedXHJcbiAgICAgICAgICAgIGN1cnJQYXJhLmZvbnRIZWlnaHQgPSBsYWJsZU9iamVjdC50b3RhbEhlaWdodDtcclxuICAgICAgICAgICAgLy8g5aaC5p6c54K556ym5Y+36auY5bqm77yI55So54K556ym5Y+35a695bqm5Luj5pu/77yJ6auY5LqO5paH5a2X6auY5bqmIOWImeeUqOeCueespuWPt+mrmOW6puabv+aNouaWh+Wtl+mrmOW6plxyXG4gICAgICAgICAgICBjdXJyUGFyYS5tYXhGb250aGVpZ2h0ID0gY3VyclBhcmEuZm9udEhlaWdodD4gZ3JhcGhpY0hlaWdodCA/IGN1cnJQYXJhLmZvbnRIZWlnaHQ6IGdyYXBoaWNIZWlnaHQ7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gY3VyclBhcmE7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAg6I635Y+W54K55rOo6K6w5pyJ5Zu+5qCH5Lmf5pyJ5paH5a2X5pe255qE6YG/6K6pYm94c1xyXG4gICAgICogQHBhcmFtIHB0XHJcbiAgICAgKiBAcGFyYW0gc3R5bGVcclxuICAgICAqIEBwYXJhbSBncmFwaGljRGlzdGFuY2VcclxuICAgICAqIEBwYXJhbSBncmFwaGljV2lkdGhcclxuICAgICAqIEBwYXJhbSBncmFwaGljSGVpZ2h0XHJcbiAgICAgKiBAcGFyYW0gZm9udFdpZHRoXHJcbiAgICAgKiBAcGFyYW0gbWF4Rm9udGhlaWdodFxyXG4gICAgICogQHJldHVybnMge1sqLCosKiwqXX1cclxuICAgICAqL1xyXG4gICAgZ2V0UG9pbnRBdm9pZEJveChwdCxzdHlsZSxncmFwaGljRGlzdGFuY2UsZ3JhcGhpY1dpZHRoLGdyYXBoaWNIZWlnaHQsZm9udFdpZHRoLG1heEZvbnRoZWlnaHQpe1xyXG4gICAgICAgIGxldCByaWdodEJveCA9IFsgcHRbMF0gLSBncmFwaGljV2lkdGgqMC41ICxcclxuICAgICAgICAgICAgcHRbMV0gLW1heEZvbnRoZWlnaHQqMC41LFxyXG4gICAgICAgICAgICBwdFswXSArZ3JhcGhpY1dpZHRoKjAuNSArZ3JhcGhpY0Rpc3RhbmNlKyBmb250V2lkdGggLFxyXG4gICAgICAgICAgICBwdFsxXSArbWF4Rm9udGhlaWdodCowLjVdO1xyXG5cclxuICAgICAgICBsZXQgbGVmdEJveCA9IFtwdFswXSAtZ3JhcGhpY1dpZHRoKjAuNSAtZ3JhcGhpY0Rpc3RhbmNlLSBmb250V2lkdGgsXHJcbiAgICAgICAgICAgIHJpZ2h0Qm94WzFdLHB0WzBdICsgZ3JhcGhpY1dpZHRoKjAuNSxcclxuICAgICAgICAgICAgcmlnaHRCb3hbM11dO1xyXG4gICAgICAgIGxldCBib3R0b21Cb3ggPSBbcHRbMF0tZm9udFdpZHRoKjAuNSxcclxuICAgICAgICAgICAgcHRbMV0gLWdyYXBoaWNIZWlnaHQqMC41ICwgcHRbMF0rZm9udFdpZHRoKjAuNSxcclxuICAgICAgICAgICAgcHRbMV0rZ3JhcGhpY0hlaWdodCowLjUgKyBncmFwaGljRGlzdGFuY2UgK21heEZvbnRoZWlnaHRdIDtcclxuXHJcbiAgICAgICAgbGV0IHRvcEJveCA9IFtib3R0b21Cb3hbMF0scHRbMV0gIC1ncmFwaGljRGlzdGFuY2UgIC0gbWF4Rm9udGhlaWdodC1ncmFwaGljSGVpZ2h0KjAuNSAsXHJcbiAgICAgICAgICAgIGJvdHRvbUJveFsyXSxwdFsxXStncmFwaGljSGVpZ2h0KjAuNV07XHJcblxyXG4gICAgICAgIHJpZ2h0Qm94ID0gdGhpcy5ib3hTY2FsZShyaWdodEJveCxzdHlsZS5wb2ludEJveERpc2FuY2UpO1xyXG4gICAgICAgIGxlZnRCb3ggPSB0aGlzLmJveFNjYWxlKGxlZnRCb3gsc3R5bGUucG9pbnRCb3hEaXNhbmNlKTtcclxuICAgICAgICBib3R0b21Cb3ggPSB0aGlzLmJveFNjYWxlKGJvdHRvbUJveCxzdHlsZS5wb2ludEJveERpc2FuY2UpO1xyXG4gICAgICAgIHRvcEJveCA9IHRoaXMuYm94U2NhbGUodG9wQm94LHN0eWxlLnBvaW50Qm94RGlzYW5jZSk7XHJcbiAgICAgICAgbGV0IGJveHMgPSBbcmlnaHRCb3gsbGVmdEJveCxib3R0b21Cb3gsdG9wQm94XTtcclxuXHJcbiAgICAgICAgaWYoIXN0eWxlLmlzRm91ckRpcmVjdGlvbnMgJiYgIXN0eWxlLmlzRWlnaHREaXJlY3Rpb25zKXtcclxuICAgICAgICAgICAgcmV0dXJuIFtib3hzW3N0eWxlLmRpcmVjdGlvbl1dO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgaWYoc3R5bGUuaXNGb3VyRGlyZWN0aW9ucyl7XHJcbiAgICAgICAgICAgIGlmKHN0eWxlLmRpcmVjdGlvbiA+IDApe1xyXG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBib3hzLnNwbGljZShzdHlsZS5kaXJlY3Rpb24sMSk7XHJcbiAgICAgICAgICAgICAgICBib3hzLnVuc2hpZnQoaXRlbVswXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGJveHM7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgbGV0IHJpZ2h0VG9wQm94ID0gW3JpZ2h0Qm94WzBdLHRvcEJveFsxXSxcclxuICAgICAgICAgICAgcmlnaHRCb3hbMl0scHRbMV0rZ3JhcGhpY0hlaWdodCowLjVdO1xyXG4gICAgICAgIGxldCByaWdodEJvdHRvbUJveCA9IFtyaWdodEJveFswXSxwdFsxXS1ncmFwaGljSGVpZ2h0KjAuNSxcclxuICAgICAgICAgICAgcmlnaHRCb3hbMl0sYm90dG9tQm94WzNdXTtcclxuICAgICAgICBsZXQgbGVmdFRvcEJveCA9IFtsZWZ0Qm94WzBdLHRvcEJveFsxXSxcclxuICAgICAgICAgICAgbGVmdEJveFsyXSxwdFsxXStncmFwaGljSGVpZ2h0KjAuNV07XHJcbiAgICAgICAgbGV0IGxlZnRCb3R0b21Cb3ggPSBbbGVmdEJveFswXSxwdFsxXS1ncmFwaGljSGVpZ2h0KjAuNSxcclxuICAgICAgICAgICAgbGVmdEJveFsyXSxib3R0b21Cb3hbM11dO1xyXG5cclxuICAgICAgICBib3hzID0gW3JpZ2h0Qm94LGxlZnRCb3gsYm90dG9tQm94LHRvcEJveCxyaWdodFRvcEJveCxyaWdodEJvdHRvbUJveCxsZWZ0VG9wQm94LGxlZnRCb3R0b21Cb3hdO1xyXG4gICAgICAgIGlmKHN0eWxlLmRpcmVjdGlvbiA+IDApe1xyXG4gICAgICAgICAgICBsZXQgaXRlbSA9IGJveHMuc3BsaWNlKHN0eWxlLmRpcmVjdGlvbiwxKTtcclxuICAgICAgICAgICAgYm94cy51bnNoaWZ0KGl0ZW1bMF0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYm94cztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICDojrflj5bngrnms6jorrDnmoTlgY/np7vkvY3nva5cclxuICAgICAqIEBwYXJhbSBzdHlsZVxyXG4gICAgICogQHBhcmFtIGdyYXBoaWNEaXN0YW5jZVxyXG4gICAgICogQHBhcmFtIGdyYXBoaWNXaWR0aFxyXG4gICAgICogQHBhcmFtIGdyYXBoaWNIZWlnaHRcclxuICAgICAqIEBwYXJhbSBmb250V2lkdGhcclxuICAgICAqIEBwYXJhbSBmb250SGVpZ2h0XHJcbiAgICAgKiBAcmV0dXJucyB7Kn1cclxuICAgICAqL1xyXG4gICAgZ2V0UG9pbnRPZmZzZXRQb3NpdGlvbihzdHlsZSxncmFwaGljRGlzdGFuY2UsZ3JhcGhpY1dpZHRoLGdyYXBoaWNIZWlnaHQsZm9udFdpZHRoLGZvbnRIZWlnaHQpe1xyXG4gICAgICAgIC8v5LiN5YyF5ous54K55Zu+5qCHLOeUqOS6juaWh+Wtl+e7mOWItueahOi1t+eCueWdkOagh1xyXG4gICAgICAgIGxldCByUG9pbnQgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIoZ3JhcGhpY1dpZHRoKjAuNSArIGdyYXBoaWNEaXN0YW5jZSAsXHJcbiAgICAgICAgICAgIDApO1xyXG4gICAgICAgIGxldCBsUG9pbnQgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIoIC1ncmFwaGljV2lkdGgqMC41IC0gZ3JhcGhpY0Rpc3RhbmNlICAtZm9udFdpZHRoLFxyXG4gICAgICAgICAgICAwKTtcclxuICAgICAgICBsZXQgYlBvaW50ID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKC0gZm9udFdpZHRoKjAuNSxcclxuICAgICAgICAgICAgZ3JhcGhpY0Rpc3RhbmNlICArIGZvbnRIZWlnaHQqMC41K2dyYXBoaWNIZWlnaHQqMC41KTtcclxuICAgICAgICBsZXQgdFBvaW50ID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKGJQb2ludC54LFxyXG4gICAgICAgICAgICAtZ3JhcGhpY0Rpc3RhbmNlIC0gZm9udEhlaWdodCowLjUtZ3JhcGhpY0hlaWdodCowLjUpO1xyXG5cclxuICAgICAgICBsZXQgZHJhd1Bvc2l0aW9ucyA9IFtyUG9pbnQgLGxQb2ludCAgLGJQb2ludCAgLHRQb2ludCBdO1xyXG5cclxuICAgICAgICBpZighc3R5bGUuaXNGb3VyRGlyZWN0aW9ucyAmJiAhc3R5bGUuaXNFaWdodERpcmVjdGlvbnMpe1xyXG4gICAgICAgICAgICByZXR1cm4gW2RyYXdQb3NpdGlvbnNbc3R5bGUuZGlyZWN0aW9uXV07XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYoc3R5bGUuaXNGb3VyRGlyZWN0aW9ucyl7XHJcbiAgICAgICAgICAgIGlmKHN0eWxlLmRpcmVjdGlvbiA+IDApe1xyXG4gICAgICAgICAgICAgICAgbGV0IGl0ZW0gPSBkcmF3UG9zaXRpb25zLnNwbGljZShzdHlsZS5kaXJlY3Rpb24sMSk7XHJcbiAgICAgICAgICAgICAgICBkcmF3UG9zaXRpb25zLnVuc2hpZnQoaXRlbVswXSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGRyYXdQb3NpdGlvbnM7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcnRQb2ludCA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMihyUG9pbnQueCx0UG9pbnQueSk7XHJcbiAgICAgICAgbGV0IHJiUG9pbnQgPSBuZXcgQ2VzaXVtLkNhcnRlc2lhbjIoclBvaW50LngsYlBvaW50LnkpO1xyXG4gICAgICAgIGxldCBsdFBvaW50ID0gbmV3IENlc2l1bS5DYXJ0ZXNpYW4yKGxQb2ludC54LHRQb2ludC55KTtcclxuICAgICAgICBsZXQgbGJQb2ludCA9IG5ldyBDZXNpdW0uQ2FydGVzaWFuMihsUG9pbnQueCxiUG9pbnQueSk7XHJcbiAgICAgICAgZHJhd1Bvc2l0aW9ucyA9IFtyUG9pbnQgLGxQb2ludCAsYlBvaW50ICx0UG9pbnQgLHJ0UG9pbnQgLHJiUG9pbnQgLGx0UG9pbnQgLGxiUG9pbnRdO1xyXG5cclxuICAgICAgICBpZihzdHlsZS5kaXJlY3Rpb24gPiAwKXtcclxuICAgICAgICAgICAgbGV0IGl0ZW0gPSBkcmF3UG9zaXRpb25zLnNwbGljZShzdHlsZS5kaXJlY3Rpb24sMSk7XHJcbiAgICAgICAgICAgIGRyYXdQb3NpdGlvbnMudW5zaGlmdChpdGVtWzBdKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGRyYXdQb3NpdGlvbnM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7nur/mloflrZfnmoRib3hcclxuICAgICAqICBQYXJhbWV0ZXJzIDpcclxuICAgICAqICBmZWF0dXJlIC0g5Y2V5Liq57q/5rOo6K6w6KaB57SgXHJcbiAgICAgKi9cclxuICAgIHNldFRleHRMaW5lQm94KGZlYXR1cmUsZGF0YXMsY3R4LHN0eWxlKXtcclxuICAgICAgICBsZXQgbGFiZWwgPSBmZWF0dXJlLmxhYmVsO1xyXG4gICAgICAgIGxldCB0ZXh0UG9pbnRzID0gZGF0YXM7XHJcbiAgICAgICAgaWYodGV4dFBvaW50cy5sZW5ndGggPT0gMCl7XHJcbiAgICAgICAgICAgIGZlYXR1cmUuaGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/lsIbliIbmrrXnmoTngrnmlbDmja7lkozop5LluqbmlbDmja7kv53nlZnvvIznlZnnu5nlkI7pnaLnu5jliLZcclxuICAgICAgICBmZWF0dXJlLnRleHRQb2ludHMgPSB0ZXh0UG9pbnRzO1xyXG4gICAgICAgIC8v57q/55qEYm94c1xyXG4gICAgICAgIGxldCBsaW5lQm94cyA9IFtdO1xyXG4gICAgICAgIC8v5aaC5p6c57q/5rOo6K6w5bim5bqV6ImyXHJcbiAgICAgICAgaWYoc3R5bGUubGluZUhhc2hCYWNrZ3JvdW5kID09IHRydWUgfHwgdGV4dFBvaW50cy5sZW5ndGggPT0xKXtcclxuICAgICAgICAgICAgbGV0IHAgPSB0ZXh0UG9pbnRzWzBdWzBdO1xyXG4gICAgICAgICAgICBpZih0ZXh0UG9pbnRzLmxlbmd0aCA+MSl7XHJcbiAgICAgICAgICAgICAgICAvL+iOt+WPlue6v+auteeahOS4remXtOeCuVxyXG4gICAgICAgICAgICAgICAgbGV0IGluZGV4ID0gTWF0aC5mbG9vcihsYWJlbC5sZW5ndGgvMik7XHJcbiAgICAgICAgICAgICAgICBwID0gdGV4dFBvaW50c1tpbmRleF1bMF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgICAgICBsZXQgdyA9IGZlYXR1cmUubGFiZWwubGVuZ3RoICogc3R5bGUubGluZUhlaWdodDtcclxuICAgICAgICAgICAgaWYoY3R4KXtcclxuICAgICAgICAgICAgICAgIGN0eC5zYXZlKCk7XHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmZvcm1hdEZvbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGN0eC5mb250ID0gVXRpbC5mb3JtYXRGb250KHN0eWxlLmxpbmVGaWxsRm9udCwxLHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgY3R4LmZvbnQgPSBzdHlsZS5saW5lRmlsbEZvbnQ7XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgdyA9IFV0aWwubWVhc3VyZVRleHQoZmVhdHVyZS5sYWJlbCxjdHguZm9udCxjdHgpO1xyXG4gICAgICAgICAgICAgICAgY3R4LnJlc3RvcmUoKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICAvLyB3ID0gdyAqIHNjYWxlO1xyXG4gICAgICAgICAgICB9XHJcblxyXG5cclxuICAgICAgICAgICAgaWYoIXN0eWxlLmxpbmVCYWNrZ3JvdW5kR2FwKXtcclxuICAgICAgICAgICAgICAgIHN0eWxlLmxpbmVCYWNrZ3JvdW5kR2FwID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgbWluWCA9IHBbMF0gLSB3LzIgLXN0eWxlLmxpbmVCYWNrZ3JvdW5kR2FwO1xyXG4gICAgICAgICAgICBsZXQgbWF4WCA9ICBwWzBdKyB3LzIgK3N0eWxlLmxpbmVCYWNrZ3JvdW5kR2FwO1xyXG4gICAgICAgICAgICBsZXQgbWluWSA9IHBbMV0gLXN0eWxlLmxpbmVIZWlnaHQqMC41LXN0eWxlLmxpbmVCYWNrZ3JvdW5kR2FwO1xyXG4gICAgICAgICAgICBsZXQgbWF4WSA9IHBbMV0rc3R5bGUubGluZUhlaWdodCowLjUgK3N0eWxlLmxpbmVCYWNrZ3JvdW5kR2FwO1xyXG4gICAgICAgICAgICBsZXQgYm94ID0gW21pblgsbWluWSxtYXhYLG1heFldO1xyXG4gICAgICAgICAgICB0aGlzLmJveFNjYWxlKGJveCxzdHlsZS5saW5lVGV4dEJveERpc2FuY2UpO1xyXG4gICAgICAgICAgICBsaW5lQm94cy5wdXNoKGJveCk7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIC8v5aaC5p6c5paH5a2X6ZyA6KaB5peL6L2sXHJcbiAgICAgICAgICAgIGlmKHN0eWxlLmxpbmVUZXh0Um90YXRlIHx8IHN0eWxlLmxpbmVUZXh0Um90YXRlID09IDApe1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBtID0gMDttPHRleHRQb2ludHMubGVuZ3RoO20rKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgdGV4dFBvaW50c1ttXVsxXSA9IHN0eWxlLmxpbmVUZXh0Um90YXRlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIC8vIC8v6I635Y+W5Lik54K56L+e57q/5LiOeOi9tOeahOWkueinklxyXG4gICAgICAgICAgICAgICAgLy8gZmVhdHVyZS5hbmdsZSA9IEF2b2lkVXRpbC5nZXRBbmdsZSh0ZXh0UG9pbnRzWzBdWzBdLHRleHRQb2ludHNbdGV4dFBvaW50cy5sZW5ndGggLSAxXVswXSk7XHJcbiAgICAgICAgICAgICAgICAvLyAvL+WmguaenOaWh+Wtl+azqOiusOaXi+i9rOinkuW6puaWueWQkeS4jeS4gOiHtCjmnInnmoTlrZflkJHlt6bvvIzmnInnmoTlrZflkJHlj7Pml4vovawp77yM5YiZ6LCD5pW05Li65LiA6Ie0XHJcbiAgICAgICAgICAgICAgICAvLyBBdm9pZFV0aWwudGV4dFRvU2FtZUJlYXJpbmcoZmVhdHVyZS5hbmdsZSx0ZXh0UG9pbnRzKTtcclxuICAgICAgICAgICAgICAgIC8v5pu05paw6KeS5bqmXHJcbiAgICAgICAgICAgICAgICB0aGlzLnVwZGF0ZUFuZ2xlKHRleHRQb2ludHMpO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmKCFzdHlsZS5pc0ltcG9ydGFudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgLy/liKTmlq3nur/mloflrZfkuYvpl7TnmoTmnIDlpKflpLnop5LmmK/lkKblpKfkuo7mjIflrprnmoTpmIjlgLxcclxuICAgICAgICAgICAgICAgICAgICBpZih0aGlzLmlzTWVzc3koZmVhdHVyZSx0ZXh0UG9pbnRzLHN0eWxlLGxhYmVsKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuaGlkZGVuID0gdHJ1ZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy/ojrflj5bmr4/kuKrlrZfnmoRib3gs5Yik5pat5q+P5Liq5a2X5LmL5YmN5piv5ZCm5pyJ5Y6L55uWXHJcbiAgICAgICAgICAgIGxldCBib3hzID0gdGhpcy5nZXRMaW5lQm94cyhsYWJlbCx0ZXh0UG9pbnRzLHN0eWxlLGN0eCk7XHJcbiAgICAgICAgICAgIGlmKGJveHMpe1xyXG4gICAgICAgICAgICAgICAgbGluZUJveHMgPWxpbmVCb3hzLmNvbmNhdChib3hzKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIC8v5piv5ZCm5pS55Y+Y5pa55ZCRXHJcbiAgICAgICAgbGV0IGFuZ2xlID0gQXZvaWRVdGlsLmdldEFuZ2xlKHRleHRQb2ludHNbMF1bMF0sdGV4dFBvaW50c1t0ZXh0UG9pbnRzLmxlbmd0aCAtIDFdWzBdKTtcclxuICAgICAgICBsZXQgc2hvd0NoYW5nZWQgPSBBdm9pZFV0aWwuaXNDaGFuZ2VEaXJlY3Rpb24obGFiZWwsdGV4dFBvaW50c1swXVswXSx0ZXh0UG9pbnRzW3RleHRQb2ludHMubGVuZ3RoIC0gMV1bMF0sYW5nbGUpO1xyXG4gICAgICAgIGZlYXR1cmUuY2hhbmdlRGlyZWN0aW9uID0gc2hvd0NoYW5nZWQ7XHJcblxyXG4gICAgICAgIGZlYXR1cmUuYm94cyA9IGxpbmVCb3hzO1xyXG4gICAgfVxyXG5cclxuICAgIGJveFNjYWxlKGJveCxwb2ludEJveERpc2FuY2Upe1xyXG4gICAgICAgIGlmKCFwb2ludEJveERpc2FuY2UgJiYgcG9pbnRCb3hEaXNhbmNlIT0wKXtcclxuICAgICAgICAgICAgcG9pbnRCb3hEaXNhbmNlID0gdGhpcy5ib3hEaXN0YW5jZTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGJveFswXSA9IGJveFswXS1wb2ludEJveERpc2FuY2UqMC41O1xyXG4gICAgICAgIGJveFsxXSA9IGJveFsxXS1wb2ludEJveERpc2FuY2UqMC41O1xyXG4gICAgICAgIGJveFsyXSA9IGJveFsyXStwb2ludEJveERpc2FuY2UqMC41O1xyXG4gICAgICAgIGJveFszXSA9IGJveFszXStwb2ludEJveERpc2FuY2UqMC41O1xyXG4gICAgICAgIHJldHVybiBib3g7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u57q/57yW56CB55qEYm94XHJcbiAgICAgKiAgUGFyYW1ldGVycyA6XHJcbiAgICAgKiAgZmVhdHVyZSAtIOWNleS4que6v+azqOiusOimgee0oFxyXG4gICAgICovXHJcbiAgICBzZXRDb2RlTGluZUJveChmZWF0dXJlLGRhdGFzLGN0eCxzdHlsZSl7XHJcbiAgICAgICAgbGV0IGNvZGVQb2ludHMgPSBkYXRhcztcclxuICAgICAgICBpZihjb2RlUG9pbnRzLmxlbmd0aCA9PSAwKXtcclxuICAgICAgICAgICAgZmVhdHVyZS5oaWRkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+WmguaenOimgeaYvuekuumBk+i3r+e8luWPt1xyXG4gICAgICAgIGxldCBwID0gY29kZVBvaW50c1swXVswXTtcclxuICAgICAgICBsZXQgdyA9IGZlYXR1cmUubGFiZWwubGVuZ3RoICogc3R5bGUuY29kZUxpbmVIZWlnaHQ7XHJcbiAgICAgICAgbGV0IHNjYWxlID0gMTtcclxuICAgICAgICBpZihjdHgpe1xyXG4gICAgICAgICAgICBjdHguc2F2ZSgpO1xyXG4gICAgICAgICAgICBpZih0aGlzLmZvcm1hdEZvbnQpe1xyXG4gICAgICAgICAgICAgICAgY3R4LmZvbnQgPSBVdGlsLmZvcm1hdEZvbnQoc3R5bGUuY29kZUxpbmVGaWxsRm9udCwxLHRydWUpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIGN0eC5mb250ID0gc3R5bGUuY29kZUxpbmVGaWxsRm9udDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgdyA9IFV0aWwubWVhc3VyZVRleHQoZmVhdHVyZS5sYWJlbCxjdHguZm9udCxjdHgpO1xyXG4gICAgICAgICAgICBjdHgucmVzdG9yZSgpO1xyXG4gICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAvLyBzY2FsZSA9IGNvZGVQb2ludHNbMF1bM107XHJcbiAgICAgICAgICAgIC8vIHcgPSB3KnNjYWxlO1xyXG4gICAgICAgIH1cclxuXHJcblxyXG4gICAgICAgIGxldCBtaW5YID0gcFswXSAtIHcvMiAtc3R5bGUuY29kZUxpbmVCYWNrZ3JvdW5kR2FwO1xyXG4gICAgICAgIGxldCBtYXhYID0gIHBbMF0rIHcvMiArc3R5bGUuY29kZUxpbmVCYWNrZ3JvdW5kR2FwO1xyXG4gICAgICAgIGxldCBtaW5ZID0gcFsxXSAtc3R5bGUuY29kZUxpbmVIZWlnaHQqMC41LXN0eWxlLmNvZGVMaW5lQmFja2dyb3VuZEdhcDtcclxuICAgICAgICBsZXQgbWF4WSA9IHBbMV0rIHN0eWxlLmNvZGVMaW5lSGVpZ2h0KjAuNSArc3R5bGUuY29kZUxpbmVCYWNrZ3JvdW5kR2FwO1xyXG4gICAgICAgIGxldCBib3ggPSBbbWluWCxtaW5ZLG1heFgsbWF4WV07XHJcbiAgICAgICAgdGhpcy5ib3hTY2FsZShib3gsc3R5bGUubGluZUNvZGVCb3hEaXNhbmNlKTtcclxuICAgICAgICBmZWF0dXJlLmJveHMgPSBbYm94XTtcclxuICAgICAgICBmZWF0dXJlLmNvZGVQb2ludCA9IHA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7nur/nrq3lpLTnmoRib3hcclxuICAgICAqICBQYXJhbWV0ZXJzIDpcclxuICAgICAqICBmZWF0dXJlIC0g5Y2V5Liq57q/5rOo6K6w6KaB57SgXHJcbiAgICAgKi9cclxuICAgIHNldEFycm93TGluZUJveChmZWF0dXJlLGRhdGFzLHN0eWxlKXtcclxuICAgICAgICBsZXQgYXJyb3dQb2ludHMgPSBkYXRhcztcclxuICAgICAgICBpZihhcnJvd1BvaW50cy5sZW5ndGggIT0gMyl7XHJcbiAgICAgICAgICAgIGZlYXR1cmUuaGlkZW4gPSB0cnVlO1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgcCA9IGFycm93UG9pbnRzWzBdWzBdO1xyXG4gICAgICAgIGxldCBwMSA9IGFycm93UG9pbnRzWzFdWzBdO1xyXG5cclxuICAgICAgICBsZXQgbWluWCA9IHBbMF08cDFbMF0/cFswXTpwMVswXTtcclxuICAgICAgICBsZXQgbWF4WCA9IHBbMF0+cDFbMF0/cFswXTpwMVswXTtcclxuICAgICAgICBsZXQgbWluWSA9IHBbMV08cDFbMV0/cFsxXTpwMVsxXTtcclxuICAgICAgICBsZXQgbWF4WSA9IHBbMV0+cDFbMV0/cFsxXTpwMVsxXTtcclxuICAgICAgICBsZXQgYm94ID0gW21pblgsbWluWSxtYXhYLG1heFldO1xyXG4gICAgICAgIHRoaXMuYm94U2NhbGUoYm94LHN0eWxlLmxpbmVBcnJvd0JveERpc2FuY2UpO1xyXG4gICAgICAgIGZlYXR1cmUuYm94cyA9IFtib3hdO1xyXG4gICAgICAgIGZlYXR1cmUuYXJyb3dQb2ludCA9IGFycm93UG9pbnRzO1xyXG4gICAgfVxyXG5cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3nur/mloflrZfkuYvpl7TnmoTmnIDlpKflpLnop5LmmK/lkKblpKfkuo7mjIflrprnmoTpmIjlgLxcclxuICAgICAqICBQYXJhbWV0ZXJzIDpcclxuICAgICAqIHRleHRQb2ludHMgLSDmlofmnKzms6jorrDnmoTnur/mrrXmlbDnu4RcclxuICAgICAqICBzdHlsZSAt6KaB57Sg55qE5qC35byPXHJcbiAgICAgKi9cclxuICAgIGlzTWVzc3koZmVhdHVyZSx0ZXh0UG9pbnRzLHN0eWxlLGxhYmVsKXtcclxuICAgICAgICBsZXQgZmlyc3RQb2ludCA9IHRleHRQb2ludHNbMF1bMF07XHJcbiAgICAgICAgbGV0IG1pblggPSBmaXJzdFBvaW50WzBdO1xyXG4gICAgICAgIGxldCBtaW5ZID0gZmlyc3RQb2ludFsxXTtcclxuICAgICAgICBsZXQgbWF4WCA9IGZpcnN0UG9pbnRbMF07XHJcbiAgICAgICAgbGV0IG1heFkgPSBmaXJzdFBvaW50WzFdO1xyXG5cclxuICAgICAgICBsZXQgbWluQW5nbGUgPSB0ZXh0UG9pbnRzWzBdWzFdO1xyXG4gICAgICAgIGxldCBtYXhBbmdsZSA9IHRleHRQb2ludHNbMF1bMV07XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpPGxhYmVsLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgY3VyclBvaW50ID0gdGV4dFBvaW50c1tpXVswXTtcclxuICAgICAgICAgICAgbGV0IGN1cnJBbmdsZSA9IHRleHRQb2ludHNbaV1bMV07XHJcbiAgICAgICAgICAgIGlmKGN1cnJQb2ludFswXT5tYXhYKSAgIC8vIOWIpOaWreacgOWkp+WAvFxyXG4gICAgICAgICAgICAgICAgbWF4WD1jdXJyUG9pbnRbMF07XHJcbiAgICAgICAgICAgIGlmKGN1cnJQb2ludFswXTxtaW5YKSAgIC8vIOWIpOaWreacgOWwj+WAvFxyXG4gICAgICAgICAgICAgICAgbWluWD1jdXJyUG9pbnRbMF07XHJcblxyXG4gICAgICAgICAgICBpZihjdXJyUG9pbnRbMV0+bWF4WSkgICAvLyDliKTmlq3mnIDlpKflgLxcclxuICAgICAgICAgICAgICAgIG1heFk9Y3VyclBvaW50WzFdO1xyXG4gICAgICAgICAgICBpZihjdXJyUG9pbnRbMV08bWluWSkgICAvLyDliKTmlq3mnIDlsI/lgLxcclxuICAgICAgICAgICAgICAgIG1pblk9Y3VyclBvaW50WzFdO1xyXG5cclxuICAgICAgICAgICAgaWYoY3VyckFuZ2xlPm1heEFuZ2xlKSAgIC8vIOWIpOaWreacgOWkp+WAvFxyXG4gICAgICAgICAgICAgICAgbWF4QW5nbGU9Y3VyckFuZ2xlO1xyXG4gICAgICAgICAgICBpZihjdXJyQW5nbGU8bWluQW5nbGUpICAgLy8g5Yik5pat5pyA5bCP5YC8XHJcbiAgICAgICAgICAgICAgICBtaW5BbmdsZT1jdXJyQW5nbGU7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICAvL+WmguaenOaWh+Wtl+S5i+mXtO+8jOebuOW3rueahOacgOWkp+inkuW6puWkp+S6jumFjee9rueahOinkuW6puW6puWImeS4jeeUu1xyXG4gICAgICAgIGlmKG1heEFuZ2xlIC1taW5BbmdsZSA+IHN0eWxlLmFuZ2xlKXtcclxuICAgICAgICAgICAgaWYoc3R5bGUuYW5nbGVTd2l0Y2ggPT1mYWxzZSAgJiYgc3R5bGUuYW5nbGVDb2xvcil7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlLmxpbmVGaWxsU3R5bGUgPSBzdHlsZS5hbmdsZUNvbG9yO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOajgOa1i+e6v+aWh+Wtl+S5i+mXtOaYr+WQpuacieiHquWOi+ebllxyXG4gICAgICogIFBhcmFtZXRlcnMgOlxyXG4gICAgICogYm94cyAtXHJcbiAgICAgKiAgc3R5bGUgLeimgee0oOeahOagt+W8j1xyXG4gICAgICovXHJcbiAgICBnZXRMaW5lQm94cyhsYWJlbCx0ZXh0UG9pbnRzLHN0eWxlLGN0eCl7XHJcbiAgICAgICAgLy/lkozlhbblroPms6jorrDpgb/orqnnmoRib3hzXHJcbiAgICAgICAgbGV0IGJveHMgPSBbXTtcclxuICAgICAgICAvL+iHquebuOS6pOmBv+iuqeeahGJveHNcclxuICAgICAgICBsZXQgb3dtQ3Jhc2hCb3hzID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpPGxhYmVsLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgcHQgPSB0ZXh0UG9pbnRzW2ldWzBdO1xyXG4gICAgICAgICAgICAvL+ino+WGs+aXi+i9rOWQjueahOazqOiusOWSjOS4jeaXi+i9rOeahOazqOiusOagt+W8j+S4jeS4gOiHtOeahOmXrumimFxyXG4gICAgICAgICAgICBpZih0ZXh0UG9pbnRzW2ldWzFdID09IDApe1xyXG4gICAgICAgICAgICAgICAgdGV4dFBvaW50c1tpXVsxXSA9IDAuNTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgbGV0IHNjYWxlID0gMTtcclxuICAgICAgICAgICAgaWYoIWN0eCl7XHJcbiAgICAgICAgICAgICAgICAvLyBzY2FsZSA9IHRleHRQb2ludHNbaV1bM107XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v6ICD6JmR5Yiw57q/5paH5a2X5rOo6K6w5pyJ6KeS5bqm5YGP6L2s77yMYm9457uf5LiA5aKe5YqgMS4y5YCNXHJcbiAgICAgICAgICAgIGxldCBsYWJlbEJveCA9IFtwdFswXS1zdHlsZS5saW5lSGVpZ2h0KjEuMiowLjUqc2NhbGUscHRbMV0tc3R5bGUubGluZUhlaWdodCoxLjIqMC41KnNjYWxlLFxyXG4gICAgICAgICAgICAgICAgcHRbMF0rc3R5bGUubGluZUhlaWdodCoxLjIqMC41KnNjYWxlLHB0WzFdK3N0eWxlLmxpbmVIZWlnaHQqMS4yKjAuNSpzY2FsZV07XHJcbiAgICAgICAgICAgIGxldCBvd21DcmFzaEJveCA9IFtwdFswXS1zdHlsZS5saW5lSGVpZ2h0KjAuNiowLjI1KnNjYWxlLHB0WzFdLXN0eWxlLmxpbmVIZWlnaHQqMC42KjAuMjUqc2NhbGUsXHJcbiAgICAgICAgICAgICAgICBwdFswXStzdHlsZS5saW5lSGVpZ2h0KjAuNiowLjI1KnNjYWxlLHB0WzFdK3N0eWxlLmxpbmVIZWlnaHQqMC42KjAuMjUqc2NhbGVdO1xyXG4gICAgICAgICAgICBvd21DcmFzaEJveHMucHVzaChvd21DcmFzaEJveCk7XHJcbiAgICAgICAgICAgIGJveHMucHVzaChsYWJlbEJveCk7XHJcbiAgICAgICAgfVxyXG5cclxuXHJcbiAgICAgICAgaWYoIXN0eWxlLmlzSW1wb3J0YW50KXtcclxuICAgICAgICAgICAgZm9yKGxldCBqID0gMDtqPG93bUNyYXNoQm94cy5sZW5ndGgtMTtqKyspe1xyXG4gICAgICAgICAgICAgICAgbGV0IGJveDEgPSBvd21DcmFzaEJveHNbal07XHJcbiAgICAgICAgICAgICAgICBmb3IobGV0IGs9aisxIDtrPG93bUNyYXNoQm94cy5sZW5ndGggO2srKyl7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IGJveDIgPSBvd21DcmFzaEJveHNba107XHJcbiAgICAgICAgICAgICAgICAgICAgaWYodGhpcy5jcmFzaEJveChib3gxLGJveDIpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIG51bGw7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBib3hzO1xyXG4gICAgfVxyXG5cclxuICAgIC8vIOS4pOS4quebkuWtkOaYr+WQpuebuOS6pC5cclxuICAgIGNyYXNoQm94KGlib3gsamJveCl7XHJcbiAgICAgICAgcmV0dXJuIGlib3hbMF0gPD0gamJveFsyXSAmJlxyXG4gICAgICAgICAgICBpYm94WzJdICA+PSBqYm94WzBdICYmXHJcbiAgICAgICAgICAgIGlib3hbMV0gIDw9IGpib3hbM10gJiZcclxuICAgICAgICAgICAgaWJveFszXSAgPj0gamJveFsxXSA7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOabtOaWsOe6v+aWh+Wtl+azqOiusOWcqGds57uY5Yi25Lit55qE6KeS5bqmXHJcbiAgICAgKiBAcGFyYW0gdGV4dFBvaW50c1xyXG4gICAgICovXHJcbiAgICB1cGRhdGVBbmdsZSh0ZXh0UG9pbnRzKXtcclxuICAgICAgICBsZXQgYW5nbGUgPSBBdm9pZFV0aWwuZ2V0VXBkYXRlQW5nbGUodGV4dFBvaW50c1swXVsxXSx0aGlzLmJlYXJpbmcpO1xyXG5cclxuICAgICAgICBmb3IobGV0IGkgPSAwO2k8dGV4dFBvaW50cy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgdGV4dFBvaW50c1tpXVsyXSA9IHRleHRQb2ludHNbaV1bMV0rYW5nbGU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHTGFiZWxCb3g7IiwiY29uc3QgR3JpZEZpbHRlciA9IHJlcXVpcmUoJy4vLi4vLi4vLi4vdXRpbHMvZ2lzdG9vbHMvR3JpZEZpbHRlcicpO1xyXG5jb25zdCBVdGlsID0gcmVxdWlyZSgnLi9VdGlsJyk7XHJcbmNvbnN0IEdpc1Rvb2xzID0gcmVxdWlyZSgnLi4vLi4vLi4vdXRpbHMvZ2lzdG9vbHMvR2lzVG9vbHMnKTtcclxuY2xhc3MgR3JpZEZpbHRlckxhYmVse1xyXG4gICAgLyoqXHJcbiAgICAgKiAg56ys5LiA5qyh5Yid5q2l6L+H5rukXHJcbiAgICAgKiBAcGFyYW0gcG9pbnRGZWF0dXJlcyDngrnms6jorrDpm4blkIhcclxuICAgICAqIEBwYXJhbSBsaW5lRmVhdHVyZXMg57q/5rOo6K6w6ZuG5ZCIXHJcbiAgICAgKiBAcGFyYW0gc3R5bGVNYXAg5qC35byPbWFwXHJcbiAgICAgKiBAcGFyYW0gYWJsZVdlaWdodCDlhajlsYDmmK/lkKbmnYPph43pgb/orqlcclxuICAgICAqIEBwYXJhbSBuZWVkU29ydCDnrKzkuIDmrKHov4fmu6TmmK/lkKbpnIDopoHmjpLluo9cclxuICAgICAqIEBwYXJhbSB0aWxlc2l6ZSDnk6bniYflpKflsI9cclxuICAgICAqIEBwYXJhbSBjZWxsc2l6ZSDmr4/kuKrlsI/nvZHmoLzlrr3luqZcclxuICAgICAqIEBwYXJhbSBidWZmZXIg5aSW5omp5aSa5aSn5YOP57SgXHJcbiAgICAgKiBAcGFyYW0gbWF4UGVyQ2VsbCDmr4/kuKrnvZHmoLzlhoXmnIDlpJrmlL7lpJrlsJHkuKrngrlcclxuICAgICAqIEByZXR1cm5zIHt7cG9pbnRGZWF0dXJlczogQXJyYXksIGxpbmVGZWF0dXJlczogQXJyYXksIGltcG9ydGFudEZlYXR1cmVzOiBBcnJheX19XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBmcmlzdEZpbHRlcihwb2ludEZlYXR1cmVzLGxpbmVGZWF0dXJlcyxzdHlsZU1hcCxhYmxlV2VpZ2h0LG5lZWRTb3J0LHRpbGVzaXplLCBjZWxsc2l6ZSwgYnVmZmVyLG1heFBlckNlbGwpe1xyXG4gICAgICAgIGlmKGFibGVXZWlnaHQgJiYgbmVlZFNvcnQpe1xyXG4gICAgICAgICAgICBVdGlsLnNvcnQocG9pbnRGZWF0dXJlcyk7XHJcbiAgICAgICAgICAgIFV0aWwuc29ydChsaW5lRmVhdHVyZXMpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/nrKzkuIDmrKHov4fmu6RcclxuICAgICAgICAgcG9pbnRGZWF0dXJlcyA9IEdyaWRGaWx0ZXJMYWJlbC5mcmlzdEZpbHRlclN0YXJ0KHBvaW50RmVhdHVyZXMsdGlsZXNpemUsIGNlbGxzaXplLCBidWZmZXIsbWF4UGVyQ2VsbCk7XHJcbiAgICAgICAgIGxpbmVGZWF0dXJlcyA9IEdyaWRGaWx0ZXJMYWJlbC5mcmlzdEZpbHRlclN0YXJ0KGxpbmVGZWF0dXJlcyx0aWxlc2l6ZSwgY2VsbHNpemUsIGJ1ZmZlcixtYXhQZXJDZWxsKTtcclxuICAgICAgICByZXR1cm4ge3BvaW50RmVhdHVyZXM6cG9pbnRGZWF0dXJlcyxsaW5lRmVhdHVyZXM6bGluZUZlYXR1cmVzfTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAg56ys5LqM5qyh5Yid5q2l6L+H5rukXHJcbiAgICAgKiBAcGFyYW0gcG9pbnRGZWF0dXJlcyDngrnms6jorrDpm4blkIhcclxuICAgICAqIEBwYXJhbSBsaW5lRmVhdHVyZXMg57q/5rOo6K6w6ZuG5ZCIXHJcbiAgICAgKiBAcGFyYW0gc3R5bGVNYXAg5qC35byPbWFwXHJcbiAgICAgKiBAcGFyYW0gYWJsZVdlaWdodCDlhajlsYDmmK/lkKbmnYPph43pgb/orqlcclxuICAgICAqIEBwYXJhbSBuZWVkU29ydCDnrKzkuozmrKHov4fmu6TmmK/lkKbpnIDopoHmjpLluo9cclxuICAgICAqIEBwYXJhbSB0aWxlc2l6ZSDlhajlsYDnlLvluIPmnIDlpKflrr1cclxuICAgICAqIEBwYXJhbSBjZWxsc2l6ZSDmr4/kuKrlsI/nvZHmoLzlrr3luqZcclxuICAgICAqIEBwYXJhbSBidWZmZXIg5aSW5omp5aSa5aSn5YOP57SgXHJcbiAgICAgKiBAcGFyYW0gbWF4UGVyQ2VsbCDmr4/kuKrnvZHmoLzlhoXmnIDlpJrmlL7lpJrlsJHkuKrngrlcclxuICAgICAqIEByZXR1cm5zIHt7cG9pbnRGZWF0dXJlczogQXJyYXksIGxpbmVGZWF0dXJlczogQXJyYXksIGltcG9ydGFudEZlYXR1cmVzOiBBcnJheX19XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzY2VuZEZpbHRlcihwb2ludEZlYXR1cmVzLGxpbmVGZWF0dXJlcyxzdHlsZU1hcCxhYmxlV2VpZ2h0LG5lZWRTb3J0LHRpbGVzaXplLCBjZWxsc2l6ZSwgYnVmZmVyLG1heFBlckNlbGwpe1xyXG4gICAgICAgIGlmKGFibGVXZWlnaHQgJiYgbmVlZFNvcnQpe1xyXG4gICAgICAgICAgICBVdGlsLnNvcnQocG9pbnRGZWF0dXJlcyk7XHJcbiAgICAgICAgICAgIFV0aWwuc29ydChsaW5lRmVhdHVyZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICAvL+esrOS6jOasoei/h+a7pFxyXG4gICAgICAgICBwb2ludEZlYXR1cmVzID0gR3JpZEZpbHRlckxhYmVsLnNjZW5kRmlsdGVyU3RhcnQocG9pbnRGZWF0dXJlcyx0aWxlc2l6ZSwgMTYsIGJ1ZmZlcik7XHJcbiAgICAgICAgIGxpbmVGZWF0dXJlcyA9IEdyaWRGaWx0ZXJMYWJlbC5zY2VuZEZpbHRlclN0YXJ0KGxpbmVGZWF0dXJlcyx0aWxlc2l6ZSwgMTYsIGJ1ZmZlcik7XHJcblxyXG4gICAgICAgIGxldCByZXR1cm5GZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgIHJldHVybkZlYXR1cmVzID0gcmV0dXJuRmVhdHVyZXMuY29uY2F0KHBvaW50RmVhdHVyZXMpO1xyXG4gICAgICAgIHJldHVybkZlYXR1cmVzID0gcmV0dXJuRmVhdHVyZXMuY29uY2F0KGxpbmVGZWF0dXJlcyk7XHJcbiAgICAgICAgcmV0dXJuIHJldHVybkZlYXR1cmVzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqICDnp7vpmaTnk6bniYflpJbnmoTngrnms6jorrBcclxuICAgICAqIEBwYXJhbSBmZWF0dXJlc1xyXG4gICAgICogQHBhcmFtIHRpbGVzaXplXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyByZW1vdmVUaWxlT3V0UG9pbnRGZWF0dXJlcyhmZWF0dXJlcyx0aWxlU2l6ZSl7XHJcbiAgICAgICAgbGV0IG5ld0ZlYXR1cmVzID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpPGZlYXR1cmVzLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgZmVhdHVyZSA9IGZlYXR1cmVzW2ldO1xyXG4gICAgICAgICAgICBsZXQgcHQgPWZlYXR1cmUgLmNlbnRlclBvaW50O1xyXG4gICAgICAgICAgICBpZihwdFswXSA+PSAwICYmIHB0WzBdIDw9IHRpbGVTaXplICYmIHB0WzFdID49IDAgJiYgcHRbMV0gPD0gdGlsZVNpemUpe1xyXG4gICAgICAgICAgICAgICAgbmV3RmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbmV3RmVhdHVyZXM7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAg56e76Zmk55Om54mH5aSW55qE57q/5rOo6K6wXHJcbiAgICAgKiBAcGFyYW0gZmVhdHVyZXNcclxuICAgICAqIEBwYXJhbSB0aWxlc2l6ZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcmVtb3ZlVGlsZU91dExpbmVGZWF0dXJlcyhmZWF0dXJlcyx0aWxlU2l6ZSl7XHJcbiAgICAgICAgbGV0IG5ld0ZlYXR1cmVzID0gW107XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpPGZlYXR1cmVzLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgZmVhdHVyZSA9IGZlYXR1cmVzW2ldO1xyXG4gICAgICAgICAgICBmb3IobGV0IGogPSAwO2o8ZmVhdHVyZS5kYXRhcy5sZW5ndGg7aisrKXtcclxuICAgICAgICAgICAgICAgIGxldCBwdCA9IGZlYXR1cmUuZGF0YXNbal1bMF07XHJcbiAgICAgICAgICAgICAgICBpZihwdFswXSA+PSAwICYmIHB0WzBdIDw9IHRpbGVTaXplICYmIHB0WzFdID49IDAgJiYgcHRbMV0gPD0gdGlsZVNpemUpe1xyXG4gICAgICAgICAgICAgICAgICAgIG5ld0ZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWs7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIG5ld0ZlYXR1cmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOazqOiusOesrOS4gOasoeWIneatpeagvOe9kei/h+a7pFxyXG4gICAgICogQHBhcmFtIGZlYXR1cmVzXHJcbiAgICAgKiBAcGFyYW0gdGlsZXNpemUg55Om54mH5aSn5bCPXHJcbiAgICAgKiBAcGFyYW0gY2VsbHNpemUg5bCP5q2j5pa55b2i572R5qC855qE5a69XHJcbiAgICAgKiBAcGFyYW0gYnVmZmVyICDlpJbmianlpJrlsJHlg4/ntKBcclxuICAgICAqIEBwYXJhbSBtYXhQZXJDZWxsICDlsI/mraPmlrnlvaLkuK3lhYHorrjmlL7lpJrlsI/kuKrms6jorrBcclxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGZyaXN0RmlsdGVyU3RhcnQoZmVhdHVyZXMsdGlsZXNpemUsIGNlbGxzaXplLCBidWZmZXIsbWF4UGVyQ2VsbCl7XHJcbiAgICAgICAgbGV0IGdyaWRGaWx0ZXIgPSBuZXcgR3JpZEZpbHRlcih0aWxlc2l6ZSwgY2VsbHNpemUsIGJ1ZmZlcixtYXhQZXJDZWxsKTtcclxuICAgICAgICBsZXQgcmV0dXJuRmVhdHVyZXMgPSBbXTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwO2k8ZmVhdHVyZXMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGxldCBmZWF0dXJlID0gZmVhdHVyZXNbaV07XHJcbiAgICAgICAgICAgIGxldCBib29sID0gZ3JpZEZpbHRlci5maWx0ZXIoZmVhdHVyZS5jZW50ZXJQb2ludFswXSxmZWF0dXJlLmNlbnRlclBvaW50WzFdKTtcclxuICAgICAgICAgICAgaWYoYm9vbCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5GZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXR1cm5GZWF0dXJlcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICDms6jorrDnrKzkuozmrKFib3jmoLznvZHov4fmu6RcclxuICAgICAqIEBwYXJhbSBmZWF0dXJlc1xyXG4gICAgICogQHBhcmFtIHRpbGVzaXplIOeTpueJh+Wkp+Wwj1xyXG4gICAgICogQHBhcmFtIGNlbGxzaXplIOWwj+ato+aWueW9oue9keagvOeahOWuvVxyXG4gICAgICogQHBhcmFtIGJ1ZmZlciAg5aSW5omp5aSa5bCR5YOP57SgXHJcbiAgICAgKiBAcGFyYW0gbWF4UGVyQ2VsbCAg5bCP5q2j5pa55b2i5Lit5YWB6K645pS+5aSa5bCP5Liq5rOo6K6wXHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBzY2VuZEZpbHRlclN0YXJ0KGZlYXR1cmVzLHRpbGVzaXplLCBjZWxsc2l6ZSwgYnVmZmVyKXtcclxuICAgICAgICBsZXQgZ3JpZEZpbHRlciA9IG5ldyBHcmlkRmlsdGVyKHRpbGVzaXplLCBjZWxsc2l6ZSwgYnVmZmVyLDEpO1xyXG4gICAgICAgIGxldCByZXR1cm5GZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgIGZvcihsZXQgaSA9IDA7aTxmZWF0dXJlcy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgbGV0IGZlYXR1cmUgPSBmZWF0dXJlc1tpXTtcclxuICAgICAgICAgICAgbGV0IGJvb2wgPSBncmlkRmlsdGVyLmZpbHRlckJ5Qm94KGZlYXR1cmUuZmlsdGVyQm94KTtcclxuICAgICAgICAgICAgaWYoYm9vbCl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5GZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiByZXR1cm5GZWF0dXJlcztcclxuICAgIH1cclxuXHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOesrOS4ieasoei/h+a7pO+8jOazqOiusOWOu+mHjVxyXG4gICAgICogQHBhcmFtIGZlYXR1cmVzXHJcbiAgICAgKiBAcGFyYW0gdGlsZVNpemVcclxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHRocmVlRmlsdGVyKGZlYXR1cmVzLHN0eWxlTWFwLHRpbGVTaXplKXtcclxuICAgICAgICBsZXQgZnM9IEdyaWRGaWx0ZXJMYWJlbC5nZXRJbXBvcnRhbnRPdGhlckZlYXR1cmVzKGZlYXR1cmVzLHN0eWxlTWFwKTtcclxuXHJcbiAgICAgICAgbGV0IGxhYmVsTWFwID0gVXRpbC5ncm91cEJ5TGFiZWwoZnMub3RoZXJGZWF0dXJlcyk7XHJcbiAgICAgICAgbGV0IHJldHVybkZlYXR1cmVzID0gW107XHJcblxyXG4gICAgICAgIGxldCBib3gyPSBbMCwwLHRpbGVTaXplLHRpbGVTaXplXTtcclxuICAgICAgICBmb3IobGV0IGxhYmVsIGluIGxhYmVsTWFwKXtcclxuICAgICAgICAgICAgbGV0IGxhYmVsQXJyID0gbGFiZWxNYXBbbGFiZWxdO1xyXG4gICAgICAgICAgICBpZihsYWJlbEFyci5sZW5ndGggPT0gMSl7XHJcbiAgICAgICAgICAgICAgICByZXR1cm5GZWF0dXJlcy5wdXNoKGxhYmVsQXJyWzBdKTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICBsZXQgaW5Cb3hGZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yKGxldCBpID0gMDtpPGxhYmVsQXJyLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlID0gbGFiZWxBcnJbaV07XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoZmVhdHVyZS50eXBlID09MSl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmKEdpc1Rvb2xzLmlzSW5Cb3goZmVhdHVyZS5ib3gsYm94Mikpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgaW5Cb3hGZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybkZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGlmKGZlYXR1cmUudHlwZSA9PTIpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBsZXQgaXNJbkJveCA9IHRydWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvcihsZXQgaiA9MDtqPGZlYXR1cmUuYm94cy5sZW5ndGg7aisrKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGxldCBib3ggPSBmZWF0dXJlLmJveHNbal07XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpZighR2lzVG9vbHMuaXNJbkJveChib3gsYm94Mikpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGlzSW5Cb3ggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYoaXNJbkJveCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBpbkJveEZlYXR1cmVzLnB1c2goZmVhdHVyZSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuRmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBpZihpbkJveEZlYXR1cmVzLmxlbmd0aCA+IDApe1xyXG4gICAgICAgICAgICAgICAgICAgIC8v5oyJ54Wn5p2D6YeN5o6S5bqPXHJcbiAgICAgICAgICAgICAgICAgICAgaW5Cb3hGZWF0dXJlcyA9IFV0aWwuc29ydFByaW1hcnlJZChpbkJveEZlYXR1cmVzKTtcclxuICAgICAgICAgICAgICAgICAgICAvL+S/neeVmeesrOS4gOS4qlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIHJldHVybkZlYXR1cmVzLnB1c2goaW5Cb3hGZWF0dXJlc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuRmVhdHVyZXMgPSByZXR1cm5GZWF0dXJlcy5jb25jYXQoR3JpZEZpbHRlckxhYmVsLmRpc3RpbmN0RmVhdHVyZXMoaW5Cb3hGZWF0dXJlcyxzdHlsZU1hcCkpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm5GZWF0dXJlcyA9IHJldHVybkZlYXR1cmVzLmNvbmNhdChmcy5pbXBvcnRhbnRGZWF0dXJlcyk7XHJcbiAgICAgICAgcmV0dXJuIHJldHVybkZlYXR1cmVzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICBzdGF0aWMgZGlzdGluY3RGZWF0dXJlcyhmZWF0dXJlcyxzdHlsZU1hcCl7XHJcbiAgICAgICAgbGV0IGZlYXR1cmUgPSBmZWF0dXJlc1swXTtcclxuICAgICAgICBsZXQgZmllbGQgPSAnJztcclxuICAgICAgICBpZihmZWF0dXJlLnR5cGUgPT0gMSl7XHJcbiAgICAgICAgICAgIGZpZWxkID0gJ2Rpc3RhbmNlJztcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYoZmVhdHVyZS50eXBlID09IDIpe1xyXG4gICAgICAgICAgICBpZihmZWF0dXJlLmxpbmVUeXBlID09ICd0ZXh0Jyl7XHJcbiAgICAgICAgICAgICAgICBmaWVsZCA9ICdsaW5lVGV4dERpc3RhbmNlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihmZWF0dXJlLmxpbmVUeXBlID09ICdjb2RlJyl7XHJcbiAgICAgICAgICAgICAgICBmaWVsZCA9ICdsaW5lQ29kZURpc3RhbmNlJztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZzID0gW107XHJcbiAgICAgICAgZnMucHVzaChmZWF0dXJlc1swXSk7XHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpPGZlYXR1cmVzLmxlbmd0aCAtMTtpKyspe1xyXG4gICAgICAgICAgICBsZXQgZmVhdHVyZSA9IGZlYXR1cmVzW2ldO1xyXG4gICAgICAgICAgICBpZihmZWF0dXJlLmhpZGRlbiA9PXRydWUpe1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IG5leHRGZWF0dXJlID0gZmVhdHVyZXNbaSsxXTtcclxuICAgICAgICAgICAgLy/msYLkuKTkuKrngrnms6jorrDkuYvpl7TnmoTot53nprtcclxuICAgICAgICAgICAgbGV0IGRpc3RhbmNlID0gR3JpZEZpbHRlckxhYmVsLmdldERpc3RhbmNlKGZlYXR1cmUuY2VudGVyUG9pbnQsbmV4dEZlYXR1cmUuY2VudGVyUG9pbnQpO1xyXG4gICAgICAgICAgICBsZXQgc3R5bGUgPSBzdHlsZU1hcFtmZWF0dXJlLnN0eWxlSWRdO1xyXG4gICAgICAgICAgICBsZXQgZCA9IHN0eWxlW2ZpZWxkXT9zdHlsZVtmaWVsZF06MDtcclxuICAgICAgICAgICAgaWYoZGlzdGFuY2UgPCBkKXtcclxuICAgICAgICAgICAgICAgIG5leHRGZWF0dXJlLmhpZGRlbiA9IHRydWU7XHJcbiAgICAgICAgICAgIH1lbHNle1xyXG4gICAgICAgICAgICAgICAgZnMucHVzaChuZXh0RmVhdHVyZSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5rGC5Lik54K55LmL6Ze055qE6Led56a7XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBnZXREaXN0YW5jZShwMSxwMil7XHJcbiAgICAgICAgbGV0IGNhbFggPSBwMlswXSAtIHAxWzBdO1xyXG4gICAgICAgIGxldCBjYWxZID0gcDJbMV0gLSBwMVsxXTtcclxuICAgICAgICByZXR1cm4gTWF0aC5wb3coKGNhbFggKmNhbFggKyBjYWxZICogY2FsWSksIDAuNSk7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOWwhuazqOiusOWIhuS4uumHjeimgeazqOiusOWSjOmdnumHjeimgeazqOiusFxyXG4gICAgICogQHBhcmFtIGZlYXR1cmVzXHJcbiAgICAgKiBAcGFyYW0gc3R5bGVNYXBcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGdldEltcG9ydGFudE90aGVyRmVhdHVyZXMoZmVhdHVyZXMsc3R5bGVNYXApe1xyXG4gICAgICAgIGxldCBpbXBvcnRhbnRGZWF0dXJlcyA9W107XHJcbiAgICAgICAgbGV0IG90aGVyRmVhdHVyZXMgPSBbXTtcclxuXHJcbiAgICAgICAgZm9yKGxldCBpID0gMDtpPGZlYXR1cmVzLmxlbmd0aDtpKyspe1xyXG4gICAgICAgICAgICBsZXQgZmVhdHVyZSA9IGZlYXR1cmVzW2ldO1xyXG4gICAgICAgICAgICBsZXQgc3R5bGUgPSBzdHlsZU1hcFtmZWF0dXJlLnN0eWxlSWRdO1xyXG4gICAgICAgICAgICBpZihzdHlsZS5pc0ltcG9ydGFudCl7XHJcbiAgICAgICAgICAgICAgICBpbXBvcnRhbnRGZWF0dXJlcy5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIG90aGVyRmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIHtvdGhlckZlYXR1cmVzOm90aGVyRmVhdHVyZXMsaW1wb3J0YW50RmVhdHVyZXM6aW1wb3J0YW50RmVhdHVyZXN9O1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBHcmlkRmlsdGVyTGFiZWw7IiwiLyoqXG4gKiBDcmVhdGVkIGJ5IGtvbmdqaWFuIG9uIDIwMTcvNS8xLlxuICovXG5jbGFzcyBMYWJlbERyYXdlcntcbiAgICBjb25zdHJ1Y3RvcihsYXllckRhdGFNYXAsc3R5bGVNYXAsbGV2ZWwpIHtcbiAgICAgICAgdGhpcy5sYXllckRhdGFNYXAgPSBsYXllckRhdGFNYXA7XG4gICAgICAgIHRoaXMubGV2ZWwgPSBsZXZlbDtcbiAgICAgICAgdGhpcy5zdHlsZU1hcCA9IHN0eWxlTWFwO1xuICAgICAgICB0aGlzLnByb3BlcnR5R2V0dGVyTWFwID0ge307XG4gICAgfVxuXG4gICAgZ2V0TGF5ZXIobGF5ZXJuYW1lKXtcbiAgICAgICAgdGhpcy5sYXllckRhdGFzID0ge307XG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5sYXllckRhdGFNYXBbbGF5ZXJuYW1lXTtcbiAgICAgICAgaWYoZGF0YSA9PSBudWxsIHx8IGRhdGEuZmVhdHVyZXMgPT0gbnVsbCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3BlcnR5R2V0dGVyTWFwW2xheWVybmFtZV0gPSB0aGlzLmdldFByb3BlcnR5KGRhdGEuZmllbGRzQ29uZmlnKTtcbiAgICAgICAgdGhpcy5sYXllckRhdGFzW2xheWVybmFtZV0gPSBkYXRhO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBnZXRBbGxMYXllcigpe1xuICAgICAgICB0aGlzLmxheWVyRGF0YXMgPSB0aGlzLmxheWVyRGF0YU1hcDtcbiAgICAgICAgZm9yKGxldCBsYXllcm5hbWUgaW4gdGhpcy5sYXllckRhdGFNYXApe1xuICAgICAgICAgICAgdGhpcy5wcm9wZXJ0eUdldHRlck1hcFtsYXllcm5hbWVdID0gdGhpcy5nZXRQcm9wZXJ0eSh0aGlzLmxheWVyRGF0YU1hcFtsYXllcm5hbWVdLmZpZWxkc0NvbmZpZyk7XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHRoaXM7XG4gICAgfVxuXG5cbiAgICBnZXRHcm91cExheWVyKGxheWVybmFtZSx2YWx1ZSl7XG4gICAgICAgIHRoaXMubGF5ZXJEYXRhcyA9IHt9O1xuICAgICAgICBsZXQgdmFsdWVBcnIgPSB2YWx1ZS5zcGxpdCgnLCcpO1xuICAgICAgICBsZXQgbGVuZ3RoID0gdmFsdWVBcnIubGVuZ3RoO1xuICAgICAgICBpZihsZW5ndGggPT0gMCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBkYXRhID0gdGhpcy5sYXllckRhdGFNYXBbbGF5ZXJuYW1lXTtcbiAgICAgICAgaWYoZGF0YSA9PSBudWxsIHx8IGRhdGEuZmVhdHVyZXMgPT0gbnVsbCl7XG4gICAgICAgICAgICByZXR1cm4gdGhpcztcbiAgICAgICAgfVxuICAgICAgICB0aGlzLnByb3BlcnR5R2V0dGVyTWFwW2xheWVybmFtZV0gPSB0aGlzLmdldFByb3BlcnR5KGRhdGEuZmllbGRzQ29uZmlnKTtcbiAgICAgICAgdGhpcy5sYXllckRhdGFzW2xheWVybmFtZV0gPSBkYXRhO1xuICAgICAgICByZXR1cm4gdGhpcztcbiAgICB9XG5cbiAgICBnZXRQcm9wZXJ0eShmaWVsZHNDb25maWcpe1xuICAgICAgICBsZXQgcHJvcGVydHlDb25maWcgPSB7fTtcbiAgICAgICAgbGV0IGlkSW5kZXggPSAwO1xuICAgICAgICBmb3IodmFyIGkgPSAwIDtpIDwgZmllbGRzQ29uZmlnLmxlbmd0aDsgaSArKyl7XG4gICAgICAgICAgICBpZihmaWVsZHNDb25maWdbaV0uaWQgPT0gJ3RydWUnIHx8IGZpZWxkc0NvbmZpZ1tpXS5pZCA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICBpZEluZGV4ID0gZmllbGRzQ29uZmlnW2ldLmluZGV4O1xuICAgICAgICAgICAgfVxuICAgICAgICAgICAgcHJvcGVydHlDb25maWdbZmllbGRzQ29uZmlnW2ldLm5hbWVdID0gcGFyc2VJbnQoZmllbGRzQ29uZmlnW2ldLmluZGV4KTtcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4ge3Byb3BlcnR5Q29uZmlnOnByb3BlcnR5Q29uZmlnLGlkSW5kZXg6aWRJbmRleH07XG4gICAgfVxuXG4gICAgc2V0U3R5bGUoZm4pe1xuXHRcdGZvcihsZXQgbGF5ZXJuYW1lIGluICB0aGlzLmxheWVyRGF0YXMpe1xuXHRcdCAgICBsZXQgbGF5ZXJEYXRhID0gdGhpcy5sYXllckRhdGFzW2xheWVybmFtZV07XG5cdFx0ICAgIGxldCBwcm9wZXJ0eUdldHRlciA9IHRoaXMucHJvcGVydHlHZXR0ZXJNYXBbbGF5ZXJuYW1lXTtcblx0XHQgICAgZm9yKGxldCBpID0wO2k8bGF5ZXJEYXRhLmZlYXR1cmVzLmxlbmd0aDtpKyspe1xuICAgICAgICAgICAgICAgIGxldCBmZWF0dXJlID0gbGF5ZXJEYXRhLmZlYXR1cmVzW2ldO1xuXG4gICAgICAgICAgICAgICAgbGV0IGdldCA9IGZ1bmN0aW9uKGtleSl7XG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmZWF0dXJlWzFdW3Byb3BlcnR5R2V0dGVyLnByb3BlcnR5Q29uZmlnW2tleV1dXG4gICAgICAgICAgICAgICAgfTtcblxuICAgICAgICAgICAgICAgIGxldCBzdHlsZSA9IGZuLmNhbGwoe30sdGhpcy5sZXZlbCxnZXQpO1xuXG4gICAgICAgICAgICAgICAgaWYoc3R5bGUgJiYgc3R5bGUuc2hvdyA9PSB0cnVlKXtcbiAgICAgICAgICAgICAgICAgICAgaWYoIXRoaXMuc3R5bGVNYXBbc3R5bGUuX2lkXSl7XG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLnN0eWxlTWFwW3N0eWxlLl9pZF0gPSBzdHlsZTtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLmF2b2lkV2VpZ2h0ID0gdGhpcy5nZXRXZWlnaHQoc3R5bGUsZmVhdHVyZSxwcm9wZXJ0eUdldHRlcik7XG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuc3R5bGVJZCA9IHN0eWxlLl9pZDtcbiAgICAgICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgIH1cblxuICAgIHNldEdsb2JhbFN0eWxlKGZuKXtcbiAgICAgICAgdGhpcy5nbG9iYWxTdHlsZSA9IGZuLmNhbGwoe30pO1xuICAgIH1cblxuICAgIGdldFdlaWdodChzdHlsZSxmZWF0dXJlLHByb3BlcnR5R2V0dGVyKXtcblxuICAgICAgICBsZXQgd2VpZ2h0ID0gZmVhdHVyZVsxXVtwcm9wZXJ0eUdldHRlci5wcm9wZXJ0eUNvbmZpZ1tzdHlsZS5hdm9pZEZpZWxkXV07XG4gICAgICAgIGlmICh3ZWlnaHQpIHtcbiAgICAgICAgICAgIHdlaWdodCA9IHBhcnNlSW50KHdlaWdodCk7XG4gICAgICAgICAgICBpZiAoaXNOYU4od2VpZ2h0KSkge1xuICAgICAgICAgICAgICAgIHdlaWdodCA9IDA7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1lbHNle1xuICAgICAgICAgICAgd2VpZ2h0ID0gIDA7XG4gICAgICAgIH1cblxuICAgICAgICBpZih3ZWlnaHQgPT0wKXtcbiAgICAgICAgICAgIGlmKHN0eWxlLmF2b2lkV2VpZ2h0KXtcbiAgICAgICAgICAgICAgICByZXR1cm4gc3R5bGUuYXZvaWRXZWlnaHQ7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHdlaWdodDtcbiAgICB9XG5cbiAgICBkcmF3KCl7XG5cbiAgICB9XG59XG5cbm1vZHVsZS5leHBvcnRzID0gTGFiZWxEcmF3ZXI7XG5cbiIsImNvbnN0IEdDdXRMaW5lID0gcmVxdWlyZSgnLi9HQ3V0TGluZScpO1xyXG5jb25zdCBBdm9pZFV0aWwgPSAgcmVxdWlyZSgnLi9Bdm9pZFV0aWwnKTtcclxuY29uc3QgX3BhdGggPSAnLi8uLi8uLi8uLi8uLi8nO1xyXG5sZXQgVGV4dHVyZU1hbmFnZXIgPW51bGw7XHJcbmNsYXNzIFBhcnNlTGFiZWxEYXRhe1xyXG4gICAgLyoqXHJcbiAgICAgKiDop6PmnpDnk6bniYflhoXms6jorrDmlbDmja5cclxuICAgICAqIEBwYXJhbSBsYXllckRhdGFzXHJcbiAgICAgKiBAcGFyYW0gc3R5bGVNYXBcclxuICAgICAqIEBwYXJhbSBpc0NsaWVudFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcGFyc2VMYXllckRhdGFzKGxheWVyRGF0YXMsc3R5bGVNYXAsdGV4dHVyZXMseHl6LGlzQ2xpZW50KXtcclxuICAgICAgICBsZXQgcG9pbnRGZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgIGxldCBsaW5lRmVhdHVyZXMgPVtdO1xyXG4gICAgICAgIGZvcihsZXQgbGF5ZXJuYW1lIGluIGxheWVyRGF0YXMpe1xyXG4gICAgICAgICAgICBpZihsYXllcm5hbWUgPT0gJ19sYXllckF2b2lkcycpe1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgbGV0IGxheWVyRGF0YSA9IGxheWVyRGF0YXNbbGF5ZXJuYW1lXTtcclxuICAgICAgICAgICAgbGF5ZXJEYXRhLnh5eiA9IHh5ejtcclxuICAgICAgICAgICAgbGV0IHByb3BlcnR5R2V0dGVyID0gUGFyc2VMYWJlbERhdGEuZ2V0UHJvcGVydHkobGF5ZXJEYXRhLmZpZWxkc0NvbmZpZyk7XHJcbiAgICAgICAgICAgIGlmKGxheWVyRGF0YS50eXBlID09IDEpe1xyXG4gICAgICAgICAgICAgICAgbGV0IHBmcyA9IFBhcnNlTGFiZWxEYXRhLnBhcnNlUG9pbnRMYXllcihsYXllckRhdGEsbGF5ZXJuYW1lLHByb3BlcnR5R2V0dGVyLHN0eWxlTWFwLHRleHR1cmVzLGlzQ2xpZW50KTtcclxuICAgICAgICAgICAgICAgIHBvaW50RmVhdHVyZXMgPSBwb2ludEZlYXR1cmVzLmNvbmNhdChwZnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmKGxheWVyRGF0YS50eXBlID09IDIpe1xyXG4gICAgICAgICAgICAgICAgbGV0IGxmcyA9IFBhcnNlTGFiZWxEYXRhLnBhcnNlTGluZUxheWVyKGxheWVyRGF0YSxsYXllcm5hbWUscHJvcGVydHlHZXR0ZXIsc3R5bGVNYXAsaXNDbGllbnQpO1xyXG4gICAgICAgICAgICAgICAgbGluZUZlYXR1cmVzID0gbGluZUZlYXR1cmVzLmNvbmNhdChsZnMpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4ge3BvaW50RmVhdHVyZXM6cG9pbnRGZWF0dXJlcyxsaW5lRmVhdHVyZXM6bGluZUZlYXR1cmVzfTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICDop6PmnpDngrnlm77lsYLmlbDmja5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHBhcnNlUG9pbnRMYXllcihsYXllckRhdGEsbGF5ZXJuYW1lLHByb3BlcnR5R2V0dGVyLHN0eWxlTWFwLHRleHR1cmVzLGlzQ2xpZW50KXtcclxuICAgICAgICBsZXQgcG9pbnRGZWF0dXJlcyA9IFtdO1xyXG4gICAgICAgIGZvcihsZXQgaSA9MDtpPGxheWVyRGF0YS5mZWF0dXJlcy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgbGV0IGZlYXR1cmUgPSBsYXllckRhdGEuZmVhdHVyZXNbaV07XHJcbiAgICAgICAgICAgIGxldCBzdHlsZSA9IHN0eWxlTWFwW2ZlYXR1cmUuc3R5bGVJZF07XHJcbiAgICAgICAgICAgIGlmKCFzdHlsZSl7XHJcbiAgICAgICAgICAgICAgICBjb250aW51ZTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmVhdHVyZS5jZW50ZXJQb2ludCA9IGZlYXR1cmVbMl07XHJcbiAgICAgICAgICAgIGZlYXR1cmUuYXR0cmlidXRlSWQgPSBsYXllcm5hbWUgKydfXycrIGZlYXR1cmVbMV1bcHJvcGVydHlHZXR0ZXIuaWRJbmRleF07XHJcbiAgICAgICAgICAgIGZlYXR1cmUubGF5ZXJOYW1lID0gbGF5ZXJuYW1lO1xyXG4gICAgICAgICAgICBmZWF0dXJlLnh5eiA9IGxheWVyRGF0YS54eXo7XHJcbiAgICAgICAgICAgIGZlYXR1cmUucHJvcGVydHlHZXR0ZXIgPXByb3BlcnR5R2V0dGVyO1xyXG4gICAgICAgICAgICBmZWF0dXJlLnR5cGUgPWxheWVyRGF0YS50eXBlO1xyXG4gICAgICAgICAgICBmZWF0dXJlLndlaWdodCA9IGZlYXR1cmUuYXZvaWRXZWlnaHQ7XHJcbiAgICAgICAgICAgIGlmKGZlYXR1cmUuYXZvaWRXZWlnaHQgPT0gbnVsbCB8fCBpc05hTihmZWF0dXJlLmF2b2lkV2VpZ2h0KSl7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlLmF2b2lkV2VpZ2h0ID0gc3R5bGUuYXZvaWRXZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlLndlaWdodCA9IGZlYXR1cmUuYXZvaWRXZWlnaHQ7XHJcbiAgICAgICAgICAgICAgICBpZihmZWF0dXJlLndlaWdodCA9PSBudWxsKXtcclxuICAgICAgICAgICAgICAgICAgICBmZWF0dXJlLndlaWdodCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgZmVhdHVyZS5hdm9pZFdlaWdodCA9IDA7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYoc3R5bGUuaXNJbXBvcnRhbnQpe1xyXG4gICAgICAgICAgICAgICAgZmVhdHVyZS5hdm9pZFdlaWdodCA9IDk5OTk5OTk5O1xyXG4gICAgICAgICAgICAgICAgZmVhdHVyZS53ZWlnaHQgPSA5OTk5OTk5OTtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZmVhdHVyZSA9IFBhcnNlTGFiZWxEYXRhLnBhcnNlUG9pbnQoZmVhdHVyZSxzdHlsZSx0ZXh0dXJlcyxpc0NsaWVudCk7XHJcbiAgICAgICAgICAgIHBvaW50RmVhdHVyZXMucHVzaChmZWF0dXJlKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJldHVybiBwb2ludEZlYXR1cmVzO1xyXG4gICAgfVxyXG5cclxuXHJcbiAgICAvKipcclxuICAgICAqICDop6PmnpDnur/lm77lsYLmlbDmja5cclxuICAgICAqL1xyXG4gICAgc3RhdGljIHBhcnNlTGluZUxheWVyKGxheWVyRGF0YSxsYXllcm5hbWUscHJvcGVydHlHZXR0ZXIsc3R5bGVNYXAsaXNDbGllbnQpe1xyXG4gICAgICAgIGxldCBsaW5lRmVhdHVyZXMgPSBbXTtcclxuICAgICAgICBmb3IobGV0IGkgPTA7aTxsYXllckRhdGEuZmVhdHVyZXMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGxldCBmZWF0dXJlID0gbGF5ZXJEYXRhLmZlYXR1cmVzW2ldO1xyXG4gICAgICAgICAgICBsZXQgc3R5bGUgPSBzdHlsZU1hcFtmZWF0dXJlLnN0eWxlSWRdO1xyXG4gICAgICAgICAgICBpZighc3R5bGUpe1xyXG4gICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgZmVhdHVyZS5sYXllck5hbWUgPSBsYXllcm5hbWU7XHJcbiAgICAgICAgICAgIGxldCBmZWF0dXJlcyA9IFBhcnNlTGFiZWxEYXRhLnBhcnNlTGluZShmZWF0dXJlLHN0eWxlLGxheWVyRGF0YSxwcm9wZXJ0eUdldHRlcixpc0NsaWVudCk7XHJcbiAgICAgICAgICAgIGxpbmVGZWF0dXJlcyA9IGxpbmVGZWF0dXJlcy5jb25jYXQoZmVhdHVyZXMpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGluZUZlYXR1cmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOino+aekOeCueaVsOaNrlxyXG4gICAgICogQHBhcmFtIGZlYXR1cmVcclxuICAgICAqIEBwYXJhbSBzdHlsZVxyXG4gICAgICogQHBhcmFtIGlzQ2xpZW50XHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXl9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwYXJzZVBvaW50KGZlYXR1cmUsc3R5bGUsdGV4dHVyZXMsaXNDbGllbnQpe1xyXG4gICAgICAgIGlmKGlzQ2xpZW50KXtcclxuICAgICAgICAgICAgZmVhdHVyZS5pY29uSW1nID0gdGV4dHVyZXNbc3R5bGUudGV4dHVyZV07XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGlmKFRleHR1cmVNYW5hZ2VyID09IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgVGV4dHVyZU1hbmFnZXIgPSByZXF1aXJlKF9wYXRoICsgJ3NyYy9wcm9jZXNzL3RleHR1cmUvVGV4dHVyZU1hbmFnZXInKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZihzdHlsZS50ZXh0dXJlKXtcclxuICAgICAgICAgICAgICAgIGxldCB0ZXh0dXJlID0gVGV4dHVyZU1hbmFnZXIuZ2V0VGV4dHVyZShzdHlsZS50ZXh0dXJlKTtcclxuICAgICAgICAgICAgICAgIGlmKHRleHR1cmUgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGZlYXR1cmUuaWNvbkltZyA9IHRleHR1cmUudG9QYXR0ZXJuKHJhdGlvKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmVhdHVyZS5hdHRyaWJ1dGVzID0gUGFyc2VMYWJlbERhdGEuZ2V0QXR0cmlidXRlcyhmZWF0dXJlWzFdLGZlYXR1cmUucHJvcGVydHlHZXR0ZXIpO1xyXG4gICAgICAgIGxldCBwb2ludCA9IGZlYXR1cmVbMl07XHJcbiAgICAgICAgbGV0IHNvdXJjZUFuZ2xlRGF0YSA9IFtbcG9pbnQsIDBdXTtcclxuICAgICAgICBsZXQgbGFiZWwgPSBmZWF0dXJlLmF0dHJpYnV0ZXNbc3R5bGUubGFiZWxmaWVsZF07XHJcbiAgICAgICAgZmVhdHVyZS5wcmltYXJ5SWQgPSBmZWF0dXJlLmF0dHJpYnV0ZUlkICsgJ19yb3dfJyArIGZlYXR1cmUueHl6LnkgKyAnX2NvbF8nICsgZmVhdHVyZS54eXoueCArICdfbGV2ZWxfJyArIGZlYXR1cmUueHl6LnogKyAnX3hfJyArIHNvdXJjZUFuZ2xlRGF0YVswXVswXVswXSArICdfeV8nICsgc291cmNlQW5nbGVEYXRhWzBdWzBdWzFdO1xyXG4gICAgICAgIC8v5Y675o6J5bC+6YOo55qE56m65qC8XHJcbiAgICAgICAgZmVhdHVyZS5sYWJlbCA9IEF2b2lkVXRpbC5mb3JtYXRMYWJlbChsYWJlbCk7XHJcbiAgICAgICAgZmVhdHVyZS53ZWlnaHQgPSBmZWF0dXJlLmF2b2lkV2VpZ2h0O1xyXG5cclxuICAgICAgICBsZXQgcmFkaXVzID0gMDtcclxuICAgICAgICBpZihzdHlsZS5wb2ludEJveERpc2FuY2Upe1xyXG4gICAgICAgICAgICByYWRpdXMgPSBzdHlsZS5wb2ludEJveERpc2FuY2UqMC41O1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZmVhdHVyZS5maWx0ZXJCb3ggPVtmZWF0dXJlLmNlbnRlclBvaW50WzBdLXJhZGl1cyxmZWF0dXJlLmNlbnRlclBvaW50WzFdLXJhZGl1cyxcclxuICAgICAgICAgICAgZmVhdHVyZS5jZW50ZXJQb2ludFswXStyYWRpdXMsZmVhdHVyZS5jZW50ZXJQb2ludFsxXStyYWRpdXNdO1xyXG4gICAgICAgIGZlYXR1cmUuc291cmNlRGF0YSA9IHBvaW50O1xyXG4gICAgICAgIGZlYXR1cmUuc291cmNlQW5nbGVEYXRhID0gc291cmNlQW5nbGVEYXRhO1xyXG5cclxuICAgICAgICBpZihpc0NsaWVudCl7XHJcbiAgICAgICAgICAgIGZlYXR1cmUuaWQgPSBNYXRoLnJvdW5kKE1hdGgucmFuZG9tKCkgKiAyNTYgKiAyNTYgKiAyNTYpO1xyXG4gICAgICAgICAgICAvLyBmZWF0dXJlLmRhdGFzID0gUGFyc2VMYWJlbERhdGEudHJhbnNmb3JtRGF0YShzb3VyY2VBbmdsZURhdGEsIGZlYXR1cmUueHl6KTtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy8gZWxzZXtcclxuICAgICAgICAvLyAgICAgZmVhdHVyZS5kYXRhcyA9IHNvdXJjZUFuZ2xlRGF0YTtcclxuICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgIHJldHVybiBmZWF0dXJlO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOino+aekOe6v+aVsOaNrlxyXG4gICAgICogQHBhcmFtIGl0ZW1EYXRhXHJcbiAgICAgKiBAcGFyYW0gc3R5bGVcclxuICAgICAqIEBwYXJhbSBpc0NsaWVudFxyXG4gICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcGFyc2VMaW5lKGZlYXR1cmUsc3R5bGUsbGF5ZXJEYXRhLHByb3BlcnR5R2V0dGVyLGlzQ2xpZW50KXtcclxuICAgICAgICBpZiAoZmVhdHVyZVsyXS5sZW5ndGggPT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gW107XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgbGluZXMgPSBbXTtcclxuICAgICAgICBQYXJzZUxhYmVsRGF0YS5wcm9jZXNzTGluZVN0cmluZyhsaW5lcyxmZWF0dXJlWzJdLGZlYXR1cmUsc3R5bGUsbGF5ZXJEYXRhLHByb3BlcnR5R2V0dGVyLGlzQ2xpZW50KTtcclxuICAgICAgICByZXR1cm4gbGluZXM7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIHByb2Nlc3NMaW5lU3RyaW5nKGxpbmVzLGNvbXBvbmVudHMsZmVhdHVyZSxzdHlsZSxsYXllckRhdGEscHJvcGVydHlHZXR0ZXIsaXNDbGllbnQpIHtcclxuICAgICAgICBpZiAoQXJyYXkuaXNBcnJheShjb21wb25lbnRzWzBdKSkge1xyXG4gICAgICAgICAgICBsZXQgbGVuID0gY29tcG9uZW50cy5sZW5ndGg7XHJcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGVuOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBjb21wb25lbnQgPSBjb21wb25lbnRzW2ldO1xyXG4gICAgICAgICAgICAgICAgUGFyc2VMYWJlbERhdGEucHJvY2Vzc0xpbmVTdHJpbmcobGluZXMsY29tcG9uZW50LGZlYXR1cmUsc3R5bGUsbGF5ZXJEYXRhLHByb3BlcnR5R2V0dGVyLGlzQ2xpZW50KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCBscyA9IFBhcnNlTGFiZWxEYXRhLnBhcnNlTXVsdGlMaW5lKGZlYXR1cmUsY29tcG9uZW50cyxsYXllckRhdGEscHJvcGVydHlHZXR0ZXIsc3R5bGUsaXNDbGllbnQpO1xyXG4gICAgICAgICAgICBmb3IobGV0IGkgPTA7aTxscy5sZW5ndGg7aSsrKXtcclxuICAgICAgICAgICAgICAgIGxpbmVzLnB1c2gobHNbaV0pO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOino+aekOWkmue6v+aVsOaNrlxyXG4gICAgICogQHBhcmFtIGl0ZW1EYXRhXHJcbiAgICAgKiBAcGFyYW0gc3R5bGVcclxuICAgICAqIEBwYXJhbSBpc0NsaWVudFxyXG4gICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcGFyc2VNdWx0aUxpbmUoZmVhdHVyZSxsaW5lLCBsYXllckRhdGEscHJvcGVydHlHZXR0ZXIsc3R5bGUsaXNDbGllbnQpe1xyXG4gICAgICAgIGxldCBhdHRyaWJ1dGVzID0gUGFyc2VMYWJlbERhdGEuZ2V0QXR0cmlidXRlcyhmZWF0dXJlWzFdLHByb3BlcnR5R2V0dGVyKTtcclxuICAgICAgICBsZXQgbXVsdGlMaW5lcyA9IFtdO1xyXG4gICAgICAgIGxldCBsYWJlbCA9IGF0dHJpYnV0ZXNbc3R5bGUubGFiZWxmaWVsZF07XHJcbiAgICAgICAgbGV0IHJvYWRDb2RlTGFiZWwgPSBhdHRyaWJ1dGVzW3N0eWxlLnJvYWRDb2RlTGFiZWxdO1xyXG4gICAgICAgIC8v5Y675o6J5bC+6YOo55qE56m65qC8XHJcbiAgICAgICAgbGFiZWwgPSBBdm9pZFV0aWwuZm9ybWF0TGFiZWwobGFiZWwpO1xyXG4gICAgICAgIC8v5Y675o6J5bC+6YOo55qE56m65qC8XHJcbiAgICAgICAgcm9hZENvZGVMYWJlbCA9IEF2b2lkVXRpbC5mb3JtYXRMYWJlbChyb2FkQ29kZUxhYmVsKTtcclxuXHJcbiAgICAgICAgbGV0IG9iamVjdGlkID0gZmVhdHVyZVsxXVtwcm9wZXJ0eUdldHRlci5pZEluZGV4XTtcclxuICAgICAgICBsZXQgYXR0cmlidXRlSWQgPSBmZWF0dXJlLmxheWVyTmFtZSArJ19fJysgb2JqZWN0aWQ7XHJcbiAgICAgICAgbGV0IHdlaWdodCA9IGZlYXR1cmUuYXZvaWRXZWlnaHQ7XHJcbiAgICAgICAgaWYoc3R5bGUuaXNJbXBvcnRhbnQpe1xyXG4gICAgICAgICAgICB3ZWlnaHQgPSA5OTk5OTk5OTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBmZWF0dXJlSXRlbSA9IHtcclxuICAgICAgICAgICAgdHlwZTogbGF5ZXJEYXRhLnR5cGUsXHJcbiAgICAgICAgICAgIHNvdXJjZURhdGE6IGxpbmUsXHJcbiAgICAgICAgICAgIGxhYmVsOiBsYWJlbCxcclxuICAgICAgICAgICAgd2VpZ2h0OiBmZWF0dXJlLmF2b2lkV2VpZ2h0LFxyXG4gICAgICAgICAgICByb2FkQ29kZUxhYmVsOiByb2FkQ29kZUxhYmVsLFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGVzOiBhdHRyaWJ1dGVzLFxyXG4gICAgICAgICAgICBhdHRyaWJ1dGVJZDphdHRyaWJ1dGVJZCAsXHJcbiAgICAgICAgICAgIHN0eWxlSWQ6IGZlYXR1cmUuc3R5bGVJZCxcclxuICAgICAgICAgICAgeHl6OiBsYXllckRhdGEueHl6LFxyXG4gICAgICAgICAgICBsYXllck5hbWU6IGZlYXR1cmUubGF5ZXJOYW1lXHJcbiAgICAgICAgfTtcclxuICAgICAgICBtdWx0aUxpbmVzID0gbXVsdGlMaW5lcy5jb25jYXQoUGFyc2VMYWJlbERhdGEuY3V0TGluZUZlYXR1cmUoZmVhdHVyZUl0ZW0sc3R5bGUsaXNDbGllbnQsIGZhbHNlKSk7XHJcbiAgICAgICAgcmV0dXJuIG11bHRpTGluZXM7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOWIh+WJsue6v+azqOiusFxyXG4gICAgICogQHBhcmFtIGZlYXR1cmVcclxuICAgICAqIEBwYXJhbSBzdHlsZVxyXG4gICAgICogQHBhcmFtIGlzQ2xpZW50XHJcbiAgICAgKiBAcGFyYW0gaXNMb2NhbFxyXG4gICAgICogQHJldHVybnMgeyp9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBjdXRMaW5lRmVhdHVyZShmZWF0dXJlLCBzdHlsZSxpc0NsaWVudCxpc0xvY2FsKXtcclxuICAgICAgICBpZihpc0NsaWVudCkge1xyXG4gICAgICAgICAgICBpZiAoc3R5bGUudHlwZSA9PSAnX2RlZmF1bHRfXycpIHtcclxuICAgICAgICAgICAgICAgIGZlYXR1cmUuc291cmNlQW5nbGVEYXRhID0gUGFyc2VMYWJlbERhdGEubGluZVRvU291cmNlQW5nbGVEYXRhKGZlYXR1cmUuc291cmNlRGF0YSk7XHJcbiAgICAgICAgICAgICAgICAvLyBmZWF0dXJlLmRhdGFzID0gUGFyc2VMYWJlbERhdGEudHJhbnNmb3JtRGF0YShmZWF0dXJlLnNvdXJjZUFuZ2xlRGF0YSwgZmVhdHVyZS54eXopO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIFtmZWF0dXJlXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZlYXR1cmVzID0gR0N1dExpbmUuY3V0TGluZUZlYXR1cmUoZmVhdHVyZSxzdHlsZSwxLjApO1xyXG4gICAgICAgIC8v6buY6K6k5aSW5omp5Li6MTBcclxuICAgICAgICBsZXQgcmFkaXVzID0gNTtcclxuXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBmZWF0dXJlcy5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgZiA9IGZlYXR1cmVzW2ldO1xyXG5cclxuICAgICAgICAgICAgZi5wcmltYXJ5SWQgPSBmLmF0dHJpYnV0ZUlkICsgJ19yb3dfJyArIGZlYXR1cmUueHl6LnkgKyAnX2NvbF8nICsgZmVhdHVyZS54eXoueCArICdfbGV2ZWxfJyArIGZlYXR1cmUueHl6LnpcclxuICAgICAgICAgICAgICAgICsgJ194XycgKyBmLnNvdXJjZUFuZ2xlRGF0YVswXVswXVswXSArICdfeV8nICsgZi5zb3VyY2VBbmdsZURhdGFbMF1bMF1bMV07XHJcblxyXG4gICAgICAgICAgICBpZihpc0NsaWVudCl7XHJcbiAgICAgICAgICAgICAgICAvL+i9rOaNouS4uuWxj+W5leWdkOagh1xyXG4gICAgICAgICAgICAgICAgLy8gaWYgKGlzTG9jYWwpIHtcclxuICAgICAgICAgICAgICAgIC8vICAgICBmLmRhdGFzID0gZmVhdHVyZS50cmFuc2Zvcm1EYXRhKHRoaXMuZXh0ZW50LCB0aGlzLnJlcyk7XHJcbiAgICAgICAgICAgICAgICAvLyB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgLy8gICAgIGYuZGF0YXMgPSBQYXJzZUxhYmVsRGF0YS50cmFuc2Zvcm1EYXRhKGYuc291cmNlQW5nbGVEYXRhLCBmLnh5eixtYXhFeHRlbnQsZXh0ZW50LHJlcyx0aWxlU2l6ZSk7XHJcbiAgICAgICAgICAgICAgICAvLyB9XHJcbiAgICAgICAgICAgICAgICAvL+eUqOS6juaLvuWPlueahGlkXHJcbiAgICAgICAgICAgICAgICBmLmlkID0gTWF0aC5yb3VuZChNYXRoLnJhbmRvbSgpICogMjU2ICogMjU2ICogMjU2KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAvLyBlbHNle1xyXG4gICAgICAgICAgICAvLyAgICAgZi5kYXRhcyA9IGYuc291cmNlQW5nbGVEYXRhO1xyXG4gICAgICAgICAgICAvLyB9XHJcblxyXG4gICAgICAgICAgICBmLmxheWVyTmFtZSA9IGZlYXR1cmUubGF5ZXJOYW1lO1xyXG4gICAgICAgICAgICAvL+iOt+WPluazqOiusOeahOS4reW/g+eCuVxyXG4gICAgICAgICAgICBpZiAoZi5saW5lVHlwZSA9PSAndGV4dCcpIHtcclxuICAgICAgICAgICAgICAgIGxldCBjZW50ZXJJbmRleCA9IE1hdGguZmxvb3IoZi5zb3VyY2VBbmdsZURhdGEubGVuZ3RoIC8gMik7XHJcbiAgICAgICAgICAgICAgICBmLmNlbnRlclBvaW50ID0gZi5zb3VyY2VBbmdsZURhdGFbY2VudGVySW5kZXhdWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYoc3R5bGUubGluZVRleHRCb3hEaXNhbmNlKXtcclxuICAgICAgICAgICAgICAgICAgICAvL+adreW3nueahOWkluaJqei3neemu+iuvue9ruWkquWkp++8jOWvvOiHtOWkp+eJh+ayoee6v+azqOiusO+8jOaVheazqOmHiuaOieS6hui/meautVxyXG4gICAgICAgICAgICAgICAgICAgIHJhZGl1cyA9IHN0eWxlLmxpbmVUZXh0Qm94RGlzYW5jZSowLjU7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v6I635Y+W5rOo6K6w55qE5Lit5b+D54K5XHJcbiAgICAgICAgICAgIGlmIChmLmxpbmVUeXBlID09ICdjb2RlJykge1xyXG4gICAgICAgICAgICAgICAgZi5jZW50ZXJQb2ludCA9IGYuc291cmNlQW5nbGVEYXRhWzBdWzBdO1xyXG4gICAgICAgICAgICAgICAgaWYoc3R5bGUubGluZUNvZGVCb3hEaXNhbmNlKXtcclxuICAgICAgICAgICAgICAgICAgICByYWRpdXMgPSBzdHlsZS5saW5lQ29kZUJveERpc2FuY2UqMC41O1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAvL+iOt+WPluazqOiusOeahOS4reW/g+eCuVxyXG4gICAgICAgICAgICBpZiAoZi5saW5lVHlwZSA9PSAnYXJyb3cnKSB7XHJcbiAgICAgICAgICAgICAgICBmLmNlbnRlclBvaW50ID0gZi5zb3VyY2VBbmdsZURhdGFbMV1bMF07XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8v56ys5LqM5qyh6L+H5ruk55qEYm94XHJcbiAgICAgICAgICAgIGYuZmlsdGVyQm94ID0gW2YuY2VudGVyUG9pbnRbMF0tcmFkaXVzLGYuY2VudGVyUG9pbnRbMV0tcmFkaXVzLGYuY2VudGVyUG9pbnRbMF0rcmFkaXVzLGYuY2VudGVyUG9pbnRbMV0rcmFkaXVzXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5bCG57q/5rOo6K6w5Y6f5aeL5Z2Q5qCH5bim54K55ZKM6KeS5bqm55qE5qC85byP77yM5ZKM5YiH6L+H55qE57q/55qE5qC85byP5LiA6Ie077yI6ZKI5a+56buY6K6k5qC35byP55qE57q/5Li75py677yJXHJcbiAgICAgKiBQYXJhbWV0ZXJzOlxyXG4gICAgICogbGluZSAtIOe6v+azqOiusOWOn+Wni+aVsOaNrlxyXG4gICAgICogUmV0dXJuczpcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGxpbmVUb1NvdXJjZUFuZ2xlRGF0YShsaW5lKSB7XHJcbiAgICAgICAgbGV0IHNvdXJjZUFuZ2xlRGF0YSA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbGluZS5sZW5ndGg7IGkrKykge1xyXG4gICAgICAgICAgICBsZXQgeCA9IGxpbmVbaV07XHJcbiAgICAgICAgICAgIGxldCB5ID0gbGluZVtpICsgMV07XHJcbiAgICAgICAgICAgIHNvdXJjZUFuZ2xlRGF0YS5wdXNoKFtbeCwgeV0sIDBdKTtcclxuICAgICAgICAgICAgaSsrO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gc291cmNlQW5nbGVEYXRhO1xyXG4gICAgfTtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOWwhueTpueJh+WGheWdkOagh+i9rOaNouS4uuW9k+WJjeWxj+W5leWdkOagh1xyXG4gICAgICogUGFyYW1ldGVyczpcclxuICAgICAqIHBvaW50cyAtIOeTpueJh+WGheWdkOagh+aVsOe7hCxpdGVt56S65L6L77yaW1sxMiwyMF0sMF0gWzEyLDIwXeS4uueCueWdkOagh++8jDDkuLrml4vovaznmoTop5LluqZcclxuICAgICAqIHh5eiAtIOeTpueJh+eahOWxguihjOWIl+WPt1xyXG4gICAgICogUmV0dXJuczpcclxuICAgICAqIHJkYXRhIC0g5pys5Zyw5bGP5bmV5YaF5Z2Q5qCH5pWw57uEXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB0cmFuc2Zvcm1EYXRhKHBvaW50cywgeHl6LG1heEV4dGVudCxleHRlbnQscmVzLHRpbGVTaXplKSB7XHJcbiAgICAgICAgLy/lj5blh7rlvZPliY3op4blj6Plt6bkuIrop5LnmoTlnLDnkIblnZDmoIdcclxuICAgICAgICBsZXQgbGVmdCA9IGV4dGVudFswXTtcclxuICAgICAgICBsZXQgdG9wID0gZXh0ZW50WzNdO1xyXG5cclxuICAgICAgICAvL+WcsOWbvuacgOWkp+eahOiMg+WbtFxyXG4gICAgICAgIGxldCBtTGVmdCA9IG1heEV4dGVudFswXTtcclxuICAgICAgICBsZXQgbVRvcCA9IG1heEV4dGVudFszXTtcclxuXHJcbiAgICAgICAgLy/orqHnrpflnZDkuIrop5LnmoTlsY/luZXlnZDmoIdcclxuICAgICAgICBsZXQgeCA9IChsZWZ0IC0gbUxlZnQpIC8gcmVzO1xyXG4gICAgICAgIGxldCB5ID0gKG1Ub3AgLSB0b3ApIC8gcmVzO1xyXG5cclxuICAgICAgICBsZXQgclBvaW50ID0gW107XHJcblxyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgcG9pbnRzLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGxldCBwb2ludCA9IHBvaW50c1tpXVswXTtcclxuICAgICAgICAgICAgbGV0IGd4ID0gcG9pbnRbMF0gKyB4eXoueCAqIHRpbGVTaXplO1xyXG4gICAgICAgICAgICBsZXQgZ3kgPSBwb2ludFsxXSArIHh5ei55ICogdGlsZVNpemU7XHJcbiAgICAgICAgICAgIGxldCBwID0gW2d4IC0geCwgZ3kgLSB5XTtcclxuICAgICAgICAgICAgclBvaW50LnB1c2goW3AsIHBvaW50c1tpXVsxXV0pO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gclBvaW50O1xyXG4gICAgfTtcclxuXHJcbiAgICBzdGF0aWMgdG9Mb25sYXQocmVjdGFuZ2xlLHBvaW50LHRpbGVTaXplKXtcclxuICAgICAgICB2YXIgbG9uID0gQ2VzaXVtTWF0aC50b0RlZ3JlZXMocmVjdGFuZ2xlLndlc3QgKyByZWN0YW5nbGUud2lkdGgvIHRpbGVTaXplKiB4KTtcclxuICAgICAgICB2YXIgbGF0ID0gQ2VzaXVtTWF0aC50b0RlZ3JlZXMocmVjdGFuZ2xlLm5vcnRoIC0gcmVjdGFuZ2xlLmhlaWdodC8gdGlsZVNpemUqIHkpO1xyXG4gICAgICAgIHJldHVybiBbbG9uLGxhdF07XHJcbiAgICB9XHJcblxyXG5cclxuXHJcblxyXG4gICAgc3RhdGljIGdldFByb3BlcnR5KGZpZWxkc0NvbmZpZyl7XHJcbiAgICAgICAgbGV0IHByb3BlcnR5Q29uZmlnID0ge307XHJcbiAgICAgICAgbGV0IGlkSW5kZXggPSAwO1xyXG4gICAgICAgIGZvcih2YXIgaSA9IDAgO2kgPCBmaWVsZHNDb25maWcubGVuZ3RoOyBpICsrKXtcclxuICAgICAgICAgICAgaWYoZmllbGRzQ29uZmlnW2ldLmlkID09ICd0cnVlJyB8fCBmaWVsZHNDb25maWdbaV0uaWQgPT0gdHJ1ZSl7XHJcbiAgICAgICAgICAgICAgICBpZEluZGV4ID0gZmllbGRzQ29uZmlnW2ldLmluZGV4O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHByb3BlcnR5Q29uZmlnW2ZpZWxkc0NvbmZpZ1tpXS5uYW1lXSA9IHBhcnNlSW50KGZpZWxkc0NvbmZpZ1tpXS5pbmRleCk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiB7cHJvcGVydHlDb25maWc6cHJvcGVydHlDb25maWcsaWRJbmRleDppZEluZGV4fTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0QXR0cmlidXRlcyhmZWF0dXJlLHByb3BlcnR5R2V0dGVyKXtcclxuICAgICAgICBsZXQgYXR0cmlidXRlcyA9IHt9O1xyXG4gICAgICAgIGxldCBwcm9wZXJ0eUNvbmZpZyA9IHByb3BlcnR5R2V0dGVyLnByb3BlcnR5Q29uZmlnO1xyXG4gICAgICAgIGZvcihsZXQgbmFtZSBpbiBwcm9wZXJ0eUNvbmZpZyl7XHJcbiAgICAgICAgICAgIGF0dHJpYnV0ZXNbbmFtZV0gPSBmZWF0dXJlW3Byb3BlcnR5Q29uZmlnW25hbWVdXTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGF0dHJpYnV0ZXM7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gUGFyc2VMYWJlbERhdGE7IiwiY2xhc3MgVXRpbHtcclxuICAgIHN0YXRpYyBtZWFzdXJlVGV4dChsYWJlbCxmb250LGN0eCl7XHJcbiAgICAgICAgcmV0dXJuIGN0eC5tZWFzdXJlVGV4dChsYWJlbCkud2lkdGg7XHJcbiAgICB9XHJcblxyXG4gICAgLy/opoHntKDmjpLluo8uXHJcbiAgICBzdGF0aWMgc29ydChmZWF0dXJlcyxzdHlsZU1hcCxoYXNJbXBvcnRhbnQpe1xyXG4gICAgICAgIGlmKGZlYXR1cmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy/ku47lpKfliLDlsJHmjpLluo9cclxuICAgICAgICAgICAgcmV0dXJuICBmZWF0dXJlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICBpZihoYXNJbXBvcnRhbnQpe1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBhU3R5bGUgPSBzdHlsZU1hcFthLnN0eWxlSWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBiU3R5bGUgPSBzdHlsZU1hcFtiLnN0eWxlSWRdO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFTdHlsZS5pc0ltcG9ydGFudCAmJiAhYlN0eWxlLmlzSW1wb3J0YW50KXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIC0xO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZihiU3R5bGUuaXNJbXBvcnRhbnQgJiYgIWFTdHlsZS5pc0ltcG9ydGFudCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICBsZXQgYUF0dHIgPSBhLndlaWdodDtcclxuICAgICAgICAgICAgICAgIGxldCBiQXR0ciA9IGIud2VpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIC8vIGxldCBhSWQgPSBhLmF0dHJpYnV0ZUlkO1xyXG4gICAgICAgICAgICAgICAgLy8gbGV0IGJJZCA9IGIuYXR0cmlidXRlSWQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgYUlkID0gYS5wcmltYXJ5SWQ7XHJcbiAgICAgICAgICAgICAgICBsZXQgYklkID0gYi5wcmltYXJ5SWQ7XHJcblxyXG4gICAgICAgICAgICAgICAgaWYoIWFBdHRyKXtcclxuICAgICAgICAgICAgICAgICAgICBhQXR0ciA9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYoIWJBdHRyKXtcclxuICAgICAgICAgICAgICAgICAgICBiQXR0ciA9IC0xO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKGFBdHRyIDwgYkF0dHIpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYUF0dHIgPT0gYkF0dHIpe1xyXG4gICAgICAgICAgICAgICAgICAgIGlmKGFJZCA8IGJJZCl7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBlbHNle1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8v6KaB57Sg5o6S5bqPLlxyXG4gICAgc3RhdGljIHNvcnRQcmltYXJ5SWQoZmVhdHVyZXMpe1xyXG4gICAgICAgIGlmKGZlYXR1cmVzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgLy/ku47lpKfliLDlsJHmjpLluo9cclxuICAgICAgICAgICAgcmV0dXJuICBmZWF0dXJlcy5zb3J0KGZ1bmN0aW9uIChhLCBiKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgYUF0dHIgPSBhLndlaWdodDtcclxuICAgICAgICAgICAgICAgIGxldCBiQXR0ciA9IGIud2VpZ2h0O1xyXG5cclxuICAgICAgICAgICAgICAgIGxldCBhSWQgPSBhLnByaW1hcnlJZDtcclxuICAgICAgICAgICAgICAgIGxldCBiSWQgPSBiLnByaW1hcnlJZDtcclxuXHJcbiAgICAgICAgICAgICAgICBpZighYUF0dHIpe1xyXG4gICAgICAgICAgICAgICAgICAgIGFBdHRyID0gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZighYkF0dHIpe1xyXG4gICAgICAgICAgICAgICAgICAgIGJBdHRyID0gLTE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoYUF0dHIgPCBiQXR0cikge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIGlmIChhQXR0ciA9PSBiQXR0cil7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYoYUlkIDwgYklkKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGVsc2V7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAtMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfS5iaW5kKHRoaXMpKTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDmiorms6jorrDmjInnhafmmL7npLrnmoTms6jorrDlkI3np7DliIbnu4RcclxuICAgICAqIEBwYXJhbSBmZWF0dXJlc1xyXG4gICAgICogQHJldHVybnMge3t9fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ3JvdXBCeUxhYmVsKGZlYXR1cmVzKXtcclxuICAgICAgICBsZXQgbGFiZWxNYXAgPSB7fTtcclxuICAgICAgICBmb3IobGV0IGkgPSAwO2k8ZmVhdHVyZXMubGVuZ3RoO2krKyl7XHJcbiAgICAgICAgICAgIGxldCBmZWF0dXJlID0gZmVhdHVyZXNbaV07XHJcbiAgICAgICAgICAgIGlmKGZlYXR1cmUubGFiZWwgPT0gbnVsbCAmJiBmZWF0dXJlLmljb25JbWcgIT0gbnVsbCl7XHJcbiAgICAgICAgICAgICAgICBpZihsYWJlbE1hcFtmZWF0dXJlLmF0dHJpYnV0ZUlkXSA9PSBudWxsKXtcclxuICAgICAgICAgICAgICAgICAgICBsYWJlbE1hcFtmZWF0dXJlLmF0dHJpYnV0ZUlkXSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgbGFiZWxNYXBbZmVhdHVyZS5hdHRyaWJ1dGVJZF0ucHVzaChmZWF0dXJlKTtcclxuICAgICAgICAgICAgfWVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKCFsYWJlbE1hcFtmZWF0dXJlLnR5cGUgKyAnXycgKyBmZWF0dXJlLmxhYmVsXSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGxhYmVsTWFwW2ZlYXR1cmUudHlwZSArICdfJyArIGZlYXR1cmUubGFiZWxdID0gW107XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBsYWJlbE1hcFtmZWF0dXJlLnR5cGUgKyAnXycgKyBmZWF0dXJlLmxhYmVsXS5wdXNoKGZlYXR1cmUpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBsYWJlbE1hcDtcclxuICAgIH1cclxufVxyXG5tb2R1bGUuZXhwb3J0cyA9IFV0aWw7XHJcblxyXG5cclxuXHJcbiIsIid1c2Ugc3RyaWN0JztcblxuY29uc3QgdmVydGljYWxpemVQdW5jdHVhdGlvbiA9IHJlcXVpcmUoJy4vdmVydGljYWxpemVfcHVuY3R1YXRpb24nKTtcbmNvbnN0IEdseXBocyA9IHJlcXVpcmUoJy4vZ2x5cGhzJyk7XG5jb25zdCBQcm90b2J1ZiA9IHJlcXVpcmUoJ3BiZicpO1xuY29uc3QgUmVzb3VyY2UgPSBDZXNpdW0uUmVzb3VyY2U7XG5cbi8qKlxuICogQSBnbHlwaCBzb3VyY2UgaGFzIGEgVVJMIGZyb20gd2hpY2ggdG8gbG9hZCBuZXcgZ2x5cGhzIGFuZCBtYW5hZ2VzXG4gKiBHbHlwaEF0bGFzZXMgaW4gd2hpY2ggdG8gc3RvcmUgZ2x5cGhzIHVzZWQgYnkgdGhlIHJlcXVlc3RlZCBmb250c3RhY2tzXG4gKiBhbmQgcmFuZ2VzLlxuICpcbiAqIEBwcml2YXRlXG4gKi9cbmNsYXNzIEdseXBoU291cmNlIHtcbiAgICAvKipcbiAgICAgKiBAcGFyYW0ge3N0cmluZ30gdXJsIGdseXBoIHRlbXBsYXRlIHVybFxuICAgICAqL1xuICAgIGNvbnN0cnVjdG9yKHVybCkge1xuICAgICAgICAvLyB0aGlzLnVybCA9IHVybCAmJiBub3JtYWxpemVVUkwodXJsKTtcbiAgICAgICAgdGhpcy51cmwgPSB1cmw7XG4gICAgICAgIHRoaXMuc3RhY2tzID0ge307XG4gICAgICAgIHRoaXMubG9hZGluZyA9IHt9O1xuICAgIH1cblxuXG4gICAgZ2V0U2ltcGxlR2x5cGhzKGZvbnRzdGFjaywgZ2x5cGhJRHMsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmICh0aGlzLnN0YWNrc1tmb250c3RhY2tdID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgIHRoaXMuc3RhY2tzW2ZvbnRzdGFja10gPSB7fTtcbiAgICAgICAgfVxuXG4gICAgICAgIGNvbnN0IGdseXBocyA9IHt9O1xuICAgICAgICBjb25zdCBzdGFjayA9IHRoaXMuc3RhY2tzW2ZvbnRzdGFja107XG5cbiAgICAgICAgLy8gdGhlIG51bWJlciBvZiBwaXhlbHMgdGhlIHNkZiBiaXRtYXBzIGFyZSBwYWRkZWQgYnlcbiAgICAgICAgY29uc3QgYnVmZmVyID0gMztcblxuICAgICAgICBjb25zdCBtaXNzaW5nID0ge307XG4gICAgICAgIGxldCByZW1haW5pbmcgPSAwO1xuXG4gICAgICAgIGNvbnN0IGdldEdseXBoID0gKGdseXBoSUQpID0+IHtcbiAgICAgICAgICAgIGNvbnN0IHJhbmdlID0gTWF0aC5mbG9vcihnbHlwaElEIC8gMjU2KTtcblxuICAgICAgICAgICAgaWYgKHN0YWNrW3JhbmdlXSkge1xuICAgICAgICAgICAgICAgIGNvbnN0IGdseXBoID0gc3RhY2tbcmFuZ2VdLmdseXBoc1tnbHlwaElEXTtcbiAgICAgICAgICAgICAgICBpZiAoZ2x5cGgpIGdseXBoc1tnbHlwaElEXSA9IGdseXBoO1xuICAgICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICAgICBpZiAobWlzc2luZ1tyYW5nZV0gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgICAgICAgICBtaXNzaW5nW3JhbmdlXSA9IFtdO1xuICAgICAgICAgICAgICAgICAgICByZW1haW5pbmcrKztcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgbWlzc2luZ1tyYW5nZV0ucHVzaChnbHlwaElEKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGdseXBoSURzLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBjb25zdCBnbHlwaElEID0gZ2x5cGhJRHNbaV07XG4gICAgICAgICAgICBjb25zdCBzdHJpbmcgPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGdseXBoSUQpO1xuICAgICAgICAgICAgZ2V0R2x5cGgoZ2x5cGhJRCk7XG4gICAgICAgICAgICBpZiAodmVydGljYWxpemVQdW5jdHVhdGlvbi5sb29rdXBbc3RyaW5nXSkge1xuICAgICAgICAgICAgICAgIGdldEdseXBoKHZlcnRpY2FsaXplUHVuY3R1YXRpb24ubG9va3VwW3N0cmluZ10uY2hhckNvZGVBdCgwKSk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgICBpZiAoIXJlbWFpbmluZykgY2FsbGJhY2sodW5kZWZpbmVkLCBnbHlwaHMsIGZvbnRzdGFjayk7XG5cbiAgICAgICAgY29uc3Qgb25SYW5nZUxvYWRlZCA9IChlcnIsIHJhbmdlLCBkYXRhKSA9PiB7XG4gICAgICAgICAgICBpZiAoIWVycikge1xuICAgICAgICAgICAgICAgIGNvbnN0IHN0YWNrID0gdGhpcy5zdGFja3NbZm9udHN0YWNrXVtyYW5nZV0gPSBkYXRhLnN0YWNrc1swXTtcbiAgICAgICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG1pc3NpbmdbcmFuZ2VdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAgICAgICAgIGNvbnN0IGdseXBoSUQgPSBtaXNzaW5nW3JhbmdlXVtpXTtcbiAgICAgICAgICAgICAgICAgICAgY29uc3QgZ2x5cGggPSBzdGFjay5nbHlwaHNbZ2x5cGhJRF07XG4gICAgICAgICAgICAgICAgICAgIGlmIChnbHlwaCl7XG4gICAgICAgICAgICAgICAgICAgICAgICBnbHlwaHNbZ2x5cGhJRF0gPSBnbHlwaDtcbiAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlbWFpbmluZy0tO1xuICAgICAgICAgICAgaWYgKCFyZW1haW5pbmcpIGNhbGxiYWNrKHVuZGVmaW5lZCwgZ2x5cGhzLCBmb250c3RhY2spO1xuICAgICAgICB9O1xuXG4gICAgICAgIGZvciAoY29uc3QgciBpbiBtaXNzaW5nKSB7XG4gICAgICAgICAgICB0aGlzLmxvYWRSYW5nZShmb250c3RhY2ssIHIsIG9uUmFuZ2VMb2FkZWQpO1xuICAgICAgICB9XG4gICAgfVxuXG4gICAgbG9hZFJhbmdlKGZvbnRzdGFjaywgcmFuZ2UsIGNhbGxiYWNrKSB7XG4gICAgICAgIGlmIChyYW5nZSAqIDI1NiA+IDY1NTM1KSByZXR1cm4gY2FsbGJhY2soJ2dseXBocyA+IDY1NTM1IG5vdCBzdXBwb3J0ZWQnKTtcblxuICAgICAgICBpZiAodGhpcy5sb2FkaW5nW2ZvbnRzdGFja10gPT09IHVuZGVmaW5lZCkge1xuICAgICAgICAgICAgdGhpcy5sb2FkaW5nW2ZvbnRzdGFja10gPSB7fTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBsb2FkaW5nID0gdGhpcy5sb2FkaW5nW2ZvbnRzdGFja107XG5cbiAgICAgICAgaWYgKGxvYWRpbmdbcmFuZ2VdKSB7XG4gICAgICAgICAgICBsb2FkaW5nW3JhbmdlXS5wdXNoKGNhbGxiYWNrKTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIGxvYWRpbmdbcmFuZ2VdID0gW2NhbGxiYWNrXTtcblxuICAgICAgICAgICAgY29uc3QgcmFuZ2VOYW1lID0gYCR7cmFuZ2UgKiAyNTZ9LSR7cmFuZ2UgKiAyNTYgKyAyNTV9YDtcbiAgICAgICAgICAgIGNvbnN0IHVybCA9IGdseXBoVXJsKGZvbnRzdGFjaywgcmFuZ2VOYW1lLCB0aGlzLnVybCk7XG5cbiAgICAgICAgICAgIGxldCByZXNvdXJjZSA9IG5ldyBSZXNvdXJjZSh7dXJsOnVybH0pO1xuICAgICAgICAgICAgcmVzb3VyY2UuZmV0Y2hBcnJheUJ1ZmZlcigpLnRoZW4oZnVuY3Rpb24oZGF0YSl7XG4gICAgICAgICAgICAgICAgY29uc3QgZ2x5cGhzID0gbmV3IEdseXBocyhuZXcgUHJvdG9idWYoZGF0YSkpO1xuICAgICAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbG9hZGluZ1tyYW5nZV0ubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICAgICAgbG9hZGluZ1tyYW5nZV1baV0obnVsbCwgcmFuZ2UsIGdseXBocyk7XG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGRlbGV0ZSBsb2FkaW5nW3JhbmdlXTtcbiAgICAgICAgICAgIH0uYmluZCh0aGlzKSk7XG4gICAgICAgICAgICAvLyBhamF4LmdldEFycmF5QnVmZmVyKHVybCwgKGVyciwgcmVzcG9uc2UpID0+IHtcbiAgICAgICAgICAgIC8vICAgICBjb25zdCBnbHlwaHMgPSAhZXJyICYmIG5ldyBHbHlwaHMobmV3IFByb3RvYnVmKHJlc3BvbnNlLmRhdGEpKTtcbiAgICAgICAgICAgIC8vICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxvYWRpbmdbcmFuZ2VdLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICAvLyAgICAgICAgIGxvYWRpbmdbcmFuZ2VdW2ldKGVyciwgcmFuZ2UsIGdseXBocyk7XG4gICAgICAgICAgICAvLyAgICAgfVxuICAgICAgICAgICAgLy8gICAgIGRlbGV0ZSBsb2FkaW5nW3JhbmdlXTtcbiAgICAgICAgICAgIC8vIH0pO1xuICAgICAgICB9XG4gICAgfVxufVxuXG4vKipcbiAqIFVzZSBDTkFNRSBzaGFyZGluZyB0byBsb2FkIGEgc3BlY2lmaWMgZ2x5cGggcmFuZ2Ugb3ZlciBhIHJhbmRvbWl6ZWRcbiAqIGJ1dCBjb25zaXN0ZW50IHN1YmRvbWFpbi5cbiAqIEBwYXJhbSB7c3RyaW5nfSBmb250c3RhY2sgY29tbWEtam9pbmVkIGZvbnRzXG4gKiBAcGFyYW0ge3N0cmluZ30gcmFuZ2UgY29tbWEtam9pbmVkIHJhbmdlXG4gKiBAcGFyYW0ge3VybH0gdXJsIHRlbXBsYXRlZCB1cmxcbiAqIEBwYXJhbSB7c3RyaW5nfSBbc3ViZG9tYWlucz1hYmNdIHN1YmRvbWFpbnMgYXMgYSBzdHJpbmcgd2hlcmUgZWFjaCBsZXR0ZXIgaXMgb25lLlxuICogQHJldHVybnMge3N0cmluZ30gYSB1cmwgdG8gbG9hZCB0aGF0IHNlY3Rpb24gb2YgZ2x5cGhzXG4gKiBAcHJpdmF0ZVxuICovXG5mdW5jdGlvbiBnbHlwaFVybChmb250c3RhY2ssIHJhbmdlLCB1cmwpIHtcbiAgICBmb250c3RhY2sgPSBlbmNvZGVVUklDb21wb25lbnQoZm9udHN0YWNrKTtcbiAgICByZXR1cm4gdXJsXG4gICAgICAgIC5yZXBsYWNlKCd7Zm9udHN0YWNrfScsIGZvbnRzdGFjaylcbiAgICAgICAgLnJlcGxhY2UoJ3tyYW5nZX0nLCByYW5nZSk7XG59XG5cbm1vZHVsZS5leHBvcnRzID0gR2x5cGhTb3VyY2U7XG4iLCIndXNlIHN0cmljdCc7XG5cbm1vZHVsZS5leHBvcnRzID0gR2x5cGhzO1xuXG5mdW5jdGlvbiB0b1JHQkEoZ2x5cGgpe1xuICAgIGdseXBoLmhlaWdodD1nbHlwaC5oZWlnaHQgKyA2O1xuICAgIGdseXBoLndpZHRoID0gZ2x5cGgud2lkdGggKyA2O1xuXG4gICAgbGV0IGRpc3QgPSBuZXcgVWludDhBcnJheShnbHlwaC5iaXRtYXAubGVuZ3RoKjQpO1xuICAgIC8v55SxYemAmumBk+aBouWkjeaIkHJnYmHpgJrpgZNcbiAgICBmb3IobGV0IGkgPSAwO2k8Z2x5cGguYml0bWFwLmxlbmd0aDtpKyspe1xuICAgICAgICBsZXQgYSA9IGdseXBoLmJpdG1hcFtpXTtcbiAgICAgICAgLy8gaWYoYSAhPSAwKXtcbiAgICAgICAgLy8gICAgIGRpc3RbaSo0ICsgMF0gPSBhO1xuICAgICAgICAvLyAgICAgZGlzdFtpKjQgKyAxXSA9IGE7XG4gICAgICAgIC8vICAgICBkaXN0W2kqNCArIDJdID0gYTtcbiAgICAgICAgLy8gICAgIGRpc3RbaSo0ICsgM10gPSBhO1xuICAgICAgICAvLyB9XG4gICAgICAgIGlmKGEgIT0gMCl7XG4gICAgICAgICAgICBkaXN0W2kqNCArIDBdID0gYTtcbiAgICAgICAgICAgIGRpc3RbaSo0ICsgMV0gPSBhO1xuICAgICAgICAgICAgZGlzdFtpKjQgKyAyXSA9IGE7XG4gICAgICAgICAgICBkaXN0W2kqNCArIDNdID0gYTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBnbHlwaC5hcnJheUJ1ZmZlclZpZXcgPSBkaXN0O1xufVxuXG5cbi8vIGZ1bmN0aW9uIHRvUkdCQShnbHlwaCl7XG4vLyAgICAgZ2x5cGgucncgPSBnbHlwaC53aWR0aDtcbi8vICAgICBnbHlwaC5yaCA9IGdseXBoLmhlaWdodDtcbi8vICAgICBnbHlwaC5oZWlnaHQgPSBnbHlwaC5oZWlnaHQgKyA2ICsgKGdseXBoLndpZHRoIC0gZ2x5cGguaGVpZ2h0KTtcbi8vICAgICBnbHlwaC53aWR0aCA9IGdseXBoLndpZHRoICsgNjtcbi8vXG4vLyAgICAgdmFyIGdhbW1hID0gMC4yMTtcbi8vICAgICB2YXIgYnVmZiA9ICgyNTYuMCAtIDY0LjApIC8gMjU2LjA7XG4vLyAgICAgdmFyIHAxID0gYnVmZiAtIGdhbW1hO1xuLy8gICAgIHZhciBwMiA9IGJ1ZmYgKyBnYW1tYTtcbi8vXG4vLyAgICAgbGV0IGRpc3QgPSBuZXcgVWludDhBcnJheShnbHlwaC5iaXRtYXAubGVuZ3RoKjQpO1xuLy8gICAgIGZvcihsZXQgaSA9IDA7aTxnbHlwaC5iaXRtYXAubGVuZ3RoO2krKyl7XG4vLyAgICAgICAgIGxldCBhID0gZ2x5cGguYml0bWFwW2ldO1xuLy8gICAgICAgICB2YXIgbyA9IHNtb290aHN0ZXAocDEscDIsYS8yNTYpO1xuLy8gICAgICAgICBkaXN0W2kqNCArIDBdID0gMjU1O1xuLy8gICAgICAgICBkaXN0W2kqNCArIDFdID0gMjU1O1xuLy8gICAgICAgICBkaXN0W2kqNCArIDJdID0gMjU1O1xuLy8gICAgICAgICBkaXN0W2kqNCArIDNdID0gbyoyNTY7XG4vLyAgICAgfVxuLy8gICAgIGdseXBoLmFycmF5QnVmZmVyVmlldyA9IGRpc3Q7XG4vLyB9XG5cbmZ1bmN0aW9uIHNtb290aHN0ZXAgKG1pbiwgbWF4LCB2YWx1ZSkge1xuICAgIHZhciB4ID0gTWF0aC5tYXgoMCwgTWF0aC5taW4oMSwgKHZhbHVlLW1pbikvKG1heC1taW4pKSk7XG4gICAgcmV0dXJuIHgqeCooMyAtIDIqeCk7XG59O1xuXG5mdW5jdGlvbiBHbHlwaHMocGJmLCBlbmQpIHtcbiAgICB0aGlzLnN0YWNrcyA9IHBiZi5yZWFkRmllbGRzKHJlYWRGb250c3RhY2tzLCBbXSwgZW5kKTtcbiAgICBmb3IodmFyIGkgPTA7aTx0aGlzLnN0YWNrcy5sZW5ndGg7aSsrKXtcbiAgICAgICAgdmFyIGdseXBocyA9IHRoaXMuc3RhY2tzW2ldLmdseXBocztcbiAgICAgICAgZm9yKHZhciBrZXkgaW4gZ2x5cGhzKXtcbiAgICAgICAgICAgIHZhciBnbHlwaCA9Z2x5cGhzW2tleV07XG4gICAgICAgICAgICB0b1JHQkEoZ2x5cGgpO1xuICAgICAgICB9XG4gICAgfVxufVxuXG5mdW5jdGlvbiByZWFkRm9udHN0YWNrcyh0YWcsIHN0YWNrcywgcGJmKSB7XG4gICAgaWYgKHRhZyA9PT0gMSkge1xuICAgICAgICBjb25zdCBmb250c3RhY2sgPSBwYmYucmVhZE1lc3NhZ2UocmVhZEZvbnRzdGFjaywge2dseXBoczoge319KTtcbiAgICAgICAgc3RhY2tzLnB1c2goZm9udHN0YWNrKTtcbiAgICB9XG59XG5cbmZ1bmN0aW9uIHJlYWRGb250c3RhY2sodGFnLCBmb250c3RhY2ssIHBiZikge1xuICAgIGlmICh0YWcgPT09IDEpIGZvbnRzdGFjay5uYW1lID0gcGJmLnJlYWRTdHJpbmcoKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDIpIGZvbnRzdGFjay5yYW5nZSA9IHBiZi5yZWFkU3RyaW5nKCk7XG4gICAgZWxzZSBpZiAodGFnID09PSAzKSB7XG4gICAgICAgIGNvbnN0IGdseXBoID0gcGJmLnJlYWRNZXNzYWdlKHJlYWRHbHlwaCwge30pO1xuICAgICAgICBmb250c3RhY2suZ2x5cGhzW2dseXBoLmlkXSA9IGdseXBoO1xuICAgIH1cbn1cblxuZnVuY3Rpb24gcmVhZEdseXBoKHRhZywgZ2x5cGgsIHBiZikge1xuICAgIGlmICh0YWcgPT09IDEpIGdseXBoLmlkID0gcGJmLnJlYWRWYXJpbnQoKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDIpIGdseXBoLmJpdG1hcCA9IHBiZi5yZWFkQnl0ZXMoKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDMpIGdseXBoLndpZHRoID0gcGJmLnJlYWRWYXJpbnQoKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDQpIGdseXBoLmhlaWdodCA9IHBiZi5yZWFkVmFyaW50KCk7XG4gICAgZWxzZSBpZiAodGFnID09PSA1KSBnbHlwaC5sZWZ0ID0gcGJmLnJlYWRTVmFyaW50KCk7XG4gICAgZWxzZSBpZiAodGFnID09PSA2KSBnbHlwaC50b3AgPSBwYmYucmVhZFNWYXJpbnQoKTtcbiAgICBlbHNlIGlmICh0YWcgPT09IDcpIGdseXBoLmFkdmFuY2UgPSBwYmYucmVhZFZhcmludCgpO1xufVxuIiwiJ3VzZSBzdHJpY3QnO1xuLy8gQGZsb3dcblxuLy8gVGhlIGZvbGxvd2luZyB0YWJsZSBjb21lcyBmcm9tIDxodHRwOi8vd3d3LnVuaWNvZGUub3JnL1B1YmxpYy85LjAuMC91Y2QvQmxvY2tzLnR4dD4uXG4vLyBLZWVwIGl0IHN5bmNocm9uaXplZCB3aXRoIDxodHRwOi8vd3d3LnVuaWNvZGUub3JnL1B1YmxpYy9VQ0QvbGF0ZXN0L3VjZC9CbG9ja3MudHh0Pi5cblxuLy8gdHlwZSBVbmljb2RlQmxvY2tMb29rdXAgPSB7W2tleTogc3RyaW5nXTogKGNoYXI6IG51bWJlcikgPT4gYm9vbGVhbn07XG5cbmNvbnN0IHVuaWNvZGVCbG9ja0xvb2t1cCA9IHtcbiAgICAvLyAnQmFzaWMgTGF0aW4nOiAoY2hhcikgPT4gY2hhciA+PSAweDAwMDAgJiYgY2hhciA8PSAweDAwN0YsXG4gICAgJ0xhdGluLTEgU3VwcGxlbWVudCc6IChjaGFyKSA9PiBjaGFyID49IDB4MDA4MCAmJiBjaGFyIDw9IDB4MDBGRixcbiAgICAvLyAnTGF0aW4gRXh0ZW5kZWQtQSc6IChjaGFyKSA9PiBjaGFyID49IDB4MDEwMCAmJiBjaGFyIDw9IDB4MDE3RixcbiAgICAvLyAnTGF0aW4gRXh0ZW5kZWQtQic6IChjaGFyKSA9PiBjaGFyID49IDB4MDE4MCAmJiBjaGFyIDw9IDB4MDI0RixcbiAgICAvLyAnSVBBIEV4dGVuc2lvbnMnOiAoY2hhcikgPT4gY2hhciA+PSAweDAyNTAgJiYgY2hhciA8PSAweDAyQUYsXG4gICAgLy8gJ1NwYWNpbmcgTW9kaWZpZXIgTGV0dGVycyc6IChjaGFyKSA9PiBjaGFyID49IDB4MDJCMCAmJiBjaGFyIDw9IDB4MDJGRixcbiAgICAvLyAnQ29tYmluaW5nIERpYWNyaXRpY2FsIE1hcmtzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgwMzAwICYmIGNoYXIgPD0gMHgwMzZGLFxuICAgIC8vICdHcmVlayBhbmQgQ29wdGljJzogKGNoYXIpID0+IGNoYXIgPj0gMHgwMzcwICYmIGNoYXIgPD0gMHgwM0ZGLFxuICAgIC8vICdDeXJpbGxpYyc6IChjaGFyKSA9PiBjaGFyID49IDB4MDQwMCAmJiBjaGFyIDw9IDB4MDRGRixcbiAgICAvLyAnQ3lyaWxsaWMgU3VwcGxlbWVudCc6IChjaGFyKSA9PiBjaGFyID49IDB4MDUwMCAmJiBjaGFyIDw9IDB4MDUyRixcbiAgICAvLyAnQXJtZW5pYW4nOiAoY2hhcikgPT4gY2hhciA+PSAweDA1MzAgJiYgY2hhciA8PSAweDA1OEYsXG4gICAgLy8nSGVicmV3JzogKGNoYXIpID0+IGNoYXIgPj0gMHgwNTkwICYmIGNoYXIgPD0gMHgwNUZGLFxuICAgICdBcmFiaWMnOiAoY2hhcikgPT4gY2hhciA+PSAweDA2MDAgJiYgY2hhciA8PSAweDA2RkYsXG4gICAgLy8nU3lyaWFjJzogKGNoYXIpID0+IGNoYXIgPj0gMHgwNzAwICYmIGNoYXIgPD0gMHgwNzRGLFxuICAgICdBcmFiaWMgU3VwcGxlbWVudCc6IChjaGFyKSA9PiBjaGFyID49IDB4MDc1MCAmJiBjaGFyIDw9IDB4MDc3RixcbiAgICAvLyAnVGhhYW5hJzogKGNoYXIpID0+IGNoYXIgPj0gMHgwNzgwICYmIGNoYXIgPD0gMHgwN0JGLFxuICAgIC8vICdOS28nOiAoY2hhcikgPT4gY2hhciA+PSAweDA3QzAgJiYgY2hhciA8PSAweDA3RkYsXG4gICAgLy8gJ1NhbWFyaXRhbic6IChjaGFyKSA9PiBjaGFyID49IDB4MDgwMCAmJiBjaGFyIDw9IDB4MDgzRixcbiAgICAvLyAnTWFuZGFpYyc6IChjaGFyKSA9PiBjaGFyID49IDB4MDg0MCAmJiBjaGFyIDw9IDB4MDg1RixcbiAgICAnQXJhYmljIEV4dGVuZGVkLUEnOiAoY2hhcikgPT4gY2hhciA+PSAweDA4QTAgJiYgY2hhciA8PSAweDA4RkYsXG4gICAgLy8gJ0RldmFuYWdhcmknOiAoY2hhcikgPT4gY2hhciA+PSAweDA5MDAgJiYgY2hhciA8PSAweDA5N0YsXG4gICAgLy8gJ0JlbmdhbGknOiAoY2hhcikgPT4gY2hhciA+PSAweDA5ODAgJiYgY2hhciA8PSAweDA5RkYsXG4gICAgLy8gJ0d1cm11a2hpJzogKGNoYXIpID0+IGNoYXIgPj0gMHgwQTAwICYmIGNoYXIgPD0gMHgwQTdGLFxuICAgIC8vICdHdWphcmF0aSc6IChjaGFyKSA9PiBjaGFyID49IDB4MEE4MCAmJiBjaGFyIDw9IDB4MEFGRixcbiAgICAvLyAnT3JpeWEnOiAoY2hhcikgPT4gY2hhciA+PSAweDBCMDAgJiYgY2hhciA8PSAweDBCN0YsXG4gICAgLy8gJ1RhbWlsJzogKGNoYXIpID0+IGNoYXIgPj0gMHgwQjgwICYmIGNoYXIgPD0gMHgwQkZGLFxuICAgIC8vICdUZWx1Z3UnOiAoY2hhcikgPT4gY2hhciA+PSAweDBDMDAgJiYgY2hhciA8PSAweDBDN0YsXG4gICAgLy8gJ0thbm5hZGEnOiAoY2hhcikgPT4gY2hhciA+PSAweDBDODAgJiYgY2hhciA8PSAweDBDRkYsXG4gICAgLy8gJ01hbGF5YWxhbSc6IChjaGFyKSA9PiBjaGFyID49IDB4MEQwMCAmJiBjaGFyIDw9IDB4MEQ3RixcbiAgICAvLyAnU2luaGFsYSc6IChjaGFyKSA9PiBjaGFyID49IDB4MEQ4MCAmJiBjaGFyIDw9IDB4MERGRixcbiAgICAvLyAnVGhhaSc6IChjaGFyKSA9PiBjaGFyID49IDB4MEUwMCAmJiBjaGFyIDw9IDB4MEU3RixcbiAgICAvLyAnTGFvJzogKGNoYXIpID0+IGNoYXIgPj0gMHgwRTgwICYmIGNoYXIgPD0gMHgwRUZGLFxuICAgIC8vICdUaWJldGFuJzogKGNoYXIpID0+IGNoYXIgPj0gMHgwRjAwICYmIGNoYXIgPD0gMHgwRkZGLFxuICAgIC8vICdNeWFubWFyJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDAwICYmIGNoYXIgPD0gMHgxMDlGLFxuICAgIC8vICdHZW9yZ2lhbic6IChjaGFyKSA9PiBjaGFyID49IDB4MTBBMCAmJiBjaGFyIDw9IDB4MTBGRixcbiAgICAnSGFuZ3VsIEphbW8nOiAoY2hhcikgPT4gY2hhciA+PSAweDExMDAgJiYgY2hhciA8PSAweDExRkYsXG4gICAgLy8gJ0V0aGlvcGljJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMjAwICYmIGNoYXIgPD0gMHgxMzdGLFxuICAgIC8vICdFdGhpb3BpYyBTdXBwbGVtZW50JzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMzgwICYmIGNoYXIgPD0gMHgxMzlGLFxuICAgIC8vICdDaGVyb2tlZSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTNBMCAmJiBjaGFyIDw9IDB4MTNGRixcbiAgICAnVW5pZmllZCBDYW5hZGlhbiBBYm9yaWdpbmFsIFN5bGxhYmljcyc6IChjaGFyKSA9PiBjaGFyID49IDB4MTQwMCAmJiBjaGFyIDw9IDB4MTY3RixcbiAgICAvLyAnT2doYW0nOiAoY2hhcikgPT4gY2hhciA+PSAweDE2ODAgJiYgY2hhciA8PSAweDE2OUYsXG4gICAgLy8gJ1J1bmljJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxNkEwICYmIGNoYXIgPD0gMHgxNkZGLFxuICAgIC8vICdUYWdhbG9nJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxNzAwICYmIGNoYXIgPD0gMHgxNzFGLFxuICAgIC8vICdIYW51bm9vJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxNzIwICYmIGNoYXIgPD0gMHgxNzNGLFxuICAgIC8vICdCdWhpZCc6IChjaGFyKSA9PiBjaGFyID49IDB4MTc0MCAmJiBjaGFyIDw9IDB4MTc1RixcbiAgICAvLyAnVGFnYmFud2EnOiAoY2hhcikgPT4gY2hhciA+PSAweDE3NjAgJiYgY2hhciA8PSAweDE3N0YsXG4gICAgLy8gJ0tobWVyJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxNzgwICYmIGNoYXIgPD0gMHgxN0ZGLFxuICAgIC8vICdNb25nb2xpYW4nOiAoY2hhcikgPT4gY2hhciA+PSAweDE4MDAgJiYgY2hhciA8PSAweDE4QUYsXG4gICAgJ1VuaWZpZWQgQ2FuYWRpYW4gQWJvcmlnaW5hbCBTeWxsYWJpY3MgRXh0ZW5kZWQnOiAoY2hhcikgPT4gY2hhciA+PSAweDE4QjAgJiYgY2hhciA8PSAweDE4RkYsXG4gICAgLy8gJ0xpbWJ1JzogKGNoYXIpID0+IGNoYXIgPj0gMHgxOTAwICYmIGNoYXIgPD0gMHgxOTRGLFxuICAgIC8vICdUYWkgTGUnOiAoY2hhcikgPT4gY2hhciA+PSAweDE5NTAgJiYgY2hhciA8PSAweDE5N0YsXG4gICAgLy8gJ05ldyBUYWkgTHVlJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxOTgwICYmIGNoYXIgPD0gMHgxOURGLFxuICAgIC8vICdLaG1lciBTeW1ib2xzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxOUUwICYmIGNoYXIgPD0gMHgxOUZGLFxuICAgIC8vICdCdWdpbmVzZSc6IChjaGFyKSA9PiBjaGFyID49IDB4MUEwMCAmJiBjaGFyIDw9IDB4MUExRixcbiAgICAvLyAnVGFpIFRoYW0nOiAoY2hhcikgPT4gY2hhciA+PSAweDFBMjAgJiYgY2hhciA8PSAweDFBQUYsXG4gICAgLy8gJ0NvbWJpbmluZyBEaWFjcml0aWNhbCBNYXJrcyBFeHRlbmRlZCc6IChjaGFyKSA9PiBjaGFyID49IDB4MUFCMCAmJiBjaGFyIDw9IDB4MUFGRixcbiAgICAvLyAnQmFsaW5lc2UnOiAoY2hhcikgPT4gY2hhciA+PSAweDFCMDAgJiYgY2hhciA8PSAweDFCN0YsXG4gICAgLy8gJ1N1bmRhbmVzZSc6IChjaGFyKSA9PiBjaGFyID49IDB4MUI4MCAmJiBjaGFyIDw9IDB4MUJCRixcbiAgICAvLyAnQmF0YWsnOiAoY2hhcikgPT4gY2hhciA+PSAweDFCQzAgJiYgY2hhciA8PSAweDFCRkYsXG4gICAgLy8gJ0xlcGNoYSc6IChjaGFyKSA9PiBjaGFyID49IDB4MUMwMCAmJiBjaGFyIDw9IDB4MUM0RixcbiAgICAvLyAnT2wgQ2hpa2knOiAoY2hhcikgPT4gY2hhciA+PSAweDFDNTAgJiYgY2hhciA8PSAweDFDN0YsXG4gICAgLy8gJ0N5cmlsbGljIEV4dGVuZGVkLUMnOiAoY2hhcikgPT4gY2hhciA+PSAweDFDODAgJiYgY2hhciA8PSAweDFDOEYsXG4gICAgLy8gJ1N1bmRhbmVzZSBTdXBwbGVtZW50JzogKGNoYXIpID0+IGNoYXIgPj0gMHgxQ0MwICYmIGNoYXIgPD0gMHgxQ0NGLFxuICAgIC8vICdWZWRpYyBFeHRlbnNpb25zJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxQ0QwICYmIGNoYXIgPD0gMHgxQ0ZGLFxuICAgIC8vICdQaG9uZXRpYyBFeHRlbnNpb25zJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRDAwICYmIGNoYXIgPD0gMHgxRDdGLFxuICAgIC8vICdQaG9uZXRpYyBFeHRlbnNpb25zIFN1cHBsZW1lbnQnOiAoY2hhcikgPT4gY2hhciA+PSAweDFEODAgJiYgY2hhciA8PSAweDFEQkYsXG4gICAgLy8gJ0NvbWJpbmluZyBEaWFjcml0aWNhbCBNYXJrcyBTdXBwbGVtZW50JzogKGNoYXIpID0+IGNoYXIgPj0gMHgxREMwICYmIGNoYXIgPD0gMHgxREZGLFxuICAgIC8vICdMYXRpbiBFeHRlbmRlZCBBZGRpdGlvbmFsJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRTAwICYmIGNoYXIgPD0gMHgxRUZGLFxuICAgIC8vICdHcmVlayBFeHRlbmRlZCc6IChjaGFyKSA9PiBjaGFyID49IDB4MUYwMCAmJiBjaGFyIDw9IDB4MUZGRixcbiAgICAnR2VuZXJhbCBQdW5jdHVhdGlvbic6IChjaGFyKSA9PiBjaGFyID49IDB4MjAwMCAmJiBjaGFyIDw9IDB4MjA2RixcbiAgICAvLyAnU3VwZXJzY3JpcHRzIGFuZCBTdWJzY3JpcHRzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyMDcwICYmIGNoYXIgPD0gMHgyMDlGLFxuICAgIC8vICdDdXJyZW5jeSBTeW1ib2xzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyMEEwICYmIGNoYXIgPD0gMHgyMENGLFxuICAgIC8vICdDb21iaW5pbmcgRGlhY3JpdGljYWwgTWFya3MgZm9yIFN5bWJvbHMnOiAoY2hhcikgPT4gY2hhciA+PSAweDIwRDAgJiYgY2hhciA8PSAweDIwRkYsXG4gICAgJ0xldHRlcmxpa2UgU3ltYm9scyc6IChjaGFyKSA9PiBjaGFyID49IDB4MjEwMCAmJiBjaGFyIDw9IDB4MjE0RixcbiAgICAnTnVtYmVyIEZvcm1zJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyMTUwICYmIGNoYXIgPD0gMHgyMThGLFxuICAgIC8vICdBcnJvd3MnOiAoY2hhcikgPT4gY2hhciA+PSAweDIxOTAgJiYgY2hhciA8PSAweDIxRkYsXG4gICAgLy8gJ01hdGhlbWF0aWNhbCBPcGVyYXRvcnMnOiAoY2hhcikgPT4gY2hhciA+PSAweDIyMDAgJiYgY2hhciA8PSAweDIyRkYsXG4gICAgJ01pc2NlbGxhbmVvdXMgVGVjaG5pY2FsJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyMzAwICYmIGNoYXIgPD0gMHgyM0ZGLFxuICAgICdDb250cm9sIFBpY3R1cmVzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyNDAwICYmIGNoYXIgPD0gMHgyNDNGLFxuICAgICdPcHRpY2FsIENoYXJhY3RlciBSZWNvZ25pdGlvbic6IChjaGFyKSA9PiBjaGFyID49IDB4MjQ0MCAmJiBjaGFyIDw9IDB4MjQ1RixcbiAgICAnRW5jbG9zZWQgQWxwaGFudW1lcmljcyc6IChjaGFyKSA9PiBjaGFyID49IDB4MjQ2MCAmJiBjaGFyIDw9IDB4MjRGRixcbiAgICAvLyAnQm94IERyYXdpbmcnOiAoY2hhcikgPT4gY2hhciA+PSAweDI1MDAgJiYgY2hhciA8PSAweDI1N0YsXG4gICAgLy8gJ0Jsb2NrIEVsZW1lbnRzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyNTgwICYmIGNoYXIgPD0gMHgyNTlGLFxuICAgICdHZW9tZXRyaWMgU2hhcGVzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyNUEwICYmIGNoYXIgPD0gMHgyNUZGLFxuICAgICdNaXNjZWxsYW5lb3VzIFN5bWJvbHMnOiAoY2hhcikgPT4gY2hhciA+PSAweDI2MDAgJiYgY2hhciA8PSAweDI2RkYsXG4gICAgLy8gJ0RpbmdiYXRzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyNzAwICYmIGNoYXIgPD0gMHgyN0JGLFxuICAgIC8vICdNaXNjZWxsYW5lb3VzIE1hdGhlbWF0aWNhbCBTeW1ib2xzLUEnOiAoY2hhcikgPT4gY2hhciA+PSAweDI3QzAgJiYgY2hhciA8PSAweDI3RUYsXG4gICAgLy8gJ1N1cHBsZW1lbnRhbCBBcnJvd3MtQSc6IChjaGFyKSA9PiBjaGFyID49IDB4MjdGMCAmJiBjaGFyIDw9IDB4MjdGRixcbiAgICAvLyAnQnJhaWxsZSBQYXR0ZXJucyc6IChjaGFyKSA9PiBjaGFyID49IDB4MjgwMCAmJiBjaGFyIDw9IDB4MjhGRixcbiAgICAvLyAnU3VwcGxlbWVudGFsIEFycm93cy1CJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyOTAwICYmIGNoYXIgPD0gMHgyOTdGLFxuICAgIC8vICdNaXNjZWxsYW5lb3VzIE1hdGhlbWF0aWNhbCBTeW1ib2xzLUInOiAoY2hhcikgPT4gY2hhciA+PSAweDI5ODAgJiYgY2hhciA8PSAweDI5RkYsXG4gICAgLy8gJ1N1cHBsZW1lbnRhbCBNYXRoZW1hdGljYWwgT3BlcmF0b3JzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyQTAwICYmIGNoYXIgPD0gMHgyQUZGLFxuICAgICdNaXNjZWxsYW5lb3VzIFN5bWJvbHMgYW5kIEFycm93cyc6IChjaGFyKSA9PiBjaGFyID49IDB4MkIwMCAmJiBjaGFyIDw9IDB4MkJGRixcbiAgICAvLyAnR2xhZ29saXRpYyc6IChjaGFyKSA9PiBjaGFyID49IDB4MkMwMCAmJiBjaGFyIDw9IDB4MkM1RixcbiAgICAvLyAnTGF0aW4gRXh0ZW5kZWQtQyc6IChjaGFyKSA9PiBjaGFyID49IDB4MkM2MCAmJiBjaGFyIDw9IDB4MkM3RixcbiAgICAvLyAnQ29wdGljJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyQzgwICYmIGNoYXIgPD0gMHgyQ0ZGLFxuICAgIC8vICdHZW9yZ2lhbiBTdXBwbGVtZW50JzogKGNoYXIpID0+IGNoYXIgPj0gMHgyRDAwICYmIGNoYXIgPD0gMHgyRDJGLFxuICAgIC8vICdUaWZpbmFnaCc6IChjaGFyKSA9PiBjaGFyID49IDB4MkQzMCAmJiBjaGFyIDw9IDB4MkQ3RixcbiAgICAvLyAnRXRoaW9waWMgRXh0ZW5kZWQnOiAoY2hhcikgPT4gY2hhciA+PSAweDJEODAgJiYgY2hhciA8PSAweDJEREYsXG4gICAgLy8gJ0N5cmlsbGljIEV4dGVuZGVkLUEnOiAoY2hhcikgPT4gY2hhciA+PSAweDJERTAgJiYgY2hhciA8PSAweDJERkYsXG4gICAgLy8gJ1N1cHBsZW1lbnRhbCBQdW5jdHVhdGlvbic6IChjaGFyKSA9PiBjaGFyID49IDB4MkUwMCAmJiBjaGFyIDw9IDB4MkU3RixcbiAgICAnQ0pLIFJhZGljYWxzIFN1cHBsZW1lbnQnOiAoY2hhcikgPT4gY2hhciA+PSAweDJFODAgJiYgY2hhciA8PSAweDJFRkYsXG4gICAgJ0thbmd4aSBSYWRpY2Fscyc6IChjaGFyKSA9PiBjaGFyID49IDB4MkYwMCAmJiBjaGFyIDw9IDB4MkZERixcbiAgICAnSWRlb2dyYXBoaWMgRGVzY3JpcHRpb24gQ2hhcmFjdGVycyc6IChjaGFyKSA9PiBjaGFyID49IDB4MkZGMCAmJiBjaGFyIDw9IDB4MkZGRixcbiAgICAnQ0pLIFN5bWJvbHMgYW5kIFB1bmN0dWF0aW9uJzogKGNoYXIpID0+IGNoYXIgPj0gMHgzMDAwICYmIGNoYXIgPD0gMHgzMDNGLFxuICAgICdIaXJhZ2FuYSc6IChjaGFyKSA9PiBjaGFyID49IDB4MzA0MCAmJiBjaGFyIDw9IDB4MzA5RixcbiAgICAnS2F0YWthbmEnOiAoY2hhcikgPT4gY2hhciA+PSAweDMwQTAgJiYgY2hhciA8PSAweDMwRkYsXG4gICAgJ0JvcG9tb2ZvJzogKGNoYXIpID0+IGNoYXIgPj0gMHgzMTAwICYmIGNoYXIgPD0gMHgzMTJGLFxuICAgICdIYW5ndWwgQ29tcGF0aWJpbGl0eSBKYW1vJzogKGNoYXIpID0+IGNoYXIgPj0gMHgzMTMwICYmIGNoYXIgPD0gMHgzMThGLFxuICAgICdLYW5idW4nOiAoY2hhcikgPT4gY2hhciA+PSAweDMxOTAgJiYgY2hhciA8PSAweDMxOUYsXG4gICAgJ0JvcG9tb2ZvIEV4dGVuZGVkJzogKGNoYXIpID0+IGNoYXIgPj0gMHgzMUEwICYmIGNoYXIgPD0gMHgzMUJGLFxuICAgICdDSksgU3Ryb2tlcyc6IChjaGFyKSA9PiBjaGFyID49IDB4MzFDMCAmJiBjaGFyIDw9IDB4MzFFRixcbiAgICAnS2F0YWthbmEgUGhvbmV0aWMgRXh0ZW5zaW9ucyc6IChjaGFyKSA9PiBjaGFyID49IDB4MzFGMCAmJiBjaGFyIDw9IDB4MzFGRixcbiAgICAnRW5jbG9zZWQgQ0pLIExldHRlcnMgYW5kIE1vbnRocyc6IChjaGFyKSA9PiBjaGFyID49IDB4MzIwMCAmJiBjaGFyIDw9IDB4MzJGRixcbiAgICAnQ0pLIENvbXBhdGliaWxpdHknOiAoY2hhcikgPT4gY2hhciA+PSAweDMzMDAgJiYgY2hhciA8PSAweDMzRkYsXG4gICAgJ0NKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEEnOiAoY2hhcikgPT4gY2hhciA+PSAweDM0MDAgJiYgY2hhciA8PSAweDREQkYsXG4gICAgJ1lpamluZyBIZXhhZ3JhbSBTeW1ib2xzJzogKGNoYXIpID0+IGNoYXIgPj0gMHg0REMwICYmIGNoYXIgPD0gMHg0REZGLFxuICAgICdDSksgVW5pZmllZCBJZGVvZ3JhcGhzJzogKGNoYXIpID0+IGNoYXIgPj0gMHg0RTAwICYmIGNoYXIgPD0gMHg5RkZGLFxuICAgICdZaSBTeWxsYWJsZXMnOiAoY2hhcikgPT4gY2hhciA+PSAweEEwMDAgJiYgY2hhciA8PSAweEE0OEYsXG4gICAgJ1lpIFJhZGljYWxzJzogKGNoYXIpID0+IGNoYXIgPj0gMHhBNDkwICYmIGNoYXIgPD0gMHhBNENGLFxuICAgIC8vICdMaXN1JzogKGNoYXIpID0+IGNoYXIgPj0gMHhBNEQwICYmIGNoYXIgPD0gMHhBNEZGLFxuICAgIC8vICdWYWknOiAoY2hhcikgPT4gY2hhciA+PSAweEE1MDAgJiYgY2hhciA8PSAweEE2M0YsXG4gICAgLy8gJ0N5cmlsbGljIEV4dGVuZGVkLUInOiAoY2hhcikgPT4gY2hhciA+PSAweEE2NDAgJiYgY2hhciA8PSAweEE2OUYsXG4gICAgLy8gJ0JhbXVtJzogKGNoYXIpID0+IGNoYXIgPj0gMHhBNkEwICYmIGNoYXIgPD0gMHhBNkZGLFxuICAgIC8vICdNb2RpZmllciBUb25lIExldHRlcnMnOiAoY2hhcikgPT4gY2hhciA+PSAweEE3MDAgJiYgY2hhciA8PSAweEE3MUYsXG4gICAgLy8gJ0xhdGluIEV4dGVuZGVkLUQnOiAoY2hhcikgPT4gY2hhciA+PSAweEE3MjAgJiYgY2hhciA8PSAweEE3RkYsXG4gICAgLy8gJ1N5bG90aSBOYWdyaSc6IChjaGFyKSA9PiBjaGFyID49IDB4QTgwMCAmJiBjaGFyIDw9IDB4QTgyRixcbiAgICAvLyAnQ29tbW9uIEluZGljIE51bWJlciBGb3Jtcyc6IChjaGFyKSA9PiBjaGFyID49IDB4QTgzMCAmJiBjaGFyIDw9IDB4QTgzRixcbiAgICAvLyAnUGhhZ3MtcGEnOiAoY2hhcikgPT4gY2hhciA+PSAweEE4NDAgJiYgY2hhciA8PSAweEE4N0YsXG4gICAgLy8gJ1NhdXJhc2h0cmEnOiAoY2hhcikgPT4gY2hhciA+PSAweEE4ODAgJiYgY2hhciA8PSAweEE4REYsXG4gICAgLy8gJ0RldmFuYWdhcmkgRXh0ZW5kZWQnOiAoY2hhcikgPT4gY2hhciA+PSAweEE4RTAgJiYgY2hhciA8PSAweEE4RkYsXG4gICAgLy8gJ0theWFoIExpJzogKGNoYXIpID0+IGNoYXIgPj0gMHhBOTAwICYmIGNoYXIgPD0gMHhBOTJGLFxuICAgIC8vICdSZWphbmcnOiAoY2hhcikgPT4gY2hhciA+PSAweEE5MzAgJiYgY2hhciA8PSAweEE5NUYsXG4gICAgJ0hhbmd1bCBKYW1vIEV4dGVuZGVkLUEnOiAoY2hhcikgPT4gY2hhciA+PSAweEE5NjAgJiYgY2hhciA8PSAweEE5N0YsXG4gICAgLy8gJ0phdmFuZXNlJzogKGNoYXIpID0+IGNoYXIgPj0gMHhBOTgwICYmIGNoYXIgPD0gMHhBOURGLFxuICAgIC8vICdNeWFubWFyIEV4dGVuZGVkLUInOiAoY2hhcikgPT4gY2hhciA+PSAweEE5RTAgJiYgY2hhciA8PSAweEE5RkYsXG4gICAgLy8gJ0NoYW0nOiAoY2hhcikgPT4gY2hhciA+PSAweEFBMDAgJiYgY2hhciA8PSAweEFBNUYsXG4gICAgLy8gJ015YW5tYXIgRXh0ZW5kZWQtQSc6IChjaGFyKSA9PiBjaGFyID49IDB4QUE2MCAmJiBjaGFyIDw9IDB4QUE3RixcbiAgICAvLyAnVGFpIFZpZXQnOiAoY2hhcikgPT4gY2hhciA+PSAweEFBODAgJiYgY2hhciA8PSAweEFBREYsXG4gICAgLy8gJ01lZXRlaSBNYXllayBFeHRlbnNpb25zJzogKGNoYXIpID0+IGNoYXIgPj0gMHhBQUUwICYmIGNoYXIgPD0gMHhBQUZGLFxuICAgIC8vICdFdGhpb3BpYyBFeHRlbmRlZC1BJzogKGNoYXIpID0+IGNoYXIgPj0gMHhBQjAwICYmIGNoYXIgPD0gMHhBQjJGLFxuICAgIC8vICdMYXRpbiBFeHRlbmRlZC1FJzogKGNoYXIpID0+IGNoYXIgPj0gMHhBQjMwICYmIGNoYXIgPD0gMHhBQjZGLFxuICAgIC8vICdDaGVyb2tlZSBTdXBwbGVtZW50JzogKGNoYXIpID0+IGNoYXIgPj0gMHhBQjcwICYmIGNoYXIgPD0gMHhBQkJGLFxuICAgIC8vICdNZWV0ZWkgTWF5ZWsnOiAoY2hhcikgPT4gY2hhciA+PSAweEFCQzAgJiYgY2hhciA8PSAweEFCRkYsXG4gICAgJ0hhbmd1bCBTeWxsYWJsZXMnOiAoY2hhcikgPT4gY2hhciA+PSAweEFDMDAgJiYgY2hhciA8PSAweEQ3QUYsXG4gICAgJ0hhbmd1bCBKYW1vIEV4dGVuZGVkLUInOiAoY2hhcikgPT4gY2hhciA+PSAweEQ3QjAgJiYgY2hhciA8PSAweEQ3RkYsXG4gICAgLy8gJ0hpZ2ggU3Vycm9nYXRlcyc6IChjaGFyKSA9PiBjaGFyID49IDB4RDgwMCAmJiBjaGFyIDw9IDB4REI3RixcbiAgICAvLyAnSGlnaCBQcml2YXRlIFVzZSBTdXJyb2dhdGVzJzogKGNoYXIpID0+IGNoYXIgPj0gMHhEQjgwICYmIGNoYXIgPD0gMHhEQkZGLFxuICAgIC8vICdMb3cgU3Vycm9nYXRlcyc6IChjaGFyKSA9PiBjaGFyID49IDB4REMwMCAmJiBjaGFyIDw9IDB4REZGRixcbiAgICAnUHJpdmF0ZSBVc2UgQXJlYSc6IChjaGFyKSA9PiBjaGFyID49IDB4RTAwMCAmJiBjaGFyIDw9IDB4RjhGRixcbiAgICAnQ0pLIENvbXBhdGliaWxpdHkgSWRlb2dyYXBocyc6IChjaGFyKSA9PiBjaGFyID49IDB4RjkwMCAmJiBjaGFyIDw9IDB4RkFGRixcbiAgICAvLyAnQWxwaGFiZXRpYyBQcmVzZW50YXRpb24gRm9ybXMnOiAoY2hhcikgPT4gY2hhciA+PSAweEZCMDAgJiYgY2hhciA8PSAweEZCNEYsXG4gICAgJ0FyYWJpYyBQcmVzZW50YXRpb24gRm9ybXMtQSc6IChjaGFyKSA9PiBjaGFyID49IDB4RkI1MCAmJiBjaGFyIDw9IDB4RkRGRixcbiAgICAvLyAnVmFyaWF0aW9uIFNlbGVjdG9ycyc6IChjaGFyKSA9PiBjaGFyID49IDB4RkUwMCAmJiBjaGFyIDw9IDB4RkUwRixcbiAgICAnVmVydGljYWwgRm9ybXMnOiAoY2hhcikgPT4gY2hhciA+PSAweEZFMTAgJiYgY2hhciA8PSAweEZFMUYsXG4gICAgLy8gJ0NvbWJpbmluZyBIYWxmIE1hcmtzJzogKGNoYXIpID0+IGNoYXIgPj0gMHhGRTIwICYmIGNoYXIgPD0gMHhGRTJGLFxuICAgICdDSksgQ29tcGF0aWJpbGl0eSBGb3Jtcyc6IChjaGFyKSA9PiBjaGFyID49IDB4RkUzMCAmJiBjaGFyIDw9IDB4RkU0RixcbiAgICAnU21hbGwgRm9ybSBWYXJpYW50cyc6IChjaGFyKSA9PiBjaGFyID49IDB4RkU1MCAmJiBjaGFyIDw9IDB4RkU2RixcbiAgICAnQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1CJzogKGNoYXIpID0+IGNoYXIgPj0gMHhGRTcwICYmIGNoYXIgPD0gMHhGRUZGLFxuICAgICdIYWxmd2lkdGggYW5kIEZ1bGx3aWR0aCBGb3Jtcyc6IChjaGFyKSA9PiBjaGFyID49IDB4RkYwMCAmJiBjaGFyIDw9IDB4RkZFRlxuICAgIC8vICdTcGVjaWFscyc6IChjaGFyKSA9PiBjaGFyID49IDB4RkZGMCAmJiBjaGFyIDw9IDB4RkZGRixcbiAgICAvLyAnTGluZWFyIEIgU3lsbGFiYXJ5JzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDAwMCAmJiBjaGFyIDw9IDB4MTAwN0YsXG4gICAgLy8gJ0xpbmVhciBCIElkZW9ncmFtcyc6IChjaGFyKSA9PiBjaGFyID49IDB4MTAwODAgJiYgY2hhciA8PSAweDEwMEZGLFxuICAgIC8vICdBZWdlYW4gTnVtYmVycyc6IChjaGFyKSA9PiBjaGFyID49IDB4MTAxMDAgJiYgY2hhciA8PSAweDEwMTNGLFxuICAgIC8vICdBbmNpZW50IEdyZWVrIE51bWJlcnMnOiAoY2hhcikgPT4gY2hhciA+PSAweDEwMTQwICYmIGNoYXIgPD0gMHgxMDE4RixcbiAgICAvLyAnQW5jaWVudCBTeW1ib2xzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDE5MCAmJiBjaGFyIDw9IDB4MTAxQ0YsXG4gICAgLy8gJ1BoYWlzdG9zIERpc2MnOiAoY2hhcikgPT4gY2hhciA+PSAweDEwMUQwICYmIGNoYXIgPD0gMHgxMDFGRixcbiAgICAvLyAnTHljaWFuJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDI4MCAmJiBjaGFyIDw9IDB4MTAyOUYsXG4gICAgLy8gJ0Nhcmlhbic6IChjaGFyKSA9PiBjaGFyID49IDB4MTAyQTAgJiYgY2hhciA8PSAweDEwMkRGLFxuICAgIC8vICdDb3B0aWMgRXBhY3QgTnVtYmVycyc6IChjaGFyKSA9PiBjaGFyID49IDB4MTAyRTAgJiYgY2hhciA8PSAweDEwMkZGLFxuICAgIC8vICdPbGQgSXRhbGljJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDMwMCAmJiBjaGFyIDw9IDB4MTAzMkYsXG4gICAgLy8gJ0dvdGhpYyc6IChjaGFyKSA9PiBjaGFyID49IDB4MTAzMzAgJiYgY2hhciA8PSAweDEwMzRGLFxuICAgIC8vICdPbGQgUGVybWljJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDM1MCAmJiBjaGFyIDw9IDB4MTAzN0YsXG4gICAgLy8gJ1VnYXJpdGljJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDM4MCAmJiBjaGFyIDw9IDB4MTAzOUYsXG4gICAgLy8gJ09sZCBQZXJzaWFuJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDNBMCAmJiBjaGFyIDw9IDB4MTAzREYsXG4gICAgLy8gJ0Rlc2VyZXQnOiAoY2hhcikgPT4gY2hhciA+PSAweDEwNDAwICYmIGNoYXIgPD0gMHgxMDQ0RixcbiAgICAvLyAnU2hhdmlhbic6IChjaGFyKSA9PiBjaGFyID49IDB4MTA0NTAgJiYgY2hhciA8PSAweDEwNDdGLFxuICAgIC8vICdPc21hbnlhJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDQ4MCAmJiBjaGFyIDw9IDB4MTA0QUYsXG4gICAgLy8gJ09zYWdlJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDRCMCAmJiBjaGFyIDw9IDB4MTA0RkYsXG4gICAgLy8gJ0VsYmFzYW4nOiAoY2hhcikgPT4gY2hhciA+PSAweDEwNTAwICYmIGNoYXIgPD0gMHgxMDUyRixcbiAgICAvLyAnQ2F1Y2FzaWFuIEFsYmFuaWFuJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDUzMCAmJiBjaGFyIDw9IDB4MTA1NkYsXG4gICAgLy8gJ0xpbmVhciBBJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDYwMCAmJiBjaGFyIDw9IDB4MTA3N0YsXG4gICAgLy8gJ0N5cHJpb3QgU3lsbGFiYXJ5JzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDgwMCAmJiBjaGFyIDw9IDB4MTA4M0YsXG4gICAgLy8gJ0ltcGVyaWFsIEFyYW1haWMnOiAoY2hhcikgPT4gY2hhciA+PSAweDEwODQwICYmIGNoYXIgPD0gMHgxMDg1RixcbiAgICAvLyAnUGFsbXlyZW5lJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMDg2MCAmJiBjaGFyIDw9IDB4MTA4N0YsXG4gICAgLy8gJ05hYmF0YWVhbic6IChjaGFyKSA9PiBjaGFyID49IDB4MTA4ODAgJiYgY2hhciA8PSAweDEwOEFGLFxuICAgIC8vICdIYXRyYW4nOiAoY2hhcikgPT4gY2hhciA+PSAweDEwOEUwICYmIGNoYXIgPD0gMHgxMDhGRixcbiAgICAvLyAnUGhvZW5pY2lhbic6IChjaGFyKSA9PiBjaGFyID49IDB4MTA5MDAgJiYgY2hhciA8PSAweDEwOTFGLFxuICAgIC8vICdMeWRpYW4nOiAoY2hhcikgPT4gY2hhciA+PSAweDEwOTIwICYmIGNoYXIgPD0gMHgxMDkzRixcbiAgICAvLyAnTWVyb2l0aWMgSGllcm9nbHlwaHMnOiAoY2hhcikgPT4gY2hhciA+PSAweDEwOTgwICYmIGNoYXIgPD0gMHgxMDk5RixcbiAgICAvLyAnTWVyb2l0aWMgQ3Vyc2l2ZSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTA5QTAgJiYgY2hhciA8PSAweDEwOUZGLFxuICAgIC8vICdLaGFyb3NodGhpJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMEEwMCAmJiBjaGFyIDw9IDB4MTBBNUYsXG4gICAgLy8gJ09sZCBTb3V0aCBBcmFiaWFuJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMEE2MCAmJiBjaGFyIDw9IDB4MTBBN0YsXG4gICAgLy8gJ09sZCBOb3J0aCBBcmFiaWFuJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMEE4MCAmJiBjaGFyIDw9IDB4MTBBOUYsXG4gICAgLy8gJ01hbmljaGFlYW4nOiAoY2hhcikgPT4gY2hhciA+PSAweDEwQUMwICYmIGNoYXIgPD0gMHgxMEFGRixcbiAgICAvLyAnQXZlc3Rhbic6IChjaGFyKSA9PiBjaGFyID49IDB4MTBCMDAgJiYgY2hhciA8PSAweDEwQjNGLFxuICAgIC8vICdJbnNjcmlwdGlvbmFsIFBhcnRoaWFuJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMEI0MCAmJiBjaGFyIDw9IDB4MTBCNUYsXG4gICAgLy8gJ0luc2NyaXB0aW9uYWwgUGFobGF2aSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTBCNjAgJiYgY2hhciA8PSAweDEwQjdGLFxuICAgIC8vICdQc2FsdGVyIFBhaGxhdmknOiAoY2hhcikgPT4gY2hhciA+PSAweDEwQjgwICYmIGNoYXIgPD0gMHgxMEJBRixcbiAgICAvLyAnT2xkIFR1cmtpYyc6IChjaGFyKSA9PiBjaGFyID49IDB4MTBDMDAgJiYgY2hhciA8PSAweDEwQzRGLFxuICAgIC8vICdPbGQgSHVuZ2FyaWFuJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMEM4MCAmJiBjaGFyIDw9IDB4MTBDRkYsXG4gICAgLy8gJ1J1bWkgTnVtZXJhbCBTeW1ib2xzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMEU2MCAmJiBjaGFyIDw9IDB4MTBFN0YsXG4gICAgLy8gJ0JyYWhtaSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTEwMDAgJiYgY2hhciA8PSAweDExMDdGLFxuICAgIC8vICdLYWl0aGknOiAoY2hhcikgPT4gY2hhciA+PSAweDExMDgwICYmIGNoYXIgPD0gMHgxMTBDRixcbiAgICAvLyAnU29yYSBTb21wZW5nJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMTBEMCAmJiBjaGFyIDw9IDB4MTEwRkYsXG4gICAgLy8gJ0NoYWttYSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTExMDAgJiYgY2hhciA8PSAweDExMTRGLFxuICAgIC8vICdNYWhhamFuaSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTExNTAgJiYgY2hhciA8PSAweDExMTdGLFxuICAgIC8vICdTaGFyYWRhJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMTE4MCAmJiBjaGFyIDw9IDB4MTExREYsXG4gICAgLy8gJ1NpbmhhbGEgQXJjaGFpYyBOdW1iZXJzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMTFFMCAmJiBjaGFyIDw9IDB4MTExRkYsXG4gICAgLy8gJ0tob2praSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTEyMDAgJiYgY2hhciA8PSAweDExMjRGLFxuICAgIC8vICdNdWx0YW5pJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMTI4MCAmJiBjaGFyIDw9IDB4MTEyQUYsXG4gICAgLy8gJ0todWRhd2FkaSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTEyQjAgJiYgY2hhciA8PSAweDExMkZGLFxuICAgIC8vICdHcmFudGhhJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMTMwMCAmJiBjaGFyIDw9IDB4MTEzN0YsXG4gICAgLy8gJ05ld2EnOiAoY2hhcikgPT4gY2hhciA+PSAweDExNDAwICYmIGNoYXIgPD0gMHgxMTQ3RixcbiAgICAvLyAnVGlyaHV0YSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTE0ODAgJiYgY2hhciA8PSAweDExNERGLFxuICAgIC8vICdTaWRkaGFtJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMTU4MCAmJiBjaGFyIDw9IDB4MTE1RkYsXG4gICAgLy8gJ01vZGknOiAoY2hhcikgPT4gY2hhciA+PSAweDExNjAwICYmIGNoYXIgPD0gMHgxMTY1RixcbiAgICAvLyAnTW9uZ29saWFuIFN1cHBsZW1lbnQnOiAoY2hhcikgPT4gY2hhciA+PSAweDExNjYwICYmIGNoYXIgPD0gMHgxMTY3RixcbiAgICAvLyAnVGFrcmknOiAoY2hhcikgPT4gY2hhciA+PSAweDExNjgwICYmIGNoYXIgPD0gMHgxMTZDRixcbiAgICAvLyAnQWhvbSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTE3MDAgJiYgY2hhciA8PSAweDExNzNGLFxuICAgIC8vICdXYXJhbmcgQ2l0aSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTE4QTAgJiYgY2hhciA8PSAweDExOEZGLFxuICAgIC8vICdQYXUgQ2luIEhhdSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTFBQzAgJiYgY2hhciA8PSAweDExQUZGLFxuICAgIC8vICdCaGFpa3N1a2knOiAoY2hhcikgPT4gY2hhciA+PSAweDExQzAwICYmIGNoYXIgPD0gMHgxMUM2RixcbiAgICAvLyAnTWFyY2hlbic6IChjaGFyKSA9PiBjaGFyID49IDB4MTFDNzAgJiYgY2hhciA8PSAweDExQ0JGLFxuICAgIC8vICdDdW5laWZvcm0nOiAoY2hhcikgPT4gY2hhciA+PSAweDEyMDAwICYmIGNoYXIgPD0gMHgxMjNGRixcbiAgICAvLyAnQ3VuZWlmb3JtIE51bWJlcnMgYW5kIFB1bmN0dWF0aW9uJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxMjQwMCAmJiBjaGFyIDw9IDB4MTI0N0YsXG4gICAgLy8gJ0Vhcmx5IER5bmFzdGljIEN1bmVpZm9ybSc6IChjaGFyKSA9PiBjaGFyID49IDB4MTI0ODAgJiYgY2hhciA8PSAweDEyNTRGLFxuICAgIC8vICdFZ3lwdGlhbiBIaWVyb2dseXBocyc6IChjaGFyKSA9PiBjaGFyID49IDB4MTMwMDAgJiYgY2hhciA8PSAweDEzNDJGLFxuICAgIC8vICdBbmF0b2xpYW4gSGllcm9nbHlwaHMnOiAoY2hhcikgPT4gY2hhciA+PSAweDE0NDAwICYmIGNoYXIgPD0gMHgxNDY3RixcbiAgICAvLyAnQmFtdW0gU3VwcGxlbWVudCc6IChjaGFyKSA9PiBjaGFyID49IDB4MTY4MDAgJiYgY2hhciA8PSAweDE2QTNGLFxuICAgIC8vICdNcm8nOiAoY2hhcikgPT4gY2hhciA+PSAweDE2QTQwICYmIGNoYXIgPD0gMHgxNkE2RixcbiAgICAvLyAnQmFzc2EgVmFoJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxNkFEMCAmJiBjaGFyIDw9IDB4MTZBRkYsXG4gICAgLy8gJ1BhaGF3aCBIbW9uZyc6IChjaGFyKSA9PiBjaGFyID49IDB4MTZCMDAgJiYgY2hhciA8PSAweDE2QjhGLFxuICAgIC8vICdNaWFvJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxNkYwMCAmJiBjaGFyIDw9IDB4MTZGOUYsXG4gICAgLy8gJ0lkZW9ncmFwaGljIFN5bWJvbHMgYW5kIFB1bmN0dWF0aW9uJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxNkZFMCAmJiBjaGFyIDw9IDB4MTZGRkYsXG4gICAgLy8gJ1Rhbmd1dCc6IChjaGFyKSA9PiBjaGFyID49IDB4MTcwMDAgJiYgY2hhciA8PSAweDE4N0ZGLFxuICAgIC8vICdUYW5ndXQgQ29tcG9uZW50cyc6IChjaGFyKSA9PiBjaGFyID49IDB4MTg4MDAgJiYgY2hhciA8PSAweDE4QUZGLFxuICAgIC8vICdLYW5hIFN1cHBsZW1lbnQnOiAoY2hhcikgPT4gY2hhciA+PSAweDFCMDAwICYmIGNoYXIgPD0gMHgxQjBGRixcbiAgICAvLyAnRHVwbG95YW4nOiAoY2hhcikgPT4gY2hhciA+PSAweDFCQzAwICYmIGNoYXIgPD0gMHgxQkM5RixcbiAgICAvLyAnU2hvcnRoYW5kIEZvcm1hdCBDb250cm9scyc6IChjaGFyKSA9PiBjaGFyID49IDB4MUJDQTAgJiYgY2hhciA8PSAweDFCQ0FGLFxuICAgIC8vICdCeXphbnRpbmUgTXVzaWNhbCBTeW1ib2xzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRDAwMCAmJiBjaGFyIDw9IDB4MUQwRkYsXG4gICAgLy8gJ011c2ljYWwgU3ltYm9scyc6IChjaGFyKSA9PiBjaGFyID49IDB4MUQxMDAgJiYgY2hhciA8PSAweDFEMUZGLFxuICAgIC8vICdBbmNpZW50IEdyZWVrIE11c2ljYWwgTm90YXRpb24nOiAoY2hhcikgPT4gY2hhciA+PSAweDFEMjAwICYmIGNoYXIgPD0gMHgxRDI0RixcbiAgICAvLyAnVGFpIFh1YW4gSmluZyBTeW1ib2xzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRDMwMCAmJiBjaGFyIDw9IDB4MUQzNUYsXG4gICAgLy8gJ0NvdW50aW5nIFJvZCBOdW1lcmFscyc6IChjaGFyKSA9PiBjaGFyID49IDB4MUQzNjAgJiYgY2hhciA8PSAweDFEMzdGLFxuICAgIC8vICdNYXRoZW1hdGljYWwgQWxwaGFudW1lcmljIFN5bWJvbHMnOiAoY2hhcikgPT4gY2hhciA+PSAweDFENDAwICYmIGNoYXIgPD0gMHgxRDdGRixcbiAgICAvLyAnU3V0dG9uIFNpZ25Xcml0aW5nJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRDgwMCAmJiBjaGFyIDw9IDB4MURBQUYsXG4gICAgLy8gJ0dsYWdvbGl0aWMgU3VwcGxlbWVudCc6IChjaGFyKSA9PiBjaGFyID49IDB4MUUwMDAgJiYgY2hhciA8PSAweDFFMDJGLFxuICAgIC8vICdNZW5kZSBLaWtha3VpJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRTgwMCAmJiBjaGFyIDw9IDB4MUU4REYsXG4gICAgLy8gJ0FkbGFtJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRTkwMCAmJiBjaGFyIDw9IDB4MUU5NUYsXG4gICAgLy8gJ0FyYWJpYyBNYXRoZW1hdGljYWwgQWxwaGFiZXRpYyBTeW1ib2xzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRUUwMCAmJiBjaGFyIDw9IDB4MUVFRkYsXG4gICAgLy8gJ01haGpvbmcgVGlsZXMnOiAoY2hhcikgPT4gY2hhciA+PSAweDFGMDAwICYmIGNoYXIgPD0gMHgxRjAyRixcbiAgICAvLyAnRG9taW5vIFRpbGVzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRjAzMCAmJiBjaGFyIDw9IDB4MUYwOUYsXG4gICAgLy8gJ1BsYXlpbmcgQ2FyZHMnOiAoY2hhcikgPT4gY2hhciA+PSAweDFGMEEwICYmIGNoYXIgPD0gMHgxRjBGRixcbiAgICAvLyAnRW5jbG9zZWQgQWxwaGFudW1lcmljIFN1cHBsZW1lbnQnOiAoY2hhcikgPT4gY2hhciA+PSAweDFGMTAwICYmIGNoYXIgPD0gMHgxRjFGRixcbiAgICAvLyAnRW5jbG9zZWQgSWRlb2dyYXBoaWMgU3VwcGxlbWVudCc6IChjaGFyKSA9PiBjaGFyID49IDB4MUYyMDAgJiYgY2hhciA8PSAweDFGMkZGLFxuICAgIC8vICdNaXNjZWxsYW5lb3VzIFN5bWJvbHMgYW5kIFBpY3RvZ3JhcGhzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRjMwMCAmJiBjaGFyIDw9IDB4MUY1RkYsXG4gICAgLy8gJ0Vtb3RpY29ucyc6IChjaGFyKSA9PiBjaGFyID49IDB4MUY2MDAgJiYgY2hhciA8PSAweDFGNjRGLFxuICAgIC8vICdPcm5hbWVudGFsIERpbmdiYXRzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRjY1MCAmJiBjaGFyIDw9IDB4MUY2N0YsXG4gICAgLy8gJ1RyYW5zcG9ydCBhbmQgTWFwIFN5bWJvbHMnOiAoY2hhcikgPT4gY2hhciA+PSAweDFGNjgwICYmIGNoYXIgPD0gMHgxRjZGRixcbiAgICAvLyAnQWxjaGVtaWNhbCBTeW1ib2xzJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRjcwMCAmJiBjaGFyIDw9IDB4MUY3N0YsXG4gICAgLy8gJ0dlb21ldHJpYyBTaGFwZXMgRXh0ZW5kZWQnOiAoY2hhcikgPT4gY2hhciA+PSAweDFGNzgwICYmIGNoYXIgPD0gMHgxRjdGRixcbiAgICAvLyAnU3VwcGxlbWVudGFsIEFycm93cy1DJzogKGNoYXIpID0+IGNoYXIgPj0gMHgxRjgwMCAmJiBjaGFyIDw9IDB4MUY4RkYsXG4gICAgLy8gJ1N1cHBsZW1lbnRhbCBTeW1ib2xzIGFuZCBQaWN0b2dyYXBocyc6IChjaGFyKSA9PiBjaGFyID49IDB4MUY5MDAgJiYgY2hhciA8PSAweDFGOUZGLFxuICAgIC8vICdDSksgVW5pZmllZCBJZGVvZ3JhcGhzIEV4dGVuc2lvbiBCJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyMDAwMCAmJiBjaGFyIDw9IDB4MkE2REYsXG4gICAgLy8gJ0NKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEMnOiAoY2hhcikgPT4gY2hhciA+PSAweDJBNzAwICYmIGNoYXIgPD0gMHgyQjczRixcbiAgICAvLyAnQ0pLIFVuaWZpZWQgSWRlb2dyYXBocyBFeHRlbnNpb24gRCc6IChjaGFyKSA9PiBjaGFyID49IDB4MkI3NDAgJiYgY2hhciA8PSAweDJCODFGLFxuICAgIC8vICdDSksgVW5pZmllZCBJZGVvZ3JhcGhzIEV4dGVuc2lvbiBFJzogKGNoYXIpID0+IGNoYXIgPj0gMHgyQjgyMCAmJiBjaGFyIDw9IDB4MkNFQUYsXG4gICAgLy8gJ0NKSyBDb21wYXRpYmlsaXR5IElkZW9ncmFwaHMgU3VwcGxlbWVudCc6IChjaGFyKSA9PiBjaGFyID49IDB4MkY4MDAgJiYgY2hhciA8PSAweDJGQTFGLFxuICAgIC8vICdUYWdzJzogKGNoYXIpID0+IGNoYXIgPj0gMHhFMDAwMCAmJiBjaGFyIDw9IDB4RTAwN0YsXG4gICAgLy8gJ1ZhcmlhdGlvbiBTZWxlY3RvcnMgU3VwcGxlbWVudCc6IChjaGFyKSA9PiBjaGFyID49IDB4RTAxMDAgJiYgY2hhciA8PSAweEUwMUVGLFxuICAgIC8vICdTdXBwbGVtZW50YXJ5IFByaXZhdGUgVXNlIEFyZWEtQSc6IChjaGFyKSA9PiBjaGFyID49IDB4RjAwMDAgJiYgY2hhciA8PSAweEZGRkZGLFxuICAgIC8vICdTdXBwbGVtZW50YXJ5IFByaXZhdGUgVXNlIEFyZWEtQic6IChjaGFyKSA9PiBjaGFyID49IDB4MTAwMDAwICYmIGNoYXIgPD0gMHgxMEZGRkYsXG59O1xuXG5tb2R1bGUuZXhwb3J0cyA9IHVuaWNvZGVCbG9ja0xvb2t1cDtcbiIsIid1c2Ugc3RyaWN0Jztcbi8qIGVzbGludC1kaXNhYmxlIG5ldy1jYXAgKi9cblxuY29uc3QgaXNDaGFyID0gcmVxdWlyZSgnLi9pc19jaGFyX2luX3VuaWNvZGVfYmxvY2snKTtcblxubW9kdWxlLmV4cG9ydHMuYWxsb3dzSWRlb2dyYXBoaWNCcmVha2luZyA9IGZ1bmN0aW9uKGNoYXJzKSB7XG4gICAgZm9yIChjb25zdCBjaGFyIG9mIGNoYXJzKSB7XG4gICAgICAgIGlmICghZXhwb3J0cy5jaGFyQWxsb3dzSWRlb2dyYXBoaWNCcmVha2luZyhjaGFyLmNoYXJDb2RlQXQoMCkpKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufTtcblxubW9kdWxlLmV4cG9ydHMuYWxsb3dzVmVydGljYWxXcml0aW5nTW9kZSA9IGZ1bmN0aW9uKGNoYXJzKSB7XG4gICAgZm9yIChjb25zdCBjaGFyIG9mIGNoYXJzKSB7XG4gICAgICAgIGlmIChleHBvcnRzLmNoYXJIYXNVcHJpZ2h0VmVydGljYWxPcmllbnRhdGlvbihjaGFyLmNoYXJDb2RlQXQoMCkpKSByZXR1cm4gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxubW9kdWxlLmV4cG9ydHMuYWxsb3dzTGV0dGVyU3BhY2luZyA9IGZ1bmN0aW9uKGNoYXJzKSB7XG4gICAgZm9yIChjb25zdCBjaGFyIG9mIGNoYXJzKSB7XG4gICAgICAgIGlmICghZXhwb3J0cy5jaGFyQWxsb3dzTGV0dGVyU3BhY2luZyhjaGFyLmNoYXJDb2RlQXQoMCkpKSByZXR1cm4gZmFsc2U7XG4gICAgfVxuICAgIHJldHVybiB0cnVlO1xufTtcblxubW9kdWxlLmV4cG9ydHMuY2hhckFsbG93c0xldHRlclNwYWNpbmcgPSBmdW5jdGlvbihjaGFyKSB7XG4gICAgaWYgKGlzQ2hhclsnQXJhYmljJ10oY2hhcikpIHJldHVybiBmYWxzZTtcbiAgICBpZiAoaXNDaGFyWydBcmFiaWMgU3VwcGxlbWVudCddKGNoYXIpKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGlzQ2hhclsnQXJhYmljIEV4dGVuZGVkLUEnXShjaGFyKSkgcmV0dXJuIGZhbHNlO1xuICAgIGlmIChpc0NoYXJbJ0FyYWJpYyBQcmVzZW50YXRpb24gRm9ybXMtQSddKGNoYXIpKSByZXR1cm4gZmFsc2U7XG4gICAgaWYgKGlzQ2hhclsnQXJhYmljIFByZXNlbnRhdGlvbiBGb3Jtcy1CJ10oY2hhcikpIHJldHVybiBmYWxzZTtcblxuICAgIHJldHVybiB0cnVlO1xufTtcblxubW9kdWxlLmV4cG9ydHMuY2hhckFsbG93c0lkZW9ncmFwaGljQnJlYWtpbmcgPSBmdW5jdGlvbihjaGFyKSB7XG4gICAgLy8gUmV0dXJuIGVhcmx5IGZvciBjaGFyYWN0ZXJzIG91dHNpZGUgYWxsIGlkZW9ncmFwaGljIHJhbmdlcy5cbiAgICBpZiAoY2hhciA8IDB4MkU4MCkgcmV0dXJuIGZhbHNlO1xuXG4gICAgaWYgKGlzQ2hhclsnQm9wb21vZm8gRXh0ZW5kZWQnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnQm9wb21vZm8nXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnQ0pLIENvbXBhdGliaWxpdHkgRm9ybXMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnQ0pLIENvbXBhdGliaWxpdHkgSWRlb2dyYXBocyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydDSksgQ29tcGF0aWJpbGl0eSddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydDSksgUmFkaWNhbHMgU3VwcGxlbWVudCddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydDSksgU3Ryb2tlcyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydDSksgU3ltYm9scyBhbmQgUHVuY3R1YXRpb24nXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnQ0pLIFVuaWZpZWQgSWRlb2dyYXBocyBFeHRlbnNpb24gQSddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydDSksgVW5pZmllZCBJZGVvZ3JhcGhzJ10oY2hhcikpIHJldHVybiB0cnVlO1xuICAgIGlmIChpc0NoYXJbJ0VuY2xvc2VkIENKSyBMZXR0ZXJzIGFuZCBNb250aHMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnSGFsZndpZHRoIGFuZCBGdWxsd2lkdGggRm9ybXMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnSGlyYWdhbmEnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnSWRlb2dyYXBoaWMgRGVzY3JpcHRpb24gQ2hhcmFjdGVycyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydLYW5neGkgUmFkaWNhbHMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnS2F0YWthbmEgUGhvbmV0aWMgRXh0ZW5zaW9ucyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydLYXRha2FuYSddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydWZXJ0aWNhbCBGb3JtcyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydZaSBSYWRpY2FscyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydZaSBTeWxsYWJsZXMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG4vLyBUaGUgZm9sbG93aW5nIGxvZ2ljIGNvbWVzIGZyb21cbi8vIDxodHRwOi8vd3d3LnVuaWNvZGUub3JnL1B1YmxpYy92ZXJ0aWNhbC9yZXZpc2lvbi0xNi9WZXJ0aWNhbE9yaWVudGF0aW9uLTE2LnR4dD4uXG4vLyBUaGUgZGF0YSBmaWxlIGRlbm90ZXMgd2l0aCDigJxV4oCdIG9yIOKAnFR14oCdIGFueSBjb2RlcG9pbnQgdGhhdCBtYXkgYmUgZHJhd25cbi8vIHVwcmlnaHQgaW4gdmVydGljYWwgdGV4dCBidXQgZG9lcyBub3QgZGlzdGluZ3Vpc2ggYmV0d2VlbiB1cHJpZ2h0IGFuZFxuLy8g4oCcbmV1dHJhbOKAnSBjaGFyYWN0ZXJzLlxuXG4vLyBCbG9ja3MgaW4gdGhlIFVuaWNvZGUgc3VwcGxlbWVudGFyeSBwbGFuZXMgYXJlIGV4Y2x1ZGVkIGZyb20gdGhpcyBtb2R1bGUgZHVlXG4vLyB0byA8aHR0cHM6Ly9naXRodWIuY29tL21hcGJveC9tYXBib3gtZ2wvaXNzdWVzLzI5Pi5cblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIFVuaWNvZGUgY29kZXBvaW50IGlkZW50aWZpZXMgYSBjaGFyYWN0ZXIgd2l0aFxuICogdXByaWdodCBvcmllbnRhdGlvbi5cbiAqXG4gKiBBIGNoYXJhY3RlciBoYXMgdXByaWdodCBvcmllbnRhdGlvbiBpZiBpdCBpcyBkcmF3biB1cHJpZ2h0ICh1bnJvdGF0ZWQpXG4gKiB3aGV0aGVyIHRoZSBsaW5lIGlzIG9yaWVudGVkIGhvcml6b250YWxseSBvciB2ZXJ0aWNhbGx5LCBldmVuIGlmIGJvdGhcbiAqIGFkamFjZW50IGNoYXJhY3RlcnMgY2FuIGJlIHJvdGF0ZWQuIEZvciBleGFtcGxlLCBhIENoaW5lc2UgY2hhcmFjdGVyIGlzXG4gKiBhbHdheXMgZHJhd24gdXByaWdodC4gQW4gdXByaWdodGx5IG9yaWVudGVkIGNoYXJhY3RlciBjYXVzZXMgYW4gYWRqYWNlbnRcbiAqIOKAnG5ldXRyYWzigJ0gY2hhcmFjdGVyIHRvIGJlIGRyYXduIHVwcmlnaHQgYXMgd2VsbC5cbiAqL1xuZXhwb3J0cy5jaGFySGFzVXByaWdodFZlcnRpY2FsT3JpZW50YXRpb24gPSBmdW5jdGlvbihjaGFyKSB7XG4gICAgaWYgKGNoYXIgPT09IDB4MDJFQSAvKiBtb2RpZmllciBsZXR0ZXIgeWluIGRlcGFydGluZyB0b25lIG1hcmsgKi8gfHxcbiAgICAgICAgY2hhciA9PT0gMHgwMkVCIC8qIG1vZGlmaWVyIGxldHRlciB5YW5nIGRlcGFydGluZyB0b25lIG1hcmsgKi8pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgLy8gUmV0dXJuIGVhcmx5IGZvciBjaGFyYWN0ZXJzIG91dHNpZGUgYWxsIHJhbmdlcyB3aG9zZSBjaGFyYWN0ZXJzIHJlbWFpblxuICAgIC8vIHVwcmlnaHQgaW4gdmVydGljYWwgd3JpdGluZyBtb2RlLlxuICAgIGlmIChjaGFyIDwgMHgxMTAwKSByZXR1cm4gZmFsc2U7XG5cbiAgICBpZiAoaXNDaGFyWydCb3BvbW9mbyBFeHRlbmRlZCddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydCb3BvbW9mbyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydDSksgQ29tcGF0aWJpbGl0eSBGb3JtcyddKGNoYXIpKSB7XG4gICAgICAgIGlmICghKGNoYXIgPj0gMHhGRTQ5IC8qIGRhc2hlZCBvdmVybGluZSAqLyAmJiBjaGFyIDw9IDB4RkU0RiAvKiB3YXZ5IGxvdyBsaW5lICovKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQ2hhclsnQ0pLIENvbXBhdGliaWxpdHkgSWRlb2dyYXBocyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydDSksgQ29tcGF0aWJpbGl0eSddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydDSksgUmFkaWNhbHMgU3VwcGxlbWVudCddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydDSksgU3Ryb2tlcyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydDSksgU3ltYm9scyBhbmQgUHVuY3R1YXRpb24nXShjaGFyKSkge1xuICAgICAgICBpZiAoIShjaGFyID49IDB4MzAwOCAvKiBsZWZ0IGFuZ2xlIGJyYWNrZXQgKi8gJiYgY2hhciA8PSAweDMwMTEgLyogcmlnaHQgYmxhY2sgbGVudGljdWxhciBicmFja2V0ICovKSAmJlxuICAgICAgICAgICAgIShjaGFyID49IDB4MzAxNCAvKiBsZWZ0IHRvcnRvaXNlIHNoZWxsIGJyYWNrZXQgKi8gJiYgY2hhciA8PSAweDMwMUYgLyogbG93IGRvdWJsZSBwcmltZSBxdW90YXRpb24gbWFyayAqLykgJiZcbiAgICAgICAgICAgIGNoYXIgIT09IDB4MzAzMCAvKiB3YXZ5IGRhc2ggKi8pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0NoYXJbJ0NKSyBVbmlmaWVkIElkZW9ncmFwaHMgRXh0ZW5zaW9uIEEnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnQ0pLIFVuaWZpZWQgSWRlb2dyYXBocyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydFbmNsb3NlZCBDSksgTGV0dGVycyBhbmQgTW9udGhzJ10oY2hhcikpIHJldHVybiB0cnVlO1xuICAgIGlmIChpc0NoYXJbJ0hhbmd1bCBDb21wYXRpYmlsaXR5IEphbW8nXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnSGFuZ3VsIEphbW8gRXh0ZW5kZWQtQSddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydIYW5ndWwgSmFtbyBFeHRlbmRlZC1CJ10oY2hhcikpIHJldHVybiB0cnVlO1xuICAgIGlmIChpc0NoYXJbJ0hhbmd1bCBKYW1vJ10oY2hhcikpIHJldHVybiB0cnVlO1xuICAgIGlmIChpc0NoYXJbJ0hhbmd1bCBTeWxsYWJsZXMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnSGlyYWdhbmEnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnSWRlb2dyYXBoaWMgRGVzY3JpcHRpb24gQ2hhcmFjdGVycyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydLYW5idW4nXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnS2FuZ3hpIFJhZGljYWxzJ10oY2hhcikpIHJldHVybiB0cnVlO1xuICAgIGlmIChpc0NoYXJbJ0thdGFrYW5hIFBob25ldGljIEV4dGVuc2lvbnMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnS2F0YWthbmEnXShjaGFyKSkge1xuICAgICAgICBpZiAoY2hhciAhPT0gMHgzMEZDIC8qIGthdGFrYW5hLWhpcmFnYW5hIHByb2xvbmdlZCBzb3VuZCBtYXJrICovKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNDaGFyWydIYWxmd2lkdGggYW5kIEZ1bGx3aWR0aCBGb3JtcyddKGNoYXIpKSB7XG4gICAgICAgIGlmIChjaGFyICE9PSAweEZGMDggLyogZnVsbHdpZHRoIGxlZnQgcGFyZW50aGVzaXMgKi8gJiZcbiAgICAgICAgICAgIGNoYXIgIT09IDB4RkYwOSAvKiBmdWxsd2lkdGggcmlnaHQgcGFyZW50aGVzaXMgKi8gJiZcbiAgICAgICAgICAgIGNoYXIgIT09IDB4RkYwRCAvKiBmdWxsd2lkdGggaHlwaGVuLW1pbnVzICovICYmXG4gICAgICAgICAgICAhKGNoYXIgPj0gMHhGRjFBIC8qIGZ1bGx3aWR0aCBjb2xvbiAqLyAmJiBjaGFyIDw9IDB4RkYxRSAvKiBmdWxsd2lkdGggZ3JlYXRlci10aGFuIHNpZ24gKi8pICYmXG4gICAgICAgICAgICBjaGFyICE9PSAweEZGM0IgLyogZnVsbHdpZHRoIGxlZnQgc3F1YXJlIGJyYWNrZXQgKi8gJiZcbiAgICAgICAgICAgIGNoYXIgIT09IDB4RkYzRCAvKiBmdWxsd2lkdGggcmlnaHQgc3F1YXJlIGJyYWNrZXQgKi8gJiZcbiAgICAgICAgICAgIGNoYXIgIT09IDB4RkYzRiAvKiBmdWxsd2lkdGggbG93IGxpbmUgKi8gJiZcbiAgICAgICAgICAgICEoY2hhciA+PSAweEZGNUIgLyogZnVsbHdpZHRoIGxlZnQgY3VybHkgYnJhY2tldCAqLyAmJiBjaGFyIDw9IDB4RkZERikgJiZcbiAgICAgICAgICAgIGNoYXIgIT09IDB4RkZFMyAvKiBmdWxsd2lkdGggbWFjcm9uICovICYmXG4gICAgICAgICAgICAhKGNoYXIgPj0gMHhGRkU4IC8qIGhhbGZ3aWR0aCBmb3JtcyBsaWdodCB2ZXJ0aWNhbCAqLyAmJiBjaGFyIDw9IDB4RkZFRikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0NoYXJbJ1NtYWxsIEZvcm0gVmFyaWFudHMnXShjaGFyKSkge1xuICAgICAgICBpZiAoIShjaGFyID49IDB4RkU1OCAvKiBzbWFsbCBlbSBkYXNoICovICYmIGNoYXIgPD0gMHhGRTVFIC8qIHNtYWxsIHJpZ2h0IHRvcnRvaXNlIHNoZWxsIGJyYWNrZXQgKi8pICYmXG4gICAgICAgICAgICAhKGNoYXIgPj0gMHhGRTYzIC8qIHNtYWxsIGh5cGhlbi1taW51cyAqLyAmJiBjaGFyIDw9IDB4RkU2NiAvKiBzbWFsbCBlcXVhbHMgc2lnbiAqLykpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0NoYXJbJ1VuaWZpZWQgQ2FuYWRpYW4gQWJvcmlnaW5hbCBTeWxsYWJpY3MnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnVW5pZmllZCBDYW5hZGlhbiBBYm9yaWdpbmFsIFN5bGxhYmljcyBFeHRlbmRlZCddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydWZXJ0aWNhbCBGb3JtcyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydZaWppbmcgSGV4YWdyYW0gU3ltYm9scyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydZaSBTeWxsYWJsZXMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnWWkgUmFkaWNhbHMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG5cbiAgICByZXR1cm4gZmFsc2U7XG59O1xuXG4vKipcbiAqIFJldHVybnMgdHJ1ZSBpZiB0aGUgZ2l2ZW4gVW5pY29kZSBjb2RlcG9pbnQgaWRlbnRpZmllcyBhIGNoYXJhY3RlciB3aXRoXG4gKiBuZXV0cmFsIG9yaWVudGF0aW9uLlxuICpcbiAqIEEgY2hhcmFjdGVyIGhhcyBuZXV0cmFsIG9yaWVudGF0aW9uIGlmIGl0IG1heSBiZSBkcmF3biByb3RhdGVkIG9yIHVucm90YXRlZFxuICogd2hlbiB0aGUgbGluZSBpcyBvcmllbnRlZCB2ZXJ0aWNhbGx5LCBkZXBlbmRpbmcgb24gdGhlIG9yaWVudGF0aW9uIG9mIHRoZVxuICogYWRqYWNlbnQgY2hhcmFjdGVycy4gRm9yIGV4YW1wbGUsIGFsb25nIGEgdmVydGljbGx5IG9yaWVudGVkIGxpbmUsIHRoZSB2dWxnYXJcbiAqIGZyYWN0aW9uIMK9IGlzIGRyYXduIHVwcmlnaHQgYW1vbmcgQ2hpbmVzZSBjaGFyYWN0ZXJzIGJ1dCByb3RhdGVkIGFtb25nIExhdGluXG4gKiBsZXR0ZXJzLiBBIG5ldXRyYWxseSBvcmllbnRlZCBjaGFyYWN0ZXIgZG9lcyBub3QgaW5mbHVlbmNlIHdoZXRoZXIgYW5cbiAqIGFkamFjZW50IGNoYXJhY3RlciBpcyBkcmF3biB1cHJpZ2h0IG9yIHJvdGF0ZWQuXG4gKi9cbmV4cG9ydHMuY2hhckhhc05ldXRyYWxWZXJ0aWNhbE9yaWVudGF0aW9uID0gZnVuY3Rpb24oY2hhcikge1xuICAgIGlmIChpc0NoYXJbJ0xhdGluLTEgU3VwcGxlbWVudCddKGNoYXIpKSB7XG4gICAgICAgIGlmIChjaGFyID09PSAweDAwQTcgLyogc2VjdGlvbiBzaWduICovIHx8XG4gICAgICAgICAgICBjaGFyID09PSAweDAwQTkgLyogY29weXJpZ2h0IHNpZ24gKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MDBBRSAvKiByZWdpc3RlcmVkIHNpZ24gKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MDBCMSAvKiBwbHVzLW1pbnVzIHNpZ24gKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MDBCQyAvKiB2dWxnYXIgZnJhY3Rpb24gb25lIHF1YXJ0ZXIgKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MDBCRCAvKiB2dWxnYXIgZnJhY3Rpb24gb25lIGhhbGYgKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MDBCRSAvKiB2dWxnYXIgZnJhY3Rpb24gdGhyZWUgcXVhcnRlcnMgKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MDBENyAvKiBtdWx0aXBsaWNhdGlvbiBzaWduICovIHx8XG4gICAgICAgICAgICBjaGFyID09PSAweDAwRjcgLyogZGl2aXNpb24gc2lnbiAqLykge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQ2hhclsnR2VuZXJhbCBQdW5jdHVhdGlvbiddKGNoYXIpKSB7XG4gICAgICAgIGlmIChjaGFyID09PSAweDIwMTYgLyogZG91YmxlIHZlcnRpY2FsIGxpbmUgKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MjAyMCAvKiBkYWdnZXIgKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MjAyMSAvKiBkb3VibGUgZGFnZ2VyICovIHx8XG4gICAgICAgICAgICBjaGFyID09PSAweDIwMzAgLyogcGVyIG1pbGxlIHNpZ24gKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MjAzMSAvKiBwZXIgdGVuIHRob3VzYW5kIHNpZ24gKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MjAzQiAvKiByZWZlcmVuY2UgbWFyayAqLyB8fFxuICAgICAgICAgICAgY2hhciA9PT0gMHgyMDNDIC8qIGRvdWJsZSBleGNsYW1hdGlvbiBtYXJrICovIHx8XG4gICAgICAgICAgICBjaGFyID09PSAweDIwNDIgLyogYXN0ZXJpc20gKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MjA0NyAvKiBkb3VibGUgcXVlc3Rpb24gbWFyayAqLyB8fFxuICAgICAgICAgICAgY2hhciA9PT0gMHgyMDQ4IC8qIHF1ZXN0aW9uIGV4Y2xhbWF0aW9uIG1hcmsgKi8gfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MjA0OSAvKiBleGNsYW1hdGlvbiBxdWVzdGlvbiBtYXJrICovIHx8XG4gICAgICAgICAgICBjaGFyID09PSAweDIwNTEgLyogdHdvIGFzdGVyaXNrcyBhbGlnbmVkIHZlcnRpY2FsbHkgKi8pIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0NoYXJbJ0xldHRlcmxpa2UgU3ltYm9scyddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydOdW1iZXIgRm9ybXMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnTWlzY2VsbGFuZW91cyBUZWNobmljYWwnXShjaGFyKSkge1xuICAgICAgICBpZiAoKGNoYXIgPj0gMHgyMzAwIC8qIGRpYW1ldGVyIHNpZ24gKi8gJiYgY2hhciA8PSAweDIzMDcgLyogd2F2eSBsaW5lICovKSB8fFxuICAgICAgICAgICAgKGNoYXIgPj0gMHgyMzBDIC8qIGJvdHRvbSByaWdodCBjcm9wICovICYmIGNoYXIgPD0gMHgyMzFGIC8qIGJvdHRvbSByaWdodCBjb3JuZXIgKi8pIHx8XG4gICAgICAgICAgICAoY2hhciA+PSAweDIzMjQgLyogdXAgYXJyb3doZWFkIGJldHdlZW4gdHdvIGhvcml6b250YWwgYmFycyAqLyAmJiBjaGFyIDw9IDB4MjMyOCAvKiBrZXlib2FyZCAqLykgfHxcbiAgICAgICAgICAgIGNoYXIgPT09IDB4MjMyQiAvKiBlcmFzZSB0byB0aGUgbGVmdCAqLyB8fFxuICAgICAgICAgICAgKGNoYXIgPj0gMHgyMzdEIC8qIHNob3VsZGVyZWQgb3BlbiBib3ggKi8gJiYgY2hhciA8PSAweDIzOUEgLyogY2xlYXIgc2NyZWVuIHN5bWJvbCAqLykgfHxcbiAgICAgICAgICAgIChjaGFyID49IDB4MjNCRSAvKiBkZW50aXN0cnkgc3ltYm9sIGxpZ2h0IHZlcnRpY2FsIGFuZCB0b3AgcmlnaHQgKi8gJiYgY2hhciA8PSAweDIzQ0QgLyogc3F1YXJlIGZvb3QgKi8pIHx8XG4gICAgICAgICAgICBjaGFyID09PSAweDIzQ0YgLyogZWplY3Qgc3ltYm9sICovIHx8XG4gICAgICAgICAgICAoY2hhciA+PSAweDIzRDEgLyogbWV0cmljYWwgYnJldmUgKi8gJiYgY2hhciA8PSAweDIzREIgLyogZnVzZSAqLykgfHxcbiAgICAgICAgICAgIChjaGFyID49IDB4MjNFMiAvKiB3aGl0ZSB0cmFwZXppdW0gKi8gJiYgY2hhciA8PSAweDIzRkYpKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgfVxuICAgIH1cbiAgICBpZiAoaXNDaGFyWydDb250cm9sIFBpY3R1cmVzJ10oY2hhcikgJiYgY2hhciAhPT0gMHgyNDIzIC8qIG9wZW4gYm94ICovKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydPcHRpY2FsIENoYXJhY3RlciBSZWNvZ25pdGlvbiddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydFbmNsb3NlZCBBbHBoYW51bWVyaWNzJ10oY2hhcikpIHJldHVybiB0cnVlO1xuICAgIGlmIChpc0NoYXJbJ0dlb21ldHJpYyBTaGFwZXMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnTWlzY2VsbGFuZW91cyBTeW1ib2xzJ10oY2hhcikpIHtcbiAgICAgICAgaWYgKCEoY2hhciA+PSAweDI2MUEgLyogYmxhY2sgbGVmdCBwb2ludGluZyBpbmRleCAqLyAmJiBjaGFyIDw9IDB4MjYxRiAvKiB3aGl0ZSBkb3duIHBvaW50aW5nIGluZGV4ICovKSkge1xuICAgICAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgICAgIH1cbiAgICB9XG4gICAgaWYgKGlzQ2hhclsnTWlzY2VsbGFuZW91cyBTeW1ib2xzIGFuZCBBcnJvd3MnXShjaGFyKSkge1xuICAgICAgICBpZiAoKGNoYXIgPj0gMHgyQjEyIC8qIHNxdWFyZSB3aXRoIHRvcCBoYWxmIGJsYWNrICovICYmIGNoYXIgPD0gMHgyQjJGIC8qIHdoaXRlIHZlcnRpY2FsIGVsbGlwc2UgKi8pIHx8XG4gICAgICAgICAgICAoY2hhciA+PSAweDJCNTAgLyogd2hpdGUgbWVkaXVtIHN0YXIgKi8gJiYgY2hhciA8PSAweDJCNTkgLyogaGVhdnkgY2lyY2xlZCBzYWx0aXJlICovKSB8fFxuICAgICAgICAgICAgKGNoYXIgPj0gMHgyQkI4IC8qIHVwd2FyZHMgd2hpdGUgYXJyb3cgZnJvbSBiYXIgd2l0aCBob3Jpem9udGFsIGJhciAqLyAmJiBjaGFyIDw9IDB4MkJFQikpIHtcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xuICAgICAgICB9XG4gICAgfVxuICAgIGlmIChpc0NoYXJbJ0NKSyBTeW1ib2xzIGFuZCBQdW5jdHVhdGlvbiddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydLYXRha2FuYSddKGNoYXIpKSByZXR1cm4gdHJ1ZTtcbiAgICBpZiAoaXNDaGFyWydQcml2YXRlIFVzZSBBcmVhJ10oY2hhcikpIHJldHVybiB0cnVlO1xuICAgIGlmIChpc0NoYXJbJ0NKSyBDb21wYXRpYmlsaXR5IEZvcm1zJ10oY2hhcikpIHJldHVybiB0cnVlO1xuICAgIGlmIChpc0NoYXJbJ1NtYWxsIEZvcm0gVmFyaWFudHMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG4gICAgaWYgKGlzQ2hhclsnSGFsZndpZHRoIGFuZCBGdWxsd2lkdGggRm9ybXMnXShjaGFyKSkgcmV0dXJuIHRydWU7XG5cbiAgICBpZiAoY2hhciA9PT0gMHgyMjFFIC8qIGluZmluaXR5ICovIHx8XG4gICAgICAgIGNoYXIgPT09IDB4MjIzNCAvKiB0aGVyZWZvcmUgKi8gfHxcbiAgICAgICAgY2hhciA9PT0gMHgyMjM1IC8qIGJlY2F1c2UgKi8gfHxcbiAgICAgICAgKGNoYXIgPj0gMHgyNzAwIC8qIGJsYWNrIHNhZmV0eSBzY2lzc29ycyAqLyAmJiBjaGFyIDw9IDB4Mjc2NyAvKiByb3RhdGVkIGZsb3JhbCBoZWFydCBidWxsZXQgKi8pIHx8XG4gICAgICAgIChjaGFyID49IDB4Mjc3NiAvKiBkaW5nYmF0IG5lZ2F0aXZlIGNpcmNsZWQgZGlnaXQgb25lICovICYmIGNoYXIgPD0gMHgyNzkzIC8qIGRpbmdiYXQgbmVnYXRpdmUgY2lyY2xlZCBzYW5zLXNlcmlmIG51bWJlciB0ZW4gKi8pIHx8XG4gICAgICAgIGNoYXIgPT09IDB4RkZGQyAvKiBvYmplY3QgcmVwbGFjZW1lbnQgY2hhcmFjdGVyICovIHx8XG4gICAgICAgIGNoYXIgPT09IDB4RkZGRCAvKiByZXBsYWNlbWVudCBjaGFyYWN0ZXIgKi8pIHtcbiAgICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuXG4gICAgcmV0dXJuIGZhbHNlO1xufTtcblxuLyoqXG4gKiBSZXR1cm5zIHRydWUgaWYgdGhlIGdpdmVuIFVuaWNvZGUgY29kZXBvaW50IGlkZW50aWZpZXMgYSBjaGFyYWN0ZXIgd2l0aFxuICogcm90YXRlZCBvcmllbnRhdGlvbi5cbiAqXG4gKiBBIGNoYXJhY3RlciBoYXMgcm90YXRlZCBvcmllbnRhdGlvbiBpZiBpdCBpcyBkcmF3biByb3RhdGVkIHdoZW4gdGhlIGxpbmUgaXNcbiAqIG9yaWVudGVkIHZlcnRpY2FsbHksIGV2ZW4gaWYgYm90aCBhZGphY2VudCBjaGFyYWN0ZXJzIGFyZSB1cHJpZ2h0LiBGb3JcbiAqIGV4YW1wbGUsIGEgTGF0aW4gbGV0dGVyIGlzIGRyYXduIHJvdGF0ZWQgYWxvbmcgYSB2ZXJ0aWNhbCBsaW5lLiBBIHJvdGF0ZWRcbiAqIGNoYXJhY3RlciBjYXVzZXMgYW4gYWRqYWNlbnQg4oCcbmV1dHJhbOKAnSBjaGFyYWN0ZXIgdG8gYmUgZHJhd24gcm90YXRlZCBhcyB3ZWxsLlxuICovXG5leHBvcnRzLmNoYXJIYXNSb3RhdGVkVmVydGljYWxPcmllbnRhdGlvbiA9IGZ1bmN0aW9uKGNoYXIpIHtcbiAgICByZXR1cm4gIShleHBvcnRzLmNoYXJIYXNVcHJpZ2h0VmVydGljYWxPcmllbnRhdGlvbihjaGFyKSB8fFxuICAgICAgICAgICAgIGV4cG9ydHMuY2hhckhhc05ldXRyYWxWZXJ0aWNhbE9yaWVudGF0aW9uKGNoYXIpKTtcbn07XG4iLCIndXNlIHN0cmljdCc7XG5cbmNvbnN0IHNjcmlwdERldGVjdGlvbiA9IHJlcXVpcmUoJy4vc2NyaXB0X2RldGVjdGlvbicpO1xuXG5tb2R1bGUuZXhwb3J0cyA9IGZ1bmN0aW9uIHZlcnRpY2FsaXplUHVuY3R1YXRpb24oaW5wdXQpIHtcbiAgICBsZXQgb3V0cHV0ID0gJyc7XG5cbiAgICBmb3IgKGxldCBpID0gMDsgaSA8IGlucHV0Lmxlbmd0aDsgaSsrKSB7XG4gICAgICAgIGNvbnN0IG5leHRDaGFyQ29kZSA9IGlucHV0LmNoYXJDb2RlQXQoaSArIDEpIHx8IG51bGw7XG4gICAgICAgIGNvbnN0IHByZXZDaGFyQ29kZSA9IGlucHV0LmNoYXJDb2RlQXQoaSAtIDEpIHx8IG51bGw7XG5cbiAgICAgICAgY29uc3QgY2FuUmVwbGFjZVB1bmN0dWF0aW9uID0gKFxuICAgICAgICAgICAgKCFuZXh0Q2hhckNvZGUgfHwgIXNjcmlwdERldGVjdGlvbi5jaGFySGFzUm90YXRlZFZlcnRpY2FsT3JpZW50YXRpb24obmV4dENoYXJDb2RlKSB8fCBtb2R1bGUuZXhwb3J0cy5sb29rdXBbaW5wdXRbaSArIDFdXSkgJiZcbiAgICAgICAgICAgICghcHJldkNoYXJDb2RlIHx8ICFzY3JpcHREZXRlY3Rpb24uY2hhckhhc1JvdGF0ZWRWZXJ0aWNhbE9yaWVudGF0aW9uKHByZXZDaGFyQ29kZSkgfHwgbW9kdWxlLmV4cG9ydHMubG9va3VwW2lucHV0W2kgLSAxXV0pXG4gICAgICAgICk7XG5cbiAgICAgICAgaWYgKGNhblJlcGxhY2VQdW5jdHVhdGlvbiAmJiBtb2R1bGUuZXhwb3J0cy5sb29rdXBbaW5wdXRbaV1dKSB7XG4gICAgICAgICAgICBvdXRwdXQgKz0gbW9kdWxlLmV4cG9ydHMubG9va3VwW2lucHV0W2ldXTtcbiAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgIG91dHB1dCArPSBpbnB1dFtpXTtcbiAgICAgICAgfVxuICAgIH1cblxuICAgIHJldHVybiBvdXRwdXQ7XG59O1xuXG5tb2R1bGUuZXhwb3J0cy5sb29rdXAgPSB7XG4gICAgJyEnOiAn77iVJyxcbiAgICAnIyc6ICfvvIMnLFxuICAgICckJzogJ++8hCcsXG4gICAgJyUnOiAn77yFJyxcbiAgICAnJic6ICfvvIYnLFxuICAgICcoJzogJ++4tScsXG4gICAgJyknOiAn77i2JyxcbiAgICAnKic6ICfvvIonLFxuICAgICcrJzogJ++8iycsXG4gICAgJywnOiAn77iQJyxcbiAgICAnLSc6ICfvuLInLFxuICAgICcuJzogJ+ODuycsXG4gICAgJy8nOiAn77yPJyxcbiAgICAnOic6ICfvuJMnLFxuICAgICc7JzogJ++4lCcsXG4gICAgJzwnOiAn77i/JyxcbiAgICAnPSc6ICfvvJ0nLFxuICAgICc+JzogJ++5gCcsXG4gICAgJz8nOiAn77iWJyxcbiAgICAnQCc6ICfvvKAnLFxuICAgICdbJzogJ++5hycsXG4gICAgJ1xcXFwnOiAn77y8JyxcbiAgICAnXSc6ICfvuYgnLFxuICAgICdeJzogJ++8vicsXG4gICAgJ18nOiAn77izJyxcbiAgICAnYCc6ICfvvYAnLFxuICAgICd7JzogJ++4tycsXG4gICAgJ3wnOiAn4oCVJyxcbiAgICAnfSc6ICfvuLgnLFxuICAgICd+JzogJ++9nicsXG4gICAgJ8KiJzogJ++/oCcsXG4gICAgJ8KjJzogJ++/oScsXG4gICAgJ8KlJzogJ++/pScsXG4gICAgJ8KmJzogJ++/pCcsXG4gICAgJ8KsJzogJ++/oicsXG4gICAgJ8KvJzogJ++/oycsXG4gICAgJ+KAkyc6ICfvuLInLFxuICAgICfigJQnOiAn77ixJyxcbiAgICAn4oCYJzogJ++5gycsXG4gICAgJ+KAmSc6ICfvuYQnLFxuICAgICfigJwnOiAn77mBJyxcbiAgICAn4oCdJzogJ++5gicsXG4gICAgJ+KApic6ICfvuJknLFxuICAgICfigKcnOiAn44O7JyxcbiAgICAn4oKpJzogJ++/picsXG4gICAgJ+OAgSc6ICfvuJEnLFxuICAgICfjgIInOiAn77iSJyxcbiAgICAn44CIJzogJ++4vycsXG4gICAgJ+OAiSc6ICfvuYAnLFxuICAgICfjgIonOiAn77i9JyxcbiAgICAn44CLJzogJ++4vicsXG4gICAgJ+OAjCc6ICfvuYEnLFxuICAgICfjgI0nOiAn77mCJyxcbiAgICAn44COJzogJ++5gycsXG4gICAgJ+OAjyc6ICfvuYQnLFxuICAgICfjgJAnOiAn77i7JyxcbiAgICAn44CRJzogJ++4vCcsXG4gICAgJ+OAlCc6ICfvuLknLFxuICAgICfjgJUnOiAn77i6JyxcbiAgICAn44CWJzogJ++4lycsXG4gICAgJ+OAlyc6ICfvuJgnLFxuICAgICfvvIEnOiAn77iVJyxcbiAgICAn77yIJzogJ++4tScsXG4gICAgJ++8iSc6ICfvuLYnLFxuICAgICfvvIwnOiAn77iQJyxcbiAgICAn77yNJzogJ++4sicsXG4gICAgJ++8jic6ICfjg7snLFxuICAgICfvvJonOiAn77iTJyxcbiAgICAn77ybJzogJ++4lCcsXG4gICAgJ++8nCc6ICfvuL8nLFxuICAgICfvvJ4nOiAn77mAJyxcbiAgICAn77yfJzogJ++4licsXG4gICAgJ++8uyc6ICfvuYcnLFxuICAgICfvvL0nOiAn77mIJyxcbiAgICAn77y/JzogJ++4sycsXG4gICAgJ++9myc6ICfvuLcnLFxuICAgICfvvZwnOiAn4oCVJyxcbiAgICAn772dJzogJ++4uCcsXG4gICAgJ++9nyc6ICfvuLUnLFxuICAgICfvvaAnOiAn77i2JyxcbiAgICAn772hJzogJ++4kicsXG4gICAgJ++9oic6ICfvuYEnLFxuICAgICfvvaMnOiAn77mCJ1xufTtcbiIsIi8qIVxyXG4gKiBUaGUgYnVmZmVyIG1vZHVsZSBmcm9tIG5vZGUuanMsIGZvciB0aGUgYnJvd3Nlci5cclxuICpcclxuICogQGF1dGhvciAgIEZlcm9zcyBBYm91a2hhZGlqZWggPGZlcm9zc0BmZXJvc3Mub3JnPiA8aHR0cDovL2Zlcm9zcy5vcmc+XHJcbiAqIEBsaWNlbnNlICBNSVRcclxuICovXHJcbi8qIGVzbGludC1kaXNhYmxlIG5vLXByb3RvICovXHJcblxyXG5jb25zdCBpZWVlNzU0ID0gcmVxdWlyZSgnLi9pZWVlNzU0Jyk7XHJcbmNvbnN0IGlzQXJyYXkgPSByZXF1aXJlKCcuL2lzQXJyYXknKTtcclxuXHJcbnZhciBJTlNQRUNUX01BWF9CWVRFUyA9IDUwO1xyXG5cclxuXHJcbi8qKlxyXG4gKiBJZiBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgOlxyXG4gKiAgID09PSB0cnVlICAgIFVzZSBVaW50OEFycmF5IGltcGxlbWVudGF0aW9uIChmYXN0ZXN0KVxyXG4gKiAgID09PSBmYWxzZSAgIFVzZSBPYmplY3QgaW1wbGVtZW50YXRpb24gKG1vc3QgY29tcGF0aWJsZSwgZXZlbiBJRTYpXHJcbiAqXHJcbiAqIEJyb3dzZXJzIHRoYXQgc3VwcG9ydCB0eXBlZCBhcnJheXMgYXJlIElFIDEwKywgRmlyZWZveCA0KywgQ2hyb21lIDcrLCBTYWZhcmkgNS4xKyxcclxuICogT3BlcmEgMTEuNissIGlPUyA0LjIrLlxyXG4gKlxyXG4gKiBEdWUgdG8gdmFyaW91cyBicm93c2VyIGJ1Z3MsIHNvbWV0aW1lcyB0aGUgT2JqZWN0IGltcGxlbWVudGF0aW9uIHdpbGwgYmUgdXNlZCBldmVuXHJcbiAqIHdoZW4gdGhlIGJyb3dzZXIgc3VwcG9ydHMgdHlwZWQgYXJyYXlzLlxyXG4gKlxyXG4gKiBOb3RlOlxyXG4gKlxyXG4gKiAgIC0gRmlyZWZveCA0LTI5IGxhY2tzIHN1cHBvcnQgZm9yIGFkZGluZyBuZXcgcHJvcGVydGllcyB0byBgVWludDhBcnJheWAgaW5zdGFuY2VzLFxyXG4gKiAgICAgU2VlOiBodHRwczovL2J1Z3ppbGxhLm1vemlsbGEub3JnL3Nob3dfYnVnLmNnaT9pZD02OTU0MzguXHJcbiAqXHJcbiAqICAgLSBDaHJvbWUgOS0xMCBpcyBtaXNzaW5nIHRoZSBgVHlwZWRBcnJheS5wcm90b3R5cGUuc3ViYXJyYXlgIGZ1bmN0aW9uLlxyXG4gKlxyXG4gKiAgIC0gSUUxMCBoYXMgYSBicm9rZW4gYFR5cGVkQXJyYXkucHJvdG90eXBlLnN1YmFycmF5YCBmdW5jdGlvbiB3aGljaCByZXR1cm5zIGFycmF5cyBvZlxyXG4gKiAgICAgaW5jb3JyZWN0IGxlbmd0aCBpbiBzb21lIHNpdHVhdGlvbnMuXHJcblxyXG4gKiBXZSBkZXRlY3QgdGhlc2UgYnVnZ3kgYnJvd3NlcnMgYW5kIHNldCBgQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRgIHRvIGBmYWxzZWAgc28gdGhleVxyXG4gKiBnZXQgdGhlIE9iamVjdCBpbXBsZW1lbnRhdGlvbiwgd2hpY2ggaXMgc2xvd2VyIGJ1dCBiZWhhdmVzIGNvcnJlY3RseS5cclxuICovXHJcbkJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUID0gdHJ1ZTtcclxuXHJcbi8qXHJcbiAqIEV4cG9ydCBrTWF4TGVuZ3RoIGFmdGVyIHR5cGVkIGFycmF5IHN1cHBvcnQgaXMgZGV0ZXJtaW5lZC5cclxuICovXHJcbnZhciBfa01heExlbmd0aCA9IGtNYXhMZW5ndGgoKVxyXG5mdW5jdGlvbiB0eXBlZEFycmF5U3VwcG9ydCAoKSB7XHJcbiAgICByZXR1cm4gdHJ1ZTtcclxufVxyXG5cclxuZnVuY3Rpb24ga01heExlbmd0aCAoKSB7XHJcbiAgICByZXR1cm4gQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlRcclxuICAgICAgICA/IDB4N2ZmZmZmZmZcclxuICAgICAgICA6IDB4M2ZmZmZmZmZcclxufVxyXG5cclxuZnVuY3Rpb24gY3JlYXRlQnVmZmVyICh0aGF0LCBsZW5ndGgpIHtcclxuICAgIGlmIChrTWF4TGVuZ3RoKCkgPCBsZW5ndGgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW52YWxpZCB0eXBlZCBhcnJheSBsZW5ndGgnKVxyXG4gICAgfVxyXG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XHJcbiAgICAgICAgLy8gUmV0dXJuIGFuIGF1Z21lbnRlZCBgVWludDhBcnJheWAgaW5zdGFuY2UsIGZvciBiZXN0IHBlcmZvcm1hbmNlXHJcbiAgICAgICAgdGhhdCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcclxuICAgICAgICB0aGF0Ll9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgLy8gRmFsbGJhY2s6IFJldHVybiBhbiBvYmplY3QgaW5zdGFuY2Ugb2YgdGhlIEJ1ZmZlciBjbGFzc1xyXG4gICAgICAgIGlmICh0aGF0ID09PSBudWxsKSB7XHJcbiAgICAgICAgICAgIHRoYXQgPSBuZXcgQnVmZmVyKGxlbmd0aClcclxuICAgICAgICB9XHJcbiAgICAgICAgdGhhdC5sZW5ndGggPSBsZW5ndGhcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhhdFxyXG59XHJcblxyXG4vKipcclxuICogVGhlIEJ1ZmZlciBjb25zdHJ1Y3RvciByZXR1cm5zIGluc3RhbmNlcyBvZiBgVWludDhBcnJheWAgdGhhdCBoYXZlIHRoZWlyXHJcbiAqIHByb3RvdHlwZSBjaGFuZ2VkIHRvIGBCdWZmZXIucHJvdG90eXBlYC4gRnVydGhlcm1vcmUsIGBCdWZmZXJgIGlzIGEgc3ViY2xhc3Mgb2ZcclxuICogYFVpbnQ4QXJyYXlgLCBzbyB0aGUgcmV0dXJuZWQgaW5zdGFuY2VzIHdpbGwgaGF2ZSBhbGwgdGhlIG5vZGUgYEJ1ZmZlcmAgbWV0aG9kc1xyXG4gKiBhbmQgdGhlIGBVaW50OEFycmF5YCBtZXRob2RzLiBTcXVhcmUgYnJhY2tldCBub3RhdGlvbiB3b3JrcyBhcyBleHBlY3RlZCAtLSBpdFxyXG4gKiByZXR1cm5zIGEgc2luZ2xlIG9jdGV0LlxyXG4gKlxyXG4gKiBUaGUgYFVpbnQ4QXJyYXlgIHByb3RvdHlwZSByZW1haW5zIHVubW9kaWZpZWQuXHJcbiAqL1xyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBmdW5jdGlvbiBCdWZmZXIgKGFyZywgZW5jb2RpbmdPck9mZnNldCwgbGVuZ3RoKSB7XHJcbiAgICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmICEodGhpcyBpbnN0YW5jZW9mIEJ1ZmZlcikpIHtcclxuICAgICAgICByZXR1cm4gbmV3IEJ1ZmZlcihhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcclxuICAgIH1cclxuXHJcbiAgICAvLyBDb21tb24gY2FzZS5cclxuICAgIGlmICh0eXBlb2YgYXJnID09PSAnbnVtYmVyJykge1xyXG4gICAgICAgIGlmICh0eXBlb2YgZW5jb2RpbmdPck9mZnNldCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAgICAgJ0lmIGVuY29kaW5nIGlzIHNwZWNpZmllZCB0aGVuIHRoZSBmaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nJ1xyXG4gICAgICAgICAgICApXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhbGxvY1Vuc2FmZSh0aGlzLCBhcmcpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gZnJvbSh0aGlzLCBhcmcsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aClcclxufVxyXG5cclxuQnVmZmVyLnBvb2xTaXplID0gODE5MiAvLyBub3QgdXNlZCBieSB0aGlzIGltcGxlbWVudGF0aW9uXHJcblxyXG4vLyBUT0RPOiBMZWdhY3ksIG5vdCBuZWVkZWQgYW55bW9yZS4gUmVtb3ZlIGluIG5leHQgbWFqb3IgdmVyc2lvbi5cclxuQnVmZmVyLl9hdWdtZW50ID0gZnVuY3Rpb24gKGFycikge1xyXG4gICAgYXJyLl9fcHJvdG9fXyA9IEJ1ZmZlci5wcm90b3R5cGVcclxuICAgIHJldHVybiBhcnJcclxufVxyXG5cclxuZnVuY3Rpb24gZnJvbSAodGhhdCwgdmFsdWUsIGVuY29kaW5nT3JPZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcInZhbHVlXCIgYXJndW1lbnQgbXVzdCBub3QgYmUgYSBudW1iZXInKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHZhbHVlIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpIHtcclxuICAgICAgICByZXR1cm4gZnJvbUFycmF5QnVmZmVyKHRoYXQsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKHR5cGVvZiB2YWx1ZSA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICByZXR1cm4gZnJvbVN0cmluZyh0aGF0LCB2YWx1ZSwgZW5jb2RpbmdPck9mZnNldClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZnJvbU9iamVjdCh0aGF0LCB2YWx1ZSlcclxufVxyXG5cclxuLyoqXHJcbiAqIEZ1bmN0aW9uYWxseSBlcXVpdmFsZW50IHRvIEJ1ZmZlcihhcmcsIGVuY29kaW5nKSBidXQgdGhyb3dzIGEgVHlwZUVycm9yXHJcbiAqIGlmIHZhbHVlIGlzIGEgbnVtYmVyLlxyXG4gKiBCdWZmZXIuZnJvbShzdHJbLCBlbmNvZGluZ10pXHJcbiAqIEJ1ZmZlci5mcm9tKGFycmF5KVxyXG4gKiBCdWZmZXIuZnJvbShidWZmZXIpXHJcbiAqIEJ1ZmZlci5mcm9tKGFycmF5QnVmZmVyWywgYnl0ZU9mZnNldFssIGxlbmd0aF1dKVxyXG4gKiovXHJcbkJ1ZmZlci5mcm9tID0gZnVuY3Rpb24gKHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpIHtcclxuICAgIHJldHVybiBmcm9tKG51bGwsIHZhbHVlLCBlbmNvZGluZ09yT2Zmc2V0LCBsZW5ndGgpXHJcbn1cclxuXHJcbmlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xyXG4gICAgQnVmZmVyLnByb3RvdHlwZS5fX3Byb3RvX18gPSBVaW50OEFycmF5LnByb3RvdHlwZVxyXG4gICAgQnVmZmVyLl9fcHJvdG9fXyA9IFVpbnQ4QXJyYXlcclxuICAgIGlmICh0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wuc3BlY2llcyAmJlxyXG4gICAgICAgIEJ1ZmZlcltTeW1ib2wuc3BlY2llc10gPT09IEJ1ZmZlcikge1xyXG4gICAgICAgIC8vIEZpeCBzdWJhcnJheSgpIGluIEVTMjAxNi4gU2VlOiBodHRwczovL2dpdGh1Yi5jb20vZmVyb3NzL2J1ZmZlci9wdWxsLzk3XHJcbiAgICAgICAgLy8gT2JqZWN0LmRlZmluZVByb3BlcnR5KEJ1ZmZlciwgU3ltYm9sLnNwZWNpZXMsIHtcclxuICAgICAgICAvLyAgIHZhbHVlOiBudWxsLFxyXG4gICAgICAgIC8vICAgY29uZmlndXJhYmxlOiB0cnVlXHJcbiAgICAgICAgLy8gfSlcclxuICAgIH1cclxufVxyXG5cclxuZnVuY3Rpb24gYXNzZXJ0U2l6ZSAoc2l6ZSkge1xyXG4gICAgaWYgKHR5cGVvZiBzaXplICE9PSAnbnVtYmVyJykge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wic2l6ZVwiIGFyZ3VtZW50IG11c3QgYmUgYSBudW1iZXInKVxyXG4gICAgfSBlbHNlIGlmIChzaXplIDwgMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcInNpemVcIiBhcmd1bWVudCBtdXN0IG5vdCBiZSBuZWdhdGl2ZScpXHJcbiAgICB9XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFsbG9jICh0aGF0LCBzaXplLCBmaWxsLCBlbmNvZGluZykge1xyXG4gICAgYXNzZXJ0U2l6ZShzaXplKVxyXG4gICAgaWYgKHNpemUgPD0gMCkge1xyXG4gICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSlcclxuICAgIH1cclxuICAgIGlmIChmaWxsICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAvLyBPbmx5IHBheSBhdHRlbnRpb24gdG8gZW5jb2RpbmcgaWYgaXQncyBhIHN0cmluZy4gVGhpc1xyXG4gICAgICAgIC8vIHByZXZlbnRzIGFjY2lkZW50YWxseSBzZW5kaW5nIGluIGEgbnVtYmVyIHRoYXQgd291bGRcclxuICAgICAgICAvLyBiZSBpbnRlcnByZXR0ZWQgYXMgYSBzdGFydCBvZmZzZXQuXHJcbiAgICAgICAgcmV0dXJuIHR5cGVvZiBlbmNvZGluZyA9PT0gJ3N0cmluZydcclxuICAgICAgICAgICAgPyBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsLCBlbmNvZGluZylcclxuICAgICAgICAgICAgOiBjcmVhdGVCdWZmZXIodGhhdCwgc2l6ZSkuZmlsbChmaWxsKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGNyZWF0ZUJ1ZmZlcih0aGF0LCBzaXplKVxyXG59XHJcblxyXG4vKipcclxuICogQ3JlYXRlcyBhIG5ldyBmaWxsZWQgQnVmZmVyIGluc3RhbmNlLlxyXG4gKiBhbGxvYyhzaXplWywgZmlsbFssIGVuY29kaW5nXV0pXHJcbiAqKi9cclxuQnVmZmVyLmFsbG9jID0gZnVuY3Rpb24gKHNpemUsIGZpbGwsIGVuY29kaW5nKSB7XHJcbiAgICByZXR1cm4gYWxsb2MobnVsbCwgc2l6ZSwgZmlsbCwgZW5jb2RpbmcpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFsbG9jVW5zYWZlICh0aGF0LCBzaXplKSB7XHJcbiAgICBhc3NlcnRTaXplKHNpemUpXHJcbiAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIHNpemUgPCAwID8gMCA6IGNoZWNrZWQoc2l6ZSkgfCAwKVxyXG4gICAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2l6ZTsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoYXRbaV0gPSAwXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoYXRcclxufVxyXG5cclxuLyoqXHJcbiAqIEVxdWl2YWxlbnQgdG8gQnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXHJcbiAqICovXHJcbkJ1ZmZlci5hbGxvY1Vuc2FmZSA9IGZ1bmN0aW9uIChzaXplKSB7XHJcbiAgICByZXR1cm4gYWxsb2NVbnNhZmUobnVsbCwgc2l6ZSlcclxufVxyXG4vKipcclxuICogRXF1aXZhbGVudCB0byBTbG93QnVmZmVyKG51bSksIGJ5IGRlZmF1bHQgY3JlYXRlcyBhIG5vbi16ZXJvLWZpbGxlZCBCdWZmZXIgaW5zdGFuY2UuXHJcbiAqL1xyXG5CdWZmZXIuYWxsb2NVbnNhZmVTbG93ID0gZnVuY3Rpb24gKHNpemUpIHtcclxuICAgIHJldHVybiBhbGxvY1Vuc2FmZShudWxsLCBzaXplKVxyXG59XHJcblxyXG5mdW5jdGlvbiBmcm9tU3RyaW5nICh0aGF0LCBzdHJpbmcsIGVuY29kaW5nKSB7XHJcbiAgICBpZiAodHlwZW9mIGVuY29kaW5nICE9PSAnc3RyaW5nJyB8fCBlbmNvZGluZyA9PT0gJycpIHtcclxuICAgICAgICBlbmNvZGluZyA9ICd1dGY4J1xyXG4gICAgfVxyXG5cclxuICAgIGlmICghQnVmZmVyLmlzRW5jb2RpbmcoZW5jb2RpbmcpKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJlbmNvZGluZ1wiIG11c3QgYmUgYSB2YWxpZCBzdHJpbmcgZW5jb2RpbmcnKVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBsZW5ndGggPSBieXRlTGVuZ3RoKHN0cmluZywgZW5jb2RpbmcpIHwgMFxyXG4gICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXHJcblxyXG4gICAgdmFyIGFjdHVhbCA9IHRoYXQud3JpdGUoc3RyaW5nLCBlbmNvZGluZylcclxuXHJcbiAgICBpZiAoYWN0dWFsICE9PSBsZW5ndGgpIHtcclxuICAgICAgICAvLyBXcml0aW5nIGEgaGV4IHN0cmluZywgZm9yIGV4YW1wbGUsIHRoYXQgY29udGFpbnMgaW52YWxpZCBjaGFyYWN0ZXJzIHdpbGxcclxuICAgICAgICAvLyBjYXVzZSBldmVyeXRoaW5nIGFmdGVyIHRoZSBmaXJzdCBpbnZhbGlkIGNoYXJhY3RlciB0byBiZSBpZ25vcmVkLiAoZS5nLlxyXG4gICAgICAgIC8vICdhYnh4Y2QnIHdpbGwgYmUgdHJlYXRlZCBhcyAnYWInKVxyXG4gICAgICAgIHRoYXQgPSB0aGF0LnNsaWNlKDAsIGFjdHVhbClcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gdGhhdFxyXG59XHJcblxyXG5mdW5jdGlvbiBmcm9tQXJyYXlMaWtlICh0aGF0LCBhcnJheSkge1xyXG4gICAgdmFyIGxlbmd0aCA9IGFycmF5Lmxlbmd0aCA8IDAgPyAwIDogY2hlY2tlZChhcnJheS5sZW5ndGgpIHwgMFxyXG4gICAgdGhhdCA9IGNyZWF0ZUJ1ZmZlcih0aGF0LCBsZW5ndGgpXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbmd0aDsgaSArPSAxKSB7XHJcbiAgICAgICAgdGhhdFtpXSA9IGFycmF5W2ldICYgMjU1XHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhhdFxyXG59XHJcblxyXG5mdW5jdGlvbiBmcm9tQXJyYXlCdWZmZXIgKHRoYXQsIGFycmF5LCBieXRlT2Zmc2V0LCBsZW5ndGgpIHtcclxuICAgIGFycmF5LmJ5dGVMZW5ndGggLy8gdGhpcyB0aHJvd3MgaWYgYGFycmF5YCBpcyBub3QgYSB2YWxpZCBBcnJheUJ1ZmZlclxyXG5cclxuICAgIGlmIChieXRlT2Zmc2V0IDwgMCB8fCBhcnJheS5ieXRlTGVuZ3RoIDwgYnl0ZU9mZnNldCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdvZmZzZXRcXCcgaXMgb3V0IG9mIGJvdW5kcycpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGFycmF5LmJ5dGVMZW5ndGggPCBieXRlT2Zmc2V0ICsgKGxlbmd0aCB8fCAwKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdcXCdsZW5ndGhcXCcgaXMgb3V0IG9mIGJvdW5kcycpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGJ5dGVPZmZzZXQgPT09IHVuZGVmaW5lZCAmJiBsZW5ndGggPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGFycmF5ID0gbmV3IFVpbnQ4QXJyYXkoYXJyYXkpXHJcbiAgICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldClcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgYXJyYXkgPSBuZXcgVWludDhBcnJheShhcnJheSwgYnl0ZU9mZnNldCwgbGVuZ3RoKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xyXG4gICAgICAgIC8vIFJldHVybiBhbiBhdWdtZW50ZWQgYFVpbnQ4QXJyYXlgIGluc3RhbmNlLCBmb3IgYmVzdCBwZXJmb3JtYW5jZVxyXG4gICAgICAgIHRoYXQgPSBhcnJheVxyXG4gICAgICAgIHRoYXQuX19wcm90b19fID0gQnVmZmVyLnByb3RvdHlwZVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICAvLyBGYWxsYmFjazogUmV0dXJuIGFuIG9iamVjdCBpbnN0YW5jZSBvZiB0aGUgQnVmZmVyIGNsYXNzXHJcbiAgICAgICAgdGhhdCA9IGZyb21BcnJheUxpa2UodGhhdCwgYXJyYXkpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhhdFxyXG59XHJcblxyXG5mdW5jdGlvbiBmcm9tT2JqZWN0ICh0aGF0LCBvYmopIHtcclxuICAgIGlmIChpbnRlcm5hbElzQnVmZmVyKG9iaikpIHtcclxuICAgICAgICB2YXIgbGVuID0gY2hlY2tlZChvYmoubGVuZ3RoKSB8IDBcclxuICAgICAgICB0aGF0ID0gY3JlYXRlQnVmZmVyKHRoYXQsIGxlbilcclxuXHJcbiAgICAgICAgaWYgKHRoYXQubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgICAgIHJldHVybiB0aGF0XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBvYmouY29weSh0aGF0LCAwLCAwLCBsZW4pXHJcbiAgICAgICAgcmV0dXJuIHRoYXRcclxuICAgIH1cclxuXHJcbiAgICBpZiAob2JqKSB7XHJcbiAgICAgICAgaWYgKCh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmXHJcbiAgICAgICAgICAgIG9iai5idWZmZXIgaW5zdGFuY2VvZiBBcnJheUJ1ZmZlcikgfHwgJ2xlbmd0aCcgaW4gb2JqKSB7XHJcbiAgICAgICAgICAgIGlmICh0eXBlb2Ygb2JqLmxlbmd0aCAhPT0gJ251bWJlcicgfHwgaXNuYW4ob2JqLmxlbmd0aCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBjcmVhdGVCdWZmZXIodGhhdCwgMClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gZnJvbUFycmF5TGlrZSh0aGF0LCBvYmopXHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBpZiAob2JqLnR5cGUgPT09ICdCdWZmZXInICYmIGlzQXJyYXkob2JqLmRhdGEpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmcm9tQXJyYXlMaWtlKHRoYXQsIG9iai5kYXRhKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdGaXJzdCBhcmd1bWVudCBtdXN0IGJlIGEgc3RyaW5nLCBCdWZmZXIsIEFycmF5QnVmZmVyLCBBcnJheSwgb3IgYXJyYXktbGlrZSBvYmplY3QuJylcclxufVxyXG5cclxuZnVuY3Rpb24gY2hlY2tlZCAobGVuZ3RoKSB7XHJcbiAgICAvLyBOb3RlOiBjYW5ub3QgdXNlIGBsZW5ndGggPCBrTWF4TGVuZ3RoKClgIGhlcmUgYmVjYXVzZSB0aGF0IGZhaWxzIHdoZW5cclxuICAgIC8vIGxlbmd0aCBpcyBOYU4gKHdoaWNoIGlzIG90aGVyd2lzZSBjb2VyY2VkIHRvIHplcm8uKVxyXG4gICAgaWYgKGxlbmd0aCA+PSBrTWF4TGVuZ3RoKCkpIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byBhbGxvY2F0ZSBCdWZmZXIgbGFyZ2VyIHRoYW4gbWF4aW11bSAnICtcclxuICAgICAgICAgICAgJ3NpemU6IDB4JyArIGtNYXhMZW5ndGgoKS50b1N0cmluZygxNikgKyAnIGJ5dGVzJylcclxuICAgIH1cclxuICAgIHJldHVybiBsZW5ndGggfCAwXHJcbn1cclxuXHJcbi8vIGV4cG9ydCBmdW5jdGlvbiBTbG93QnVmZmVyIChsZW5ndGgpIHtcclxuLy8gICBpZiAoK2xlbmd0aCAhPSBsZW5ndGgpIHsgLy8gZXNsaW50LWRpc2FibGUtbGluZSBlcWVxZXFcclxuLy8gICAgIGxlbmd0aCA9IDBcclxuLy8gICB9XHJcbi8vICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygrbGVuZ3RoKVxyXG4vLyB9XHJcbkJ1ZmZlci5pc0J1ZmZlciA9IGlzQnVmZmVyO1xyXG5mdW5jdGlvbiBpbnRlcm5hbElzQnVmZmVyIChiKSB7XHJcbiAgICByZXR1cm4gISEoYiAhPSBudWxsICYmIGIuX2lzQnVmZmVyKVxyXG59XHJcblxyXG5CdWZmZXIuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKGEsIGIpIHtcclxuICAgIGlmICghaW50ZXJuYWxJc0J1ZmZlcihhKSB8fCAhaW50ZXJuYWxJc0J1ZmZlcihiKSkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50cyBtdXN0IGJlIEJ1ZmZlcnMnKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChhID09PSBiKSByZXR1cm4gMFxyXG5cclxuICAgIHZhciB4ID0gYS5sZW5ndGhcclxuICAgIHZhciB5ID0gYi5sZW5ndGhcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMCwgbGVuID0gTWF0aC5taW4oeCwgeSk7IGkgPCBsZW47ICsraSkge1xyXG4gICAgICAgIGlmIChhW2ldICE9PSBiW2ldKSB7XHJcbiAgICAgICAgICAgIHggPSBhW2ldXHJcbiAgICAgICAgICAgIHkgPSBiW2ldXHJcbiAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh4IDwgeSkgcmV0dXJuIC0xXHJcbiAgICBpZiAoeSA8IHgpIHJldHVybiAxXHJcbiAgICByZXR1cm4gMFxyXG59XHJcblxyXG5CdWZmZXIuaXNFbmNvZGluZyA9IGZ1bmN0aW9uIGlzRW5jb2RpbmcgKGVuY29kaW5nKSB7XHJcbiAgICBzd2l0Y2ggKFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKSkge1xyXG4gICAgICAgIGNhc2UgJ2hleCc6XHJcbiAgICAgICAgY2FzZSAndXRmOCc6XHJcbiAgICAgICAgY2FzZSAndXRmLTgnOlxyXG4gICAgICAgIGNhc2UgJ2FzY2lpJzpcclxuICAgICAgICBjYXNlICdsYXRpbjEnOlxyXG4gICAgICAgIGNhc2UgJ2JpbmFyeSc6XHJcbiAgICAgICAgY2FzZSAnYmFzZTY0JzpcclxuICAgICAgICBjYXNlICd1Y3MyJzpcclxuICAgICAgICBjYXNlICd1Y3MtMic6XHJcbiAgICAgICAgY2FzZSAndXRmMTZsZSc6XHJcbiAgICAgICAgY2FzZSAndXRmLTE2bGUnOlxyXG4gICAgICAgICAgICByZXR1cm4gdHJ1ZVxyXG4gICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZVxyXG4gICAgfVxyXG59XHJcblxyXG5CdWZmZXIuY29uY2F0ID0gZnVuY3Rpb24gY29uY2F0IChsaXN0LCBsZW5ndGgpIHtcclxuICAgIGlmICghaXNBcnJheShsaXN0KSkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ1wibGlzdFwiIGFyZ3VtZW50IG11c3QgYmUgYW4gQXJyYXkgb2YgQnVmZmVycycpXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKGxpc3QubGVuZ3RoID09PSAwKSB7XHJcbiAgICAgICAgcmV0dXJuIEJ1ZmZlci5hbGxvYygwKVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBpXHJcbiAgICBpZiAobGVuZ3RoID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBsZW5ndGggPSAwXHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxpc3QubGVuZ3RoOyArK2kpIHtcclxuICAgICAgICAgICAgbGVuZ3RoICs9IGxpc3RbaV0ubGVuZ3RoXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBidWZmZXIgPSBCdWZmZXIuYWxsb2NVbnNhZmUobGVuZ3RoKVxyXG4gICAgdmFyIHBvcyA9IDBcclxuICAgIGZvciAoaSA9IDA7IGkgPCBsaXN0Lmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgdmFyIGJ1ZiA9IGxpc3RbaV1cclxuICAgICAgICBpZiAoIWludGVybmFsSXNCdWZmZXIoYnVmKSkge1xyXG4gICAgICAgICAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCdcImxpc3RcIiBhcmd1bWVudCBtdXN0IGJlIGFuIEFycmF5IG9mIEJ1ZmZlcnMnKVxyXG4gICAgICAgIH1cclxuICAgICAgICBidWYuY29weShidWZmZXIsIHBvcylcclxuICAgICAgICBwb3MgKz0gYnVmLmxlbmd0aFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJ1ZmZlclxyXG59XHJcblxyXG5mdW5jdGlvbiBieXRlTGVuZ3RoIChzdHJpbmcsIGVuY29kaW5nKSB7XHJcbiAgICBpZiAoaW50ZXJuYWxJc0J1ZmZlcihzdHJpbmcpKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0cmluZy5sZW5ndGhcclxuICAgIH1cclxuICAgIGlmICh0eXBlb2YgQXJyYXlCdWZmZXIgIT09ICd1bmRlZmluZWQnICYmIHR5cGVvZiBBcnJheUJ1ZmZlci5pc1ZpZXcgPT09ICdmdW5jdGlvbicgJiZcclxuICAgICAgICAoQXJyYXlCdWZmZXIuaXNWaWV3KHN0cmluZykgfHwgc3RyaW5nIGluc3RhbmNlb2YgQXJyYXlCdWZmZXIpKSB7XHJcbiAgICAgICAgcmV0dXJuIHN0cmluZy5ieXRlTGVuZ3RoXHJcbiAgICB9XHJcbiAgICBpZiAodHlwZW9mIHN0cmluZyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICBzdHJpbmcgPSAnJyArIHN0cmluZ1xyXG4gICAgfVxyXG5cclxuICAgIHZhciBsZW4gPSBzdHJpbmcubGVuZ3RoXHJcbiAgICBpZiAobGVuID09PSAwKSByZXR1cm4gMFxyXG5cclxuICAgIC8vIFVzZSBhIGZvciBsb29wIHRvIGF2b2lkIHJlY3Vyc2lvblxyXG4gICAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcclxuICAgIGZvciAoOzspIHtcclxuICAgICAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2FzY2lpJzpcclxuICAgICAgICAgICAgY2FzZSAnbGF0aW4xJzpcclxuICAgICAgICAgICAgY2FzZSAnYmluYXJ5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBsZW5cclxuICAgICAgICAgICAgY2FzZSAndXRmOCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3V0Zi04JzpcclxuICAgICAgICAgICAgY2FzZSB1bmRlZmluZWQ6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXRmOFRvQnl0ZXMoc3RyaW5nKS5sZW5ndGhcclxuICAgICAgICAgICAgY2FzZSAndWNzMic6XHJcbiAgICAgICAgICAgIGNhc2UgJ3Vjcy0yJzpcclxuICAgICAgICAgICAgY2FzZSAndXRmMTZsZSc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3V0Zi0xNmxlJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBsZW4gKiAyXHJcbiAgICAgICAgICAgIGNhc2UgJ2hleCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gbGVuID4+PiAxXHJcbiAgICAgICAgICAgIGNhc2UgJ2Jhc2U2NCc6XHJcbiAgICAgICAgICAgIGRlZmF1bHQ6XHJcbiAgICAgICAgICAgICAgICBpZiAobG93ZXJlZENhc2UpIHJldHVybiB1dGY4VG9CeXRlcyhzdHJpbmcpLmxlbmd0aCAvLyBhc3N1bWUgdXRmOFxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSAoJycgKyBlbmNvZGluZykudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcbkJ1ZmZlci5ieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aFxyXG5cclxuZnVuY3Rpb24gc2xvd1RvU3RyaW5nIChlbmNvZGluZywgc3RhcnQsIGVuZCkge1xyXG4gICAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcclxuXHJcbiAgICAvLyBObyBuZWVkIHRvIHZlcmlmeSB0aGF0IFwidGhpcy5sZW5ndGggPD0gTUFYX1VJTlQzMlwiIHNpbmNlIGl0J3MgYSByZWFkLW9ubHlcclxuICAgIC8vIHByb3BlcnR5IG9mIGEgdHlwZWQgYXJyYXkuXHJcblxyXG4gICAgLy8gVGhpcyBiZWhhdmVzIG5laXRoZXIgbGlrZSBTdHJpbmcgbm9yIFVpbnQ4QXJyYXkgaW4gdGhhdCB3ZSBzZXQgc3RhcnQvZW5kXHJcbiAgICAvLyB0byB0aGVpciB1cHBlci9sb3dlciBib3VuZHMgaWYgdGhlIHZhbHVlIHBhc3NlZCBpcyBvdXQgb2YgcmFuZ2UuXHJcbiAgICAvLyB1bmRlZmluZWQgaXMgaGFuZGxlZCBzcGVjaWFsbHkgYXMgcGVyIEVDTUEtMjYyIDZ0aCBFZGl0aW9uLFxyXG4gICAgLy8gU2VjdGlvbiAxMy4zLjMuNyBSdW50aW1lIFNlbWFudGljczogS2V5ZWRCaW5kaW5nSW5pdGlhbGl6YXRpb24uXHJcbiAgICBpZiAoc3RhcnQgPT09IHVuZGVmaW5lZCB8fCBzdGFydCA8IDApIHtcclxuICAgICAgICBzdGFydCA9IDBcclxuICAgIH1cclxuICAgIC8vIFJldHVybiBlYXJseSBpZiBzdGFydCA+IHRoaXMubGVuZ3RoLiBEb25lIGhlcmUgdG8gcHJldmVudCBwb3RlbnRpYWwgdWludDMyXHJcbiAgICAvLyBjb2VyY2lvbiBmYWlsIGJlbG93LlxyXG4gICAgaWYgKHN0YXJ0ID4gdGhpcy5sZW5ndGgpIHtcclxuICAgICAgICByZXR1cm4gJydcclxuICAgIH1cclxuXHJcbiAgICBpZiAoZW5kID09PSB1bmRlZmluZWQgfHwgZW5kID4gdGhpcy5sZW5ndGgpIHtcclxuICAgICAgICBlbmQgPSB0aGlzLmxlbmd0aFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChlbmQgPD0gMCkge1xyXG4gICAgICAgIHJldHVybiAnJ1xyXG4gICAgfVxyXG5cclxuICAgIC8vIEZvcmNlIGNvZXJzaW9uIHRvIHVpbnQzMi4gVGhpcyB3aWxsIGFsc28gY29lcmNlIGZhbHNleS9OYU4gdmFsdWVzIHRvIDAuXHJcbiAgICBlbmQgPj4+PSAwXHJcbiAgICBzdGFydCA+Pj49IDBcclxuXHJcbiAgICBpZiAoZW5kIDw9IHN0YXJ0KSB7XHJcbiAgICAgICAgcmV0dXJuICcnXHJcbiAgICB9XHJcblxyXG4gICAgaWYgKCFlbmNvZGluZykgZW5jb2RpbmcgPSAndXRmOCdcclxuXHJcbiAgICB3aGlsZSAodHJ1ZSkge1xyXG4gICAgICAgIHN3aXRjaCAoZW5jb2RpbmcpIHtcclxuICAgICAgICAgICAgY2FzZSAnaGV4JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBoZXhTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxyXG5cclxuICAgICAgICAgICAgY2FzZSAndXRmOCc6XHJcbiAgICAgICAgICAgIGNhc2UgJ3V0Zi04JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiB1dGY4U2xpY2UodGhpcywgc3RhcnQsIGVuZClcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ2FzY2lpJzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBhc2NpaVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXHJcblxyXG4gICAgICAgICAgICBjYXNlICdsYXRpbjEnOlxyXG4gICAgICAgICAgICBjYXNlICdiaW5hcnknOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGxhdGluMVNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXHJcblxyXG4gICAgICAgICAgICBjYXNlICdiYXNlNjQnOlxyXG4gICAgICAgICAgICAgICAgLy8gcmV0dXJuIGJhc2U2NFNsaWNlKHRoaXMsIHN0YXJ0LCBlbmQpXHJcblxyXG4gICAgICAgICAgICBjYXNlICd1Y3MyJzpcclxuICAgICAgICAgICAgY2FzZSAndWNzLTInOlxyXG4gICAgICAgICAgICBjYXNlICd1dGYxNmxlJzpcclxuICAgICAgICAgICAgY2FzZSAndXRmLTE2bGUnOlxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHV0ZjE2bGVTbGljZSh0aGlzLCBzdGFydCwgZW5kKVxyXG5cclxuICAgICAgICAgICAgZGVmYXVsdDpcclxuICAgICAgICAgICAgICAgIGlmIChsb3dlcmVkQ2FzZSkgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxyXG4gICAgICAgICAgICAgICAgZW5jb2RpbmcgPSAoZW5jb2RpbmcgKyAnJykudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgICAgICAgICAgbG93ZXJlZENhc2UgPSB0cnVlXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG59XHJcblxyXG4vLyBUaGUgcHJvcGVydHkgaXMgdXNlZCBieSBgQnVmZmVyLmlzQnVmZmVyYCBhbmQgYGlzLWJ1ZmZlcmAgKGluIFNhZmFyaSA1LTcpIHRvIGRldGVjdFxyXG4vLyBCdWZmZXIgaW5zdGFuY2VzLlxyXG5CdWZmZXIucHJvdG90eXBlLl9pc0J1ZmZlciA9IHRydWVcclxuXHJcbmZ1bmN0aW9uIHN3YXAgKGIsIG4sIG0pIHtcclxuICAgIHZhciBpID0gYltuXVxyXG4gICAgYltuXSA9IGJbbV1cclxuICAgIGJbbV0gPSBpXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUuc3dhcDE2ID0gZnVuY3Rpb24gc3dhcDE2ICgpIHtcclxuICAgIHZhciBsZW4gPSB0aGlzLmxlbmd0aFxyXG4gICAgaWYgKGxlbiAlIDIgIT09IDApIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQnVmZmVyIHNpemUgbXVzdCBiZSBhIG11bHRpcGxlIG9mIDE2LWJpdHMnKVxyXG4gICAgfVxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW47IGkgKz0gMikge1xyXG4gICAgICAgIHN3YXAodGhpcywgaSwgaSArIDEpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gdGhpc1xyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLnN3YXAzMiA9IGZ1bmN0aW9uIHN3YXAzMiAoKSB7XHJcbiAgICB2YXIgbGVuID0gdGhpcy5sZW5ndGhcclxuICAgIGlmIChsZW4gJSA0ICE9PSAwKSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0J1ZmZlciBzaXplIG11c3QgYmUgYSBtdWx0aXBsZSBvZiAzMi1iaXRzJylcclxuICAgIH1cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuOyBpICs9IDQpIHtcclxuICAgICAgICBzd2FwKHRoaXMsIGksIGkgKyAzKVxyXG4gICAgICAgIHN3YXAodGhpcywgaSArIDEsIGkgKyAyKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHRoaXNcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS5zd2FwNjQgPSBmdW5jdGlvbiBzd2FwNjQgKCkge1xyXG4gICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXHJcbiAgICBpZiAobGVuICUgOCAhPT0gMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdCdWZmZXIgc2l6ZSBtdXN0IGJlIGEgbXVsdGlwbGUgb2YgNjQtYml0cycpXHJcbiAgICB9XHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgaSArPSA4KSB7XHJcbiAgICAgICAgc3dhcCh0aGlzLCBpLCBpICsgNylcclxuICAgICAgICBzd2FwKHRoaXMsIGkgKyAxLCBpICsgNilcclxuICAgICAgICBzd2FwKHRoaXMsIGkgKyAyLCBpICsgNSlcclxuICAgICAgICBzd2FwKHRoaXMsIGkgKyAzLCBpICsgNClcclxuICAgIH1cclxuICAgIHJldHVybiB0aGlzXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUudG9TdHJpbmcgPSBmdW5jdGlvbiB0b1N0cmluZyAoKSB7XHJcbiAgICB2YXIgbGVuZ3RoID0gdGhpcy5sZW5ndGggfCAwXHJcbiAgICBpZiAobGVuZ3RoID09PSAwKSByZXR1cm4gJydcclxuICAgIGlmIChhcmd1bWVudHMubGVuZ3RoID09PSAwKSByZXR1cm4gdXRmOFNsaWNlKHRoaXMsIDAsIGxlbmd0aClcclxuICAgIHJldHVybiBzbG93VG9TdHJpbmcuYXBwbHkodGhpcywgYXJndW1lbnRzKVxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLmVxdWFscyA9IGZ1bmN0aW9uIGVxdWFscyAoYikge1xyXG4gICAgaWYgKCFpbnRlcm5hbElzQnVmZmVyKGIpKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdBcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyJylcclxuICAgIGlmICh0aGlzID09PSBiKSByZXR1cm4gdHJ1ZVxyXG4gICAgcmV0dXJuIEJ1ZmZlci5jb21wYXJlKHRoaXMsIGIpID09PSAwXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUuaW5zcGVjdCA9IGZ1bmN0aW9uIGluc3BlY3QgKCkge1xyXG4gICAgdmFyIHN0ciA9ICcnXHJcbiAgICB2YXIgbWF4ID0gSU5TUEVDVF9NQVhfQllURVNcclxuICAgIGlmICh0aGlzLmxlbmd0aCA+IDApIHtcclxuICAgICAgICBzdHIgPSB0aGlzLnRvU3RyaW5nKCdoZXgnLCAwLCBtYXgpLm1hdGNoKC8uezJ9L2cpLmpvaW4oJyAnKVxyXG4gICAgICAgIGlmICh0aGlzLmxlbmd0aCA+IG1heCkgc3RyICs9ICcgLi4uICdcclxuICAgIH1cclxuICAgIHJldHVybiAnPEJ1ZmZlciAnICsgc3RyICsgJz4nXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUuY29tcGFyZSA9IGZ1bmN0aW9uIGNvbXBhcmUgKHRhcmdldCwgc3RhcnQsIGVuZCwgdGhpc1N0YXJ0LCB0aGlzRW5kKSB7XHJcbiAgICBpZiAoIWludGVybmFsSXNCdWZmZXIodGFyZ2V0KSkge1xyXG4gICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoJ0FyZ3VtZW50IG11c3QgYmUgYSBCdWZmZXInKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChzdGFydCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgc3RhcnQgPSAwXHJcbiAgICB9XHJcbiAgICBpZiAoZW5kID09PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBlbmQgPSB0YXJnZXQgPyB0YXJnZXQubGVuZ3RoIDogMFxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNTdGFydCA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgdGhpc1N0YXJ0ID0gMFxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNFbmQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIHRoaXNFbmQgPSB0aGlzLmxlbmd0aFxyXG4gICAgfVxyXG5cclxuICAgIGlmIChzdGFydCA8IDAgfHwgZW5kID4gdGFyZ2V0Lmxlbmd0aCB8fCB0aGlzU3RhcnQgPCAwIHx8IHRoaXNFbmQgPiB0aGlzLmxlbmd0aCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdvdXQgb2YgcmFuZ2UgaW5kZXgnKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICh0aGlzU3RhcnQgPj0gdGhpc0VuZCAmJiBzdGFydCA+PSBlbmQpIHtcclxuICAgICAgICByZXR1cm4gMFxyXG4gICAgfVxyXG4gICAgaWYgKHRoaXNTdGFydCA+PSB0aGlzRW5kKSB7XHJcbiAgICAgICAgcmV0dXJuIC0xXHJcbiAgICB9XHJcbiAgICBpZiAoc3RhcnQgPj0gZW5kKSB7XHJcbiAgICAgICAgcmV0dXJuIDFcclxuICAgIH1cclxuXHJcbiAgICBzdGFydCA+Pj49IDBcclxuICAgIGVuZCA+Pj49IDBcclxuICAgIHRoaXNTdGFydCA+Pj49IDBcclxuICAgIHRoaXNFbmQgPj4+PSAwXHJcblxyXG4gICAgaWYgKHRoaXMgPT09IHRhcmdldCkgcmV0dXJuIDBcclxuXHJcbiAgICB2YXIgeCA9IHRoaXNFbmQgLSB0aGlzU3RhcnRcclxuICAgIHZhciB5ID0gZW5kIC0gc3RhcnRcclxuICAgIHZhciBsZW4gPSBNYXRoLm1pbih4LCB5KVxyXG5cclxuICAgIHZhciB0aGlzQ29weSA9IHRoaXMuc2xpY2UodGhpc1N0YXJ0LCB0aGlzRW5kKVxyXG4gICAgdmFyIHRhcmdldENvcHkgPSB0YXJnZXQuc2xpY2Uoc3RhcnQsIGVuZClcclxuXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgICAgaWYgKHRoaXNDb3B5W2ldICE9PSB0YXJnZXRDb3B5W2ldKSB7XHJcbiAgICAgICAgICAgIHggPSB0aGlzQ29weVtpXVxyXG4gICAgICAgICAgICB5ID0gdGFyZ2V0Q29weVtpXVxyXG4gICAgICAgICAgICBicmVha1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBpZiAoeCA8IHkpIHJldHVybiAtMVxyXG4gICAgaWYgKHkgPCB4KSByZXR1cm4gMVxyXG4gICAgcmV0dXJuIDBcclxufVxyXG5cclxuLy8gRmluZHMgZWl0aGVyIHRoZSBmaXJzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPj0gYGJ5dGVPZmZzZXRgLFxyXG4vLyBPUiB0aGUgbGFzdCBpbmRleCBvZiBgdmFsYCBpbiBgYnVmZmVyYCBhdCBvZmZzZXQgPD0gYGJ5dGVPZmZzZXRgLlxyXG4vL1xyXG4vLyBBcmd1bWVudHM6XHJcbi8vIC0gYnVmZmVyIC0gYSBCdWZmZXIgdG8gc2VhcmNoXHJcbi8vIC0gdmFsIC0gYSBzdHJpbmcsIEJ1ZmZlciwgb3IgbnVtYmVyXHJcbi8vIC0gYnl0ZU9mZnNldCAtIGFuIGluZGV4IGludG8gYGJ1ZmZlcmA7IHdpbGwgYmUgY2xhbXBlZCB0byBhbiBpbnQzMlxyXG4vLyAtIGVuY29kaW5nIC0gYW4gb3B0aW9uYWwgZW5jb2RpbmcsIHJlbGV2YW50IGlzIHZhbCBpcyBhIHN0cmluZ1xyXG4vLyAtIGRpciAtIHRydWUgZm9yIGluZGV4T2YsIGZhbHNlIGZvciBsYXN0SW5kZXhPZlxyXG5mdW5jdGlvbiBiaWRpcmVjdGlvbmFsSW5kZXhPZiAoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpIHtcclxuICAgIC8vIEVtcHR5IGJ1ZmZlciBtZWFucyBubyBtYXRjaFxyXG4gICAgaWYgKGJ1ZmZlci5sZW5ndGggPT09IDApIHJldHVybiAtMVxyXG5cclxuICAgIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0XHJcbiAgICBpZiAodHlwZW9mIGJ5dGVPZmZzZXQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgZW5jb2RpbmcgPSBieXRlT2Zmc2V0XHJcbiAgICAgICAgYnl0ZU9mZnNldCA9IDBcclxuICAgIH0gZWxzZSBpZiAoYnl0ZU9mZnNldCA+IDB4N2ZmZmZmZmYpIHtcclxuICAgICAgICBieXRlT2Zmc2V0ID0gMHg3ZmZmZmZmZlxyXG4gICAgfSBlbHNlIGlmIChieXRlT2Zmc2V0IDwgLTB4ODAwMDAwMDApIHtcclxuICAgICAgICBieXRlT2Zmc2V0ID0gLTB4ODAwMDAwMDBcclxuICAgIH1cclxuICAgIGJ5dGVPZmZzZXQgPSArYnl0ZU9mZnNldCAgLy8gQ29lcmNlIHRvIE51bWJlci5cclxuICAgIGlmIChpc05hTihieXRlT2Zmc2V0KSkge1xyXG4gICAgICAgIC8vIGJ5dGVPZmZzZXQ6IGl0IGl0J3MgdW5kZWZpbmVkLCBudWxsLCBOYU4sIFwiZm9vXCIsIGV0Yywgc2VhcmNoIHdob2xlIGJ1ZmZlclxyXG4gICAgICAgIGJ5dGVPZmZzZXQgPSBkaXIgPyAwIDogKGJ1ZmZlci5sZW5ndGggLSAxKVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE5vcm1hbGl6ZSBieXRlT2Zmc2V0OiBuZWdhdGl2ZSBvZmZzZXRzIHN0YXJ0IGZyb20gdGhlIGVuZCBvZiB0aGUgYnVmZmVyXHJcbiAgICBpZiAoYnl0ZU9mZnNldCA8IDApIGJ5dGVPZmZzZXQgPSBidWZmZXIubGVuZ3RoICsgYnl0ZU9mZnNldFxyXG4gICAgaWYgKGJ5dGVPZmZzZXQgPj0gYnVmZmVyLmxlbmd0aCkge1xyXG4gICAgICAgIGlmIChkaXIpIHJldHVybiAtMVxyXG4gICAgICAgIGVsc2UgYnl0ZU9mZnNldCA9IGJ1ZmZlci5sZW5ndGggLSAxXHJcbiAgICB9IGVsc2UgaWYgKGJ5dGVPZmZzZXQgPCAwKSB7XHJcbiAgICAgICAgaWYgKGRpcikgYnl0ZU9mZnNldCA9IDBcclxuICAgICAgICBlbHNlIHJldHVybiAtMVxyXG4gICAgfVxyXG5cclxuICAgIC8vIE5vcm1hbGl6ZSB2YWxcclxuICAgIGlmICh0eXBlb2YgdmFsID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgIHZhbCA9IEJ1ZmZlci5mcm9tKHZhbCwgZW5jb2RpbmcpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRmluYWxseSwgc2VhcmNoIGVpdGhlciBpbmRleE9mIChpZiBkaXIgaXMgdHJ1ZSkgb3IgbGFzdEluZGV4T2ZcclxuICAgIGlmIChpbnRlcm5hbElzQnVmZmVyKHZhbCkpIHtcclxuICAgICAgICAvLyBTcGVjaWFsIGNhc2U6IGxvb2tpbmcgZm9yIGVtcHR5IHN0cmluZy9idWZmZXIgYWx3YXlzIGZhaWxzXHJcbiAgICAgICAgaWYgKHZhbC5sZW5ndGggPT09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIC0xXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBhcnJheUluZGV4T2YoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBkaXIpXHJcbiAgICB9IGVsc2UgaWYgKHR5cGVvZiB2YWwgPT09ICdudW1iZXInKSB7XHJcbiAgICAgICAgdmFsID0gdmFsICYgMHhGRiAvLyBTZWFyY2ggZm9yIGEgYnl0ZSB2YWx1ZSBbMC0yNTVdXHJcbiAgICAgICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUICYmXHJcbiAgICAgICAgICAgIHR5cGVvZiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mID09PSAnZnVuY3Rpb24nKSB7XHJcbiAgICAgICAgICAgIGlmIChkaXIpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBVaW50OEFycmF5LnByb3RvdHlwZS5pbmRleE9mLmNhbGwoYnVmZmVyLCB2YWwsIGJ5dGVPZmZzZXQpXHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gVWludDhBcnJheS5wcm90b3R5cGUubGFzdEluZGV4T2YuY2FsbChidWZmZXIsIHZhbCwgYnl0ZU9mZnNldClcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gYXJyYXlJbmRleE9mKGJ1ZmZlciwgWyB2YWwgXSwgYnl0ZU9mZnNldCwgZW5jb2RpbmcsIGRpcilcclxuICAgIH1cclxuXHJcbiAgICB0aHJvdyBuZXcgVHlwZUVycm9yKCd2YWwgbXVzdCBiZSBzdHJpbmcsIG51bWJlciBvciBCdWZmZXInKVxyXG59XHJcblxyXG5mdW5jdGlvbiBhcnJheUluZGV4T2YgKGFyciwgdmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZywgZGlyKSB7XHJcbiAgICB2YXIgaW5kZXhTaXplID0gMVxyXG4gICAgdmFyIGFyckxlbmd0aCA9IGFyci5sZW5ndGhcclxuICAgIHZhciB2YWxMZW5ndGggPSB2YWwubGVuZ3RoXHJcblxyXG4gICAgaWYgKGVuY29kaW5nICE9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICBlbmNvZGluZyA9IFN0cmluZyhlbmNvZGluZykudG9Mb3dlckNhc2UoKVxyXG4gICAgICAgIGlmIChlbmNvZGluZyA9PT0gJ3VjczInIHx8IGVuY29kaW5nID09PSAndWNzLTInIHx8XHJcbiAgICAgICAgICAgIGVuY29kaW5nID09PSAndXRmMTZsZScgfHwgZW5jb2RpbmcgPT09ICd1dGYtMTZsZScpIHtcclxuICAgICAgICAgICAgaWYgKGFyci5sZW5ndGggPCAyIHx8IHZhbC5sZW5ndGggPCAyKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gLTFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpbmRleFNpemUgPSAyXHJcbiAgICAgICAgICAgIGFyckxlbmd0aCAvPSAyXHJcbiAgICAgICAgICAgIHZhbExlbmd0aCAvPSAyXHJcbiAgICAgICAgICAgIGJ5dGVPZmZzZXQgLz0gMlxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICBmdW5jdGlvbiByZWFkIChidWYsIGkpIHtcclxuICAgICAgICBpZiAoaW5kZXhTaXplID09PSAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiBidWZbaV1cclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gYnVmLnJlYWRVSW50MTZCRShpICogaW5kZXhTaXplKVxyXG4gICAgICAgIH1cclxuICAgIH1cclxuXHJcbiAgICB2YXIgaVxyXG4gICAgaWYgKGRpcikge1xyXG4gICAgICAgIHZhciBmb3VuZEluZGV4ID0gLTFcclxuICAgICAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpIDwgYXJyTGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWYgKHJlYWQoYXJyLCBpKSA9PT0gcmVhZCh2YWwsIGZvdW5kSW5kZXggPT09IC0xID8gMCA6IGkgLSBmb3VuZEluZGV4KSkge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggPT09IC0xKSBmb3VuZEluZGV4ID0gaVxyXG4gICAgICAgICAgICAgICAgaWYgKGkgLSBmb3VuZEluZGV4ICsgMSA9PT0gdmFsTGVuZ3RoKSByZXR1cm4gZm91bmRJbmRleCAqIGluZGV4U2l6ZVxyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKGZvdW5kSW5kZXggIT09IC0xKSBpIC09IGkgLSBmb3VuZEluZGV4XHJcbiAgICAgICAgICAgICAgICBmb3VuZEluZGV4ID0gLTFcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgaWYgKGJ5dGVPZmZzZXQgKyB2YWxMZW5ndGggPiBhcnJMZW5ndGgpIGJ5dGVPZmZzZXQgPSBhcnJMZW5ndGggLSB2YWxMZW5ndGhcclxuICAgICAgICBmb3IgKGkgPSBieXRlT2Zmc2V0OyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICB2YXIgZm91bmQgPSB0cnVlXHJcbiAgICAgICAgICAgIGZvciAodmFyIGogPSAwOyBqIDwgdmFsTGVuZ3RoOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGlmIChyZWFkKGFyciwgaSArIGopICE9PSByZWFkKHZhbCwgaikpIHtcclxuICAgICAgICAgICAgICAgICAgICBmb3VuZCA9IGZhbHNlXHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZm91bmQpIHJldHVybiBpXHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiAtMVxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLmluY2x1ZGVzID0gZnVuY3Rpb24gaW5jbHVkZXMgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcclxuICAgIHJldHVybiB0aGlzLmluZGV4T2YodmFsLCBieXRlT2Zmc2V0LCBlbmNvZGluZykgIT09IC0xXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUuaW5kZXhPZiA9IGZ1bmN0aW9uIGluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcclxuICAgIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCB0cnVlKVxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLmxhc3RJbmRleE9mID0gZnVuY3Rpb24gbGFzdEluZGV4T2YgKHZhbCwgYnl0ZU9mZnNldCwgZW5jb2RpbmcpIHtcclxuICAgIHJldHVybiBiaWRpcmVjdGlvbmFsSW5kZXhPZih0aGlzLCB2YWwsIGJ5dGVPZmZzZXQsIGVuY29kaW5nLCBmYWxzZSlcclxufVxyXG5cclxuZnVuY3Rpb24gaGV4V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgb2Zmc2V0ID0gTnVtYmVyKG9mZnNldCkgfHwgMFxyXG4gICAgdmFyIHJlbWFpbmluZyA9IGJ1Zi5sZW5ndGggLSBvZmZzZXRcclxuICAgIGlmICghbGVuZ3RoKSB7XHJcbiAgICAgICAgbGVuZ3RoID0gcmVtYWluaW5nXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIGxlbmd0aCA9IE51bWJlcihsZW5ndGgpXHJcbiAgICAgICAgaWYgKGxlbmd0aCA+IHJlbWFpbmluZykge1xyXG4gICAgICAgICAgICBsZW5ndGggPSByZW1haW5pbmdcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLy8gbXVzdCBiZSBhbiBldmVuIG51bWJlciBvZiBkaWdpdHNcclxuICAgIHZhciBzdHJMZW4gPSBzdHJpbmcubGVuZ3RoXHJcbiAgICBpZiAoc3RyTGVuICUgMiAhPT0gMCkgdGhyb3cgbmV3IFR5cGVFcnJvcignSW52YWxpZCBoZXggc3RyaW5nJylcclxuXHJcbiAgICBpZiAobGVuZ3RoID4gc3RyTGVuIC8gMikge1xyXG4gICAgICAgIGxlbmd0aCA9IHN0ckxlbiAvIDJcclxuICAgIH1cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgbGVuZ3RoOyArK2kpIHtcclxuICAgICAgICB2YXIgcGFyc2VkID0gcGFyc2VJbnQoc3RyaW5nLnN1YnN0cihpICogMiwgMiksIDE2KVxyXG4gICAgICAgIGlmIChpc05hTihwYXJzZWQpKSByZXR1cm4gaVxyXG4gICAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9IHBhcnNlZFxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGlcclxufVxyXG5cclxuZnVuY3Rpb24gdXRmOFdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcclxuICAgIHJldHVybiBibGl0QnVmZmVyKHV0ZjhUb0J5dGVzKHN0cmluZywgYnVmLmxlbmd0aCAtIG9mZnNldCksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFzY2lpV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgcmV0dXJuIGJsaXRCdWZmZXIoYXNjaWlUb0J5dGVzKHN0cmluZyksIGJ1Ziwgb2Zmc2V0LCBsZW5ndGgpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxhdGluMVdyaXRlIChidWYsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpIHtcclxuICAgIHJldHVybiBhc2NpaVdyaXRlKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcclxufVxyXG5cclxuZnVuY3Rpb24gYmFzZTY0V3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgcmV0dXJuIGJsaXRCdWZmZXIoYmFzZTY0VG9CeXRlcyhzdHJpbmcpLCBidWYsIG9mZnNldCwgbGVuZ3RoKVxyXG59XHJcblxyXG5mdW5jdGlvbiB1Y3MyV3JpdGUgKGJ1Ziwgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgcmV0dXJuIGJsaXRCdWZmZXIodXRmMTZsZVRvQnl0ZXMoc3RyaW5nLCBidWYubGVuZ3RoIC0gb2Zmc2V0KSwgYnVmLCBvZmZzZXQsIGxlbmd0aClcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS53cml0ZSA9IGZ1bmN0aW9uIHdyaXRlIChzdHJpbmcsIG9mZnNldCwgbGVuZ3RoLCBlbmNvZGluZykge1xyXG4gICAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZylcclxuICAgIGlmIChvZmZzZXQgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgIGVuY29kaW5nID0gJ3V0ZjgnXHJcbiAgICAgICAgbGVuZ3RoID0gdGhpcy5sZW5ndGhcclxuICAgICAgICBvZmZzZXQgPSAwXHJcbiAgICAgICAgLy8gQnVmZmVyI3dyaXRlKHN0cmluZywgZW5jb2RpbmcpXHJcbiAgICB9IGVsc2UgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkICYmIHR5cGVvZiBvZmZzZXQgPT09ICdzdHJpbmcnKSB7XHJcbiAgICAgICAgZW5jb2RpbmcgPSBvZmZzZXRcclxuICAgICAgICBsZW5ndGggPSB0aGlzLmxlbmd0aFxyXG4gICAgICAgIG9mZnNldCA9IDBcclxuICAgICAgICAvLyBCdWZmZXIjd3JpdGUoc3RyaW5nLCBvZmZzZXRbLCBsZW5ndGhdWywgZW5jb2RpbmddKVxyXG4gICAgfSBlbHNlIGlmIChpc0Zpbml0ZShvZmZzZXQpKSB7XHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxyXG4gICAgICAgIGlmIChpc0Zpbml0ZShsZW5ndGgpKSB7XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IGxlbmd0aCB8IDBcclxuICAgICAgICAgICAgaWYgKGVuY29kaW5nID09PSB1bmRlZmluZWQpIGVuY29kaW5nID0gJ3V0ZjgnXHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgZW5jb2RpbmcgPSBsZW5ndGhcclxuICAgICAgICAgICAgbGVuZ3RoID0gdW5kZWZpbmVkXHJcbiAgICAgICAgfVxyXG4gICAgICAgIC8vIGxlZ2FjeSB3cml0ZShzdHJpbmcsIGVuY29kaW5nLCBvZmZzZXQsIGxlbmd0aCkgLSByZW1vdmUgaW4gdjAuMTNcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgdGhyb3cgbmV3IEVycm9yKFxyXG4gICAgICAgICAgICAnQnVmZmVyLndyaXRlKHN0cmluZywgZW5jb2RpbmcsIG9mZnNldFssIGxlbmd0aF0pIGlzIG5vIGxvbmdlciBzdXBwb3J0ZWQnXHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHZhciByZW1haW5pbmcgPSB0aGlzLmxlbmd0aCAtIG9mZnNldFxyXG4gICAgaWYgKGxlbmd0aCA9PT0gdW5kZWZpbmVkIHx8IGxlbmd0aCA+IHJlbWFpbmluZykgbGVuZ3RoID0gcmVtYWluaW5nXHJcblxyXG4gICAgaWYgKChzdHJpbmcubGVuZ3RoID4gMCAmJiAobGVuZ3RoIDwgMCB8fCBvZmZzZXQgPCAwKSkgfHwgb2Zmc2V0ID4gdGhpcy5sZW5ndGgpIHtcclxuICAgICAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignQXR0ZW1wdCB0byB3cml0ZSBvdXRzaWRlIGJ1ZmZlciBib3VuZHMnKVxyXG4gICAgfVxyXG5cclxuICAgIGlmICghZW5jb2RpbmcpIGVuY29kaW5nID0gJ3V0ZjgnXHJcblxyXG4gICAgdmFyIGxvd2VyZWRDYXNlID0gZmFsc2VcclxuICAgIGZvciAoOzspIHtcclxuICAgICAgICBzd2l0Y2ggKGVuY29kaW5nKSB7XHJcbiAgICAgICAgICAgIGNhc2UgJ2hleCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gaGV4V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ3V0ZjgnOlxyXG4gICAgICAgICAgICBjYXNlICd1dGYtOCc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdXRmOFdyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXHJcblxyXG4gICAgICAgICAgICBjYXNlICdhc2NpaSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYXNjaWlXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxyXG5cclxuICAgICAgICAgICAgY2FzZSAnbGF0aW4xJzpcclxuICAgICAgICAgICAgY2FzZSAnYmluYXJ5JzpcclxuICAgICAgICAgICAgICAgIHJldHVybiBsYXRpbjFXcml0ZSh0aGlzLCBzdHJpbmcsIG9mZnNldCwgbGVuZ3RoKVxyXG5cclxuICAgICAgICAgICAgY2FzZSAnYmFzZTY0JzpcclxuICAgICAgICAgICAgICAgIC8vIFdhcm5pbmc6IG1heExlbmd0aCBub3QgdGFrZW4gaW50byBhY2NvdW50IGluIGJhc2U2NFdyaXRlXHJcbiAgICAgICAgICAgICAgICByZXR1cm4gYmFzZTY0V3JpdGUodGhpcywgc3RyaW5nLCBvZmZzZXQsIGxlbmd0aClcclxuXHJcbiAgICAgICAgICAgIGNhc2UgJ3VjczInOlxyXG4gICAgICAgICAgICBjYXNlICd1Y3MtMic6XHJcbiAgICAgICAgICAgIGNhc2UgJ3V0ZjE2bGUnOlxyXG4gICAgICAgICAgICBjYXNlICd1dGYtMTZsZSc6XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gdWNzMldyaXRlKHRoaXMsIHN0cmluZywgb2Zmc2V0LCBsZW5ndGgpXHJcblxyXG4gICAgICAgICAgICBkZWZhdWx0OlxyXG4gICAgICAgICAgICAgICAgaWYgKGxvd2VyZWRDYXNlKSB0aHJvdyBuZXcgVHlwZUVycm9yKCdVbmtub3duIGVuY29kaW5nOiAnICsgZW5jb2RpbmcpXHJcbiAgICAgICAgICAgICAgICBlbmNvZGluZyA9ICgnJyArIGVuY29kaW5nKS50b0xvd2VyQ2FzZSgpXHJcbiAgICAgICAgICAgICAgICBsb3dlcmVkQ2FzZSA9IHRydWVcclxuICAgICAgICB9XHJcbiAgICB9XHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUudG9KU09OID0gZnVuY3Rpb24gdG9KU09OICgpIHtcclxuICAgIHJldHVybiB7XHJcbiAgICAgICAgdHlwZTogJ0J1ZmZlcicsXHJcbiAgICAgICAgZGF0YTogQXJyYXkucHJvdG90eXBlLnNsaWNlLmNhbGwodGhpcy5fYXJyIHx8IHRoaXMsIDApXHJcbiAgICB9XHJcbn1cclxuXHJcblxyXG5mdW5jdGlvbiB1dGY4U2xpY2UgKGJ1Ziwgc3RhcnQsIGVuZCkge1xyXG4gICAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxyXG4gICAgdmFyIHJlcyA9IFtdXHJcblxyXG4gICAgdmFyIGkgPSBzdGFydFxyXG4gICAgd2hpbGUgKGkgPCBlbmQpIHtcclxuICAgICAgICB2YXIgZmlyc3RCeXRlID0gYnVmW2ldXHJcbiAgICAgICAgdmFyIGNvZGVQb2ludCA9IG51bGxcclxuICAgICAgICB2YXIgYnl0ZXNQZXJTZXF1ZW5jZSA9IChmaXJzdEJ5dGUgPiAweEVGKSA/IDRcclxuICAgICAgICAgICAgOiAoZmlyc3RCeXRlID4gMHhERikgPyAzXHJcbiAgICAgICAgICAgICAgICA6IChmaXJzdEJ5dGUgPiAweEJGKSA/IDJcclxuICAgICAgICAgICAgICAgICAgICA6IDFcclxuXHJcbiAgICAgICAgaWYgKGkgKyBieXRlc1BlclNlcXVlbmNlIDw9IGVuZCkge1xyXG4gICAgICAgICAgICB2YXIgc2Vjb25kQnl0ZSwgdGhpcmRCeXRlLCBmb3VydGhCeXRlLCB0ZW1wQ29kZVBvaW50XHJcblxyXG4gICAgICAgICAgICBzd2l0Y2ggKGJ5dGVzUGVyU2VxdWVuY2UpIHtcclxuICAgICAgICAgICAgICAgIGNhc2UgMTpcclxuICAgICAgICAgICAgICAgICAgICBpZiAoZmlyc3RCeXRlIDwgMHg4MCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjb2RlUG9pbnQgPSBmaXJzdEJ5dGVcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYnJlYWtcclxuICAgICAgICAgICAgICAgIGNhc2UgMjpcclxuICAgICAgICAgICAgICAgICAgICBzZWNvbmRCeXRlID0gYnVmW2kgKyAxXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRlbXBDb2RlUG9pbnQgPSAoZmlyc3RCeXRlICYgMHgxRikgPDwgMHg2IHwgKHNlY29uZEJ5dGUgJiAweDNGKVxyXG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAodGVtcENvZGVQb2ludCA+IDB4N0YpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIGNvZGVQb2ludCA9IHRlbXBDb2RlUG9pbnRcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBicmVha1xyXG4gICAgICAgICAgICAgICAgY2FzZSAzOlxyXG4gICAgICAgICAgICAgICAgICAgIHNlY29uZEJ5dGUgPSBidWZbaSArIDFdXHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcmRCeXRlID0gYnVmW2kgKyAyXVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgoc2Vjb25kQnl0ZSAmIDB4QzApID09PSAweDgwICYmICh0aGlyZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHhDIHwgKHNlY29uZEJ5dGUgJiAweDNGKSA8PCAweDYgfCAodGhpcmRCeXRlICYgMHgzRilcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweDdGRiAmJiAodGVtcENvZGVQb2ludCA8IDB4RDgwMCB8fCB0ZW1wQ29kZVBvaW50ID4gMHhERkZGKSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29kZVBvaW50ID0gdGVtcENvZGVQb2ludFxyXG4gICAgICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGJyZWFrXHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICAgICAgc2Vjb25kQnl0ZSA9IGJ1ZltpICsgMV1cclxuICAgICAgICAgICAgICAgICAgICB0aGlyZEJ5dGUgPSBidWZbaSArIDJdXHJcbiAgICAgICAgICAgICAgICAgICAgZm91cnRoQnl0ZSA9IGJ1ZltpICsgM11cclxuICAgICAgICAgICAgICAgICAgICBpZiAoKHNlY29uZEJ5dGUgJiAweEMwKSA9PT0gMHg4MCAmJiAodGhpcmRCeXRlICYgMHhDMCkgPT09IDB4ODAgJiYgKGZvdXJ0aEJ5dGUgJiAweEMwKSA9PT0gMHg4MCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0ZW1wQ29kZVBvaW50ID0gKGZpcnN0Qnl0ZSAmIDB4RikgPDwgMHgxMiB8IChzZWNvbmRCeXRlICYgMHgzRikgPDwgMHhDIHwgKHRoaXJkQnl0ZSAmIDB4M0YpIDw8IDB4NiB8IChmb3VydGhCeXRlICYgMHgzRilcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRlbXBDb2RlUG9pbnQgPiAweEZGRkYgJiYgdGVtcENvZGVQb2ludCA8IDB4MTEwMDAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICBjb2RlUG9pbnQgPSB0ZW1wQ29kZVBvaW50XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGlmIChjb2RlUG9pbnQgPT09IG51bGwpIHtcclxuICAgICAgICAgICAgLy8gd2UgZGlkIG5vdCBnZW5lcmF0ZSBhIHZhbGlkIGNvZGVQb2ludCBzbyBpbnNlcnQgYVxyXG4gICAgICAgICAgICAvLyByZXBsYWNlbWVudCBjaGFyIChVK0ZGRkQpIGFuZCBhZHZhbmNlIG9ubHkgMSBieXRlXHJcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IDB4RkZGRFxyXG4gICAgICAgICAgICBieXRlc1BlclNlcXVlbmNlID0gMVxyXG4gICAgICAgIH0gZWxzZSBpZiAoY29kZVBvaW50ID4gMHhGRkZGKSB7XHJcbiAgICAgICAgICAgIC8vIGVuY29kZSB0byB1dGYxNiAoc3Vycm9nYXRlIHBhaXIgZGFuY2UpXHJcbiAgICAgICAgICAgIGNvZGVQb2ludCAtPSAweDEwMDAwXHJcbiAgICAgICAgICAgIHJlcy5wdXNoKGNvZGVQb2ludCA+Pj4gMTAgJiAweDNGRiB8IDB4RDgwMClcclxuICAgICAgICAgICAgY29kZVBvaW50ID0gMHhEQzAwIHwgY29kZVBvaW50ICYgMHgzRkZcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIHJlcy5wdXNoKGNvZGVQb2ludClcclxuICAgICAgICBpICs9IGJ5dGVzUGVyU2VxdWVuY2VcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gZGVjb2RlQ29kZVBvaW50c0FycmF5KHJlcylcclxufVxyXG5cclxuLy8gQmFzZWQgb24gaHR0cDovL3N0YWNrb3ZlcmZsb3cuY29tL2EvMjI3NDcyNzIvNjgwNzQyLCB0aGUgYnJvd3NlciB3aXRoXHJcbi8vIHRoZSBsb3dlc3QgbGltaXQgaXMgQ2hyb21lLCB3aXRoIDB4MTAwMDAgYXJncy5cclxuLy8gV2UgZ28gMSBtYWduaXR1ZGUgbGVzcywgZm9yIHNhZmV0eVxyXG52YXIgTUFYX0FSR1VNRU5UU19MRU5HVEggPSAweDEwMDBcclxuXHJcbmZ1bmN0aW9uIGRlY29kZUNvZGVQb2ludHNBcnJheSAoY29kZVBvaW50cykge1xyXG4gICAgdmFyIGxlbiA9IGNvZGVQb2ludHMubGVuZ3RoXHJcbiAgICBpZiAobGVuIDw9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKSB7XHJcbiAgICAgICAgcmV0dXJuIFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoU3RyaW5nLCBjb2RlUG9pbnRzKSAvLyBhdm9pZCBleHRyYSBzbGljZSgpXHJcbiAgICB9XHJcblxyXG4gICAgLy8gRGVjb2RlIGluIGNodW5rcyB0byBhdm9pZCBcImNhbGwgc3RhY2sgc2l6ZSBleGNlZWRlZFwiLlxyXG4gICAgdmFyIHJlcyA9ICcnXHJcbiAgICB2YXIgaSA9IDBcclxuICAgIHdoaWxlIChpIDwgbGVuKSB7XHJcbiAgICAgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUuYXBwbHkoXHJcbiAgICAgICAgICAgIFN0cmluZyxcclxuICAgICAgICAgICAgY29kZVBvaW50cy5zbGljZShpLCBpICs9IE1BWF9BUkdVTUVOVFNfTEVOR1RIKVxyXG4gICAgICAgIClcclxuICAgIH1cclxuICAgIHJldHVybiByZXNcclxufVxyXG5cclxuZnVuY3Rpb24gYXNjaWlTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XHJcbiAgICB2YXIgcmV0ID0gJydcclxuICAgIGVuZCA9IE1hdGgubWluKGJ1Zi5sZW5ndGgsIGVuZClcclxuXHJcbiAgICBmb3IgKHZhciBpID0gc3RhcnQ7IGkgPCBlbmQ7ICsraSkge1xyXG4gICAgICAgIHJldCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGJ1ZltpXSAmIDB4N0YpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmV0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGxhdGluMVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcclxuICAgIHZhciByZXQgPSAnJ1xyXG4gICAgZW5kID0gTWF0aC5taW4oYnVmLmxlbmd0aCwgZW5kKVxyXG5cclxuICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XHJcbiAgICAgICAgcmV0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnVmW2ldKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIHJldFxyXG59XHJcblxyXG5mdW5jdGlvbiBoZXhTbGljZSAoYnVmLCBzdGFydCwgZW5kKSB7XHJcbiAgICB2YXIgbGVuID0gYnVmLmxlbmd0aFxyXG5cclxuICAgIGlmICghc3RhcnQgfHwgc3RhcnQgPCAwKSBzdGFydCA9IDBcclxuICAgIGlmICghZW5kIHx8IGVuZCA8IDAgfHwgZW5kID4gbGVuKSBlbmQgPSBsZW5cclxuXHJcbiAgICB2YXIgb3V0ID0gJydcclxuICAgIGZvciAodmFyIGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XHJcbiAgICAgICAgb3V0ICs9IHRvSGV4KGJ1ZltpXSlcclxuICAgIH1cclxuICAgIHJldHVybiBvdXRcclxufVxyXG5cclxuZnVuY3Rpb24gdXRmMTZsZVNsaWNlIChidWYsIHN0YXJ0LCBlbmQpIHtcclxuICAgIHZhciBieXRlcyA9IGJ1Zi5zbGljZShzdGFydCwgZW5kKVxyXG4gICAgdmFyIHJlcyA9ICcnXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IGJ5dGVzLmxlbmd0aDsgaSArPSAyKSB7XHJcbiAgICAgICAgcmVzICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoYnl0ZXNbaV0gKyBieXRlc1tpICsgMV0gKiAyNTYpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gcmVzXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUuc2xpY2UgPSBmdW5jdGlvbiBzbGljZSAoc3RhcnQsIGVuZCkge1xyXG4gICAgdmFyIGxlbiA9IHRoaXMubGVuZ3RoXHJcbiAgICBzdGFydCA9IH5+c3RhcnRcclxuICAgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gbGVuIDogfn5lbmRcclxuXHJcbiAgICBpZiAoc3RhcnQgPCAwKSB7XHJcbiAgICAgICAgc3RhcnQgKz0gbGVuXHJcbiAgICAgICAgaWYgKHN0YXJ0IDwgMCkgc3RhcnQgPSAwXHJcbiAgICB9IGVsc2UgaWYgKHN0YXJ0ID4gbGVuKSB7XHJcbiAgICAgICAgc3RhcnQgPSBsZW5cclxuICAgIH1cclxuXHJcbiAgICBpZiAoZW5kIDwgMCkge1xyXG4gICAgICAgIGVuZCArPSBsZW5cclxuICAgICAgICBpZiAoZW5kIDwgMCkgZW5kID0gMFxyXG4gICAgfSBlbHNlIGlmIChlbmQgPiBsZW4pIHtcclxuICAgICAgICBlbmQgPSBsZW5cclxuICAgIH1cclxuXHJcbiAgICBpZiAoZW5kIDwgc3RhcnQpIGVuZCA9IHN0YXJ0XHJcblxyXG4gICAgdmFyIG5ld0J1ZlxyXG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XHJcbiAgICAgICAgbmV3QnVmID0gdGhpcy5zdWJhcnJheShzdGFydCwgZW5kKVxyXG4gICAgICAgIG5ld0J1Zi5fX3Byb3RvX18gPSBCdWZmZXIucHJvdG90eXBlXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBzbGljZUxlbiA9IGVuZCAtIHN0YXJ0XHJcbiAgICAgICAgbmV3QnVmID0gbmV3IEJ1ZmZlcihzbGljZUxlbiwgdW5kZWZpbmVkKVxyXG4gICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc2xpY2VMZW47ICsraSkge1xyXG4gICAgICAgICAgICBuZXdCdWZbaV0gPSB0aGlzW2kgKyBzdGFydF1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG5ld0J1ZlxyXG59XHJcblxyXG4vKlxyXG4gKiBOZWVkIHRvIG1ha2Ugc3VyZSB0aGF0IGJ1ZmZlciBpc24ndCB0cnlpbmcgdG8gd3JpdGUgb3V0IG9mIGJvdW5kcy5cclxuICovXHJcbmZ1bmN0aW9uIGNoZWNrT2Zmc2V0IChvZmZzZXQsIGV4dCwgbGVuZ3RoKSB7XHJcbiAgICBpZiAoKG9mZnNldCAlIDEpICE9PSAwIHx8IG9mZnNldCA8IDApIHRocm93IG5ldyBSYW5nZUVycm9yKCdvZmZzZXQgaXMgbm90IHVpbnQnKVxyXG4gICAgaWYgKG9mZnNldCArIGV4dCA+IGxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1RyeWluZyB0byBhY2Nlc3MgYmV5b25kIGJ1ZmZlciBsZW5ndGgnKVxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLnJlYWRVSW50TEUgPSBmdW5jdGlvbiByZWFkVUludExFIChvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XHJcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXHJcbiAgICBieXRlTGVuZ3RoID0gYnl0ZUxlbmd0aCB8IDBcclxuICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgYnl0ZUxlbmd0aCwgdGhpcy5sZW5ndGgpXHJcblxyXG4gICAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0XVxyXG4gICAgdmFyIG11bCA9IDFcclxuICAgIHZhciBpID0gMFxyXG4gICAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcclxuICAgICAgICB2YWwgKz0gdGhpc1tvZmZzZXQgKyBpXSAqIG11bFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWxcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludEJFID0gZnVuY3Rpb24gcmVhZFVJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xyXG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxyXG4gICAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXHJcbiAgICBpZiAoIW5vQXNzZXJ0KSB7XHJcbiAgICAgICAgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcclxuICAgIH1cclxuXHJcbiAgICB2YXIgdmFsID0gdGhpc1tvZmZzZXQgKyAtLWJ5dGVMZW5ndGhdXHJcbiAgICB2YXIgbXVsID0gMVxyXG4gICAgd2hpbGUgKGJ5dGVMZW5ndGggPiAwICYmIChtdWwgKj0gMHgxMDApKSB7XHJcbiAgICAgICAgdmFsICs9IHRoaXNbb2Zmc2V0ICsgLS1ieXRlTGVuZ3RoXSAqIG11bFxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiB2YWxcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDggPSBmdW5jdGlvbiByZWFkVUludDggKG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMSwgdGhpcy5sZW5ndGgpXHJcbiAgICByZXR1cm4gdGhpc1tvZmZzZXRdXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkxFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxyXG4gICAgcmV0dXJuIHRoaXNbb2Zmc2V0XSB8ICh0aGlzW29mZnNldCArIDFdIDw8IDgpXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQxNkJFID0gZnVuY3Rpb24gcmVhZFVJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxyXG4gICAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgOCkgfCB0aGlzW29mZnNldCArIDFdXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUucmVhZFVJbnQzMkxFID0gZnVuY3Rpb24gcmVhZFVJbnQzMkxFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxyXG5cclxuICAgIHJldHVybiAoKHRoaXNbb2Zmc2V0XSkgfFxyXG4gICAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcclxuICAgICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikpICtcclxuICAgICAgICAodGhpc1tvZmZzZXQgKyAzXSAqIDB4MTAwMDAwMClcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS5yZWFkVUludDMyQkUgPSBmdW5jdGlvbiByZWFkVUludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXHJcblxyXG4gICAgcmV0dXJuICh0aGlzW29mZnNldF0gKiAweDEwMDAwMDApICtcclxuICAgICAgICAoKHRoaXNbb2Zmc2V0ICsgMV0gPDwgMTYpIHxcclxuICAgICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCA4KSB8XHJcbiAgICAgICAgdGhpc1tvZmZzZXQgKyAzXSlcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50TEUgPSBmdW5jdGlvbiByZWFkSW50TEUgKG9mZnNldCwgYnl0ZUxlbmd0aCwgbm9Bc3NlcnQpIHtcclxuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcclxuICAgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxyXG4gICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCBieXRlTGVuZ3RoLCB0aGlzLmxlbmd0aClcclxuXHJcbiAgICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdXHJcbiAgICB2YXIgbXVsID0gMVxyXG4gICAgdmFyIGkgPSAwXHJcbiAgICB3aGlsZSAoKytpIDwgYnl0ZUxlbmd0aCAmJiAobXVsICo9IDB4MTAwKSkge1xyXG4gICAgICAgIHZhbCArPSB0aGlzW29mZnNldCArIGldICogbXVsXHJcbiAgICB9XHJcbiAgICBtdWwgKj0gMHg4MFxyXG5cclxuICAgIGlmICh2YWwgPj0gbXVsKSB2YWwgLT0gTWF0aC5wb3coMiwgOCAqIGJ5dGVMZW5ndGgpXHJcblxyXG4gICAgcmV0dXJuIHZhbFxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnRCRSA9IGZ1bmN0aW9uIHJlYWRJbnRCRSAob2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xyXG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxyXG4gICAgYnl0ZUxlbmd0aCA9IGJ5dGVMZW5ndGggfCAwXHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIGJ5dGVMZW5ndGgsIHRoaXMubGVuZ3RoKVxyXG5cclxuICAgIHZhciBpID0gYnl0ZUxlbmd0aFxyXG4gICAgdmFyIG11bCA9IDFcclxuICAgIHZhciB2YWwgPSB0aGlzW29mZnNldCArIC0taV1cclxuICAgIHdoaWxlIChpID4gMCAmJiAobXVsICo9IDB4MTAwKSkge1xyXG4gICAgICAgIHZhbCArPSB0aGlzW29mZnNldCArIC0taV0gKiBtdWxcclxuICAgIH1cclxuICAgIG11bCAqPSAweDgwXHJcblxyXG4gICAgaWYgKHZhbCA+PSBtdWwpIHZhbCAtPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aClcclxuXHJcbiAgICByZXR1cm4gdmFsXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDggPSBmdW5jdGlvbiByZWFkSW50OCAob2Zmc2V0LCBub0Fzc2VydCkge1xyXG4gICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCAxLCB0aGlzLmxlbmd0aClcclxuICAgIGlmICghKHRoaXNbb2Zmc2V0XSAmIDB4ODApKSByZXR1cm4gKHRoaXNbb2Zmc2V0XSlcclxuICAgIHJldHVybiAoKDB4ZmYgLSB0aGlzW29mZnNldF0gKyAxKSAqIC0xKVxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQxNkxFID0gZnVuY3Rpb24gcmVhZEludDE2TEUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgMiwgdGhpcy5sZW5ndGgpXHJcbiAgICB2YXIgdmFsID0gdGhpc1tvZmZzZXRdIHwgKHRoaXNbb2Zmc2V0ICsgMV0gPDwgOClcclxuICAgIHJldHVybiAodmFsICYgMHg4MDAwKSA/IHZhbCB8IDB4RkZGRjAwMDAgOiB2YWxcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS5yZWFkSW50MTZCRSA9IGZ1bmN0aW9uIHJlYWRJbnQxNkJFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDIsIHRoaXMubGVuZ3RoKVxyXG4gICAgdmFyIHZhbCA9IHRoaXNbb2Zmc2V0ICsgMV0gfCAodGhpc1tvZmZzZXRdIDw8IDgpXHJcbiAgICByZXR1cm4gKHZhbCAmIDB4ODAwMCkgPyB2YWwgfCAweEZGRkYwMDAwIDogdmFsXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUucmVhZEludDMyTEUgPSBmdW5jdGlvbiByZWFkSW50MzJMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xyXG4gICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA0LCB0aGlzLmxlbmd0aClcclxuXHJcbiAgICByZXR1cm4gKHRoaXNbb2Zmc2V0XSkgfFxyXG4gICAgICAgICh0aGlzW29mZnNldCArIDFdIDw8IDgpIHxcclxuICAgICAgICAodGhpc1tvZmZzZXQgKyAyXSA8PCAxNikgfFxyXG4gICAgICAgICh0aGlzW29mZnNldCArIDNdIDw8IDI0KVxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLnJlYWRJbnQzMkJFID0gZnVuY3Rpb24gcmVhZEludDMyQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXHJcblxyXG4gICAgcmV0dXJuICh0aGlzW29mZnNldF0gPDwgMjQpIHxcclxuICAgICAgICAodGhpc1tvZmZzZXQgKyAxXSA8PCAxNikgfFxyXG4gICAgICAgICh0aGlzW29mZnNldCArIDJdIDw8IDgpIHxcclxuICAgICAgICAodGhpc1tvZmZzZXQgKyAzXSlcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRmxvYXRMRSA9IGZ1bmN0aW9uIHJlYWRGbG9hdExFIChvZmZzZXQsIG5vQXNzZXJ0KSB7XHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja09mZnNldChvZmZzZXQsIDQsIHRoaXMubGVuZ3RoKVxyXG4gICAgcmV0dXJuIGllZWU3NTQucmVhZCh0aGlzLCBvZmZzZXQsIHRydWUsIDIzLCA0KVxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLnJlYWRGbG9hdEJFID0gZnVuY3Rpb24gcmVhZEZsb2F0QkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgNCwgdGhpcy5sZW5ndGgpXHJcbiAgICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDIzLCA0KVxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLnJlYWREb3VibGVMRSA9IGZ1bmN0aW9uIHJlYWREb3VibGVMRSAob2Zmc2V0LCBub0Fzc2VydCkge1xyXG4gICAgaWYgKCFub0Fzc2VydCkgY2hlY2tPZmZzZXQob2Zmc2V0LCA4LCB0aGlzLmxlbmd0aClcclxuICAgIHJldHVybiBpZWVlNzU0LnJlYWQodGhpcywgb2Zmc2V0LCB0cnVlLCA1MiwgOClcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS5yZWFkRG91YmxlQkUgPSBmdW5jdGlvbiByZWFkRG91YmxlQkUgKG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrT2Zmc2V0KG9mZnNldCwgOCwgdGhpcy5sZW5ndGgpXHJcbiAgICByZXR1cm4gaWVlZTc1NC5yZWFkKHRoaXMsIG9mZnNldCwgZmFsc2UsIDUyLCA4KVxyXG59XHJcblxyXG5mdW5jdGlvbiBjaGVja0ludCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XHJcbiAgICBpZiAoIWludGVybmFsSXNCdWZmZXIoYnVmKSkgdGhyb3cgbmV3IFR5cGVFcnJvcignXCJidWZmZXJcIiBhcmd1bWVudCBtdXN0IGJlIGEgQnVmZmVyIGluc3RhbmNlJylcclxuICAgIGlmICh2YWx1ZSA+IG1heCB8fCB2YWx1ZSA8IG1pbikgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ1widmFsdWVcIiBhcmd1bWVudCBpcyBvdXQgb2YgYm91bmRzJylcclxuICAgIGlmIChvZmZzZXQgKyBleHQgPiBidWYubGVuZ3RoKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignSW5kZXggb3V0IG9mIHJhbmdlJylcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlVUludExFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xyXG4gICAgdmFsdWUgPSArdmFsdWVcclxuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcclxuICAgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxyXG4gICAgaWYgKCFub0Fzc2VydCkge1xyXG4gICAgICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcclxuICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcclxuICAgIH1cclxuXHJcbiAgICB2YXIgbXVsID0gMVxyXG4gICAgdmFyIGkgPSAwXHJcbiAgICB0aGlzW29mZnNldF0gPSB2YWx1ZSAmIDB4RkZcclxuICAgIHdoaWxlICgrK2kgPCBieXRlTGVuZ3RoICYmIChtdWwgKj0gMHgxMDApKSB7XHJcbiAgICAgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnRCRSA9IGZ1bmN0aW9uIHdyaXRlVUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xyXG4gICAgdmFsdWUgPSArdmFsdWVcclxuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcclxuICAgIGJ5dGVMZW5ndGggPSBieXRlTGVuZ3RoIHwgMFxyXG4gICAgaWYgKCFub0Fzc2VydCkge1xyXG4gICAgICAgIHZhciBtYXhCeXRlcyA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoKSAtIDFcclxuICAgICAgICBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBtYXhCeXRlcywgMClcclxuICAgIH1cclxuXHJcbiAgICB2YXIgaSA9IGJ5dGVMZW5ndGggLSAxXHJcbiAgICB2YXIgbXVsID0gMVxyXG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxyXG4gICAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XHJcbiAgICAgICAgdGhpc1tvZmZzZXQgKyBpXSA9ICh2YWx1ZSAvIG11bCkgJiAweEZGXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQ4ID0gZnVuY3Rpb24gd3JpdGVVSW50OCAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIHZhbHVlID0gK3ZhbHVlXHJcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAxLCAweGZmLCAwKVxyXG4gICAgaWYgKCFCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkgdmFsdWUgPSBNYXRoLmZsb29yKHZhbHVlKVxyXG4gICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlICYgMHhmZilcclxuICAgIHJldHVybiBvZmZzZXQgKyAxXHJcbn1cclxuXHJcbmZ1bmN0aW9uIG9iamVjdFdyaXRlVUludDE2IChidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbikge1xyXG4gICAgaWYgKHZhbHVlIDwgMCkgdmFsdWUgPSAweGZmZmYgKyB2YWx1ZSArIDFcclxuICAgIGZvciAodmFyIGkgPSAwLCBqID0gTWF0aC5taW4oYnVmLmxlbmd0aCAtIG9mZnNldCwgMik7IGkgPCBqOyArK2kpIHtcclxuICAgICAgICBidWZbb2Zmc2V0ICsgaV0gPSAodmFsdWUgJiAoMHhmZiA8PCAoOCAqIChsaXR0bGVFbmRpYW4gPyBpIDogMSAtIGkpKSkpID4+PlxyXG4gICAgICAgICAgICAobGl0dGxlRW5kaWFuID8gaSA6IDEgLSBpKSAqIDhcclxuICAgIH1cclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQxNkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIHZhbHVlID0gK3ZhbHVlXHJcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweGZmZmYsIDApXHJcbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcclxuICAgICAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxyXG4gICAgICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2Zmc2V0ICsgMlxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLndyaXRlVUludDE2QkUgPSBmdW5jdGlvbiB3cml0ZVVJbnQxNkJFICh2YWx1ZSwgb2Zmc2V0LCBub0Fzc2VydCkge1xyXG4gICAgdmFsdWUgPSArdmFsdWVcclxuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcclxuICAgIGlmICghbm9Bc3NlcnQpIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIDIsIDB4ZmZmZiwgMClcclxuICAgIGlmIChCdWZmZXIuVFlQRURfQVJSQVlfU1VQUE9SVCkge1xyXG4gICAgICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSA+Pj4gOClcclxuICAgICAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlICYgMHhmZilcclxuICAgIH0gZWxzZSB7XHJcbiAgICAgICAgb2JqZWN0V3JpdGVVSW50MTYodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2Zmc2V0ICsgMlxyXG59XHJcblxyXG5mdW5jdGlvbiBvYmplY3RXcml0ZVVJbnQzMiAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBsaXR0bGVFbmRpYW4pIHtcclxuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxyXG4gICAgZm9yICh2YXIgaSA9IDAsIGogPSBNYXRoLm1pbihidWYubGVuZ3RoIC0gb2Zmc2V0LCA0KTsgaSA8IGo7ICsraSkge1xyXG4gICAgICAgIGJ1ZltvZmZzZXQgKyBpXSA9ICh2YWx1ZSA+Pj4gKGxpdHRsZUVuZGlhbiA/IGkgOiAzIC0gaSkgKiA4KSAmIDB4ZmZcclxuICAgIH1cclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkxFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIHZhbHVlID0gK3ZhbHVlXHJcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxyXG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XHJcbiAgICAgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXHJcbiAgICAgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXHJcbiAgICAgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSA+Pj4gOClcclxuICAgICAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCB0cnVlKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9mZnNldCArIDRcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS53cml0ZVVJbnQzMkJFID0gZnVuY3Rpb24gd3JpdGVVSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIHZhbHVlID0gK3ZhbHVlXHJcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweGZmZmZmZmZmLCAwKVxyXG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XHJcbiAgICAgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcclxuICAgICAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcclxuICAgICAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxyXG4gICAgICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcclxuICAgIH1cclxuICAgIHJldHVybiBvZmZzZXQgKyA0XHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVJbnRMRSA9IGZ1bmN0aW9uIHdyaXRlSW50TEUgKHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIG5vQXNzZXJ0KSB7XHJcbiAgICB2YWx1ZSA9ICt2YWx1ZVxyXG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxyXG4gICAgaWYgKCFub0Fzc2VydCkge1xyXG4gICAgICAgIHZhciBsaW1pdCA9IE1hdGgucG93KDIsIDggKiBieXRlTGVuZ3RoIC0gMSlcclxuXHJcbiAgICAgICAgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgYnl0ZUxlbmd0aCwgbGltaXQgLSAxLCAtbGltaXQpXHJcbiAgICB9XHJcblxyXG4gICAgdmFyIGkgPSAwXHJcbiAgICB2YXIgbXVsID0gMVxyXG4gICAgdmFyIHN1YiA9IDBcclxuICAgIHRoaXNbb2Zmc2V0XSA9IHZhbHVlICYgMHhGRlxyXG4gICAgd2hpbGUgKCsraSA8IGJ5dGVMZW5ndGggJiYgKG11bCAqPSAweDEwMCkpIHtcclxuICAgICAgICBpZiAodmFsdWUgPCAwICYmIHN1YiA9PT0gMCAmJiB0aGlzW29mZnNldCArIGkgLSAxXSAhPT0gMCkge1xyXG4gICAgICAgICAgICBzdWIgPSAxXHJcbiAgICAgICAgfVxyXG4gICAgICAgIHRoaXNbb2Zmc2V0ICsgaV0gPSAoKHZhbHVlIC8gbXVsKSA+PiAwKSAtIHN1YiAmIDB4RkZcclxuICAgIH1cclxuXHJcbiAgICByZXR1cm4gb2Zmc2V0ICsgYnl0ZUxlbmd0aFxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50QkUgPSBmdW5jdGlvbiB3cml0ZUludEJFICh2YWx1ZSwgb2Zmc2V0LCBieXRlTGVuZ3RoLCBub0Fzc2VydCkge1xyXG4gICAgdmFsdWUgPSArdmFsdWVcclxuICAgIG9mZnNldCA9IG9mZnNldCB8IDBcclxuICAgIGlmICghbm9Bc3NlcnQpIHtcclxuICAgICAgICB2YXIgbGltaXQgPSBNYXRoLnBvdygyLCA4ICogYnl0ZUxlbmd0aCAtIDEpXHJcblxyXG4gICAgICAgIGNoZWNrSW50KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGJ5dGVMZW5ndGgsIGxpbWl0IC0gMSwgLWxpbWl0KVxyXG4gICAgfVxyXG5cclxuICAgIHZhciBpID0gYnl0ZUxlbmd0aCAtIDFcclxuICAgIHZhciBtdWwgPSAxXHJcbiAgICB2YXIgc3ViID0gMFxyXG4gICAgdGhpc1tvZmZzZXQgKyBpXSA9IHZhbHVlICYgMHhGRlxyXG4gICAgd2hpbGUgKC0taSA+PSAwICYmIChtdWwgKj0gMHgxMDApKSB7XHJcbiAgICAgICAgaWYgKHZhbHVlIDwgMCAmJiBzdWIgPT09IDAgJiYgdGhpc1tvZmZzZXQgKyBpICsgMV0gIT09IDApIHtcclxuICAgICAgICAgICAgc3ViID0gMVxyXG4gICAgICAgIH1cclxuICAgICAgICB0aGlzW29mZnNldCArIGldID0gKCh2YWx1ZSAvIG11bCkgPj4gMCkgLSBzdWIgJiAweEZGXHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIG9mZnNldCArIGJ5dGVMZW5ndGhcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDggPSBmdW5jdGlvbiB3cml0ZUludDggKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XHJcbiAgICB2YWx1ZSA9ICt2YWx1ZVxyXG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxyXG4gICAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgMSwgMHg3ZiwgLTB4ODApXHJcbiAgICBpZiAoIUJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB2YWx1ZSA9IE1hdGguZmxvb3IodmFsdWUpXHJcbiAgICBpZiAodmFsdWUgPCAwKSB2YWx1ZSA9IDB4ZmYgKyB2YWx1ZSArIDFcclxuICAgIHRoaXNbb2Zmc2V0XSA9ICh2YWx1ZSAmIDB4ZmYpXHJcbiAgICByZXR1cm4gb2Zmc2V0ICsgMVxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZMRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIHZhbHVlID0gK3ZhbHVlXHJcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXHJcbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcclxuICAgICAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxyXG4gICAgICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2Zmc2V0ICsgMlxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MTZCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MTZCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIHZhbHVlID0gK3ZhbHVlXHJcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCAyLCAweDdmZmYsIC0weDgwMDApXHJcbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcclxuICAgICAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgPj4+IDgpXHJcbiAgICAgICAgdGhpc1tvZmZzZXQgKyAxXSA9ICh2YWx1ZSAmIDB4ZmYpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9iamVjdFdyaXRlVUludDE2KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIG9mZnNldCArIDJcclxufVxyXG5cclxuQnVmZmVyLnByb3RvdHlwZS53cml0ZUludDMyTEUgPSBmdW5jdGlvbiB3cml0ZUludDMyTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XHJcbiAgICB2YWx1ZSA9ICt2YWx1ZVxyXG4gICAgb2Zmc2V0ID0gb2Zmc2V0IHwgMFxyXG4gICAgaWYgKCFub0Fzc2VydCkgY2hlY2tJbnQodGhpcywgdmFsdWUsIG9mZnNldCwgNCwgMHg3ZmZmZmZmZiwgLTB4ODAwMDAwMDApXHJcbiAgICBpZiAoQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcclxuICAgICAgICB0aGlzW29mZnNldF0gPSAodmFsdWUgJiAweGZmKVxyXG4gICAgICAgIHRoaXNbb2Zmc2V0ICsgMV0gPSAodmFsdWUgPj4+IDgpXHJcbiAgICAgICAgdGhpc1tvZmZzZXQgKyAyXSA9ICh2YWx1ZSA+Pj4gMTYpXHJcbiAgICAgICAgdGhpc1tvZmZzZXQgKyAzXSA9ICh2YWx1ZSA+Pj4gMjQpXHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIG9iamVjdFdyaXRlVUludDMyKHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUpXHJcbiAgICB9XHJcbiAgICByZXR1cm4gb2Zmc2V0ICsgNFxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLndyaXRlSW50MzJCRSA9IGZ1bmN0aW9uIHdyaXRlSW50MzJCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIHZhbHVlID0gK3ZhbHVlXHJcbiAgICBvZmZzZXQgPSBvZmZzZXQgfCAwXHJcbiAgICBpZiAoIW5vQXNzZXJ0KSBjaGVja0ludCh0aGlzLCB2YWx1ZSwgb2Zmc2V0LCA0LCAweDdmZmZmZmZmLCAtMHg4MDAwMDAwMClcclxuICAgIGlmICh2YWx1ZSA8IDApIHZhbHVlID0gMHhmZmZmZmZmZiArIHZhbHVlICsgMVxyXG4gICAgaWYgKEJ1ZmZlci5UWVBFRF9BUlJBWV9TVVBQT1JUKSB7XHJcbiAgICAgICAgdGhpc1tvZmZzZXRdID0gKHZhbHVlID4+PiAyNClcclxuICAgICAgICB0aGlzW29mZnNldCArIDFdID0gKHZhbHVlID4+PiAxNilcclxuICAgICAgICB0aGlzW29mZnNldCArIDJdID0gKHZhbHVlID4+PiA4KVxyXG4gICAgICAgIHRoaXNbb2Zmc2V0ICsgM10gPSAodmFsdWUgJiAweGZmKVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBvYmplY3RXcml0ZVVJbnQzMih0aGlzLCB2YWx1ZSwgb2Zmc2V0LCBmYWxzZSlcclxuICAgIH1cclxuICAgIHJldHVybiBvZmZzZXQgKyA0XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGNoZWNrSUVFRTc1NCAoYnVmLCB2YWx1ZSwgb2Zmc2V0LCBleHQsIG1heCwgbWluKSB7XHJcbiAgICBpZiAob2Zmc2V0ICsgZXh0ID4gYnVmLmxlbmd0aCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXHJcbiAgICBpZiAob2Zmc2V0IDwgMCkgdGhyb3cgbmV3IFJhbmdlRXJyb3IoJ0luZGV4IG91dCBvZiByYW5nZScpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIHdyaXRlRmxvYXQgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xyXG4gICAgaWYgKCFub0Fzc2VydCkge1xyXG4gICAgICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDQsIDMuNDAyODIzNDY2Mzg1Mjg4NmUrMzgsIC0zLjQwMjgyMzQ2NjM4NTI4ODZlKzM4KVxyXG4gICAgfVxyXG4gICAgaWVlZTc1NC53cml0ZShidWYsIHZhbHVlLCBvZmZzZXQsIGxpdHRsZUVuZGlhbiwgMjMsIDQpXHJcbiAgICByZXR1cm4gb2Zmc2V0ICsgNFxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRMRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRMRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIHRydWUsIG5vQXNzZXJ0KVxyXG59XHJcblxyXG5CdWZmZXIucHJvdG90eXBlLndyaXRlRmxvYXRCRSA9IGZ1bmN0aW9uIHdyaXRlRmxvYXRCRSAodmFsdWUsIG9mZnNldCwgbm9Bc3NlcnQpIHtcclxuICAgIHJldHVybiB3cml0ZUZsb2F0KHRoaXMsIHZhbHVlLCBvZmZzZXQsIGZhbHNlLCBub0Fzc2VydClcclxufVxyXG5cclxuZnVuY3Rpb24gd3JpdGVEb3VibGUgKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCBub0Fzc2VydCkge1xyXG4gICAgaWYgKCFub0Fzc2VydCkge1xyXG4gICAgICAgIGNoZWNrSUVFRTc1NChidWYsIHZhbHVlLCBvZmZzZXQsIDgsIDEuNzk3NjkzMTM0ODYyMzE1N0UrMzA4LCAtMS43OTc2OTMxMzQ4NjIzMTU3RSszMDgpXHJcbiAgICB9XHJcbiAgICBpZWVlNzU0LndyaXRlKGJ1ZiwgdmFsdWUsIG9mZnNldCwgbGl0dGxlRW5kaWFuLCA1MiwgOClcclxuICAgIHJldHVybiBvZmZzZXQgKyA4XHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVMRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlTEUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XHJcbiAgICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgdHJ1ZSwgbm9Bc3NlcnQpXHJcbn1cclxuXHJcbkJ1ZmZlci5wcm90b3R5cGUud3JpdGVEb3VibGVCRSA9IGZ1bmN0aW9uIHdyaXRlRG91YmxlQkUgKHZhbHVlLCBvZmZzZXQsIG5vQXNzZXJ0KSB7XHJcbiAgICByZXR1cm4gd3JpdGVEb3VibGUodGhpcywgdmFsdWUsIG9mZnNldCwgZmFsc2UsIG5vQXNzZXJ0KVxyXG59XHJcblxyXG4vLyBjb3B5KHRhcmdldEJ1ZmZlciwgdGFyZ2V0U3RhcnQ9MCwgc291cmNlU3RhcnQ9MCwgc291cmNlRW5kPWJ1ZmZlci5sZW5ndGgpXHJcbkJ1ZmZlci5wcm90b3R5cGUuY29weSA9IGZ1bmN0aW9uIGNvcHkgKHRhcmdldCwgdGFyZ2V0U3RhcnQsIHN0YXJ0LCBlbmQpIHtcclxuICAgIGlmICghc3RhcnQpIHN0YXJ0ID0gMFxyXG4gICAgaWYgKCFlbmQgJiYgZW5kICE9PSAwKSBlbmQgPSB0aGlzLmxlbmd0aFxyXG4gICAgaWYgKHRhcmdldFN0YXJ0ID49IHRhcmdldC5sZW5ndGgpIHRhcmdldFN0YXJ0ID0gdGFyZ2V0Lmxlbmd0aFxyXG4gICAgaWYgKCF0YXJnZXRTdGFydCkgdGFyZ2V0U3RhcnQgPSAwXHJcbiAgICBpZiAoZW5kID4gMCAmJiBlbmQgPCBzdGFydCkgZW5kID0gc3RhcnRcclxuXHJcbiAgICAvLyBDb3B5IDAgYnl0ZXM7IHdlJ3JlIGRvbmVcclxuICAgIGlmIChlbmQgPT09IHN0YXJ0KSByZXR1cm4gMFxyXG4gICAgaWYgKHRhcmdldC5sZW5ndGggPT09IDAgfHwgdGhpcy5sZW5ndGggPT09IDApIHJldHVybiAwXHJcblxyXG4gICAgLy8gRmF0YWwgZXJyb3IgY29uZGl0aW9uc1xyXG4gICAgaWYgKHRhcmdldFN0YXJ0IDwgMCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd0YXJnZXRTdGFydCBvdXQgb2YgYm91bmRzJylcclxuICAgIH1cclxuICAgIGlmIChzdGFydCA8IDAgfHwgc3RhcnQgPj0gdGhpcy5sZW5ndGgpIHRocm93IG5ldyBSYW5nZUVycm9yKCdzb3VyY2VTdGFydCBvdXQgb2YgYm91bmRzJylcclxuICAgIGlmIChlbmQgPCAwKSB0aHJvdyBuZXcgUmFuZ2VFcnJvcignc291cmNlRW5kIG91dCBvZiBib3VuZHMnKVxyXG5cclxuICAgIC8vIEFyZSB3ZSBvb2I/XHJcbiAgICBpZiAoZW5kID4gdGhpcy5sZW5ndGgpIGVuZCA9IHRoaXMubGVuZ3RoXHJcbiAgICBpZiAodGFyZ2V0Lmxlbmd0aCAtIHRhcmdldFN0YXJ0IDwgZW5kIC0gc3RhcnQpIHtcclxuICAgICAgICBlbmQgPSB0YXJnZXQubGVuZ3RoIC0gdGFyZ2V0U3RhcnQgKyBzdGFydFxyXG4gICAgfVxyXG5cclxuICAgIHZhciBsZW4gPSBlbmQgLSBzdGFydFxyXG4gICAgdmFyIGlcclxuXHJcbiAgICBpZiAodGhpcyA9PT0gdGFyZ2V0ICYmIHN0YXJ0IDwgdGFyZ2V0U3RhcnQgJiYgdGFyZ2V0U3RhcnQgPCBlbmQpIHtcclxuICAgICAgICAvLyBkZXNjZW5kaW5nIGNvcHkgZnJvbSBlbmRcclxuICAgICAgICBmb3IgKGkgPSBsZW4gLSAxOyBpID49IDA7IC0taSkge1xyXG4gICAgICAgICAgICB0YXJnZXRbaSArIHRhcmdldFN0YXJ0XSA9IHRoaXNbaSArIHN0YXJ0XVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAobGVuIDwgMTAwMCB8fCAhQnVmZmVyLlRZUEVEX0FSUkFZX1NVUFBPUlQpIHtcclxuICAgICAgICAvLyBhc2NlbmRpbmcgY29weSBmcm9tIHN0YXJ0XHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbjsgKytpKSB7XHJcbiAgICAgICAgICAgIHRhcmdldFtpICsgdGFyZ2V0U3RhcnRdID0gdGhpc1tpICsgc3RhcnRdXHJcbiAgICAgICAgfVxyXG4gICAgfSBlbHNlIHtcclxuICAgICAgICBVaW50OEFycmF5LnByb3RvdHlwZS5zZXQuY2FsbChcclxuICAgICAgICAgICAgdGFyZ2V0LFxyXG4gICAgICAgICAgICB0aGlzLnN1YmFycmF5KHN0YXJ0LCBzdGFydCArIGxlbiksXHJcbiAgICAgICAgICAgIHRhcmdldFN0YXJ0XHJcbiAgICAgICAgKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBsZW5cclxufVxyXG5cclxuLy8gVXNhZ2U6XHJcbi8vICAgIGJ1ZmZlci5maWxsKG51bWJlclssIG9mZnNldFssIGVuZF1dKVxyXG4vLyAgICBidWZmZXIuZmlsbChidWZmZXJbLCBvZmZzZXRbLCBlbmRdXSlcclxuLy8gICAgYnVmZmVyLmZpbGwoc3RyaW5nWywgb2Zmc2V0WywgZW5kXV1bLCBlbmNvZGluZ10pXHJcbkJ1ZmZlci5wcm90b3R5cGUuZmlsbCA9IGZ1bmN0aW9uIGZpbGwgKHZhbCwgc3RhcnQsIGVuZCwgZW5jb2RpbmcpIHtcclxuICAgIC8vIEhhbmRsZSBzdHJpbmcgY2FzZXM6XHJcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICBpZiAodHlwZW9mIHN0YXJ0ID09PSAnc3RyaW5nJykge1xyXG4gICAgICAgICAgICBlbmNvZGluZyA9IHN0YXJ0XHJcbiAgICAgICAgICAgIHN0YXJ0ID0gMFxyXG4gICAgICAgICAgICBlbmQgPSB0aGlzLmxlbmd0aFxyXG4gICAgICAgIH0gZWxzZSBpZiAodHlwZW9mIGVuZCA9PT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgZW5jb2RpbmcgPSBlbmRcclxuICAgICAgICAgICAgZW5kID0gdGhpcy5sZW5ndGhcclxuICAgICAgICB9XHJcbiAgICAgICAgaWYgKHZhbC5sZW5ndGggPT09IDEpIHtcclxuICAgICAgICAgICAgdmFyIGNvZGUgPSB2YWwuY2hhckNvZGVBdCgwKVxyXG4gICAgICAgICAgICBpZiAoY29kZSA8IDI1Nikge1xyXG4gICAgICAgICAgICAgICAgdmFsID0gY29kZVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmIChlbmNvZGluZyAhPT0gdW5kZWZpbmVkICYmIHR5cGVvZiBlbmNvZGluZyAhPT0gJ3N0cmluZycpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignZW5jb2RpbmcgbXVzdCBiZSBhIHN0cmluZycpXHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICh0eXBlb2YgZW5jb2RpbmcgPT09ICdzdHJpbmcnICYmICFCdWZmZXIuaXNFbmNvZGluZyhlbmNvZGluZykpIHtcclxuICAgICAgICAgICAgdGhyb3cgbmV3IFR5cGVFcnJvcignVW5rbm93biBlbmNvZGluZzogJyArIGVuY29kaW5nKVxyXG4gICAgICAgIH1cclxuICAgIH0gZWxzZSBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICB2YWwgPSB2YWwgJiAyNTVcclxuICAgIH1cclxuXHJcbiAgICAvLyBJbnZhbGlkIHJhbmdlcyBhcmUgbm90IHNldCB0byBhIGRlZmF1bHQsIHNvIGNhbiByYW5nZSBjaGVjayBlYXJseS5cclxuICAgIGlmIChzdGFydCA8IDAgfHwgdGhpcy5sZW5ndGggPCBzdGFydCB8fCB0aGlzLmxlbmd0aCA8IGVuZCkge1xyXG4gICAgICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCdPdXQgb2YgcmFuZ2UgaW5kZXgnKVxyXG4gICAgfVxyXG5cclxuICAgIGlmIChlbmQgPD0gc3RhcnQpIHtcclxuICAgICAgICByZXR1cm4gdGhpc1xyXG4gICAgfVxyXG5cclxuICAgIHN0YXJ0ID0gc3RhcnQgPj4+IDBcclxuICAgIGVuZCA9IGVuZCA9PT0gdW5kZWZpbmVkID8gdGhpcy5sZW5ndGggOiBlbmQgPj4+IDBcclxuXHJcbiAgICBpZiAoIXZhbCkgdmFsID0gMFxyXG5cclxuICAgIHZhciBpXHJcbiAgICBpZiAodHlwZW9mIHZhbCA9PT0gJ251bWJlcicpIHtcclxuICAgICAgICBmb3IgKGkgPSBzdGFydDsgaSA8IGVuZDsgKytpKSB7XHJcbiAgICAgICAgICAgIHRoaXNbaV0gPSB2YWxcclxuICAgICAgICB9XHJcbiAgICB9IGVsc2Uge1xyXG4gICAgICAgIHZhciBieXRlcyA9IGludGVybmFsSXNCdWZmZXIodmFsKVxyXG4gICAgICAgICAgICA/IHZhbFxyXG4gICAgICAgICAgICA6IHV0ZjhUb0J5dGVzKG5ldyBCdWZmZXIodmFsLCBlbmNvZGluZykudG9TdHJpbmcoKSlcclxuICAgICAgICB2YXIgbGVuID0gYnl0ZXMubGVuZ3RoXHJcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGVuZCAtIHN0YXJ0OyArK2kpIHtcclxuICAgICAgICAgICAgdGhpc1tpICsgc3RhcnRdID0gYnl0ZXNbaSAlIGxlbl1cclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIHRoaXNcclxufVxyXG5cclxuLy8gSEVMUEVSIEZVTkNUSU9OU1xyXG4vLyA9PT09PT09PT09PT09PT09XHJcblxyXG5cclxuZnVuY3Rpb24gc3RyaW5ndHJpbSAoc3RyKSB7XHJcbiAgICBpZiAoc3RyLnRyaW0pIHJldHVybiBzdHIudHJpbSgpXHJcbiAgICByZXR1cm4gc3RyLnJlcGxhY2UoL15cXHMrfFxccyskL2csICcnKVxyXG59XHJcblxyXG5mdW5jdGlvbiB0b0hleCAobikge1xyXG4gICAgaWYgKG4gPCAxNikgcmV0dXJuICcwJyArIG4udG9TdHJpbmcoMTYpXHJcbiAgICByZXR1cm4gbi50b1N0cmluZygxNilcclxufVxyXG5cclxuZnVuY3Rpb24gdXRmOFRvQnl0ZXMgKHN0cmluZywgdW5pdHMpIHtcclxuICAgIHVuaXRzID0gdW5pdHMgfHwgSW5maW5pdHlcclxuICAgIHZhciBjb2RlUG9pbnRcclxuICAgIHZhciBsZW5ndGggPSBzdHJpbmcubGVuZ3RoXHJcbiAgICB2YXIgbGVhZFN1cnJvZ2F0ZSA9IG51bGxcclxuICAgIHZhciBieXRlcyA9IFtdXHJcblxyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGNvZGVQb2ludCA9IHN0cmluZy5jaGFyQ29kZUF0KGkpXHJcblxyXG4gICAgICAgIC8vIGlzIHN1cnJvZ2F0ZSBjb21wb25lbnRcclxuICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEN0ZGICYmIGNvZGVQb2ludCA8IDB4RTAwMCkge1xyXG4gICAgICAgICAgICAvLyBsYXN0IGNoYXIgd2FzIGEgbGVhZFxyXG4gICAgICAgICAgICBpZiAoIWxlYWRTdXJyb2dhdGUpIHtcclxuICAgICAgICAgICAgICAgIC8vIG5vIGxlYWQgeWV0XHJcbiAgICAgICAgICAgICAgICBpZiAoY29kZVBvaW50ID4gMHhEQkZGKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gdW5leHBlY3RlZCB0cmFpbFxyXG4gICAgICAgICAgICAgICAgICAgIGlmICgodW5pdHMgLT0gMykgPiAtMSkgYnl0ZXMucHVzaCgweEVGLCAweEJGLCAweEJEKVxyXG4gICAgICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgICAgICB9IGVsc2UgaWYgKGkgKyAxID09PSBsZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyB1bnBhaXJlZCBsZWFkXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA+IC0xKSBieXRlcy5wdXNoKDB4RUYsIDB4QkYsIDB4QkQpXHJcbiAgICAgICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgICAgICAvLyB2YWxpZCBsZWFkXHJcbiAgICAgICAgICAgICAgICBsZWFkU3Vycm9nYXRlID0gY29kZVBvaW50XHJcblxyXG4gICAgICAgICAgICAgICAgY29udGludWVcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgLy8gMiBsZWFkcyBpbiBhIHJvd1xyXG4gICAgICAgICAgICBpZiAoY29kZVBvaW50IDwgMHhEQzAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcclxuICAgICAgICAgICAgICAgIGxlYWRTdXJyb2dhdGUgPSBjb2RlUG9pbnRcclxuICAgICAgICAgICAgICAgIGNvbnRpbnVlXHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIC8vIHZhbGlkIHN1cnJvZ2F0ZSBwYWlyXHJcbiAgICAgICAgICAgIGNvZGVQb2ludCA9IChsZWFkU3Vycm9nYXRlIC0gMHhEODAwIDw8IDEwIHwgY29kZVBvaW50IC0gMHhEQzAwKSArIDB4MTAwMDBcclxuICAgICAgICB9IGVsc2UgaWYgKGxlYWRTdXJyb2dhdGUpIHtcclxuICAgICAgICAgICAgLy8gdmFsaWQgYm1wIGNoYXIsIGJ1dCBsYXN0IGNoYXIgd2FzIGEgbGVhZFxyXG4gICAgICAgICAgICBpZiAoKHVuaXRzIC09IDMpID4gLTEpIGJ5dGVzLnB1c2goMHhFRiwgMHhCRiwgMHhCRClcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxlYWRTdXJyb2dhdGUgPSBudWxsXHJcblxyXG4gICAgICAgIC8vIGVuY29kZSB1dGY4XHJcbiAgICAgICAgaWYgKGNvZGVQb2ludCA8IDB4ODApIHtcclxuICAgICAgICAgICAgaWYgKCh1bml0cyAtPSAxKSA8IDApIGJyZWFrXHJcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goY29kZVBvaW50KVxyXG4gICAgICAgIH0gZWxzZSBpZiAoY29kZVBvaW50IDwgMHg4MDApIHtcclxuICAgICAgICAgICAgaWYgKCh1bml0cyAtPSAyKSA8IDApIGJyZWFrXHJcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICBjb2RlUG9pbnQgPj4gMHg2IHwgMHhDMCxcclxuICAgICAgICAgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTAwMDApIHtcclxuICAgICAgICAgICAgaWYgKCh1bml0cyAtPSAzKSA8IDApIGJyZWFrXHJcbiAgICAgICAgICAgIGJ5dGVzLnB1c2goXHJcbiAgICAgICAgICAgICAgICBjb2RlUG9pbnQgPj4gMHhDIHwgMHhFMCxcclxuICAgICAgICAgICAgICAgIGNvZGVQb2ludCA+PiAweDYgJiAweDNGIHwgMHg4MCxcclxuICAgICAgICAgICAgICAgIGNvZGVQb2ludCAmIDB4M0YgfCAweDgwXHJcbiAgICAgICAgICAgIClcclxuICAgICAgICB9IGVsc2UgaWYgKGNvZGVQb2ludCA8IDB4MTEwMDAwKSB7XHJcbiAgICAgICAgICAgIGlmICgodW5pdHMgLT0gNCkgPCAwKSBicmVha1xyXG4gICAgICAgICAgICBieXRlcy5wdXNoKFxyXG4gICAgICAgICAgICAgICAgY29kZVBvaW50ID4+IDB4MTIgfCAweEYwLFxyXG4gICAgICAgICAgICAgICAgY29kZVBvaW50ID4+IDB4QyAmIDB4M0YgfCAweDgwLFxyXG4gICAgICAgICAgICAgICAgY29kZVBvaW50ID4+IDB4NiAmIDB4M0YgfCAweDgwLFxyXG4gICAgICAgICAgICAgICAgY29kZVBvaW50ICYgMHgzRiB8IDB4ODBcclxuICAgICAgICAgICAgKVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBjb2RlIHBvaW50JylcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgcmV0dXJuIGJ5dGVzXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGFzY2lpVG9CeXRlcyAoc3RyKSB7XHJcbiAgICB2YXIgYnl0ZUFycmF5ID0gW11cclxuICAgIGZvciAodmFyIGkgPSAwOyBpIDwgc3RyLmxlbmd0aDsgKytpKSB7XHJcbiAgICAgICAgLy8gTm9kZSdzIGNvZGUgc2VlbXMgdG8gYmUgZG9pbmcgdGhpcyBhbmQgbm90ICYgMHg3Ri4uXHJcbiAgICAgICAgYnl0ZUFycmF5LnB1c2goc3RyLmNoYXJDb2RlQXQoaSkgJiAweEZGKVxyXG4gICAgfVxyXG4gICAgcmV0dXJuIGJ5dGVBcnJheVxyXG59XHJcblxyXG5mdW5jdGlvbiB1dGYxNmxlVG9CeXRlcyAoc3RyLCB1bml0cykge1xyXG4gICAgdmFyIGMsIGhpLCBsb1xyXG4gICAgdmFyIGJ5dGVBcnJheSA9IFtdXHJcbiAgICBmb3IgKHZhciBpID0gMDsgaSA8IHN0ci5sZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGlmICgodW5pdHMgLT0gMikgPCAwKSBicmVha1xyXG5cclxuICAgICAgICBjID0gc3RyLmNoYXJDb2RlQXQoaSlcclxuICAgICAgICBoaSA9IGMgPj4gOFxyXG4gICAgICAgIGxvID0gYyAlIDI1NlxyXG4gICAgICAgIGJ5dGVBcnJheS5wdXNoKGxvKVxyXG4gICAgICAgIGJ5dGVBcnJheS5wdXNoKGhpKVxyXG4gICAgfVxyXG5cclxuICAgIHJldHVybiBieXRlQXJyYXlcclxufVxyXG5cclxuXHJcbmZ1bmN0aW9uIGJsaXRCdWZmZXIgKHNyYywgZHN0LCBvZmZzZXQsIGxlbmd0aCkge1xyXG4gICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGg7ICsraSkge1xyXG4gICAgICAgIGlmICgoaSArIG9mZnNldCA+PSBkc3QubGVuZ3RoKSB8fCAoaSA+PSBzcmMubGVuZ3RoKSkgYnJlYWtcclxuICAgICAgICBkc3RbaSArIG9mZnNldF0gPSBzcmNbaV1cclxuICAgIH1cclxuICAgIHJldHVybiBpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzbmFuICh2YWwpIHtcclxuICAgIHJldHVybiB2YWwgIT09IHZhbCAvLyBlc2xpbnQtZGlzYWJsZS1saW5lIG5vLXNlbGYtY29tcGFyZVxyXG59XHJcblxyXG5cclxuLy8gdGhlIGZvbGxvd2luZyBpcyBmcm9tIGlzLWJ1ZmZlciwgYWxzbyBieSBGZXJvc3MgQWJvdWtoYWRpamVoIGFuZCB3aXRoIHNhbWUgbGlzZW5jZVxyXG4vLyBUaGUgX2lzQnVmZmVyIGNoZWNrIGlzIGZvciBTYWZhcmkgNS03IHN1cHBvcnQsIGJlY2F1c2UgaXQncyBtaXNzaW5nXHJcbi8vIE9iamVjdC5wcm90b3R5cGUuY29uc3RydWN0b3IuIFJlbW92ZSB0aGlzIGV2ZW50dWFsbHlcclxuZnVuY3Rpb24gaXNCdWZmZXIob2JqKSB7XHJcbiAgcmV0dXJuIG9iaiAhPSBudWxsICYmICghIW9iai5faXNCdWZmZXIgfHwgaXNGYXN0QnVmZmVyKG9iaikgfHwgaXNTbG93QnVmZmVyKG9iaikpXHJcbn1cclxuXHJcbmZ1bmN0aW9uIGlzRmFzdEJ1ZmZlciAob2JqKSB7XHJcbiAgICByZXR1cm4gISFvYmouY29uc3RydWN0b3IgJiYgdHlwZW9mIG9iai5jb25zdHJ1Y3Rvci5pc0J1ZmZlciA9PT0gJ2Z1bmN0aW9uJyAmJiBvYmouY29uc3RydWN0b3IuaXNCdWZmZXIob2JqKVxyXG59XHJcblxyXG4vLyBGb3IgTm9kZSB2MC4xMCBzdXBwb3J0LiBSZW1vdmUgdGhpcyBldmVudHVhbGx5LlxyXG5mdW5jdGlvbiBpc1Nsb3dCdWZmZXIgKG9iaikge1xyXG4gICAgcmV0dXJuIHR5cGVvZiBvYmoucmVhZEZsb2F0TEUgPT09ICdmdW5jdGlvbicgJiYgdHlwZW9mIG9iai5zbGljZSA9PT0gJ2Z1bmN0aW9uJyAmJiBpc0Zhc3RCdWZmZXIob2JqLnNsaWNlKDAsIDApKVxyXG59XHJcbiIsIi8qKlxyXG4gKiDnvJbnoIHlt6XlhbfnsbtcclxuICovXHJcbmNsYXNzIENvZGVUb29sIHtcclxuXHJcbiAgICBjb25zdHJ1Y3RvcigpIHt9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiAvL+eUn+aIkOmaj+acuuWktFxyXG4gICAgICogQHJldHVybnMge1tdfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgZ2V0SGVhZGVyQXJyYXkoaGVhZGVyTGVuZ3RoKSB7XHJcbiAgICAgICAgbGV0IGhhcnIgPSBbXTtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlYWRlckxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGhhcnJbaV0gPSB0aGlzLl9nZXRSYW5kb21OdW0oKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIGhhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnlJ/miJDpmo/mnLrmlbDlpLRcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgX2dldFJhbmRvbU51bSgpIHtcclxuICAgICAgICBsZXQgUmFuZ2UgPSA4MDtcclxuICAgICAgICBsZXQgUmFuZCA9IE1hdGgucmFuZG9tKCk7XHJcbiAgICAgICAgcmV0dXJuICg1MCArIE1hdGgucm91bmQoUmFuZCAqIFJhbmdlKSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlrZfnrKbkuLLovaxieXRl5pWw57uEXHJcbiAgICAgKiBAcGFyYW0gc3RyIOWtl+espuS4slxyXG4gICAgICogQHBhcmFtIGVuY29kaW5nIOWtl+espuS4sue8lueggTvpu5jorqR1dGY4XHJcbiAgICAgKiBAcmV0dXJucyB7W119IOWtl+iKguaVsOe7hFxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgc3RyaW5nVG9CeXRlKHN0ciwgZW5jb2RpbmcpIHtcclxuICAgICAgICBpZiAoZW5jb2RpbmcgPT09IHVuZGVmaW5lZCkge1xyXG4gICAgICAgICAgICBlbmNvZGluZyA9IFwidXRmOFwiO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgYnl0ZXMgPSBbXTtcclxuICAgICAgICBsZXQgYnVmZmVyID0gQnVmZmVyLmZyb20oc3RyLCBlbmNvZGluZyk7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBidWZmZXIubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgYnl0ZXMucHVzaChidWZmZXJbaV0pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIGJ5dGVzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogYnl0ZeaVsOe7hOi9rOWtl+espuS4slxyXG4gICAgICogQHBhcmFtIGJ5dGVzIOWtl+iKguaVsOe7hFxyXG4gICAgICogQHBhcmFtIGVuY29kaW5nIOWtl+espuS4sue8lueggTvpu5jorqR1dGY4XHJcbiAgICAgKiBAcmV0dXJucyB7c3RyaW5nfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYnl0ZVRvU3RyaW5nKGJ5dGVzLCBlbmNvZGluZykge1xyXG4gICAgICAgIGlmIChlbmNvZGluZyA9PT0gdW5kZWZpbmVkKSB7XHJcbiAgICAgICAgICAgIGVuY29kaW5nID0gXCJ1dGY4XCI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShieXRlcykudG9TdHJpbmcoZW5jb2RpbmcpO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5pWw5a2X6L2sYnl0ZeaVsOe7hFxyXG4gICAgICogQHBhcmFtIG51bVxyXG4gICAgICogQHJldHVybnMge251bWJlcltdfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgaW50VG9CeXRlcyhudW0pIHtcclxuICAgICAgICByZXR1cm4gWyhudW0gPj4gMjQpICYgMHgwMGZmLCAobnVtID4+IDE2KSAmIDB4MDBmZiwgKG51bSA+PiA4KSAmIDB4MDBmZiwgbnVtICYgMHgwMGZmXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIGJ5dGXmlbDnu4TovazmlbDlrZdcclxuICAgICAqIEBwYXJhbSBieXRlc1xyXG4gICAgICogQHJldHVybnMge251bWJlcn1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGJ5dGVzVG9JbnQoYnl0ZXMpIHtcclxuICAgICAgICByZXR1cm4gYnl0ZXNbMF0gPDwgMjQgfCBieXRlc1sxXSA8PCAxNiB8IGJ5dGVzWzJdIDw8IDggfCBieXRlc1szXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIHZhcmludOi9rOaVsOWtl1xyXG4gICAgICogQHBhcmFtIGJ1ZmZlciDljZXkuKrmlbDlrZfnmoR2YXJpbnTnvJbnoIFcclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB2YXJpbnRUb0ludChidWZmZXIpIHtcclxuICAgICAgICBsZXQgaW50QnVmZmVyID0gW107XHJcbiAgICAgICAgbGV0IGhpZ2hCdWZmZXIgPSBbXTtcclxuICAgICAgICBsZXQgaiA9IDM7XHJcbiAgICAgICAgbGV0IG9mZnNldCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IGJ1ZmZlci5sZW5ndGggLSAxOyBpID49IDA7IGktLSkge1xyXG4gICAgICAgICAgICBpZiAoaSAtIDEgPj0gMCkge1xyXG4gICAgICAgICAgICAgICAgaGlnaEJ1ZmZlclswXSA9IChidWZmZXJbaSAtIDFdIDw8ICg3IC0gb2Zmc2V0KSk7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBoaWdoQnVmZmVyWzBdID0gMDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoaiA9PT0gLTEpIHtcclxuICAgICAgICAgICAgICAgIGJyZWFrO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGludEJ1ZmZlcltqXSA9ICgoYnVmZmVyW2ldICYgMHg3ZikgPj4gb2Zmc2V0IHwgaGlnaEJ1ZmZlclswXSk7XHJcbiAgICAgICAgICAgIGotLTtcclxuICAgICAgICAgICAgb2Zmc2V0Kys7XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgdCA9IGludEJ1ZmZlclswXSA8PCAyNCAmIDB4ZmYwMDAwMDAgfCBpbnRCdWZmZXJbMV0gPDwgMTYgJiAweDAwZmYwMDAwIHwgaW50QnVmZmVyWzJdIDw8IDggJiAweDAwMDBmZjAwIHwgaW50QnVmZmVyWzNdICYgMHgwMDAwMDBmZjtcclxuICAgICAgICB0ID0gKHQgPj4gMSkgXiAtKHQgJiAxKTtcclxuICAgICAgICByZXR1cm4gdDtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaVsOWtl+i9rHZhcmludOe8lueggVxyXG4gICAgICogQHBhcmFtIG51bVxyXG4gICAgICogQHJldHVybnMge1tdfG51bWJlcltdfVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgaW50VG9WYXJpbnQobnVtKSB7XHJcbiAgICAgICAgaWYgKG51bSA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm4gWzBdO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbnVtID0gdGhpcy5femlnWmFnRW5jb2RpbmcobnVtKTtcclxuICAgICAgICBsZXQgYnVmZmVyID0gW107XHJcbiAgICAgICAgbGV0IG5vdztcclxuICAgICAgICBsZXQgaGlnaCA9IDA7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDU7IGkgPiAwOyBpLS0pIHtcclxuICAgICAgICAgICAgbm93ID0gbnVtID4+ICgoaSAtIDEpICogNykgJiAweDdmO1xyXG4gICAgICAgICAgICBpZiAoaGlnaCAhPT0gMCkge1xyXG4gICAgICAgICAgICAgICAgbm93ID0gbm93IHwgMHg4MDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAobm93ICE9PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBidWZmZXIucHVzaChub3cpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGhpZ2ggPSBub3c7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBidWZmZXI7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICogdmFyaW5057yW56CB6L2s5pWw5a2X5pWw57uEXHJcbiAgICAgKiBAcGFyYW0gYnVmZmVyXHJcbiAgICAgKiBAcmV0dXJucyB7W119XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyB2YXJpbnRUb0ludEFycmF5KGJ1ZmZlcikge1xyXG4gICAgICAgIGxldCB2YXJpbnRDb2RlID0gW107XHJcbiAgICAgICAgbGV0IGhpZ2g7XHJcbiAgICAgICAgbGV0IGJmX2luZGV4ID0gMDtcclxuICAgICAgICBsZXQgbnVtcyA9IFtdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgYnVmZmVyLmxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgIGhpZ2ggPSAweDAwMDAwMDAwIHwgKGJ1ZmZlcltpXSA+PiA3KSAmIDB4MDE7XHJcbiAgICAgICAgICAgIGlmIChoaWdoID09PSAwKSB7XHJcbiAgICAgICAgICAgICAgICBpZiAoYmZfaW5kZXggPiAwICYmIGJmX2luZGV4IDw9IDUpIHtcclxuICAgICAgICAgICAgICAgICAgICBudW1zLnB1c2godGhpcy52YXJpbnRUb0ludCh2YXJpbnRDb2RlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyaW50Q29kZSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgIGJmX2luZGV4ID0gMDtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB2YXJpbnRDb2RlLnB1c2goYnVmZmVyW2ldKTtcclxuICAgICAgICAgICAgYmZfaW5kZXgrKztcclxuXHJcbiAgICAgICAgfVxyXG4gICAgICAgIG51bXMucHVzaCh0aGlzLnZhcmludFRvSW50KHZhcmludENvZGUpKTtcclxuICAgICAgICByZXR1cm4gbnVtcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOaVsOWtl+aVsOe7hOi9rHZhcmludOe8lueggWJ1ZmZlclxyXG4gICAgICogQHBhcmFtIG51bUFycmF5IOaVsOWtl+aVsOe7hFxyXG4gICAgICogQHJldHVybnMge0J1ZmZlcn0gdmFyaW5057yW56CBYnVmZmVyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBpbnRBcnJheVRvVmFyaW50QnVmZmVyKG51bUFycmF5KSB7XHJcbiAgICAgICAgbGV0IGJ5dGVhID0gW107XHJcbiAgICAgICAgbGV0IG51bUJ5dGVzO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgbnVtQXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgbnVtQnl0ZXMgPSB0aGlzLmludFRvVmFyaW50KG51bUFycmF5W2ldKTtcclxuICAgICAgICAgICAgYnl0ZWEucHVzaCguLi5udW1CeXRlcyk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBCdWZmZXIuZnJvbShieXRlYSk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDotJ/mlbDovazmraPmlbDnvJbnoIFcclxuICAgICAqIEBwYXJhbSBudW1cclxuICAgICAqIEByZXR1cm5zIHtudW1iZXJ9XHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgX3ppZ1phZ0VuY29kaW5nKG51bSkge1xyXG4gICAgICAgIHJldHVybiAobnVtID4+IDMxKSBeIChudW0gPDwgMSk7XHJcbiAgICB9XHJcblxyXG59XHJcbm1vZHVsZS5leHBvcnRzID0gQ29kZVRvb2w7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgbWF0dCBvbiAyMDE3LzcvMTYuXHJcbiAqL1xyXG4vL+WHoOS4quWDj+e0oOWPr+S7peeul+aYr+WRveS4rVxyXG5sZXQgX2RpcyA9IDU7XHJcblxyXG5jbGFzcyBHaXNUb29scyB7XHJcbiAgICBzdGF0aWMgcG9pbnREaXN0VG9MaW5lKHgsIHksIHN0YXJ0eCwgc3RhcnR5LCBlbmR4LCBlbmR5KSB7XHJcbiAgICAgICAgbGV0IHNlID0gKHN0YXJ0eCAtIGVuZHgpICogKHN0YXJ0eCAtIGVuZHgpICsgKHN0YXJ0eSAtIGVuZHkpICogKHN0YXJ0eSAtIGVuZHkpO1xyXG4gICAgICAgIGxldCBwID0gKCh4IC0gc3RhcnR4KSAqIChlbmR4IC0gc3RhcnR4KSArICh5IC0gc3RhcnR5KSAqIChlbmR5IC0gc3RhcnR5KSk7XHJcbiAgICAgICAgbGV0IHIgPSBwIC8gc2U7XHJcbiAgICAgICAgbGV0IG91dHggPSBzdGFydHggKyByICogKGVuZHggLSBzdGFydHgpO1xyXG4gICAgICAgIGxldCBvdXR5ID0gc3RhcnR5ICsgciAqIChlbmR5IC0gc3RhcnR5KTtcclxuICAgICAgICBsZXQgZGVzID0gTWF0aC5zcXJ0KCh4IC0gb3V0eCkgKiAoeCAtIG91dHgpICsgKHkgLSBvdXR5KSAqICh5IC0gb3V0eSkpO1xyXG5cclxuICAgICAgICAvL2NvbnNvbGUubG9nKGRlcyk7XHJcbiAgICAgICAgcmV0dXJuIGRlcztcclxuICAgIH1cclxuICAgIHN0YXRpYyBpc1BvaW50T25TZWdtZW50KHB4LCBweSwgcDF4LCBwMXksIHAyeCwgcDJ5KSB7XHJcblxyXG4gICAgICAgIGlmICgocHggLSBfZGlzID4gcDF4ICYmIHB4ICsgX2RpcyA+IHAyeCkgfHwgKHB4ICsgX2RpcyA8IHAxeCAmJiBweCAtIF9kaXMgPCBwMngpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBpZiAoKHB5IC0gX2RpcyA+IHAxeSAmJiBweSArIF9kaXMgPiBwMnkpIHx8IChweSArIF9kaXMgPCBwMXkgJiYgcHkgLSBfZGlzIDwgcDJ5KSkge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICAgICAgbGV0IGQgPSBHaXNUb29scy5wb2ludERpc3RUb0xpbmUocHgsIHB5LCBwMXgsIHAxeSwgcDJ4LCBwMnkpO1xyXG4gICAgICAgIGlmIChkIDwgX2Rpcykge1xyXG4gICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gMDtcclxuICAgICAgICB9XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgcG9pbnRJbkxpbmUocHgsIHB5LCBwb2x5bGluZSkge1xyXG4gICAgICAgIGxldCBmbGFnID0gMDtcclxuICAgICAgICBsZXQgbGluZSA9IFtdO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBvbHlsaW5lWzBdKSkge1xyXG4gICAgICAgICAgICBsaW5lID0gcG9seWxpbmU7XHJcbiAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgbGluZS5wdXNoKHBvbHlsaW5lKTtcclxuICAgICAgICB9XHJcbiAgICAgICAgZm9yICh2YXIgcG9seUluZGV4ID0gMDsgcG9seUluZGV4IDwgbGluZS5sZW5ndGg7IHBvbHlJbmRleCsrKSB7XHJcbiAgICAgICAgICAgIGxldCBzdWJwb2x5ID0gbGluZVtwb2x5SW5kZXhdO1xyXG4gICAgICAgICAgICBsZXQgbGVuZ3RoID0gc3VicG9seS5sZW5ndGggLyAyO1xyXG4gICAgICAgICAgICAvLyBmb3IgKHZhciBpID0gMCwgbCA9IGxlbmd0aCwgaiA9IGwgLSAxOyBpIDwgbDsgaiA9IGksIGkrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggLSAxOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIGxldCBqO1xyXG4gICAgICAgICAgICAgICAgaiA9IGkgKyAxO1xyXG4gICAgICAgICAgICAgICAgbGV0IHN4ID0gc3VicG9seVsyICogaV0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3kgPSBzdWJwb2x5WzIgKiBpICsgMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHggPSBzdWJwb2x5WzIgKiBqXSxcclxuICAgICAgICAgICAgICAgICAgICB0eSA9IHN1YnBvbHlbMiAqIGogKyAxXVxyXG4gICAgICAgICAgICAgICAgaWYgKEdpc1Rvb2xzLmlzUG9pbnRPblNlZ21lbnQocHgsIHB5LCBzeCwgc3ksIHR4LCB0eSkgPT0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHBvaW50SW5Qb2x5Z29uKHB4LCBweSwgcG9seWdlbikge1xyXG4gICAgICAgIGxldCBmbGFnID0gMDtcclxuICAgICAgICBsZXQgcG9seSA9IFtdO1xyXG4gICAgICAgIGlmIChBcnJheS5pc0FycmF5KHBvbHlnZW5bMF0pKSB7XHJcbiAgICAgICAgICAgIHBvbHkgPSBwb2x5Z2VuO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHBvbHkucHVzaChwb2x5Z2VuKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGZvciAodmFyIHBvbHlJbmRleCA9IDA7IHBvbHlJbmRleCA8IHBvbHkubGVuZ3RoOyBwb2x5SW5kZXgrKykge1xyXG4gICAgICAgICAgICBsZXQgc3VicG9seSA9IHBvbHlbcG9seUluZGV4XTtcclxuICAgICAgICAgICAgbGV0IGxlbmd0aCA9IHN1YnBvbHkubGVuZ3RoIC8gMjtcclxuXHJcblxyXG4gICAgICAgICAgICBmb3IgKHZhciBpID0gMCwgbCA9IGxlbmd0aCwgaiA9IGwgLSAxOyBpIDwgbDsgaiA9IGksIGkrKykge1xyXG4gICAgICAgICAgICAgICAgbGV0IHN4ID0gc3VicG9seVsyICogaV0sXHJcbiAgICAgICAgICAgICAgICAgICAgc3kgPSBzdWJwb2x5WzIgKiBpICsgMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHggPSBzdWJwb2x5WzIgKiBqXSxcclxuICAgICAgICAgICAgICAgICAgICB0eSA9IHN1YnBvbHlbMiAqIGogKyAxXVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOeCueS4juWkmui+ueW9oumhtueCuemHjeWQiFxyXG4gICAgICAgICAgICAgICAgaWYgKChzeCA9PT0gcHggJiYgc3kgPT09IHB5KSB8fCAodHggPT09IHB4ICYmIHR5ID09PSBweSkpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMVxyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIC8vIOWIpOaWree6v+auteS4pOerr+eCueaYr+WQpuWcqOWwhOe6v+S4pOS+p1xyXG4gICAgICAgICAgICAgICAgaWYgKChzeSA8IHB5ICYmIHR5ID49IHB5KSB8fCAoc3kgPj0gcHkgJiYgdHkgPCBweSkpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyDnur/mrrXkuIrkuI7lsITnur8gWSDlnZDmoIfnm7jlkIznmoTngrnnmoQgWCDlnZDmoIdcclxuICAgICAgICAgICAgICAgICAgICBsZXQgeCA9IHN4ICsgKHB5IC0gc3kpICogKHR4IC0gc3gpIC8gKHR5IC0gc3kpXHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIOeCueWcqOWkmui+ueW9oueahOi+ueS4ilxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID09PSBweCkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gMVxyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICBpZiAoeCA+IHB4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZsYWcgPSAhZmxhZ1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmxhZyA/IDEgOiAwO1xyXG5cclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgbGluZUludGVyc2VjdHMobGluZTFTdGFydFgsIGxpbmUxU3RhcnRZLCBsaW5lMUVuZFgsIGxpbmUxRW5kWSwgbGluZTJTdGFydFgsIGxpbmUyU3RhcnRZLCBsaW5lMkVuZFgsIGxpbmUyRW5kWSkge1xyXG4gICAgICAgIHZhciBkZW5vbWluYXRvcixcclxuICAgICAgICAgICAgYSxcclxuICAgICAgICAgICAgYixcclxuICAgICAgICAgICAgbnVtZXJhdG9yMSxcclxuICAgICAgICAgICAgbnVtZXJhdG9yMixcclxuICAgICAgICAgICAgb25MaW5lMSA9IGZhbHNlLFxyXG4gICAgICAgICAgICBvbkxpbmUyID0gZmFsc2UsXHJcbiAgICAgICAgICAgIHJlcyA9IFtudWxsLCBudWxsXTtcclxuXHJcbiAgICAgICAgZGVub21pbmF0b3IgPSAoKGxpbmUyRW5kWSAtIGxpbmUyU3RhcnRZKSAqIChsaW5lMUVuZFggLSBsaW5lMVN0YXJ0WCkpIC0gKChsaW5lMkVuZFggLSBsaW5lMlN0YXJ0WCkgKiAobGluZTFFbmRZIC0gbGluZTFTdGFydFkpKTtcclxuICAgICAgICBpZiAoZGVub21pbmF0b3IgPT09IDApIHtcclxuICAgICAgICAgICAgaWYgKHJlc1swXSAhPT0gbnVsbCAmJiByZXNbMV0gIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgYSA9IGxpbmUxU3RhcnRZIC0gbGluZTJTdGFydFk7XHJcbiAgICAgICAgYiA9IGxpbmUxU3RhcnRYIC0gbGluZTJTdGFydFg7XHJcbiAgICAgICAgbnVtZXJhdG9yMSA9ICgobGluZTJFbmRYIC0gbGluZTJTdGFydFgpICogYSkgLSAoKGxpbmUyRW5kWSAtIGxpbmUyU3RhcnRZKSAqIGIpO1xyXG4gICAgICAgIG51bWVyYXRvcjIgPSAoKGxpbmUxRW5kWCAtIGxpbmUxU3RhcnRYKSAqIGEpIC0gKChsaW5lMUVuZFkgLSBsaW5lMVN0YXJ0WSkgKiBiKTtcclxuICAgICAgICBhID0gbnVtZXJhdG9yMSAvIGRlbm9taW5hdG9yO1xyXG4gICAgICAgIGIgPSBudW1lcmF0b3IyIC8gZGVub21pbmF0b3I7XHJcblxyXG4gICAgICAgIC8vIGlmIHdlIGNhc3QgdGhlc2UgbGluZXMgaW5maW5pdGVseSBpbiBib3RoIGRpcmVjdGlvbnMsIHRoZXkgaW50ZXJzZWN0IGhlcmU6XHJcbiAgICAgICAgcmVzWzBdID0gbGluZTFTdGFydFggKyAoYSAqIChsaW5lMUVuZFggLSBsaW5lMVN0YXJ0WCkpO1xyXG4gICAgICAgIHJlc1sxXSA9IGxpbmUxU3RhcnRZICsgKGEgKiAobGluZTFFbmRZIC0gbGluZTFTdGFydFkpKTtcclxuXHJcblxyXG4gICAgICAgIC8vIGlmIGxpbmUyIGlzIGEgc2VnbWVudCBhbmQgbGluZTEgaXMgaW5maW5pdGUsIHRoZXkgaW50ZXJzZWN0IGlmOlxyXG4gICAgICAgIGlmIChiID4gMCAmJiBiIDwgMSkge1xyXG4gICAgICAgICAgICByZXR1cm4gcmVzO1xyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICB9XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDliKTmlq3kuKTkuKpwb2x555qE5YWz57O7XHJcbiAgICAgKiBAcGFyYW0gcG9seU91dFxyXG4gICAgICogQHBhcmFtIHBvbHlJblxyXG4gICAgICogQHJldHVybnMgezEs55u45Lqk77yMMuWMhea2te+8jDPvvIzmsqHlhbPns7t9XHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwb2x5V2l0aChwb2x5T3V0LCBwb2x5SW4pIHtcclxuICAgICAgICBsZXQgbGVuZ3RoT3V0ID0gcG9seU91dC5sZW5ndGggLyAyO1xyXG4gICAgICAgIGxldCBsZW5ndGhJbiA9IHBvbHlJbi5sZW5ndGggLyAyO1xyXG4gICAgICAgIGxldCBmbGFnID0gZmFsc2U7XHJcbiAgICAgICAgbGV0IGJZO1xyXG4gICAgICAgIGxldCBhWDtcclxuICAgICAgICBsZXQgYVk7XHJcbiAgICAgICAgbGV0IGJYO1xyXG4gICAgICAgIGxldCBkWTtcclxuICAgICAgICBsZXQgY1g7XHJcbiAgICAgICAgbGV0IGNZO1xyXG4gICAgICAgIGxldCBkWDtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aE91dDsgaSsrKSB7XHJcblxyXG4gICAgICAgICAgICBpZiAoaSAhPSBsZW5ndGhPdXQgLSAxKSB7XHJcbiAgICAgICAgICAgICAgICBhWCA9IHBvbHlPdXRbKGkgKiAyKV07XHJcbiAgICAgICAgICAgICAgICBhWSA9IHBvbHlPdXRbKGkgKiAyICsgMSldO1xyXG4gICAgICAgICAgICAgICAgYlggPSBwb2x5T3V0WyhpICogMiArIDIpXTtcclxuICAgICAgICAgICAgICAgIGJZID0gcG9seU91dFsoaSAqIDIgKyAzKV07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICBhWCA9IHBvbHlPdXRbKGkgKiAyKV07XHJcbiAgICAgICAgICAgICAgICBhWSA9IHBvbHlPdXRbKGkgKiAyICsgMSldO1xyXG4gICAgICAgICAgICAgICAgYlggPSBwb2x5T3V0WzBdO1xyXG4gICAgICAgICAgICAgICAgYlkgPSBwb2x5T3V0WzFdO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGZvciAobGV0IGogPSAwOyBqIDwgbGVuZ3RoSW47IGorKykge1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChqICE9IGxlbmd0aEluIC0gMSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGNYID0gcG9seUluWyhqICogMildO1xyXG4gICAgICAgICAgICAgICAgICAgIGNZID0gcG9seUluWyhqICogMiArIDEpXTtcclxuICAgICAgICAgICAgICAgICAgICBkWCA9IHBvbHlJblsoaiAqIDIgKyAyKV07XHJcbiAgICAgICAgICAgICAgICAgICAgZFkgPSBwb2x5SW5bKGogKiAyICsgMyldO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICBjWCA9IHBvbHlJblsoaiAqIDIpXTtcclxuICAgICAgICAgICAgICAgICAgICBjWSA9IHBvbHlJblsoaiAqIDIgKyAxKV07XHJcbiAgICAgICAgICAgICAgICAgICAgZFggPSBwb2x5SW5bMF07XHJcbiAgICAgICAgICAgICAgICAgICAgZFkgPSBwb2x5SW5bMV07XHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgaWYgKEdpc1Rvb2xzLmxpbmVJbnRlcnNlY3RzKGFYLCBhWSwgYlgsIGJZLCBjWCwgY1ksIGRYLCBkWSkgIT0gZmFsc2UpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gMTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGZpcnN0WCA9IHBvbHlJblswXTtcclxuICAgICAgICBsZXQgZmlyc3RZID0gcG9seUluWzFdO1xyXG4gICAgICAgIGlmIChHaXNUb29scy5wb2ludEluUG9seWdvbihmaXJzdFgsIGZpcnN0WSwgcG9seU91dCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5oqKYmJveOi9rOaIkGRvdWJsZSBBcnJheVxyXG4gICAgICogQHBhcmFtIGxlZnRcclxuICAgICAqIEBwYXJhbSBib3R0b21cclxuICAgICAqIEBwYXJhbSByaWdodFxyXG4gICAgICogQHBhcmFtIHRvcFxyXG4gICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYm94VG9Qb2x5QXJyKGxlZnQsIGJvdHRvbSwgcmlnaHQsIHRvcCkge1xyXG4gICAgICAgIGxldCBhcnIgPSBbXTtcclxuICAgICAgICBhcnIucHVzaChsZWZ0KTtcclxuICAgICAgICBhcnIucHVzaChib3R0b20pO1xyXG5cclxuICAgICAgICBhcnIucHVzaChsZWZ0KTtcclxuICAgICAgICBhcnIucHVzaCh0b3ApO1xyXG5cclxuICAgICAgICBhcnIucHVzaChyaWdodCk7XHJcbiAgICAgICAgYXJyLnB1c2godG9wKTtcclxuXHJcbiAgICAgICAgYXJyLnB1c2gocmlnaHQpO1xyXG4gICAgICAgIGFyci5wdXNoKGJvdHRvbSk7XHJcblxyXG4gICAgICAgIGFyci5wdXNoKGxlZnQpO1xyXG4gICAgICAgIGFyci5wdXNoKGJvdHRvbSk7XHJcblxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgc3RhdGljIGdldEV4dGVuc2lvblBvaW50KHAxLCBwMiwgZCkge1xyXG4gICAgICAgIGxldCB4YWIgPSBwMlswXSAtIHAxWzBdO1xyXG4gICAgICAgIGxldCB5YWIgPSBwMlsxXSAtIHAxWzFdO1xyXG4gICAgICAgIGxldCB4ZCA9IHAyWzBdO1xyXG4gICAgICAgIGxldCB5ZCA9IHAyWzFdO1xyXG4gICAgICAgIGlmICh4YWIgPT0gMCkge1xyXG4gICAgICAgICAgICBpZiAoeWFiID4gMCkge1xyXG4gICAgICAgICAgICAgICAgeWQgPSBwMlsxXSArIGQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICB5ZCA9IHAyWzFdIC0gZDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgIGxldCB4YmQgPSBNYXRoLnNxcnQoKGQgKiBkKSAvICgoeWFiIC8geGFiKSAqICh5YWIgLyB4YWIpICsgMSkpO1xyXG4gICAgICAgICAgICBpZiAoeGFiIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgeGJkID0gLXhiZFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB4ZCA9IHAyWzBdICsgeGJkO1xyXG4gICAgICAgICAgICB5ZCA9IHAyWzFdICsgeWFiIC8geGFiICogeGJkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3hkLCB5ZF07XHJcbiAgICB9XHJcblxyXG5cclxuICAgIC8qKlxyXG4gICAgICog57q/5bmz6KGM5YGP56e7XHJcbiAgICAgKiBAcGFyYW0gY29vcmRzXHJcbiAgICAgKiBAcGFyYW0gZGlzdGFuY2VcclxuICAgICAqIEByZXR1cm5zIHtBcnJheX1cclxuICAgICAqL1xyXG4gICAgc3RhdGljIGxpbmVPZmZzZXQoY29vcmRzLCBkaXN0YW5jZSkge1xyXG4gICAgICAgIGxldCBzZWdtZW50cyA9IFtdO1xyXG4gICAgICAgIGxldCBmaW5hbENvb3JkcyA9IFtdO1xyXG4gICAgICAgIGNvb3Jkcy5mb3JFYWNoKGZ1bmN0aW9uKGN1cnJlbnRDb29yZHMsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gY29vcmRzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzZWdtZW50ID0gR2lzVG9vbHMucHJvY2Vzc1NlZ21lbnQoY3VycmVudENvb3JkcywgY29vcmRzW2luZGV4ICsgMV0sIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goc2VnbWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlZzJDb29yZHMgPSBzZWdtZW50c1tpbmRleCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnRlcnNlY3RzID0gR2lzVG9vbHMubGluZUludGVyc2VjdHMoc2VnbWVudFswXVswXSwgc2VnbWVudFswXVsxXSwgc2VnbWVudFsxXVswXSwgc2VnbWVudFsxXVsxXSxcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VnMkNvb3Jkc1swXVswXSwgc2VnMkNvb3Jkc1swXVsxXSwgc2VnMkNvb3Jkc1sxXVswXSwgc2VnMkNvb3Jkc1sxXVsxXSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIC8vIEhhbmRsaW5nIGZvciBsaW5lIHNlZ21lbnRzIHRoYXQgYXJlbid0IHN0cmFpZ2h0XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGludGVyc2VjdHMgIT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZzJDb29yZHNbMV0gPSBpbnRlcnNlY3RzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWdtZW50WzBdID0gaW50ZXJzZWN0cztcclxuICAgICAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ29vcmRzLnB1c2goc2VnMkNvb3Jkc1swXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKGluZGV4ID09PSBjb29yZHMubGVuZ3RoIC0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbENvb3Jkcy5wdXNoKHNlZ21lbnRbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBmaW5hbENvb3Jkcy5wdXNoKHNlZ21lbnRbMV0pO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIC8vIEhhbmRsaW5nIGZvciBsaW5lcyB0aGF0IG9ubHkgaGF2ZSAxIHNlZ21lbnRcclxuICAgICAgICAgICAgICAgIGlmIChjb29yZHMubGVuZ3RoID09PSAyKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDb29yZHMucHVzaChzZWdtZW50WzBdKTtcclxuICAgICAgICAgICAgICAgICAgICBmaW5hbENvb3Jkcy5wdXNoKHNlZ21lbnRbMV0pO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfSk7XHJcbiAgICAgICAgcmV0dXJuIGZpbmFsQ29vcmRzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogUHJvY2VzcyBTZWdtZW50XHJcbiAgICAgKiBJbnNwaXJhdGlvbiB0YWtlbiBmcm9tIGh0dHA6Ly9zdGFja292ZXJmbG93LmNvbS9xdWVzdGlvbnMvMjgyNTQxMi9kcmF3LWEtcGFyYWxsZWwtbGluZVxyXG4gICAgICpcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKiBAcGFyYW0ge0FycmF5PG51bWJlcj59IHBvaW50MSBQb2ludCBjb29yZGluYXRlc1xyXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBwb2ludDIgUG9pbnQgY29vcmRpbmF0ZXNcclxuICAgICAqIEBwYXJhbSB7bnVtYmVyfSBvZmZzZXQgT2Zmc2V0XHJcbiAgICAgKiBAcmV0dXJucyB7QXJyYXk8QXJyYXk8bnVtYmVyPj59IG9mZnNldCBwb2ludHNcclxuICAgICAqL1xyXG4gICAgc3RhdGljIHByb2Nlc3NTZWdtZW50KHBvaW50QW5nbGUxLCBwb2ludEFuZ2xlMiwgb2Zmc2V0KSB7XHJcbiAgICAgICAgbGV0IHBvaW50MSA9IHBvaW50QW5nbGUxWzBdO1xyXG4gICAgICAgIGxldCBwb2ludDIgPSBwb2ludEFuZ2xlMlswXTtcclxuICAgICAgICBsZXQgTCA9IE1hdGguc3FydCgocG9pbnQxWzBdIC0gcG9pbnQyWzBdKSAqIChwb2ludDFbMF0gLSBwb2ludDJbMF0pICsgKHBvaW50MVsxXSAtIHBvaW50MlsxXSkgKiAocG9pbnQxWzFdIC0gcG9pbnQyWzFdKSk7XHJcblxyXG4gICAgICAgIGxldCBvdXQxeCA9IHBvaW50MVswXSArIG9mZnNldCAqIChwb2ludDJbMV0gLSBwb2ludDFbMV0pIC8gTDtcclxuICAgICAgICBsZXQgb3V0MnggPSBwb2ludDJbMF0gKyBvZmZzZXQgKiAocG9pbnQyWzFdIC0gcG9pbnQxWzFdKSAvIEw7XHJcbiAgICAgICAgbGV0IG91dDF5ID0gcG9pbnQxWzFdICsgb2Zmc2V0ICogKHBvaW50MVswXSAtIHBvaW50MlswXSkgLyBMO1xyXG4gICAgICAgIGxldCBvdXQyeSA9IHBvaW50MlsxXSArIG9mZnNldCAqIChwb2ludDFbMF0gLSBwb2ludDJbMF0pIC8gTDtcclxuICAgICAgICByZXR1cm4gW1xyXG4gICAgICAgICAgICBbXHJcbiAgICAgICAgICAgICAgICBbb3V0MXgsIG91dDF5XSwgcG9pbnRBbmdsZTFbMV1cclxuICAgICAgICAgICAgXSxcclxuICAgICAgICAgICAgW1xyXG4gICAgICAgICAgICAgICAgW291dDJ4LCBvdXQyeV0sIHBvaW50QW5nbGUyWzFdXHJcbiAgICAgICAgICAgIF1cclxuICAgICAgICBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOWIpOaWrWJveDHmmK/lkKblnKhib3gy5YaF6YOoXHJcbiAgICAgKiBAcGFyYW0gYm94MVxyXG4gICAgICogQHBhcmFtIGJveDJcclxuICAgICAqL1xyXG4gICAgc3RhdGljIGlzSW5Cb3goYm94MSwgYm94Mikge1xyXG4gICAgICAgIGlmIChib3gxWzBdID49IGJveDJbMF0gJiYgYm94MVsxXSA+PSBib3gyWzFdICYmIGJveDFbMl0gPD0gYm94MlsyXSAmJiBib3gxWzNdIDw9IGJveDJbM10pIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgVXRmOEFycmF5VG9TdHIoYXJyYXkpIHtcclxuICAgICAgICB2YXIgb3V0LCBpLCBsZW4sIGM7XHJcbiAgICAgICAgdmFyIGNoYXIyLCBjaGFyMztcclxuXHJcbiAgICAgICAgb3V0ID0gXCJcIjtcclxuICAgICAgICBsZW4gPSBhcnJheS5sZW5ndGg7XHJcbiAgICAgICAgaSA9IDA7XHJcbiAgICAgICAgd2hpbGUgKGkgPCBsZW4pIHtcclxuICAgICAgICAgICAgYyA9IGFycmF5W2krK107XHJcbiAgICAgICAgICAgIHN3aXRjaCAoYyA+PiA0KSB7XHJcbiAgICAgICAgICAgICAgICBjYXNlIDA6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDE6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDM6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDQ6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDU6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDY6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDc6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMHh4eHh4eHhcclxuICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZShjKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTI6XHJcbiAgICAgICAgICAgICAgICBjYXNlIDEzOlxyXG4gICAgICAgICAgICAgICAgICAgIC8vIDExMHggeHh4eCAgIDEweHggeHh4eFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXIyID0gYXJyYXlbaSsrXTtcclxuICAgICAgICAgICAgICAgICAgICBvdXQgKz0gU3RyaW5nLmZyb21DaGFyQ29kZSgoKGMgJiAweDFGKSA8PCA2KSB8IChjaGFyMiAmIDB4M0YpKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgICAgIGNhc2UgMTQ6XHJcbiAgICAgICAgICAgICAgICAgICAgLy8gMTExMCB4eHh4ICAxMHh4IHh4eHggIDEweHggeHh4eFxyXG4gICAgICAgICAgICAgICAgICAgIGNoYXIyID0gYXJyYXlbaSsrXTtcclxuICAgICAgICAgICAgICAgICAgICBjaGFyMyA9IGFycmF5W2krK107XHJcbiAgICAgICAgICAgICAgICAgICAgb3V0ICs9IFN0cmluZy5mcm9tQ2hhckNvZGUoKChjICYgMHgwRikgPDwgMTIpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKChjaGFyMiAmIDB4M0YpIDw8IDYpIHxcclxuICAgICAgICAgICAgICAgICAgICAgICAgKChjaGFyMyAmIDB4M0YpIDw8IDApKTtcclxuICAgICAgICAgICAgICAgICAgICBicmVhaztcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgcmV0dXJuIG91dDtcclxuICAgIH1cclxuXHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBHaXNUb29sczsiLCJjbGFzcyBMYXllckNvbnRlbnRNb2RlbCB7XHJcblxyXG4gICAgY29uc3RydWN0b3IoKSB7XHJcbiAgICAgICAgdGhpcy5sYXllckhlYWRlclByb0J1ZmZlciA9IEJ1ZmZlci5hbGxvYygwKTtcclxuICAgICAgICB0aGlzLmNvb3JkaW5hdGVCdWZmZXJBcnJheSA9IFtdO1xyXG4gICAgICAgIHRoaXMuZmVhdHVyZUFycmF5ID0gW107XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5blpLTlsZ7mgKdcclxuICAgICAqIEByZXR1cm5zIHtCdWZmZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldExheWVySGVhZGVyUHJvQnVmZmVyKCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxheWVySGVhZGVyUHJvQnVmZmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6K6+572u5aS05bGe5oCnXHJcbiAgICAgKiBAcGFyYW0gaGVhZGVyUHJvTWFwIHtCdWZmZXJ9XHJcbiAgICAgKi9cclxuICAgIHNldExheWVySGVhZGVyUHJvQnVmZmVyKGxheWVySGVhZGVyUHJvQnVmZmVyKSB7XHJcbiAgICAgICAgdGhpcy5sYXllckhlYWRlclByb0J1ZmZlciA9IGxheWVySGVhZGVyUHJvQnVmZmVyO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635b6X6KaB57SgYnVmZmVy5pWw57uEXHJcbiAgICAgKiBAcmV0dXJucyB7W0J1ZmZlcl19XHJcbiAgICAgKi9cclxuICAgIGdldEZlYXR1cmVBcnJheSgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5mZWF0dXJlQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDorr7nva7opoHntKBidWZmZXLmlbDnu4RcclxuICAgICAqIEBwYXJhbSBmZWF0dXJlQXJyYXkge1tCdWZmZXJdfVxyXG4gICAgICovXHJcbiAgICBzZXRGZWF0dXJlQXJyYXkoZmVhdHVyZUFycmF5KSB7XHJcbiAgICAgICAgdGhpcy5mZWF0dXJlQXJyYXkgPSBmZWF0dXJlQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflvpflnZDmoIdidWZmZXLmlbDnu4RcclxuICAgICAqIEByZXR1cm5zIHtbQnVmZmVyXX1cclxuICAgICAqL1xyXG4gICAgZ2V0Q29vcmRpbmF0ZUJ1ZmZlckFycmF5KCkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmNvb3JkaW5hdGVCdWZmZXJBcnJheTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiuvue9ruWdkOagh2J1ZmZlcuaVsOe7hFxyXG4gICAgICogQHBhcmFtIGNvb3JkaW5hdGVCdWZmZXJBcnJheSB7W0J1ZmZlcl19XHJcbiAgICAgKi9cclxuICAgIHNldENvb3JkaW5hdGVCdWZmZXJBcnJheShjb29yZGluYXRlQnVmZmVyQXJyYXkpIHtcclxuICAgICAgICB0aGlzLmNvb3JkaW5hdGVCdWZmZXJBcnJheSA9IGNvb3JkaW5hdGVCdWZmZXJBcnJheTtcclxuICAgIH1cclxuXHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gTGF5ZXJDb250ZW50TW9kZWw7IiwiY29uc3QgdW5jb21wcmVzcyA9IHJlcXVpcmUoJy4vc25hcHB5SnMnKTtcclxuY29uc3QgQ29kZVRvb2wgPSByZXF1aXJlKCcuL0NvZGVUb29sJyk7XHJcbmNvbnN0IExheWVyQ29udGVudE1vZGVsID0gcmVxdWlyZSgnLi9MYXllckNvbnRlbnRNb2RlbCcpO1xyXG5jb25zdCBHaXNUb29sID0gcmVxdWlyZSgnLi9HaXNUb29scycpO1xyXG5cclxuLyoqXHJcbiAqIOeTpueJh+aVsOaNruino+aekFxyXG4gKi9cclxuY2xhc3MgVmFyaW50UmVhZGVyIHtcclxuXHJcbiAgICAvKipcclxuICAgICAqIOaehOmAoOWHveaVsFxyXG4gICAgICogQHBhcmFtIHZlY3RvclZhcmludEJ1ZmZlciB7QnVmZmVyfSB2ZWN0b3LmiJZsYXllcuagvOW8j2J1ZmZlclxyXG4gICAgICogQHBhcmFtIGhlYWRlckxlbmd0aCB7bnVtYmVyfSDmlbDmja7lpLTplb/luqZcclxuICAgICAqIEBwYXJhbSBwcm9TaXplT2JqIHtPYmplY3R9IOimgee0oOWxnuaAp+aVsOmHj1xyXG4gICAgICovXHJcbiAgICBjb25zdHJ1Y3Rvcih2ZWN0b3JWYXJpbnRCdWZmZXIsIGhlYWRlckxlbmd0aCwgcHJvU2l6ZU9iaikge1xyXG4gICAgICAgIC8v57yp6L+b6ZW/5bqmXHJcbiAgICAgICAgdGhpcy5oZWFkZXJMZW5ndGggPSBoZWFkZXJMZW5ndGg7XHJcbiAgICAgICAgLy/opoHntKDlsZ7mgKfmlbDph49cclxuICAgICAgICB0aGlzLnByb1NpemVPYmogPSBwcm9TaXplT2JqO1xyXG4gICAgICAgIC8v5pWw5a2X57G75Z6L55qEYnl0ZemVv+W6plxyXG4gICAgICAgIHRoaXMuaW50TGVuZ3RoID0gNDtcclxuICAgICAgICAvL+eTpueJh+aVsOaNrueahOagh+ivhlxyXG4gICAgICAgIHRoaXMudmVjdG9yTmFtZSA9IFwidmVjdG9yXCI7XHJcbiAgICAgICAgLy/nqbrpl7TnsbvlnovnmoRrZXlcclxuICAgICAgICB0aGlzLmdUeXBlS2V5ID0gXCJnVHlwZVwiO1xyXG4gICAgICAgIC8v5a2X56ym5Liy57yW56CBXHJcbiAgICAgICAgdGhpcy5lbmNvZGluZyA9IFwidXRmOFwiO1xyXG4gICAgICAgIC8v6KaB57Sg5bGe5oCn6Ze06ZqUXHJcbiAgICAgICAgdGhpcy5mZWF0dXJlU3BhY2UgPSBcIiNAXCI7XHJcbiAgICAgICAgLy/nk6bniYdidWZmZXJcclxuICAgICAgICB0aGlzLnZlY3RvclZhcmludEJ1ZmZlciA9IHZlY3RvclZhcmludEJ1ZmZlcjtcclxuICAgICAgICAvL+WbvuWxgmJ1ZmZlclxyXG4gICAgICAgIHRoaXMubGF5ZXJNYXAgPSBuZXcgT2JqZWN0KCk7XHJcbiAgICAgICAgLy/nk6bniYflpLTluKbmnInnmoTlsZ7mgKdcclxuICAgICAgICB0aGlzLnZlY3RvckhlYWRlclByb01hcCA9IG5ldyBPYmplY3QoKTtcclxuICAgICAgICAvL+WbvuWxguWktOW4pueahOWxnuaAp1xyXG4gICAgICAgIHRoaXMubGF5ZXJIZWFkZXJQcm9NYXAgPSBuZXcgT2JqZWN0KCk7XHJcbiAgICAgICAgIHRoaXMubGF5ZXJIZWFkZXJQcm9CdWZmZXIgPSBuZXcgT2JqZWN0KCk7XHJcbiAgICAgICAgLy/lm77lsYLnmoTnqbrpl7TmlbDmja7nsbvlnotcclxuICAgICAgICB0aGlzLmdlb21ldHlUeXBlTWFwID0gbmV3IE9iamVjdCgpO1xyXG4gICAgICAgIC8v5Zu+5bGC6KaB57SgXHJcbiAgICAgICAgdGhpcy5mZWF0dXJlTWFwID0gbmV3IE9iamVjdCgpO1xyXG4gICAgICAgIHRoaXMuZmVhdHVyZUFycmF5TWFwID0gbmV3IE9iamVjdCgpO1xyXG4gICAgICAgIC8v5Zu+5bGC5Z2Q5qCH57Si5byVYnVmZmVyXHJcbiAgICAgICAgdGhpcy5vZmZzZXRCdWZmZXJNYXAgPSBuZXcgT2JqZWN0KCk7XHJcbiAgICAgICAgLy/lm77lsYLlnZDmoIfntKLlvJXmlbDnu4RcclxuICAgICAgICB0aGlzLm9mZnNldEFycmF5TWFwID0gbmV3IE9iamVjdCgpO1xyXG4gICAgICAgIC8v5Zu+5bGC5Z2Q5qCHXHJcbiAgICAgICAgdGhpcy52YXJpbnRNYXAgPSBuZXcgT2JqZWN0KCk7XHJcblxyXG4gICAgICAgIHRoaXMuX3BhcnNlVmVjdG9yKHZlY3RvclZhcmludEJ1ZmZlcik7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5Z2ZWN0b3LnmoTlpLTlsZ7mgKdcclxuICAgICAqIEByZXR1cm5zIHtPYmplY3R9XHJcbiAgICAgKi9cclxuICAgIGdldFZlY3RvckhlYWRlclByb01hcCgpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52ZWN0b3JIZWFkZXJQcm9NYXA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflj5ZsYXllcueahOWktOWxnuaAp1xyXG4gICAgICogQHJldHVybnMge09iamVjdH1cclxuICAgICAqL1xyXG4gICAgZ2V0TGF5ZXJIZWFkZXJQcm9NYXAoKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMubGF5ZXJIZWFkZXJQcm9NYXA7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflvpflm77lsYJ2YXJpbnTnvJbnoIFidWZmZXJcclxuICAgICAqIEBwYXJhbSBsYXllck5hbWUge3N0cmluZ31cclxuICAgICAqIEByZXR1cm5zIHtCdWZmZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldExheWVyQnVmZmVyKGxheWVyTmFtZSkge1xyXG4gICAgICAgIHJldHVybiB0aGlzLmxheWVyTWFwW2xheWVyTmFtZV07XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDpgJrov4fopoHntKDov4fmu6Tlr7nlupTnmoRidWZmZXJcclxuICAgICAqIEBwYXJhbSBsYXllck5hbWUge3N0cmluZ33lm77lsYLlkI3np7BcclxuICAgICAqIEBwYXJhbSBmZWF0dXJlSW5kZXhBcnJheSB7W251bWJlcl196YCJ5oup55qE6KaB57Sg5pWw57uE5LiL5qCHXHJcbiAgICAgKiBAcmV0dXJucyB7TGF5ZXJDb250ZW50TW9kZWx9XHJcbiAgICAgKi9cclxuICAgIGdldExheWVyUHJvQnlGaWx0ZXIobGF5ZXJOYW1lLCBmZWF0dXJlSW5kZXhBcnJheSkge1xyXG4gICAgICAgIGxldCBjb29yZGluYXRlQnVmZmVyQXJyYXkgPSBbXTtcclxuICAgICAgICBsZXQgb2Zmc2V0QXJyYXkgPSB0aGlzLm9mZnNldEFycmF5TWFwW2xheWVyTmFtZV07XHJcbiAgICAgICAgbGV0IGZlYXR1cmVBcnJheSA9IHRoaXMuX2xhenlQYXJzZUZlYXR1cmUobGF5ZXJOYW1lKTtcclxuICAgICAgICBsZXQgZmlsdGVyQXJyYXkgPSBbXTtcclxuICAgICAgICBsZXQgaWR4O1xyXG4gICAgICAgIGxldCBvZmZzZXQ7XHJcbiAgICAgICAgbGV0IGxlbmd0aDtcclxuICAgICAgICBsZXQgcHJvU2l6ZSA9IHRoaXMucHJvU2l6ZU9ialtsYXllck5hbWVdO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgZmVhdHVyZUluZGV4QXJyYXkubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgaWR4ID0gZmVhdHVyZUluZGV4QXJyYXlbaV07XHJcbiAgICAgICAgICAgIC8v5oyR6YCJ6KaB57SgXHJcbiAgICAgICAgICAgIGZpbHRlckFycmF5LnB1c2goLi4uZmVhdHVyZUFycmF5W2lkeF0pO1xyXG4gICAgICAgICAgICAvL+aMkemAieimgee0oOWvueW6lOeahOWdkOagh+e0ouW8lVxyXG4gICAgICAgICAgICBvZmZzZXQgPSBvZmZzZXRBcnJheVtpZHgqMl07XHJcbiAgICAgICAgICAgIGxlbmd0aCA9IG9mZnNldEFycmF5W2lkeCoyICsgMV07XHJcbiAgICAgICAgICAgIGNvb3JkaW5hdGVCdWZmZXJBcnJheS5wdXNoKHRoaXMudmFyaW50TWFwW2xheWVyTmFtZV0uc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBsZW5ndGgpKTtcclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBtb2RlbCA9IG5ldyBMYXllckNvbnRlbnRNb2RlbCgpO1xyXG4gICAgICAgIG1vZGVsLnNldExheWVySGVhZGVyUHJvQnVmZmVyKHRoaXMubGF5ZXJIZWFkZXJQcm9CdWZmZXJbbGF5ZXJOYW1lXSk7XHJcbiAgICAgICAgbW9kZWwuc2V0RmVhdHVyZUFycmF5KGZpbHRlckFycmF5KTtcclxuICAgICAgICBtb2RlbC5zZXRDb29yZGluYXRlQnVmZmVyQXJyYXkoY29vcmRpbmF0ZUJ1ZmZlckFycmF5KTtcclxuXHJcbiAgICAgICAgcmV0dXJuIG1vZGVsO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635b6X5Zu+5bGC5ZCN56ew5pWw57uEXHJcbiAgICAgKiBAcmV0dXJucyB7W+WbvuWxguWQjeensDHvvIwg5Zu+5bGC5ZCN56ewMu+8jCAuLi5dfVxyXG4gICAgICovXHJcbiAgICBnZXRBbGxMYXllck5hbWVzKCkge1xyXG4gICAgICAgIGxldCBsYXllck5hbWVzID0gW107XHJcbiAgICAgICAgZm9yIChsZXQgdmFsdWUgaW4gdGhpcy5sYXllck1hcCkge1xyXG4gICAgICAgICAgICBsYXllck5hbWVzLnB1c2godmFsdWUpO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gbGF5ZXJOYW1lcztcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlm77lsYLnmoTnqbrpl7TnsbvlnotcclxuICAgICAqIEBwYXJhbSB7c3RyaW5nfSBsYXllck5hbWVcclxuICAgICAqIEByZXR1cm5zIHthbnl9XHJcbiAgICAgKi9cclxuICAgIGdldEdlb21ldHJ5VHlwZShsYXllck5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5nZW9tZXR5VHlwZU1hcFtsYXllck5hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635Y+W5oyH5a6a55qE5Zu+5bGC6KaB57Sg5bGe5oCnXHJcbiAgICAgKiBAcGFyYW0gbGF5ZXJOYW1lIHtzdHJpbmd9IOWbvuWxguWQjeensFxyXG4gICAgICogQHBhcmFtIGZlYXR1cmVJbmRleCB7bnVtYmVyfeimgee0oOaVsOe7hOeahOS4i+agh1xyXG4gICAgICogQHJldHVybnMgeyp8c3RyaW5nW119XHJcbiAgICAgKi9cclxuICAgIGdldExheWVyUHJvQnlJbmRleChsYXllck5hbWUsIGZlYXR1cmVJbmRleCkge1xyXG4gICAgICAgIGxldCBmZWF0dXJlQXJyYXkgPSB0aGlzLl9sYXp5UGFyc2VGZWF0dXJlKGxheWVyTmFtZSk7XHJcbiAgICAgICAgcmV0dXJuIGZlYXR1cmVBcnJheVtmZWF0dXJlSW5kZXhdXHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlm77lsYLnmoTlsZ7mgKfkv6Hmga9cclxuICAgICAqIEBwYXJhbSBsYXllck5hbWUge3N0cmluZ33lm77lsYLlkI3np7BcclxuICAgICAqIEByZXR1cm5zIHtb5bGe5oCn5pWw57uEXX1cclxuICAgICAqL1xyXG4gICAgZ2V0TGF5ZXJQcm8obGF5ZXJOYW1lKSB7XHJcbiAgICAgICAgcmV0dXJuIHRoaXMuX2xhenlQYXJzZUZlYXR1cmUobGF5ZXJOYW1lKTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+W+l+WbvuWxguaJgOacieWdkOagh+aVsOe7hOeahOWBj+enu+mHj+aVsOe7hFxyXG4gICAgICogQHBhcmFtIGxheWVyTmFtZSB7c3RyaW5nfeWbvuWxguWQjeensFxyXG4gICAgICogQHJldHVybnMge1tudW1iZXJdfSBb5bGe5oCnMeWtl+iKguW8gOWni+S9jee9ru+8jOWxnuaApzHlnZDmoIflrZfoioLplb/luqYgLOWxnuaApzLlrZfoioLlvIDlp4vkvY3nva7vvIzlsZ7mgKcy5Z2Q5qCH5a2X6IqC6ZW/5bqmICwuLi4uXVxyXG4gICAgICovXHJcbiAgICBnZXRPZmZzZXRBcnJheShsYXllck5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy5vZmZzZXRBcnJheU1hcFtsYXllck5hbWVdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6I635b6X5Zu+5bGC5p+Q5Liq5bGe5oCn55qE5Z2Q5qCH5YGP56e76YeP5pWw57uEXHJcbiAgICAgKiBAcGFyYW0gbGF5ZXJOYW1lIHtzdHJpbmd95Zu+5bGC5ZCN56ewXHJcbiAgICAgKiBAcGFyYW0gZmVhdHVyZUluZGV4IHtudW1iZXJ9IOimgee0oOaJgOWcqOaVsOe7hOeahOS9jee9rlxyXG4gICAgICogQHJldHVybnMge1vlsZ7mgKflrZfoioLlvIDlp4vkvY3nva7vvIzlsZ7mgKflnZDmoIflrZfoioLplb/luqZdfVxyXG4gICAgICovXHJcbiAgICBnZXRPZmZzZXRCeUluZGV4KGxheWVyTmFtZSwgZmVhdHVyZUluZGV4KSB7XHJcbiAgICAgICAgbGV0IGFsbCA9IHRoaXMub2Zmc2V0QXJyYXlNYXBbbGF5ZXJOYW1lXTtcclxuXHJcbiAgICAgICAgbGV0IGFyciA9IFtdO1xyXG4gICAgICAgIGFyci5wdXNoKGFsbFtmZWF0dXJlSW5kZXggKiAyXSk7XHJcbiAgICAgICAgYXJyLnB1c2goYWxsW2ZlYXR1cmVJbmRleCAqIDIgKyAxXSk7XHJcblxyXG4gICAgICAgIHJldHVybiBhcnI7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDojrflvpflm77lsYLnmoTmiYDmnInlnZDmoIflrZfoioJcclxuICAgICAqIEBwYXJhbSBsYXllck5hbWUge3N0cmluZ33lm77lsYLlkI3np7BcclxuICAgICAqIEByZXR1cm5zIHtCdWZmZXJ9XHJcbiAgICAgKi9cclxuICAgIGdldExheWVyQ29vcmRpbmF0ZShsYXllck5hbWUpIHtcclxuICAgICAgICByZXR1cm4gdGhpcy52YXJpbnRNYXBbbGF5ZXJOYW1lXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIOiOt+W+l+imgee0oFxyXG4gICAgICogQHBhcmFtIGxheWVyTmFtZSB7c3RyaW5nfeWbvuWxguWQjeensFxyXG4gICAgICogQHJldHVybnMge1tvYmplY3RdfSBb6KaB57Sg5bGe5oCn5pWw57uE77yMIOWdkOagh+WBj+enu+mHj++8jCDlnZDmoId2YXJpbnTmlbDnu4RdXHJcbiAgICAgKi9cclxuICAgIGdldExheWVyRmVhdHVyZShsYXllck5hbWUpIHtcclxuICAgICAgICByZXR1cm4gW3RoaXMuZmVhdHVyZU1hcFtsYXllck5hbWVdLCB0aGlzLm9mZnNldEFycmF5TWFwW2xheWVyTmFtZV0sIHRoaXMudmFyaW50TWFwW2xheWVyTmFtZV1dO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Zu+5bGC5omA5pyJ5pWw5a2X5Z2Q5qCHXHJcbiAgICAgKiBAcGFyYW0gbGF5ZXJOYW1lIHtzdHJpbmd9IOWbvuWxguWQjeensFxyXG4gICAgICogQHBhcmFtIHByZWNpc2lvbiB7bnVtYmVyfSDmlbDlrZfnsr7luqZcclxuICAgICAqIEByZXR1cm5zIHtbW251bWJlcl1dfSBbW+imgee0oDHlnZDmoIddLFvopoHntKAy5Z2Q5qCHXSwuLi5dXHJcbiAgICAgKi9cclxuICAgIGdldEFsbENvb3JkaW5hdGVzKGxheWVyTmFtZSwgcHJlY2lzaW9uKSB7XHJcbiAgICAgICAgbGV0IG9mcyA9IHRoaXMub2Zmc2V0QXJyYXlNYXBbbGF5ZXJOYW1lXTtcclxuICAgICAgICBsZXQgYnVmZmVyID0gdGhpcy52YXJpbnRNYXBbbGF5ZXJOYW1lXTtcclxuICAgICAgICBsZXQgY29vckFycmF5ID0gW107XHJcbiAgICAgICAgbGV0IG9mZnNldDtcclxuICAgICAgICBsZXQgbGVuZ3RoO1xyXG4gICAgICAgIGxldCBiZjtcclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IG9mcy5sZW5ndGggLyAyOyBpKyspIHtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gb2ZzW2kgKiAyXTtcclxuICAgICAgICAgICAgbGVuZ3RoID0gb2ZzW2kgKiAyICsgMV07XHJcbiAgICAgICAgICAgIGJmID0gYnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgbGVuZ3RoKTtcclxuICAgICAgICAgICAgY29vckFycmF5LnB1c2godGhpcy5fYnVmZmVyVG9Eb3VibGVBcnJheShiZiwgcHJlY2lzaW9uKVswXSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBjb29yQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDlm77lsYLmn5DkuKropoHntKDnmoTmlbDlrZflnZDmoIdcclxuICAgICAqIEBwYXJhbSBsYXllck5hbWUge3N0cmluZ33lm77lsYLlkI3np7BcclxuICAgICAqIEBwYXJhbSBwcm9JbmRleCB7W251bWJlcl19IOWxnuaAp+aJgOWcqOaVsOe7hOeahOS9jee9rlxyXG4gICAgICogQHBhcmFtIHByZWNpc2lvbiB7bnVtYmVyfSDmlbDlrZfnsr7luqZcclxuICAgICAqIEByZXR1cm5zIHtbbnVtYmVyXX0g6KaB57Sg5Z2Q5qCHXHJcbiAgICAgKi9cclxuICAgIGdldENvb3JkaW5hdGVzQnlJbmRleChsYXllck5hbWUsIHByb0luZGV4LCBwcmVjaXNpb24pIHtcclxuICAgICAgICBsZXQgb2ZzID0gdGhpcy5nZXRPZmZzZXRCeUluZGV4KGxheWVyTmFtZSwgcHJvSW5kZXgpO1xyXG4gICAgICAgIGxldCBidWZmZXIgPSB0aGlzLnZhcmludE1hcFtsYXllck5hbWVdO1xyXG4gICAgICAgIGxldCBvZmZzZXQgPSBvZnNbMF07XHJcbiAgICAgICAgbGV0IGxlbmd0aCA9IG9mc1sxXTtcclxuICAgICAgICBsZXQgYmYgPSBidWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBsZW5ndGgpO1xyXG4gICAgICAgIHJldHVybiB0aGlzLl9idWZmZXJUb0RvdWJsZUFycmF5KGJmLCBwcmVjaXNpb24pWzBdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6Kej5p6Q55Om54mH5pWw5o2uXHJcbiAgICAgKiBAcGFyYW0gdmVjdG9yVmFyaW50QnVmZmVyIHtCdWZmZXJ9IHZhcmludOe8lueggUJ1ZmZlclxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3BhcnNlVmVjdG9yKHZlY3RvclZhcmludEJ1ZmZlcikge1xyXG4gICAgICAgIC8v6K+75Y+WZ2VvbWV0cnnnsbvlnovnmoTlrZfoioLplb/luqZcclxuICAgICAgICBsZXQgb2Zmc2V0ID0gdGhpcy5oZWFkZXJMZW5ndGg7XHJcblxyXG4gICAgICAgIGxldCB0eXBlTGVuZ3RoID0gdmVjdG9yVmFyaW50QnVmZmVyLnJlYWRJbnQzMkJFKG9mZnNldCk7XHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdGhpcy5pbnRMZW5ndGg7XHJcbiAgICAgICAgLy/or7vlj5bmlbDmja7nsbvlnovjgIJ2ZWN0b3LmmK/lpJrlm77lsYLnu5PmnoTvvJvlhbblroNnZW9tZXRyeeexu+Wei+eahOS4uuWNleWbvuWxgue7k+aehFxyXG4gICAgICAgIGxldCB0eXBlID0gdmVjdG9yVmFyaW50QnVmZmVyLnNsaWNlKCBvZmZzZXQsIG9mZnNldCArIHR5cGVMZW5ndGgpLnRvU3RyaW5nKFwidXRmLThcIik7XHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdHlwZUxlbmd0aDtcclxuICAgICAgICBpZiAodHlwZSAhPT0gdGhpcy52ZWN0b3JOYW1lKSB7XHJcbiAgICAgICAgICAgIGNvbnNvbGUuZXJyb3IoXCLkuI3mmK/nk6bniYfmlbDmja7vvIFcIik7XHJcbiAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICB9XHJcbiAgICAgICAgLy/or7vlj5Z2ZWN0b3LlpLTlsZ7mgKdcclxuICAgICAgICBsZXQgYXJyYXkgPSB0aGlzLl9wYXJzZUhlYWRlclBybyh2ZWN0b3JWYXJpbnRCdWZmZXIsIG9mZnNldCk7XHJcbiAgICAgICAgb2Zmc2V0ID0gYXJyYXlbMF07XHJcbiAgICAgICAgdGhpcy52ZWN0b3JIZWFkZXJQcm9NYXAgPSBhcnJheVsxXTtcclxuXHJcbiAgICAgICAgLy/or7vlj5blnZDmoIfmlbDmja7ntKLlvJXlrZfoioLlvIDlp4vkvY3nva5cclxuICAgICAgICBsZXQgaW5kZXhMZW5ndGggPSB2ZWN0b3JWYXJpbnRCdWZmZXIucmVhZEludDMyQkUob2Zmc2V0KTtcclxuICAgICAgICAvL+aIquWPlmluZGV46KGo6L+w5a2X6IqCXHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdGhpcy5pbnRMZW5ndGg7XHJcbiAgICAgICAgbGV0IGluZGV4QnVmZmVyID0gdmVjdG9yVmFyaW50QnVmZmVyLnNsaWNlKG9mZnNldCwgb2Zmc2V0ICsgaW5kZXhMZW5ndGgpO1xyXG4gICAgICAgIC8v5oiq5Y+W5pWw5a2X5a2X6IqCXHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgaW5kZXhMZW5ndGg7XHJcbiAgICAgICAgbGV0IGRhdGFCdWZmZXIgPSB2ZWN0b3JWYXJpbnRCdWZmZXIuc2xpY2Uob2Zmc2V0LCB0aGlzLnZlY3RvclZhcmludEJ1ZmZlci5sZW5ndGgpO1xyXG5cclxuICAgICAgICBsZXQgbGF5ZXJOYW1lTGVuZ3RoID0gMDtcclxuICAgICAgICBsZXQgbGF5ZXJOYW1lO1xyXG4gICAgICAgIGxldCBkYXRhTGVuZ3RoO1xyXG4gICAgICAgIGxldCBkYXRhQmVnaW4gPSAwO1xyXG4gICAgICAgIGxldCBiZWdpbiA9IDA7XHJcbiAgICAgICAgbGV0IGVuZCA9IDA7XHJcbiAgICAgICAgbGV0IGxheWVyQnVmZmVyO1xyXG4gICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaW5kZXhCdWZmZXIubGVuZ3RoOykge1xyXG4gICAgICAgICAgICBiZWdpbiA9IGk7XHJcbiAgICAgICAgICAgIGxheWVyTmFtZUxlbmd0aCA9IGluZGV4QnVmZmVyLnJlYWRJbnQzMkJFKGJlZ2luKTtcclxuICAgICAgICAgICAgYmVnaW4gPSBiZWdpbiArIHRoaXMuaW50TGVuZ3RoO1xyXG4gICAgICAgICAgICBlbmQgPSBiZWdpbiArIGxheWVyTmFtZUxlbmd0aDtcclxuICAgICAgICAgICAgbGF5ZXJOYW1lID0gaW5kZXhCdWZmZXIudG9TdHJpbmcodGhpcy5lbmNvZGluZywgYmVnaW4sIGVuZCk7XHJcbiAgICAgICAgICAgIGJlZ2luID0gZW5kO1xyXG4gICAgICAgICAgICBkYXRhTGVuZ3RoID0gaW5kZXhCdWZmZXIucmVhZEludDMyQkUoYmVnaW4pO1xyXG4gICAgICAgICAgICBiZWdpbiA9IGJlZ2luICsgdGhpcy5pbnRMZW5ndGg7XHJcbiAgICAgICAgICAgIC8v5oiq5Y+W5q+P5LiqbGF5ZXLnmoTlnZDmoIflrZfoioLmrrVcclxuICAgICAgICAgICAgbGF5ZXJCdWZmZXIgPSBkYXRhQnVmZmVyLnNsaWNlKGRhdGFCZWdpbiwgZGF0YUJlZ2luICsgZGF0YUxlbmd0aCk7XHJcbiAgICAgICAgICAgIGRhdGFCZWdpbiA9IGRhdGFCZWdpbiArIGRhdGFMZW5ndGg7XHJcbiAgICAgICAgICAgIHRoaXMubGF5ZXJNYXBbbGF5ZXJOYW1lXSA9IGxheWVyQnVmZmVyO1xyXG4gICAgICAgICAgICB0aGlzLl9wYXJzZUxheWVyKGxheWVyTmFtZSwgbGF5ZXJCdWZmZXIpO1xyXG4gICAgICAgICAgICBpID0gYmVnaW47XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6Kej5p6Q5Zu+5bGCQnVmZmVyXHJcbiAgICAgKiBAcGFyYW0gbGF5ZXJOYW1lIOWbvuWxguWQjVxyXG4gICAgICogQHBhcmFtIGJ1ZmZlciB2YXJpbnTnvJbnoIFCdWZmZXJcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9wYXJzZUxheWVyKGxheWVyTmFtZSwgbGF5ZXJCdWZmZXIpIHtcclxuXHJcbiAgICAgICAgaWYgKGxheWVyQnVmZmVyLmxlbmd0aCA9PT0gMCkge1xyXG4gICAgICAgICAgICByZXR1cm47XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgb2Zmc2V0ID0gdGhpcy5oZWFkZXJMZW5ndGg7XHJcbiAgICAgICAgLy/or7vlj5ZsYXllcuWktOWxnuaAp1xyXG4gICAgICAgIGxldCBhcnJheSA9IHRoaXMuX3BhcnNlSGVhZGVyUHJvKGxheWVyQnVmZmVyLCBvZmZzZXQpO1xyXG4gICAgICAgIG9mZnNldCA9IGFycmF5WzBdO1xyXG4gICAgICAgIHRoaXMubGF5ZXJIZWFkZXJQcm9NYXBbbGF5ZXJOYW1lXSA9IGFycmF5WzFdO1xyXG4gICAgICAgIHRoaXMubGF5ZXJIZWFkZXJQcm9CdWZmZXJbbGF5ZXJOYW1lXSA9IGFycmF5WzJdO1xyXG4gICAgICAgIC8v6K+75Y+W56m66Ze057G75Z6LXHJcbiAgICAgICAgbGV0IGdlb21ldHJ5dHlwZSA9IHRoaXMubGF5ZXJIZWFkZXJQcm9NYXBbbGF5ZXJOYW1lXVt0aGlzLmdUeXBlS2V5XTtcclxuICAgICAgICB0aGlzLmdlb21ldHlUeXBlTWFwW2xheWVyTmFtZV0gPSBnZW9tZXRyeXR5cGU7XHJcbiAgICAgICAgLy/opoHntKDmlbDnu4RcclxuICAgICAgICBsZXQgZmVhdHVyZUxlbmd0aCA9IGxheWVyQnVmZmVyLnJlYWRJbnQzMkJFKG9mZnNldCk7XHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdGhpcy5pbnRMZW5ndGg7XHJcbiAgICAgICAgbGV0IGZlYXR1cmVCdWZmZXIgPSBsYXllckJ1ZmZlci5zbGljZShvZmZzZXQsIG9mZnNldCArIGZlYXR1cmVMZW5ndGgpO1xyXG4gICAgICAgIGZlYXR1cmVCdWZmZXIgPSB1bmNvbXByZXNzKGZlYXR1cmVCdWZmZXIpO1xyXG4gICAgICAgIG9mZnNldCA9IG9mZnNldCArIGZlYXR1cmVMZW5ndGg7XHJcbiAgICAgICAgdGhpcy5mZWF0dXJlTWFwW2xheWVyTmFtZV09ZmVhdHVyZUJ1ZmZlcjtcclxuICAgICAgICAvL+ivu+WPluWBj+enu+mHj+aVsOe7hFxyXG4gICAgICAgIGxldCBpbmRleFJlcyA9IHRoaXMuX3BhcnNlSW5kZXgobGF5ZXJCdWZmZXIsIG9mZnNldCk7XHJcbiAgICAgICAgb2Zmc2V0ID0gaW5kZXhSZXMub2Zmc2V0O1xyXG4gICAgICAgIHRoaXMub2Zmc2V0QnVmZmVyTWFwW2xheWVyTmFtZV09aW5kZXhSZXMuYnVmZmVyO1xyXG4gICAgICAgIHRoaXMub2Zmc2V0QXJyYXlNYXBbbGF5ZXJOYW1lXT1pbmRleFJlcy5hcnJheTtcclxuICAgICAgICAvL+ivu+WPluWdkOagh1xyXG4gICAgICAgIGxldCB2YXJpbnRCdWYgPSBsYXllckJ1ZmZlci5zbGljZShvZmZzZXQpO1xyXG4gICAgICAgIHRoaXMudmFyaW50TWFwW2xheWVyTmFtZV09dmFyaW50QnVmO1xyXG4gICAgfVxyXG4gICAgICAgIC8qKlxyXG4gICAgICAgICAqIOino+aekOWktOWxnuaAp1xyXG4gICAgICAgICAqIEBwYXJhbSB2YXJpbnRCdWZmZXJcclxuICAgICAgICAgKiBAcGFyYW0gb2Zmc2V0XHJcbiAgICAgICAgICogQHJldHVybnMgeygqfE1hcDxhbnksIGFueT4pW119XHJcbiAgICAgICAgICogQHByaXZhdGVcclxuICAgICAgICAgKi9cclxuICAgIF9wYXJzZUhlYWRlclBybyh2YXJpbnRCdWZmZXIsIG9mZnNldCkge1xyXG4gICAgICAgIGxldCBwcm9NYXAgPSBuZXcgT2JqZWN0KCk7XHJcbiAgICAgICAgbGV0IGhlYWRlclByb0xlbmd0aCA9IHZhcmludEJ1ZmZlci5yZWFkSW50MzJCRShvZmZzZXQpO1xyXG4gICAgICAgIG9mZnNldCA9IG9mZnNldCArIHRoaXMuaW50TGVuZ3RoO1xyXG4gICAgICAgIGxldCBoZWFkZXJQcm9CdWZmZXIgPSB2YXJpbnRCdWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBoZWFkZXJQcm9MZW5ndGgpO1xyXG4gICAgICAgIG9mZnNldCA9IG9mZnNldCArIGhlYWRlclByb0xlbmd0aDtcclxuICAgICAgICBpZiAoaGVhZGVyUHJvTGVuZ3RoID09IDApIHtcclxuICAgICAgICAgICAgcmV0dXJuIFtvZmZzZXQsIHByb01hcF07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICBsZXQgaGVhZGVyUHJvQXJyYXkgPSBHaXNUb29sLlV0ZjhBcnJheVRvU3RyKHVuY29tcHJlc3MoaGVhZGVyUHJvQnVmZmVyKSkuc3BsaXQoXCI6XCIpO1xyXG5cclxuICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGhlYWRlclByb0FycmF5Lmxlbmd0aCAvIDI7IGkrKykge1xyXG4gICAgICAgICAgICBwcm9NYXBbaGVhZGVyUHJvQXJyYXlbaSAqIDJdXSA9IGhlYWRlclByb0FycmF5W2kgKiAyICsgMV07XHJcbiAgICAgICAgfVxyXG5cclxuICAgICAgICByZXR1cm4gW29mZnNldCwgcHJvTWFwLCBoZWFkZXJQcm9CdWZmZXJdO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog6Kej5p6Q5YGP56e76YeP5pWw57uEXHJcbiAgICAgKiBAcGFyYW0gbGF5ZXJCdWZmZXJcclxuICAgICAqIEBwYXJhbSBvZmZzZXRcclxuICAgICAqIEByZXR1cm5zIHt7b2Zmc2V0OiAqLCBhcnJheTogKltdLCBidWZmZXI6ICp9fVxyXG4gICAgICogQHByaXZhdGVcclxuICAgICAqL1xyXG4gICAgX3BhcnNlSW5kZXgobGF5ZXJCdWZmZXIsIG9mZnNldCkge1xyXG4gICAgICAgIC8v6K+75Y+W5YGP56e76YeP5pWw57uE6ZW/5bqmXHJcbiAgICAgICAgbGV0IGxlbmd0aCA9IGxheWVyQnVmZmVyLnJlYWRJbnQzMkJFKG9mZnNldCk7XHJcbiAgICAgICAgb2Zmc2V0ID0gb2Zmc2V0ICsgdGhpcy5pbnRMZW5ndGg7XHJcbiAgICAgICAgLy/miKrlj5blh7rlgY/np7vph4/mlbDnu4RcclxuICAgICAgICBsZXQgYnVmZmVyID0gbGF5ZXJCdWZmZXIuc2xpY2Uob2Zmc2V0LCBvZmZzZXQgKyBsZW5ndGgpO1xyXG4gICAgICAgIG9mZnNldCA9IG9mZnNldCArIGxlbmd0aDtcclxuICAgICAgICAvL+aKinZhcmludOe8lueggeeahGJ5dGXmtYHovazmjaLkuLrmlbDnu4RcclxuICAgICAgICBsZXQgYXJyYXkgPSBDb2RlVG9vbC52YXJpbnRUb0ludEFycmF5KGJ1ZmZlcik7XHJcbiAgICAgICAgcmV0dXJuIHtcclxuICAgICAgICAgICAgXCJvZmZzZXRcIjogb2Zmc2V0LFxyXG4gICAgICAgICAgICBcImJ1ZmZlclwiOiBidWZmZXIsXHJcbiAgICAgICAgICAgIFwiYXJyYXlcIjogYXJyYXlcclxuICAgICAgICB9O1xyXG4gICAgfVxyXG5cclxuICAgIF9sYXp5UGFyc2VGZWF0dXJlKGxheWVyTmFtZSkge1xyXG4gICAgICAgIGxldCBmZWF0dXJlQXJyYXkgPSB0aGlzLmZlYXR1cmVBcnJheU1hcFtsYXllck5hbWVdO1xyXG4gICAgICAgIGxldCBwcm9TaXplID0gdGhpcy5wcm9TaXplT2JqW2xheWVyTmFtZV07XHJcbiAgICAgICAgaWYgKGZlYXR1cmVBcnJheSA9PSB1bmRlZmluZWQpIHtcclxuICAgICAgICAgICAgbGV0IGJ1ZmZlciA9IHRoaXMuZmVhdHVyZU1hcFtsYXllck5hbWVdO1xyXG4gICAgICAgICAgICBsZXQgcHJvcHMgPSBbXTtcclxuICAgICAgICAgICAgaWYgKGJ1ZmZlci5sZW5ndGggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICBwcm9wcyA9IEdpc1Rvb2wuVXRmOEFycmF5VG9TdHIodGhpcy5mZWF0dXJlTWFwW2xheWVyTmFtZV0pLnNwbGl0KHRoaXMuZmVhdHVyZVNwYWNlKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHRoaXMuZmVhdHVyZUFycmF5TWFwW2xheWVyTmFtZV0gPSBbXTtcclxuICAgICAgICAgICAgICAgIHJldHVybiBbXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBsZXQgaXRlbSA9IFtdO1xyXG4gICAgICAgICAgICBsZXQgbGVuZ3RoID0gKHByb3BzLmxlbmd0aCAtIDEpIC8gcHJvU2l6ZTtcclxuICAgICAgICAgICAgZmVhdHVyZUFycmF5ID0gW107XHJcbiAgICAgICAgICAgIGxldCBjdXJyZW50ID0gMDtcclxuICAgICAgICAgICAgbGV0IG5leHQgPSBjdXJyZW50O1xyXG4gICAgICAgICAgICBmb3IgKGxldCBpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBuZXh0ID0gY3VycmVudCArIHByb1NpemU7XHJcbiAgICAgICAgICAgICAgICBpdGVtID0gcHJvcHMuc2xpY2UoY3VycmVudCwgbmV4dCk7XHJcbiAgICAgICAgICAgICAgICBmZWF0dXJlQXJyYXkucHVzaChpdGVtKTtcclxuICAgICAgICAgICAgICAgIGN1cnJlbnQgPSBuZXh0O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuZmVhdHVyZUFycmF5TWFwW2xheWVyTmFtZV0gPSBmZWF0dXJlQXJyYXk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmZWF0dXJlQXJyYXk7XHJcbiAgICB9XHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiB2YXJpbnTlnZDmoIfovazmlbDlrZflnZDmoIdcclxuICAgICAqIEBwYXJhbSBidWZmZXIgdmFyaW505a2X6IqC5pWw57uEXHJcbiAgICAgKiBAcGFyYW0gcHJlY2lzaW9uIOaVsOWtl+eyvuW6plxyXG4gICAgICogQHJldHVybnMge1tudW1iZXJdfSDmlbDlrZflnZDmoIdcclxuICAgICAqIEBwcml2YXRlXHJcbiAgICAgKi9cclxuICAgIF9idWZmZXJUb0RvdWJsZUFycmF5KGJ1ZmZlciwgcHJlY2lzaW9uKSB7XHJcbiAgICAgICAgbGV0IHZhcmludENvZGUgPSBbXTtcclxuICAgICAgICBsZXQgcGF0aCA9IFtdO1xyXG4gICAgICAgIGxldCBoaWdoO1xyXG4gICAgICAgIGxldCBiZl9pbmRleCA9IDA7XHJcbiAgICAgICAgbGV0IG51bXMgPSBbXTtcclxuICAgICAgICBsZXQgb2xkWCA9IDA7XHJcbiAgICAgICAgbGV0IG9sZFkgPSAwO1xyXG4gICAgICAgIGxldCB4O1xyXG4gICAgICAgIGxldCB5O1xyXG4gICAgICAgIGxldCBpc1ggPSB0cnVlO1xyXG4gICAgICAgIC8v5aSa5b6q546v5LiA5qyh5aSE55CG5pyA5ZCO5LiA5q615pWw5o2uXHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPD0gYnVmZmVyLmxlbmd0aDsgaSsrKSB7IC8vYnVmZmVyLmxlbmd0aFxyXG4gICAgICAgICAgICBoaWdoID0gMHgwMDAwMDAwMCB8IChidWZmZXJbaV0gPj4gNykgJiAweDAxO1xyXG4gICAgICAgICAgICBpZiAoaGlnaCA9PT0gMCAmJiBiZl9pbmRleCA+IDApIHtcclxuICAgICAgICAgICAgICAgIGlmIChiZl9pbmRleCA+IDAgJiYgYmZfaW5kZXggPD0gNSkge1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpc1gpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeCA9IENvZGVUb29sLnZhcmludFRvSW50KHZhcmludENvZGUpICsgb2xkWDtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKHggLyBwcmVjaXNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1ggPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgb2xkWCA9IHg7XHJcbiAgICAgICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgeSA9IENvZGVUb29sLnZhcmludFRvSW50KHZhcmludENvZGUpICsgb2xkWTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcGF0aC5wdXNoKHkgLyBwcmVjaXNpb24pO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBpc1ggPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBvbGRZID0geTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAgICAgYmZfaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmludENvZGUgPSBbXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSBpZiAoYmZfaW5kZXggPiA1KSB7IC8vYmZfaW5kZXggPiA15Li66Ze06ZqU56ymXHJcbiAgICAgICAgICAgICAgICAgICAgb2xkWCA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgb2xkWSA9IDA7XHJcbiAgICAgICAgICAgICAgICAgICAgYmZfaW5kZXggPSAwO1xyXG4gICAgICAgICAgICAgICAgICAgIHZhcmludENvZGUgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBudW1zLnB1c2gocGF0aCk7XHJcbiAgICAgICAgICAgICAgICAgICAgcGF0aCA9IFtdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgaWYgKGkgIT09IGJ1ZmZlci5sZW5ndGgpe1xyXG4gICAgICAgICAgICAgICAgdmFyaW50Q29kZS5wdXNoKGJ1ZmZlcltpXSk7XHJcbiAgICAgICAgICAgICAgICBiZl9pbmRleCsrO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgaWYgKHBhdGgubGVuZ3RoID4gMCkge1xyXG4gICAgICAgICAgICAgICAgbnVtcy5wdXNoKHBhdGgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBudW1zO1xyXG4gICAgfVxyXG5cclxufVxyXG5cclxubW9kdWxlLmV4cG9ydHMgPSBWYXJpbnRSZWFkZXI7IiwiLyoqXHJcbiAqIENyZWF0ZWQgYnkgbWF0dCBvbiAyMDE3LzcvMTYuXHJcbiAqL1xyXG4vL+WHoOS4quWDj+e0oOWPr+S7peeul+aYr+WRveS4rVxyXG5sZXQgX2RpcyA9ICA1O1xyXG5cclxuY2xhc3MgR2lzVG9vbHN7XHJcbiAgICBzdGF0aWMgcG9pbnREaXN0VG9MaW5lKHgsIHksIHN0YXJ0eCwgc3RhcnR5LCBlbmR4LCBlbmR5KSB7XHJcbiAgICAgICAgbGV0IHNlID0gIChzdGFydHggLSBlbmR4KSAqIChzdGFydHggLSBlbmR4KSArIChzdGFydHkgLSBlbmR5KSAqIChzdGFydHkgLSBlbmR5KTtcclxuICAgICAgICBsZXQgcCA9ICgoeCAtIHN0YXJ0eCkgKiAoZW5keCAtIHN0YXJ0eCkgKyAoeSAtIHN0YXJ0eSkgKiAoZW5keSAtIHN0YXJ0eSkpO1xyXG4gICAgICAgIGxldCByID0gcCAvIHNlO1xyXG4gICAgICAgIGxldCBvdXR4ID0gc3RhcnR4ICsgciAqIChlbmR4IC0gc3RhcnR4KTtcclxuICAgICAgICBsZXQgb3V0eSA9IHN0YXJ0eSArIHIgKiAoZW5keSAtIHN0YXJ0eSk7XHJcbiAgICAgICAgbGV0IGRlcyA9IE1hdGguc3FydCgoeCAtIG91dHgpICogKHggLSBvdXR4KSArICh5IC0gb3V0eSkgKiAoeSAtIG91dHkpKTtcclxuXHJcbiAgICAgICAgLy9jb25zb2xlLmxvZyhkZXMpO1xyXG4gICAgICAgIHJldHVybiBkZXM7XHJcbiAgICB9XHJcbiAgICBzdGF0aWMgaXNQb2ludE9uU2VnbWVudChweCxweSxwMXgscDF5LHAyeCxwMnkpIHtcclxuXHJcbiAgICAgICAgaWYgKChweCAtIF9kaXMgPiBwMXggJiYgcHggKyBfZGlzID4gcDJ4KSB8fCAocHggKyBfZGlzIDwgcDF4ICYmIHB4IC0gX2RpcyA8IHAyeCkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDA7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGlmICgocHkgLSBfZGlzID4gcDF5ICYmIHB5ICsgX2RpcyA+IHAyeSkgfHwgKHB5ICsgX2RpcyA8IHAxeSAmJiBweSAtIF9kaXMgPCBwMnkpKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgICAgICBsZXQgZCA9IEdpc1Rvb2xzLnBvaW50RGlzdFRvTGluZShweCxweSxwMXgscDF5LHAyeCxwMnkpO1xyXG4gICAgICAgIGlmKGQgPCBfZGlzKXtcclxuICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIHJldHVybiAwO1xyXG4gICAgICAgIH1cclxuICAgIH1cclxuICAgIHN0YXRpYyBwb2ludEluTGluZShweCxweSwgcG9seWxpbmUpIHtcclxuICAgICAgICBsZXQgZmxhZyA9IDA7XHJcbiAgICAgICAgbGV0IGxpbmUgPSBbXTtcclxuICAgICAgICBpZihBcnJheS5pc0FycmF5KHBvbHlsaW5lWzBdKSkge1xyXG4gICAgICAgICAgICBsaW5lID0gcG9seWxpbmU7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGxpbmUucHVzaChwb2x5bGluZSk7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGZvcih2YXIgcG9seUluZGV4ID0gMCA7IHBvbHlJbmRleCA8IGxpbmUubGVuZ3RoIDsgcG9seUluZGV4Kyspe1xyXG4gICAgICAgICAgICBsZXQgc3VicG9seSA9IGxpbmVbcG9seUluZGV4XTtcclxuICAgICAgICAgICAgbGV0IGxlbmd0aCA9IHN1YnBvbHkubGVuZ3RoIC8gMjtcclxuICAgICAgICAgICAvLyBmb3IgKHZhciBpID0gMCwgbCA9IGxlbmd0aCwgaiA9IGwgLSAxOyBpIDwgbDsgaiA9IGksIGkrKykge1xyXG5cclxuICAgICAgICAgICAgZm9yICh2YXIgaSA9IDA7IGkgPCBsZW5ndGggLSAxIDsgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgajtcclxuICAgICAgICAgICAgICAgIGogPSBpICsgMTtcclxuICAgICAgICAgICAgICAgIGxldCBzeCA9IHN1YnBvbHlbMiAqIGldLFxyXG4gICAgICAgICAgICAgICAgICAgIHN5ID0gc3VicG9seVsyICogaSArIDFdLFxyXG4gICAgICAgICAgICAgICAgICAgIHR4ID0gc3VicG9seVsyICogal0sXHJcbiAgICAgICAgICAgICAgICAgICAgdHkgPSBzdWJwb2x5WzIgKiBqICsgMV1cclxuICAgICAgICAgICAgICAgIGlmKEdpc1Rvb2xzLmlzUG9pbnRPblNlZ21lbnQocHgscHksc3gsc3ksdHgsdHkpID09IDEpe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxO1xyXG4gICAgICAgICAgICAgICAgfWVsc2V7XHJcblxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAwO1xyXG4gICAgfVxyXG4gICAgc3RhdGljIHBvaW50SW5Qb2x5Z29uKHB4LHB5LCBwb2x5Z2VuKSB7XHJcbiAgICAgICAgbGV0IGZsYWcgPSAwO1xyXG4gICAgICAgIGxldCBwb2x5ID0gW107XHJcbiAgICAgICAgaWYoQXJyYXkuaXNBcnJheShwb2x5Z2VuWzBdKSkge1xyXG4gICAgICAgICAgICBwb2x5ID0gcG9seWdlbjtcclxuICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgcG9seS5wdXNoKHBvbHlnZW4pO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgZm9yKHZhciBwb2x5SW5kZXggPSAwIDsgcG9seUluZGV4IDwgcG9seS5sZW5ndGggOyBwb2x5SW5kZXgrKyl7XHJcbiAgICAgICAgICAgIGxldCBzdWJwb2x5ID0gcG9seVtwb2x5SW5kZXhdO1xyXG4gICAgICAgICAgICBsZXQgbGVuZ3RoID0gc3VicG9seS5sZW5ndGggLyAyO1xyXG5cclxuXHJcbiAgICAgICAgICAgIGZvciAodmFyIGkgPSAwLCBsID0gbGVuZ3RoLCBqID0gbCAtIDE7IGkgPCBsOyBqID0gaSwgaSsrKSB7XHJcbiAgICAgICAgICAgICAgICBsZXQgc3ggPSBzdWJwb2x5WzIgKiBpXSxcclxuICAgICAgICAgICAgICAgICAgICBzeSA9IHN1YnBvbHlbMiAqIGkgKyAxXSxcclxuICAgICAgICAgICAgICAgICAgICB0eCA9IHN1YnBvbHlbMiAqIGpdLFxyXG4gICAgICAgICAgICAgICAgICAgIHR5ID0gc3VicG9seVsyICogaiArIDFdXHJcblxyXG4gICAgICAgICAgICAgICAgLy8g54K55LiO5aSa6L655b2i6aG254K56YeN5ZCIXHJcbiAgICAgICAgICAgICAgICBpZiAoKHN4ID09PSBweCAmJiBzeSA9PT0gcHkpIHx8ICh0eCA9PT0gcHggJiYgdHkgPT09IHB5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAxXHJcbiAgICAgICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICAgICAgLy8g5Yik5pat57q/5q615Lik56uv54K55piv5ZCm5Zyo5bCE57q/5Lik5L6nXHJcbiAgICAgICAgICAgICAgICBpZiAoKHN5IDwgcHkgJiYgdHkgPj0gcHkpIHx8IChzeSA+PSBweSAmJiB0eSA8IHB5KSkge1xyXG4gICAgICAgICAgICAgICAgICAgIC8vIOe6v+auteS4iuS4juWwhOe6vyBZIOWdkOagh+ebuOWQjOeahOeCueeahCBYIOWdkOagh1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCB4ID0gc3ggKyAocHkgLSBzeSkgKiAodHggLSBzeCkgLyAodHkgLSBzeSlcclxuXHJcbiAgICAgICAgICAgICAgICAgICAgLy8g54K55Zyo5aSa6L655b2i55qE6L655LiKXHJcbiAgICAgICAgICAgICAgICAgICAgaWYgKHggPT09IHB4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiAxXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIGlmICh4ID4gcHgpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmxhZyA9ICFmbGFnXHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiBmbGFnID8gMSA6IDA7XHJcblxyXG4gICAgfVxyXG5cclxuICAgIHN0YXRpYyBsaW5lSW50ZXJzZWN0cyhsaW5lMVN0YXJ0WCwgbGluZTFTdGFydFksIGxpbmUxRW5kWCwgbGluZTFFbmRZLCBsaW5lMlN0YXJ0WCwgbGluZTJTdGFydFksIGxpbmUyRW5kWCwgbGluZTJFbmRZKSB7XHJcbiAgICAgICAgdmFyIGRlbm9taW5hdG9yLFxyXG4gICAgICAgICAgICBhLFxyXG4gICAgICAgICAgICBiLFxyXG4gICAgICAgICAgICBudW1lcmF0b3IxLFxyXG4gICAgICAgICAgICBudW1lcmF0b3IyLFxyXG4gICAgICAgICAgICBvbkxpbmUxPSBmYWxzZSxcclxuICAgICAgICAgICAgb25MaW5lMj0gZmFsc2UsXHJcbiAgICAgICAgICAgIHJlcyA9IFtudWxsLCBudWxsXTtcclxuXHJcbiAgICAgICAgZGVub21pbmF0b3IgPSAoKGxpbmUyRW5kWSAtIGxpbmUyU3RhcnRZKSAqIChsaW5lMUVuZFggLSBsaW5lMVN0YXJ0WCkpIC0gKChsaW5lMkVuZFggLSBsaW5lMlN0YXJ0WCkgKiAobGluZTFFbmRZIC0gbGluZTFTdGFydFkpKTtcclxuICAgICAgICBpZiAoZGVub21pbmF0b3IgPT09IDApIHtcclxuICAgICAgICAgICAgaWYocmVzWzBdICE9PSBudWxsICYmIHJlc1sxXSAhPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlcztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuICAgICAgICBhID0gbGluZTFTdGFydFkgLSBsaW5lMlN0YXJ0WTtcclxuICAgICAgICBiID0gbGluZTFTdGFydFggLSBsaW5lMlN0YXJ0WDtcclxuICAgICAgICBudW1lcmF0b3IxID0gKChsaW5lMkVuZFggLSBsaW5lMlN0YXJ0WCkgKiBhKSAtICgobGluZTJFbmRZIC0gbGluZTJTdGFydFkpICogYik7XHJcbiAgICAgICAgbnVtZXJhdG9yMiA9ICgobGluZTFFbmRYIC0gbGluZTFTdGFydFgpICogYSkgLSAoKGxpbmUxRW5kWSAtIGxpbmUxU3RhcnRZKSAqIGIpO1xyXG4gICAgICAgIGEgPSBudW1lcmF0b3IxIC8gZGVub21pbmF0b3I7XHJcbiAgICAgICAgYiA9IG51bWVyYXRvcjIgLyBkZW5vbWluYXRvcjtcclxuXHJcbiAgICAgICAgLy8gaWYgd2UgY2FzdCB0aGVzZSBsaW5lcyBpbmZpbml0ZWx5IGluIGJvdGggZGlyZWN0aW9ucywgdGhleSBpbnRlcnNlY3QgaGVyZTpcclxuICAgICAgICByZXNbMF0gPSBsaW5lMVN0YXJ0WCArIChhICogKGxpbmUxRW5kWCAtIGxpbmUxU3RhcnRYKSk7XHJcbiAgICAgICAgcmVzWzFdID0gbGluZTFTdGFydFkgKyAoYSAqIChsaW5lMUVuZFkgLSBsaW5lMVN0YXJ0WSkpO1xyXG5cclxuXHJcbiAgICAgICAgLy8gaWYgbGluZTIgaXMgYSBzZWdtZW50IGFuZCBsaW5lMSBpcyBpbmZpbml0ZSwgdGhleSBpbnRlcnNlY3QgaWY6XHJcbiAgICAgICAgaWYgKGIgPiAwICYmIGIgPCAxKSB7XHJcbiAgICAgICAgICAgIHJldHVybiByZXM7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIGVsc2Uge1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5Yik5pat5Lik5LiqcG9seeeahOWFs+ezu1xyXG4gICAgICogQHBhcmFtIHBvbHlPdXRcclxuICAgICAqIEBwYXJhbSBwb2x5SW5cclxuICAgICAqIEByZXR1cm5zIHsxLOebuOS6pO+8jDLljIXmtrXvvIwz77yM5rKh5YWz57O7fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgcG9seVdpdGgocG9seU91dCwgcG9seUluKSB7XHJcbiAgICAgICAgbGV0IGxlbmd0aE91dCA9IHBvbHlPdXQubGVuZ3RoIC8gMjtcclxuICAgICAgICBsZXQgbGVuZ3RoSW4gPSBwb2x5SW4ubGVuZ3RoIC8gMjtcclxuICAgICAgICBsZXQgZmxhZyA9IGZhbHNlO1xyXG4gICAgICAgIGxldCBiWTtcclxuICAgICAgICBsZXQgYVg7XHJcbiAgICAgICAgbGV0IGFZO1xyXG4gICAgICAgIGxldCBiWDtcclxuICAgICAgICBsZXQgZFk7XHJcbiAgICAgICAgbGV0IGNYO1xyXG4gICAgICAgIGxldCBjWTtcclxuICAgICAgICBsZXQgZFg7XHJcbiAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBsZW5ndGhPdXQ7IGkrKykge1xyXG5cclxuICAgICAgICAgICAgaWYgKGkgIT0gbGVuZ3RoT3V0IC0gMSkge1xyXG4gICAgICAgICAgICAgICAgYVggPSBwb2x5T3V0WyhpICogMildO1xyXG4gICAgICAgICAgICAgICAgYVkgPSBwb2x5T3V0WyhpICogMiArIDEpXTtcclxuICAgICAgICAgICAgICAgIGJYID0gcG9seU91dFsoaSAqIDIgKyAyKV07XHJcbiAgICAgICAgICAgICAgICBiWSA9IHBvbHlPdXRbKGkgKiAyICsgMyldO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgYVggPSBwb2x5T3V0WyhpICogMildO1xyXG4gICAgICAgICAgICAgICAgYVkgPSBwb2x5T3V0WyhpICogMiArIDEpXTtcclxuICAgICAgICAgICAgICAgIGJYID0gcG9seU91dFswXTtcclxuICAgICAgICAgICAgICAgIGJZID0gcG9seU91dFsxXTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBmb3IgKGxldCBqID0gMDsgaiA8IGxlbmd0aEluOyBqKyspIHtcclxuXHJcbiAgICAgICAgICAgICAgICBpZiAoaiAhPSBsZW5ndGhJbiAtIDEpIHtcclxuICAgICAgICAgICAgICAgICAgICBjWCA9IHBvbHlJblsoaiAqIDIpXTtcclxuICAgICAgICAgICAgICAgICAgICBjWSA9IHBvbHlJblsoaiAqIDIgKyAxKV07XHJcbiAgICAgICAgICAgICAgICAgICAgZFggPSBwb2x5SW5bKGogKiAyICsgMildO1xyXG4gICAgICAgICAgICAgICAgICAgIGRZID0gcG9seUluWyhqICogMiArIDMpXTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY1ggPSBwb2x5SW5bKGogKiAyKV07XHJcbiAgICAgICAgICAgICAgICAgICAgY1kgPSBwb2x5SW5bKGogKiAyICsgMSldO1xyXG4gICAgICAgICAgICAgICAgICAgIGRYID0gcG9seUluWzBdO1xyXG4gICAgICAgICAgICAgICAgICAgIGRZID0gcG9seUluWzFdO1xyXG4gICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgIGlmIChHaXNUb29scy5saW5lSW50ZXJzZWN0cyhhWCwgYVksIGJYLCBiWSwgY1gsIGNZLCBkWCwgZFkpICE9IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIDE7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcblxyXG4gICAgICAgIGxldCBmaXJzdFggPSBwb2x5SW5bMF07XHJcbiAgICAgICAgbGV0IGZpcnN0WSA9IHBvbHlJblsxXTtcclxuICAgICAgICBpZiAoR2lzVG9vbHMucG9pbnRJblBvbHlnb24oZmlyc3RYLCBmaXJzdFksICBwb2x5T3V0ICkpIHtcclxuICAgICAgICAgICAgcmV0dXJuIDI7XHJcbiAgICAgICAgfVxyXG4gICAgICAgIHJldHVybiAzO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICog5oqKYmJveOi9rOaIkGRvdWJsZSBBcnJheVxyXG4gICAgICogQHBhcmFtIGxlZnRcclxuICAgICAqIEBwYXJhbSBib3R0b21cclxuICAgICAqIEBwYXJhbSByaWdodFxyXG4gICAgICogQHBhcmFtIHRvcFxyXG4gICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgYm94VG9Qb2x5QXJyKGxlZnQsIGJvdHRvbSwgcmlnaHQsIHRvcCl7XHJcbiAgICAgICAgbGV0IGFyciA9IFtdO1xyXG4gICAgICAgIGFyci5wdXNoKGxlZnQpO1xyXG4gICAgICAgIGFyci5wdXNoKGJvdHRvbSk7XHJcblxyXG4gICAgICAgIGFyci5wdXNoKGxlZnQpO1xyXG4gICAgICAgIGFyci5wdXNoKHRvcCk7XHJcblxyXG4gICAgICAgIGFyci5wdXNoKHJpZ2h0KTtcclxuICAgICAgICBhcnIucHVzaCh0b3ApO1xyXG5cclxuICAgICAgICBhcnIucHVzaChyaWdodCk7XHJcbiAgICAgICAgYXJyLnB1c2goYm90dG9tKTtcclxuXHJcbiAgICAgICAgYXJyLnB1c2gobGVmdCk7XHJcbiAgICAgICAgYXJyLnB1c2goYm90dG9tKTtcclxuXHJcbiAgICAgICAgcmV0dXJuIGFycjtcclxuICAgIH1cclxuXHJcbiAgICBzdGF0aWMgZ2V0RXh0ZW5zaW9uUG9pbnQocDEscDIsZCl7XHJcbiAgICAgICAgbGV0IHhhYiA9IHAyWzBdIC0gcDFbMF07XHJcbiAgICAgICAgbGV0IHlhYiA9IHAyWzFdIC0gcDFbMV07XHJcbiAgICAgICAgbGV0IHhkID0gcDJbMF07XHJcbiAgICAgICAgbGV0IHlkID0gcDJbMV07XHJcbiAgICAgICAgaWYoeGFiID09IDApe1xyXG4gICAgICAgICAgICBpZih5YWIgPiAwKXtcclxuICAgICAgICAgICAgICAgIHlkID0gcDJbMV0gKyBkO1xyXG4gICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgIHlkID0gcDJbMV0gLSBkO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGxldCB4YmQgPSBNYXRoLnNxcnQoKGQgKiBkKS8oKHlhYi94YWIpICogKHlhYi94YWIpICsgMSkpO1xyXG4gICAgICAgICAgICBpZiAoeGFiIDwgMCkge1xyXG4gICAgICAgICAgICAgICAgeGJkID0gLXhiZFxyXG4gICAgICAgICAgICB9XHJcblxyXG4gICAgICAgICAgICB4ZCA9IHAyWzBdICsgeGJkO1xyXG4gICAgICAgICAgICB5ZCA9IHAyWzFdICsgeWFiIC8geGFiICogeGJkO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gW3hkLHlkXTtcclxuICAgIH1cclxuXHJcblxyXG4gICAgLyoqXHJcbiAgICAgKiDnur/lubPooYzlgY/np7tcclxuICAgICAqIEBwYXJhbSBjb29yZHNcclxuICAgICAqIEBwYXJhbSBkaXN0YW5jZVxyXG4gICAgICogQHJldHVybnMge0FycmF5fVxyXG4gICAgICovXHJcbiAgICBzdGF0aWMgbGluZU9mZnNldChjb29yZHMsIGRpc3RhbmNlKSB7XHJcbiAgICAgICAgbGV0IHNlZ21lbnRzID0gW107XHJcbiAgICAgICAgbGV0IGZpbmFsQ29vcmRzID0gW107XHJcbiAgICAgICAgY29vcmRzLmZvckVhY2goZnVuY3Rpb24gKGN1cnJlbnRDb29yZHMsIGluZGV4KSB7XHJcbiAgICAgICAgICAgIGlmIChpbmRleCAhPT0gY29vcmRzLmxlbmd0aCAtIDEpIHtcclxuICAgICAgICAgICAgICAgIGxldCBzZWdtZW50ID0gR2lzVG9vbHMucHJvY2Vzc1NlZ21lbnQoY3VycmVudENvb3JkcywgY29vcmRzW2luZGV4ICsgMV0sIGRpc3RhbmNlKTtcclxuICAgICAgICAgICAgICAgIHNlZ21lbnRzLnB1c2goc2VnbWVudCk7XHJcbiAgICAgICAgICAgICAgICBpZiAoaW5kZXggPiAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgbGV0IHNlZzJDb29yZHMgPSBzZWdtZW50c1tpbmRleCAtIDFdO1xyXG4gICAgICAgICAgICAgICAgICAgIGxldCBpbnRlcnNlY3RzID0gR2lzVG9vbHMubGluZUludGVyc2VjdHMoc2VnbWVudFswXVswXSxzZWdtZW50WzBdWzFdLCBzZWdtZW50WzFdWzBdLHNlZ21lbnRbMV1bMV0sXHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHNlZzJDb29yZHNbMF1bMF0sc2VnMkNvb3Jkc1swXVsxXSxzZWcyQ29vcmRzWzFdWzBdLHNlZzJDb29yZHNbMV1bMV0pO1xyXG5cclxuICAgICAgICAgICAgICAgICAgICAvLyBIYW5kbGluZyBmb3IgbGluZSBzZWdtZW50cyB0aGF0IGFyZW4ndCBzdHJhaWdodFxyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbnRlcnNlY3RzICE9PSBmYWxzZSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBzZWcyQ29vcmRzWzFdID0gaW50ZXJzZWN0cztcclxuICAgICAgICAgICAgICAgICAgICAgICAgc2VnbWVudFswXSA9IGludGVyc2VjdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgICAgICAgICBmaW5hbENvb3Jkcy5wdXNoKHNlZzJDb29yZHNbMF0pO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpbmRleCA9PT0gY29vcmRzLmxlbmd0aCAtIDIpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxDb29yZHMucHVzaChzZWdtZW50WzBdKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgZmluYWxDb29yZHMucHVzaChzZWdtZW50WzFdKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICAvLyBIYW5kbGluZyBmb3IgbGluZXMgdGhhdCBvbmx5IGhhdmUgMSBzZWdtZW50XHJcbiAgICAgICAgICAgICAgICBpZiAoY29vcmRzLmxlbmd0aCA9PT0gMikge1xyXG4gICAgICAgICAgICAgICAgICAgIGZpbmFsQ29vcmRzLnB1c2goc2VnbWVudFswXSk7XHJcbiAgICAgICAgICAgICAgICAgICAgZmluYWxDb29yZHMucHVzaChzZWdtZW50WzFdKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH0pO1xyXG4gICAgICAgIHJldHVybiBmaW5hbENvb3JkcztcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqIFByb2Nlc3MgU2VnbWVudFxyXG4gICAgICogSW5zcGlyYXRpb24gdGFrZW4gZnJvbSBodHRwOi8vc3RhY2tvdmVyZmxvdy5jb20vcXVlc3Rpb25zLzI4MjU0MTIvZHJhdy1hLXBhcmFsbGVsLWxpbmVcclxuICAgICAqXHJcbiAgICAgKiBAcHJpdmF0ZVxyXG4gICAgICogQHBhcmFtIHtBcnJheTxudW1iZXI+fSBwb2ludDEgUG9pbnQgY29vcmRpbmF0ZXNcclxuICAgICAqIEBwYXJhbSB7QXJyYXk8bnVtYmVyPn0gcG9pbnQyIFBvaW50IGNvb3JkaW5hdGVzXHJcbiAgICAgKiBAcGFyYW0ge251bWJlcn0gb2Zmc2V0IE9mZnNldFxyXG4gICAgICogQHJldHVybnMge0FycmF5PEFycmF5PG51bWJlcj4+fSBvZmZzZXQgcG9pbnRzXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBwcm9jZXNzU2VnbWVudChwb2ludEFuZ2xlMSwgcG9pbnRBbmdsZTIsIG9mZnNldCkge1xyXG4gICAgICAgIGxldCBwb2ludDEgPSBwb2ludEFuZ2xlMVswXTtcclxuICAgICAgICBsZXQgcG9pbnQyID0gcG9pbnRBbmdsZTJbMF07XHJcbiAgICAgICAgbGV0IEwgPSBNYXRoLnNxcnQoKHBvaW50MVswXSAtIHBvaW50MlswXSkgKiAocG9pbnQxWzBdIC0gcG9pbnQyWzBdKSArIChwb2ludDFbMV0gLSBwb2ludDJbMV0pICogKHBvaW50MVsxXSAtIHBvaW50MlsxXSkpO1xyXG5cclxuICAgICAgICBsZXQgb3V0MXggPSBwb2ludDFbMF0gKyBvZmZzZXQgKiAocG9pbnQyWzFdIC0gcG9pbnQxWzFdKSAvIEw7XHJcbiAgICAgICAgbGV0IG91dDJ4ID0gcG9pbnQyWzBdICsgb2Zmc2V0ICogKHBvaW50MlsxXSAtIHBvaW50MVsxXSkgLyBMO1xyXG4gICAgICAgIGxldCBvdXQxeSA9IHBvaW50MVsxXSArIG9mZnNldCAqIChwb2ludDFbMF0gLSBwb2ludDJbMF0pIC8gTDtcclxuICAgICAgICBsZXQgb3V0MnkgPSBwb2ludDJbMV0gKyBvZmZzZXQgKiAocG9pbnQxWzBdIC0gcG9pbnQyWzBdKSAvIEw7XHJcbiAgICAgICAgcmV0dXJuIFtbW291dDF4LCBvdXQxeV0scG9pbnRBbmdsZTFbMV1dLCBbW291dDJ4LCBvdXQyeV0scG9pbnRBbmdsZTJbMV1dXTtcclxuICAgIH1cclxuXHJcbiAgICAvKipcclxuICAgICAqICDliKTmlq1ib3gx5piv5ZCm5ZyoYm94MuWGhemDqFxyXG4gICAgICogQHBhcmFtIGJveDFcclxuICAgICAqIEBwYXJhbSBib3gyXHJcbiAgICAgKi9cclxuICAgIHN0YXRpYyBpc0luQm94KGJveDEsYm94Mil7XHJcbiAgICAgICAgaWYoYm94MVswXSA+PSBib3gyWzBdICYmIGJveDFbMV0gPj0gYm94MlsxXSAmJiBib3gxWzJdPD0gYm94MlsyXSAmJiBib3gxWzNdIDw9Ym94MlszXSl7XHJcbiAgICAgICAgICAgIHJldHVybiB0cnVlO1xyXG4gICAgICAgIH1cclxuICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICB9XHJcbn1cclxubW9kdWxlLmV4cG9ydHMgPSBleHBvcnRzID0gR2lzVG9vbHM7XHJcblxyXG5cclxuXHJcbiIsIlxyXG5jbGFzcyBHcmlkRmlsdGVye1xyXG4gICAgLyoqXHJcbiAgICAgKlxyXG4gICAgICogQHBhcmFtIHRpbGVzaXplIOeTpueJh+Wkp+Wwj1xyXG4gICAgICogQHBhcmFtIGNlbGxzaXplIOWwj+ato+aWueW9oue9keagvOeahOWuvVxyXG4gICAgICogQHBhcmFtIGJ1ZmZlciAg5aSW5omp5aSa5bCR5YOP57SgXHJcbiAgICAgKiBAcGFyYW0gbWF4UGVyQ2VsbCAg5bCP5q2j5pa55b2i5Lit5YWB6K645pS+5aSa5bCP5Liq5rOo6K6wXHJcbiAgICAgKi9cclxuICAgIGNvbnN0cnVjdG9yKHRpbGVzaXplLCBjZWxsc2l6ZSwgYnVmZmVyLG1heFBlckNlbGwpIHtcclxuICAgICAgICBsZXQgbiA9IHRpbGVzaXplIC8gY2VsbHNpemU7XHJcbiAgICAgICAgbGV0IHBhZGRpbmcgPSBidWZmZXIgLyBjZWxsc2l6ZTtcclxuICAgICAgICB0aGlzLm1heFBlckNlbGwgPSBtYXhQZXJDZWxsID09IG51bGwgPyAxIDogbWF4UGVyQ2VsbDtcclxuXHJcbiAgICAgICAgdGhpcy5jZWxscyA9IHt9O1xyXG4gICAgICAgIHRoaXMuZCA9IG4gKyAyICogcGFkZGluZztcclxuICAgICAgICB0aGlzLm4gPSBuO1xyXG4gICAgICAgIHRoaXMucGFkZGluZyA9IHBhZGRpbmc7XHJcbiAgICAgICAgdGhpcy5zY2FsZSA9IG4gLyB0aWxlc2l6ZTtcclxuICAgICAgICBsZXQgcCA9IChwYWRkaW5nIC8gbikgKiB0aWxlc2l6ZTtcclxuICAgICAgICB0aGlzLm1pbiA9IC1wO1xyXG4gICAgICAgIHRoaXMubWF4ID0gdGlsZXNpemUgKyBwO1xyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOaYr+WQpuiDveaUvuS4i+aMh+WumueahOeCuVxyXG4gICAgICogQHBhcmFtIHhcclxuICAgICAqIEBwYXJhbSB5XHJcbiAgICAgKiBAcmV0dXJucyB7Ym9vbGVhbn1cclxuICAgICAqL1xyXG4gICAgZmlsdGVyKHgseSl7XHJcbiAgICAgICAgaWYgKHggPCB0aGlzLm1pbiB8fCB4ID4gdGhpcy5tYXggfHwgeSA8IHRoaXMubWluIHx8IHkgPiB0aGlzLm1heCApIHtcclxuICAgICAgICAgICAgcmV0dXJuIGZhbHNlO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgbGV0IGN4ID0gdGhpcy5jb252ZXJ0VG9DZWxsQ29vcmQoeCk7XHJcbiAgICAgICAgbGV0IGN5ID0gdGhpcy5jb252ZXJ0VG9DZWxsQ29vcmQoeSk7XHJcbiAgICAgICAgbGV0IGNlbGxJbmRleCA9IHRoaXMuZCAqIGN5ICsgY3g7XHJcbiAgICAgICAgLy9jb25zb2xlLmxvZygn5qC8572R5Y+377yaJytjZWxsSW5kZXgpO1xyXG4gICAgICAgIGlmKHRoaXMuY2VsbHNbY2VsbEluZGV4XSA+PSB0aGlzLm1heFBlckNlbGwpe1xyXG4gICAgICAgICAgICByZXR1cm4gZmFsc2U7XHJcbiAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgIGxldCBpID0gdGhpcy5jZWxsc1tjZWxsSW5kZXhdO1xyXG4gICAgICAgICAgICBpZihpID09IG51bGwpe1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jZWxsc1tjZWxsSW5kZXhdID0gMTtcclxuICAgICAgICAgICAgfWVsc2V7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNlbGxzW2NlbGxJbmRleF0gPSBpKys7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICAgICAgfVxyXG4gICAgfVxyXG5cclxuICAgIC8qKlxyXG4gICAgICogIOaYr+WQpuiDveaUvuS4i+aMh+WumueahGJveFxyXG4gICAgICogQHBhcmFtIGJveFxyXG4gICAgICogQHJldHVybnMge2Jvb2xlYW59XHJcbiAgICAgKi9cclxuICAgIGZpbHRlckJ5Qm94KGJveCl7XHJcbiAgICAgICAgbGV0IHN0YXJ0WCA9IHRoaXMuY29udmVydFRvQ2VsbENvb3JkKGJveFswXSk7XHJcbiAgICAgICAgbGV0IGVuZFggPSB0aGlzLmNvbnZlcnRUb0NlbGxDb29yZChib3hbMl0pO1xyXG4gICAgICAgIGxldCBzdGFydFkgPSB0aGlzLmNvbnZlcnRUb0NlbGxDb29yZChib3hbMV0pO1xyXG4gICAgICAgIGxldCBlbmRZID0gdGhpcy5jb252ZXJ0VG9DZWxsQ29vcmQoYm94WzNdKTtcclxuICAgICAgICBmb3IobGV0IGkgPXN0YXJ0WDtpPD0gZW5kWDtpKyspe1xyXG4gICAgICAgICAgICBmb3IobGV0IGo9c3RhcnRZO2o8PWVuZFk7aisrKXtcclxuICAgICAgICAgICAgICAgIGxldCBjZWxsSW5kZXggPSB0aGlzLmQgKiBqICsgaTtcclxuICAgICAgICAgICAgICAgIC8v5aaC5p6c5Lu75oSP5LiA5Liq5bCP5qC8572R6KKr5Y2g55So77yM5YiZ5pysYm945LiN6IO95pS+5LiLXHJcbiAgICAgICAgICAgICAgICBpZih0aGlzLmNlbGxzW2NlbGxJbmRleF0pe1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgLy/moIfor4blsI/moLznvZHooqvljaDnlKhcclxuICAgICAgICBmb3IobGV0IGkgPXN0YXJ0WDtpPD0gZW5kWDtpKyspe1xyXG4gICAgICAgICAgICBmb3IobGV0IGo9c3RhcnRZO2o8PWVuZFk7aisrKXtcclxuICAgICAgICAgICAgICAgIGxldCBjZWxsSW5kZXggPSB0aGlzLmQgKiBqICsgaTtcclxuICAgICAgICAgICAgICAgIHRoaXMuY2VsbHNbY2VsbEluZGV4XSA9IDE7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9XHJcbiAgICAgICAgcmV0dXJuIHRydWU7XHJcbiAgICB9XHJcblxyXG5cclxuICAgIGNsZWFuKCl7XHJcbiAgICAgICAgdGhpcy5jZWxscyA9IHt9O1xyXG4gICAgICAgIHRoaXMuc2F2ZUNvdW50ID0gMDtcclxuICAgIH1cclxuXHJcbiAgICBjb252ZXJ0VG9DZWxsQ29vcmQoeCl7XHJcbiAgICAgICAgcmV0dXJuIE1hdGgubWF4KDAsIE1hdGgubWluKHRoaXMuZCAtIDEsIE1hdGguZmxvb3IoeCAqIHRoaXMuc2NhbGUpICsgdGhpcy5wYWRkaW5nKSk7XHJcbiAgICB9XHJcbn1cclxuXHJcbm1vZHVsZS5leHBvcnRzID0gR3JpZEZpbHRlcjsiLCJcbnZhciByZWFkID0gZnVuY3Rpb24gKGJ1ZmZlciwgb2Zmc2V0LCBpc0xFLCBtTGVuLCBuQnl0ZXMpIHtcbiAgdmFyIGUsIG1cbiAgdmFyIGVMZW4gPSBuQnl0ZXMgKiA4IC0gbUxlbiAtIDFcbiAgdmFyIGVNYXggPSAoMSA8PCBlTGVuKSAtIDFcbiAgdmFyIGVCaWFzID0gZU1heCA+PiAxXG4gIHZhciBuQml0cyA9IC03XG4gIHZhciBpID0gaXNMRSA/IChuQnl0ZXMgLSAxKSA6IDBcbiAgdmFyIGQgPSBpc0xFID8gLTEgOiAxXG4gIHZhciBzID0gYnVmZmVyW29mZnNldCArIGldXG5cbiAgaSArPSBkXG5cbiAgZSA9IHMgJiAoKDEgPDwgKC1uQml0cykpIC0gMSlcbiAgcyA+Pj0gKC1uQml0cylcbiAgbkJpdHMgKz0gZUxlblxuICBmb3IgKDsgbkJpdHMgPiAwOyBlID0gZSAqIDI1NiArIGJ1ZmZlcltvZmZzZXQgKyBpXSwgaSArPSBkLCBuQml0cyAtPSA4KSB7fVxuXG4gIG0gPSBlICYgKCgxIDw8ICgtbkJpdHMpKSAtIDEpXG4gIGUgPj49ICgtbkJpdHMpXG4gIG5CaXRzICs9IG1MZW5cbiAgZm9yICg7IG5CaXRzID4gMDsgbSA9IG0gKiAyNTYgKyBidWZmZXJbb2Zmc2V0ICsgaV0sIGkgKz0gZCwgbkJpdHMgLT0gOCkge31cblxuICBpZiAoZSA9PT0gMCkge1xuICAgIGUgPSAxIC0gZUJpYXNcbiAgfSBlbHNlIGlmIChlID09PSBlTWF4KSB7XG4gICAgcmV0dXJuIG0gPyBOYU4gOiAoKHMgPyAtMSA6IDEpICogSW5maW5pdHkpXG4gIH0gZWxzZSB7XG4gICAgbSA9IG0gKyBNYXRoLnBvdygyLCBtTGVuKVxuICAgIGUgPSBlIC0gZUJpYXNcbiAgfVxuICByZXR1cm4gKHMgPyAtMSA6IDEpICogbSAqIE1hdGgucG93KDIsIGUgLSBtTGVuKVxufVxudmFyIHdyaXRlID0gZnVuY3Rpb24gKGJ1ZmZlciwgdmFsdWUsIG9mZnNldCwgaXNMRSwgbUxlbiwgbkJ5dGVzKSB7XG4gIHZhciBlLCBtLCBjXG4gIHZhciBlTGVuID0gbkJ5dGVzICogOCAtIG1MZW4gLSAxXG4gIHZhciBlTWF4ID0gKDEgPDwgZUxlbikgLSAxXG4gIHZhciBlQmlhcyA9IGVNYXggPj4gMVxuICB2YXIgcnQgPSAobUxlbiA9PT0gMjMgPyBNYXRoLnBvdygyLCAtMjQpIC0gTWF0aC5wb3coMiwgLTc3KSA6IDApXG4gIHZhciBpID0gaXNMRSA/IDAgOiAobkJ5dGVzIC0gMSlcbiAgdmFyIGQgPSBpc0xFID8gMSA6IC0xXG4gIHZhciBzID0gdmFsdWUgPCAwIHx8ICh2YWx1ZSA9PT0gMCAmJiAxIC8gdmFsdWUgPCAwKSA/IDEgOiAwXG5cbiAgdmFsdWUgPSBNYXRoLmFicyh2YWx1ZSlcblxuICBpZiAoaXNOYU4odmFsdWUpIHx8IHZhbHVlID09PSBJbmZpbml0eSkge1xuICAgIG0gPSBpc05hTih2YWx1ZSkgPyAxIDogMFxuICAgIGUgPSBlTWF4XG4gIH0gZWxzZSB7XG4gICAgZSA9IE1hdGguZmxvb3IoTWF0aC5sb2codmFsdWUpIC8gTWF0aC5MTjIpXG4gICAgaWYgKHZhbHVlICogKGMgPSBNYXRoLnBvdygyLCAtZSkpIDwgMSkge1xuICAgICAgZS0tXG4gICAgICBjICo9IDJcbiAgICB9XG4gICAgaWYgKGUgKyBlQmlhcyA+PSAxKSB7XG4gICAgICB2YWx1ZSArPSBydCAvIGNcbiAgICB9IGVsc2Uge1xuICAgICAgdmFsdWUgKz0gcnQgKiBNYXRoLnBvdygyLCAxIC0gZUJpYXMpXG4gICAgfVxuICAgIGlmICh2YWx1ZSAqIGMgPj0gMikge1xuICAgICAgZSsrXG4gICAgICBjIC89IDJcbiAgICB9XG5cbiAgICBpZiAoZSArIGVCaWFzID49IGVNYXgpIHtcbiAgICAgIG0gPSAwXG4gICAgICBlID0gZU1heFxuICAgIH0gZWxzZSBpZiAoZSArIGVCaWFzID49IDEpIHtcbiAgICAgIG0gPSAodmFsdWUgKiBjIC0gMSkgKiBNYXRoLnBvdygyLCBtTGVuKVxuICAgICAgZSA9IGUgKyBlQmlhc1xuICAgIH0gZWxzZSB7XG4gICAgICBtID0gdmFsdWUgKiBNYXRoLnBvdygyLCBlQmlhcyAtIDEpICogTWF0aC5wb3coMiwgbUxlbilcbiAgICAgIGUgPSAwXG4gICAgfVxuICB9XG5cbiAgZm9yICg7IG1MZW4gPj0gODsgYnVmZmVyW29mZnNldCArIGldID0gbSAmIDB4ZmYsIGkgKz0gZCwgbSAvPSAyNTYsIG1MZW4gLT0gOCkge31cblxuICBlID0gKGUgPDwgbUxlbikgfCBtXG4gIGVMZW4gKz0gbUxlblxuICBmb3IgKDsgZUxlbiA+IDA7IGJ1ZmZlcltvZmZzZXQgKyBpXSA9IGUgJiAweGZmLCBpICs9IGQsIGUgLz0gMjU2LCBlTGVuIC09IDgpIHt9XG5cbiAgYnVmZmVyW29mZnNldCArIGkgLSBkXSB8PSBzICogMTI4XG59XG5cbm1vZHVsZS5leHBvcnRzID0ge3JlYWQsd3JpdGV9O1xuIiwidmFyIHRvU3RyaW5nID0ge30udG9TdHJpbmc7XG5cbm1vZHVsZS5leHBvcnRzID0gIEFycmF5LmlzQXJyYXkgfHwgZnVuY3Rpb24gKGFycikge1xuICByZXR1cm4gdG9TdHJpbmcuY2FsbChhcnIpID09ICdbb2JqZWN0IEFycmF5XSc7XG59O1xuIiwiLyoqXG4gKiBNb2R1bGVzIGluIHRoaXMgYnVuZGxlXG4gKiBAbGljZW5zZVxuICpcbiAqIHNuYXBweWpzOlxuICogICBsaWNlbnNlOiBNSVQgKGh0dHA6Ly9vcGVuc291cmNlLm9yZy9saWNlbnNlcy9NSVQpXG4gKiAgIGF1dGhvcjogWmhpcGVuZyBKaWFcbiAqICAgdmVyc2lvbjogMC42LjBcbiAqXG4gKiBUaGlzIGhlYWRlciBpcyBnZW5lcmF0ZWQgYnkgbGljZW5zaWZ5IChodHRwczovL2dpdGh1Yi5jb20vdHdhZGEvbGljZW5zaWZ5KVxuICovXG4vLyBkZWZpbmUoWydleHBvcnRzJ10sIGZ1bmN0aW9uIChleHBvcnRzKSB7XG5cbiAgICAndXNlIHN0cmljdCdcblxuICAgIHZhciBXT1JEX01BU0sgPSBbMCwgMHhmZiwgMHhmZmZmLCAweGZmZmZmZiwgMHhmZmZmZmZmZl1cblxuICAgIGZ1bmN0aW9uIGNvcHlCeXRlcyAoZnJvbUFycmF5LCBmcm9tUG9zLCB0b0FycmF5LCB0b1BvcywgbGVuZ3RoKSB7XG4gICAgICAgIHZhciBpXG4gICAgICAgIGZvciAoaSA9IDA7IGkgPCBsZW5ndGg7IGkrKykge1xuICAgICAgICAgICAgdG9BcnJheVt0b1BvcyArIGldID0gZnJvbUFycmF5W2Zyb21Qb3MgKyBpXVxuICAgICAgICB9XG4gICAgfVxuXG4gICAgZnVuY3Rpb24gc2VsZkNvcHlCeXRlcyAoYXJyYXksIHBvcywgb2Zmc2V0LCBsZW5ndGgpIHtcbiAgICAgICAgdmFyIGlcbiAgICAgICAgZm9yIChpID0gMDsgaSA8IGxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBhcnJheVtwb3MgKyBpXSA9IGFycmF5W3BvcyAtIG9mZnNldCArIGldXG4gICAgICAgIH1cbiAgICB9XG5cbiAgICBmdW5jdGlvbiBTbmFwcHlEZWNvbXByZXNzb3IgKGNvbXByZXNzZWQpIHtcbiAgICAgICAgdGhpcy5hcnJheSA9IGNvbXByZXNzZWRcbiAgICAgICAgdGhpcy5wb3MgPSAwXG4gICAgfVxuXG4gICAgU25hcHB5RGVjb21wcmVzc29yLnByb3RvdHlwZS5yZWFkVW5jb21wcmVzc2VkTGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgICAgICB2YXIgcmVzdWx0ID0gMFxuICAgICAgICB2YXIgc2hpZnQgPSAwXG4gICAgICAgIHZhciBjLCB2YWxcbiAgICAgICAgd2hpbGUgKHNoaWZ0IDwgMzIgJiYgdGhpcy5wb3MgPCB0aGlzLmFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgYyA9IHRoaXMuYXJyYXlbdGhpcy5wb3NdXG4gICAgICAgICAgICB0aGlzLnBvcyArPSAxXG4gICAgICAgICAgICB2YWwgPSBjICYgMHg3ZlxuICAgICAgICAgICAgaWYgKCgodmFsIDw8IHNoaWZ0KSA+Pj4gc2hpZnQpICE9PSB2YWwpIHtcbiAgICAgICAgICAgICAgICByZXR1cm4gLTFcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJlc3VsdCB8PSB2YWwgPDwgc2hpZnRcbiAgICAgICAgICAgIGlmIChjIDwgMTI4KSB7XG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgICAgICAgICAgfVxuICAgICAgICAgICAgc2hpZnQgKz0gN1xuICAgICAgICB9XG4gICAgICAgIHJldHVybiAtMVxuICAgIH1cblxuICAgIFNuYXBweURlY29tcHJlc3Nvci5wcm90b3R5cGUudW5jb21wcmVzc1RvQnVmZmVyID0gZnVuY3Rpb24gKG91dEJ1ZmZlcikge1xuICAgICAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5XG4gICAgICAgIHZhciBhcnJheUxlbmd0aCA9IGFycmF5Lmxlbmd0aFxuICAgICAgICB2YXIgcG9zID0gdGhpcy5wb3NcbiAgICAgICAgdmFyIG91dFBvcyA9IDBcblxuICAgICAgICB2YXIgYywgbGVuLCBzbWFsbExlblxuICAgICAgICB2YXIgb2Zmc2V0XG5cbiAgICAgICAgd2hpbGUgKHBvcyA8IGFycmF5Lmxlbmd0aCkge1xuICAgICAgICAgICAgYyA9IGFycmF5W3Bvc11cbiAgICAgICAgICAgIHBvcyArPSAxXG4gICAgICAgICAgICBpZiAoKGMgJiAweDMpID09PSAwKSB7XG4gICAgICAgICAgICAgICAgLy8gTGl0ZXJhbFxuICAgICAgICAgICAgICAgIGxlbiA9IChjID4+PiAyKSArIDFcbiAgICAgICAgICAgICAgICBpZiAobGVuID4gNjApIHtcbiAgICAgICAgICAgICAgICAgICAgaWYgKHBvcyArIDMgPj0gYXJyYXlMZW5ndGgpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgIHNtYWxsTGVuID0gbGVuIC0gNjBcbiAgICAgICAgICAgICAgICAgICAgbGVuID0gYXJyYXlbcG9zXSArIChhcnJheVtwb3MgKyAxXSA8PCA4KSArIChhcnJheVtwb3MgKyAyXSA8PCAxNikgKyAoYXJyYXlbcG9zICsgM10gPDwgMjQpXG4gICAgICAgICAgICAgICAgICAgIGxlbiA9IChsZW4gJiBXT1JEX01BU0tbc21hbGxMZW5dKSArIDFcbiAgICAgICAgICAgICAgICAgICAgcG9zICs9IHNtYWxsTGVuXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIGlmIChwb3MgKyBsZW4gPiBhcnJheUxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgY29weUJ5dGVzKGFycmF5LCBwb3MsIG91dEJ1ZmZlciwgb3V0UG9zLCBsZW4pXG4gICAgICAgICAgICAgICAgcG9zICs9IGxlblxuICAgICAgICAgICAgICAgIG91dFBvcyArPSBsZW5cbiAgICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAgICAgc3dpdGNoIChjICYgMHgzKSB7XG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAgICAgICAgICAgICAgICAgICAgIGxlbiA9ICgoYyA+Pj4gMikgJiAweDcpICsgNFxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gYXJyYXlbcG9zXSArICgoYyA+Pj4gNSkgPDwgOClcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyArPSAxXG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgICAgICAgICAgICAgICAgICAgICBpZiAocG9zICsgMSA+PSBhcnJheUxlbmd0aCkge1xuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgICAgICAgICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgICAgICAgICAgbGVuID0gKGMgPj4+IDIpICsgMVxuICAgICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gYXJyYXlbcG9zXSArIChhcnJheVtwb3MgKyAxXSA8PCA4KVxuICAgICAgICAgICAgICAgICAgICAgICAgcG9zICs9IDJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAgICAgICAgICAgICAgICAgICAgIGlmIChwb3MgKyAzID49IGFycmF5TGVuZ3RoKSB7XG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICAgICAgICBsZW4gPSAoYyA+Pj4gMikgKyAxXG4gICAgICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBhcnJheVtwb3NdICsgKGFycmF5W3BvcyArIDFdIDw8IDgpICsgKGFycmF5W3BvcyArIDJdIDw8IDE2KSArIChhcnJheVtwb3MgKyAzXSA8PCAyNClcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvcyArPSA0XG4gICAgICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgaWYgKG9mZnNldCA9PT0gMCB8fCBvZmZzZXQgPiBvdXRQb3MpIHtcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgICAgICAgICAgICAgfVxuICAgICAgICAgICAgICAgIHNlbGZDb3B5Qnl0ZXMob3V0QnVmZmVyLCBvdXRQb3MsIG9mZnNldCwgbGVuKVxuICAgICAgICAgICAgICAgIG91dFBvcyArPSBsZW5cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gdHJ1ZVxuICAgIH1cblxuXG4gICAgLy8gdmFyIHNuYXBweUpTID0ge307XG4gICAgLy8gU25hcHB5RGVjb21wcmVzc29yLnByb3RvdHlwZS5yZWFkVW5jb21wcmVzc2VkTGVuZ3RoID0gZnVuY3Rpb24gKCkge1xuICAgIC8vICAgICB2YXIgcmVzdWx0ID0gMFxuICAgIC8vICAgICB2YXIgc2hpZnQgPSAwXG4gICAgLy8gICAgIHZhciBjLCB2YWxcbiAgICAvLyAgICAgd2hpbGUgKHNoaWZ0IDwgMzIgJiYgdGhpcy5wb3MgPCB0aGlzLmFycmF5Lmxlbmd0aCkge1xuICAgIC8vICAgICAgICAgYyA9IHRoaXMuYXJyYXlbdGhpcy5wb3NdXG4gICAgLy8gICAgICAgICB0aGlzLnBvcyArPSAxXG4gICAgLy8gICAgICAgICB2YWwgPSBjICYgMHg3ZlxuICAgIC8vICAgICAgICAgaWYgKCgodmFsIDw8IHNoaWZ0KSA+Pj4gc2hpZnQpICE9PSB2YWwpIHtcbiAgICAvLyAgICAgICAgICAgICByZXR1cm4gLTFcbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgICAgIHJlc3VsdCB8PSB2YWwgPDwgc2hpZnRcbiAgICAvLyAgICAgICAgIGlmIChjIDwgMTI4KSB7XG4gICAgLy8gICAgICAgICAgICAgcmV0dXJuIHJlc3VsdFxuICAgIC8vICAgICAgICAgfVxuICAgIC8vICAgICAgICAgc2hpZnQgKz0gN1xuICAgIC8vICAgICB9XG4gICAgLy8gICAgIHJldHVybiAtMVxuICAgIC8vIH1cbiAgICAvL1xuICAgIC8vIFNuYXBweURlY29tcHJlc3Nvci5wcm90b3R5cGUudW5jb21wcmVzc1RvQnVmZmVyID0gZnVuY3Rpb24gKG91dEJ1ZmZlcikge1xuICAgIC8vICAgICB2YXIgYXJyYXkgPSB0aGlzLmFycmF5XG4gICAgLy8gICAgIHZhciBhcnJheUxlbmd0aCA9IGFycmF5Lmxlbmd0aFxuICAgIC8vICAgICB2YXIgcG9zID0gdGhpcy5wb3NcbiAgICAvLyAgICAgdmFyIG91dFBvcyA9IDBcbiAgICAvL1xuICAgIC8vICAgICB2YXIgYywgbGVuLCBzbWFsbExlblxuICAgIC8vICAgICB2YXIgb2Zmc2V0XG4gICAgLy9cbiAgICAvLyAgICAgd2hpbGUgKHBvcyA8IGFycmF5Lmxlbmd0aCkge1xuICAgIC8vICAgICAgICAgYyA9IGFycmF5W3Bvc11cbiAgICAvLyAgICAgICAgIHBvcyArPSAxXG4gICAgLy8gICAgICAgICBpZiAoKGMgJiAweDMpID09PSAwKSB7XG4gICAgLy8gICAgICAgICAgICAgLy8gTGl0ZXJhbFxuICAgIC8vICAgICAgICAgICAgIGxlbiA9IChjID4+PiAyKSArIDFcbiAgICAvLyAgICAgICAgICAgICBpZiAobGVuID4gNjApIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgaWYgKHBvcyArIDMgPj0gYXJyYXlMZW5ndGgpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgIC8vICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgICAgIHNtYWxsTGVuID0gbGVuIC0gNjBcbiAgICAvLyAgICAgICAgICAgICAgICAgbGVuID0gYXJyYXlbcG9zXSArIChhcnJheVtwb3MgKyAxXSA8PCA4KSArIChhcnJheVtwb3MgKyAyXSA8PCAxNikgKyAoYXJyYXlbcG9zICsgM10gPDwgMjQpXG4gICAgLy8gICAgICAgICAgICAgICAgIGxlbiA9IChsZW4gJiBXT1JEX01BU0tbc21hbGxMZW5dKSArIDFcbiAgICAvLyAgICAgICAgICAgICAgICAgcG9zICs9IHNtYWxsTGVuXG4gICAgLy8gICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgICAgIGlmIChwb3MgKyBsZW4gPiBhcnJheUxlbmd0aCkge1xuICAgIC8vICAgICAgICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAvLyAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgY29weUJ5dGVzKGFycmF5LCBwb3MsIG91dEJ1ZmZlciwgb3V0UG9zLCBsZW4pXG4gICAgLy8gICAgICAgICAgICAgcG9zICs9IGxlblxuICAgIC8vICAgICAgICAgICAgIG91dFBvcyArPSBsZW5cbiAgICAvLyAgICAgICAgIH0gZWxzZSB7XG4gICAgLy8gICAgICAgICAgICAgc3dpdGNoIChjICYgMHgzKSB7XG4gICAgLy8gICAgICAgICAgICAgICAgIGNhc2UgMTpcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGxlbiA9ICgoYyA+Pj4gMikgJiAweDcpICsgNFxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gYXJyYXlbcG9zXSArICgoYyA+Pj4gNSkgPDwgOClcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIHBvcyArPSAxXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgIC8vICAgICAgICAgICAgICAgICBjYXNlIDI6XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBpZiAocG9zICsgMSA+PSBhcnJheUxlbmd0aCkge1xuICAgIC8vICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiBmYWxzZVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgbGVuID0gKGMgPj4+IDIpICsgMVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgb2Zmc2V0ID0gYXJyYXlbcG9zXSArIChhcnJheVtwb3MgKyAxXSA8PCA4KVxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgcG9zICs9IDJcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGJyZWFrXG4gICAgLy8gICAgICAgICAgICAgICAgIGNhc2UgMzpcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIGlmIChwb3MgKyAzID49IGFycmF5TGVuZ3RoKSB7XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBsZW4gPSAoYyA+Pj4gMikgKyAxXG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBvZmZzZXQgPSBhcnJheVtwb3NdICsgKGFycmF5W3BvcyArIDFdIDw8IDgpICsgKGFycmF5W3BvcyArIDJdIDw8IDE2KSArIChhcnJheVtwb3MgKyAzXSA8PCAyNClcbiAgICAvLyAgICAgICAgICAgICAgICAgICAgIHBvcyArPSA0XG4gICAgLy8gICAgICAgICAgICAgICAgICAgICBicmVha1xuICAgIC8vICAgICAgICAgICAgICAgICBkZWZhdWx0OlxuICAgIC8vICAgICAgICAgICAgICAgICAgICAgYnJlYWtcbiAgICAvLyAgICAgICAgICAgICB9XG4gICAgLy8gICAgICAgICAgICAgaWYgKG9mZnNldCA9PT0gMCB8fCBvZmZzZXQgPiBvdXRQb3MpIHtcbiAgICAvLyAgICAgICAgICAgICAgICAgcmV0dXJuIGZhbHNlXG4gICAgLy8gICAgICAgICAgICAgfVxuICAgIC8vICAgICAgICAgICAgIHNlbGZDb3B5Qnl0ZXMob3V0QnVmZmVyLCBvdXRQb3MsIG9mZnNldCwgbGVuKVxuICAgIC8vICAgICAgICAgICAgIG91dFBvcyArPSBsZW5cbiAgICAvLyAgICAgICAgIH1cbiAgICAvLyAgICAgfVxuICAgIC8vICAgICByZXR1cm4gdHJ1ZVxuICAgIC8vIH1cblxuXG4gICAgZnVuY3Rpb24gaXNOb2RlICgpIHtcbiAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgaWYgKHR5cGVvZiBwcm9jZXNzLnZlcnNpb25zID09PSAnb2JqZWN0Jykge1xuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgcHJvY2Vzcy52ZXJzaW9ucy5ub2RlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgICAgICAgICAgICAgICByZXR1cm4gdHJ1ZVxuICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH1cbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gZmFsc2VcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc1VpbnQ4QXJyYXkgKG9iamVjdCkge1xuICAgICAgICByZXR1cm4gb2JqZWN0IGluc3RhbmNlb2YgVWludDhBcnJheSAmJiAoIWlzTm9kZSgpIHx8ICFCdWZmZXIuaXNCdWZmZXIob2JqZWN0KSlcbiAgICB9XG5cbiAgICBmdW5jdGlvbiBpc0FycmF5QnVmZmVyIChvYmplY3QpIHtcbiAgICAgICAgcmV0dXJuIG9iamVjdCBpbnN0YW5jZW9mIEFycmF5QnVmZmVyXG4gICAgfVxuXG4gICAgZnVuY3Rpb24gaXNCdWZmZXIgKG9iamVjdCkge1xuICAgICAgICBpZiAoIWlzTm9kZSgpKSB7XG4gICAgICAgICAgICByZXR1cm4gZmFsc2VcbiAgICAgICAgfVxuICAgICAgICByZXR1cm4gQnVmZmVyLmlzQnVmZmVyKG9iamVjdClcbiAgICB9XG4gICAgdmFyIFRZUEVfRVJST1JfTVNHID0gJ0FyZ3VtZW50IGNvbXByZXNzZWQgbXVzdCBiZSB0eXBlIG9mIEFycmF5QnVmZmVyLCBCdWZmZXIsIG9yIFVpbnQ4QXJyYXknXG4gICAgZnVuY3Rpb24gdW5jb21wcmVzcyAoY29tcHJlc3NlZCkge1xuICAgICAgICBpZiAoIWlzVWludDhBcnJheShjb21wcmVzc2VkKSAmJiAhaXNBcnJheUJ1ZmZlcihjb21wcmVzc2VkKSAmJiAhaXNCdWZmZXIoY29tcHJlc3NlZCkpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBUeXBlRXJyb3IoVFlQRV9FUlJPUl9NU0cpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIHVpbnQ4TW9kZSA9IGZhbHNlXG4gICAgICAgIHZhciBhcnJheUJ1ZmZlck1vZGUgPSBmYWxzZVxuICAgICAgICBpZiAoaXNVaW50OEFycmF5KGNvbXByZXNzZWQpKSB7XG4gICAgICAgICAgICB1aW50OE1vZGUgPSB0cnVlXG4gICAgICAgIH0gZWxzZSBpZiAoaXNBcnJheUJ1ZmZlcihjb21wcmVzc2VkKSkge1xuICAgICAgICAgICAgYXJyYXlCdWZmZXJNb2RlID0gdHJ1ZVxuICAgICAgICAgICAgY29tcHJlc3NlZCA9IG5ldyBVaW50OEFycmF5KGNvbXByZXNzZWQpXG4gICAgICAgIH1cbiAgICAgICAgdmFyIGRlY29tcHJlc3NvciA9IG5ldyBTbmFwcHlEZWNvbXByZXNzb3IoY29tcHJlc3NlZClcbiAgICAgICAgdmFyIGxlbmd0aCA9IGRlY29tcHJlc3Nvci5yZWFkVW5jb21wcmVzc2VkTGVuZ3RoKClcbiAgICAgICAgaWYgKGxlbmd0aCA9PT0gLTEpIHtcbiAgICAgICAgICAgIHRocm93IG5ldyBFcnJvcignSW52YWxpZCBTbmFwcHkgYml0c3RyZWFtJylcbiAgICAgICAgfVxuICAgICAgICB2YXIgdW5jb21wcmVzc2VkLCB1bmNvbXByZXNzZWRWaWV3XG4gICAgICAgIGlmICh1aW50OE1vZGUpIHtcbiAgICAgICAgICAgIHVuY29tcHJlc3NlZCA9IG5ldyBVaW50OEFycmF5KGxlbmd0aClcbiAgICAgICAgICAgIGlmICghZGVjb21wcmVzc29yLnVuY29tcHJlc3NUb0J1ZmZlcih1bmNvbXByZXNzZWQpKSB7XG4gICAgICAgICAgICAgICAgdGhyb3cgbmV3IEVycm9yKCdJbnZhbGlkIFNuYXBweSBiaXRzdHJlYW0nKVxuICAgICAgICAgICAgfVxuICAgICAgICB9IGVsc2UgaWYgKGFycmF5QnVmZmVyTW9kZSkge1xuICAgICAgICAgICAgdW5jb21wcmVzc2VkID0gbmV3IEFycmF5QnVmZmVyKGxlbmd0aClcbiAgICAgICAgICAgIHVuY29tcHJlc3NlZFZpZXcgPSBuZXcgVWludDhBcnJheSh1bmNvbXByZXNzZWQpXG4gICAgICAgICAgICBpZiAoIWRlY29tcHJlc3Nvci51bmNvbXByZXNzVG9CdWZmZXIodW5jb21wcmVzc2VkVmlldykpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgU25hcHB5IGJpdHN0cmVhbScpXG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICB1bmNvbXByZXNzZWQgPSBCdWZmZXIuYWxsb2MobGVuZ3RoKVxuICAgICAgICAgICAgaWYgKCFkZWNvbXByZXNzb3IudW5jb21wcmVzc1RvQnVmZmVyKHVuY29tcHJlc3NlZCkpIHtcbiAgICAgICAgICAgICAgICB0aHJvdyBuZXcgRXJyb3IoJ0ludmFsaWQgU25hcHB5IGJpdHN0cmVhbScpXG4gICAgICAgICAgICB9XG4gICAgICAgIH1cbiAgICAgICAgcmV0dXJuIHVuY29tcHJlc3NlZFxuICAgIH1cblxubW9kdWxlLmV4cG9ydHMgPSB1bmNvbXByZXNzO1xuIl19
